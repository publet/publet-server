(function outer(modules, cache, entries){

  /**
   * Global
   */

  var global = (function(){ return this; })();

  /**
   * Require `name`.
   *
   * @param {String} name
   * @param {Boolean} jumped
   * @api public
   */

  function require(name, jumped){
    if (cache[name]) return cache[name].exports;
    if (modules[name]) return call(name, require);
    throw new Error('cannot find module "' + name + '"');
  }

  /**
   * Call module `id` and cache it.
   *
   * @param {Number} id
   * @param {Function} require
   * @return {Function}
   * @api private
   */

  function call(id, require){
    var m = cache[id] = { exports: {} };
    var mod = modules[id];
    var name = mod[2];
    var fn = mod[0];

    fn.call(m.exports, function(req){
      var dep = modules[id][1][req];
      return require(dep ? dep : req);
    }, m, m.exports, outer, modules, cache, entries);

    // expose as `name`.
    if (name) cache[name] = cache[id];

    return cache[id].exports;
  }

  /**
   * Require all entries exposing them on global if needed.
   */

  for (var id in entries) {
    if (entries[id]) {
      global[entries[id]] = require(id);
    } else {
      require(id);
    }
  }

  /**
   * Duo flag.
   */

  require.duo = true;

  /**
   * Expose cache.
   */

  require.cache = cache;

  /**
   * Expose modules
   */

  require.modules = modules;

  /**
   * Return newest require.
   */

   return require;
})({
1: [function(require, module, exports) {

var assert = require('assert');
var Integrations = require('../index.js');
var sandbox = require('clear-env');
var object = require('object');

/**
 * Initialize mocha.
 */

if ('undefined' != typeof window) {
  mocha.setup({
    ui: 'bdd',
    ignoreLeaks: true,
    slow: 300,
    timeout: 10000
  });
}

/**
 * Assert we have the right number of integrations.
 */

describe('integrations', function(){
  it('should export our integrations', function(){
    assert.equal(74, object.length(Integrations));
  });
});

/**
 * Load integration tests.
 */

require('./tests');

/**
 * Run tests.
 */

if ('undefined' != typeof window) {
  if (window.mochaPhantomJS) {
    mochaPhantomJS.run();
  } else {
    if (window.saucelabs) {
      saucelabs(mocha.run());
    } else {
      mocha.run();
    }
  }
}

}, {"assert":2,"../index.js":3,"clear-env":4,"object":5,"./tests":6}],
2: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var equals = require('equals');
var fmt = require('fmt');
var stack = require('stack');

/**
 * Assert `expr` with optional failure `msg`.
 *
 * @param {Mixed} expr
 * @param {String} [msg]
 * @api public
 */

module.exports = exports = function (expr, msg) {
  if (expr) return;
  throw error(msg || message());
};

/**
 * Assert `actual` is weak equal to `expected`.
 *
 * @param {Mixed} actual
 * @param {Mixed} expected
 * @param {String} [msg]
 * @api public
 */

exports.equal = function (actual, expected, msg) {
  if (actual == expected) return;
  throw error(msg || fmt('Expected %o to equal %o.', actual, expected), actual, expected);
};

/**
 * Assert `actual` is not weak equal to `expected`.
 *
 * @param {Mixed} actual
 * @param {Mixed} expected
 * @param {String} [msg]
 * @api public
 */

exports.notEqual = function (actual, expected, msg) {
  if (actual != expected) return;
  throw error(msg || fmt('Expected %o not to equal %o.', actual, expected));
};

/**
 * Assert `actual` is deep equal to `expected`.
 *
 * @param {Mixed} actual
 * @param {Mixed} expected
 * @param {String} [msg]
 * @api public
 */

exports.deepEqual = function (actual, expected, msg) {
  if (equals(actual, expected)) return;
  throw error(msg || fmt('Expected %o to deeply equal %o.', actual, expected), actual, expected);
};

/**
 * Assert `actual` is not deep equal to `expected`.
 *
 * @param {Mixed} actual
 * @param {Mixed} expected
 * @param {String} [msg]
 * @api public
 */

exports.notDeepEqual = function (actual, expected, msg) {
  if (!equals(actual, expected)) return;
  throw error(msg || fmt('Expected %o not to deeply equal %o.', actual, expected));
};

/**
 * Assert `actual` is strict equal to `expected`.
 *
 * @param {Mixed} actual
 * @param {Mixed} expected
 * @param {String} [msg]
 * @api public
 */

exports.strictEqual = function (actual, expected, msg) {
  if (actual === expected) return;
  throw error(msg || fmt('Expected %o to strictly equal %o.', actual, expected), actual, expected);
};

/**
 * Assert `actual` is not strict equal to `expected`.
 *
 * @param {Mixed} actual
 * @param {Mixed} expected
 * @param {String} [msg]
 * @api public
 */

exports.notStrictEqual = function (actual, expected, msg) {
  if (actual !== expected) return;
  throw error(msg || fmt('Expected %o not to strictly equal %o.', actual, expected));
};

/**
 * Assert `block` throws an `error`.
 *
 * @param {Function} block
 * @param {Function} [error]
 * @param {String} [msg]
 * @api public
 */

exports.throws = function (block, err, msg) {
  var threw;
  try {
    block();
  } catch (e) {
    threw = e;
  }

  if (!threw) throw error(msg || fmt('Expected %s to throw an error.', block.toString()));
  if (err && !(threw instanceof err)) {
    throw error(msg || fmt('Expected %s to throw an %o.', block.toString(), err));
  }
};

/**
 * Assert `block` doesn't throw an `error`.
 *
 * @param {Function} block
 * @param {Function} [error]
 * @param {String} [msg]
 * @api public
 */

exports.doesNotThrow = function (block, err, msg) {
  var threw;
  try {
    block();
  } catch (e) {
    threw = e;
  }

  if (threw) throw error(msg || fmt('Expected %s not to throw an error.', block.toString()));
  if (err && (threw instanceof err)) {
    throw error(msg || fmt('Expected %s not to throw an %o.', block.toString(), err));
  }
};

/**
 * Create a message from the call stack.
 *
 * @return {String}
 * @api private
 */

function message() {
  if (!Error.captureStackTrace) return 'assertion failed';
  var callsite = stack()[2];
  var fn = callsite.getFunctionName();
  var file = callsite.getFileName();
  var line = callsite.getLineNumber() - 1;
  var col = callsite.getColumnNumber() - 1;
  var src = get(file);
  line = src.split('\n')[line].slice(col);
  var m = line.match(/assert\((.*)\)/);
  return m && m[1].trim();
}

/**
 * Load contents of `script`.
 *
 * @param {String} script
 * @return {String}
 * @api private
 */

function get(script) {
  var xhr = new XMLHttpRequest;
  xhr.open('GET', script, false);
  xhr.send(null);
  return xhr.responseText;
}

/**
 * Error with `msg`, `actual` and `expected`.
 *
 * @param {String} msg
 * @param {Mixed} actual
 * @param {Mixed} expected
 * @return {Error}
 */

function error(msg, actual, expected){
  var err = new Error(msg);
  err.showDiff = 3 == arguments.length;
  err.actual = actual;
  err.expected = expected;
  return err;
}

}, {"equals":7,"fmt":8,"stack":9}],
7: [function(require, module, exports) {

var type = require('type')

// (any, any, [array]) -> boolean
function equals(a, b, memos){
  // All identical values are equivalent
  if (a === b) return true
  var fnA = types[type(a)]
  var fnB = types[type(b)]
  return fnA && fnA === fnB
    ? fnA(a, b, memos)
    : false
}

var types = {}

// (Number) -> boolean
types.number = function(a){
  // NaN check
  return a !== a
}

// (function, function, array) -> boolean
types['function'] = function(a, b, memos){
  return a.toString() === b.toString()
    // Functions can act as objects
    && types.object(a, b, memos)
    && equals(a.prototype, b.prototype)
}

// (date, date) -> boolean
types.date = function(a, b){
  return +a === +b
}

// (regexp, regexp) -> boolean
types.regexp = function(a, b){
  return a.toString() === b.toString()
}

// (DOMElement, DOMElement) -> boolean
types.element = function(a, b){
  return a.outerHTML === b.outerHTML
}

// (textnode, textnode) -> boolean
types.textnode = function(a, b){
  return a.textContent === b.textContent
}

// decorate `fn` to prevent it re-checking objects
// (function) -> function
function memoGaurd(fn){
  return function(a, b, memos){
    if (!memos) return fn(a, b, [])
    var i = memos.length, memo
    while (memo = memos[--i]) {
      if (memo[0] === a && memo[1] === b) return true
    }
    return fn(a, b, memos)
  }
}

types['arguments'] =
types.array = memoGaurd(compareArrays)

// (array, array, array) -> boolean
function compareArrays(a, b, memos){
  var i = a.length
  if (i !== b.length) return false
  memos.push([a, b])
  while (i--) {
    if (!equals(a[i], b[i], memos)) return false
  }
  return true
}

types.object = memoGaurd(compareObjects)

// (object, object, array) -> boolean
function compareObjects(a, b, memos) {
  var ka = getEnumerableProperties(a)
  var kb = getEnumerableProperties(b)
  var i = ka.length

  // same number of properties
  if (i !== kb.length) return false

  // although not necessarily the same order
  ka.sort()
  kb.sort()

  // cheap key test
  while (i--) if (ka[i] !== kb[i]) return false

  // remember
  memos.push([a, b])

  // iterate again this time doing a thorough check
  i = ka.length
  while (i--) {
    var key = ka[i]
    if (!equals(a[key], b[key], memos)) return false
  }

  return true
}

// (object) -> array
function getEnumerableProperties (object) {
  var result = []
  for (var k in object) if (k !== 'constructor') {
    result.push(k)
  }
  return result
}

/**
 * assert all values are equal
 *
 * @param {Any} [...]
 * @return {Boolean}
 */

function allEqual(){
  var i = arguments.length - 1
  while (i > 0) {
    if (!equals(arguments[i], arguments[--i])) return false
  }
  return true
}

/**
 * expose equals
 */

module.exports = allEqual
allEqual.compare = equals

}, {"type":10}],
10: [function(require, module, exports) {

var toString = {}.toString
var DomNode = typeof window != 'undefined'
  ? window.Node
  : Function

/**
 * Return the type of `val`.
 *
 * @param {Mixed} val
 * @return {String}
 * @api public
 */

module.exports = exports = function(x){
  var type = typeof x
  if (type != 'object') return type
  type = types[toString.call(x)]
  if (type) return type
  if (x instanceof DomNode) switch (x.nodeType) {
    case 1:  return 'element'
    case 3:  return 'text-node'
    case 9:  return 'document'
    case 11: return 'document-fragment'
    default: return 'dom-node'
  }
}

var types = exports.types = {
  '[object Function]': 'function',
  '[object Date]': 'date',
  '[object RegExp]': 'regexp',
  '[object Arguments]': 'arguments',
  '[object Array]': 'array',
  '[object String]': 'string',
  '[object Null]': 'null',
  '[object Undefined]': 'undefined',
  '[object Number]': 'number',
  '[object Boolean]': 'boolean',
  '[object Object]': 'object',
  '[object Text]': 'text-node',
  '[object Uint8Array]': 'bit-array',
  '[object Uint16Array]': 'bit-array',
  '[object Uint32Array]': 'bit-array',
  '[object Uint8ClampedArray]': 'bit-array',
  '[object Error]': 'error',
  '[object FormData]': 'form-data',
  '[object File]': 'file',
  '[object Blob]': 'blob'
}

}, {}],
8: [function(require, module, exports) {

/**
 * Export `fmt`
 */

module.exports = fmt;

/**
 * Formatters
 */

fmt.o = JSON.stringify;
fmt.s = String;
fmt.d = parseInt;

/**
 * Format the given `str`.
 *
 * @param {String} str
 * @param {...} args
 * @return {String}
 * @api public
 */

function fmt(str){
  var args = [].slice.call(arguments, 1);
  var j = 0;

  return str.replace(/%([a-z])/gi, function(_, f){
    return fmt[f]
      ? fmt[f](args[j++])
      : _ + f;
  });
}

}, {}],
9: [function(require, module, exports) {

/**
 * Expose `stack()`.
 */

module.exports = stack;

/**
 * Return the stack.
 *
 * @return {Array}
 * @api public
 */

function stack() {
  var orig = Error.prepareStackTrace;
  Error.prepareStackTrace = function(_, stack){ return stack; };
  var err = new Error;
  Error.captureStackTrace(err, arguments.callee);
  var stack = err.stack;
  Error.prepareStackTrace = orig;
  return stack;
}
}, {}],
3: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var each = require('each');
var plugins = require('./integrations.js');

/**
 * Expose the integrations, using their own `name` from their `prototype`.
 */

each(plugins, function(plugin){
  var name = (plugin.Integration || plugin).prototype.name;
  exports[name] = plugin;
});



}, {"each":11,"./integrations.js":12}],
11: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var type = require('type');

/**
 * HOP reference.
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Iterate the given `obj` and invoke `fn(val, i)`.
 *
 * @param {String|Array|Object} obj
 * @param {Function} fn
 * @api public
 */

module.exports = function(obj, fn){
  switch (type(obj)) {
    case 'array':
      return array(obj, fn);
    case 'object':
      if ('number' == typeof obj.length) return array(obj, fn);
      return object(obj, fn);
    case 'string':
      return string(obj, fn);
  }
};

/**
 * Iterate string chars.
 *
 * @param {String} obj
 * @param {Function} fn
 * @api private
 */

function string(obj, fn) {
  for (var i = 0; i < obj.length; ++i) {
    fn(obj.charAt(i), i);
  }
}

/**
 * Iterate object keys.
 *
 * @param {Object} obj
 * @param {Function} fn
 * @api private
 */

function object(obj, fn) {
  for (var key in obj) {
    if (has.call(obj, key)) {
      fn(key, obj[key]);
    }
  }
}

/**
 * Iterate array-ish.
 *
 * @param {Array|Object} obj
 * @param {Function} fn
 * @api private
 */

function array(obj, fn) {
  for (var i = 0; i < obj.length; ++i) {
    fn(obj[i], i);
  }
}
}, {"type":13}],
13: [function(require, module, exports) {

/**
 * toString ref.
 */

var toString = Object.prototype.toString;

/**
 * Return the type of `val`.
 *
 * @param {Mixed} val
 * @return {String}
 * @api public
 */

module.exports = function(val){
  switch (toString.call(val)) {
    case '[object Function]': return 'function';
    case '[object Date]': return 'date';
    case '[object RegExp]': return 'regexp';
    case '[object Arguments]': return 'arguments';
    case '[object Array]': return 'array';
    case '[object String]': return 'string';
  }

  if (val === null) return 'null';
  if (val === undefined) return 'undefined';
  if (val && val.nodeType === 1) return 'element';
  if (val === Object(val)) return 'object';

  return typeof val;
};

}, {}],
12: [function(require, module, exports) {

/**
 * DON'T EDIT THIS FILE. It's automatically generated!
 */

module.exports = [
  require('./lib/adroll'),
  require('./lib/adwords'),
  require('./lib/alexa'),
  require('./lib/amplitude'),
  require('./lib/appcues'),
  require('./lib/awesm'),
  require('./lib/awesomatic'),
  require('./lib/bing-ads'),
  require('./lib/bronto'),
  require('./lib/bugherd'),
  require('./lib/bugsnag'),
  require('./lib/chartbeat'),
  require('./lib/churnbee'),
  require('./lib/clicktale'),
  require('./lib/clicky'),
  require('./lib/comscore'),
  require('./lib/crazy-egg'),
  require('./lib/curebit'),
  require('./lib/customerio'),
  require('./lib/drip'),
  require('./lib/errorception'),
  require('./lib/evergage'),
  require('./lib/facebook-conversion-tracking'),
  require('./lib/foxmetrics'),
  require('./lib/frontleaf'),
  require('./lib/fullstory'),
  require('./lib/gauges'),
  require('./lib/get-satisfaction'),
  require('./lib/google-analytics'),
  require('./lib/google-tag-manager'),
  require('./lib/gosquared'),
  require('./lib/heap'),
  require('./lib/hellobar'),
  require('./lib/hittail'),
  require('./lib/hubspot'),
  require('./lib/improvely'),
  require('./lib/insidevault'),
  require('./lib/inspectlet'),
  require('./lib/intercom'),
  require('./lib/keen-io'),
  require('./lib/kenshoo'),
  require('./lib/kissmetrics'),
  require('./lib/klaviyo'),
  require('./lib/leadlander'),
  require('./lib/livechat'),
  require('./lib/lucky-orange'),
  require('./lib/lytics'),
  require('./lib/mixpanel'),
  require('./lib/mojn'),
  require('./lib/mouseflow'),
  require('./lib/mousestats'),
  require('./lib/navilytics'),
  require('./lib/olark'),
  require('./lib/optimizely'),
  require('./lib/perfect-audience'),
  require('./lib/pingdom'),
  require('./lib/piwik'),
  require('./lib/preact'),
  require('./lib/publet-integration'),
  require('./lib/qualaroo'),
  require('./lib/quantcast'),
  require('./lib/rollbar'),
  require('./lib/saasquatch'),
  require('./lib/sentry'),
  require('./lib/snapengage'),
  require('./lib/spinnakr'),
  require('./lib/tapstream'),
  require('./lib/trakio'),
  require('./lib/twitter-ads'),
  require('./lib/uservoice'),
  require('./lib/vero'),
  require('./lib/visual-website-optimizer'),
  require('./lib/webengage'),
  require('./lib/woopra'),
  require('./lib/yandex-metrica')
];

}, {"./lib/adroll":14,"./lib/adwords":15,"./lib/alexa":16,"./lib/amplitude":17,"./lib/appcues":18,"./lib/awesm":19,"./lib/awesomatic":20,"./lib/bing-ads":21,"./lib/bronto":22,"./lib/bugherd":23,"./lib/bugsnag":24,"./lib/chartbeat":25,"./lib/churnbee":26,"./lib/clicktale":27,"./lib/clicky":28,"./lib/comscore":29,"./lib/crazy-egg":30,"./lib/curebit":31,"./lib/customerio":32,"./lib/drip":33,"./lib/errorception":34,"./lib/evergage":35,"./lib/facebook-conversion-tracking":36,"./lib/foxmetrics":37,"./lib/frontleaf":38,"./lib/fullstory":39,"./lib/gauges":40,"./lib/get-satisfaction":41,"./lib/google-analytics":42,"./lib/google-tag-manager":43,"./lib/gosquared":44,"./lib/heap":45,"./lib/hellobar":46,"./lib/hittail":47,"./lib/hubspot":48,"./lib/improvely":49,"./lib/insidevault":50,"./lib/inspectlet":51,"./lib/intercom":52,"./lib/keen-io":53,"./lib/kenshoo":54,"./lib/kissmetrics":55,"./lib/klaviyo":56,"./lib/leadlander":57,"./lib/livechat":58,"./lib/lucky-orange":59,"./lib/lytics":60,"./lib/mixpanel":61,"./lib/mojn":62,"./lib/mouseflow":63,"./lib/mousestats":64,"./lib/navilytics":65,"./lib/olark":66,"./lib/optimizely":67,"./lib/perfect-audience":68,"./lib/pingdom":69,"./lib/piwik":70,"./lib/preact":71,"./lib/publet-integration":72,"./lib/qualaroo":73,"./lib/quantcast":74,"./lib/rollbar":75,"./lib/saasquatch":76,"./lib/sentry":77,"./lib/snapengage":78,"./lib/spinnakr":79,"./lib/tapstream":80,"./lib/trakio":81,"./lib/twitter-ads":82,"./lib/uservoice":83,"./lib/vero":84,"./lib/visual-website-optimizer":85,"./lib/webengage":86,"./lib/woopra":87,"./lib/yandex-metrica":88}],
14: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var snake = require('to-snake-case');
var useHttps = require('use-https');
var each = require('each');
var is = require('is');

/**
 * HOP
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Expose `AdRoll` integration.
 */

var AdRoll = module.exports = integration('AdRoll')
  .assumesPageview()
  .global('__adroll_loaded')
  .global('adroll_adv_id')
  .global('adroll_pix_id')
  .global('adroll_custom_data')
  .option('advId', '')
  .option('pixId', '')
  .tag('http', '<script src="http://a.adroll.com/j/roundtrip.js">')
  .tag('https', '<script src="https://s.adroll.com/j/roundtrip.js">')
  .mapping('events');

/**
 * Initialize.
 *
 * http://support.adroll.com/getting-started-in-4-easy-steps/#step-one
 * http://support.adroll.com/enhanced-conversion-tracking/
 *
 * @param {Object} page
 */

AdRoll.prototype.initialize = function(page){
  window.adroll_adv_id = this.options.advId;
  window.adroll_pix_id = this.options.pixId;
  window.__adroll_loaded = true;
  var name = useHttps() ? 'https' : 'http';
  this.load(name, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

AdRoll.prototype.loaded = function(){
  return window.__adroll;
};

/**
 * Page.
 *
 * http://support.adroll.com/segmenting-clicks/
 *
 * @param {Page} page
 */

AdRoll.prototype.page = function(page){
  var name = page.fullName();
  this.track(page.track(name));
};

/**
 * Track.
 *
 * @param {Track} track
 */

AdRoll.prototype.track = function(track){
  var event = track.event();
  var user = this.analytics.user();
  var events = this.events(event);
  var total = track.revenue() || track.total() || 0;
  var orderId = track.orderId() || 0;

  each(events, function(event){
    var data = {};
    if (user.id()) data.user_id = user.id();
    data.adroll_conversion_value_in_dollars = total;
    data.order_id = orderId;
    // the adroll interface only allows for
    // segment names which are snake cased.
    data.adroll_segments = snake(event);
    window.__adroll.record_user(data);
  });

  // no events found
  if (!events.length) {
    var data = {};
    if (user.id()) data.user_id = user.id();
    data.adroll_segments = snake(event);
    window.__adroll.record_user(data);
  }
};

}, {"analytics.js-integration":89,"to-snake-case":90,"use-https":91,"each":11,"is":92}],
89: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var bind = require('bind');
var callback = require('callback');
var clone = require('clone');
var debug = require('debug');
var defaults = require('defaults');
var protos = require('./protos');
var slug = require('slug');
var statics = require('./statics');

/**
 * Expose `createIntegration`.
 */

module.exports = createIntegration;

/**
 * Create a new `Integration` constructor.
 *
 * @param {String} name
 * @return {Function} Integration
 */

function createIntegration(name){

  /**
   * Initialize a new `Integration`.
   *
   * @param {Object} options
   */

  function Integration(options){
    if (options && options.addIntegration) {
      // plugin
      return options.addIntegration(Integration);
    }
    this.debug = debug('analytics:integration:' + slug(name));
    this.options = defaults(clone(options) || {}, this.defaults);
    this._queue = [];
    this.once('ready', bind(this, this.flush));

    Integration.emit('construct', this);
    this.ready = bind(this, this.ready);
    this._wrapInitialize();
    this._wrapPage();
    this._wrapTrack();
  }

  Integration.prototype.defaults = {};
  Integration.prototype.globals = [];
  Integration.prototype.templates = {};
  Integration.prototype.name = name;
  for (var key in statics) Integration[key] = statics[key];
  for (var key in protos) Integration.prototype[key] = protos[key];
  return Integration;
}

}, {"bind":93,"callback":94,"clone":95,"debug":96,"defaults":97,"./protos":98,"slug":99,"./statics":100}],
93: [function(require, module, exports) {

var bind = require('bind')
  , bindAll = require('bind-all');


/**
 * Expose `bind`.
 */

module.exports = exports = bind;


/**
 * Expose `bindAll`.
 */

exports.all = bindAll;


/**
 * Expose `bindMethods`.
 */

exports.methods = bindMethods;


/**
 * Bind `methods` on `obj` to always be called with the `obj` as context.
 *
 * @param {Object} obj
 * @param {String} methods...
 */

function bindMethods (obj, methods) {
  methods = [].slice.call(arguments, 1);
  for (var i = 0, method; method = methods[i]; i++) {
    obj[method] = bind(obj, obj[method]);
  }
  return obj;
}
}, {"bind":101,"bind-all":102}],
101: [function(require, module, exports) {
/**
 * Slice reference.
 */

var slice = [].slice;

/**
 * Bind `obj` to `fn`.
 *
 * @param {Object} obj
 * @param {Function|String} fn or string
 * @return {Function}
 * @api public
 */

module.exports = function(obj, fn){
  if ('string' == typeof fn) fn = obj[fn];
  if ('function' != typeof fn) throw new Error('bind() requires a function');
  var args = slice.call(arguments, 2);
  return function(){
    return fn.apply(obj, args.concat(slice.call(arguments)));
  }
};

}, {}],
102: [function(require, module, exports) {

try {
  var bind = require('bind');
  var type = require('type');
} catch (e) {
  var bind = require('bind-component');
  var type = require('type-component');
}

module.exports = function (obj) {
  for (var key in obj) {
    var val = obj[key];
    if (type(val) === 'function') obj[key] = bind(obj, obj[key]);
  }
  return obj;
};
}, {"bind":101,"type":13}],
94: [function(require, module, exports) {
var next = require('next-tick');


/**
 * Expose `callback`.
 */

module.exports = callback;


/**
 * Call an `fn` back synchronously if it exists.
 *
 * @param {Function} fn
 */

function callback (fn) {
  if ('function' === typeof fn) fn();
}


/**
 * Call an `fn` back asynchronously if it exists. If `wait` is ommitted, the
 * `fn` will be called on next tick.
 *
 * @param {Function} fn
 * @param {Number} wait (optional)
 */

callback.async = function (fn, wait) {
  if ('function' !== typeof fn) return;
  if (!wait) return next(fn);
  setTimeout(fn, wait);
};


/**
 * Symmetry.
 */

callback.sync = callback;

}, {"next-tick":103}],
103: [function(require, module, exports) {
"use strict"

if (typeof setImmediate == 'function') {
  module.exports = function(f){ setImmediate(f) }
}
// legacy node.js
else if (typeof process != 'undefined' && typeof process.nextTick == 'function') {
  module.exports = process.nextTick
}
// fallback for other environments / postMessage behaves badly on IE8
else if (typeof window == 'undefined' || window.ActiveXObject || !window.postMessage) {
  module.exports = function(f){ setTimeout(f) };
} else {
  var q = [];

  window.addEventListener('message', function(){
    var i = 0;
    while (i < q.length) {
      try { q[i++](); }
      catch (e) {
        q = q.slice(i);
        window.postMessage('tic!', '*');
        throw e;
      }
    }
    q.length = 0;
  }, true);

  module.exports = function(fn){
    if (!q.length) window.postMessage('tic!', '*');
    q.push(fn);
  }
}

}, {}],
95: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var type;

try {
  type = require('type');
} catch(e){
  type = require('type-component');
}

/**
 * Module exports.
 */

module.exports = clone;

/**
 * Clones objects.
 *
 * @param {Mixed} any object
 * @api public
 */

function clone(obj){
  switch (type(obj)) {
    case 'object':
      var copy = {};
      for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
          copy[key] = clone(obj[key]);
        }
      }
      return copy;

    case 'array':
      var copy = new Array(obj.length);
      for (var i = 0, l = obj.length; i < l; i++) {
        copy[i] = clone(obj[i]);
      }
      return copy;

    case 'regexp':
      // from millermedeiros/amd-utils - MIT
      var flags = '';
      flags += obj.multiline ? 'm' : '';
      flags += obj.global ? 'g' : '';
      flags += obj.ignoreCase ? 'i' : '';
      return new RegExp(obj.source, flags);

    case 'date':
      return new Date(obj.getTime());

    default: // string, number, boolean, …
      return obj;
  }
}

}, {"type":13}],
96: [function(require, module, exports) {
if ('undefined' == typeof window) {
  module.exports = require('./lib/debug');
} else {
  module.exports = require('./debug');
}

}, {"./lib/debug":104,"./debug":105}],
104: [function(require, module, exports) {
/**
 * Module dependencies.
 */

var tty = require('tty');

/**
 * Expose `debug()` as the module.
 */

module.exports = debug;

/**
 * Enabled debuggers.
 */

var names = []
  , skips = [];

(process.env.DEBUG || '')
  .split(/[\s,]+/)
  .forEach(function(name){
    name = name.replace('*', '.*?');
    if (name[0] === '-') {
      skips.push(new RegExp('^' + name.substr(1) + '$'));
    } else {
      names.push(new RegExp('^' + name + '$'));
    }
  });

/**
 * Colors.
 */

var colors = [6, 2, 3, 4, 5, 1];

/**
 * Previous debug() call.
 */

var prev = {};

/**
 * Previously assigned color.
 */

var prevColor = 0;

/**
 * Is stdout a TTY? Colored output is disabled when `true`.
 */

var isatty = tty.isatty(2);

/**
 * Select a color.
 *
 * @return {Number}
 * @api private
 */

function color() {
  return colors[prevColor++ % colors.length];
}

/**
 * Humanize the given `ms`.
 *
 * @param {Number} m
 * @return {String}
 * @api private
 */

function humanize(ms) {
  var sec = 1000
    , min = 60 * 1000
    , hour = 60 * min;

  if (ms >= hour) return (ms / hour).toFixed(1) + 'h';
  if (ms >= min) return (ms / min).toFixed(1) + 'm';
  if (ms >= sec) return (ms / sec | 0) + 's';
  return ms + 'ms';
}

/**
 * Create a debugger with the given `name`.
 *
 * @param {String} name
 * @return {Type}
 * @api public
 */

function debug(name) {
  function disabled(){}
  disabled.enabled = false;

  var match = skips.some(function(re){
    return re.test(name);
  });

  if (match) return disabled;

  match = names.some(function(re){
    return re.test(name);
  });

  if (!match) return disabled;
  var c = color();

  function colored(fmt) {
    fmt = coerce(fmt);

    var curr = new Date;
    var ms = curr - (prev[name] || curr);
    prev[name] = curr;

    fmt = '  \u001b[9' + c + 'm' + name + ' '
      + '\u001b[3' + c + 'm\u001b[90m'
      + fmt + '\u001b[3' + c + 'm'
      + ' +' + humanize(ms) + '\u001b[0m';

    console.error.apply(this, arguments);
  }

  function plain(fmt) {
    fmt = coerce(fmt);

    fmt = new Date().toUTCString()
      + ' ' + name + ' ' + fmt;
    console.error.apply(this, arguments);
  }

  colored.enabled = plain.enabled = true;

  return isatty || process.env.DEBUG_COLORS
    ? colored
    : plain;
}

/**
 * Coerce `val`.
 */

function coerce(val) {
  if (val instanceof Error) return val.stack || val.message;
  return val;
}

}, {}],
105: [function(require, module, exports) {

/**
 * Expose `debug()` as the module.
 */

module.exports = debug;

/**
 * Create a debugger with the given `name`.
 *
 * @param {String} name
 * @return {Type}
 * @api public
 */

function debug(name) {
  if (!debug.enabled(name)) return function(){};

  return function(fmt){
    fmt = coerce(fmt);

    var curr = new Date;
    var ms = curr - (debug[name] || curr);
    debug[name] = curr;

    fmt = name
      + ' '
      + fmt
      + ' +' + debug.humanize(ms);

    // This hackery is required for IE8
    // where `console.log` doesn't have 'apply'
    window.console
      && console.log
      && Function.prototype.apply.call(console.log, console, arguments);
  }
}

/**
 * The currently active debug mode names.
 */

debug.names = [];
debug.skips = [];

/**
 * Enables a debug mode by name. This can include modes
 * separated by a colon and wildcards.
 *
 * @param {String} name
 * @api public
 */

debug.enable = function(name) {
  try {
    localStorage.debug = name;
  } catch(e){}

  var split = (name || '').split(/[\s,]+/)
    , len = split.length;

  for (var i = 0; i < len; i++) {
    name = split[i].replace('*', '.*?');
    if (name[0] === '-') {
      debug.skips.push(new RegExp('^' + name.substr(1) + '$'));
    }
    else {
      debug.names.push(new RegExp('^' + name + '$'));
    }
  }
};

/**
 * Disable debug output.
 *
 * @api public
 */

debug.disable = function(){
  debug.enable('');
};

/**
 * Humanize the given `ms`.
 *
 * @param {Number} m
 * @return {String}
 * @api private
 */

debug.humanize = function(ms) {
  var sec = 1000
    , min = 60 * 1000
    , hour = 60 * min;

  if (ms >= hour) return (ms / hour).toFixed(1) + 'h';
  if (ms >= min) return (ms / min).toFixed(1) + 'm';
  if (ms >= sec) return (ms / sec | 0) + 's';
  return ms + 'ms';
};

/**
 * Returns true if the given mode name is enabled, false otherwise.
 *
 * @param {String} name
 * @return {Boolean}
 * @api public
 */

debug.enabled = function(name) {
  for (var i = 0, len = debug.skips.length; i < len; i++) {
    if (debug.skips[i].test(name)) {
      return false;
    }
  }
  for (var i = 0, len = debug.names.length; i < len; i++) {
    if (debug.names[i].test(name)) {
      return true;
    }
  }
  return false;
};

/**
 * Coerce `val`.
 */

function coerce(val) {
  if (val instanceof Error) return val.stack || val.message;
  return val;
}

// persist

try {
  if (window.localStorage) debug.enable(localStorage.debug);
} catch(e){}

}, {}],
97: [function(require, module, exports) {
'use strict';

/**
 * Merge default values.
 *
 * @param {Object} dest
 * @param {Object} defaults
 * @return {Object}
 * @api public
 */
var defaults = function (dest, src, recursive) {
  for (var prop in src) {
    if (recursive && dest[prop] instanceof Object && src[prop] instanceof Object) {
      dest[prop] = defaults(dest[prop], src[prop], true);
    } else if (! (prop in dest)) {
      dest[prop] = src[prop];
    }
  }

  return dest;
};

/**
 * Expose `defaults`.
 */
module.exports = defaults;

}, {}],
98: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var loadScript = require('segmentio/load-script');
var events = require('analytics-events');
var normalize = require('to-no-case');
var callback = require('callback');
var Emitter = require('emitter');
var tick = require('next-tick');
var after = require('after');
var each = require('component/each');
var type = require('type');
var fmt = require('fmt');

/**
 * Noop.
 */

function noop(){}

/**
 * Window defaults.
 */

var setTimeout = window.setTimeout;
var setInterval = window.setInterval;
var onerror = window.onerror;
var onload = null;

/**
 * Mixin emitter.
 */

Emitter(exports);

/**
 * Initialize.
 */

exports.initialize = function(){
  var ready = this.ready;
  tick(ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 * @api private
 */

exports.loaded = function(){
  return false;
};

/**
 * Page.
 *
 * @param {Page} page
 */

exports.page = function(page){};

/**
 * Track.
 *
 * @param {Track} track
 */

exports.track = function(track){};

/**
 * Get events that match `str`.
 *
 * Examples:
 *
 *    events = { my_event: 'a4991b88' }
 *    .map(events, 'My Event');
 *    // => ["a4991b88"]
 *    .map(events, 'whatever');
 *    // => []
 *
 *    events = [{ key: 'my event', value: '9b5eb1fa' }]
 *    .map(events, 'my_event');
 *    // => ["9b5eb1fa"]
 *    .map(events, 'whatever');
 *    // => []
 *
 * @param {String} str
 * @return {Array}
 * @api public
 */

exports.map = function(obj, str){
  var a = normalize(str);
  var ret = [];

  // noop
  if (!obj) return ret;

  // object
  if ('object' == type(obj)) {
    for (var k in obj) {
      var item = obj[k];
      var b = normalize(k);
      if (b == a) ret.push(item);
    }
  }

  // array
  if ('array' == type(obj)) {
    if (!obj.length) return ret;
    if (!obj[0].key) return ret;

    for (var i = 0; i < obj.length; ++i) {
      var item = obj[i];
      var b = normalize(item.key);
      if (b == a) ret.push(item.value);
    }
  }

  return ret;
};

/**
 * Invoke a `method` that may or may not exist on the prototype with `args`,
 * queueing or not depending on whether the integration is "ready". Don't
 * trust the method call, since it contains integration party code.
 *
 * @param {String} method
 * @param {Mixed} args...
 * @api private
 */

exports.invoke = function(method){
  if (!this[method]) return;
  var args = [].slice.call(arguments, 1);
  if (!this._ready) return this.queue(method, args);
  var ret;

  try {
    this.debug('%s with %o', method, args);
    ret = this[method].apply(this, args);
  } catch (e) {
    this.debug('error %o calling %s with %o', e, method, args);
  }

  return ret;
};

/**
 * Queue a `method` with `args`. If the integration assumes an initial
 * pageview, then let the first call to `page` pass through.
 *
 * @param {String} method
 * @param {Array} args
 * @api private
 */

exports.queue = function(method, args){
  if ('page' == method && this._assumesPageview && !this._initialized) {
    return this.page.apply(this, args);
  }

  this._queue.push({ method: method, args: args });
};

/**
 * Flush the internal queue.
 *
 * @api private
 */

exports.flush = function(){
  this._ready = true;
  var call;
  while (call = this._queue.shift()) this[call.method].apply(this, call.args);
};

/**
 * Reset the integration, removing its global variables.
 *
 * @api private
 */

exports.reset = function(){
  for (var i = 0, key; key = this.globals[i]; i++) window[key] = undefined;
  window.setTimeout = setTimeout;
  window.setInterval = setInterval;
  window.onerror = onerror;
  window.onload = onload;
};

/**
 * Load a tag by `name`.
 *
 * @param {String} name
 * @param {Function} [fn]
 */

exports.load = function(name, locals, fn){
  if ('function' == typeof name) fn = name, locals = null, name = null;
  if (name && 'object' == typeof name) fn = locals, locals = name, name = null;
  if ('function' == typeof locals) fn = locals, locals = null;
  name = name || 'library';
  locals = locals || {};
  locals = this.locals(locals);
  var template = this.templates[name];
  if (!template) throw new Error(fmt('template "%s" not defined.', name));
  var attrs = render(template, locals);
  var fn = fn || noop;
  var self = this;
  var el;

  switch (template.type) {
    case 'img':
      attrs.width = 1;
      attrs.height = 1;
      el = loadImage(attrs, fn);
      break;
    case 'script':
      el = loadScript(attrs, function(err){
        if (!err) return fn();
        self.debug('error loading "%s" error="%s"', self.name, err);
      });
      // TODO: hack until refactoring load-script
      delete attrs.src;
      each(attrs, function(key, val){
        el.setAttribute(key, val);
      });
      break;
    case 'iframe':
      el = loadIframe(attrs, fn);
      break;
  }

  return el;
};

/**
 * Locals for tag templates.
 *
 * By default it includes a cache buster,
 * and all of the options.
 *
 * @param {Object} [locals]
 * @return {Object}
 */

exports.locals = function(locals){
  locals = locals || {};
  var cache = Math.floor(new Date().getTime() / 3600000);
  if (!locals.hasOwnProperty('cache')) locals.cache = cache;
  each(this.options, function(key, val){
    if (!locals.hasOwnProperty(key)) locals[key] = val;
  });
  return locals;
};

/**
 * Simple way to emit ready.
 */

exports.ready = function(){
  this.emit('ready');
};

/**
 * Wrap the initialize method in an exists check, so we don't have to do it for
 * every single integration.
 *
 * @api private
 */

exports._wrapInitialize = function(){
  var initialize = this.initialize;
  this.initialize = function(){
    this.debug('initialize');
    this._initialized = true;
    var ret = initialize.apply(this, arguments);
    this.emit('initialize');
    return ret;
  };

  if (this._assumesPageview) this.initialize = after(2, this.initialize);
};

/**
 * Wrap the page method to call `initialize` instead if the integration assumes
 * a pageview.
 *
 * @api private
 */

exports._wrapPage = function(){
  var page = this.page;
  this.page = function(){
    if (this._assumesPageview && !this._initialized) {
      return this.initialize.apply(this, arguments);
    }

    return page.apply(this, arguments);
  };
};

/**
 * Wrap the track method to call other ecommerce methods if
 * available depending on the `track.event()`.
 *
 * @api private
 */

exports._wrapTrack = function(){
  var t = this.track;
  this.track = function(track){
    var event = track.event();
    var called;
    var ret;

    for (var method in events) {
      var regexp = events[method];
      if (!this[method]) continue;
      if (!regexp.test(event)) continue;
      ret = this[method].apply(this, arguments);
      called = true;
      break;
    }

    if (!called) ret = t.apply(this, arguments);
    return ret;
  };
};

function loadImage(attrs, fn) {
  fn = fn || function(){};
  var img = new Image;
  img.onerror = error(fn, 'failed to load pixel', img);
  img.onload = function(){ fn(); };
  img.src = attrs.src;
  img.width = 1;
  img.height = 1;
  return img;
}

function error(fn, message, img){
  return function(e){
    e = e || window.event;
    var err = new Error(message);
    err.event = e;
    err.source = img;
    fn(err);
  };
}

/**
 * Render template + locals into an `attrs` object.
 *
 * @param {Object} template
 * @param {Object} locals
 * @return {Object}
 */

function render(template, locals) {
  var attrs = {};
  each(template.attrs, function(key, val){
    attrs[key] = val.replace(/\{\{\ *(\w+)\ *\}\}/g, function(_, $1){
      return locals[$1];
    });
  });
  return attrs;
}


}, {"segmentio/load-script":106,"analytics-events":107,"to-no-case":108,"callback":94,"emitter":109,"next-tick":103,"after":110,"component/each":111,"type":13,"fmt":112}],
106: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var onload = require('script-onload');
var tick = require('next-tick');
var type = require('type');

/**
 * Expose `loadScript`.
 *
 * @param {Object} options
 * @param {Function} fn
 * @api public
 */

module.exports = function loadScript(options, fn){
  if (!options) throw new Error('Cant load nothing...');

  // Allow for the simplest case, just passing a `src` string.
  if ('string' == type(options)) options = { src : options };

  var https = document.location.protocol === 'https:' ||
              document.location.protocol === 'chrome-extension:';

  // If you use protocol relative URLs, third-party scripts like Google
  // Analytics break when testing with `file:` so this fixes that.
  if (options.src && options.src.indexOf('//') === 0) {
    options.src = https ? 'https:' + options.src : 'http:' + options.src;
  }

  // Allow them to pass in different URLs depending on the protocol.
  if (https && options.https) options.src = options.https;
  else if (!https && options.http) options.src = options.http;

  // Make the `<script>` element and insert it before the first script on the
  // page, which is guaranteed to exist since this Javascript is running.
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.async = true;
  script.src = options.src;

  // If we have a fn, attach event handlers, even in IE. Based off of
  // the Third-Party Javascript script loading example:
  // https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html
  if ('function' == type(fn)) {
    onload(script, fn);
  }

  tick(function(){
    // Append after event listeners are attached for IE.
    var firstScript = document.getElementsByTagName('script')[0];
    firstScript.parentNode.insertBefore(script, firstScript);
  });

  // Return the script element in case they want to do anything special, like
  // give it an ID or attributes.
  return script;
};
}, {"script-onload":113,"next-tick":103,"type":13}],
113: [function(require, module, exports) {

// https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html

/**
 * Invoke `fn(err)` when the given `el` script loads.
 *
 * @param {Element} el
 * @param {Function} fn
 * @api public
 */

module.exports = function(el, fn){
  return el.addEventListener
    ? add(el, fn)
    : attach(el, fn);
};

/**
 * Add event listener to `el`, `fn()`.
 *
 * @param {Element} el
 * @param {Function} fn
 * @api private
 */

function add(el, fn){
  el.addEventListener('load', function(_, e){ fn(null, e); }, false);
  el.addEventListener('error', function(e){
    var err = new Error('script error "' + el.src + '"');
    err.event = e;
    fn(err);
  }, false);
}

/**
 * Attach evnet.
 *
 * @param {Element} el
 * @param {Function} fn
 * @api private
 */

function attach(el, fn){
  el.attachEvent('onreadystatechange', function(e){
    if (!/complete|loaded/.test(el.readyState)) return;
    fn(null, e);
  });
  el.attachEvent('onerror', function(e){
    var err = new Error('failed to load the script "' + el.src + '"');
    err.event = e || window.event;
    fn(err);
  });
}

}, {}],
107: [function(require, module, exports) {

module.exports = {
  removedProduct: /^[ _]?removed[ _]?product[ _]?$/i,
  viewedProduct: /^[ _]?viewed[ _]?product[ _]?$/i,
  viewedProductCategory: /^[ _]?viewed[ _]?product[ _]?category[ _]?$/i,
  addedProduct: /^[ _]?added[ _]?product[ _]?$/i,
  completedOrder: /^[ _]?completed[ _]?order[ _]?$/i,
  startedOrder: /^[ _]?started[ _]?order[ _]?$/i,
  updatedOrder: /^[ _]?updated[ _]?order[ _]?$/i,
  refundedOrder: /^[ _]?refunded?[ _]?order[ _]?$/i,
  viewedProductDetails: /^[ _]?viewed[ _]?product[ _]?details?[ _]?$/i,
  clickedProduct: /^[ _]?clicked[ _]?product[ _]?$/i,
  viewedPromotion: /^[ _]?viewed[ _]?promotion?[ _]?$/i,
  clickedPromotion: /^[ _]?clicked[ _]?promotion?[ _]?$/i,
  viewedCheckoutStep: /^[ _]?viewed[ _]?checkout[ _]?step[ _]?$/i,
  completedCheckoutStep: /^[ _]?completed[ _]?checkout[ _]?step[ _]?$/i
};

}, {}],
108: [function(require, module, exports) {

/**
 * Expose `toNoCase`.
 */

module.exports = toNoCase;


/**
 * Test whether a string is camel-case.
 */

var hasSpace = /\s/;
var hasSeparator = /[\W_]/;


/**
 * Remove any starting case from a `string`, like camel or snake, but keep
 * spaces and punctuation that may be important otherwise.
 *
 * @param {String} string
 * @return {String}
 */

function toNoCase (string) {
  if (hasSpace.test(string)) return string.toLowerCase();
  if (hasSeparator.test(string)) return unseparate(string).toLowerCase();
  return uncamelize(string).toLowerCase();
}


/**
 * Separator splitter.
 */

var separatorSplitter = /[\W_]+(.|$)/g;


/**
 * Un-separate a `string`.
 *
 * @param {String} string
 * @return {String}
 */

function unseparate (string) {
  return string.replace(separatorSplitter, function (m, next) {
    return next ? ' ' + next : '';
  });
}


/**
 * Camelcase splitter.
 */

var camelSplitter = /(.)([A-Z]+)/g;


/**
 * Un-camelcase a `string`.
 *
 * @param {String} string
 * @return {String}
 */

function uncamelize (string) {
  return string.replace(camelSplitter, function (m, previous, uppers) {
    return previous + ' ' + uppers.toLowerCase().split('').join(' ');
  });
}
}, {}],
109: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var index = require('indexof');

/**
 * Expose `Emitter`.
 */

module.exports = Emitter;

/**
 * Initialize a new `Emitter`.
 *
 * @api public
 */

function Emitter(obj) {
  if (obj) return mixin(obj);
};

/**
 * Mixin the emitter properties.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */

function mixin(obj) {
  for (var key in Emitter.prototype) {
    obj[key] = Emitter.prototype[key];
  }
  return obj;
}

/**
 * Listen on the given `event` with `fn`.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.on =
Emitter.prototype.addEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};
  (this._callbacks[event] = this._callbacks[event] || [])
    .push(fn);
  return this;
};

/**
 * Adds an `event` listener that will be invoked a single
 * time then automatically removed.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.once = function(event, fn){
  var self = this;
  this._callbacks = this._callbacks || {};

  function on() {
    self.off(event, on);
    fn.apply(this, arguments);
  }

  fn._off = on;
  this.on(event, on);
  return this;
};

/**
 * Remove the given callback for `event` or all
 * registered callbacks.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.off =
Emitter.prototype.removeListener =
Emitter.prototype.removeAllListeners =
Emitter.prototype.removeEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};

  // all
  if (0 == arguments.length) {
    this._callbacks = {};
    return this;
  }

  // specific event
  var callbacks = this._callbacks[event];
  if (!callbacks) return this;

  // remove all handlers
  if (1 == arguments.length) {
    delete this._callbacks[event];
    return this;
  }

  // remove specific handler
  var i = index(callbacks, fn._off || fn);
  if (~i) callbacks.splice(i, 1);
  return this;
};

/**
 * Emit `event` with the given args.
 *
 * @param {String} event
 * @param {Mixed} ...
 * @return {Emitter}
 */

Emitter.prototype.emit = function(event){
  this._callbacks = this._callbacks || {};
  var args = [].slice.call(arguments, 1)
    , callbacks = this._callbacks[event];

  if (callbacks) {
    callbacks = callbacks.slice(0);
    for (var i = 0, len = callbacks.length; i < len; ++i) {
      callbacks[i].apply(this, args);
    }
  }

  return this;
};

/**
 * Return array of callbacks for `event`.
 *
 * @param {String} event
 * @return {Array}
 * @api public
 */

Emitter.prototype.listeners = function(event){
  this._callbacks = this._callbacks || {};
  return this._callbacks[event] || [];
};

/**
 * Check if this emitter has `event` handlers.
 *
 * @param {String} event
 * @return {Boolean}
 * @api public
 */

Emitter.prototype.hasListeners = function(event){
  return !! this.listeners(event).length;
};

}, {"indexof":114}],
114: [function(require, module, exports) {
module.exports = function(arr, obj){
  if (arr.indexOf) return arr.indexOf(obj);
  for (var i = 0; i < arr.length; ++i) {
    if (arr[i] === obj) return i;
  }
  return -1;
};
}, {}],
110: [function(require, module, exports) {

module.exports = function after (times, func) {
  // After 0, really?
  if (times <= 0) return func();

  // That's more like it.
  return function() {
    if (--times < 1) {
      return func.apply(this, arguments);
    }
  };
};
}, {}],
111: [function(require, module, exports) {

/**
 * Module dependencies.
 */

try {
  var type = require('type');
} catch (err) {
  var type = require('component-type');
}

var toFunction = require('to-function');

/**
 * HOP reference.
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Iterate the given `obj` and invoke `fn(val, i)`
 * in optional context `ctx`.
 *
 * @param {String|Array|Object} obj
 * @param {Function} fn
 * @param {Object} [ctx]
 * @api public
 */

module.exports = function(obj, fn, ctx){
  fn = toFunction(fn);
  ctx = ctx || this;
  switch (type(obj)) {
    case 'array':
      return array(obj, fn, ctx);
    case 'object':
      if ('number' == typeof obj.length) return array(obj, fn, ctx);
      return object(obj, fn, ctx);
    case 'string':
      return string(obj, fn, ctx);
  }
};

/**
 * Iterate string chars.
 *
 * @param {String} obj
 * @param {Function} fn
 * @param {Object} ctx
 * @api private
 */

function string(obj, fn, ctx) {
  for (var i = 0; i < obj.length; ++i) {
    fn.call(ctx, obj.charAt(i), i);
  }
}

/**
 * Iterate object keys.
 *
 * @param {Object} obj
 * @param {Function} fn
 * @param {Object} ctx
 * @api private
 */

function object(obj, fn, ctx) {
  for (var key in obj) {
    if (has.call(obj, key)) {
      fn.call(ctx, key, obj[key]);
    }
  }
}

/**
 * Iterate array-ish.
 *
 * @param {Array|Object} obj
 * @param {Function} fn
 * @param {Object} ctx
 * @api private
 */

function array(obj, fn, ctx) {
  for (var i = 0; i < obj.length; ++i) {
    fn.call(ctx, obj[i], i);
  }
}

}, {"type":13,"component-type":13,"to-function":115}],
115: [function(require, module, exports) {

/**
 * Module Dependencies
 */

var expr;
try {
  expr = require('props');
} catch(e) {
  expr = require('component-props');
}

/**
 * Expose `toFunction()`.
 */

module.exports = toFunction;

/**
 * Convert `obj` to a `Function`.
 *
 * @param {Mixed} obj
 * @return {Function}
 * @api private
 */

function toFunction(obj) {
  switch ({}.toString.call(obj)) {
    case '[object Object]':
      return objectToFunction(obj);
    case '[object Function]':
      return obj;
    case '[object String]':
      return stringToFunction(obj);
    case '[object RegExp]':
      return regexpToFunction(obj);
    default:
      return defaultToFunction(obj);
  }
}

/**
 * Default to strict equality.
 *
 * @param {Mixed} val
 * @return {Function}
 * @api private
 */

function defaultToFunction(val) {
  return function(obj){
    return val === obj;
  };
}

/**
 * Convert `re` to a function.
 *
 * @param {RegExp} re
 * @return {Function}
 * @api private
 */

function regexpToFunction(re) {
  return function(obj){
    return re.test(obj);
  };
}

/**
 * Convert property `str` to a function.
 *
 * @param {String} str
 * @return {Function}
 * @api private
 */

function stringToFunction(str) {
  // immediate such as "> 20"
  if (/^ *\W+/.test(str)) return new Function('_', 'return _ ' + str);

  // properties such as "name.first" or "age > 18" or "age > 18 && age < 36"
  return new Function('_', 'return ' + get(str));
}

/**
 * Convert `object` to a function.
 *
 * @param {Object} object
 * @return {Function}
 * @api private
 */

function objectToFunction(obj) {
  var match = {};
  for (var key in obj) {
    match[key] = typeof obj[key] === 'string'
      ? defaultToFunction(obj[key])
      : toFunction(obj[key]);
  }
  return function(val){
    if (typeof val !== 'object') return false;
    for (var key in match) {
      if (!(key in val)) return false;
      if (!match[key](val[key])) return false;
    }
    return true;
  };
}

/**
 * Built the getter function. Supports getter style functions
 *
 * @param {String} str
 * @return {String}
 * @api private
 */

function get(str) {
  var props = expr(str);
  if (!props.length) return '_.' + str;

  var val, i, prop;
  for (i = 0; i < props.length; i++) {
    prop = props[i];
    val = '_.' + prop;
    val = "('function' == typeof " + val + " ? " + val + "() : " + val + ")";

    // mimic negative lookbehind to avoid problems with nested properties
    str = stripNested(prop, str, val);
  }

  return str;
}

/**
 * Mimic negative lookbehind to avoid problems with nested properties.
 *
 * See: http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript
 *
 * @param {String} prop
 * @param {String} str
 * @param {String} val
 * @return {String}
 * @api private
 */

function stripNested (prop, str, val) {
  return str.replace(new RegExp('(\\.)?' + prop, 'g'), function($0, $1) {
    return $1 ? $0 : val;
  });
}

}, {"props":116,"component-props":116}],
116: [function(require, module, exports) {
/**
 * Global Names
 */

var globals = /\b(this|Array|Date|Object|Math|JSON)\b/g;

/**
 * Return immediate identifiers parsed from `str`.
 *
 * @param {String} str
 * @param {String|Function} map function or prefix
 * @return {Array}
 * @api public
 */

module.exports = function(str, fn){
  var p = unique(props(str));
  if (fn && 'string' == typeof fn) fn = prefixed(fn);
  if (fn) return map(str, p, fn);
  return p;
};

/**
 * Return immediate identifiers in `str`.
 *
 * @param {String} str
 * @return {Array}
 * @api private
 */

function props(str) {
  return str
    .replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g, '')
    .replace(globals, '')
    .match(/[$a-zA-Z_]\w*/g)
    || [];
}

/**
 * Return `str` with `props` mapped with `fn`.
 *
 * @param {String} str
 * @param {Array} props
 * @param {Function} fn
 * @return {String}
 * @api private
 */

function map(str, props, fn) {
  var re = /\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;
  return str.replace(re, function(_){
    if ('(' == _[_.length - 1]) return fn(_);
    if (!~props.indexOf(_)) return _;
    return fn(_);
  });
}

/**
 * Return unique array.
 *
 * @param {Array} arr
 * @return {Array}
 * @api private
 */

function unique(arr) {
  var ret = [];

  for (var i = 0; i < arr.length; i++) {
    if (~ret.indexOf(arr[i])) continue;
    ret.push(arr[i]);
  }

  return ret;
}

/**
 * Map with prefix `str`.
 */

function prefixed(str) {
  return function(_){
    return str + _;
  };
}

}, {}],
112: [function(require, module, exports) {

/**
 * toString.
 */

var toString = window.JSON
  ? JSON.stringify
  : function(_){ return String(_); };

/**
 * Export `fmt`
 */

module.exports = fmt;

/**
 * Formatters
 */

fmt.o = toString;
fmt.s = String;
fmt.d = parseInt;

/**
 * Format the given `str`.
 *
 * @param {String} str
 * @param {...} args
 * @return {String}
 * @api public
 */

function fmt(str){
  var args = [].slice.call(arguments, 1);
  var j = 0;

  return str.replace(/%([a-z])/gi, function(_, f){
    return fmt[f]
      ? fmt[f](args[j++])
      : _ + f;
  });
}

}, {}],
99: [function(require, module, exports) {

/**
 * Generate a slug from the given `str`.
 *
 * example:
 *
 *        generate('foo bar');
 *        // > foo-bar
 *
 * @param {String} str
 * @param {Object} options
 * @config {String|RegExp} [replace] characters to replace, defaulted to `/[^a-z0-9]/g`
 * @config {String} [separator] separator to insert, defaulted to `-`
 * @return {String}
 */

module.exports = function (str, options) {
  options || (options = {});
  return str.toLowerCase()
    .replace(options.replace || /[^a-z0-9]/g, ' ')
    .replace(/^ +| +$/g, '')
    .replace(/ +/g, options.separator || '-')
};

}, {}],
100: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var after = require('after');
var domify = require('domify');
var each = require('each');
var Emitter = require('emitter');

/**
 * Mixin emitter.
 */

Emitter(exports);

/**
 * Add a new option to the integration by `key` with default `value`.
 *
 * @param {String} key
 * @param {Mixed} value
 * @return {Integration}
 */

exports.option = function(key, value){
  this.prototype.defaults[key] = value;
  return this;
};

/**
 * Add a new mapping option.
 *
 * This will create a method `name` that will return a mapping
 * for you to use.
 *
 * Example:
 *
 *    Integration('My Integration')
 *      .mapping('events');
 *
 *    new MyIntegration().track('My Event');
 *
 *    .track = function(track){
 *      var events = this.events(track.event());
 *      each(events, send);
 *     };
 *
 * @param {String} name
 * @return {Integration}
 */

exports.mapping = function(name){
  this.option(name, []);
  this.prototype[name] = function(str){
    return this.map(this.options[name], str);
  };
  return this;
};

/**
 * Register a new global variable `key` owned by the integration, which will be
 * used to test whether the integration is already on the page.
 *
 * @param {String} global
 * @return {Integration}
 */

exports.global = function(key){
  this.prototype.globals.push(key);
  return this;
};

/**
 * Mark the integration as assuming an initial pageview, so to defer loading
 * the script until the first `page` call, noop the first `initialize`.
 *
 * @return {Integration}
 */

exports.assumesPageview = function(){
  this.prototype._assumesPageview = true;
  return this;
};

/**
 * Mark the integration as being "ready" once `load` is called.
 *
 * @return {Integration}
 */

exports.readyOnLoad = function(){
  this.prototype._readyOnLoad = true;
  return this;
};

/**
 * Mark the integration as being "ready" once `initialize` is called.
 *
 * @return {Integration}
 */

exports.readyOnInitialize = function(){
  this.prototype._readyOnInitialize = true;
  return this;
};

/**
 * Define a tag to be loaded.
 *
 * @param {String} str DOM tag as string or URL
 * @return {Integration}
 */

exports.tag = function(name, str){
  if (null == str) {
    str = name;
    name = 'library';
  }
  this.prototype.templates[name] = objectify(str);
  return this;
};

/**
 * Given a string, give back DOM attributes.
 *
 * Do it in a way where the browser doesn't load images or iframes.
 * It turns out, domify will load images/iframes, because
 * whenever you construct those DOM elements,
 * the browser immediately loads them.
 *
 * @param {String} str
 * @return {Object}
 */

function objectify(str) {
  // replace `src` with `data-src` to prevent image loading
  str = str.replace(' src="', ' data-src="');

  var el = domify(str);
  var attrs = {};

  each(el.attributes, function(attr){
    // then replace it back
    var name = 'data-src' == attr.name ? 'src' : attr.name;
    attrs[name] = attr.value;
  });

  return {
    type: el.tagName.toLowerCase(),
    attrs: attrs
  };
}

}, {"after":110,"domify":117,"each":111,"emitter":109}],
117: [function(require, module, exports) {

/**
 * Expose `parse`.
 */

module.exports = parse;

/**
 * Tests for browser support.
 */

var div = document.createElement('div');
// Setup
div.innerHTML = '  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';
// Make sure that link elements get serialized correctly by innerHTML
// This requires a wrapper element in IE
var innerHTMLBug = !div.getElementsByTagName('link').length;
div = undefined;

/**
 * Wrap map from jquery.
 */

var map = {
  legend: [1, '<fieldset>', '</fieldset>'],
  tr: [2, '<table><tbody>', '</tbody></table>'],
  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],
  // for script/link/style tags to work in IE6-8, you have to wrap
  // in a div with a non-whitespace character in front, ha!
  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']
};

map.td =
map.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];

map.option =
map.optgroup = [1, '<select multiple="multiple">', '</select>'];

map.thead =
map.tbody =
map.colgroup =
map.caption =
map.tfoot = [1, '<table>', '</table>'];

map.text =
map.circle =
map.ellipse =
map.line =
map.path =
map.polygon =
map.polyline =
map.rect = [1, '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">','</svg>'];

/**
 * Parse `html` and return a DOM Node instance, which could be a TextNode,
 * HTML DOM Node of some kind (<div> for example), or a DocumentFragment
 * instance, depending on the contents of the `html` string.
 *
 * @param {String} html - HTML string to "domify"
 * @param {Document} doc - The `document` instance to create the Node for
 * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance
 * @api private
 */

function parse(html, doc) {
  if ('string' != typeof html) throw new TypeError('String expected');

  // default to the global `document` object
  if (!doc) doc = document;

  // tag name
  var m = /<([\w:]+)/.exec(html);
  if (!m) return doc.createTextNode(html);

  html = html.replace(/^\s+|\s+$/g, ''); // Remove leading/trailing whitespace

  var tag = m[1];

  // body support
  if (tag == 'body') {
    var el = doc.createElement('html');
    el.innerHTML = html;
    return el.removeChild(el.lastChild);
  }

  // wrap map
  var wrap = map[tag] || map._default;
  var depth = wrap[0];
  var prefix = wrap[1];
  var suffix = wrap[2];
  var el = doc.createElement('div');
  el.innerHTML = prefix + html + suffix;
  while (depth--) el = el.lastChild;

  // one element
  if (el.firstChild == el.lastChild) {
    return el.removeChild(el.firstChild);
  }

  // several elements
  var fragment = doc.createDocumentFragment();
  while (el.firstChild) {
    fragment.appendChild(el.removeChild(el.firstChild));
  }

  return fragment;
}

}, {}],
90: [function(require, module, exports) {
var toSpace = require('to-space-case');


/**
 * Expose `toSnakeCase`.
 */

module.exports = toSnakeCase;


/**
 * Convert a `string` to snake case.
 *
 * @param {String} string
 * @return {String}
 */


function toSnakeCase (string) {
  return toSpace(string).replace(/\s/g, '_');
}

}, {"to-space-case":118}],
118: [function(require, module, exports) {

var clean = require('to-no-case');


/**
 * Expose `toSpaceCase`.
 */

module.exports = toSpaceCase;


/**
 * Convert a `string` to space case.
 *
 * @param {String} string
 * @return {String}
 */


function toSpaceCase (string) {
  return clean(string).replace(/[\W_]+(.|$)/g, function (matches, match) {
    return match ? ' ' + match : '';
  });
}
}, {"to-no-case":119}],
119: [function(require, module, exports) {

/**
 * Expose `toNoCase`.
 */

module.exports = toNoCase;


/**
 * Test whether a string is camel-case.
 */

var hasSpace = /\s/;
var hasCamel = /[a-z][A-Z]/;
var hasSeparator = /[\W_]/;


/**
 * Remove any starting case from a `string`, like camel or snake, but keep
 * spaces and punctuation that may be important otherwise.
 *
 * @param {String} string
 * @return {String}
 */

function toNoCase (string) {
  if (hasSpace.test(string)) return string.toLowerCase();

  if (hasSeparator.test(string)) string = unseparate(string);
  if (hasCamel.test(string)) string = uncamelize(string);
  return string.toLowerCase();
}


/**
 * Separator splitter.
 */

var separatorSplitter = /[\W_]+(.|$)/g;


/**
 * Un-separate a `string`.
 *
 * @param {String} string
 * @return {String}
 */

function unseparate (string) {
  return string.replace(separatorSplitter, function (m, next) {
    return next ? ' ' + next : '';
  });
}


/**
 * Camelcase splitter.
 */

var camelSplitter = /(.)([A-Z]+)/g;


/**
 * Un-camelcase a `string`.
 *
 * @param {String} string
 * @return {String}
 */

function uncamelize (string) {
  return string.replace(camelSplitter, function (m, previous, uppers) {
    return previous + ' ' + uppers.toLowerCase().split('').join(' ');
  });
}
}, {}],
91: [function(require, module, exports) {

/**
 * Protocol.
 */

module.exports = function (url) {
  switch (arguments.length) {
    case 0: return check();
    case 1: return transform(url);
  }
};


/**
 * Transform a protocol-relative `url` to the use the proper protocol.
 *
 * @param {String} url
 * @return {String}
 */

function transform (url) {
  return check() ? 'https:' + url : 'http:' + url;
}


/**
 * Check whether `https:` be used for loading scripts.
 *
 * @return {Boolean}
 */

function check () {
  return (
    location.protocol == 'https:' ||
    location.protocol == 'chrome-extension:'
  );
}
}, {}],
92: [function(require, module, exports) {

var isEmpty = require('is-empty');

try {
  var typeOf = require('type');
} catch (e) {
  var typeOf = require('component-type');
}


/**
 * Types.
 */

var types = [
  'arguments',
  'array',
  'boolean',
  'date',
  'element',
  'function',
  'null',
  'number',
  'object',
  'regexp',
  'string',
  'undefined'
];


/**
 * Expose type checkers.
 *
 * @param {Mixed} value
 * @return {Boolean}
 */

for (var i = 0, type; type = types[i]; i++) exports[type] = generate(type);


/**
 * Add alias for `function` for old browsers.
 */

exports.fn = exports['function'];


/**
 * Expose `empty` check.
 */

exports.empty = isEmpty;


/**
 * Expose `nan` check.
 */

exports.nan = function (val) {
  return exports.number(val) && val != val;
};


/**
 * Generate a type checker.
 *
 * @param {String} type
 * @return {Function}
 */

function generate (type) {
  return function (value) {
    return type === typeOf(value);
  };
}
}, {"is-empty":120,"type":13,"component-type":13}],
120: [function(require, module, exports) {

/**
 * Expose `isEmpty`.
 */

module.exports = isEmpty;


/**
 * Has.
 */

var has = Object.prototype.hasOwnProperty;


/**
 * Test whether a value is "empty".
 *
 * @param {Mixed} val
 * @return {Boolean}
 */

function isEmpty (val) {
  if (null == val) return true;
  if ('number' == typeof val) return 0 === val;
  if (undefined !== val.length) return 0 === val.length;
  for (var key in val) if (has.call(val, key)) return false;
  return true;
}
}, {}],
15: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var domify = require('domify');
var each = require('each');

/**
 * HOP
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Expose `AdWords`.
 */

var AdWords = module.exports = integration('AdWords')
  .option('conversionId', '')
  .option('remarketing', false)
  .tag('<script src="//www.googleadservices.com/pagead/conversion_async.js">')
  .mapping('events');

/**
 * Load.
 *
 * @param {Function} fn
 * @api public
 */

AdWords.prototype.initialize = function(){
  this.load(this.ready);
};

/**
 * Loaded.
 *
 * @return {Boolean}
 * @api public
 */

AdWords.prototype.loaded = function(){
  return !! document.body;
};

/**
 * Page.
 *
 * https://support.google.com/adwords/answer/3111920#standard_parameters
 * https://support.google.com/adwords/answer/3103357
 * https://developers.google.com/adwords-remarketing-tag/asynchronous/
 * https://developers.google.com/adwords-remarketing-tag/parameters
 *
 * @param {Page} page
 */

AdWords.prototype.page = function(page){
  var remarketing = !!this.options.remarketing;
  var id = this.options.conversionId;
  var props = {};
  window.google_trackConversion({
    google_conversion_id: id,
    google_custom_params: props,
    google_remarketing_only: remarketing
  });
};

/**
 * Track.
 *
 * @param {Track}
 * @api public
 */

AdWords.prototype.track = function(track){
  var id = this.options.conversionId;
  var events = this.events(track.event());
  var revenue = track.revenue() || 0;
  each(events, function(label){
    var props = track.properties();
    window.google_trackConversion({
      google_conversion_id: id,
      // TODO
      // google_custom_params: props,
      google_conversion_language: 'en',
      google_conversion_format: '3',
      google_conversion_color: 'ffffff',
      google_conversion_label: label,
      google_conversion_value: revenue,
      google_remarketing_only: false
    });
  });
};

}, {"analytics.js-integration":89,"domify":117,"each":11}],
16: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose Alexa integration.
 */

var Alexa = module.exports = integration('Alexa')
  .assumesPageview()
  .global('_atrk_opts')
  .option('account', null)
  .option('domain', '')
  .option('dynamic', true)
  .tag('<script src="//d31qbv1cthcecs.cloudfront.net/atrk.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Alexa.prototype.initialize = function(page){
  var self = this;
  window._atrk_opts = {
    atrk_acct: this.options.account,
    domain: this.options.domain,
    dynamic: this.options.dynamic
  };
  this.load(function(){
    window.atrk();
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Alexa.prototype.loaded = function(){
  return !! window.atrk;
};

}, {"analytics.js-integration":89}],
17: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `Amplitude` integration.
 */

var Amplitude = module.exports = integration('Amplitude')
  .global('amplitude')
  .option('apiKey', '')
  .option('trackAllPages', false)
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .tag('<script src="https://d24n15hnbwhuhn.cloudfront.net/libs/amplitude-1.3-min.js">');

/**
 * Initialize.
 *
 * https://github.com/amplitude/Amplitude-Javascript
 *
 * @param {Object} page
 */

Amplitude.prototype.initialize = function(page){
  (function(h,a){var f=h.amplitude||{};f._q=[];function e(i){f[i]=function(){f._q.push([i].concat(Array.prototype.slice.call(arguments,0)))}}var c=["init","logEvent","setUserId","setUserProperties","setVersionName","setDomain","setGlobalUserProperties"];for(var d=0;d<c.length;d++){e(c[d])}h.amplitude=f})(window,document);
  window.amplitude.init(this.options.apiKey);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Amplitude.prototype.loaded = function(){
  return !! (window.amplitude && window.amplitude.options);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Amplitude.prototype.page = function(page){
  var properties = page.properties();
  var category = page.category();
  var name = page.fullName();
  var opts = this.options;

  // all pages
  if (opts.trackAllPages) {
    this.track(page.track());
  }

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }
};

/**
 * Identify.
 *
 * @param {Facade} identify
 */

Amplitude.prototype.identify = function(identify){
  var id = identify.userId();
  var traits = identify.traits();
  if (id) window.amplitude.setUserId(id);
  if (traits) window.amplitude.setGlobalUserProperties(traits);
};

/**
 * Track.
 *
 * @param {Track} event
 */

Amplitude.prototype.track = function(track){
  var props = track.properties();
  var event = track.event();
  window.amplitude.logEvent(event, props);
};

}, {"analytics.js-integration":89}],
18: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var load = require('load-script');
var is = require('is');

/**
 * Expose plugin.
 */

module.exports = exports = function (analytics) {
  analytics.addIntegration(Appcues);
};

/**
 * Expose `Appcues` integration.
 */

var Appcues = exports.Integration = integration('Appcues')
  .assumesPageview()
  .global('Appcues')
  .global('AppcuesIdentity')
  .option('appcuesId', '')
  .option('userId', '')
  .option('userEmail', '');

/**
 * Initialize.
 *
 * http://appcues.com/docs/
 *
 * @param {Object}
 */

Appcues.prototype.initialize = function(){
  this.load(function() {
    window.Appcues.init();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Appcues.prototype.loaded = function(){
  return is.object(window.Appcues);
};

/**
 * Load the Appcues library.
 *
 * @param {Function} callback
 */

Appcues.prototype.load = function(callback){
  var script = load('//d2dubfq97s02eu.cloudfront.net/appcues-bundle.min.js', callback);
  script.setAttribute('data-appcues-id', this.options.appcuesId);
  script.setAttribute('data-user-id', this.options.userId);
  script.setAttribute('data-user-email', this.options.userEmail);
};


/**
 * Identify.
 *
 * http://appcues.com/docs#identify
 *
 * @param {Identify} identify
 */

Appcues.prototype.identify = function(identify){
  window.Appcues.identify(identify.traits());
};

}, {"analytics.js-integration":89,"load-script":121,"is":92}],
121: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var onload = require('script-onload');
var tick = require('next-tick');
var type = require('type');

/**
 * Expose `loadScript`.
 *
 * @param {Object} options
 * @param {Function} fn
 * @api public
 */

module.exports = function loadScript(options, fn){
  if (!options) throw new Error('Cant load nothing...');

  // Allow for the simplest case, just passing a `src` string.
  if ('string' == type(options)) options = { src : options };

  var https = document.location.protocol === 'https:' ||
              document.location.protocol === 'chrome-extension:';

  // If you use protocol relative URLs, third-party scripts like Google
  // Analytics break when testing with `file:` so this fixes that.
  if (options.src && options.src.indexOf('//') === 0) {
    options.src = https ? 'https:' + options.src : 'http:' + options.src;
  }

  // Allow them to pass in different URLs depending on the protocol.
  if (https && options.https) options.src = options.https;
  else if (!https && options.http) options.src = options.http;

  // Make the `<script>` element and insert it before the first script on the
  // page, which is guaranteed to exist since this Javascript is running.
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.async = true;
  script.src = options.src;

  // If we have a fn, attach event handlers, even in IE. Based off of
  // the Third-Party Javascript script loading example:
  // https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html
  if ('function' == type(fn)) {
    onload(script, fn);
  }

  tick(function(){
    // Append after event listeners are attached for IE.
    var firstScript = document.getElementsByTagName('script')[0];
    firstScript.parentNode.insertBefore(script, firstScript);
  });

  // Return the script element in case they want to do anything special, like
  // give it an ID or attributes.
  return script;
};
}, {"script-onload":113,"next-tick":103,"type":13}],
19: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var each = require('each');

/**
 * Expose `Awesm` integration.
 */

var Awesm = module.exports = integration('awe.sm')
  .assumesPageview()
  .global('AWESM')
  .option('apiKey', '')
  .tag('<script src="//widgets.awe.sm/v3/widgets.js?key={{ apiKey }}&async=true">')
  .mapping('events');

/**
 * Initialize.
 *
 * http://developers.awe.sm/guides/javascript/
 *
 * @param {Object} page
 */

Awesm.prototype.initialize = function(page){
  window.AWESM = { api_key: this.options.apiKey };
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Awesm.prototype.loaded = function(){
  return !! (window.AWESM && window.AWESM._exists);
};

/**
 * Track.
 *
 * @param {Track} track
 */

Awesm.prototype.track = function(track){
  var user = this.analytics.user();
  var goals = this.events(track.event());
  each(goals, function(goal){
    window.AWESM.convert(goal, track.cents(), null, user.id());
  });
};

}, {"analytics.js-integration":89,"each":11}],
20: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var is = require('is');
var noop = function(){};
var onBody = require('on-body');

/**
 * Expose `Awesomatic` integration.
 */

var Awesomatic = module.exports = integration('Awesomatic')
  .assumesPageview()
  .global('Awesomatic')
  .global('AwesomaticSettings')
  .global('AwsmSetup')
  .global('AwsmTmp')
  .option('appId', '')
  .tag('<script src="https://1c817b7a15b6941337c0-dff9b5f4adb7ba28259631e99c3f3691.ssl.cf2.rackcdn.com/gen/embed.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Awesomatic.prototype.initialize = function(page){
  var self = this;
  var user = this.analytics.user();
  var id = user.id();
  var options = user.traits();

  options.appId = this.options.appId;
  if (id) options.user_id = id;

  this.load(function(){
    window.Awesomatic.initialize(options, function(){
      self.ready(); // need to wait for initialize to callback
    });
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Awesomatic.prototype.loaded = function(){
  return is.object(window.Awesomatic);
};

}, {"analytics.js-integration":89,"is":92,"on-body":122}],
122: [function(require, module, exports) {
var each = require('each');


/**
 * Cache whether `<body>` exists.
 */

var body = false;


/**
 * Callbacks to call when the body exists.
 */

var callbacks = [];


/**
 * Export a way to add handlers to be invoked once the body exists.
 *
 * @param {Function} callback  A function to call when the body exists.
 */

module.exports = function onBody (callback) {
  if (body) {
    call(callback);
  } else {
    callbacks.push(callback);
  }
};


/**
 * Set an interval to check for `document.body`.
 */

var interval = setInterval(function () {
  if (!document.body) return;
  body = true;
  each(callbacks, call);
  clearInterval(interval);
}, 5);


/**
 * Call a callback, passing it the body.
 *
 * @param {Function} callback  The callback to call.
 */

function call (callback) {
  callback(document.body);
}
}, {"each":111}],
21: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var onbody = require('on-body');
var domify = require('domify');
var extend = require('extend');
var bind = require('bind');
var when = require('when');
var each = require('each');

/**
 * HOP.
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Noop.
 */

var noop = function(){};

/**
 * Expose `Bing`.
 *
 * https://bingads.microsoft.com/campaign/signup
 */

var Bing = module.exports = integration('Bing Ads')
  .option('siteId', '')
  .option('domainId', '')
  .tag('<script id="mstag_tops" src="//flex.msn.com/mstag/site/{{ siteId }}/mstag.js">')
  .mapping('events');

/**
 * Initialize.
 *
 * http://msdn.microsoft.com/en-us/library/bing-ads-campaign-management-campaign-analytics-scripts.aspx
 *
 * @param {Object} page
 */

Bing.prototype.initialize = function(page){
  if (!window.mstag) {
    window.mstag = {
      loadTag: noop,
      time: (new Date()).getTime(),
      // they use document.write, which doesn't work when loaded async.
      // they provide a way to override it.
      // the first time it is called, load the script,
      // and only when that script is done, is "loading" done.
      _write: writeToAppend
    };
  };
  var self = this;
  onbody(function(){
    self.load(function(){
      var loaded = bind(self, self.loaded);

      // poll until this.loaded() is true.
      // have to do a weird hack like this because
      // the first script loads a second script,
      // and only after the second script is it actually loaded.
      when(loaded, self.ready);
    });
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Bing.prototype.loaded = function(){
  return !! (window.mstag && window.mstag.loadTag !== noop);
};

/**
 * Track.
 *
 * @param {Track} track
 */

Bing.prototype.track = function(track){
  var events = this.events(track.event());
  var revenue = track.revenue() || 0;
  var self = this;
  each(events, function(goal){
    window.mstag.loadTag('analytics', {
      domainId: self.options.domainId,
      revenue: revenue,
      dedup: '1',
      type: '1',
      actionid: goal
    });
  });
};

/**
 * Convert `document.write` to `document.appendChild`.
 *
 * TODO: make into a component.
 *
 * @param {String} str
 */

function writeToAppend(str) {
  var first = document.getElementsByTagName('script')[0];
  var el = domify(str);
  // https://github.com/component/domify/issues/14
  if ('script' == el.tagName.toLowerCase() && el.getAttribute('src')) {
    var tmp = document.createElement('script');
    tmp.src = el.getAttribute('src');
    tmp.async = true;
    el = tmp;
  }
  document.body.appendChild(el);
}

}, {"analytics.js-integration":89,"on-body":122,"domify":117,"extend":123,"bind":101,"when":124,"each":11}],
123: [function(require, module, exports) {

module.exports = function extend (object) {
    // Takes an unlimited number of extenders.
    var args = Array.prototype.slice.call(arguments, 1);

    // For each extender, copy their properties on our object.
    for (var i = 0, source; source = args[i]; i++) {
        if (!source) continue;
        for (var property in source) {
            object[property] = source[property];
        }
    }

    return object;
};
}, {}],
124: [function(require, module, exports) {

var callback = require('callback');


/**
 * Expose `when`.
 */

module.exports = when;


/**
 * Loop on a short interval until `condition()` is true, then call `fn`.
 *
 * @param {Function} condition
 * @param {Function} fn
 * @param {Number} interval (optional)
 */

function when (condition, fn, interval) {
  if (condition()) return callback.async(fn);

  var ref = setInterval(function () {
    if (!condition()) return;
    callback(fn);
    clearInterval(ref);
  }, interval || 10);
}
}, {"callback":94}],
22: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var Identify = require('facade').Identify;
var Track = require('facade').Track;
var pixel = require('load-pixel')('http://app.bronto.com/public/');
var qs = require('querystring');
var each = require('each');

/**
 * Expose `Bronto` integration.
 */

var Bronto = module.exports = integration('Bronto')
  .global('__bta')
  .option('siteId', '')
  .option('host', '')
  .tag('<script src="//p.bm23.com/bta.js">');

/**
 * Initialize.
 *
 * http://app.bronto.com/mail/help/help_view/?k=mail:home:api_tracking:tracking_data_store_js#addingjavascriptconversiontrackingtoyoursite
 * http://bronto.com/product-blog/features/using-conversion-tracking-private-domain#.Ut_Vk2T8KqB
 * http://bronto.com/product-blog/features/javascript-conversion-tracking-setup-and-reporting#.Ut_VhmT8KqB
 *
 * @param {Object} page
 */

Bronto.prototype.initialize = function(page){
  var self = this;
  var params = qs.parse(window.location.search);
  if (!params._bta_tid && !params._bta_c) {
    this.debug('missing tracking URL parameters `_bta_tid` and `_bta_c`.');
  }
  this.load(function(){
    var opts = self.options;
    self.bta = new window.__bta(opts.siteId);
    if (opts.host) self.bta.setHost(opts.host);
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Bronto.prototype.loaded = function(){
  return this.bta;
};

/**
 * Completed order.
 *
 * The cookie is used to link the order being processed back to the delivery,
 * message, and contact which makes it a conversion.
 * Passing in just the email ensures that the order itself
 * gets linked to the contact record in Bronto even if the user
 * does not have a tracking cookie.
 *
 * @param {Track} track
 * @api private
 */

Bronto.prototype.completedOrder = function(track){
  var user = this.analytics.user();
  var products = track.products();
  var props = track.properties();
  var items = [];
  var identify = new Identify({
    userId: user.id(),
    traits: user.traits()
  });
  var email = identify.email();

  // items
  each(products, function(product){
    var track = new Track({ properties: product });
    items.push({
      item_id: track.id() || track.sku(),
      desc: product.description || track.name(),
      quantity: track.quantity(),
      amount: track.price(),
    });
  });

  // add conversion
  this.bta.addOrder({
    order_id: track.orderId(),
    email: email,
    // they recommend not putting in a date
    // because it needs to be formatted correctly
    // YYYY-MM-DDTHH:MM:SS
    items: items
  });
};

}, {"analytics.js-integration":89,"facade":125,"load-pixel":126,"querystring":127,"each":11}],
125: [function(require, module, exports) {

var Facade = require('./facade');

/**
 * Expose `Facade` facade.
 */

module.exports = Facade;

/**
 * Expose specific-method facades.
 */

Facade.Alias = require('./alias');
Facade.Group = require('./group');
Facade.Identify = require('./identify');
Facade.Track = require('./track');
Facade.Page = require('./page');
Facade.Screen = require('./screen');

}, {"./facade":128,"./alias":129,"./group":130,"./identify":131,"./track":132,"./page":133,"./screen":134}],
128: [function(require, module, exports) {

var traverse = require('isodate-traverse');
var isEnabled = require('./is-enabled');
var clone = require('./utils').clone;
var type = require('./utils').type;
var address = require('./address');
var objCase = require('obj-case');
var newDate = require('new-date');

/**
 * Expose `Facade`.
 */

module.exports = Facade;

/**
 * Initialize a new `Facade` with an `obj` of arguments.
 *
 * @param {Object} obj
 */

function Facade (obj) {
  if (!obj.hasOwnProperty('timestamp')) obj.timestamp = new Date();
  else obj.timestamp = newDate(obj.timestamp);
  traverse(obj);
  this.obj = obj;
}

/**
 * Mixin address traits.
 */

address(Facade.prototype);

/**
 * Return a proxy function for a `field` that will attempt to first use methods,
 * and fallback to accessing the underlying object directly. You can specify
 * deeply nested fields too like:
 *
 *   this.proxy('options.Librato');
 *
 * @param {String} field
 */

Facade.prototype.proxy = function (field) {
  var fields = field.split('.');
  field = fields.shift();

  // Call a function at the beginning to take advantage of facaded fields
  var obj = this[field] || this.field(field);
  if (!obj) return obj;
  if (typeof obj === 'function') obj = obj.call(this) || {};
  if (fields.length === 0) return transform(obj);

  obj = objCase(obj, fields.join('.'));
  return transform(obj);
};

/**
 * Directly access a specific `field` from the underlying object, returning a
 * clone so outsiders don't mess with stuff.
 *
 * @param {String} field
 * @return {Mixed}
 */

Facade.prototype.field = function (field) {
  var obj = this.obj[field];
  return transform(obj);
};

/**
 * Utility method to always proxy a particular `field`. You can specify deeply
 * nested fields too like:
 *
 *   Facade.proxy('options.Librato');
 *
 * @param {String} field
 * @return {Function}
 */

Facade.proxy = function (field) {
  return function () {
    return this.proxy(field);
  };
};

/**
 * Utility method to directly access a `field`.
 *
 * @param {String} field
 * @return {Function}
 */

Facade.field = function (field) {
  return function () {
    return this.field(field);
  };
};

/**
 * Proxy multiple `path`.
 *
 * @param {String} path
 * @return {Array}
 */

Facade.multi = function(path){
  return function(){
    var multi = this.proxy(path + 's');
    if ('array' == type(multi)) return multi;
    var one = this.proxy(path);
    if (one) one = [clone(one)];
    return one || [];
  };
};

/**
 * Proxy one `path`.
 *
 * @param {String} path
 * @return {Mixed}
 */

Facade.one = function(path){
  return function(){
    var one = this.proxy(path);
    if (one) return one;
    var multi = this.proxy(path + 's');
    if ('array' == type(multi)) return multi[0];
  };
};

/**
 * Get the basic json object of this facade.
 *
 * @return {Object}
 */

Facade.prototype.json = function () {
  var ret = clone(this.obj);
  if (this.type) ret.type = this.type();
  return ret;
};

/**
 * Get the options of a call (formerly called "context"). If you pass an
 * integration name, it will get the options for that specific integration, or
 * undefined if the integration is not enabled.
 *
 * @param {String} integration (optional)
 * @return {Object or Null}
 */

Facade.prototype.context =
Facade.prototype.options = function (integration) {
  var options = clone(this.obj.options || this.obj.context) || {};
  if (!integration) return clone(options);
  if (!this.enabled(integration)) return;
  var integrations = this.integrations();
  var value = integrations[integration] || objCase(integrations, integration);
  if ('boolean' == typeof value) value = {};
  return value || {};
};

/**
 * Check whether an integration is enabled.
 *
 * @param {String} integration
 * @return {Boolean}
 */

Facade.prototype.enabled = function (integration) {
  var allEnabled = this.proxy('options.providers.all');
  if (typeof allEnabled !== 'boolean') allEnabled = this.proxy('options.all');
  if (typeof allEnabled !== 'boolean') allEnabled = this.proxy('integrations.all');
  if (typeof allEnabled !== 'boolean') allEnabled = true;

  var enabled = allEnabled && isEnabled(integration);
  var options = this.integrations();

  // If the integration is explicitly enabled or disabled, use that
  // First, check options.providers for backwards compatibility
  if (options.providers && options.providers.hasOwnProperty(integration)) {
    enabled = options.providers[integration];
  }

  // Next, check for the integration's existence in 'options' to enable it.
  // If the settings are a boolean, use that, otherwise it should be enabled.
  if (options.hasOwnProperty(integration)) {
    var settings = options[integration];
    if (typeof settings === 'boolean') {
      enabled = settings;
    } else {
      enabled = true;
    }
  }

  return enabled ? true : false;
};

/**
 * Get all `integration` options.
 *
 * @param {String} integration
 * @return {Object}
 * @api private
 */

Facade.prototype.integrations = function(){
  return this.obj.integrations
    || this.proxy('options.providers')
    || this.options();
};

/**
 * Check whether the user is active.
 *
 * @return {Boolean}
 */

Facade.prototype.active = function () {
  var active = this.proxy('options.active');
  if (active === null || active === undefined) active = true;
  return active;
};

/**
 * Get `sessionId / anonymousId`.
 *
 * @return {Mixed}
 * @api public
 */

Facade.prototype.sessionId =
Facade.prototype.anonymousId = function(){
  return this.field('anonymousId')
    || this.field('sessionId');
};

/**
 * Get `groupId` from `context.groupId`.
 *
 * @return {String}
 * @api public
 */

Facade.prototype.groupId = Facade.proxy('options.groupId');

/**
 * Get the call's "super properties" which are just traits that have been
 * passed in as if from an identify call.
 *
 * @param {Object} aliases
 * @return {Object}
 */

Facade.prototype.traits = function (aliases) {
  var ret = this.proxy('options.traits') || {};
  var id = this.userId();
  aliases = aliases || {};

  if (id) ret.id = id;

  for (var alias in aliases) {
    var value = null == this[alias]
      ? this.proxy('options.traits.' + alias)
      : this[alias]();
    if (null == value) continue;
    ret[aliases[alias]] = value;
    delete ret[alias];
  }

  return ret;
};

/**
 * Add a convenient way to get the library name and version
 */

Facade.prototype.library = function(){
  var library = this.proxy('options.library');
  if (!library) return { name: 'unknown', version: null };
  if (typeof library === 'string') return { name: library, version: null };
  return library;
};

/**
 * Setup some basic proxies.
 */

Facade.prototype.userId = Facade.field('userId');
Facade.prototype.channel = Facade.field('channel');
Facade.prototype.timestamp = Facade.field('timestamp');
Facade.prototype.userAgent = Facade.proxy('options.userAgent');
Facade.prototype.ip = Facade.proxy('options.ip');

/**
 * Return the cloned and traversed object
 *
 * @param {Mixed} obj
 * @return {Mixed}
 */

function transform(obj){
  var cloned = clone(obj);
  return cloned;
}

}, {"isodate-traverse":135,"./is-enabled":136,"./utils":137,"./address":138,"obj-case":139,"new-date":140}],
135: [function(require, module, exports) {

var is = require('is');
var isodate = require('isodate');
var each;

try {
  each = require('each');
} catch (err) {
  each = require('each-component');
}

/**
 * Expose `traverse`.
 */

module.exports = traverse;

/**
 * Traverse an object or array, and return a clone with all ISO strings parsed
 * into Date objects.
 *
 * @param {Object} obj
 * @return {Object}
 */

function traverse (input, strict) {
  if (strict === undefined) strict = true;

  if (is.object(input)) return object(input, strict);
  if (is.array(input)) return array(input, strict);
  return input;
}

/**
 * Object traverser.
 *
 * @param {Object} obj
 * @param {Boolean} strict
 * @return {Object}
 */

function object (obj, strict) {
  each(obj, function (key, val) {
    if (isodate.is(val, strict)) {
      obj[key] = isodate.parse(val);
    } else if (is.object(val) || is.array(val)) {
      traverse(val, strict);
    }
  });
  return obj;
}

/**
 * Array traverser.
 *
 * @param {Array} arr
 * @param {Boolean} strict
 * @return {Array}
 */

function array (arr, strict) {
  each(arr, function (val, x) {
    if (is.object(val)) {
      traverse(val, strict);
    } else if (isodate.is(val, strict)) {
      arr[x] = isodate.parse(val);
    }
  });
  return arr;
}

}, {"is":141,"isodate":142,"each":11}],
141: [function(require, module, exports) {

var isEmpty = require('is-empty');

try {
  var typeOf = require('type');
} catch (e) {
  var typeOf = require('component-type');
}


/**
 * Types.
 */

var types = [
  'arguments',
  'array',
  'boolean',
  'date',
  'element',
  'function',
  'null',
  'number',
  'object',
  'regexp',
  'string',
  'undefined'
];


/**
 * Expose type checkers.
 *
 * @param {Mixed} value
 * @return {Boolean}
 */

for (var i = 0, type; type = types[i]; i++) exports[type] = generate(type);


/**
 * Add alias for `function` for old browsers.
 */

exports.fn = exports['function'];


/**
 * Expose `empty` check.
 */

exports.empty = isEmpty;


/**
 * Expose `nan` check.
 */

exports.nan = function (val) {
  return exports.number(val) && val != val;
};


/**
 * Generate a type checker.
 *
 * @param {String} type
 * @return {Function}
 */

function generate (type) {
  return function (value) {
    return type === typeOf(value);
  };
}
}, {"is-empty":120,"type":13,"component-type":13}],
142: [function(require, module, exports) {

/**
 * Matcher, slightly modified from:
 *
 * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js
 */

var matcher = /^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;


/**
 * Convert an ISO date string to a date. Fallback to native `Date.parse`.
 *
 * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js
 *
 * @param {String} iso
 * @return {Date}
 */

exports.parse = function (iso) {
  var numericKeys = [1, 5, 6, 7, 11, 12];
  var arr = matcher.exec(iso);
  var offset = 0;

  // fallback to native parsing
  if (!arr) return new Date(iso);

  // remove undefined values
  for (var i = 0, val; val = numericKeys[i]; i++) {
    arr[val] = parseInt(arr[val], 10) || 0;
  }

  // allow undefined days and months
  arr[2] = parseInt(arr[2], 10) || 1;
  arr[3] = parseInt(arr[3], 10) || 1;

  // month is 0-11
  arr[2]--;

  // allow abitrary sub-second precision
  arr[8] = arr[8]
    ? (arr[8] + '00').substring(0, 3)
    : 0;

  // apply timezone if one exists
  if (arr[4] == ' ') {
    offset = new Date().getTimezoneOffset();
  } else if (arr[9] !== 'Z' && arr[10]) {
    offset = arr[11] * 60 + arr[12];
    if ('+' == arr[10]) offset = 0 - offset;
  }

  var millis = Date.UTC(arr[1], arr[2], arr[3], arr[5], arr[6] + offset, arr[7], arr[8]);
  return new Date(millis);
};


/**
 * Checks whether a `string` is an ISO date string. `strict` mode requires that
 * the date string at least have a year, month and date.
 *
 * @param {String} string
 * @param {Boolean} strict
 * @return {Boolean}
 */

exports.is = function (string, strict) {
  if (strict && false === /^\d{4}-\d{2}-\d{2}/.test(string)) return false;
  return matcher.test(string);
};
}, {}],
136: [function(require, module, exports) {

/**
 * A few integrations are disabled by default. They must be explicitly
 * enabled by setting options[Provider] = true.
 */

var disabled = {
  Salesforce: true
};

/**
 * Check whether an integration should be enabled by default.
 *
 * @param {String} integration
 * @return {Boolean}
 */

module.exports = function (integration) {
  return ! disabled[integration];
};
}, {}],
137: [function(require, module, exports) {

/**
 * TODO: use component symlink, everywhere ?
 */

try {
  exports.inherit = require('inherit');
  exports.clone = require('clone');
  exports.type = require('type');
} catch (e) {
  exports.inherit = require('inherit-component');
  exports.clone = require('clone-component');
  exports.type = require('type-component');
}

}, {"inherit":143,"clone":144,"type":13}],
143: [function(require, module, exports) {

module.exports = function(a, b){
  var fn = function(){};
  fn.prototype = b.prototype;
  a.prototype = new fn;
  a.prototype.constructor = a;
};
}, {}],
144: [function(require, module, exports) {
/**
 * Module dependencies.
 */

var type;
try {
  type = require('component-type');
} catch (_) {
  type = require('type');
}

/**
 * Module exports.
 */

module.exports = clone;

/**
 * Clones objects.
 *
 * @param {Mixed} any object
 * @api public
 */

function clone(obj){
  switch (type(obj)) {
    case 'object':
      var copy = {};
      for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
          copy[key] = clone(obj[key]);
        }
      }
      return copy;

    case 'array':
      var copy = new Array(obj.length);
      for (var i = 0, l = obj.length; i < l; i++) {
        copy[i] = clone(obj[i]);
      }
      return copy;

    case 'regexp':
      // from millermedeiros/amd-utils - MIT
      var flags = '';
      flags += obj.multiline ? 'm' : '';
      flags += obj.global ? 'g' : '';
      flags += obj.ignoreCase ? 'i' : '';
      return new RegExp(obj.source, flags);

    case 'date':
      return new Date(obj.getTime());

    default: // string, number, boolean, …
      return obj;
  }
}

}, {"component-type":13,"type":13}],
138: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var get = require('obj-case');

/**
 * Add address getters to `proto`.
 *
 * @param {Function} proto
 */

module.exports = function(proto){
  proto.zip = trait('postalCode', 'zip');
  proto.country = trait('country');
  proto.street = trait('street');
  proto.state = trait('state');
  proto.city = trait('city');

  function trait(a, b){
    return function(){
      var traits = this.traits();
      var props = this.properties ? this.properties() : {};

      return get(traits, 'address.' + a)
        || get(traits, a)
        || (b ? get(traits, 'address.' + b) : null)
        || (b ? get(traits, b) : null)
        || get(props, 'address.' + a)
        || get(props, a)
        || (b ? get(props, 'address.' + b) : null)
        || (b ? get(props, b) : null);
    };
  }
};

}, {"obj-case":139}],
139: [function(require, module, exports) {

var identity = function(_){ return _; };


/**
 * Module exports, export
 */

module.exports = module.exports.find = multiple(find);


/**
 * Export the replacement function, return the modified object
 */

module.exports.replace = function (obj, key, val) {
  multiple(replace).apply(this, arguments);
  return obj;
};


/**
 * Export the delete function, return the modified object
 */

module.exports.del = function (obj, key) {
  multiple(del).apply(this, arguments);
  return obj;
};


/**
 * Compose applying the function to a nested key
 */

function multiple (fn) {
  return function (obj, path, val) {
    path = normalize(path);

    var key;
    var finished = false;

    while (!finished) loop();

    function loop() {
      for (key in obj) {
        var normalizedKey = normalize(key);
        if (0 === path.indexOf(normalizedKey)) {
          var temp = path.substr(normalizedKey.length);
          if (temp.charAt(0) === '.' || temp.length === 0) {
            path = temp.substr(1);
            var child = obj[key];

            // we're at the end and there is nothing.
            if (null == child) {
              finished = true;
              return;
            }

            // we're at the end and there is something.
            if (!path.length) {
              finished = true;
              return;
            }

            // step into child
            obj = child;

            // but we're done here
            return;
          }
        }
      }

      key = undefined;
      // if we found no matching properties
      // on the current object, there's no match.
      finished = true;
    }

    if (!key) return;
    if (null == obj) return obj;

    // the `obj` and `key` is one above the leaf object and key, so
    // start object: { a: { 'b.c': 10 } }
    // end object: { 'b.c': 10 }
    // end key: 'b.c'
    // this way, you can do `obj[key]` and get `10`.
    return fn(obj, key, val);
  };
}


/**
 * Find an object by its key
 *
 * find({ first_name : 'Calvin' }, 'firstName')
 */

function find (obj, key) {
  if (obj.hasOwnProperty(key)) return obj[key];
}


/**
 * Delete a value for a given key
 *
 * del({ a : 'b', x : 'y' }, 'X' }) -> { a : 'b' }
 */

function del (obj, key) {
  if (obj.hasOwnProperty(key)) delete obj[key];
  return obj;
}


/**
 * Replace an objects existing value with a new one
 *
 * replace({ a : 'b' }, 'a', 'c') -> { a : 'c' }
 */

function replace (obj, key, val) {
  if (obj.hasOwnProperty(key)) obj[key] = val;
  return obj;
}

/**
 * Normalize a `dot.separated.path`.
 * 
 * A.HELL(!*&#(!)O_WOR   LD.bar => ahelloworldbar
 *
 * @param {String} path
 * @return {String}
 */

function normalize(path) {
  return path.replace(/[^a-zA-Z0-9\.]+/g, '').toLowerCase();
}
}, {}],
140: [function(require, module, exports) {

var is = require('is');
var isodate = require('isodate');
var milliseconds = require('./milliseconds');
var seconds = require('./seconds');


/**
 * Returns a new Javascript Date object, allowing a variety of extra input types
 * over the native Date constructor.
 *
 * @param {Date|String|Number} val
 */

module.exports = function newDate (val) {
  if (is.date(val)) return val;
  if (is.number(val)) return new Date(toMs(val));

  // date strings
  if (isodate.is(val)) return isodate.parse(val);
  if (milliseconds.is(val)) return milliseconds.parse(val);
  if (seconds.is(val)) return seconds.parse(val);

  // fallback to Date.parse
  return new Date(val);
};


/**
 * If the number passed val is seconds from the epoch, turn it into milliseconds.
 * Milliseconds would be greater than 31557600000 (December 31, 1970).
 *
 * @param {Number} num
 */

function toMs (num) {
  if (num < 31557600000) return num * 1000;
  return num;
}
}, {"is":145,"isodate":142,"./milliseconds":146,"./seconds":147}],
145: [function(require, module, exports) {

var isEmpty = require('is-empty')
  , typeOf = require('type');


/**
 * Types.
 */

var types = [
  'arguments',
  'array',
  'boolean',
  'date',
  'element',
  'function',
  'null',
  'number',
  'object',
  'regexp',
  'string',
  'undefined'
];


/**
 * Expose type checkers.
 *
 * @param {Mixed} value
 * @return {Boolean}
 */

for (var i = 0, type; type = types[i]; i++) exports[type] = generate(type);


/**
 * Add alias for `function` for old browsers.
 */

exports.fn = exports['function'];


/**
 * Expose `empty` check.
 */

exports.empty = isEmpty;


/**
 * Expose `nan` check.
 */

exports.nan = function (val) {
  return exports.number(val) && val != val;
};


/**
 * Generate a type checker.
 *
 * @param {String} type
 * @return {Function}
 */

function generate (type) {
  return function (value) {
    return type === typeOf(value);
  };
}
}, {"is-empty":120,"type":13}],
146: [function(require, module, exports) {

/**
 * Matcher.
 */

var matcher = /\d{13}/;


/**
 * Check whether a string is a millisecond date string.
 *
 * @param {String} string
 * @return {Boolean}
 */

exports.is = function (string) {
  return matcher.test(string);
};


/**
 * Convert a millisecond string to a date.
 *
 * @param {String} millis
 * @return {Date}
 */

exports.parse = function (millis) {
  millis = parseInt(millis, 10);
  return new Date(millis);
};
}, {}],
147: [function(require, module, exports) {

/**
 * Matcher.
 */

var matcher = /\d{10}/;


/**
 * Check whether a string is a second date string.
 *
 * @param {String} string
 * @return {Boolean}
 */

exports.is = function (string) {
  return matcher.test(string);
};


/**
 * Convert a second string to a date.
 *
 * @param {String} seconds
 * @return {Date}
 */

exports.parse = function (seconds) {
  var millis = parseInt(seconds, 10) * 1000;
  return new Date(millis);
};
}, {}],
129: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var inherit = require('./utils').inherit;
var Facade = require('./facade');

/**
 * Expose `Alias` facade.
 */

module.exports = Alias;

/**
 * Initialize a new `Alias` facade with a `dictionary` of arguments.
 *
 * @param {Object} dictionary
 *   @property {String} from
 *   @property {String} to
 *   @property {Object} options
 */

function Alias (dictionary) {
  Facade.call(this, dictionary);
}

/**
 * Inherit from `Facade`.
 */

inherit(Alias, Facade);

/**
 * Return type of facade.
 *
 * @return {String}
 */

Alias.prototype.type =
Alias.prototype.action = function () {
  return 'alias';
};

/**
 * Get `previousId`.
 *
 * @return {Mixed}
 * @api public
 */

Alias.prototype.from =
Alias.prototype.previousId = function(){
  return this.field('previousId')
    || this.field('from');
};

/**
 * Get `userId`.
 *
 * @return {String}
 * @api public
 */

Alias.prototype.to =
Alias.prototype.userId = function(){
  return this.field('userId')
    || this.field('to');
};

}, {"./utils":137,"./facade":128}],
130: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var inherit = require('./utils').inherit;
var address = require('./address');
var isEmail = require('is-email');
var newDate = require('new-date');
var Facade = require('./facade');

/**
 * Expose `Group` facade.
 */

module.exports = Group;

/**
 * Initialize a new `Group` facade with a `dictionary` of arguments.
 *
 * @param {Object} dictionary
 *   @param {String} userId
 *   @param {String} groupId
 *   @param {Object} properties
 *   @param {Object} options
 */

function Group (dictionary) {
  Facade.call(this, dictionary);
}

/**
 * Inherit from `Facade`
 */

inherit(Group, Facade);

/**
 * Get the facade's action.
 */

Group.prototype.type =
Group.prototype.action = function () {
  return 'group';
};

/**
 * Setup some basic proxies.
 */

Group.prototype.groupId = Facade.field('groupId');

/**
 * Get created or createdAt.
 *
 * @return {Date}
 */

Group.prototype.created = function(){
  var created = this.proxy('traits.createdAt')
    || this.proxy('traits.created')
    || this.proxy('properties.createdAt')
    || this.proxy('properties.created');

  if (created) return newDate(created);
};

/**
 * Get the group's email, falling back to the group ID if it's a valid email.
 *
 * @return {String}
 */

Group.prototype.email = function () {
  var email = this.proxy('traits.email');
  if (email) return email;
  var groupId = this.groupId();
  if (isEmail(groupId)) return groupId;
};

/**
 * Get the group's traits.
 *
 * @param {Object} aliases
 * @return {Object}
 */

Group.prototype.traits = function (aliases) {
  var ret = this.properties();
  var id = this.groupId();
  aliases = aliases || {};

  if (id) ret.id = id;

  for (var alias in aliases) {
    var value = null == this[alias]
      ? this.proxy('traits.' + alias)
      : this[alias]();
    if (null == value) continue;
    ret[aliases[alias]] = value;
    delete ret[alias];
  }

  return ret;
};

/**
 * Special traits.
 */

Group.prototype.name = Facade.proxy('traits.name');
Group.prototype.industry = Facade.proxy('traits.industry');
Group.prototype.employees = Facade.proxy('traits.employees');

/**
 * Get traits or properties.
 *
 * TODO: remove me
 *
 * @return {Object}
 */

Group.prototype.properties = function(){
  return this.field('traits')
    || this.field('properties')
    || {};
};

}, {"./utils":137,"./address":138,"is-email":148,"new-date":140,"./facade":128}],
148: [function(require, module, exports) {

/**
 * Expose `isEmail`.
 */

module.exports = isEmail;


/**
 * Email address matcher.
 */

var matcher = /.+\@.+\..+/;


/**
 * Loosely validate an email address.
 *
 * @param {String} string
 * @return {Boolean}
 */

function isEmail (string) {
  return matcher.test(string);
}
}, {}],
131: [function(require, module, exports) {

var address = require('./address');
var Facade = require('./facade');
var isEmail = require('is-email');
var newDate = require('new-date');
var utils = require('./utils');
var get = require('obj-case');
var trim = require('trim');
var inherit = utils.inherit;
var clone = utils.clone;
var type = utils.type;

/**
 * Expose `Idenfity` facade.
 */

module.exports = Identify;

/**
 * Initialize a new `Identify` facade with a `dictionary` of arguments.
 *
 * @param {Object} dictionary
 *   @param {String} userId
 *   @param {String} sessionId
 *   @param {Object} traits
 *   @param {Object} options
 */

function Identify (dictionary) {
  Facade.call(this, dictionary);
}

/**
 * Inherit from `Facade`.
 */

inherit(Identify, Facade);

/**
 * Get the facade's action.
 */

Identify.prototype.type =
Identify.prototype.action = function () {
  return 'identify';
};

/**
 * Get the user's traits.
 *
 * @param {Object} aliases
 * @return {Object}
 */

Identify.prototype.traits = function (aliases) {
  var ret = this.field('traits') || {};
  var id = this.userId();
  aliases = aliases || {};

  if (id) ret.id = id;

  for (var alias in aliases) {
    var value = null == this[alias]
      ? this.proxy('traits.' + alias)
      : this[alias]();
    if (null == value) continue;
    ret[aliases[alias]] = value;
    if (alias !== aliases[alias]) delete ret[alias];
  }

  return ret;
};

/**
 * Get the user's email, falling back to their user ID if it's a valid email.
 *
 * @return {String}
 */

Identify.prototype.email = function () {
  var email = this.proxy('traits.email');
  if (email) return email;

  var userId = this.userId();
  if (isEmail(userId)) return userId;
};

/**
 * Get the user's created date, optionally looking for `createdAt` since lots of
 * people do that instead.
 *
 * @return {Date or Undefined}
 */

Identify.prototype.created = function () {
  var created = this.proxy('traits.created') || this.proxy('traits.createdAt');
  if (created) return newDate(created);
};

/**
 * Get the company created date.
 *
 * @return {Date or undefined}
 */

Identify.prototype.companyCreated = function(){
  var created = this.proxy('traits.company.created')
    || this.proxy('traits.company.createdAt');

  if (created) return newDate(created);
};

/**
 * Get the user's name, optionally combining a first and last name if that's all
 * that was provided.
 *
 * @return {String or Undefined}
 */

Identify.prototype.name = function () {
  var name = this.proxy('traits.name');
  if (typeof name === 'string') return trim(name);

  var firstName = this.firstName();
  var lastName = this.lastName();
  if (firstName && lastName) return trim(firstName + ' ' + lastName);
};

/**
 * Get the user's first name, optionally splitting it out of a single name if
 * that's all that was provided.
 *
 * @return {String or Undefined}
 */

Identify.prototype.firstName = function () {
  var firstName = this.proxy('traits.firstName');
  if (typeof firstName === 'string') return trim(firstName);

  var name = this.proxy('traits.name');
  if (typeof name === 'string') return trim(name).split(' ')[0];
};

/**
 * Get the user's last name, optionally splitting it out of a single name if
 * that's all that was provided.
 *
 * @return {String or Undefined}
 */

Identify.prototype.lastName = function () {
  var lastName = this.proxy('traits.lastName');
  if (typeof lastName === 'string') return trim(lastName);

  var name = this.proxy('traits.name');
  if (typeof name !== 'string') return;

  var space = trim(name).indexOf(' ');
  if (space === -1) return;

  return trim(name.substr(space + 1));
};

/**
 * Get the user's unique id.
 *
 * @return {String or undefined}
 */

Identify.prototype.uid = function(){
  return this.userId()
    || this.username()
    || this.email();
};

/**
 * Get description.
 *
 * @return {String}
 */

Identify.prototype.description = function(){
  return this.proxy('traits.description')
    || this.proxy('traits.background');
};

/**
 * Get the age.
 *
 * If the age is not explicitly set
 * the method will compute it from `.birthday()`
 * if possible.
 *
 * @return {Number}
 */

Identify.prototype.age = function(){
  var date = this.birthday();
  var age = get(this.traits(), 'age');
  if (null != age) return age;
  if ('date' != type(date)) return;
  var now = new Date;
  return now.getFullYear() - date.getFullYear();
};

/**
 * Get the avatar.
 *
 * .photoUrl needed because help-scout
 * implementation uses `.avatar || .photoUrl`.
 *
 * .avatarUrl needed because trakio uses it.
 *
 * @return {Mixed}
 */

Identify.prototype.avatar = function(){
  var traits = this.traits();
  return get(traits, 'avatar')
    || get(traits, 'photoUrl')
    || get(traits, 'avatarUrl');
};

/**
 * Get the position.
 *
 * .jobTitle needed because some integrations use it.
 *
 * @return {Mixed}
 */

Identify.prototype.position = function(){
  var traits = this.traits();
  return get(traits, 'position') || get(traits, 'jobTitle');
};

/**
 * Setup sme basic "special" trait proxies.
 */

Identify.prototype.username = Facade.proxy('traits.username');
Identify.prototype.website = Facade.one('traits.website');
Identify.prototype.websites = Facade.multi('traits.website');
Identify.prototype.phone = Facade.one('traits.phone');
Identify.prototype.phones = Facade.multi('traits.phone');
Identify.prototype.address = Facade.proxy('traits.address');
Identify.prototype.gender = Facade.proxy('traits.gender');
Identify.prototype.birthday = Facade.proxy('traits.birthday');

}, {"./address":138,"./facade":128,"is-email":148,"new-date":140,"./utils":137,"obj-case":139,"trim":149}],
149: [function(require, module, exports) {

exports = module.exports = trim;

function trim(str){
  if (str.trim) return str.trim();
  return str.replace(/^\s*|\s*$/g, '');
}

exports.left = function(str){
  if (str.trimLeft) return str.trimLeft();
  return str.replace(/^\s*/, '');
};

exports.right = function(str){
  if (str.trimRight) return str.trimRight();
  return str.replace(/\s*$/, '');
};

}, {}],
132: [function(require, module, exports) {

var inherit = require('./utils').inherit;
var clone = require('./utils').clone;
var type = require('./utils').type;
var Facade = require('./facade');
var Identify = require('./identify');
var isEmail = require('is-email');
var get = require('obj-case');

/**
 * Expose `Track` facade.
 */

module.exports = Track;

/**
 * Initialize a new `Track` facade with a `dictionary` of arguments.
 *
 * @param {object} dictionary
 *   @property {String} event
 *   @property {String} userId
 *   @property {String} sessionId
 *   @property {Object} properties
 *   @property {Object} options
 */

function Track (dictionary) {
  Facade.call(this, dictionary);
}

/**
 * Inherit from `Facade`.
 */

inherit(Track, Facade);

/**
 * Return the facade's action.
 *
 * @return {String}
 */

Track.prototype.type =
Track.prototype.action = function () {
  return 'track';
};

/**
 * Setup some basic proxies.
 */

Track.prototype.event = Facade.field('event');
Track.prototype.value = Facade.proxy('properties.value');

/**
 * Misc
 */

Track.prototype.category = Facade.proxy('properties.category');

/**
 * Ecommerce
 */

Track.prototype.id = Facade.proxy('properties.id');
Track.prototype.sku = Facade.proxy('properties.sku');
Track.prototype.tax = Facade.proxy('properties.tax');
Track.prototype.name = Facade.proxy('properties.name');
Track.prototype.price = Facade.proxy('properties.price');
Track.prototype.total = Facade.proxy('properties.total');
Track.prototype.coupon = Facade.proxy('properties.coupon');
Track.prototype.shipping = Facade.proxy('properties.shipping');
Track.prototype.discount = Facade.proxy('properties.discount');

/**
 * Description
 */

Track.prototype.description = Facade.proxy('properties.description');

/**
 * Plan
 */

Track.prototype.plan = Facade.proxy('properties.plan');

/**
 * Order id.
 *
 * @return {String}
 * @api public
 */

Track.prototype.orderId = function(){
  return this.proxy('properties.id')
    || this.proxy('properties.orderId');
};

/**
 * Get subtotal.
 *
 * @return {Number}
 */

Track.prototype.subtotal = function(){
  var subtotal = get(this.properties(), 'subtotal');
  var total = this.total();
  var n;

  if (subtotal) return subtotal;
  if (!total) return 0;
  if (n = this.tax()) total -= n;
  if (n = this.shipping()) total -= n;
  if (n = this.discount()) total += n;

  return total;
};

/**
 * Get products.
 *
 * @return {Array}
 */

Track.prototype.products = function(){
  var props = this.properties();
  var products = get(props, 'products');
  return 'array' == type(products)
    ? products
    : [];
};

/**
 * Get quantity.
 *
 * @return {Number}
 */

Track.prototype.quantity = function(){
  var props = this.obj.properties || {};
  return props.quantity || 1;
};

/**
 * Get currency.
 *
 * @return {String}
 */

Track.prototype.currency = function(){
  var props = this.obj.properties || {};
  return props.currency || 'USD';
};

/**
 * BACKWARDS COMPATIBILITY: should probably re-examine where these come from.
 */

Track.prototype.referrer = Facade.proxy('properties.referrer');
Track.prototype.query = Facade.proxy('options.query');

/**
 * Get the call's properties.
 *
 * @param {Object} aliases
 * @return {Object}
 */

Track.prototype.properties = function (aliases) {
  var ret = this.field('properties') || {};
  aliases = aliases || {};

  for (var alias in aliases) {
    var value = null == this[alias]
      ? this.proxy('properties.' + alias)
      : this[alias]();
    if (null == value) continue;
    ret[aliases[alias]] = value;
    delete ret[alias];
  }

  return ret;
};

/**
 * Get the call's username.
 *
 * @return {String or Undefined}
 */

Track.prototype.username = function () {
  return this.proxy('traits.username') ||
         this.proxy('properties.username') ||
         this.userId() ||
         this.sessionId();
};

/**
 * Get the call's email, using an the user ID if it's a valid email.
 *
 * @return {String or Undefined}
 */

Track.prototype.email = function () {
  var email = this.proxy('traits.email');
  email = email || this.proxy('properties.email');
  if (email) return email;

  var userId = this.userId();
  if (isEmail(userId)) return userId;
};

/**
 * Get the call's revenue, parsing it from a string with an optional leading
 * dollar sign.
 *
 * For products/services that don't have shipping and are not directly taxed,
 * they only care about tracking `revenue`. These are things like
 * SaaS companies, who sell monthly subscriptions. The subscriptions aren't
 * taxed directly, and since it's a digital product, it has no shipping.
 *
 * The only case where there's a difference between `revenue` and `total`
 * (in the context of analytics) is on ecommerce platforms, where they want
 * the `revenue` function to actually return the `total` (which includes
 * tax and shipping, total = subtotal + tax + shipping). This is probably
 * because on their backend they assume tax and shipping has been applied to
 * the value, and so can get the revenue on their own.
 *
 * @return {Number}
 */

Track.prototype.revenue = function () {
  var revenue = this.proxy('properties.revenue');
  var event = this.event();

  // it's always revenue, unless it's called during an order completion.
  if (!revenue && event && event.match(/completed ?order/i)) {
    revenue = this.proxy('properties.total');
  }

  return currency(revenue);
};

/**
 * Get cents.
 *
 * @return {Number}
 */

Track.prototype.cents = function(){
  var revenue = this.revenue();
  return 'number' != typeof revenue
    ? this.value() || 0
    : revenue * 100;
};

/**
 * A utility to turn the pieces of a track call into an identify. Used for
 * integrations with super properties or rate limits.
 *
 * TODO: remove me.
 *
 * @return {Facade}
 */

Track.prototype.identify = function () {
  var json = this.json();
  json.traits = this.traits();
  return new Identify(json);
};

/**
 * Get float from currency value.
 *
 * @param {Mixed} val
 * @return {Number}
 */

function currency(val) {
  if (!val) return;
  if (typeof val === 'number') return val;
  if (typeof val !== 'string') return;

  val = val.replace(/\$/g, '');
  val = parseFloat(val);

  if (!isNaN(val)) return val;
}

}, {"./utils":137,"./facade":128,"./identify":131,"is-email":148,"obj-case":139}],
133: [function(require, module, exports) {

var inherit = require('./utils').inherit;
var Facade = require('./facade');
var Track = require('./track');

/**
 * Expose `Page` facade
 */

module.exports = Page;

/**
 * Initialize new `Page` facade with `dictionary`.
 *
 * @param {Object} dictionary
 *   @param {String} category
 *   @param {String} name
 *   @param {Object} traits
 *   @param {Object} options
 */

function Page(dictionary){
  Facade.call(this, dictionary);
}

/**
 * Inherit from `Facade`
 */

inherit(Page, Facade);

/**
 * Get the facade's action.
 *
 * @return {String}
 */

Page.prototype.type =
Page.prototype.action = function(){
  return 'page';
};

/**
 * Fields
 */

Page.prototype.category = Facade.field('category');
Page.prototype.name = Facade.field('name');

/**
 * Proxies.
 */

Page.prototype.title = Facade.proxy('properties.title');
Page.prototype.path = Facade.proxy('properties.path');
Page.prototype.url = Facade.proxy('properties.url');

/**
 * Referrer.
 */

Page.prototype.referrer = function(){
  return this.proxy('properties.referrer')
    || this.proxy('context.referrer.url');
};

/**
 * Get the page properties mixing `category` and `name`.
 *
 * @return {Object}
 */

Page.prototype.properties = function(){
  var props = this.field('properties') || {};
  var category = this.category();
  var name = this.name();
  if (category) props.category = category;
  if (name) props.name = name;
  return props;
};

/**
 * Get the page fullName.
 *
 * @return {String}
 */

Page.prototype.fullName = function(){
  var category = this.category();
  var name = this.name();
  return name && category
    ? category + ' ' + name
    : name;
};

/**
 * Get event with `name`.
 *
 * @return {String}
 */

Page.prototype.event = function(name){
  return name
    ? 'Viewed ' + name + ' Page'
    : 'Loaded a Page';
};

/**
 * Convert this Page to a Track facade with `name`.
 *
 * @param {String} name
 * @return {Track}
 */

Page.prototype.track = function(name){
  var props = this.properties();
  return new Track({
    event: this.event(name),
    timestamp: this.timestamp(),
    context: this.context(),
    properties: props
  });
};

}, {"./utils":137,"./facade":128,"./track":132}],
134: [function(require, module, exports) {

var inherit = require('./utils').inherit;
var Page = require('./page');
var Track = require('./track');

/**
 * Expose `Screen` facade
 */

module.exports = Screen;

/**
 * Initialize new `Screen` facade with `dictionary`.
 *
 * @param {Object} dictionary
 *   @param {String} category
 *   @param {String} name
 *   @param {Object} traits
 *   @param {Object} options
 */

function Screen(dictionary){
  Page.call(this, dictionary);
}

/**
 * Inherit from `Page`
 */

inherit(Screen, Page);

/**
 * Get the facade's action.
 *
 * @return {String}
 * @api public
 */

Screen.prototype.type =
Screen.prototype.action = function(){
  return 'screen';
};

/**
 * Get event with `name`.
 *
 * @param {String} name
 * @return {String}
 * @api public
 */

Screen.prototype.event = function(name){
  return name
    ? 'Viewed ' + name + ' Screen'
    : 'Loaded a Screen';
};

/**
 * Convert this Screen.
 *
 * @param {String} name
 * @return {Track}
 * @api public
 */

Screen.prototype.track = function(name){
  var props = this.properties();
  return new Track({
    event: this.event(name),
    timestamp: this.timestamp(),
    context: this.context(),
    properties: props
  });
};

}, {"./utils":137,"./page":133,"./track":132}],
126: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var stringify = require('querystring').stringify;
var sub = require('substitute');

/**
 * Factory function to create a pixel loader.
 *
 * @param {String} path
 * @return {Function}
 * @api public
 */

module.exports = function(path){
  return function(query, obj, fn){
    if ('function' == typeof obj) fn = obj, obj = {};
    obj = obj || {};
    fn = fn || function(){};
    var url = sub(path, obj);
    var img = new Image;
    img.onerror = error(fn, 'failed to load pixel', img);
    img.onload = function(){ fn(); };
    query = stringify(query);
    if (query) query = '?' + query;
    img.src = url + query;
    img.width = 1;
    img.height = 1;
    return img;
  };
};

/**
 * Create an error handler.
 *
 * @param {Fucntion} fn
 * @param {String} message
 * @param {Image} img
 * @return {Function}
 * @api private
 */

function error(fn, message, img){
  return function(e){
    e = e || window.event;
    var err = new Error(message);
    err.event = e;
    err.source = img;
    fn(err);
  };
}

}, {"querystring":127,"substitute":150}],
127: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var encode = encodeURIComponent;
var decode = decodeURIComponent;
var trim = require('trim');
var type = require('type');

/**
 * Parse the given query `str`.
 *
 * @param {String} str
 * @return {Object}
 * @api public
 */

exports.parse = function(str){
  if ('string' != typeof str) return {};

  str = trim(str);
  if ('' == str) return {};
  if ('?' == str.charAt(0)) str = str.slice(1);

  var obj = {};
  var pairs = str.split('&');
  for (var i = 0; i < pairs.length; i++) {
    var parts = pairs[i].split('=');
    var key = decode(parts[0]);
    var m;

    if (m = /(\w+)\[(\d+)\]/.exec(key)) {
      obj[m[1]] = obj[m[1]] || [];
      obj[m[1]][m[2]] = decode(parts[1]);
      continue;
    }

    obj[parts[0]] = null == parts[1]
      ? ''
      : decode(parts[1]);
  }

  return obj;
};

/**
 * Stringify the given `obj`.
 *
 * @param {Object} obj
 * @return {String}
 * @api public
 */

exports.stringify = function(obj){
  if (!obj) return '';
  var pairs = [];

  for (var key in obj) {
    var value = obj[key];

    if ('array' == type(value)) {
      for (var i = 0; i < value.length; ++i) {
        pairs.push(encode(key + '[' + i + ']') + '=' + encode(value[i]));
      }
      continue;
    }

    pairs.push(encode(key) + '=' + encode(obj[key]));
  }

  return pairs.join('&');
};

}, {"trim":149,"type":13}],
150: [function(require, module, exports) {

/**
 * Expose `substitute`
 */

module.exports = substitute;

/**
 * Type.
 */

var type = Object.prototype.toString;

/**
 * Substitute `:prop` with the given `obj` in `str`
 *
 * @param {String} str
 * @param {Object or Array} obj
 * @param {RegExp} expr
 * @return {String}
 * @api public
 */

function substitute(str, obj, expr){
  if (!obj) throw new TypeError('expected an object');
  expr = expr || /:(\w+)/g;
  return str.replace(expr, function(_, prop){
    switch (type.call(obj)) {
      case '[object Object]':
        return null != obj[prop] ? obj[prop] : _;
      case '[object Array]':
        var val = obj.shift();
        return null != val ? val : _;
    }
  });
}

}, {}],
23: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var tick = require('next-tick');

/**
 * Expose `BugHerd` integration.
 */

var BugHerd = module.exports = integration('BugHerd')
  .assumesPageview()
  .global('BugHerdConfig')
  .global('_bugHerd')
  .option('apiKey', '')
  .option('showFeedbackTab', true)
  .tag('<script src="//www.bugherd.com/sidebarv2.js?apikey={{ apiKey }}">');

/**
 * Initialize.
 *
 * http://support.bugherd.com/home
 *
 * @param {Object} page
 */

BugHerd.prototype.initialize = function(page){
  window.BugHerdConfig = { feedback: { hide: !this.options.showFeedbackTab }};
  var ready = this.ready;
  this.load(function(){
    tick(ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

BugHerd.prototype.loaded = function(){
  return !! window._bugHerd;
};

}, {"analytics.js-integration":89,"next-tick":103}],
24: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var is = require('is');
var extend = require('extend');
var onError = require('on-error');

/**
 * UMD ?
 */

var umd = 'function' == typeof define && define.amd;

/**
 * Source.
 */

var src = '//d2wy8f7a9ursnm.cloudfront.net/bugsnag-2.min.js';

/**
 * Expose `Bugsnag` integration.
 */

var Bugsnag = module.exports = integration('Bugsnag')
  .global('Bugsnag')
  .option('apiKey', '')
  .tag('<script src="' + src + '">');

/**
 * Initialize.
 *
 * https://bugsnag.com/docs/notifiers/js
 *
 * @param {Object} page
 */

Bugsnag.prototype.initialize = function(page){
  var self = this;

  if (umd) {
    window.require([src], function(bugsnag){
      bugsnag.apiKey = self.options.apiKey;
      window.Bugsnag = bugsnag;
      self.ready();
    });
    return;
  }

  this.load(function(){
    window.Bugsnag.apiKey = self.options.apiKey;
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Bugsnag.prototype.loaded = function(){
  return is.object(window.Bugsnag);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Bugsnag.prototype.identify = function(identify){
  window.Bugsnag.metaData = window.Bugsnag.metaData || {};
  extend(window.Bugsnag.metaData, identify.traits());
};

}, {"analytics.js-integration":89,"is":92,"extend":123,"on-error":151}],
151: [function(require, module, exports) {

/**
 * Expose `onError`.
 */

module.exports = onError;


/**
 * Callbacks.
 */

var callbacks = [];


/**
 * Preserve existing handler.
 */

if ('function' == typeof window.onerror) callbacks.push(window.onerror);


/**
 * Bind to `window.onerror`.
 */

window.onerror = handler;


/**
 * Error handler.
 */

function handler () {
  for (var i = 0, fn; fn = callbacks[i]; i++) fn.apply(this, arguments);
}


/**
 * Call a `fn` on `window.onerror`.
 *
 * @param {Function} fn
 */

function onError (fn) {
  callbacks.push(fn);
  if (window.onerror != handler) {
    callbacks.push(window.onerror);
    window.onerror = handler;
  }
}
}, {}],
25: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var defaults = require('defaults');
var onBody = require('on-body');

/**
 * Expose `Chartbeat` integration.
 */

var Chartbeat = module.exports = integration('Chartbeat')
  .assumesPageview()
  .global('_sf_async_config')
  .global('_sf_endpt')
  .global('pSUPERFLY')
  .option('domain', '')
  .option('uid', null)
  .tag('<script src="//static.chartbeat.com/js/chartbeat.js">');

/**
 * Initialize.
 *
 * http://chartbeat.com/docs/configuration_variables/
 *
 * @param {Object} page
 */

Chartbeat.prototype.initialize = function(page){
  var self = this;

  window._sf_async_config = window._sf_async_config || {};
  window._sf_async_config.useCanonical = true;
  defaults(window._sf_async_config, this.options);

  onBody(function(){
    window._sf_endpt = new Date().getTime();
    // Note: Chartbeat depends on document.body existing so the script does
    // not load until that is confirmed. Otherwise it may trigger errors.
    self.load(self.ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Chartbeat.prototype.loaded = function(){
  return !! window.pSUPERFLY;
};

/**
 * Page.
 *
 * http://chartbeat.com/docs/handling_virtual_page_changes/
 *
 * @param {Page} page
 */

Chartbeat.prototype.page = function(page){
  var props = page.properties();
  var name = page.fullName();
  window.pSUPERFLY.virtualPage(props.path, name || props.title);
};

}, {"analytics.js-integration":89,"defaults":152,"on-body":122}],
152: [function(require, module, exports) {
/**
 * Expose `defaults`.
 */
module.exports = defaults;

function defaults (dest, defaults) {
  for (var prop in defaults) {
    if (! (prop in dest)) {
      dest[prop] = defaults[prop];
    }
  }

  return dest;
};

}, {}],
26: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_cbq');
var each = require('each');

/**
 * HOP
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Supported events
 */

var supported = {
  activation: true,
  changePlan: true,
  register: true,
  refund: true,
  charge: true,
  cancel: true,
  login: true
};

/**
 * Expose `ChurnBee` integration.
 */

var ChurnBee = module.exports = integration('ChurnBee')
  .global('_cbq')
  .global('ChurnBee')
  .option('apiKey', '')
  .tag('<script src="//api.churnbee.com/cb.js">')
  .mapping('events');

/**
 * Initialize.
 *
 * https://churnbee.com/docs
 *
 * @param {Object} page
 */

ChurnBee.prototype.initialize = function(page){
  push('_setApiKey', this.options.apiKey);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

ChurnBee.prototype.loaded = function(){
  return !! window.ChurnBee;
};

/**
 * Track.
 *
 * @param {Track} event
 */

ChurnBee.prototype.track = function(track){
  var event = track.event();
  var events = this.events(event);
  events.push(event);
  each(events, function(event){
    if (true != supported[event]) return;
    push(event, track.properties({ revenue: 'amount' }));
  });
};

}, {"analytics.js-integration":89,"global-queue":153,"each":11}],
153: [function(require, module, exports) {

/**
 * Expose `generate`.
 */

module.exports = generate;


/**
 * Generate a global queue pushing method with `name`.
 *
 * @param {String} name
 * @param {Object} options
 *   @property {Boolean} wrap
 * @return {Function}
 */

function generate (name, options) {
  options = options || {};

  return function (args) {
    args = [].slice.call(arguments);
    window[name] || (window[name] = []);
    options.wrap === false
      ? window[name].push.apply(window[name], args)
      : window[name].push(args);
  };
}
}, {}],
27: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var date = require('load-date');
var domify = require('domify');
var each = require('each');
var integration = require('analytics.js-integration');
var is = require('is');
var useHttps = require('use-https');
var onBody = require('on-body');

/**
 * Expose `ClickTale` integration.
 */

var ClickTale = module.exports = integration('ClickTale')
  .assumesPageview()
  .global('WRInitTime')
  .global('ClickTale')
  .global('ClickTaleSetUID')
  .global('ClickTaleField')
  .global('ClickTaleEvent')
  .option('httpCdnUrl', 'http://s.clicktale.net/WRe0.js')
  .option('httpsCdnUrl', '')
  .option('projectId', '')
  .option('recordingRatio', 0.01)
  .option('partitionId', '')
  .tag('<script src="{{src}}">');

/**
 * Initialize.
 *
 * http://wiki.clicktale.com/Article/JavaScript_API
 *
 * @param {Object} page
 */

ClickTale.prototype.initialize = function(page){
  var self = this;
  window.WRInitTime = date.getTime();

  onBody(function(body){
    body.appendChild(domify('<div id="ClickTaleDiv" style="display: none;">'));
  });

  var http = this.options.httpCdnUrl;
  var https = this.options.httpsCdnUrl;
  if (useHttps() && !https) return this.debug('https option required');
  var src = useHttps() ? https : http;

  this.load({ src: src }, function(){
    window.ClickTale(
      self.options.projectId,
      self.options.recordingRatio,
      self.options.partitionId
    );
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

ClickTale.prototype.loaded = function(){
  return is.fn(window.ClickTale);
};

/**
 * Identify.
 *
 * http://wiki.clicktale.com/Article/ClickTaleTag#ClickTaleSetUID
 * http://wiki.clicktale.com/Article/ClickTaleTag#ClickTaleField
 *
 * @param {Identify} identify
 */

ClickTale.prototype.identify = function(identify){
  var id = identify.userId();
  window.ClickTaleSetUID(id);
  each(identify.traits(), function(key, value){
    window.ClickTaleField(key, value);
  });
};

/**
 * Track.
 *
 * http://wiki.clicktale.com/Article/ClickTaleTag#ClickTaleEvent
 *
 * @param {Track} track
 */

ClickTale.prototype.track = function(track){
  window.ClickTaleEvent(track.event());
};

}, {"load-date":154,"domify":117,"each":11,"analytics.js-integration":89,"is":92,"use-https":91,"on-body":122}],
154: [function(require, module, exports) {


/*
 * Load date.
 *
 * For reference: http://www.html5rocks.com/en/tutorials/webperformance/basics/
 */

var time = new Date()
  , perf = window.performance;

if (perf && perf.timing && perf.timing.responseEnd) {
  time = new Date(perf.timing.responseEnd);
}

module.exports = time;
}, {}],
28: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var Identify = require('facade').Identify;
var extend = require('extend');
var integration = require('analytics.js-integration');
var is = require('is');

/**
 * Expose `Clicky` integration.
 */

var Clicky = module.exports = integration('Clicky')
  .assumesPageview()
  .global('clicky')
  .global('clicky_site_ids')
  .global('clicky_custom')
  .option('siteId', null)
  .tag('<script src="//static.getclicky.com/js"></script>');

/**
 * Initialize.
 *
 * http://clicky.com/help/customization
 *
 * @param {Object} page
 */

Clicky.prototype.initialize = function(page){
  var user = this.analytics.user();
  window.clicky_site_ids = window.clicky_site_ids || [this.options.siteId];
  this.identify(new Identify({
    userId: user.id(),
    traits: user.traits()
  }));
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Clicky.prototype.loaded = function(){
  return is.object(window.clicky);
};

/**
 * Page.
 *
 * http://clicky.com/help/customization#/help/custom/manual
 *
 * @param {Page} page
 */

Clicky.prototype.page = function(page){
  var properties = page.properties();
  var category = page.category();
  var name = page.fullName();
  window.clicky.log(properties.path, name || properties.title);
};

/**
 * Identify.
 *
 * @param {Identify} id (optional)
 */

Clicky.prototype.identify = function(identify){
  window.clicky_custom = window.clicky_custom || {};
  window.clicky_custom.session = window.clicky_custom.session || {};
  extend(window.clicky_custom.session, identify.traits());
};

/**
 * Track.
 *
 * http://clicky.com/help/customization#/help/custom/manual
 *
 * @param {Track} event
 */

Clicky.prototype.track = function(track){
  window.clicky.goal(track.event(), track.revenue());
};

}, {"facade":125,"extend":123,"analytics.js-integration":89,"is":92}],
29: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var useHttps = require('use-https');

/**
 * Expose `Comscore` integration.
 */

var Comscore = module.exports = integration('comScore')
  .assumesPageview()
  .global('_comscore')
  .global('COMSCORE')
  .option('c1', '2')
  .option('c2', '')
  .tag('http', '<script src="http://b.scorecardresearch.com/beacon.js">')
  .tag('https', '<script src="https://sb.scorecardresearch.com/beacon.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Comscore.prototype.initialize = function(page){
  window._comscore = window._comscore || [this.options];
  var name = useHttps() ? 'https' : 'http';
  this.load(name, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Comscore.prototype.loaded = function(){
  return !! window.COMSCORE;
};

/**
 * Page
 *
 * @param {Object} page
 */

Comscore.prototype.page = function(page){
  window.COMSCORE.beacon(this.options);
};

}, {"analytics.js-integration":89,"use-https":91}],
30: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `CrazyEgg` integration.
 */

var CrazyEgg = module.exports = integration('Crazy Egg')
  .assumesPageview()
  .global('CE2')
  .option('accountNumber', '')
  .tag('<script src="//dnn506yrbagrg.cloudfront.net/pages/scripts/{{ path }}.js?{{ cache }}">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

CrazyEgg.prototype.initialize = function(page){
  var number = this.options.accountNumber;
  var path = number.slice(0,4) + '/' + number.slice(4);
  var cache = Math.floor(new Date().getTime() / 3600000);
  this.load({ path: path, cache: cache }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

CrazyEgg.prototype.loaded = function(){
  return !! window.CE2;
};

}, {"analytics.js-integration":89}],
31: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_curebitq');
var Identify = require('facade').Identify;
var throttle = require('throttle');
var Track = require('facade').Track;
var iso = require('to-iso-string');
var clone = require('clone');
var each = require('each');
var bind = require('bind');

/**
 * Expose `Curebit` integration.
 */

var Curebit = module.exports = integration('Curebit')
  .global('_curebitq')
  .global('curebit')
  .option('siteId', '')
  .option('iframeWidth', '100%')
  .option('iframeHeight', '480')
  .option('iframeBorder', 0)
  .option('iframeId', 'curebit_integration')
  .option('responsive', true)
  .option('device', '')
  .option('insertIntoId', '')
  .option('campaigns', {})
  .option('server', 'https://www.curebit.com')
  .tag('<script src="//d2jjzw81hqbuqv.cloudfront.net/integration/curebit-1.0.min.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Curebit.prototype.initialize = function(page){
  push('init', { site_id: this.options.siteId, server: this.options.server });
  this.load(this.ready);

  // throttle the call to `page` since curebit needs to append an iframe
  this.page = throttle(bind(this, this.page), 250);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Curebit.prototype.loaded = function(){
  return !!window.curebit;
};

/**
 * Page.
 *
 * Call the `register_affiliate` method of the Curebit API that will load a
 * custom iframe onto the page, only if this page's path is marked as a
 * campaign.
 *
 * http://www.curebit.com/docs/affiliate/registration
 *
 * This is throttled to prevent accidentally drawing the iframe multiple times,
 * from multiple `.page()` calls. The `250` is from the curebit script.
 *
 * @param {String} url
 * @param {String} id
 * @param {Function} fn
 * @api private
 */

Curebit.prototype.injectIntoId = function(url, id, fn){
  var server = this.options.server;
  when(function(){
    return document.getElementById(id);
  }, function(){
    var script = document.createElement('script');
    script.src = url;
    var parent = document.getElementById(id);
    parent.appendChild(script);
    onload(script, fn);
  });
};

/**
 * Campaign tags.
 *
 * @param {Page} page
 */

Curebit.prototype.page = function(page){
  var user = this.analytics.user();
  var campaigns = this.options.campaigns;
  var path = window.location.pathname;
  if (!campaigns[path]) return;

  var tags = (campaigns[path] || '').split(',');
  if (!tags.length) return;

  var settings = {
    responsive: this.options.responsive,
    device: this.options.device,
    campaign_tags: tags,
    iframe: {
      width: this.options.iframeWidth,
      height: this.options.iframeHeight,
      id: this.options.iframeId,
      frameborder: this.options.iframeBorder,
      container: this.options.insertIntoId
    }
  };

  var identify = new Identify({
    userId: user.id(),
    traits: user.traits()
  });

  // if we have an email, add any information about the user
  if (identify.email()) {
    settings.affiliate_member = {
      email: identify.email(),
      first_name: identify.firstName(),
      last_name: identify.lastName(),
      customer_id: identify.userId()
    };
  }

  push('register_affiliate', settings);
};

/**
 * Completed order.
 *
 * Fire the Curebit `register_purchase` with the order details and items.
 *
 * https://www.curebit.com/docs/ecommerce/custom
 *
 * @param {Track} track
 */

Curebit.prototype.completedOrder = function(track){
  var user = this.analytics.user();
  var orderId = track.orderId();
  var products = track.products();
  var props = track.properties();
  var items = [];
  var identify = new Identify({
    traits: user.traits(),
    userId: user.id()
  });

  each(products, function(product){
    var track = new Track({ properties: product });
    items.push({
      product_id: track.id() || track.sku(),
      quantity: track.quantity(),
      image_url: product.image,
      price: track.price(),
      title: track.name(),
      url: product.url,
    });
  });

  push('register_purchase', {
    order_date: iso(props.date || new Date()),
    order_number: orderId,
    coupon_code: track.coupon(),
    subtotal: track.total(),
    customer_id: identify.userId(),
    first_name: identify.firstName(),
    last_name: identify.lastName(),
    email: identify.email(),
    items: items
  });
};

}, {"analytics.js-integration":89,"global-queue":153,"facade":125,"throttle":155,"to-iso-string":156,"clone":157,"each":11,"bind":101}],
155: [function(require, module, exports) {

/**
 * Module exports.
 */

module.exports = throttle;

/**
 * Returns a new function that, when invoked, invokes `func` at most one time per
 * `wait` milliseconds.
 *
 * @param {Function} func The `Function` instance to wrap.
 * @param {Number} wait The minimum number of milliseconds that must elapse in between `func` invokations.
 * @return {Function} A new function that wraps the `func` function passed in.
 * @api public
 */

function throttle (func, wait) {
  var rtn; // return value
  var last = 0; // last invokation timestamp
  return function throttled () {
    var now = new Date().getTime();
    var delta = now - last;
    if (delta >= wait) {
      rtn = func.apply(this, arguments);
      last = now;
    }
    return rtn;
  };
}

}, {}],
156: [function(require, module, exports) {

/**
 * Expose `toIsoString`.
 */

module.exports = toIsoString;


/**
 * Turn a `date` into an ISO string.
 *
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString
 *
 * @param {Date} date
 * @return {String}
 */

function toIsoString (date) {
  return date.getUTCFullYear()
    + '-' + pad(date.getUTCMonth() + 1)
    + '-' + pad(date.getUTCDate())
    + 'T' + pad(date.getUTCHours())
    + ':' + pad(date.getUTCMinutes())
    + ':' + pad(date.getUTCSeconds())
    + '.' + String((date.getUTCMilliseconds()/1000).toFixed(3)).slice(2, 5)
    + 'Z';
}


/**
 * Pad a `number` with a ten's place zero.
 *
 * @param {Number} number
 * @return {String}
 */

function pad (number) {
  var n = number.toString();
  return n.length === 1 ? '0' + n : n;
}
}, {}],
157: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var type;

try {
  type = require('type');
} catch(e){
  type = require('type-component');
}

/**
 * Module exports.
 */

module.exports = clone;

/**
 * Clones objects.
 *
 * @param {Mixed} any object
 * @api public
 */

function clone(obj){
  switch (type(obj)) {
    case 'object':
      var copy = {};
      for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
          copy[key] = clone(obj[key]);
        }
      }
      return copy;

    case 'array':
      var copy = new Array(obj.length);
      for (var i = 0, l = obj.length; i < l; i++) {
        copy[i] = clone(obj[i]);
      }
      return copy;

    case 'regexp':
      // from millermedeiros/amd-utils - MIT
      var flags = '';
      flags += obj.multiline ? 'm' : '';
      flags += obj.global ? 'g' : '';
      flags += obj.ignoreCase ? 'i' : '';
      return new RegExp(obj.source, flags);

    case 'date':
      return new Date(obj.getTime());

    default: // string, number, boolean, …
      return obj;
  }
}

}, {"type":13}],
32: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var alias = require('alias');
var convertDates = require('convert-dates');
var Identify = require('facade').Identify;
var integration = require('analytics.js-integration');

/**
 * Expose `Customerio` integration.
 */

var Customerio = module.exports = integration('Customer.io')
  .assumesPageview()
  .global('_cio')
  .option('siteId', '')
  .tag('<script id="cio-tracker" src="https://assets.customer.io/assets/track.js" data-site-id="{{ siteId }}">');

/**
 * Initialize.
 *
 * http://customer.io/docs/api/javascript.html
 *
 * @param {Object} page
 */

Customerio.prototype.initialize = function(page){
  window._cio = window._cio || [];
  (function(){var a,b,c; a = function(f){return function(){window._cio.push([f].concat(Array.prototype.slice.call(arguments,0))); }; }; b = ['identify', 'track']; for (c = 0; c < b.length; c++) {window._cio[b[c]] = a(b[c]); } })();
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Customerio.prototype.loaded = function(){
  return (!! window._cio) && (window._cio.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * http://customer.io/docs/api/javascript.html#section-Identify_customers
 *
 * @param {Identify} identify
 */

Customerio.prototype.identify = function(identify){
  if (!identify.userId()) return this.debug('user id required');
  var traits = identify.traits({ created: 'created_at' });
  traits = convertDates(traits, convertDate);
  window._cio.identify(traits);
};

/**
 * Group.
 *
 * @param {Group} group
 */

Customerio.prototype.group = function(group){
  var traits = group.traits();
  var user = this.analytics.user();

  traits = alias(traits, function(trait){
    return 'Group ' + trait;
  });

  this.identify(new Identify({
    userId: user.id(),
    traits: traits
  }));
};

/**
 * Track.
 *
 * http://customer.io/docs/api/javascript.html#section-Track_a_custom_event
 *
 * @param {Track} track
 */

Customerio.prototype.track = function(track){
  var properties = track.properties();
  properties = convertDates(properties, convertDate);
  window._cio.track(track.event(), properties);
};

/**
 * Convert a date to the format Customer.io supports.
 *
 * @param {Date} date
 * @return {Number}
 */

function convertDate(date){
  return Math.floor(date.getTime() / 1000);
}

}, {"alias":158,"convert-dates":159,"facade":125,"analytics.js-integration":89}],
158: [function(require, module, exports) {

var type = require('type');

try {
  var clone = require('clone');
} catch (e) {
  var clone = require('clone-component');
}


/**
 * Expose `alias`.
 */

module.exports = alias;


/**
 * Alias an `object`.
 *
 * @param {Object} obj
 * @param {Mixed} method
 */

function alias (obj, method) {
  switch (type(method)) {
    case 'object': return aliasByDictionary(clone(obj), method);
    case 'function': return aliasByFunction(clone(obj), method);
  }
}


/**
 * Convert the keys in an `obj` using a dictionary of `aliases`.
 *
 * @param {Object} obj
 * @param {Object} aliases
 */

function aliasByDictionary (obj, aliases) {
  for (var key in aliases) {
    if (undefined === obj[key]) continue;
    obj[aliases[key]] = obj[key];
    delete obj[key];
  }
  return obj;
}


/**
 * Convert the keys in an `obj` using a `convert` function.
 *
 * @param {Object} obj
 * @param {Function} convert
 */

function aliasByFunction (obj, convert) {
  // have to create another object so that ie8 won't infinite loop on keys
  var output = {};
  for (var key in obj) output[convert(key)] = obj[key];
  return output;
}
}, {"type":13,"clone":144}],
159: [function(require, module, exports) {

var is = require('is');

try {
  var clone = require('clone');
} catch (e) {
  var clone = require('clone-component');
}


/**
 * Expose `convertDates`.
 */

module.exports = convertDates;


/**
 * Recursively convert an `obj`'s dates to new values.
 *
 * @param {Object} obj
 * @param {Function} convert
 * @return {Object}
 */

function convertDates (obj, convert) {
  obj = clone(obj);
  for (var key in obj) {
    var val = obj[key];
    if (is.date(val)) obj[key] = convert(val);
    if (is.object(val)) obj[key] = convertDates(val, convert);
  }
  return obj;
}
}, {"is":92,"clone":95}],
33: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var alias = require('alias');
var integration = require('analytics.js-integration');
var is = require('is');
var load = require('load-script');
var push = require('global-queue')('_dcq');

/**
 * Expose `Drip` integration.
 */

var Drip = module.exports = integration('Drip')
  .assumesPageview()
  .global('dc')
  .global('_dcq')
  .global('_dcs')
  .option('account', '')
  .tag('<script src="//tag.getdrip.com/{{ account }}.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Drip.prototype.initialize = function(page){
  window._dcq = window._dcq || [];
  window._dcs = window._dcs || {};
  window._dcs.account = this.options.account;
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Drip.prototype.loaded = function(){
  return is.object(window.dc);
};

/**
 * Track.
 *
 * @param {Track} track
 */

Drip.prototype.track = function(track){
  var props = track.properties();
  var cents = track.cents();
  if (cents) props.value = cents;
  delete props.revenue;
  push('track', track.event(), props);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Drip.prototype.identify = function (identify) {
  push('identify', identify.traits());
};

}, {"alias":158,"analytics.js-integration":89,"is":92,"load-script":121,"global-queue":153}],
34: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var extend = require('extend');
var integration = require('analytics.js-integration');
var onError = require('on-error');
var push = require('global-queue')('_errs');

/**
 * Expose `Errorception` integration.
 */

var Errorception = module.exports = integration('Errorception')
  .assumesPageview()
  .global('_errs')
  .option('projectId', '')
  .option('meta', true)
  .tag('<script src="//beacon.errorception.com/{{ projectId }}.js">');

/**
 * Initialize.
 *
 * https://github.com/amplitude/Errorception-Javascript
 *
 * @param {Object} page
 */

Errorception.prototype.initialize = function(page){
  window._errs = window._errs || [this.options.projectId];
  onError(push);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Errorception.prototype.loaded = function(){
  return !! (window._errs && window._errs.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * http://blog.errorception.com/2012/11/capture-custom-data-with-your-errors.html
 *
 * @param {Object} identify
 */

Errorception.prototype.identify = function(identify){
  if (!this.options.meta) return;
  var traits = identify.traits();
  window._errs = window._errs || [];
  window._errs.meta = window._errs.meta || {};
  extend(window._errs.meta, traits);
};

}, {"extend":123,"analytics.js-integration":89,"on-error":151,"global-queue":153}],
35: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var each = require('each');
var integration = require('analytics.js-integration');
var push = require('global-queue')('_aaq');

/**
 * Expose `Evergage` integration.integration.
 */

var Evergage = module.exports = integration('Evergage')
  .assumesPageview()
  .global('_aaq')
  .option('account', '')
  .option('dataset', '')
  .tag('<script src="//cdn.evergage.com/beacon/{{ account }}/{{ dataset }}/scripts/evergage.min.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Evergage.prototype.initialize = function(page){
  var account = this.options.account;
  var dataset = this.options.dataset;

  window._aaq = window._aaq || [];
  push('setEvergageAccount', account);
  push('setDataset', dataset);
  push('setUseSiteConfig', true);

  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Evergage.prototype.loaded = function(){
  return !! (window._aaq && window._aaq.push !== Array.prototype.push);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Evergage.prototype.page = function(page){
  var props = page.properties();
  var name = page.name();
  if (name) push('namePage', name);

  each(props, function(key, value){
    push('setCustomField', key, value, 'page');
  });

  window.Evergage.init(true);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Evergage.prototype.identify = function(identify){
  var id = identify.userId();
  if (!id) return;

  push('setUser', id);

  var traits = identify.traits({
    email: 'userEmail',
    name: 'userName'
  });

  each(traits, function(key, value){
    push('setUserField', key, value, 'page');
  });
};

/**
 * Group.
 *
 * @param {Group} group
 */

Evergage.prototype.group = function(group){
  var props = group.traits();
  var id = group.groupId();
  if (!id) return;

  push('setCompany', id);
  each(props, function(key, value){
    push('setAccountField', key, value, 'page');
  });
};

/**
 * Track.
 *
 * @param {Track} track
 */

Evergage.prototype.track = function(track){
  push('trackAction', track.event(), track.properties());
};

}, {"each":11,"analytics.js-integration":89,"global-queue":153}],
36: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_fbq');
var each = require('each');

/**
 * HOP
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Expose `Facebook`
 */

var Facebook = module.exports = integration('Facebook Conversion Tracking')
  .global('_fbq')
  .option('currency', 'USD')
  .tag('<script src="//connect.facebook.net/en_US/fbds.js">')
  .mapping('events');

/**
 * Initialize Facebook Conversion Tracking
 *
 * https://developers.facebook.com/docs/ads-for-websites/conversion-pixel-code-migration
 *
 * @param {Object} page
 */

Facebook.prototype.initialize = function(page){
  window._fbq = window._fbq || [];
  this.load(this.ready);
  window._fbq.loaded = true;
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Facebook.prototype.loaded = function(){
  return !! (window._fbq && window._fbq.loaded);
};

/**
 * Track.
 *
 * https://developers.facebook.com/docs/reference/ads-api/custom-audience-website-faq/#fbpixel
 *
 * @param {Track} track
 */

Facebook.prototype.track = function(track){
  var event = track.event();
  var events = this.events(event);
  var revenue = track.revenue() || 0;
  var self = this;

  each(events, function(event){
    push('track', event, {
      value: String(revenue.toFixed(2)),
      currency: self.options.currency
    });
  });

  if (!events.length) {
    var data = track.properties();
    push('track', event, data);
  }
};

}, {"analytics.js-integration":89,"global-queue":153,"each":11}],
37: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var push = require('global-queue')('_fxm');
var integration = require('analytics.js-integration');
var Track = require('facade').Track;
var each = require('each');

/**
 * Expose `FoxMetrics` integration.
 */

var FoxMetrics = module.exports = integration('FoxMetrics')
  .assumesPageview()
  .global('_fxm')
  .option('appId', '')
  .tag('<script src="//d35tca7vmefkrc.cloudfront.net/scripts/{{ appId }}.js">');

/**
 * Initialize.
 *
 * http://foxmetrics.com/documentation/apijavascript
 *
 * @param {Object} page
 */

FoxMetrics.prototype.initialize = function(page){
  window._fxm = window._fxm || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

FoxMetrics.prototype.loaded = function(){
  return !! (window._fxm && window._fxm.appId);
};

/**
 * Page.
 *
 * @param {Page} page
 */

FoxMetrics.prototype.page = function(page){
  var properties = page.proxy('properties');
  var category = page.category();
  var name = page.name();
  this._category = category; // store for later

  push(
    '_fxm.pages.view',
    properties.title,   // title
    name,               // name
    category,           // category
    properties.url,     // url
    properties.referrer // referrer
  );
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

FoxMetrics.prototype.identify = function(identify){
  var id = identify.userId();

  if (!id) return;

  push(
    '_fxm.visitor.profile',
    id,                    // user id
    identify.firstName(), // first name
    identify.lastName(),  // last name
    identify.email(),     // email
    identify.address(),   // address
    undefined,            // social
    undefined,            // partners
    identify.traits()     // attributes
  );
};

/**
 * Track.
 *
 * @param {Track} track
 */

FoxMetrics.prototype.track = function(track){
  var props = track.properties();
  var category = this._category || props.category;
  push(track.event(), category, props);
};

/**
 * Viewed product.
 *
 * @param {Track} track
 * @api private
 */

FoxMetrics.prototype.viewedProduct = function(track){
  ecommerce('productview', track);
};

/**
 * Removed product.
 *
 * @param {Track} track
 * @api private
 */

FoxMetrics.prototype.removedProduct = function(track){
  ecommerce('removecartitem', track);
};

/**
 * Added product.
 *
 * @param {Track} track
 * @api private
 */

FoxMetrics.prototype.addedProduct = function(track){
  ecommerce('cartitem', track);
};

/**
 * Completed Order.
 *
 * @param {Track} track
 * @api private
 */

FoxMetrics.prototype.completedOrder = function(track){
  var orderId = track.orderId();

  // transaction
  push(
    '_fxm.ecommerce.order',
    orderId,
    track.subtotal(),
    track.shipping(),
    track.tax(),
    track.city(),
    track.state(),
    track.zip(),
    track.quantity()
  );

  // items
  each(track.products(), function(product){
    var track = new Track({ properties: product });
    ecommerce('purchaseitem', track, [
      track.quantity(),
      track.price(),
      orderId
    ]);
  });
};

/**
 * Track ecommerce `event` with `track`
 * with optional `arr` to append.
 *
 * @param {String} event
 * @param {Track} track
 * @param {Array} arr
 * @api private
 */

function ecommerce(event, track, arr){
  push.apply(null, [
    '_fxm.ecommerce.' + event,
    track.id() || track.sku(),
    track.name(),
    track.category()
  ].concat(arr || []));
}

}, {"global-queue":153,"analytics.js-integration":89,"facade":125,"each":11}],
38: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var bind = require('bind');
var when = require('when');
var is = require('is');

/**
 * Expose `Frontleaf` integration.
 */

var Frontleaf = module.exports = integration('Frontleaf')
  .assumesPageview()
  .global('_fl')
  .global('_flBaseUrl')
  .option('baseUrl', 'https://api.frontleaf.com')
  .option('token', '')
  .option('stream', '')
  .option('trackNamedPages', false)
  .option('trackCategorizedPages', false)
  .tag('<script id="_fl" src="{{ baseUrl }}/lib/tracker.js">');

/**
 * Initialize.
 *
 * http://docs.frontleaf.com/#/technical-implementation/tracking-customers/tracking-beacon
 *
 * @param {Object} page
 */

Frontleaf.prototype.initialize = function(page){
  window._fl = window._fl || [];
  window._flBaseUrl = window._flBaseUrl || this.options.baseUrl;
  this._push('setApiToken', this.options.token);
  this._push('setStream', this.options.stream);
  var loaded = bind(this, this.loaded);
  var ready = this.ready;
  this.load({ baseUrl: window._flBaseUrl }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Frontleaf.prototype.loaded = function(){
  return is.array(window._fl) && window._fl.ready === true;
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Frontleaf.prototype.identify = function(identify){
  var userId = identify.userId();
  if (userId) {
    this._push('setUser', {
      id: userId,
      name: identify.name() || identify.username(),
      data: clean(identify.traits())
    });
  }
};

/**
 * Group.
 *
 * @param {Group} group
 */

Frontleaf.prototype.group = function(group){
  var groupId = group.groupId();
  if (groupId) {
    this._push('setAccount', {
      id: groupId,
      name: group.proxy('traits.name'),
      data: clean(group.traits())
    });
  }
};

/**
 * Page.
 *
 * @param {Page} page
 */

Frontleaf.prototype.page = function(page){
  var category = page.category();
  var name = page.fullName();
  var opts = this.options;

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }
};

/**
 * Track.
 *
 * @param {Track} track
 */

Frontleaf.prototype.track = function(track){
  var event = track.event();
  this._push('event', event, clean(track.properties()));
};

/**
 * Push a command onto the global Frontleaf queue.
 *
 * @param {String} command
 * @return {Object} args
 * @api private
 */

Frontleaf.prototype._push = function(command){
  var args = [].slice.call(arguments, 1);
  window._fl.push(function(t){ t[command].apply(command, args); });
};

/**
 * Clean all nested objects and arrays.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */

function clean(obj){
  var ret = {};

  // Remove traits/properties that are already represented
  // outside of the data container
  var excludeKeys = ["id","name","firstName","lastName"];
  var len = excludeKeys.length;
  for (var i = 0; i < len; i++) {
    clear(obj, excludeKeys[i]);
  }

  // Flatten nested hierarchy, preserving arrays
  obj = flatten(obj);

  // Discard nulls, represent arrays as comma-separated strings
  for (var key in obj) {
    var val = obj[key];
    if (null == val) {
      continue;
    }

    if (is.array(val)) {
      ret[key] = val.toString();
      continue;
    }

    ret[key] = val;
  }

  return ret;
}

/**
 * Remove a property from an object if set.
 *
 * @param {Object} obj
 * @param {String} key
 * @api private
 */

function clear(obj, key){
  if (obj.hasOwnProperty(key)) {
    delete obj[key];
  }
}

/**
 * Flatten a nested object into a single level space-delimited
 * hierarchy.
 *
 * Based on https://github.com/hughsk/flat
 *
 * @param {Object} source
 * @return {Object}
 * @api private
 */

function flatten(source){
  var output = {};

  function step(object, prev){
    for (var key in object) {
      var value = object[key];
      var newKey = prev ? prev + ' ' + key : key;

      if (!is.array(value) && is.object(value)) {
        return step(value, newKey);
      }

      output[newKey] = value;
    }
  }

  step(source);

  return output;
}

}, {"analytics.js-integration":89,"bind":101,"when":124,"is":92}],
39: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `FullStory` integration.
 *
 * https://www.fullstory.com/docs/developer
 */

var FullStory = module.exports = integration('FullStory')
  .option('org', '')
  .option('debug', false)
  .tag('<script src="https://www.fullstory.com/s/fs.js"></script>')

/**
 * Initialize.
 */

FullStory.prototype.initialize = function(){
  window['_fs_debug'] = this.options.debug;
  window['_fs_host'] = 'www.fullstory.com';
  window['_fs_org'] = this.options.org;
  (function(m,n,e,t,l,o,g,y){
    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){FS(l,v)};
    g.setSessionVars=function(v){FS('session',v)};g.setPageVars=function(v){FS('page',v)};
  })(window,document,'FS','script','user');
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

FullStory.prototype.loaded = function(){
  return !! window.FS;
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

FullStory.prototype.identify = function(identify){
  var id = identify.userId();
  var traits = identify.traits();
  traits.displayName = identify.name();
  traits.email = identify.email();
  if (!id) return; // id is required
  if (!traits) return window.FS.identify(id);
  window.FS.identify(id, traits);
};

}, {"analytics.js-integration":89}],
40: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_gauges');

/**
 * Expose `Gauges` integration.
 */

var Gauges = module.exports = integration('Gauges')
  .assumesPageview()
  .global('_gauges')
  .option('siteId', '')
  .tag('<script id="gauges-tracker" src="//secure.gaug.es/track.js" data-site-id="{{ siteId }}">');

/**
 * Initialize Gauges.
 *
 * http://get.gaug.es/documentation/tracking/
 *
 * @param {Object} page
 */

Gauges.prototype.initialize = function(page){
  window._gauges = window._gauges || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Gauges.prototype.loaded = function(){
  return !! (window._gauges && window._gauges.push !== Array.prototype.push);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Gauges.prototype.page = function(page){
  push('track');
};

}, {"analytics.js-integration":89,"global-queue":153}],
41: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var onBody = require('on-body');

/**
 * Expose `GetSatisfaction` integration.
 */

var GetSatisfaction = module.exports = integration('Get Satisfaction')
  .assumesPageview()
  .global('GSFN')
  .option('widgetId', '')
  .tag('<script src="https://loader.engage.gsfn.us/loader.js">');

/**
 * Initialize.
 *
 * https://console.getsatisfaction.com/start/101022?signup=true#engage
 *
 * @param {Object} page
 */

GetSatisfaction.prototype.initialize = function(page){
  var self = this;
  var widget = this.options.widgetId;
  var div = document.createElement('div');
  var id = div.id = 'getsat-widget-' + widget;
  onBody(function(body){ body.appendChild(div); });

  // usually the snippet is sync, so wait for it before initializing the tab
  this.load(function(){
    window.GSFN.loadWidget(widget, { containerId: id });
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

GetSatisfaction.prototype.loaded = function(){
  return !! window.GSFN;
};

}, {"analytics.js-integration":89,"on-body":122}],
42: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_gaq');
var length = require('object').length;
var canonical = require('canonical');
var useHttps = require('use-https');
var Track = require('facade').Track;
var callback = require('callback');
var load = require('load-script');
var keys = require('object').keys;
var select = require('select');
var dot = require('obj-case');
var each = require('each');
var type = require('type');
var url = require('url');
var is = require('is');
var group;
var user;

/**
 * Expose plugin.
 */

module.exports = exports = function(analytics){
  analytics.addIntegration(GA);
  group = analytics.group();
  user = analytics.user();
};

/**
 * Expose `GA` integration.
 *
 * http://support.google.com/analytics/bin/answer.py?hl=en&answer=2558867
 * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setSiteSpeedSampleRate
 */

var GA = exports.Integration = integration('Google Analytics')
  .readyOnLoad()
  .global('ga')
  .global('gaplugins')
  .global('_gaq')
  .global('GoogleAnalyticsObject')
  .option('anonymizeIp', false)
  .option('classic', false)
  .option('domain', 'auto')
  .option('doubleClick', false)
  .option('enhancedEcommerce', false)
  .option('enhancedLinkAttribution', false)
  .option('nonInteraction', false)
  .option('ignoredReferrers', null)
  .option('includeSearch', false)
  .option('siteSpeedSampleRate', 1)
  .option('trackingId', '')
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .option('sendUserId', false)
  .option('metrics', {})
  .option('dimensions', {})
  .tag('library', '<script src="//www.google-analytics.com/analytics.js">')
  .tag('double click', '<script src="//stats.g.doubleclick.net/dc.js">')
  .tag('http', '<script src="http://www.google-analytics.com/ga.js">')
  .tag('https', '<script src="https://ssl.google-analytics.com/ga.js">');

/**
 * On `construct` swap any config-based methods to the proper implementation.
 */

GA.on('construct', function(integration){
  if (integration.options.classic) {
    integration.initialize = integration.initializeClassic;
    integration.loaded = integration.loadedClassic;
    integration.page = integration.pageClassic;
    integration.track = integration.trackClassic;
    integration.completedOrder = integration.completedOrderClassic;

  } else if (integration.options.enhancedEcommerce) {
    integration.viewedProduct = integration.viewedProductEnhanced;
    integration.clickedProduct = integration.clickedProductEnhanced;
    integration.viewedProductDetails = integration.viewedProductDetailsEnhanced;
    integration.addedProduct = integration.addedProductEnhanced;
    integration.removedProduct = integration.removedProductEnhanced;
    integration.startedOrder = integration.startedOrderEnhanced;
    integration.viewedCheckoutStep = integration.viewedCheckoutStepEnhanced;
    integration.completedCheckoutStep = integration.completedCheckoutStepEnhanced;
    integration.updatedOrder = integration.updatedOrderEnhanced;
    integration.completedOrder = integration.completedOrderEnhanced;
    integration.refundedOrder = integration.refundedOrderEnhanced;
    integration.viewedPromotion = integration.viewedPromotionEnhanced;
    integration.clickedPromotion = integration.clickedPromotionEnhanced;
  }
});

/**
 * Initialize.
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced
 */

GA.prototype.initialize = function(){
  var opts = this.options;

  // setup the tracker globals
  window.GoogleAnalyticsObject = 'ga';
  window.ga = window.ga || function(){
    window.ga.q = window.ga.q || [];
    window.ga.q.push(arguments);
  };
  window.ga.l = new Date().getTime();

  if(window.location.hostname == 'localhost') opts.domain = 'none';

  window.ga('create', opts.trackingId, {
    cookieDomain: opts.domain || GA.prototype.defaults.domain, // to protect against empty string
    siteSpeedSampleRate: opts.siteSpeedSampleRate,
    allowLinker: true
  });

  // display advertising
  if (opts.doubleClick) {
    window.ga('require', 'displayfeatures');
  }

  // send global id
  if (opts.sendUserId && user.id()) {
    window.ga('set', 'userId', user.id());
  }

  // anonymize after initializing, otherwise a warning is shown
  // in google analytics debugger
  if (opts.anonymizeIp) window.ga('set', 'anonymizeIp', true);

  // custom dimensions & metrics
  var custom = metrics(user.traits(), opts);
  if (length(custom)) window.ga('set', custom);

  this.load('library', this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

GA.prototype.loaded = function(){
  return !! window.gaplugins;
};

/**
 * Page.
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/pages
 *
 * @param {Page} page
 */

GA.prototype.page = function(page){
  var category = page.category();
  var props = page.properties();
  var name = page.fullName();
  var pageview = {};
  var track;

  this._category = category; // store for later

  // send
  window.ga('send', 'pageview', {
    page: path(props, this.options),
    title: name || props.title,
    location: props.url
  });

  // categorized pages
  if (category && this.options.trackCategorizedPages) {
    track = page.track(category);
    this.track(track, { nonInteraction: 1 });
  }

  // named pages
  if (name && this.options.trackNamedPages) {
    track = page.track(name);
    this.track(track, { nonInteraction: 1 });
  }
};

/**
 * Track.
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/events
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference
 *
 * @param {Track} event
 */

GA.prototype.track = function(track, options){
  var opts = options || track.options(this.name);
  var props = track.properties();
  window.ga('send', 'event', {
    eventAction: track.event(),
    eventCategory: props.category || this._category || 'All',
    eventLabel: props.label,
    eventValue: formatValue(props.value || track.revenue()),
    nonInteraction: !!(props.nonInteraction || opts.nonInteraction)
  });
};

/**
 * Completed order.
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/ecommerce
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/ecommerce#multicurrency
 *
 * @param {Track} track
 * @api private
 */

GA.prototype.completedOrder = function(track){
  var total = track.total() || track.revenue() || 0;
  var orderId = track.orderId();
  var products = track.products();
  var props = track.properties();

  // orderId is required.
  if (!orderId) return;

  // require ecommerce
  if (!this.ecommerce) {
    window.ga('require', 'ecommerce');
    this.ecommerce = true;
  }

  // add transaction
  window.ga('ecommerce:addTransaction', {
    affiliation: props.affiliation,
    shipping: track.shipping(),
    revenue: total,
    tax: track.tax(),
    id: orderId,
    currency: track.currency()
  });

  // add products
  each(products, function(product){
    var track = new Track({ properties: product });
    window.ga('ecommerce:addItem', {
      category: track.category(),
      quantity: track.quantity(),
      price: track.price(),
      name: track.name(),
      sku: track.sku(),
      id: orderId,
      currency: track.currency()
    });
  });

  // send
  window.ga('ecommerce:send');
};

/**
 * Initialize (classic).
 *
 * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration
 */

GA.prototype.initializeClassic = function(){
  var opts = this.options;
  var anonymize = opts.anonymizeIp;
  var db = opts.doubleClick;
  var domain = opts.domain;
  var enhanced = opts.enhancedLinkAttribution;
  var ignore = opts.ignoredReferrers;
  var sample = opts.siteSpeedSampleRate;

  window._gaq = window._gaq || [];
  push('_setAccount', opts.trackingId);
  push('_setAllowLinker', true);

  if (anonymize) push('_gat._anonymizeIp');
  if (domain) push('_setDomainName', domain);
  if (sample) push('_setSiteSpeedSampleRate', sample);

  if (enhanced) {
    var protocol = 'https:' === document.location.protocol ? 'https:' : 'http:';
    var pluginUrl = protocol + '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    push('_require', 'inpage_linkid', pluginUrl);
  }

  if (ignore) {
    if (!is.array(ignore)) ignore = [ignore];
    each(ignore, function (domain) {
      push('_addIgnoredRef', domain);
    });
  }

  if (this.options.doubleClick) {
    this.load('double click', this.ready);
  } else {
    var name = useHttps() ? 'https' : 'http';
    this.load(name, this.ready);
  }
};

/**
 * Loaded? (classic)
 *
 * @return {Boolean}
 */

GA.prototype.loadedClassic = function(){
  return !! (window._gaq && window._gaq.push !== Array.prototype.push);
};

/**
 * Page (classic).
 *
 * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration
 *
 * @param {Page} page
 */

GA.prototype.pageClassic = function(page){
  var opts = page.options(this.name);
  var category = page.category();
  var props = page.properties();
  var name = page.fullName();
  var track;

  push('_trackPageview', path(props, this.options));

  // categorized pages
  if (category && this.options.trackCategorizedPages) {
    track = page.track(category);
    this.track(track, { nonInteraction: 1 });
  }

  // named pages
  if (name && this.options.trackNamedPages) {
    track = page.track(name);
    this.track(track, { nonInteraction: 1 });
  }
};

/**
 * Track (classic).
 *
 * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiEventTracking
 *
 * @param {Track} track
 */

GA.prototype.trackClassic = function(track, options){
  var opts = options || track.options(this.name);
  var props = track.properties();
  var revenue = track.revenue();
  var event = track.event();
  var category = this._category || props.category || 'All';
  var label = props.label;
  var value = formatValue(revenue || props.value);
  var nonInteraction = !!(props.nonInteraction || opts.nonInteraction);
  push('_trackEvent', category, event, label, value, nonInteraction);
};

/**
 * Completed order.
 *
 * https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingEcommerce
 * https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingEcommerce#localcurrencies
 *
 * @param {Track} track
 * @api private
 */

GA.prototype.completedOrderClassic = function(track){
  var total = track.total() || track.revenue() || 0;
  var orderId = track.orderId();
  var products = track.products() || [];
  var props = track.properties();
  var currency = track.currency();

  // required
  if (!orderId) return;

  // add transaction
  push('_addTrans'
    , orderId
    , props.affiliation
    , total
    , track.tax()
    , track.shipping()
    , track.city()
    , track.state()
    , track.country());

  // add items
  each(products, function(product){
    var track = new Track({ properties: product });
    push('_addItem'
      , orderId
      , track.sku()
      , track.name()
      , track.category()
      , track.price()
      , track.quantity());
  });

  // send
  push('_set', 'currencyCode', currency);
  push('_trackTrans');
};

/**
 * Return the path based on `properties` and `options`.
 *
 * @param {Object} properties
 * @param {Object} options
 */

function path(properties, options) {
  if (!properties) return;
  var str = properties.path;
  if (options.includeSearch && properties.search) str += properties.search;
  return str;
}

/**
 * Format the value property to Google's liking.
 *
 * @param {Number} value
 * @return {Number}
 */

function formatValue(value) {
  if (!value || value < 0) return 0;
  return Math.round(value);
}

/**
 * Map google's custom dimensions & metrics with `obj`.
 *
 * Example:
 *
 *      metrics({ revenue: 1.9 }, { { metrics : { revenue: 'metric8' } });
 *      // => { metric8: 1.9 }
 *
 *      metrics({ revenue: 1.9 }, {});
 *      // => {}
 *
 * @param {Object} obj
 * @param {Object} data
 * @return {Object|null}
 * @api private
 */

function metrics(obj, data){
  var dimensions = data.dimensions;
  var metrics = data.metrics;
  var names = keys(metrics).concat(keys(dimensions));
  var ret = {};

  for (var i = 0; i < names.length; ++i) {
    var name = names[i];
    var key = metrics[name] || dimensions[name];
    var value = dot(obj, name) || obj[name];
    if (null == value) continue;
    ret[key] = value;
  }

  return ret;
}

/**
 * Loads ec.js (unless already loaded)
 */

GA.prototype.loadEnhancedEcommerce = function(track){
  if (!this.enhancedEcommerceLoaded) {
    window.ga('require', 'ec');
    this.enhancedEcommerceLoaded = true;
  }

  // Ensure we set currency for every hit
  window.ga('set', '&cu', track.currency());
};

/**
 * Pushes an event and all previously set EE data to GA.
 */

GA.prototype.pushEnhancedEcommerce = function(track){
  // Send a custom non-interaction event to ensure all EE data is pushed.
  // Without doing this we'd need to require page display after setting EE data.
  ga('send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1});
};

/**
 * Started order - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-steps
 *
 * @param {Track} track
 */

GA.prototype.startedOrderEnhanced = function(track) {
  // same as viewed checkout step #1
  this.viewedCheckoutStep(track);
};

/**
 * Updated order - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-steps
 *
 * @param {Track} track
 */

GA.prototype.updatedOrderEnhanced = function(track){
  // Same event as started order - will override
  this.startedOrderEnhanced(track);
};

/**
 * Viewed checkout step - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-steps
 *
 * @param {Track} track
 */

GA.prototype.viewedCheckoutStepEnhanced = function(track){
  var products = track.products();
  var props = track.properties();
  var options = extractCheckoutOptions(props);

  this.loadEnhancedEcommerce(track);

  each(products, function(product){
    var track = new Track({ properties: product });
    enhancedEcommerceTrackProduct(track);
  });

  window.ga('ec:setAction','checkout', {
    'step': props.step || 1,
    'option': options || undefined,
  });

  this.pushEnhancedEcommerce();
};

/**
 * Completed checkout step - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-options
 *
 * @param {Track} track
 */

GA.prototype.completedCheckoutStepEnhanced = function(track){
  var props = track.properties();
  var options = extractCheckoutOptions(props);

  // Only send an event if we have step and options to update
  if (!props.step || !options) return;

  this.loadEnhancedEcommerce(track);

  window.ga('ec:setAction', 'checkout_option', {
    step: props.step || 1,
    option: options,
  });

  window.ga('send', 'event', 'Checkout', 'Option');
};

/**
 * Completed order - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-transactions
 *
 * @param {Track} track
 */

GA.prototype.completedOrderEnhanced = function(track){
  var total = track.total() || track.revenue() || 0;
  var orderId = track.orderId();
  var products = track.products();
  var props = track.properties();

  // orderId is required.
  if (!orderId) return;

  this.loadEnhancedEcommerce(track);

  each(products, function(product){
    var track = new Track({ properties: product });
    enhancedEcommerceTrackProduct(track);
  });

  window.ga('ec:setAction', 'purchase', {
    id: orderId,
    affiliation: props.affiliation,
    revenue: total,
    tax: track.tax(),
    shipping: track.shipping(),
    coupon: track.coupon(),
  });

  this.pushEnhancedEcommerce(track);
};

/**
 * Refunded order - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-refunds
 *
 * @param {Track} track
 */

GA.prototype.refundedOrderEnhanced = function(track) {
  var orderId = track.orderId();
  var products = track.products();

  // orderId is required.
  if (!orderId) return;

  this.loadEnhancedEcommerce(track);

  // Without any products it's a full refund
  each(products, function(product){
    var track = new Track({ properties: product });
    window.ga('ec:addProduct', {
      id: track.id() || track.sku(),
      quantity: track.quantity(),
    });
  });

  window.ga('ec:setAction', 'refund', {
    id: orderId,
  });

  this.pushEnhancedEcommerce(track);
};

/**
 * Added product - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#add-remove-cart
 *
 * @param {Track} track
 */

GA.prototype.addedProductEnhanced = function(track) {
  this.loadEnhancedEcommerce(track);
  enhancedEcommerceProductAction(track, 'add');
  this.pushEnhancedEcommerce(track);
};

/**
 * Removed product - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#add-remove-cart
 *
 * @param {Track} track
 */

GA.prototype.removedProductEnhanced = function(track) {
  this.loadEnhancedEcommerce(track);
  enhancedEcommerceProductAction(track, 'remove');
  this.pushEnhancedEcommerce(track);
};

/**
 * Viewed product details - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#product-detail-view
 *
 * @param {Track} track
 */

GA.prototype.viewedProductDetailsEnhanced = function(track) {
  this.loadEnhancedEcommerce(track);
  enhancedEcommerceProductAction(track, 'detail');
  this.pushEnhancedEcommerce(track);
};

/**
 * Viewed product - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-impressions
 *
 * @param {Track} track
 */

GA.prototype.viewedProductEnhanced = function(track) {
  var props = track.properties();

  this.loadEnhancedEcommerce(track);
  ga('ec:addImpression', {
    id: track.id() || track.sku(),
    name: track.name(),
    category: track.category(),
    brand: props.brand,
    variant: props.variant,
    list: props.list,
    position: props.position,
  });
  this.pushEnhancedEcommerce(track);
};

/**
 * Clicked product - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-actions
 *
 * @param {Track} track
 */

GA.prototype.clickedProductEnhanced = function(track) {
  var props = track.properties();

  this.loadEnhancedEcommerce(track);
  enhancedEcommerceProductAction(track, 'click', {
    list: props.list
  });
  this.pushEnhancedEcommerce(track);
};

/**
 * Viewed promotion - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-promo-impressions
 *
 * @param {Track} track
 */

GA.prototype.viewedPromotionEnhanced = function(track) {
  var props = track.properties();

  this.loadEnhancedEcommerce(track);
  window.ga('ec:addPromo', {
    id: track.id(),
    name: track.name(),
    creative: props.creative,
    position: props.position,
  });
  this.pushEnhancedEcommerce(track);
};

/**
 * Clicked promotion - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-promo-clicks
 *
 * @param {Track} track
 */

GA.prototype.clickedPromotionEnhanced = function(track) {
  var props = track.properties();

  this.loadEnhancedEcommerce(track);
  window.ga('ec:addPromo', {
    id: track.id(),
    name: track.name(),
    creative: props.creative,
    position: props.position,
  });
  ga('ec:setAction', 'promo_click', {});
  this.pushEnhancedEcommerce(track);
};

/**
 * Enhanced ecommerce track product.
 *
 * Simple helper so that we don't repeat `ec:addProduct` everywhere.
 *
 * @param {Track} track
 */

function enhancedEcommerceTrackProduct(track) {
  var props = track.properties();

  window.ga('ec:addProduct', {
    id: track.id() || track.sku(),
    name: track.name(),
    category: track.category(),
    quantity: track.quantity(),
    price: track.price(),
    brand: props.brand,
    variant: props.variant,
  });
}

/**
 * Set `action` on `track` with `data`.
 *
 * @param {Track} track
 * @param {String} action
 * @param {Object} data
 */

function enhancedEcommerceProductAction(track, action, data) {
  enhancedEcommerceTrackProduct(track);
  window.ga('ec:setAction', action, data || {});
}

/**
 * Extracts checkout options.
 *
 * @param {Object} props
 * @return {Null|String}
 */

function extractCheckoutOptions(props) {
  var options = [
    props.paymentMethod,
    props.shippingMethod
  ];

  // Remove all nulls, empty strings, zeroes, and join with commas.
  var valid = select(options, function(e){return e; });
  return valid.length > 0 ? valid.join(', ') : null;
}

}, {"analytics.js-integration":89,"global-queue":153,"object":5,"canonical":160,"use-https":91,"facade":125,"callback":94,"load-script":121,"select":161,"obj-case":162,"each":11,"type":13,"url":163,"is":92}],
5: [function(require, module, exports) {

/**
 * HOP ref.
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Return own keys in `obj`.
 *
 * @param {Object} obj
 * @return {Array}
 * @api public
 */

exports.keys = Object.keys || function(obj){
  var keys = [];
  for (var key in obj) {
    if (has.call(obj, key)) {
      keys.push(key);
    }
  }
  return keys;
};

/**
 * Return own values in `obj`.
 *
 * @param {Object} obj
 * @return {Array}
 * @api public
 */

exports.values = function(obj){
  var vals = [];
  for (var key in obj) {
    if (has.call(obj, key)) {
      vals.push(obj[key]);
    }
  }
  return vals;
};

/**
 * Merge `b` into `a`.
 *
 * @param {Object} a
 * @param {Object} b
 * @return {Object} a
 * @api public
 */

exports.merge = function(a, b){
  for (var key in b) {
    if (has.call(b, key)) {
      a[key] = b[key];
    }
  }
  return a;
};

/**
 * Return length of `obj`.
 *
 * @param {Object} obj
 * @return {Number}
 * @api public
 */

exports.length = function(obj){
  return exports.keys(obj).length;
};

/**
 * Check if `obj` is empty.
 *
 * @param {Object} obj
 * @return {Boolean}
 * @api public
 */

exports.isEmpty = function(obj){
  return 0 == exports.length(obj);
};
}, {}],
160: [function(require, module, exports) {
module.exports = function canonical () {
  var tags = document.getElementsByTagName('link');
  for (var i = 0, tag; tag = tags[i]; i++) {
    if ('canonical' == tag.getAttribute('rel')) return tag.getAttribute('href');
  }
};
}, {}],
161: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var toFunction = require('to-function');

/**
 * Filter the given `arr` with callback `fn(val, i)`,
 * when a truthy value is return then `val` is included
 * in the array returned.
 *
 * @param {Array} arr
 * @param {Function} fn
 * @return {Array}
 * @api public
 */

module.exports = function(arr, fn){
  var ret = [];
  fn = toFunction(fn);
  for (var i = 0; i < arr.length; ++i) {
    if (fn(arr[i], i)) {
      ret.push(arr[i]);
    }
  }
  return ret;
};

}, {"to-function":115}],
162: [function(require, module, exports) {

var Case = require('case');
var identity = function(_){ return _; };


/**
 * Cases
 */

var cases = [
  identity,
  Case.upper,
  Case.lower,
  Case.snake,
  Case.pascal,
  Case.camel,
  Case.constant,
  Case.title,
  Case.capital,
  Case.sentence
];


/**
 * Module exports, export
 */

module.exports = module.exports.find = multiple(find);


/**
 * Export the replacement function, return the modified object
 */

module.exports.replace = function (obj, key, val) {
  multiple(replace).apply(this, arguments);
  return obj;
};


/**
 * Export the delete function, return the modified object
 */

module.exports.del = function (obj, key) {
  multiple(del).apply(this, arguments);
  return obj;
};


/**
 * Compose applying the function to a nested key
 */

function multiple (fn) {
  return function (obj, key, val) {
    var keys = key.split('.');
    if (keys.length === 0) return;

    while (keys.length > 1) {
      key = keys.shift();
      obj = find(obj, key);

      if (obj === null || obj === undefined) return;
    }

    key = keys.shift();
    return fn(obj, key, val);
  };
}


/**
 * Find an object by its key
 *
 * find({ first_name : 'Calvin' }, 'firstName')
 */

function find (obj, key) {
  for (var i = 0; i < cases.length; i++) {
    var cased = cases[i](key);
    if (obj.hasOwnProperty(cased)) return obj[cased];
  }
}


/**
 * Delete a value for a given key
 *
 * del({ a : 'b', x : 'y' }, 'X' }) -> { a : 'b' }
 */

function del (obj, key) {
  for (var i = 0; i < cases.length; i++) {
    var cased = cases[i](key);
    if (obj.hasOwnProperty(cased)) delete obj[cased];
  }
  return obj;
}


/**
 * Replace an objects existing value with a new one
 *
 * replace({ a : 'b' }, 'a', 'c') -> { a : 'c' }
 */

function replace (obj, key, val) {
  for (var i = 0; i < cases.length; i++) {
    var cased = cases[i](key);
    if (obj.hasOwnProperty(cased)) obj[cased] = val;
  }
  return obj;
}

}, {"case":164}],
164: [function(require, module, exports) {

var cases = require('./cases');


/**
 * Expose `determineCase`.
 */

module.exports = exports = determineCase;


/**
 * Determine the case of a `string`.
 *
 * @param {String} string
 * @return {String|Null}
 */

function determineCase (string) {
  for (var key in cases) {
    if (key == 'none') continue;
    var convert = cases[key];
    if (convert(string) == string) return key;
  }
  return null;
}


/**
 * Define a case by `name` with a `convert` function.
 *
 * @param {String} name
 * @param {Object} convert
 */

exports.add = function (name, convert) {
  exports[name] = cases[name] = convert;
};


/**
 * Add all the `cases`.
 */

for (var key in cases) {
  exports.add(key, cases[key]);
}
}, {"./cases":165}],
165: [function(require, module, exports) {

var camel = require('to-camel-case')
  , capital = require('to-capital-case')
  , constant = require('to-constant-case')
  , dot = require('to-dot-case')
  , none = require('to-no-case')
  , pascal = require('to-pascal-case')
  , sentence = require('to-sentence-case')
  , slug = require('to-slug-case')
  , snake = require('to-snake-case')
  , space = require('to-space-case')
  , title = require('to-title-case');


/**
 * Camel.
 */

exports.camel = camel;


/**
 * Pascal.
 */

exports.pascal = pascal;


/**
 * Dot. Should precede lowercase.
 */

exports.dot = dot;


/**
 * Slug. Should precede lowercase.
 */

exports.slug = slug;


/**
 * Snake. Should precede lowercase.
 */

exports.snake = snake;


/**
 * Space. Should precede lowercase.
 */

exports.space = space;


/**
 * Constant. Should precede uppercase.
 */

exports.constant = constant;


/**
 * Capital. Should precede sentence and title.
 */

exports.capital = capital;


/**
 * Title.
 */

exports.title = title;


/**
 * Sentence.
 */

exports.sentence = sentence;


/**
 * Convert a `string` to lower case from camel, slug, etc. Different that the
 * usual `toLowerCase` in that it will try to break apart the input first.
 *
 * @param {String} string
 * @return {String}
 */

exports.lower = function (string) {
  return none(string).toLowerCase();
};


/**
 * Convert a `string` to upper case from camel, slug, etc. Different that the
 * usual `toUpperCase` in that it will try to break apart the input first.
 *
 * @param {String} string
 * @return {String}
 */

exports.upper = function (string) {
  return none(string).toUpperCase();
};


/**
 * Invert each character in a `string` from upper to lower and vice versa.
 *
 * @param {String} string
 * @return {String}
 */

exports.inverse = function (string) {
  for (var i = 0, char; char = string[i]; i++) {
    if (!/[a-z]/i.test(char)) continue;
    var upper = char.toUpperCase();
    var lower = char.toLowerCase();
    string[i] = char == upper ? lower : upper;
  }
  return string;
};


/**
 * None.
 */

exports.none = none;
}, {"to-camel-case":166,"to-capital-case":167,"to-constant-case":168,"to-dot-case":169,"to-no-case":119,"to-pascal-case":170,"to-sentence-case":171,"to-slug-case":172,"to-snake-case":173,"to-space-case":174,"to-title-case":175}],
166: [function(require, module, exports) {

var toSpace = require('to-space-case');


/**
 * Expose `toCamelCase`.
 */

module.exports = toCamelCase;


/**
 * Convert a `string` to camel case.
 *
 * @param {String} string
 * @return {String}
 */


function toCamelCase (string) {
  return toSpace(string).replace(/\s(\w)/g, function (matches, letter) {
    return letter.toUpperCase();
  });
}
}, {"to-space-case":174}],
174: [function(require, module, exports) {

var clean = require('to-no-case');


/**
 * Expose `toSpaceCase`.
 */

module.exports = toSpaceCase;


/**
 * Convert a `string` to space case.
 *
 * @param {String} string
 * @return {String}
 */


function toSpaceCase (string) {
  return clean(string).replace(/[\W_]+(.|$)/g, function (matches, match) {
    return match ? ' ' + match : '';
  });
}
}, {"to-no-case":119}],
167: [function(require, module, exports) {

var clean = require('to-no-case');


/**
 * Expose `toCapitalCase`.
 */

module.exports = toCapitalCase;


/**
 * Convert a `string` to capital case.
 *
 * @param {String} string
 * @return {String}
 */


function toCapitalCase (string) {
  return clean(string).replace(/(^|\s)(\w)/g, function (matches, previous, letter) {
    return previous + letter.toUpperCase();
  });
}
}, {"to-no-case":119}],
168: [function(require, module, exports) {

var snake = require('to-snake-case');


/**
 * Expose `toConstantCase`.
 */

module.exports = toConstantCase;


/**
 * Convert a `string` to constant case.
 *
 * @param {String} string
 * @return {String}
 */


function toConstantCase (string) {
  return snake(string).toUpperCase();
}
}, {"to-snake-case":173}],
173: [function(require, module, exports) {
var toSpace = require('to-space-case');


/**
 * Expose `toSnakeCase`.
 */

module.exports = toSnakeCase;


/**
 * Convert a `string` to snake case.
 *
 * @param {String} string
 * @return {String}
 */


function toSnakeCase (string) {
  return toSpace(string).replace(/\s/g, '_');
}

}, {"to-space-case":174}],
169: [function(require, module, exports) {

var toSpace = require('to-space-case');


/**
 * Expose `toDotCase`.
 */

module.exports = toDotCase;


/**
 * Convert a `string` to slug case.
 *
 * @param {String} string
 * @return {String}
 */


function toDotCase (string) {
  return toSpace(string).replace(/\s/g, '.');
}
}, {"to-space-case":174}],
170: [function(require, module, exports) {

var toSpace = require('to-space-case');


/**
 * Expose `toPascalCase`.
 */

module.exports = toPascalCase;


/**
 * Convert a `string` to pascal case.
 *
 * @param {String} string
 * @return {String}
 */


function toPascalCase (string) {
  return toSpace(string).replace(/(?:^|\s)(\w)/g, function (matches, letter) {
    return letter.toUpperCase();
  });
}
}, {"to-space-case":174}],
171: [function(require, module, exports) {

var clean = require('to-no-case');


/**
 * Expose `toSentenceCase`.
 */

module.exports = toSentenceCase;


/**
 * Convert a `string` to camel case.
 *
 * @param {String} string
 * @return {String}
 */


function toSentenceCase (string) {
  return clean(string).replace(/[a-z]/i, function (letter) {
    return letter.toUpperCase();
  });
}
}, {"to-no-case":119}],
172: [function(require, module, exports) {

var toSpace = require('to-space-case');


/**
 * Expose `toSlugCase`.
 */

module.exports = toSlugCase;


/**
 * Convert a `string` to slug case.
 *
 * @param {String} string
 * @return {String}
 */


function toSlugCase (string) {
  return toSpace(string).replace(/\s/g, '-');
}
}, {"to-space-case":174}],
175: [function(require, module, exports) {

var capital = require('to-capital-case')
  , escape = require('escape-regexp')
  , map = require('map')
  , minors = require('title-case-minors');


/**
 * Expose `toTitleCase`.
 */

module.exports = toTitleCase;


/**
 * Minors.
 */

var escaped = map(minors, escape);
var minorMatcher = new RegExp('[^^]\\b(' + escaped.join('|') + ')\\b', 'ig');
var colonMatcher = /:\s*(\w)/g;


/**
 * Convert a `string` to camel case.
 *
 * @param {String} string
 * @return {String}
 */


function toTitleCase (string) {
  return capital(string)
    .replace(minorMatcher, function (minor) {
      return minor.toLowerCase();
    })
    .replace(colonMatcher, function (letter) {
      return letter.toUpperCase();
    });
}
}, {"to-capital-case":167,"escape-regexp":176,"map":177,"title-case-minors":178}],
176: [function(require, module, exports) {

/**
 * Escape regexp special characters in `str`.
 *
 * @param {String} str
 * @return {String}
 * @api public
 */

module.exports = function(str){
  return String(str).replace(/([.*+?=^!:${}()|[\]\/\\])/g, '\\$1');
};
}, {}],
177: [function(require, module, exports) {

var each = require('each');


/**
 * Map an array or object.
 *
 * @param {Array|Object} obj
 * @param {Function} iterator
 * @return {Mixed}
 */

module.exports = function map (obj, iterator) {
  var arr = [];
  each(obj, function (o) {
    arr.push(iterator.apply(null, arguments));
  });
  return arr;
};
}, {"each":111}],
178: [function(require, module, exports) {

module.exports = [
  'a',
  'an',
  'and',
  'as',
  'at',
  'but',
  'by',
  'en',
  'for',
  'from',
  'how',
  'if',
  'in',
  'neither',
  'nor',
  'of',
  'on',
  'only',
  'onto',
  'out',
  'or',
  'per',
  'so',
  'than',
  'that',
  'the',
  'to',
  'until',
  'up',
  'upon',
  'v',
  'v.',
  'versus',
  'vs',
  'vs.',
  'via',
  'when',
  'with',
  'without',
  'yet'
];
}, {}],
163: [function(require, module, exports) {

/**
 * Parse the given `url`.
 *
 * @param {String} str
 * @return {Object}
 * @api public
 */

exports.parse = function(url){
  var a = document.createElement('a');
  a.href = url;
  return {
    href: a.href,
    host: a.host,
    port: a.port,
    hash: a.hash,
    hostname: a.hostname,
    pathname: a.pathname,
    protocol: a.protocol,
    search: a.search,
    query: a.search.slice(1)
  }
};

/**
 * Check if `url` is absolute.
 *
 * @param {String} url
 * @return {Boolean}
 * @api public
 */

exports.isAbsolute = function(url){
  if (0 == url.indexOf('//')) return true;
  if (~url.indexOf('://')) return true;
  return false;
};

/**
 * Check if `url` is relative.
 *
 * @param {String} url
 * @return {Boolean}
 * @api public
 */

exports.isRelative = function(url){
  return ! exports.isAbsolute(url);
};

/**
 * Check if `url` is cross domain.
 *
 * @param {String} url
 * @return {Boolean}
 * @api public
 */

exports.isCrossDomain = function(url){
  url = exports.parse(url);
  return url.hostname != location.hostname
    || url.port != location.port
    || url.protocol != location.protocol;
};
}, {}],
43: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var push = require('global-queue')('dataLayer', { wrap: false });
var integration = require('analytics.js-integration');

/**
 * Expose `GTM`.
 */

var GTM = module.exports = integration('Google Tag Manager')
  .assumesPageview()
  .global('dataLayer')
  .global('google_tag_manager')
  .option('containerId', '')
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .tag('<script src="//www.googletagmanager.com/gtm.js?id={{ containerId }}&l=dataLayer">');

/**
 * Initialize.
 *
 * https://developers.google.com/tag-manager
 *
 * @param {Object} page
 */

GTM.prototype.initialize = function(){
  push({ 'gtm.start': +new Date, event: 'gtm.js' });
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

GTM.prototype.loaded = function(){
  return !! (window.dataLayer && [].push != window.dataLayer.push);
};

/**
 * Page.
 *
 * @param {Page} page
 * @api public
 */

GTM.prototype.page = function(page){
  var category = page.category();
  var props = page.properties();
  var name = page.fullName();
  var opts = this.options;
  var track;

  // all
  if (opts.trackAllPages) {
    this.track(page.track());
  }

  // categorized
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }

  // named
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }
};

/**
 * Track.
 *
 * https://developers.google.com/tag-manager/devguide#events
 *
 * @param {Track} track
 * @api public
 */

GTM.prototype.track = function(track){
  var props = track.properties();
  props.event = track.event();
  push(props);
};

}, {"global-queue":153,"analytics.js-integration":89}],
44: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var Identify = require('facade').Identify;
var Track = require('facade').Track;
var callback = require('callback');
var load = require('load-script');
var onBody = require('on-body');
var each = require('each');

/**
 * Expose `GoSquared` integration.
 */

var GoSquared = module.exports = integration('GoSquared')
  .assumesPageview()
  .global('_gs')
  .option('siteToken', '')
  .option('anonymizeIP', false)
  .option('cookieDomain', null)
  .option('useCookies', true)
  .option('trackHash', false)
  .option('trackLocal', false)
  .option('trackParams', true)
  .tag('<script src="//d1l6p2sc9645hc.cloudfront.net/tracker.js">');

/**
 * Initialize.
 *
 * https://www.gosquared.com/developer/tracker
 * Options: https://www.gosquared.com/developer/tracker/configuration
 *
 * @param {Object} page
 */

GoSquared.prototype.initialize = function(page){
  var self = this;
  var options = this.options;
  var user = this.analytics.user();
  push(options.siteToken);

  each(options, function(name, value){
    if ('siteToken' == name) return;
    if (null == value) return;
    push('set', name, value);
  });

  self.identify(new Identify({
    traits: user.traits(),
    userId: user.id()
  }));

  self.load(this.ready);
};

/**
 * Loaded? (checks if the tracker version is set)
 *
 * @return {Boolean}
 */

GoSquared.prototype.loaded = function(){
  return !! (window._gs && window._gs.v);
};

/**
 * Page.
 *
 * https://www.gosquared.com/developer/tracker/pageviews
 *
 * @param {Page} page
 */

GoSquared.prototype.page = function(page){
  var props = page.properties();
  var name = page.fullName();
  push('track', props.path, name || props.title)
};

/**
 * Identify.
 *
 * https://www.gosquared.com/developer/tracker/tagging
 *
 * @param {Identify} identify
 */

GoSquared.prototype.identify = function(identify){
  var traits = identify.traits({ userId: 'userID' });
  var username = identify.username();
  var email = identify.email();
  var id = identify.userId();
  if (id) push('set', 'visitorID', id);
  var name =  email || username || id;
  if (name) push('set', 'visitorName', name);
  push('set', 'visitor', traits);
};

/**
 * Track.
 *
 * https://www.gosquared.com/developer/tracker/events
 *
 * @param {Track} track
 */

GoSquared.prototype.track = function(track){
  push('event', track.event(), track.properties());
};

/**
 * Checked out.
 *
 * @param {Track} track
 * @api private
 */

GoSquared.prototype.completedOrder = function(track){
  var products = track.products();
  var items = [];

  each(products, function(product){
    var track = new Track({ properties: product });
    items.push({
      category: track.category(),
      quantity: track.quantity(),
      price: track.price(),
      name: track.name(),
    });
  })

  push('transaction', track.orderId(), {
    revenue: track.total(),
    track: true
  }, items);
};

/**
 * Push to `_gs.q`.
 *
 * @param {...} args
 * @api private
 */

function push(){
  var _gs = window._gs = window._gs || function(){
    (_gs.q = _gs.q || []).push(arguments);
  };
  _gs.apply(null, arguments);
}

}, {"analytics.js-integration":89,"facade":125,"callback":94,"load-script":121,"on-body":122,"each":11}],
45: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var alias = require('alias');

/**
 * Expose `Heap` integration.
 */

var Heap = module.exports = integration('Heap')
  .assumesPageview()
  .global('heap')
  .global('_heapid')
  .option('appId', '')
  .tag('<script src="//d36lvucg9kzous.cloudfront.net">');

/**
 * Initialize.
 *
 * https://heapanalytics.com/docs#installWeb
 *
 * @param {Object} page
 */

Heap.prototype.initialize = function(page){
  window.heap=window.heap||[];window.heap.load=function(a){window._heapid=a;var d=function(a){return function(){window.heap.push([a].concat(Array.prototype.slice.call(arguments,0)));};},e=["identify","track"];for (var f=0;f<e.length;f++)window.heap[e[f]]=d(e[f]);};
  window.heap.load(this.options.appId);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Heap.prototype.loaded = function(){
  return (window.heap && window.heap.appid);
};

/**
 * Identify.
 *
 * https://heapanalytics.com/docs#identify
 *
 * @param {Identify} identify
 */

Heap.prototype.identify = function(identify){
  var traits = identify.traits();
  var username = identify.username();
  var id = identify.userId();
  var handle = username || id;
  if (handle) traits.handle = handle;
  delete traits.username;
  window.heap.identify(traits);
};

/**
 * Track.
 *
 * https://heapanalytics.com/docs#track
 *
 * @param {Track} track
 */

Heap.prototype.track = function(track){
  window.heap.track(track.event(), track.properties());
};

}, {"analytics.js-integration":89,"alias":158}],
46: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `hellobar.com` integration.
 */

var Hellobar = module.exports = integration('Hello Bar')
  .assumesPageview()
  .global('_hbq')
  .option('apiKey', '')
  .tag('<script src="//s3.amazonaws.com/scripts.hellobar.com/{{ apiKey }}.js">');

/**
 * Initialize.
 *
 * https://s3.amazonaws.com/scripts.hellobar.com/bb900665a3090a79ee1db98c3af21ea174bbc09f.js
 *
 * @param {Object} page
 */

Hellobar.prototype.initialize = function(page){
  window._hbq = window._hbq || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Hellobar.prototype.loaded = function(){
  return !! (window._hbq && window._hbq.push !== Array.prototype.push);
};

}, {"analytics.js-integration":89}],
47: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var is = require('is');

/**
 * Expose `HitTail` integration.
 */

var HitTail = module.exports = integration('HitTail')
  .assumesPageview()
  .global('htk')
  .option('siteId', '')
  .tag('<script src="//{{ siteId }}.hittail.com/mlt.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

HitTail.prototype.initialize = function(page){
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

HitTail.prototype.loaded = function(){
  return is.fn(window.htk);
};

}, {"analytics.js-integration":89,"is":92}],
48: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_hsq');
var convert = require('convert-dates');

/**
 * Expose `HubSpot` integration.
 */

var HubSpot = module.exports = integration('HubSpot')
  .assumesPageview()
  .global('_hsq')
  .option('portalId', null)
  .tag('<script id="hs-analytics" src="https://js.hs-analytics.net/analytics/{{ cache }}/{{ portalId }}.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

HubSpot.prototype.initialize = function(page){
  window._hsq = [];
  var cache = Math.ceil(new Date() / 300000) * 300000;
  this.load({ cache: cache }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

HubSpot.prototype.loaded = function(){
  return !! (window._hsq && window._hsq.push !== Array.prototype.push);
};

/**
 * Page.
 *
 * @param {String} category (optional)
 * @param {String} name (optional)
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 */

HubSpot.prototype.page = function(page){
  push('_trackPageview');
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

HubSpot.prototype.identify = function(identify){
  if (!identify.email()) return;
  var traits = identify.traits();
  traits = convertDates(traits);
  push('identify', traits);
};

/**
 * Track.
 *
 * @param {Track} track
 */

HubSpot.prototype.track = function(track){
  var props = track.properties();
  props = convertDates(props);
  push('trackEvent', track.event(), props);
};

/**
 * Convert all the dates in the HubSpot properties to millisecond times
 *
 * @param {Object} properties
 */

function convertDates(properties){
  return convert(properties, function(date){ return date.getTime(); });
}

}, {"analytics.js-integration":89,"global-queue":153,"convert-dates":159}],
49: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var alias = require('alias');

/**
 * Expose `Improvely` integration.
 */

var Improvely = module.exports = integration('Improvely')
  .assumesPageview()
  .global('_improvely')
  .global('improvely')
  .option('domain', '')
  .option('projectId', null)
  .tag('<script src="//{{ domain }}.iljmp.com/improvely.js">');

/**
 * Initialize.
 *
 * http://www.improvely.com/docs/landing-page-code
 *
 * @param {Object} page
 */

Improvely.prototype.initialize = function(page){
  window._improvely = [];
  window.improvely = { init: function(e, t){ window._improvely.push(["init", e, t]); }, goal: function(e){ window._improvely.push(["goal", e]); }, label: function(e){ window._improvely.push(["label", e]); }};

  var domain = this.options.domain;
  var id = this.options.projectId;
  window.improvely.init(domain, id);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Improvely.prototype.loaded = function(){
  return !! (window.improvely && window.improvely.identify);
};

/**
 * Identify.
 *
 * http://www.improvely.com/docs/labeling-visitors
 *
 * @param {Identify} identify
 */

Improvely.prototype.identify = function(identify){
  var id = identify.userId();
  if (id) window.improvely.label(id);
};

/**
 * Track.
 *
 * http://www.improvely.com/docs/conversion-code
 *
 * @param {Track} track
 */

Improvely.prototype.track = function(track){
  var props = track.properties({ revenue: 'amount' });
  props.type = track.event();
  window.improvely.goal(props);
};

}, {"analytics.js-integration":89,"alias":158}],
50: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_iva');
var Track = require('facade').Track;
var each = require('each');
var is = require('is');

/**
 * HOP.
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Expose `InsideVault` integration.
 */

var InsideVault = module.exports = integration('InsideVault')
  .global('_iva')
  .option('clientId', '')
  .option('domain', '')
  .tag('<script src="//analytics.staticiv.com/iva.js">')
  .mapping('events');

/**
 * Initialize.
 *
 * @param page
 */

InsideVault.prototype.initialize = function(page){
  var domain = this.options.domain;
  window._iva = window._iva || [];
  push('setClientId', this.options.clientId);
  var userId = this.analytics.user().id();
  if (userId) push('setUserId', userId);
  if (domain) push('setDomain', domain);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

InsideVault.prototype.loaded = function(){
  return !! (window._iva && window._iva.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

InsideVault.prototype.identify = function(identify){
  push('setUserId', identify.userId());
};


/**
 * Page.
 *
 * @param {Page} page
 */

InsideVault.prototype.page = function(page){
  // they want every landing page to send a "click" event.
  push('trackEvent', 'click');
};

/**
 * Track.
 *
 * Tracks everything except 'sale' events.
 *
 * @param {Track} track
 */

InsideVault.prototype.track = function(track){
  var user = this.analytics.user();
  var events = this.events(track.event());
  var value = track.revenue() || track.value() || 0;
  var eventId = track.orderId() || user.id() || '';
  each(events, function(event){
    // 'sale' is a special event that will be routed to a table that is deprecated on InsideVault's end.
    // They don't want a generic 'sale' event to go to their deprecated table.
    if (event != 'sale') {
      push('trackEvent', event, value, eventId);
    }
  });
};

}, {"analytics.js-integration":89,"global-queue":153,"facade":125,"each":11,"is":92}],
51: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('__insp');
var alias = require('alias');
var clone = require('clone');

/**
 * Expose `Inspectlet` integration.
 */

var Inspectlet = module.exports = integration('Inspectlet')
  .assumesPageview()
  .global('__insp')
  .global('__insp_')
  .option('wid', '')
  .tag('<script src="//cdn.inspectlet.com/inspectlet.js">');

/**
 * Initialize.
 *
 * https://www.inspectlet.com/dashboard/embedcode/1492461759/initial
 *
 * @param {Object} page
 */

Inspectlet.prototype.initialize = function(page){
  push('wid', this.options.wid);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Inspectlet.prototype.loaded = function(){
  return !! (window.__insp_ && window.__insp);
};

/**
 * Identify.
 *
 * http://www.inspectlet.com/docs#tagging
 *
 * @param {Identify} identify
 */

Inspectlet.prototype.identify = function (identify) {
  var traits = identify.traits({ id: 'userid' });
  push('tagSession', traits);
};

/**
 * Track.
 *
 * http://www.inspectlet.com/docs/tags
 *
 * @param {Track} track
 */

Inspectlet.prototype.track = function(track){
  push('tagSession', track.event());
};

/**
 * Page.
 *
 * http://www.inspectlet.com/docs/tags
 *
 * @param {Track} track
 */

Inspectlet.prototype.page = function(){
  push('virtualPage');
};

}, {"analytics.js-integration":89,"global-queue":153,"alias":158,"clone":157}],
52: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var convertDates = require('convert-dates');
var defaults = require('defaults');
var isEmail = require('is-email');
var load = require('load-script');
var empty = require('is-empty');
var alias = require('alias');
var each = require('each');
var when = require('when');
var is = require('is');

/**
 * Expose `Intercom` integration.
 */

var Intercom = module.exports = integration('Intercom')
  .assumesPageview()
  .global('Intercom')
  .option('activator', '#IntercomDefaultWidget')
  .option('appId', '')
  .option('inbox', false)
  .tag('<script src="https://static.intercomcdn.com/intercom.v1.js">');

/**
 * Initialize.
 *
 * http://docs.intercom.io/
 * http://docs.intercom.io/#IntercomJS
 *
 * @param {Object} page
 */

Intercom.prototype.initialize = function(page){
  var self = this;
  this.load(function(){
    when(function(){ return self.loaded(); }, self.ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Intercom.prototype.loaded = function(){
  return is.fn(window.Intercom);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Intercom.prototype.page = function(page){
  window.Intercom('update');
};

/**
 * Identify.
 *
 * http://docs.intercom.io/#IntercomJS
 *
 * @param {Identify} identify
 */

Intercom.prototype.identify = function(identify){
  var traits = identify.traits({ userId: 'user_id' });
  var activator = this.options.activator;
  var opts = identify.options(this.name);
  var companyCreated = identify.companyCreated();
  var created = identify.created();
  var email = identify.email();
  var name = identify.name();
  var id = identify.userId();
  var group = this.analytics.group();

  if (!id && !traits.email) return; // one is required

  traits.app_id = this.options.appId;

  // intercom requires `company` to be an object. default it with group traits
  // so that we guarantee an `id` is there, since they require it
  if (null != traits.company && !is.object(traits.company)) delete traits.company;
  if (traits.company) defaults(traits.company, group.traits());

  // name
  if (name) traits.name = name;

  // handle dates
  if (traits.company && companyCreated) traits.company.created = companyCreated;
  if (created) traits.created = created;

  // convert dates
  traits = convertDates(traits, formatDate);
  traits = alias(traits, { created: 'created_at'});
  if (traits.company) traits.company = alias(traits.company, { created: 'created_at' });

  // handle options
  if (opts.increments) traits.increments = opts.increments;
  if (opts.userHash) traits.user_hash = opts.userHash;
  if (opts.user_hash) traits.user_hash = opts.user_hash;

  // Intercom, will force the widget to appear
  // if the selector is #IntercomDefaultWidget
  // so no need to check inbox, just need to check
  // that the selector isn't #IntercomDefaultWidget.
  if ('#IntercomDefaultWidget' != activator) {
    traits.widget = { activator: activator };
  }

  var method = this._id !== id ? 'boot': 'update';
  this._id = id; // cache for next time

  window.Intercom(method, traits);
};

/**
 * Group.
 *
 * @param {Group} group
 */

Intercom.prototype.group = function(group){
  var props = group.properties();
  var id = group.groupId();
  if (id) props.id = id;
  window.Intercom('update', { company: props });
};

/**
 * Track.
 *
 * @param {Track} track
 */

Intercom.prototype.track = function(track){
  window.Intercom('trackEvent', track.event(), track.properties());
};

/**
 * Format a date to Intercom's liking.
 *
 * @param {Date} date
 * @return {Number}
 */

function formatDate(date) {
  return Math.floor(date / 1000);
}

}, {"analytics.js-integration":89,"convert-dates":159,"defaults":152,"is-email":148,"load-script":121,"is-empty":120,"alias":158,"each":11,"when":124,"is":92}],
53: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var clone = require('clone');

/**
 * Expose `Keen IO` integration.
 */

var Keen = module.exports = integration('Keen IO')
  .global('Keen')
  .option('projectId', '')
  .option('readKey', '')
  .option('writeKey', '')
  .option('ipAddon', false)
  .option('uaAddon', false)
  .option('urlAddon', false)
  .option('referrerAddon', false)
  .option('trackNamedPages', true)
  .option('trackAllPages', false)
  .option('trackCategorizedPages', true)
  .tag('<script src="//d26b395fwzu5fz.cloudfront.net/3.0.7/{{ lib }}.min.js">');

/**
 * Initialize.
 *
 * https://keen.io/docs/
 */

Keen.prototype.initialize = function(){
  var options = this.options;
  !function(a,b){if(void 0===b[a]){b["_"+a]={},b[a]=function(c){b["_"+a].clients=b["_"+a].clients||{},b["_"+a].clients[c.projectId]=this,this._config=c},b[a].ready=function(c){b["_"+a].ready=b["_"+a].ready||[],b["_"+a].ready.push(c)};for(var c=["addEvent","setGlobalProperties","trackExternalLink","on"],d=0;d<c.length;d++){var e=c[d],f=function(a){return function(){return this["_"+a]=this["_"+a]||[],this["_"+a].push(arguments),this}};b[a].prototype[e]=f(e)}}}("Keen",window);
  this.client = new window.Keen({
    projectId: options.projectId,
    writeKey: options.writeKey,
    readKey: options.readKey
  });

  // if you have a read-key, then load the full keen library
  var lib = this.options.readKey ? 'keen' : 'keen-tracker';
  this.load({ lib: lib }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Keen.prototype.loaded = function(){
  return !!(window.Keen && window.Keen.prototype.configure);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Keen.prototype.page = function(page){
  var category = page.category();
  var props = page.properties();
  var name = page.fullName();
  var opts = this.options;

  // all pages
  if (opts.trackAllPages) {
    this.track(page.track());
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }
};

/**
 * Identify.
 *
 * TODO: migrate from old `userId` to simpler `id`
 * https://keen.io/docs/data-collection/data-enrichment/#add-ons
 *
 * Set up the Keen addons object. These must be specifically
 * enabled by the settings in order to include the plugins, or else
 * Keen will reject the request.
 *
 * @param {Identify} identify
 */

Keen.prototype.identify = function(identify){
  var traits = identify.traits();
  var id = identify.userId();
  var user = {};
  if (id) user.userId = id;
  if (traits) user.traits = traits;
  var props = { user: user };
  this.addons(props, identify);
  this.client.setGlobalProperties(function(){
    return clone(props);
  });
};

/**
 * Track.
 *
 * @param {Track} track
 */

Keen.prototype.track = function(track){
  var props = track.properties();
  this.addons(props, track);
  this.client.addEvent(track.event(), props);
};

/**
 * Attach addons to `obj` with `msg`.
 *
 * @param {Object} obj
 * @param {Facade} msg
 */

Keen.prototype.addons = function(obj, msg){
  var options = this.options;
  var addons = [];

  if (options.ipAddon) {
    addons.push({
      name: 'keen:ip_to_geo',
      input: { ip: 'ip_address' },
      output: 'ip_geo_info'
    });
    obj.ip_address = '${keen.ip}';
  }

  if (options.uaAddon) {
    addons.push({
      name: 'keen:ua_parser',
      input: { ua_string: 'user_agent' },
      output: 'parsed_user_agent'
    });
    obj.user_agent = '${keen.user_agent}';
  }

  if (options.urlAddon) {
    addons.push({
      name: 'keen:url_parser',
      input: { url: 'page_url' },
      output: 'parsed_page_url'
    });
    obj.page_url = document.location.href;
  }

  if (options.referrerAddon) {
    addons.push({
      name: 'keen:referrer_parser',
      input: {
        referrer_url: 'referrer_url',
        page_url: 'page_url'
      },
      output: 'referrer_info'
    });
    obj.referrer_url = document.referrer;
    obj.page_url = document.location.href;
  }

  obj.keen = {
    timestamp: msg.timestamp(),
    addons: addons
  };
};

}, {"analytics.js-integration":89,"clone":157}],
54: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var indexof = require('indexof');
var is = require('is');

/**
 * Expose `Kenshoo` integration.
 */

var Kenshoo = module.exports = integration('Kenshoo')
  .global('k_trackevent')
  .option('cid', '')
  .option('subdomain', '')
  .option('events', [])
  .tag('<script src="//{{ subdomain }}.xg4ken.com/media/getpx.php?cid={{ cid }}">');

/**
 * Initialize.
 *
 * See https://gist.github.com/justinboyle/7875832
 *
 * @param {Object} page
 */

Kenshoo.prototype.initialize = function(page){
  this.load(this.ready);
};

/**
 * Loaded? (checks if the tracking function is set)
 *
 * @return {Boolean}
 */

Kenshoo.prototype.loaded = function(){
  return is.fn(window.k_trackevent);
};

/**
 * Track.
 *
 * Only tracks events if they are listed in the events array option.
 * We've asked for docs a few times but no go :/
 *
 * https://github.com/jorgegorka/the_tracker/blob/master/lib/the_tracker/trackers/kenshoo.rb
 *
 * @param {Track} event
 */

Kenshoo.prototype.track = function(track){
  var events = this.options.events;
  var traits = track.traits();
  var event = track.event();
  var revenue = track.revenue() || 0;
  if (!~indexof(events, event)) return;

  var params = [
    'id=' + this.options.cid,
    'type=conv',
    'val=' + revenue,
    'orderId=' + track.orderId(),
    'promoCode=' + track.coupon(),
    'valueCurrency=' + track.currency(),

    // Live tracking fields. Ignored for now (until we get documentation).
    'GCID=',
    'kw=',
    'product='
  ];

  window.k_trackevent(params, this.options.subdomain);
};

}, {"analytics.js-integration":89,"indexof":114,"is":92}],
55: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_kmq');
var Track = require('facade').Track;
var alias = require('alias');
var Batch = require('batch');
var each = require('each');
var is = require('is');

/**
 * Expose `KISSmetrics` integration.
 */

var KISSmetrics = module.exports = integration('KISSmetrics')
  .assumesPageview()
  .global('_kmq')
  .global('KM')
  .global('_kmil')
  .option('apiKey', '')
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .option('prefixProperties', true)
  .tag('useless', '<script src="//i.kissmetrics.com/i.js">')
  .tag('library', '<script src="//doug1izaerwt3.cloudfront.net/{{ apiKey }}.1.js">');

/**
 * Check if browser is mobile, for kissmetrics.
 *
 * http://support.kissmetrics.com/how-tos/browser-detection.html#mobile-vs-non-mobile
 */

exports.isMobile = navigator.userAgent.match(/Android/i)
  || navigator.userAgent.match(/BlackBerry/i)
  || navigator.userAgent.match(/iPhone|iPod/i)
  || navigator.userAgent.match(/iPad/i)
  || navigator.userAgent.match(/Opera Mini/i)
  || navigator.userAgent.match(/IEMobile/i);

/**
 * Initialize.
 *
 * http://support.kissmetrics.com/apis/javascript
 *
 * @param {Object} page
 */

KISSmetrics.prototype.initialize = function(page){
  var self = this;
  window._kmq = [];
  if (exports.isMobile) push('set', { 'Mobile Session': 'Yes' });

  var batch = new Batch();
  batch.push(function(done){ self.load('useless', done); }) // :)
  batch.push(function(done){ self.load('library', done); })
  batch.end(function(){
    self.trackPage(page);
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

KISSmetrics.prototype.loaded = function(){
  return is.object(window.KM);
};

/**
 * Page.
 *
 * @param {Page} page
 */

KISSmetrics.prototype.page = function(page){
  if (!window.KM_SKIP_PAGE_VIEW) window.KM.pageView();
  this.trackPage(page);
};

/**
 * Track page.
 *
 * @param {Page} page
 */

KISSmetrics.prototype.trackPage = function(page){
  var category = page.category();
  var name = page.fullName();
  var opts = this.options;

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

KISSmetrics.prototype.identify = function(identify){
  var traits = identify.traits();
  var id = identify.userId();
  if (id) push('identify', id);
  if (traits) push('set', traits);
};

/**
 * Track.
 *
 * @param {Track} track
 */

KISSmetrics.prototype.track = function(track){
  var mapping = { revenue: 'Billing Amount' };
  var event = track.event();
  var properties = track.properties(mapping);
  if (this.options.prefixProperties) properties = prefix(event, properties);
  push('record', event, properties);
};

/**
 * Alias.
 *
 * @param {Alias} to
 */

KISSmetrics.prototype.alias = function(alias){
  push('alias', alias.to(), alias.from());
};

/**
 * Completed order.
 *
 * @param {Track} track
 * @api private
 */

KISSmetrics.prototype.completedOrder = function(track){
  var products = track.products();
  var event = track.event();

  // transaction
  push('record', event, prefix(event, track.properties()));

  // items
  window._kmq.push(function(){
    var km = window.KM;
    each(products, function(product, i){
      var temp = new Track({ event: event, properties: product });
      var item = prefix(event, product);
      item._t = km.ts() + i;
      item._d = 1;
      km.set(item);
    });
  });
};

/**
 * Prefix properties with the event name.
 *
 * @param {String} event
 * @param {Object} properties
 * @return {Object} prefixed
 * @api private
 */

function prefix(event, properties){
  var prefixed = {};
  each(properties, function(key, val){
    if (key === 'Billing Amount') {
      prefixed[key] = val;
    } else {
      prefixed[event + ' - ' + key] = val;
    }
  });
  return prefixed;
}

}, {"analytics.js-integration":89,"global-queue":153,"facade":125,"alias":158,"batch":179,"each":11,"is":92}],
179: [function(require, module, exports) {
/**
 * Module dependencies.
 */

try {
  var EventEmitter = require('events').EventEmitter;
} catch (err) {
  var Emitter = require('emitter');
}

/**
 * Noop.
 */

function noop(){}

/**
 * Expose `Batch`.
 */

module.exports = Batch;

/**
 * Create a new Batch.
 */

function Batch() {
  if (!(this instanceof Batch)) return new Batch;
  this.fns = [];
  this.concurrency(Infinity);
  this.throws(true);
  for (var i = 0, len = arguments.length; i < len; ++i) {
    this.push(arguments[i]);
  }
}

/**
 * Inherit from `EventEmitter.prototype`.
 */

if (EventEmitter) {
  Batch.prototype.__proto__ = EventEmitter.prototype;
} else {
  Emitter(Batch.prototype);
}

/**
 * Set concurrency to `n`.
 *
 * @param {Number} n
 * @return {Batch}
 * @api public
 */

Batch.prototype.concurrency = function(n){
  this.n = n;
  return this;
};

/**
 * Queue a function.
 *
 * @param {Function} fn
 * @return {Batch}
 * @api public
 */

Batch.prototype.push = function(fn){
  this.fns.push(fn);
  return this;
};

/**
 * Set wether Batch will or will not throw up.
 *
 * @param  {Boolean} throws
 * @return {Batch}
 * @api public
 */
Batch.prototype.throws = function(throws) {
  this.e = !!throws;
  return this;
};

/**
 * Execute all queued functions in parallel,
 * executing `cb(err, results)`.
 *
 * @param {Function} cb
 * @return {Batch}
 * @api public
 */

Batch.prototype.end = function(cb){
  var self = this
    , total = this.fns.length
    , pending = total
    , results = []
    , errors = []
    , cb = cb || noop
    , fns = this.fns
    , max = this.n
    , throws = this.e
    , index = 0
    , done;

  // empty
  if (!fns.length) return cb(null, results);

  // process
  function next() {
    var i = index++;
    var fn = fns[i];
    if (!fn) return;
    var start = new Date;

    try {
      fn(callback);
    } catch (err) {
      callback(err);
    }

    function callback(err, res){
      if (done) return;
      if (err && throws) return done = true, cb(err);
      var complete = total - pending + 1;
      var end = new Date;

      results[i] = res;
      errors[i] = err;

      self.emit('progress', {
        index: i,
        value: res,
        error: err,
        pending: pending,
        total: total,
        complete: complete,
        percent: complete / total * 100 | 0,
        start: start,
        end: end,
        duration: end - start
      });

      if (--pending) next()
      else if(!throws) cb(errors, results);
      else cb(null, results);
    }
  }

  // concurrency
  for (var i = 0; i < fns.length; i++) {
    if (i == max) break;
    next();
  }

  return this;
};

}, {"emitter":180}],
180: [function(require, module, exports) {

/**
 * Expose `Emitter`.
 */

module.exports = Emitter;

/**
 * Initialize a new `Emitter`.
 *
 * @api public
 */

function Emitter(obj) {
  if (obj) return mixin(obj);
};

/**
 * Mixin the emitter properties.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */

function mixin(obj) {
  for (var key in Emitter.prototype) {
    obj[key] = Emitter.prototype[key];
  }
  return obj;
}

/**
 * Listen on the given `event` with `fn`.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.on =
Emitter.prototype.addEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};
  (this._callbacks[event] = this._callbacks[event] || [])
    .push(fn);
  return this;
};

/**
 * Adds an `event` listener that will be invoked a single
 * time then automatically removed.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.once = function(event, fn){
  var self = this;
  this._callbacks = this._callbacks || {};

  function on() {
    self.off(event, on);
    fn.apply(this, arguments);
  }

  on.fn = fn;
  this.on(event, on);
  return this;
};

/**
 * Remove the given callback for `event` or all
 * registered callbacks.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.off =
Emitter.prototype.removeListener =
Emitter.prototype.removeAllListeners =
Emitter.prototype.removeEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};

  // all
  if (0 == arguments.length) {
    this._callbacks = {};
    return this;
  }

  // specific event
  var callbacks = this._callbacks[event];
  if (!callbacks) return this;

  // remove all handlers
  if (1 == arguments.length) {
    delete this._callbacks[event];
    return this;
  }

  // remove specific handler
  var cb;
  for (var i = 0; i < callbacks.length; i++) {
    cb = callbacks[i];
    if (cb === fn || cb.fn === fn) {
      callbacks.splice(i, 1);
      break;
    }
  }
  return this;
};

/**
 * Emit `event` with the given args.
 *
 * @param {String} event
 * @param {Mixed} ...
 * @return {Emitter}
 */

Emitter.prototype.emit = function(event){
  this._callbacks = this._callbacks || {};
  var args = [].slice.call(arguments, 1)
    , callbacks = this._callbacks[event];

  if (callbacks) {
    callbacks = callbacks.slice(0);
    for (var i = 0, len = callbacks.length; i < len; ++i) {
      callbacks[i].apply(this, args);
    }
  }

  return this;
};

/**
 * Return array of callbacks for `event`.
 *
 * @param {String} event
 * @return {Array}
 * @api public
 */

Emitter.prototype.listeners = function(event){
  this._callbacks = this._callbacks || {};
  return this._callbacks[event] || [];
};

/**
 * Check if this emitter has `event` handlers.
 *
 * @param {String} event
 * @return {Boolean}
 * @api public
 */

Emitter.prototype.hasListeners = function(event){
  return !! this.listeners(event).length;
};

}, {}],
56: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_learnq');
var tick = require('next-tick');
var alias = require('alias');

/**
 * Trait aliases.
 */

var aliases = {
  id: '$id',
  email: '$email',
  firstName: '$first_name',
  lastName: '$last_name',
  phone: '$phone_number',
  title: '$title'
};

/**
 * Expose `Klaviyo` integration.
 */

var Klaviyo = module.exports = integration('Klaviyo')
  .assumesPageview()
  .global('_learnq')
  .option('apiKey', '')
  .tag('<script src="//a.klaviyo.com/media/js/learnmarklet.js">');

/**
 * Initialize.
 *
 * https://www.klaviyo.com/docs/getting-started
 *
 * @param {Object} page
 */

Klaviyo.prototype.initialize = function(page){
  var self = this;
  push('account', this.options.apiKey);
  this.load(function(){
    tick(self.ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Klaviyo.prototype.loaded = function(){
  return !! (window._learnq && window._learnq.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Klaviyo.prototype.identify = function(identify){
  var traits = identify.traits(aliases);
  if (!traits.$id && !traits.$email) return;
  push('identify', traits);
};

/**
 * Group.
 *
 * @param {Group} group
 */

Klaviyo.prototype.group = function(group){
  var props = group.properties();
  if (!props.name) return;
  push('identify', { $organization: props.name });
};

/**
 * Track.
 *
 * @param {Track} track
 */

Klaviyo.prototype.track = function(track){
  push('track', track.event(), track.properties({
    revenue: '$value'
  }));
};

}, {"analytics.js-integration":89,"global-queue":153,"next-tick":103,"alias":158}],
57: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `LeadLander` integration.
 */

var LeadLander = module.exports = integration('LeadLander')
  .assumesPageview()
  .global('llactid')
  .global('trackalyzer')
  .option('accountId', null)
  .tag('<script src="http://t6.trackalyzer.com/trackalyze-nodoc.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

LeadLander.prototype.initialize = function(page){
  window.llactid = this.options.accountId;
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

LeadLander.prototype.loaded = function(){
  return !! window.trackalyzer;
};

}, {"analytics.js-integration":89}],
58: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var clone = require('clone');
var each = require('each');
var Identify = require('facade').Identify;
var when = require('when');

/**
 * Expose `LiveChat` integration.
 */

var LiveChat = module.exports = integration('LiveChat')
  .assumesPageview()
  .global('__lc')
  .global('__lc_inited')
  .global('LC_API')
  .global('LC_Invite')
  .option('group', 0)
  .option('license', '')
  .tag('<script src="//cdn.livechatinc.com/tracking.js">');

/**
 * Initialize.
 *
 * http://www.livechatinc.com/api/javascript-api
 *
 * @param {Object} page
 */

LiveChat.prototype.initialize = function(page){
  var self = this;
  var user = this.analytics.user();
  var identify = new Identify({
    userId: user.id(),
    traits: user.traits()
  });

  window.__lc = clone(this.options);
  window.__lc.visitor = {
    name: identify.name(),
    email: identify.email()
  };

  this.load(function(){
    when(function(){ return self.loaded(); }, self.ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

LiveChat.prototype.loaded = function(){
  return !!(window.LC_API && window.LC_Invite);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

LiveChat.prototype.identify = function(identify){
  var traits = identify.traits({ userId: 'User ID' });
  window.LC_API.set_custom_variables(convert(traits));
};

/**
 * Convert a traits object into the format LiveChat requires.
 *
 * @param {Object} traits
 * @return {Array}
 */

function convert(traits){
  var arr = [];
  each(traits, function(key, value){
    arr.push({ name: key, value: value });
  });
  return arr;
}

}, {"analytics.js-integration":89,"clone":157,"each":11,"facade":125,"when":124}],
59: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var Identify = require('facade').Identify;
var useHttps = require('use-https');

/**
 * Expose `LuckyOrange` integration.
 */

var LuckyOrange = module.exports = integration('Lucky Orange')
  .assumesPageview()
  .global('_loq')
  .global('__wtw_watcher_added')
  .global('__wtw_lucky_site_id')
  .global('__wtw_lucky_is_segment_io')
  .global('__wtw_custom_user_data')
  .option('siteId', null)
  .tag('http', '<script src="http://www.luckyorange.com/w.js?{{ cache }}">')
  .tag('https', '<script src="https://ssl.luckyorange.com/w.js?{{ cache }}">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

LuckyOrange.prototype.initialize = function(page){
  var user = this.analytics.user();
  window._loq || (window._loq = []);
  window.__wtw_lucky_site_id = this.options.siteId;
  this.identify(new Identify({
    traits: user.traits(),
    userId: user.id()
  }));
  var cache = Math.floor(new Date().getTime() / 60000);
  var name = useHttps() ? 'https' : 'http';
  this.load(name, { cache: cache }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

LuckyOrange.prototype.loaded = function(){
  return !! window.__wtw_watcher_added;
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

LuckyOrange.prototype.identify = function(identify){
  var traits = identify.traits();
  var email = identify.email();
  var name = identify.name();
  if (name) traits.name = name;
  if (email) traits.email = email;
  window.__wtw_custom_user_data = traits;
};

}, {"analytics.js-integration":89,"facade":125,"use-https":91}],
60: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var alias = require('alias');

/**
 * Expose `Lytics` integration.
 */

var Lytics = module.exports = integration('Lytics')
  .global('jstag')
  .option('cid', '')
  .option('cookie', 'seerid')
  .option('delay', 2000)
  .option('sessionTimeout', 1800)
  .option('url', '//c.lytics.io')
  .tag('<script src="//c.lytics.io/static/io.min.js">');

/**
 * Options aliases.
 */

var aliases = {
  sessionTimeout: 'sessecs'
};

/**
 * Initialize.
 *
 * http://admin.lytics.io/doc#jstag
 *
 * @param {Object} page
 */

Lytics.prototype.initialize = function(page){
  var options = alias(this.options, aliases);
  window.jstag = (function(){var t = { _q: [], _c: options, ts: (new Date()).getTime() }; t.send = function(){this._q.push(['ready', 'send', Array.prototype.slice.call(arguments)]); return this; }; return t; })();
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Lytics.prototype.loaded = function(){
  return !! (window.jstag && window.jstag.bind);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Lytics.prototype.page = function(page){
  window.jstag.send(page.properties());
};

/**
 * Idenfity.
 *
 * @param {Identify} identify
 */

Lytics.prototype.identify = function(identify){
  var traits = identify.traits({ userId: '_uid' });
  window.jstag.send(traits);
};

/**
 * Track.
 *
 * @param {String} event
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 */

Lytics.prototype.track = function(track){
  var props = track.properties();
  props._e = track.event();
  window.jstag.send(props);
};

}, {"analytics.js-integration":89,"alias":158}],
61: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var alias = require('alias');
var clone = require('clone');
var dates = require('convert-dates');
var integration = require('analytics.js-integration');
var is = require('is');
var iso = require('to-iso-string');
var indexof = require('indexof');
var del = require('obj-case').del;
var some = require('some');

/**
 * Expose `Mixpanel` integration.
 */

var Mixpanel = module.exports = integration('Mixpanel')
  .global('mixpanel')
  .option('increments', [])
  .option('cookieName', '')
  .option('nameTag', true)
  .option('pageview', false)
  .option('people', false)
  .option('token', '')
  .option('trackAllPages', false)
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .tag('<script src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js">');

/**
 * Options aliases.
 */

var optionsAliases = {
  cookieName: 'cookie_name'
};

/**
 * Initialize.
 *
 * https://mixpanel.com/help/reference/javascript#installing
 * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.init
 */

Mixpanel.prototype.initialize = function(){
  (function(c, a){window.mixpanel = a; var b, d, h, e; a._i = []; a.init = function(b, c, f){function d(a, b){var c = b.split('.'); 2 == c.length && (a = a[c[0]], b = c[1]); a[b] = function(){a.push([b].concat(Array.prototype.slice.call(arguments, 0))); }; } var g = a; 'undefined' !== typeof f ? g = a[f] = [] : f = 'mixpanel'; g.people = g.people || []; h = ['disable', 'track', 'track_pageview', 'track_links', 'track_forms', 'register', 'register_once', 'unregister', 'identify', 'alias', 'name_tag', 'set_config', 'people.set', 'people.increment', 'people.track_charge', 'people.append']; for (e = 0; e < h.length; e++) d(g, h[e]); a._i.push([b, c, f]); }; a.__SV = 1.2; })(document, window.mixpanel || []);
  this.options.increments = lowercase(this.options.increments);
  var options = alias(this.options, optionsAliases);
  window.mixpanel.init(options.token, options);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Mixpanel.prototype.loaded = function(){
  return !! (window.mixpanel && window.mixpanel.config);
};

/**
 * Page.
 *
 * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.track_pageview
 *
 * @param {String} category (optional)
 * @param {String} name (optional)
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 */

Mixpanel.prototype.page = function(page){
  var category = page.category();
  var name = page.fullName();
  var opts = this.options;

  // all pages
  if (opts.trackAllPages) {
    this.track(page.track());
  }

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }
};

/**
 * Trait aliases.
 */

var traitAliases = {
  created: '$created',
  email: '$email',
  firstName: '$first_name',
  lastName: '$last_name',
  lastSeen: '$last_seen',
  name: '$name',
  username: '$username',
  phone: '$phone'
};

/**
 * Identify.
 *
 * https://mixpanel.com/help/reference/javascript#super-properties
 * https://mixpanel.com/help/reference/javascript#user-identity
 * https://mixpanel.com/help/reference/javascript#storing-user-profiles
 *
 * @param {Identify} identify
 */

Mixpanel.prototype.identify = function(identify){
  var username = identify.username();
  var email = identify.email();
  var id = identify.userId();

  // id
  if (id) window.mixpanel.identify(id);

  // name tag
  var nametag = email || username || id;
  if (nametag) window.mixpanel.name_tag(nametag);

  // traits
  var traits = identify.traits(traitAliases);
  if (traits.$created) del(traits, 'createdAt');
  window.mixpanel.register(dates(traits, iso));
  if (this.options.people) window.mixpanel.people.set(traits);
};

/**
 * Track.
 *
 * https://mixpanel.com/help/reference/javascript#sending-events
 * https://mixpanel.com/help/reference/javascript#tracking-revenue
 *
 * @param {Track} track
 */

Mixpanel.prototype.track = function(track){
  var increments = this.options.increments;
  var increment = track.event().toLowerCase();
  var people = this.options.people;
  var props = track.properties();
  var revenue = track.revenue();

  // delete mixpanel's reserved properties, so they don't conflict
  delete props.distinct_id;
  delete props.ip;
  delete props.mp_name_tag;
  delete props.mp_note;
  delete props.token;

  // convert arrays of objects to length, since mixpanel doesn't support object arrays
  for (var key in props) {
    var val = props[key];
    if (is.array(val) && some(val, is.object)) props[key] = val.length;
  }

  // increment properties in mixpanel people
  if (people && ~indexof(increments, increment)) {
    window.mixpanel.people.increment(track.event());
    window.mixpanel.people.set('Last ' + track.event(), new Date);
  }

  // track the event
  props = dates(props, iso);
  window.mixpanel.track(track.event(), props);

  // track revenue specifically
  if (revenue && people) {
    window.mixpanel.people.track_charge(revenue);
  }
};

/**
 * Alias.
 *
 * https://mixpanel.com/help/reference/javascript#user-identity
 * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.alias
 *
 * @param {Alias} alias
 */

Mixpanel.prototype.alias = function(alias){
  var mp = window.mixpanel;
  var to = alias.to();
  if (mp.get_distinct_id && mp.get_distinct_id() === to) return;
  // HACK: internal mixpanel API to ensure we don't overwrite
  if (mp.get_property && mp.get_property('$people_distinct_id') === to) return;
  // although undocumented, mixpanel takes an optional original id
  mp.alias(to, alias.from());
};

/**
 * Lowercase the given `arr`.
 *
 * @param {Array} arr
 * @return {Array}
 * @api private
 */

function lowercase(arr){
  var ret = new Array(arr.length);

  for (var i = 0; i < arr.length; ++i) {
    ret[i] = String(arr[i]).toLowerCase();
  }

  return ret;
}

}, {"alias":158,"clone":157,"convert-dates":159,"analytics.js-integration":89,"is":92,"to-iso-string":156,"indexof":114,"obj-case":162,"some":181}],
181: [function(require, module, exports) {

/**
 * some
 */

var some = [].some;

/**
 * test whether some elements in
 * the array pass the test implemented
 * by `fn`.
 *
 * example:
 *
 *          some([1, 'foo', 'bar'], function (el, i) {
 *            return 'string' == typeof el;
 *          });
 *          // > true
 *
 * @param {Array} arr
 * @param {Function} fn
 * @return {bool}
 */

module.exports = function (arr, fn) {
  if (some) return some.call(arr, fn);
  for (var i = 0, l = arr.length; i < l; ++i) {
    if (fn(arr[i], i)) return true;
  }
  return false;
};

}, {}],
62: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var bind = require('bind');
var when = require('when');
var is = require('is');

/**
 * Expose `Mojn`
 */

var Mojn = module.exports = integration('Mojn')
  .option('customerCode', '')
  .global('_mojnTrack')
  .tag('<script src="https://track.idtargeting.com/{{ customerCode }}/track.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Mojn.prototype.initialize = function(){
  window._mojnTrack = window._mojnTrack || [];
  window._mojnTrack.push({ cid: this.options.customerCode });
  var loaded = bind(this, this.loaded);
  var ready = this.ready;
  this.load(function(){
    when(loaded, ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Mojn.prototype.loaded = function(){
  return is.object(window._mojnTrack);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Mojn.prototype.identify = function(identify){
  var email = identify.email();
  if (!email) return;
  var img = new Image();
  img.src = '//matcher.idtargeting.com/analytics.gif?cid=' + this.options.customerCode + '&_mjnctid='+email;
  img.width = 1;
  img.height = 1;
  return img;
};

/**
 * Track.
 *
 * @param {Track} event
 */

Mojn.prototype.track = function(track){
  var properties = track.properties();
  var revenue = properties.revenue;
  var currency = properties.currency || '';
  var conv = currency + revenue;
  if (!revenue) return;
  window._mojnTrack.push({ conv: conv });
  return conv;
};

}, {"analytics.js-integration":89,"bind":101,"when":124,"is":92}],
63: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var push = require('global-queue')('_mfq');
var integration = require('analytics.js-integration');
var each = require('each');

/**
 * Expose `Mouseflow`.
 */

var Mouseflow = module.exports = integration('Mouseflow')
  .assumesPageview()
  .global('mouseflow')
  .global('_mfq')
  .option('apiKey', '')
  .option('mouseflowHtmlDelay', 0)
  .tag('<script src="//cdn.mouseflow.com/projects/{{ apiKey }}.js">');

/**
 * Initalize.
 *
 * @param {Object} page
 */

Mouseflow.prototype.initialize = function(page){
  window.mouseflowHtmlDelay = this.options.mouseflowHtmlDelay;
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Mouseflow.prototype.loaded = function(){
  return !! window.mouseflow;
};

/**
 * Page.
 *
 * http://mouseflow.zendesk.com/entries/22528817-Single-page-websites
 *
 * @param {Page} page
 */

Mouseflow.prototype.page = function(page){
  if (!window.mouseflow) return;
  if ('function' != typeof mouseflow.newPageView) return;
  mouseflow.newPageView();
};

/**
 * Identify.
 *
 * http://mouseflow.zendesk.com/entries/24643603-Custom-Variables-Tagging
 *
 * @param {Identify} identify
 */

Mouseflow.prototype.identify = function(identify){
  set(identify.traits());
};

/**
 * Track.
 *
 * http://mouseflow.zendesk.com/entries/24643603-Custom-Variables-Tagging
 *
 * @param {Track} track
 */

Mouseflow.prototype.track = function(track){
  var props = track.properties();
  props.event = track.event();
  set(props);
};

/**
 * Push each key and value in the given `obj` onto the queue.
 *
 * @param {Object} obj
 */

function set(obj){
  each(obj, function(key, value){
    push('setVariable', key, value);
  });
}

}, {"global-queue":153,"analytics.js-integration":89,"each":11}],
64: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var useHttps = require('use-https');
var each = require('each');
var is = require('is');

/**
 * Expose `MouseStats` integration.
 */

var MouseStats = module.exports = integration('MouseStats')
  .assumesPageview()
  .global('msaa')
  .global('MouseStatsVisitorPlaybacks')
  .option('accountNumber', '')
  .tag('http', '<script src="http://www2.mousestats.com/js/{{ path }}.js?{{ cache }}">')
  .tag('https', '<script src="https://ssl.mousestats.com/js/{{ path }}.js?{{ cache }}">');

/**
 * Initialize.
 *
 * http://www.mousestats.com/docs/pages/allpages
 *
 * @param {Object} page
 */

MouseStats.prototype.initialize = function(page){
  var number = this.options.accountNumber;
  var path = number.slice(0,1) + '/' + number.slice(1,2) + '/' + number;
  var cache = Math.floor(new Date().getTime() / 60000);
  var name = useHttps() ? 'https' : 'http';
  this.load(name, { path: path, cache: cache }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

MouseStats.prototype.loaded = function(){
  return is.array(window.MouseStatsVisitorPlaybacks);
};

/**
 * Identify.
 *
 * http://www.mousestats.com/docs/wiki/7/how-to-add-custom-data-to-visitor-playbacks
 *
 * @param {Identify} identify
 */

MouseStats.prototype.identify = function(identify){
  each(identify.traits(), function (key, value) {
    window.MouseStatsVisitorPlaybacks.customVariable(key, value);
  });
};

}, {"analytics.js-integration":89,"use-https":91,"each":11,"is":92}],
65: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('__nls');

/**
 * Expose `Navilytics` integration.
 */

var Navilytics = module.exports = integration('Navilytics')
  .assumesPageview()
  .global('__nls')
  .option('memberId', '')
  .option('projectId', '')
  .tag('<script src="//www.navilytics.com/nls.js?mid={{ memberId }}&pid={{ projectId }}">');

/**
 * Initialize.
 *
 * https://www.navilytics.com/member/code_settings
 *
 * @param {Object} page
 */

Navilytics.prototype.initialize = function(page){
  window.__nls = window.__nls || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Navilytics.prototype.loaded = function(){
  return !! (window.__nls && [].push != window.__nls.push);
};

/**
 * Track.
 *
 * https://www.navilytics.com/docs#tags
 *
 * @param {Track} track
 */

Navilytics.prototype.track = function(track){
  push('tagRecording', track.event());
};

}, {"analytics.js-integration":89,"global-queue":153}],
66: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var https = require('use-https');
var tick = require('next-tick');

/**
 * Expose `Olark` integration.
 */

var Olark = module.exports = integration('Olark')
  .assumesPageview()
  .global('olark')
  .option('identify', true)
  .option('page', true)
  .option('siteId', '')
  .option('groupId', '')
  .option('track', false);

/**
 * Initialize.
 *
 * http://www.olark.com/documentation
 * https://www.olark.com/documentation/javascript/api.chat.setOperatorGroup
 *
 * @param {Facade} page
 */

Olark.prototype.initialize = function(page){
  var self = this;
  this.load(function(){
    tick(self.ready);
  });

  // assign chat to a specific site
  var groupId = this.options.groupId;
  if (groupId) api('chat.setOperatorGroup', { group: groupId });

  // keep track of the widget's open state
  api('box.onExpand', function(){ self._open = true; });
  api('box.onShrink', function(){ self._open = false; });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Olark.prototype.loaded = function(){
  return !! window.olark;
};

/**
 * Load.
 *
 * @param {Function} callback
 */

Olark.prototype.load = function(callback){
  var el = document.getElementById('olark');
  window.olark||(function(c){var f=window,d=document,l=https()?"https:":"http:",z=c.name,r="load";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while (q--) {(function(n){f[z][n]=function(){f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={ 0:+new Date() };a.P=function(u){a.p[u]=new Date()-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){hd="head";return ["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if (!m) {return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if (/MSIE[ ]+6/.test(navigator.userAgent)) {b.src="javascript:false"}b.allowTransparency="true";v[j](b);try {b.contentWindow[g].open()}catch (w) {c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try {var t=b.contentWindow[g];t.write(p());t.close()}catch (x) {b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({ loader: "static.olark.com/jsclient/loader0.js", name:"olark", methods:["configure","extend","declare","identify"] });
  window.olark.identify(this.options.siteId);
  callback();
};

/**
 * Page.
 *
 * @param {Facade} page
 */

Olark.prototype.page = function(page){
  if (!this.options.page) return;
  var props = page.properties();
  var name = page.fullName();
  if (!name && !props.url) return;

  name = name ? name + ' page' : props.url;
  this.notify('looking at ' + name);
};

/**
 * Identify.
 *
 * @param {Facade} identify
 */

Olark.prototype.identify = function(identify){
  if (!this.options.identify) return;

  var username = identify.username();
  var traits = identify.traits();
  var id = identify.userId();
  var email = identify.email();
  var phone = identify.phone();
  var name = identify.name() || identify.firstName();

  if (traits) api('visitor.updateCustomFields', traits);
  if (email) api('visitor.updateEmailAddress', { emailAddress: email });
  if (phone) api('visitor.updatePhoneNumber', { phoneNumber: phone });
  if (name) api('visitor.updateFullName', { fullName: name });

  // figure out best nickname
  var nickname = name || email || username || id;
  if (name && email) nickname += ' (' + email + ')';
  if (nickname) api('chat.updateVisitorNickname', { snippet: nickname });
};

/**
 * Track.
 *
 * @param {Facade} track
 */

Olark.prototype.track = function(track){
  if (!this.options.track) return;
  this.notify('visitor triggered "' + track.event() + '"');
};

/**
 * Send a notification `message` to the operator, only when a chat is active and
 * when the chat is open.
 *
 * @param {String} message
 */

Olark.prototype.notify = function(message){
  if (!this._open) return;

  // lowercase since olark does
  message = message.toLowerCase();

  api('visitor.getDetails', function(data){
    if (!data || !data.isConversing) return;
    api('chat.sendNotificationToOperator', { body: message });
  });
};

/**
 * Helper for Olark API calls.
 *
 * @param {String} action
 * @param {Object} value
 */

function api(action, value) {
  window.olark('api.' + action, value);
}

}, {"analytics.js-integration":89,"use-https":91,"next-tick":103}],
67: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('optimizely');
var callback = require('callback');
var tick = require('next-tick');
var bind = require('bind');
var each = require('each');

/**
 * Expose `Optimizely` integration.
 */

var Optimizely = module.exports = integration('Optimizely')
  .option('variations', true)
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true);

/**
 * Initialize.
 *
 * https://www.optimizely.com/docs/api#function-calls
 */

Optimizely.prototype.initialize = function(){
  if (this.options.variations) {
    var self = this;
    tick(function(){
      self.replay();
    });
  }
  this.ready();
};

/**
 * Track.
 *
 * https://www.optimizely.com/docs/api#track-event
 *
 * @param {Track} track
 */

Optimizely.prototype.track = function(track){
  var props = track.properties();
  if (props.revenue) props.revenue *= 100;
  push('trackEvent', track.event(), props);
};

/**
 * Page.
 *
 * https://www.optimizely.com/docs/api#track-event
 *
 * @param {Page} page
 */

Optimizely.prototype.page = function(page){
  var category = page.category();
  var name = page.fullName();
  var opts = this.options;

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }
};

/**
 * Replay experiment data as traits to other enabled providers.
 *
 * https://www.optimizely.com/docs/api#data-object
 */

Optimizely.prototype.replay = function(){
  if (!window.optimizely) return; // in case the snippet isnt on the page

  var data = window.optimizely.data;
  if (!data) return;

  var experiments = data.experiments;
  var map = data.state.variationNamesMap;
  var traits = {};

  each(map, function(experimentId, variation){
    var experiment = experiments[experimentId].name;
    traits['Experiment: ' + experiment] = variation;
  });

  this.analytics.identify(traits);
};

}, {"analytics.js-integration":89,"global-queue":153,"callback":94,"next-tick":103,"bind":101,"each":11}],
68: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_pq');

/**
 * Expose `PerfectAudience` integration.
 */

var PerfectAudience = module.exports = integration('Perfect Audience')
  .assumesPageview()
  .global('_pq')
  .option('siteId', '')
  .tag('<script src="//tag.perfectaudience.com/serve/{{ siteId }}.js">');

/**
 * Initialize.
 *
 * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api
 *
 * @param {Object} page
 */

PerfectAudience.prototype.initialize = function(page){
  window._pq = window._pq || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

PerfectAudience.prototype.loaded = function(){
  return !! (window._pq && window._pq.push);
};

/**
 * Track.
 *
 * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api
 *
 * @param {Track} event
 */

PerfectAudience.prototype.track = function(track){
  push('track', track.event());
};


/**
 * Viewed Product.
 *
 * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api
 *
 * @param {Track} event
 */

PerfectAudience.prototype.viewedProduct = function(track){
  var product = track.sku();
  push('track', track.event());
  push('trackProduct', product);
};

/**
 * Completed Purchase.
 *
 * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api
 *
 * @param {Track} event
 */

PerfectAudience.prototype.completedOrder = function(track){
  var total = track.total() || track.revenue();
  var orderId = track.orderId();
  var props = {};
  if (total) props.revenue = total;
  if (orderId) props.orderId = orderId;
  push('track', track.event(), props);
};

}, {"analytics.js-integration":89,"global-queue":153}],
69: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_prum');
var date = require('load-date');

/**
 * Expose `Pingdom` integration.
 */

var Pingdom = module.exports = integration('Pingdom')
  .assumesPageview()
  .global('_prum')
  .global('PRUM_EPISODES')
  .option('id', '')
  .tag('<script src="//rum-static.pingdom.net/prum.min.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Pingdom.prototype.initialize = function(page){
  window._prum = window._prum || [];
  push('id', this.options.id);
  push('mark', 'firstbyte', date.getTime());
  var self = this;
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Pingdom.prototype.loaded = function(){
  return !! (window._prum && window._prum.push !== Array.prototype.push);
};

}, {"analytics.js-integration":89,"global-queue":153,"load-date":154}],
70: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_paq');
var each = require('each');

/**
 * Expose `Piwik` integration.
 */

var Piwik = module.exports = integration('Piwik')
  .global('_paq')
  .option('url', null)
  .option('siteId', '')
  .mapping('goals')
  .tag('<script src="{{ url }}/piwik.js">');

/**
 * Initialize.
 *
 * http://piwik.org/docs/javascript-tracking/#toc-asynchronous-tracking
 */

Piwik.prototype.initialize = function(){
  window._paq = window._paq || [];
  push('setSiteId', this.options.siteId);
  push('setTrackerUrl', this.options.url + '/piwik.php');
  push('enableLinkTracking');
  this.load(this.ready);
};

/**
 * Check if Piwik is loaded
 */

Piwik.prototype.loaded = function(){
  return !! (window._paq && window._paq.push != [].push);
};

/**
 * Page
 *
 * @param {Page} page
 */

Piwik.prototype.page = function(page){
  push('trackPageView');
};

/**
 * Track.
 *
 * @param {Track} track
 */

Piwik.prototype.track = function(track){
  var goals = this.goals(track.event());
  var revenue = track.revenue() || 0;
  each(goals, function(goal){
    push('trackGoal', goal, revenue);
  });
};

}, {"analytics.js-integration":89,"global-queue":153,"each":11}],
71: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var convertDates = require('convert-dates');
var push = require('global-queue')('_lnq');
var alias = require('alias');

/**
 * Expose `Preact` integration.
 */

var Preact = module.exports = integration('Preact')
  .assumesPageview()
  .global('_lnq')
  .option('projectCode', '')
  .tag('<script src="//d2bbvl6dq48fa6.cloudfront.net/js/ln-2.4.min.js">');

/**
 * Initialize.
 *
 * http://www.preact.io/api/javascript
 *
 * @param {Object} page
 */

Preact.prototype.initialize = function(page){
  window._lnq = window._lnq || [];
  push('_setCode', this.options.projectCode);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Preact.prototype.loaded = function(){
  return !! (window._lnq && window._lnq.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Preact.prototype.identify = function(identify){
  if (!identify.userId()) return;
  var traits = identify.traits({ created: 'created_at' });
  traits = convertDates(traits, convertDate);
  push('_setPersonData', {
    name: identify.name(),
    email: identify.email(),
    uid: identify.userId(),
    properties: traits
  });
};

/**
 * Group.
 *
 * @param {String} id
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 */

Preact.prototype.group = function(group){
  if (!group.groupId()) return;
  push('_setAccount', group.traits());
};

/**
 * Track.
 *
 * @param {Track} track
 */

Preact.prototype.track = function(track){
  var props = track.properties();
  var revenue = track.revenue();
  var event = track.event();
  var special = { name: event };

  if (revenue) {
    special.revenue = revenue * 100;
    delete props.revenue;
  }

  if (props.note) {
    special.note = props.note;
    delete props.note;
  }

  push('_logEvent', special, props);
};

/**
 * Convert a `date` to a format Preact supports.
 *
 * @param {Date} date
 * @return {Number}
 */

function convertDate(date){
  return Math.floor(date / 1000);
}

}, {"analytics.js-integration":89,"convert-dates":159,"global-queue":153,"alias":158}],
72: [function(require, module, exports) {
var integration = require('analytics.js-integration');

var Publet = exports.Publet = integration('Publet Analytics')
  .global('_publet')
  .assumesPageview()
  .readyOnInitialize();

Publet.prototype.track = function (event, properties) {
  console.log('tracking publet');
  window._publet.push(['track', event, properties]);
};

}, {"analytics.js-integration":89}],
73: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_kiq');
var Facade = require('facade');
var Identify = Facade.Identify;
var bind = require('bind');
var when = require('when');

/**
 * Expose `Qualaroo` integration.
 */

var Qualaroo = module.exports = integration('Qualaroo')
  .assumesPageview()
  .global('_kiq')
  .option('customerId', '')
  .option('siteToken', '')
  .option('track', false)
  .tag('<script src="//s3.amazonaws.com/ki.js/{{ customerId }}/{{ siteToken }}.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Qualaroo.prototype.initialize = function(page){
  window._kiq = window._kiq || [];
  var loaded = bind(this, this.loaded);
  var ready = this.ready;
  this.load(function(){
    when(loaded, ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Qualaroo.prototype.loaded = function(){
  return !! (window._kiq && window._kiq.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * http://help.qualaroo.com/customer/portal/articles/731085-identify-survey-nudge-takers
 * http://help.qualaroo.com/customer/portal/articles/731091-set-additional-user-properties
 *
 * @param {Identify} identify
 */

Qualaroo.prototype.identify = function(identify){
  var traits = identify.traits();
  var id = identify.userId();
  var email = identify.email();
  if (email) id = email;
  if (id) push('identify', id);
  if (traits) push('set', traits);
};

/**
 * Track.
 *
 * @param {String} event
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 */

Qualaroo.prototype.track = function(track){
  if (!this.options.track) return;
  var event = track.event();
  var traits = {};
  traits['Triggered: ' + event] = true;
  this.identify(new Identify({ traits: traits }));
};

}, {"analytics.js-integration":89,"global-queue":153,"facade":125,"bind":101,"when":124}],
74: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var push = require('global-queue')('_qevents', { wrap: false });
var integration = require('analytics.js-integration');
var useHttps = require('use-https');

/**
 * Expose `Quantcast` integration.
 */

var Quantcast = module.exports = integration('Quantcast')
  .assumesPageview()
  .global('_qevents')
  .global('__qc')
  .option('pCode', null)
  .option('advertise', false)
  .tag('http', '<script src="http://edge.quantserve.com/quant.js">')
  .tag('https', '<script src="https://secure.quantserve.com/quant.js">');

/**
 * Initialize.
 *
 * https://www.quantcast.com/learning-center/guides/using-the-quantcast-asynchronous-tag/
 * https://www.quantcast.com/help/cross-platform-audience-measurement-guide/
 *
 * @param {Page} page
 */

Quantcast.prototype.initialize = function(page){
  window._qevents = window._qevents || [];

  var opts = this.options;
  var settings = { qacct: opts.pCode };
  var user = this.analytics.user();
  if (user.id()) settings.uid = user.id();

  if (page) {
    settings.labels = this.labels('page', page.category(), page.name());
  }

  push(settings);

  var name = useHttps() ? 'https' : 'http';
  this.load(name, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Quantcast.prototype.loaded = function(){
  return !! window.__qc;
};

/**
 * Page.
 *
 * https://cloudup.com/cBRRFAfq6mf
 *
 * @param {Page} page
 */

Quantcast.prototype.page = function(page){
  var category = page.category();
  var name = page.name();
  var settings = {
    event: 'refresh',
    labels: this.labels('page', category, name),
    qacct: this.options.pCode,
  };
  var user = this.analytics.user();
  if (user.id()) settings.uid = user.id();
  push(settings);
};

/**
 * Identify.
 *
 * https://www.quantcast.com/help/cross-platform-audience-measurement-guide/
 *
 * @param {String} id (optional)
 */

Quantcast.prototype.identify = function(identify){
  // edit the initial quantcast settings
  // TODO: could be done in a cleaner way
  var id = identify.userId();
  if (id) {
    window._qevents[0] = window._qevents[0] || {};
    window._qevents[0].uid = id;
  }
};

/**
 * Track.
 *
 * https://cloudup.com/cBRRFAfq6mf
 *
 * @param {Track} track
 */

Quantcast.prototype.track = function(track){
  var name = track.event();
  var revenue = track.revenue();
  var settings = {
    event: 'click',
    labels: this.labels('event', name),
    qacct: this.options.pCode
  };
  var user = this.analytics.user();
  if (null != revenue) settings.revenue = (revenue+''); // convert to string
  if (user.id()) settings.uid = user.id();
  push(settings);
};

/**
 * Completed Order.
 *
 * @param {Track} track
 * @api private
 */

Quantcast.prototype.completedOrder = function(track){
  var name = track.event();
  var revenue = track.total();
  var labels = this.labels('event', name);
  var category = track.category();

  if (this.options.advertise && category) {
    labels += ',' + this.labels('pcat', category);
  }

  var settings = {
    event: 'refresh', // the example Quantcast sent has completed order send refresh not click
    labels: labels,
    revenue: (revenue+''), // convert to string
    orderid: track.orderId(),
    qacct: this.options.pCode
  };
  push(settings);
};

/**
 * Generate quantcast labels.
 *
 * Example:
 *
 *    options.advertise = false;
 *    labels('event', 'my event');
 *    // => "event.my event"
 *
 *    options.advertise = true;
 *    labels('event', 'my event');
 *    // => "_fp.event.my event"
 *
 * @param {String} type
 * @param {String} ...
 * @return {String}
 * @api private
 */

Quantcast.prototype.labels = function(type){
  var args = [].slice.call(arguments, 1);
  var advertise = this.options.advertise;
  var ret = [];

  if (advertise && 'page' == type) type = 'event';
  if (advertise) type = '_fp.' + type;

  for (var i = 0; i < args.length; ++i) {
    if (null == args[i]) continue;
    var value = String(args[i]);
    ret.push(value.replace(/,/g, ';'));
  }

  ret = advertise ? ret.join(' ') : ret.join('.');
  return [type, ret].join('.');
};

}, {"global-queue":153,"analytics.js-integration":89,"use-https":91}],
75: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var extend = require('extend');
var is = require('is');

/**
 * Expose `Rollbar` integration.
 */

var RollbarIntegration = module.exports = integration('Rollbar')
  .global('Rollbar')
  .option('identify', true)
  .option('accessToken', '')
  .option('environment', 'unknown')
  .option('captureUncaught', true);

/**
 * Initialize.
 *
 * @param {Object} page
 */

RollbarIntegration.prototype.initialize = function(page){
  var _rollbarConfig = this.config = {
    accessToken: this.options.accessToken,
    captureUncaught: this.options.captureUncaught,
    payload: {
      environment: this.options.environment
    }
  };

  (function(a){function b(b){this.shimId=++g,this.notifier=null,this.parentShim=b,this.logger=function(){},a.console&&void 0 === a.console.shimId&&(this.logger=a.console.log)}function c(b,c,d){!d[4]&&a._rollbarWrappedError&&(d[4]=a._rollbarWrappedError,a._rollbarWrappedError=null),b.uncaughtError.apply(b,d),c&&c.apply(a,d)}function d(c){var d=b;return f(function(){if (this.notifier)return this.notifier[c].apply(this.notifier,arguments);var b=this,e="scope"===c;e&&(b=new d(this));var f=Array.prototype.slice.call(arguments,0),g={ shim:b, method:c, args:f, ts:new Date };return a._rollbarShimQueue.push(g),e?b:void 0})}function e(a,b){if (b.hasOwnProperty&&b.hasOwnProperty("addEventListener")){var c=b.addEventListener;b.addEventListener=function(b,d,e){c.call(this,b,a.wrap(d),e)};var d=b.removeEventListener;b.removeEventListener=function(a,b,c){d.call(this,a,b._wrapped||b,c)}}}function f(a,b){return b=b||this.logger,function(){try {return a.apply(this,arguments)} catch (c) {b("Rollbar internal error:",c)}}}var g=0;b.init=function(a,d){var g=d.globalAlias||"Rollbar";if ("object"==typeof a[g])return a[g];a._rollbarShimQueue=[],a._rollbarWrappedError=null,d=d||{};var h=new b;return f(function(){if (h.configure(d),d.captureUncaught){var b=a.onerror;a.onerror=function(){var a=Array.prototype.slice.call(arguments,0);c(h,b,a)};var f,i,j=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];for (f=0;f<j.length;++f)i=j[f],a[i]&&a[i].prototype&&e(h,a[i].prototype)}return a[g]=h,h},h.logger)()},b.prototype.loadFull=function(a,b,c,d,e){var g=f(function(){var a=b.createElement("script"),e=b.getElementsByTagName("script")[0];a.src=d.rollbarJsUrl,a.async=!c,a.onload=h,e.parentNode.insertBefore(a,e)},this.logger),h=f(function(){var b;if (void 0===a._rollbarPayloadQueue){var c,d,f,g;for (b=new Error("rollbar.js did not load");c=a._rollbarShimQueue.shift();)for (f=c.args,g=0;g<f.length;++g)if (d=f[g],"function"==typeof d){d(b);break}}e&&e(b)},this.logger);f(function(){c?g():a.addEventListener?a.addEventListener("load",g,!1):a.attachEvent("onload",g)},this.logger)()},b.prototype.wrap=function(b){if ("function"!=typeof b)return b;if (b._isWrap)return b;if (!b._wrapped){b._wrapped=function(){try {return b.apply(this,arguments)} catch (c) {throw a._rollbarWrappedError=c,c}},b._wrapped._isWrap=!0;for (var c in b)b.hasOwnProperty(c)&&(b._wrapped[c]=b[c])}return b._wrapped};for (var h="log,debug,info,warn,warning,error,critical,global,configure,scope,uncaughtError".split(","),i=0;i<h.length;++i)b.prototype[h[i]]=d(h[i]);var j="//d37gvrvc0wt4s1.cloudfront.net/js/v1.0/rollbar.min.js";_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||j,b.init(a,_rollbarConfig)})(window,document);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

RollbarIntegration.prototype.loaded = function(){
  return is.object(window.Rollbar) && null == window.Rollbar.shimId;
};

/**
 * Load.
 *
 * @param {Function} callback
 */

RollbarIntegration.prototype.load = function(callback){
  window.Rollbar.loadFull(window, document, true, this.config, callback);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */
RollbarIntegration.prototype.identify = function(identify){
  // do stuff with `id` or `traits`
  if (!this.options.identify) return;

  // Don't allow identify without a user id
  var uid = identify.userId();
  if (uid === null || uid === undefined) return;

  var rollbar = window.Rollbar;
  var person = { id: uid };
  extend(person, identify.traits());
  rollbar.configure({ payload: { person: person }});
};

}, {"analytics.js-integration":89,"extend":123,"is":92}],
76: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `SaaSquatch` integration.
 */

var SaaSquatch = module.exports = integration('SaaSquatch')
  .option('tenantAlias', '')
  .global('_sqh')
  .tag('<script src="//d2rcp9ak152ke1.cloudfront.net/assets/javascripts/squatch.min.js">');

/**
 * Initialize.
 *
 * @param {Page} page
 */

SaaSquatch.prototype.initialize = function(page){
  window._sqh = window._sqh || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

SaaSquatch.prototype.loaded = function(){
  return window._sqh && window._sqh.push != [].push;
};

/**
 * Identify.
 *
 * @param {Facade} identify
 */

SaaSquatch.prototype.identify = function(identify){
  var sqh = window._sqh;
  var accountId = identify.proxy('traits.accountId');
  var image = identify.proxy('traits.referralImage');
  var opts = identify.options(this.name);
  var id = identify.userId();
  var email = identify.email();

  if (!(id || email)) return;
  if (this.called) return;

  var init = {
    tenant_alias: this.options.tenantAlias,
    first_name: identify.firstName(),
    last_name: identify.lastName(),
    user_image: identify.avatar(),
    email: email,
    user_id: id,
  };

  if (accountId) init.account_id = accountId;
  if (opts.checksum) init.checksum = opts.checksum;
  if (image) init.fb_share_image = image;

  sqh.push(['init', init]);
  this.called = true;
  this.load();
};

}, {"analytics.js-integration":89}],
77: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var is = require('is');

/**
 * Expose `Sentry` integration.
 */

var Sentry = module.exports = integration('Sentry')
  .global('Raven')
  .option('config', '')
  .tag('<script src="//cdn.ravenjs.com/1.1.10/native/raven.min.js">');

/**
 * Initialize.
 *
 * http://raven-js.readthedocs.org/en/latest/config/index.html
 */

Sentry.prototype.initialize = function(){
  var config = this.options.config;
  var self = this;
  this.load(function(){
    // for now, raven basically requires `install` to be called
    // https://github.com/getsentry/raven-js/blob/master/src/raven.js#L113
    window.Raven.config(config).install();
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Sentry.prototype.loaded = function(){
  return is.object(window.Raven);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Sentry.prototype.identify = function(identify){
  window.Raven.setUser(identify.traits());
};

}, {"analytics.js-integration":89,"is":92}],
78: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var is = require('is');

/**
 * Expose `SnapEngage` integration.
 */

var SnapEngage = module.exports = integration('SnapEngage')
  .assumesPageview()
  .global('SnapABug')
  .option('apiKey', '')
  .tag('<script src="//commondatastorage.googleapis.com/code.snapengage.com/js/{{ apiKey }}.js">');

/**
 * Initialize.
 *
 * http://help.snapengage.com/installation-guide-getting-started-in-a-snap/
 *
 * @param {Object} page
 */

SnapEngage.prototype.initialize = function(page){
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

SnapEngage.prototype.loaded = function(){
  return is.object(window.SnapABug);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

SnapEngage.prototype.identify = function(identify){
  var email = identify.email();
  if (!email) return;
  window.SnapABug.setUserEmail(email);
};

}, {"analytics.js-integration":89,"is":92}],
79: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var bind = require('bind');
var when = require('when');

/**
 * Expose `Spinnakr` integration.
 */

var Spinnakr = module.exports = integration('Spinnakr')
  .assumesPageview()
  .global('_spinnakr_site_id')
  .global('_spinnakr')
  .option('siteId', '')
  .tag('<script src="//d3ojzyhbolvoi5.cloudfront.net/js/so.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Spinnakr.prototype.initialize = function(page){
  window._spinnakr_site_id = this.options.siteId;
  var loaded = bind(this, this.loaded);
  var ready = this.ready;
  this.load(function(){
    when(loaded, ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Spinnakr.prototype.loaded = function(){
  return !! window._spinnakr;
};

}, {"analytics.js-integration":89,"bind":101,"when":124}],
80: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var slug = require('slug');
var push = require('global-queue')('_tsq');

/**
 * Expose `Tapstream` integration.
 */

var Tapstream = module.exports = integration('Tapstream')
  .assumesPageview()
  .global('_tsq')
  .option('accountName', '')
  .option('trackAllPages', true)
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .tag('<script src="//cdn.tapstream.com/static/js/tapstream.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Tapstream.prototype.initialize = function(page){
  window._tsq = window._tsq || [];
  push('setAccountName', this.options.accountName);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Tapstream.prototype.loaded = function(){
  return !! (window._tsq && window._tsq.push !== Array.prototype.push);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Tapstream.prototype.page = function(page){
  var category = page.category();
  var opts = this.options;
  var name = page.fullName();

  // all pages
  if (opts.trackAllPages) {
    this.track(page.track());
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }
};

/**
 * Track.
 *
 * @param {Track} track
 */

Tapstream.prototype.track = function(track){
  var props = track.properties();
  push('fireHit', slug(track.event()), [props.url]); // needs events as slugs
};

}, {"analytics.js-integration":89,"slug":99,"global-queue":153}],
81: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var alias = require('alias');
var clone = require('clone');

/**
 * Expose `Trakio` integration.
 */

var Trakio = module.exports = integration('trak.io')
  .assumesPageview()
  .global('trak')
  .option('token', '')
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .tag('<script src="//d29p64779x43zo.cloudfront.net/v1/trak.io.min.js">');

/**
 * Options aliases.
 */

var optionsAliases = {
  initialPageview: 'auto_track_page_view'
};

/**
 * Initialize.
 *
 * https://docs.trak.io
 *
 * @param {Object} page
 */

Trakio.prototype.initialize = function(page){
  var options = this.options;
  window.trak = window.trak || [];
  window.trak.io = window.trak.io || {};
  window.trak.push = window.trak.push || function(){};
  window.trak.io.load = window.trak.io.load || function(e){var r = function(e){return function(){window.trak.push([e].concat(Array.prototype.slice.call(arguments,0))); }; } ,i=["initialize","identify","track","alias","channel","source","host","protocol","page_view"]; for (var s=0;s<i.length;s++) window.trak.io[i[s]]=r(i[s]); window.trak.io.initialize.apply(window.trak.io,arguments); };
  window.trak.io.load(options.token, alias(options, optionsAliases));
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Trakio.prototype.loaded = function(){
  return !! (window.trak && window.trak.loaded);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Trakio.prototype.page = function(page){
  var category = page.category();
  var props = page.properties();
  var name = page.fullName();

  window.trak.io.page_view(props.path, name || props.title);

  // named pages
  if (name && this.options.trackNamedPages) {
    this.track(page.track(name));
  }

  // categorized pages
  if (category && this.options.trackCategorizedPages) {
    this.track(page.track(category));
  }
};

/**
 * Trait aliases.
 *
 * http://docs.trak.io/properties.html#special
 */

var traitAliases = {
  avatar: 'avatar_url',
  firstName: 'first_name',
  lastName: 'last_name'
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Trakio.prototype.identify = function(identify){
  var traits = identify.traits(traitAliases);
  var id = identify.userId();

  if (id) {
    window.trak.io.identify(id, traits);
  } else {
    window.trak.io.identify(traits);
  }
};

/**
 * Group.
 *
 * @param {String} id (optional)
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 *
 * TODO: add group
 * TODO: add `trait.company/organization` from trak.io docs http://docs.trak.io/properties.html#special
 */

/**
 * Track.
 *
 * @param {Track} track
 */

Trakio.prototype.track = function(track){
  window.trak.io.track(track.event(), track.properties());
};

/**
 * Alias.
 *
 * @param {Alias} alias
 */

Trakio.prototype.alias = function(alias){
  if (!window.trak.io.distinct_id) return;
  var from = alias.from();
  var to = alias.to();

  if (to === window.trak.io.distinct_id()) return;

  if (from) {
    window.trak.io.alias(from, to);
  } else {
    window.trak.io.alias(to);
  }
};

}, {"analytics.js-integration":89,"alias":158,"clone":157}],
82: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var each = require('each');

/**
 * HOP.
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Expose `TwitterAds`.
 */

var TwitterAds = module.exports = integration('Twitter Ads')
  .option('page', '')
  .tag('<img src="//analytics.twitter.com/i/adsct?txn_id={{ pixelId }}&p_id=Twitter"/>')
  .mapping('events');

/**
 * Initialize.
 *
 * @param {Object} page
 */

TwitterAds.prototype.initialize = function(){
  this.ready();
};

/**
 * Page.
 *
 * @param {Page} page
 */

TwitterAds.prototype.page = function(page){
  if (this.options.page) {
    this.load({ pixelId: this.options.page });
  }
};

/**
 * Track.
 *
 * @param {Track} track
 */

TwitterAds.prototype.track = function(track){
  var events = this.events(track.event());
  var self = this;
  each(events, function(pixelId){
    self.load({ pixelId: pixelId });
  });
};

}, {"analytics.js-integration":89,"each":11}],
83: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('UserVoice');
var convertDates = require('convert-dates');
var unix = require('to-unix-timestamp');
var alias = require('alias');
var clone = require('clone');

/**
 * Expose `UserVoice` integration.
 */

var UserVoice = module.exports = integration('UserVoice')
  .assumesPageview()
  .global('UserVoice')
  .global('showClassicWidget')
  .option('apiKey', '')
  .option('classic', false)
  .option('forumId', null)
  .option('showWidget', true)
  .option('mode', 'contact')
  .option('accentColor', '#448dd6')
  .option('smartvote', true)
  .option('trigger', null)
  .option('triggerPosition', 'bottom-right')
  .option('triggerColor', '#ffffff')
  .option('triggerBackgroundColor', 'rgba(46, 49, 51, 0.6)')
  // BACKWARDS COMPATIBILITY: classic options
  .option('classicMode', 'full')
  .option('primaryColor', '#cc6d00')
  .option('linkColor', '#007dbf')
  .option('defaultMode', 'support')
  .option('tabLabel', 'Feedback & Support')
  .option('tabColor', '#cc6d00')
  .option('tabPosition', 'middle-right')
  .option('tabInverted', false)
  .tag('<script src="//widget.uservoice.com/{{ apiKey }}.js">');

/**
 * When in "classic" mode, on `construct` swap all of the method to point to
 * their classic counterparts.
 */

UserVoice.on('construct', function(integration){
  if (!integration.options.classic) return;
  integration.group = undefined;
  integration.identify = integration.identifyClassic;
  integration.initialize = integration.initializeClassic;
});

/**
 * Initialize.
 *
 * @param {Object} page
 */

UserVoice.prototype.initialize = function(page){
  var options = this.options;
  var opts = formatOptions(options);
  push('set', opts);
  push('autoprompt', {});
  if (options.showWidget) {
    options.trigger
      ? push('addTrigger', options.trigger, opts)
      : push('addTrigger', opts);
  }

  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

UserVoice.prototype.loaded = function(){
  return !! (window.UserVoice && window.UserVoice.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

UserVoice.prototype.identify = function(identify){
  var traits = identify.traits({ created: 'created_at' });
  traits = convertDates(traits, unix);
  push('identify', traits);
};

/**
 * Group.
 *
 * @param {Group} group
 */

UserVoice.prototype.group = function(group){
  var traits = group.traits({ created: 'created_at' });
  traits = convertDates(traits, unix);
  push('identify', { account: traits });
};

/**
 * Initialize (classic).
 *
 * @param {Object} options
 * @param {Function} ready
 */

UserVoice.prototype.initializeClassic = function(){
  var options = this.options;
  window.showClassicWidget = showClassicWidget; // part of public api
  if (options.showWidget) showClassicWidget('showTab', formatClassicOptions(options));
  this.load(this.ready);
};

/**
 * Identify (classic).
 *
 * @param {Identify} identify
 */

UserVoice.prototype.identifyClassic = function(identify){
  push('setCustomFields', identify.traits());
};

/**
 * Format the options for UserVoice.
 *
 * @param {Object} options
 * @return {Object}
 */

function formatOptions(options){
  return alias(options, {
    forumId: 'forum_id',
    accentColor: 'accent_color',
    smartvote: 'smartvote_enabled',
    triggerColor: 'trigger_color',
    triggerBackgroundColor: 'trigger_background_color',
    triggerPosition: 'trigger_position'
  });
}

/**
 * Format the classic options for UserVoice.
 *
 * @param {Object} options
 * @return {Object}
 */

function formatClassicOptions(options){
  return alias(options, {
    forumId: 'forum_id',
    classicMode: 'mode',
    primaryColor: 'primary_color',
    tabPosition: 'tab_position',
    tabColor: 'tab_color',
    linkColor: 'link_color',
    defaultMode: 'default_mode',
    tabLabel: 'tab_label',
    tabInverted: 'tab_inverted'
  });
}

/**
 * Show the classic version of the UserVoice widget. This method is usually part
 * of UserVoice classic's public API.
 *
 * @param {String} type ('showTab' or 'showLightbox')
 * @param {Object} options (optional)
 */

function showClassicWidget(type, options){
  type = type || 'showLightbox';
  push(type, 'classic_widget', options);
}

}, {"analytics.js-integration":89,"global-queue":153,"convert-dates":159,"to-unix-timestamp":182,"alias":158,"clone":157}],
182: [function(require, module, exports) {

/**
 * Expose `toUnixTimestamp`.
 */

module.exports = toUnixTimestamp;


/**
 * Convert a `date` into a Unix timestamp.
 *
 * @param {Date}
 * @return {Number}
 */

function toUnixTimestamp (date) {
  return Math.floor(date.getTime() / 1000);
}
}, {}],
84: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_veroq');
var cookie = require('component/cookie');

/**
 * Expose `Vero` integration.
 */

var Vero = module.exports = integration('Vero')
  .global('_veroq')
  .option('apiKey', '')
  .tag('<script src="//d3qxef4rp70elm.cloudfront.net/m.js">');

/**
 * Initialize.
 *
 * https://github.com/getvero/vero-api/blob/master/sections/js.md
 *
 * @param {Object} page
 */

Vero.prototype.initialize = function(page){
  // clear default cookie so vero parses correctly.
  // this is for the tests.
  // basically, they have window.addEventListener('unload')
  // which then saves their "command_store", which is an array.
  // so we just want to create that initially so we can reload the tests.
  if (!cookie('__veroc4')) cookie('__veroc4', '[]');
  push('init', { api_key: this.options.apiKey });
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Vero.prototype.loaded = function(){
  return !! (window._veroq && window._veroq.push !== Array.prototype.push);
};

/**
 * Page.
 *
 * https://www.getvero.com/knowledge-base#/questions/71768-Does-Vero-track-pageviews
 *
 * @param {Page} page
 */

Vero.prototype.page = function(page){
  push('trackPageview');
};

/**
 * Identify.
 *
 * https://github.com/getvero/vero-api/blob/master/sections/js.md#user-identification
 *
 * @param {Identify} identify
 */

Vero.prototype.identify = function(identify){
  var traits = identify.traits();
  var email = identify.email();
  var id = identify.userId();
  if (!id || !email) return; // both required
  push('user', traits);
};

/**
 * Track.
 *
 * https://github.com/getvero/vero-api/blob/master/sections/js.md#tracking-events
 *
 * @param {Track} track
 */

Vero.prototype.track = function(track){
  push('track', track.event(), track.properties());
};

}, {"analytics.js-integration":89,"global-queue":153,"component/cookie":183}],
183: [function(require, module, exports) {
/**
 * Encode.
 */

var encode = encodeURIComponent;

/**
 * Decode.
 */

var decode = decodeURIComponent;

/**
 * Set or get cookie `name` with `value` and `options` object.
 *
 * @param {String} name
 * @param {String} value
 * @param {Object} options
 * @return {Mixed}
 * @api public
 */

module.exports = function(name, value, options){
  switch (arguments.length) {
    case 3:
    case 2:
      return set(name, value, options);
    case 1:
      return get(name);
    default:
      return all();
  }
};

/**
 * Set cookie `name` to `value`.
 *
 * @param {String} name
 * @param {String} value
 * @param {Object} options
 * @api private
 */

function set(name, value, options) {
  options = options || {};
  var str = encode(name) + '=' + encode(value);

  if (null == value) options.maxage = -1;

  if (options.maxage) {
    options.expires = new Date(+new Date + options.maxage);
  }

  if (options.path) str += '; path=' + options.path;
  if (options.domain) str += '; domain=' + options.domain;
  if (options.expires) str += '; expires=' + options.expires.toGMTString();
  if (options.secure) str += '; secure';

  document.cookie = str;
}

/**
 * Return all cookies.
 *
 * @return {Object}
 * @api private
 */

function all() {
  return parse(document.cookie);
}

/**
 * Get cookie `name`.
 *
 * @param {String} name
 * @return {String}
 * @api private
 */

function get(name) {
  return all()[name];
}

/**
 * Parse cookie `str`.
 *
 * @param {String} str
 * @return {Object}
 * @api private
 */

function parse(str) {
  var obj = {};
  var pairs = str.split(/ *; */);
  var pair;
  if ('' == pairs[0]) return obj;
  for (var i = 0; i < pairs.length; ++i) {
    pair = pairs[i].split('=');
    obj[decode(pair[0])] = decode(pair[1]);
  }
  return obj;
}

}, {}],
85: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var tick = require('next-tick');
var each = require('each');

/**
 * Expose `VWO` integration.
 */

var VWO = module.exports = integration('Visual Website Optimizer')
  .option('replay', true);

/**
 * Initialize.
 *
 * http://v2.visualwebsiteoptimizer.com/tools/get_tracking_code.php
 */

VWO.prototype.initialize = function(){
  if (this.options.replay) this.replay();
  this.ready();
};

/**
 * Replay the experiments the user has seen as traits to all other integrations.
 * Wait for the next tick to replay so that the `analytics` object and all of
 * the integrations are fully initialized.
 */

VWO.prototype.replay = function(){
  var analytics = this.analytics;
  tick(function(){
    experiments(function(err, traits){
      if (traits) analytics.identify(traits);
    });
  });
};

/**
 * Get dictionary of experiment keys and variations.
 *
 * http://visualwebsiteoptimizer.com/knowledge/integration-of-vwo-with-kissmetrics/
 *
 * @param {Function} fn
 * @return {Object}
 */

function experiments(fn){
  enqueue(function(){
    var data = {};
    var ids = window._vwo_exp_ids;
    if (!ids) return fn();
    each(ids, function(id){
      var name = variation(id);
      if (name) data['Experiment: ' + id] = name;
    });
    fn(null, data);
  });
}

/**
 * Add a `fn` to the VWO queue, creating one if it doesn't exist.
 *
 * @param {Function} fn
 */

function enqueue(fn){
  window._vis_opt_queue = window._vis_opt_queue || [];
  window._vis_opt_queue.push(fn);
}

/**
 * Get the chosen variation's name from an experiment `id`.
 *
 * http://visualwebsiteoptimizer.com/knowledge/integration-of-vwo-with-kissmetrics/
 *
 * @param {String} id
 * @return {String}
 */

function variation(id){
  var experiments = window._vwo_exp;
  if (!experiments) return null;
  var experiment = experiments[id];
  var variationId = experiment.combination_chosen;
  return variationId ? experiment.comb_n[variationId] : null;
}

}, {"analytics.js-integration":89,"next-tick":103,"each":11}],
86: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var useHttps = require('use-https');

/**
 * Expose `WebEngage` integration.
 */

var WebEngage = module.exports = integration('WebEngage')
  .assumesPageview()
  .global('_weq')
  .global('webengage')
  .option('widgetVersion', '4.0')
  .option('licenseCode', '')
  .tag('http', '<script src="http://cdn.widgets.webengage.com/js/widget/webengage-min-v-4.0.js">')
  .tag('https', '<script src="https://ssl.widgets.webengage.com/js/widget/webengage-min-v-4.0.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

WebEngage.prototype.initialize = function(page){
  var _weq = window._weq = window._weq || {};
  _weq['webengage.licenseCode'] = this.options.licenseCode;
  _weq['webengage.widgetVersion'] = this.options.widgetVersion;
  var name = useHttps() ? 'https' : 'http';
  this.load(name, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

WebEngage.prototype.loaded = function(){
  return !! window.webengage;
};

}, {"analytics.js-integration":89,"use-https":91}],
87: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var snake = require('to-snake-case');
var isEmail = require('is-email');
var extend = require('extend');
var each = require('each');
var type = require('type');

/**
 * Expose `Woopra` integration.
 */

var Woopra = module.exports = integration('Woopra')
  .global('woopra')
  .option('domain', '')
  .option('cookieName', 'wooTracker')
  .option('cookieDomain', null)
  .option('cookiePath', '/')
  .option('ping', true)
  .option('pingInterval', 12000)
  .option('idleTimeout', 300000)
  .option('downloadTracking', true)
  .option('outgoingTracking', true)
  .option('outgoingIgnoreSubdomain', true)
  .option('downloadPause', 200)
  .option('outgoingPause', 400)
  .option('ignoreQueryUrl', true)
  .option('hideCampaign', false)
  .tag('<script src="//static.woopra.com/js/w.js">');

/**
 * Initialize.
 *
 * http://www.woopra.com/docs/setup/javascript-tracking/
 *
 * @param {Object} page
 */

Woopra.prototype.initialize = function(page){
  (function () {var i, s, z, w = window, d = document, a = arguments, q = 'script', f = ['config', 'track', 'identify', 'visit', 'push', 'call'], c = function () {var i, self = this; self._e = []; for (i = 0; i < f.length; i++) {(function (f) {self[f] = function () {self._e.push([f].concat(Array.prototype.slice.call(arguments, 0))); return self; }; })(f[i]); } }; w._w = w._w || {}; for (i = 0; i < a.length; i++) { w._w[a[i]] = w[a[i]] = w[a[i]] || new c(); } })('woopra');
  this.load(this.ready);
  each(this.options, function(key, value){
    key = snake(key);
    if (null == value) return;
    if ('' === value) return;
    window.woopra.config(key, value);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Woopra.prototype.loaded = function(){
  return !! (window.woopra && window.woopra.loaded);
};

/**
 * Page.
 *
 * @param {String} category (optional)
 */

Woopra.prototype.page = function(page){
  var props = page.properties();
  var name = page.fullName();
  if (name) props.title = name;
  window.woopra.track('pv', props);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Woopra.prototype.identify = function(identify){
  var traits = identify.traits();
  if (identify.name()) traits.name = identify.name();
  window.woopra.identify(traits).push(); // `push` sends it off async
};

/**
 * Track.
 *
 * @param {Track} track
 */

Woopra.prototype.track = function(track){
  window.woopra.track(track.event(), track.properties());
};

}, {"analytics.js-integration":89,"to-snake-case":90,"is-email":148,"extend":123,"each":11,"type":13}],
88: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var tick = require('next-tick');
var bind = require('bind');
var when = require('when');

/**
 * Expose `Yandex` integration.
 */

var Yandex = module.exports = integration('Yandex Metrica')
  .assumesPageview()
  .global('yandex_metrika_callbacks')
  .global('Ya')
  .option('counterId', null)
  .option('clickmap', false)
  .option('webvisor', false)
  .tag('<script src="//mc.yandex.ru/metrika/watch.js">');

/**
 * Initialize.
 *
 * http://api.yandex.com/metrika/
 * https://metrica.yandex.com/22522351?step=2#tab=code
 *
 * @param {Object} page
 */

Yandex.prototype.initialize = function(page){
  var id = this.options.counterId;
  var clickmap = this.options.clickmap;
  var webvisor = this.options.webvisor;

  push(function(){
    window['yaCounter' + id] = new window.Ya.Metrika({
      id: id,
      clickmap: clickmap,
      webvisor: webvisor
    });
  });

  var loaded = bind(this, this.loaded);
  var ready = this.ready;
  this.load(function(){
    when(loaded, function(){
      tick(ready);
    });
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Yandex.prototype.loaded = function(){
  return !! (window.Ya && window.Ya.Metrika);
};

/**
 * Push a new callback on the global Yandex queue.
 *
 * @param {Function} callback
 */

function push(callback){
  window.yandex_metrika_callbacks = window.yandex_metrika_callbacks || [];
  window.yandex_metrika_callbacks.push(callback);
}

}, {"analytics.js-integration":89,"next-tick":103,"bind":101,"when":124}],
4: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var clearAjax = require('clear-ajax');
var clearTimeouts = require('clear-timeouts');
var clearIntervals = require('clear-intervals');
var clearListeners = require('clear-listeners');
var clearGlobals = require('clear-globals');
var clearImages = require('clear-images');
var clearScripts = require('clear-scripts');
var clearCookies = require('clear-cookies');

/**
 * Reset initial state.
 *
 * @api public
 */

module.exports = function(){
  clearAjax();
  clearTimeouts();
  clearIntervals();
  clearListeners();
  clearGlobals();
  clearImages();
  clearScripts();
  clearCookies();
};
}, {"clear-ajax":184,"clear-timeouts":185,"clear-intervals":186,"clear-listeners":187,"clear-globals":188,"clear-images":189,"clear-scripts":190,"clear-cookies":191}],
184: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var each = require('each');

/**
 * Original send method.
 */

var send = XMLHttpRequest.prototype.send;

/**
 * Requests made.
 */

var requests = [];

/**
 * Clear all active AJAX requests.
 * 
 * @api public
 */

exports = module.exports = function(){
  each(requests, function(request){
    try {
      request.onload = noop;
      request.onerror = noop;
      request.onabort = noop;
      request.abort();
    } catch (e) {}
  });
  requests.length = [];
};

/**
 * Capture AJAX requests.
 *
 * @api public
 */

exports.bind = function(){
  XMLHttpRequest.prototype.send = function(){
    requests.push(this);
    return send.apply(this, arguments);
  };
};

/**
 * Reset `XMLHttpRequest` back to normal.
 *
 * @api public
 */

exports.unbind = function(){
  XMLHttpRequest.prototype.send = send;
};

/**
 * Automatically bind.
 */

exports.bind();

/**
 * Noop.
 *
 * @api private
 */

function noop(){}
}, {"each":111}],
185: [function(require, module, exports) {

/**
 * Previous
 */

var prev = 0;

/**
 * Noop
 */

var noop = Function.prototype;

/**
 * Clear all timeouts
 *
 * @api public
 */

module.exports = function(){
  var tmp, i;
  tmp = i = setTimeout(noop);
  while (prev < i) clearTimeout(i--);
  prev = tmp;
};

}, {}],
186: [function(require, module, exports) {

/**
 * Prev
 */

var prev = 0;

/**
 * Noop
 */

var noop = Function.prototype;

/**
 * Clear all intervals.
 *
 * @api public
 */

module.exports = function(){
  var tmp, i;
  tmp = i = setInterval(noop);
  while (prev < i) clearInterval(i--);
  prev = tmp;
};

}, {}],
187: [function(require, module, exports) {

/**
 * Window event listeners.
 */

var listeners = [];

/**
 * Original window functions.
 */

var on = window.addEventListener ? 'addEventListener' : 'attachEvent';
var off = window.removeEventListener ? 'removeEventListener' : 'detachEvent';
var onFn = window[on];
var offFn = window[off];

/**
 * Clear event listeners.
 *
 * @api public
 */

exports = module.exports = function(){
  var i = listeners.length;
  while (i--) {
    window[on].apply
      ? window[on].apply(window, listeners[i])
      : window[on](listeners[i][0], listeners[i][1]); // IE
  }
  listeners.length = 0;
};

/**
 * Wrap window.addEventListener and window.removeEventListener
 * to be able to cleanup all event listeners for testing.
 *
 * @api public
 */

exports.bind = function(){
  window[on] = function(){
    listeners.push(arguments);
    return onFn.apply
      ? onFn.apply(window, arguments)
      : onFn(arguments[0], arguments[1]); // IE
  };

  window[off] = function(name, listener, useCapture){
    for (var i = 0, n = listeners.length; i < n; i++) {
      if (name !== listeners[i][0]) continue;
      if (listener !== listeners[i][1]) continue;
      if (arguments.length > 2 && useCapture !== listeners[i][2]) continue;
      listeners.splice(i, 1);
      break;
    }
    return offFn.apply
      ? offFn.apply(window, arguments)
      : offFn(arguments[0], arguments[1]); // IE
  };
};


/**
 * Reset window back to normal.
 *
 * @api public
 */

exports.unbind = function(){
  listeners.length = 0;
  window[on] = onFn;
  window[off] = offFn;
};

/**
 * Automatically override.
 */

exports.bind();
}, {}],
188: [function(require, module, exports) {

/**
 * Objects we want to keep track of initial properties for.
 */

var globals = {
  'window': {},
  'document': {},
  'XMLHttpRequest': {}
};

/**
 * Capture initial state of `window`.
 *
 * Note, `window.addEventListener` is overritten already,
 * from `clearListeners`. But this is desired behavior.
 */

globals.window.removeEventListener = window.removeEventListener;
globals.window.addEventListener = window.addEventListener;
globals.window.setTimeout = window.setTimeout;
globals.window.setInterval = window.setInterval;
globals.window.onerror = null;
globals.window.onload = null;

/**
 * Capture initial state of `document`.
 */

globals.document.write = document.write;
globals.document.appendChild = document.appendChild;
globals.document.removeChild = document.removeChild;

/**
 * Capture the initial state of `XMLHttpRequest`.
 */

if ('undefined' != typeof XMLHttpRequest) {
  globals.XMLHttpRequest.open = XMLHttpRequest.prototype.open;
}

/**
 * Reset initial state.
 *
 * @api public
 */

module.exports = function(){
  copy(globals.window, window);
  copy(globals.XMLHttpRequest, XMLHttpRequest.prototype);
  copy(globals.document, document);
};

/**
 * Reset properties on object.
 *
 * @param {Object} source
 * @param {Object} target
 * @api private
 */

function copy(source, target){
  for (var name in source) {
    if (source.hasOwnProperty(name)) {
      target[name] = source[name];
    }
  }
}
}, {}],
189: [function(require, module, exports) {

/**
 * Created images.
 */

var images = [];

/**
 * Keep track of original `Image`.
 */

var Original = window.Image;

/**
 * Image override that keeps track of images.
 *
 * Careful though, `img instance Override` isn't true.
 *
 * @api private
 */

function Override() {
  var img = new Original;
  images.push(img);
  return img;
}

/**
 * Clear `onload` for each image.
 *
 * @api public
 */

exports = module.exports = function(){
  var noop = function(){};
  for (var i = 0, n = images.length; i < n; i++) {
    images[i].onload = noop;
  }
  images.length = 0;
};

/**
 * Override `window.Image` to keep track of images,
 * so we can clear `onload`.
 *
 * @api public
 */

exports.bind = function(){
  window.Image = Override;
};

/**
 * Set `window.Image` back to normal.
 *
 * @api public
 */

exports.unbind = function(){
  window.Image = Original;
  images.length = 0;
};

/**
 * Automatically override.
 */

exports.bind();
}, {}],
190: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var indexOf = require('indexof');
var query = require('query');
var each = require('each');

/**
 * Initial scripts.
 */

var initialScripts = [];

/**
 * Remove all scripts not initially present.
 *
 * @param {Function} [match] Only remove ones that return true
 * @api public
 */

exports = module.exports = function(match){
  match = match || saucelabs;
  var finalScripts = query.all('script');
  each(finalScripts, function(script){
    if (-1 != indexOf(initialScripts, script)) return;
    if (!script.parentNode) return;
    if (!match(script)) return;
    script.parentNode.removeChild(script);
  });
};

/**
 * Capture initial scripts, the ones not to remove.
 *
 * @api public
 */

exports.bind = function(scripts){
  initialScripts = scripts || query.all('script');
};

/**
 * Default matching function, ignores saucelabs jsonp scripts.
 *
 * @param {Script} script
 * @api private
 * @return {Boolean}
 */

function saucelabs(script) {
  return !script.src.match(/localtunnel\.me\/saucelabs/);
};

/**
 * Automatically bind.
 */

exports.bind();
}, {"indexof":114,"query":192,"each":111}],
192: [function(require, module, exports) {
function one(selector, el) {
  return el.querySelector(selector);
}

exports = module.exports = function(selector, el){
  el = el || document;
  return one(selector, el);
};

exports.all = function(selector, el){
  el = el || document;
  return el.querySelectorAll(selector);
};

exports.engine = function(obj){
  if (!obj.one) throw new Error('.one callback required');
  if (!obj.all) throw new Error('.all callback required');
  one = obj.one;
  exports.all = obj.all;
  return exports;
};

}, {}],
191: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var cookie = require('cookie');

/**
 * Clear cookies.
 */

module.exports = function(){
  var cookies = cookie();
  for (var name in cookies) {
    cookie(name, '', { path: '/' });
  }
};
}, {"cookie":183}],
6: [function(require, module, exports) {

/**
 * DON'T EDIT THIS FILE. It's automatically generated!
 */

require('../lib/adroll/test.js');
require('../lib/adwords/test.js');
require('../lib/alexa/test.js');
require('../lib/amplitude/test.js');
require('../lib/appcues/test.js');
require('../lib/awesm/test.js');
require('../lib/awesomatic/test.js');
require('../lib/bing-ads/test.js');
require('../lib/bronto/test.js');
require('../lib/bugherd/test.js');
require('../lib/bugsnag/test.js');
require('../lib/chartbeat/test.js');
require('../lib/churnbee/test.js');
require('../lib/clicktale/test.js');
require('../lib/clicky/test.js');
require('../lib/comscore/test.js');
require('../lib/crazy-egg/test.js');
require('../lib/curebit/test.js');
require('../lib/customerio/test.js');
require('../lib/drip/test.js');
require('../lib/errorception/test.js');
require('../lib/evergage/test.js');
require('../lib/facebook-conversion-tracking/test.js');
require('../lib/foxmetrics/test.js');
require('../lib/frontleaf/test.js');
require('../lib/fullstory/test.js');
require('../lib/gauges/test.js');
require('../lib/get-satisfaction/test.js');
require('../lib/google-analytics/test.js');
require('../lib/google-tag-manager/test.js');
require('../lib/gosquared/test.js');
require('../lib/heap/test.js');
require('../lib/hellobar/test.js');
require('../lib/hittail/test.js');
require('../lib/hubspot/test.js');
require('../lib/improvely/test.js');
require('../lib/insidevault/test.js');
require('../lib/inspectlet/test.js');
require('../lib/intercom/test.js');
require('../lib/keen-io/test.js');
require('../lib/kenshoo/test.js');
require('../lib/kissmetrics/test.js');
require('../lib/klaviyo/test.js');
require('../lib/leadlander/test.js');
require('../lib/livechat/test.js');
require('../lib/lucky-orange/test.js');
require('../lib/lytics/test.js');
require('../lib/mixpanel/test.js');
require('../lib/mojn/test.js');
require('../lib/mouseflow/test.js');
require('../lib/mousestats/test.js');
require('../lib/navilytics/test.js');
require('../lib/olark/test.js');
require('../lib/optimizely/test.js');
require('../lib/perfect-audience/test.js');
require('../lib/pingdom/test.js');
require('../lib/piwik/test.js');
require('../lib/preact/test.js');
require('../lib/qualaroo/test.js');
require('../lib/quantcast/test.js');
require('../lib/rollbar/test.js');
require('../lib/saasquatch/test.js');
require('../lib/sentry/test.js');
require('../lib/snapengage/test.js');
require('../lib/spinnakr/test.js');
require('../lib/tapstream/test.js');
require('../lib/trakio/test.js');
require('../lib/twitter-ads/test.js');
require('../lib/uservoice/test.js');
require('../lib/vero/test.js');
require('../lib/visual-website-optimizer/test.js');
require('../lib/webengage/test.js');
require('../lib/woopra/test.js');
require('../lib/yandex-metrica/test.js');

}, {"../lib/adroll/test.js":193,"../lib/adwords/test.js":194,"../lib/alexa/test.js":195,"../lib/amplitude/test.js":196,"../lib/appcues/test.js":197,"../lib/awesm/test.js":198,"../lib/awesomatic/test.js":199,"../lib/bing-ads/test.js":200,"../lib/bronto/test.js":201,"../lib/bugherd/test.js":202,"../lib/bugsnag/test.js":203,"../lib/chartbeat/test.js":204,"../lib/churnbee/test.js":205,"../lib/clicktale/test.js":206,"../lib/clicky/test.js":207,"../lib/comscore/test.js":208,"../lib/crazy-egg/test.js":209,"../lib/curebit/test.js":210,"../lib/customerio/test.js":211,"../lib/drip/test.js":212,"../lib/errorception/test.js":213,"../lib/evergage/test.js":214,"../lib/facebook-conversion-tracking/test.js":215,"../lib/foxmetrics/test.js":216,"../lib/frontleaf/test.js":217,"../lib/fullstory/test.js":218,"../lib/gauges/test.js":219,"../lib/get-satisfaction/test.js":220,"../lib/google-analytics/test.js":221,"../lib/google-tag-manager/test.js":222,"../lib/gosquared/test.js":223,"../lib/heap/test.js":224,"../lib/hellobar/test.js":225,"../lib/hittail/test.js":226,"../lib/hubspot/test.js":227,"../lib/improvely/test.js":228,"../lib/insidevault/test.js":229,"../lib/inspectlet/test.js":230,"../lib/intercom/test.js":231,"../lib/keen-io/test.js":232,"../lib/kenshoo/test.js":233,"../lib/kissmetrics/test.js":234,"../lib/klaviyo/test.js":235,"../lib/leadlander/test.js":236,"../lib/livechat/test.js":237,"../lib/lucky-orange/test.js":238,"../lib/lytics/test.js":239,"../lib/mixpanel/test.js":240,"../lib/mojn/test.js":241,"../lib/mouseflow/test.js":242,"../lib/mousestats/test.js":243,"../lib/navilytics/test.js":244,"../lib/olark/test.js":245,"../lib/optimizely/test.js":246,"../lib/perfect-audience/test.js":247,"../lib/pingdom/test.js":248,"../lib/piwik/test.js":249,"../lib/preact/test.js":250,"../lib/qualaroo/test.js":251,"../lib/quantcast/test.js":252,"../lib/rollbar/test.js":253,"../lib/saasquatch/test.js":254,"../lib/sentry/test.js":255,"../lib/snapengage/test.js":256,"../lib/spinnakr/test.js":257,"../lib/tapstream/test.js":258,"../lib/trakio/test.js":259,"../lib/twitter-ads/test.js":260,"../lib/uservoice/test.js":261,"../lib/vero/test.js":262,"../lib/visual-website-optimizer/test.js":263,"../lib/webengage/test.js":264,"../lib/woopra/test.js":265,"../lib/yandex-metrica/test.js":266}],
193: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('AdRoll', function(){
  var AdRoll = plugin;
  var adroll;
  var analytics;
  var options = {
    advId: 'LYFRCUIPPZCCTOBGRH7G32',
    pixId: 'V7TLXL5WWBA5NOU5MOJQW4'
  };

  beforeEach(function(){
    analytics = new Analytics;
    adroll = new AdRoll(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(adroll);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    adroll.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(AdRoll, integration('AdRoll')
      .assumesPageview()
      .global('__adroll_loaded')
      .global('adroll_adv_id')
      .global('adroll_pix_id')
      .global('adroll_custom_data')
      .option('advId', '')
      .option('pixId', '')
      .mapping('events'));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(adroll, 'load');
    });

    afterEach(function(){
      adroll.reset();
    });

    describe('#initialize', function(){
      it('should initialize the adroll variables', function(){
        analytics.initialize();
        analytics.page();
        analytics.equal(window.adroll_adv_id, options.advId);
        analytics.equal(window.adroll_pix_id, options.pixId);
      });

      it('should set window.__adroll_loaded', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(window.__adroll_loaded);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(adroll.load);
      });

      describe('with user', function(){
        beforeEach(function(){
          analytics.user().identify('id');
        });

        it('should not set a user id', function(){
          analytics.initialize();
          analytics.page();
          analytics.assert(!window.adroll_custom_data);
        });
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(adroll, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.__adroll, 'record_user');
      });

      it('should track page view with fullName', function(){
        analytics.page('Category', 'Name');
        analytics.called(window.__adroll.record_user, {
          adroll_segments: 'viewed_category_name_page'
        });
      });

      it('should track unnamed/categorized page', function(){
        analytics.page();
        analytics.called(window.__adroll.record_user, {
          adroll_segments: 'loaded_a_page'
        });
      });

      it('should track unnamed page', function(){
        analytics.page('Name');
        analytics.called(window.__adroll.record_user, {
          adroll_segments: 'viewed_name_page'
        });
      });

      it('should track uncategorized page', function(){
        analytics.page('Name');
        analytics.called(window.__adroll.record_user, {
          adroll_segments: 'viewed_name_page'
        });
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.__adroll, 'record_user');
      });

      it('should snake case event name', function(){
        analytics.track('Event A');
        analytics.called(window.__adroll.record_user, {
          adroll_segments: 'event_a'
        });
      });

      describe('event not in events', function(){
        it('should send events with only adroll_segments', function(){
          analytics.track('event', {});
          analytics.called(window.__adroll.record_user, {
            adroll_segments: 'event'
          });
        });

        it('should send events without revenue and order id', function(){
          analytics.track('event', { revenue: 3.99 });
          analytics.called(window.__adroll.record_user, {
            adroll_segments: 'event'
          });
        });

        it('should pass user id in', function(){
          analytics.user().identify('id');
          analytics.track('event', { revenue: 3.99 });
          analytics.called(window.__adroll.record_user, {
            adroll_segments: 'event',
            user_id: 'id'
          });
        });
      });

      describe('event in events', function(){
        beforeEach(function(){
          adroll.options.events = { event: 'segment' };
        });

        it('should pass in revenue and order id', function(){
          analytics.track('event', { total: 1.99, orderId: 1 });
          analytics.called(window.__adroll.record_user, {
            adroll_segments: 'segment',
            adroll_conversion_value_in_dollars: 1.99,
            order_id: 1
          });
        });

        it('should pass .revenue as conversion value', function(){
          analytics.track('event', { revenue: 2.99 });
          analytics.called(window.__adroll.record_user, {
            adroll_segments: 'segment',
            adroll_conversion_value_in_dollars: 2.99,
            order_id: 0
          });
        });

        it('should include the user_id when available', function(){
          analytics.user().identify('id');
          analytics.track('event', { revenue: 3.99 });
          analytics.called(window.__adroll.record_user, {
            adroll_segments: 'segment',
            adroll_conversion_value_in_dollars: 3.99,
            order_id: 0,
            user_id: 'id'
          });
        });

        it('should support array events', function(){
          adroll.options.events = [{ key: 'event', value: 'pixel' }];
          analytics.track('event', { total: 2.99, orderId: 2 });
          analytics.called(window.__adroll.record_user, {
            adroll_segments: 'pixel',
            adroll_conversion_value_in_dollars: 2.99,
            order_id: 2
          });
        });

        it('should track multiple events', function(){
          adroll.options.events = [{ key: 'event', value: 'one' }];
          adroll.options.events.push({ key: 'event', value: 'two' });
          analytics.track('event', { total: 2.99, orderId: 2 });
          analytics.calledTwice(window.__adroll.record_user);
        })
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":14,"clear-env":4}],
267: [function(require, module, exports) {

/**
 * Analytics.js
 *
 * (C) 2013 Segment.io Inc.
 */

var Integrations = require('analytics.js-integrations');
var Analytics = require('./analytics');
var each = require('each');


/**
 * Expose the `analytics` singleton.
 */

var analytics = module.exports = exports = new Analytics();

/**
 * Expose require
 */

analytics.require = require;

/**
 * Expose `VERSION`.
 */

exports.VERSION = require('./version');

/**
 * Add integrations.
 */

each(Integrations, function (name, Integration) {
  analytics.use(Integration);
});

}, {"analytics.js-integrations":269,"./analytics":270,"each":11,"./version":271}],
269: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var each = require('each');
var plugins = require('./integrations.js');

/**
 * Expose the integrations, using their own `name` from their `prototype`.
 */

each(plugins, function(plugin){
  var name = (plugin.Integration || plugin).prototype.name;
  exports[name] = plugin;
});



}, {"each":11,"./integrations.js":272}],
272: [function(require, module, exports) {

/**
 * DON'T EDIT THIS FILE. It's automatically generated!
 */

module.exports = [
  require('./lib/adroll'),
  require('./lib/adwords'),
  require('./lib/alexa'),
  require('./lib/amplitude'),
  require('./lib/appcues'),
  require('./lib/awesm'),
  require('./lib/awesomatic'),
  require('./lib/bing-ads'),
  require('./lib/bronto'),
  require('./lib/bugherd'),
  require('./lib/bugsnag'),
  require('./lib/chartbeat'),
  require('./lib/churnbee'),
  require('./lib/clicktale'),
  require('./lib/clicky'),
  require('./lib/comscore'),
  require('./lib/crazy-egg'),
  require('./lib/curebit'),
  require('./lib/customerio'),
  require('./lib/drip'),
  require('./lib/errorception'),
  require('./lib/evergage'),
  require('./lib/facebook-conversion-tracking'),
  require('./lib/foxmetrics'),
  require('./lib/frontleaf'),
  require('./lib/fullstory'),
  require('./lib/gauges'),
  require('./lib/get-satisfaction'),
  require('./lib/google-analytics'),
  require('./lib/google-tag-manager'),
  require('./lib/gosquared'),
  require('./lib/heap'),
  require('./lib/hellobar'),
  require('./lib/hittail'),
  require('./lib/hubspot'),
  require('./lib/improvely'),
  require('./lib/insidevault'),
  require('./lib/inspectlet'),
  require('./lib/intercom'),
  require('./lib/keen-io'),
  require('./lib/kenshoo'),
  require('./lib/kissmetrics'),
  require('./lib/klaviyo'),
  require('./lib/leadlander'),
  require('./lib/livechat'),
  require('./lib/lucky-orange'),
  require('./lib/lytics'),
  require('./lib/mixpanel'),
  require('./lib/mojn'),
  require('./lib/mouseflow'),
  require('./lib/mousestats'),
  require('./lib/navilytics'),
  require('./lib/olark'),
  require('./lib/optimizely'),
  require('./lib/perfect-audience'),
  require('./lib/pingdom'),
  require('./lib/piwik'),
  require('./lib/preact'),
  require('./lib/qualaroo'),
  require('./lib/quantcast'),
  require('./lib/rollbar'),
  require('./lib/saasquatch'),
  require('./lib/sentry'),
  require('./lib/snapengage'),
  require('./lib/spinnakr'),
  require('./lib/tapstream'),
  require('./lib/trakio'),
  require('./lib/twitter-ads'),
  require('./lib/uservoice'),
  require('./lib/vero'),
  require('./lib/visual-website-optimizer'),
  require('./lib/webengage'),
  require('./lib/woopra'),
  require('./lib/yandex-metrica')
];

}, {"./lib/adroll":273,"./lib/adwords":274,"./lib/alexa":275,"./lib/amplitude":276,"./lib/appcues":277,"./lib/awesm":278,"./lib/awesomatic":279,"./lib/bing-ads":280,"./lib/bronto":281,"./lib/bugherd":282,"./lib/bugsnag":283,"./lib/chartbeat":284,"./lib/churnbee":285,"./lib/clicktale":286,"./lib/clicky":287,"./lib/comscore":288,"./lib/crazy-egg":289,"./lib/curebit":290,"./lib/customerio":291,"./lib/drip":292,"./lib/errorception":293,"./lib/evergage":294,"./lib/facebook-conversion-tracking":295,"./lib/foxmetrics":296,"./lib/frontleaf":297,"./lib/fullstory":298,"./lib/gauges":299,"./lib/get-satisfaction":300,"./lib/google-analytics":301,"./lib/google-tag-manager":302,"./lib/gosquared":303,"./lib/heap":304,"./lib/hellobar":305,"./lib/hittail":306,"./lib/hubspot":307,"./lib/improvely":308,"./lib/insidevault":309,"./lib/inspectlet":310,"./lib/intercom":311,"./lib/keen-io":312,"./lib/kenshoo":313,"./lib/kissmetrics":314,"./lib/klaviyo":315,"./lib/leadlander":316,"./lib/livechat":317,"./lib/lucky-orange":318,"./lib/lytics":319,"./lib/mixpanel":320,"./lib/mojn":321,"./lib/mouseflow":322,"./lib/mousestats":323,"./lib/navilytics":324,"./lib/olark":325,"./lib/optimizely":326,"./lib/perfect-audience":327,"./lib/pingdom":328,"./lib/piwik":329,"./lib/preact":330,"./lib/qualaroo":331,"./lib/quantcast":332,"./lib/rollbar":333,"./lib/saasquatch":334,"./lib/sentry":335,"./lib/snapengage":336,"./lib/spinnakr":337,"./lib/tapstream":338,"./lib/trakio":339,"./lib/twitter-ads":340,"./lib/uservoice":341,"./lib/vero":342,"./lib/visual-website-optimizer":343,"./lib/webengage":344,"./lib/woopra":345,"./lib/yandex-metrica":346}],
273: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var snake = require('to-snake-case');
var useHttps = require('use-https');
var each = require('each');
var is = require('is');

/**
 * HOP
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Expose `AdRoll` integration.
 */

var AdRoll = module.exports = integration('AdRoll')
  .assumesPageview()
  .global('__adroll_loaded')
  .global('adroll_adv_id')
  .global('adroll_pix_id')
  .global('adroll_custom_data')
  .option('advId', '')
  .option('pixId', '')
  .tag('http', '<script src="http://a.adroll.com/j/roundtrip.js">')
  .tag('https', '<script src="https://s.adroll.com/j/roundtrip.js">')
  .mapping('events');

/**
 * Initialize.
 *
 * http://support.adroll.com/getting-started-in-4-easy-steps/#step-one
 * http://support.adroll.com/enhanced-conversion-tracking/
 *
 * @param {Object} page
 */

AdRoll.prototype.initialize = function(page){
  window.adroll_adv_id = this.options.advId;
  window.adroll_pix_id = this.options.pixId;
  window.__adroll_loaded = true;
  var name = useHttps() ? 'https' : 'http';
  this.load(name, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

AdRoll.prototype.loaded = function(){
  return window.__adroll;
};

/**
 * Page.
 *
 * http://support.adroll.com/segmenting-clicks/
 *
 * @param {Page} page
 */

AdRoll.prototype.page = function(page){
  var name = page.fullName();
  this.track(page.track(name));
};

/**
 * Track.
 *
 * @param {Track} track
 */

AdRoll.prototype.track = function(track){
  var event = track.event();
  var user = this.analytics.user();
  var events = this.events(event);
  var total = track.revenue() || track.total() || 0;
  var orderId = track.orderId() || 0;

  each(events, function(event){
    var data = {};
    if (user.id()) data.user_id = user.id();
    data.adroll_conversion_value_in_dollars = total;
    data.order_id = orderId;
    // the adroll interface only allows for
    // segment names which are snake cased.
    data.adroll_segments = snake(event);
    window.__adroll.record_user(data);
  });

  // no events found
  if (!events.length) {
    var data = {};
    if (user.id()) data.user_id = user.id();
    data.adroll_segments = snake(event);
    window.__adroll.record_user(data);
  }
};

}, {"analytics.js-integration":89,"to-snake-case":90,"use-https":91,"each":11,"is":92}],
274: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var domify = require('domify');
var each = require('each');

/**
 * HOP
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Expose `AdWords`.
 */

var AdWords = module.exports = integration('AdWords')
  .option('conversionId', '')
  .option('remarketing', false)
  .tag('<script src="//www.googleadservices.com/pagead/conversion_async.js">')
  .mapping('events');

/**
 * Load.
 *
 * @param {Function} fn
 * @api public
 */

AdWords.prototype.initialize = function(){
  this.load(this.ready);
};

/**
 * Loaded.
 *
 * @return {Boolean}
 * @api public
 */

AdWords.prototype.loaded = function(){
  return !! document.body;
};

/**
 * Page.
 *
 * https://support.google.com/adwords/answer/3111920#standard_parameters
 * https://support.google.com/adwords/answer/3103357
 * https://developers.google.com/adwords-remarketing-tag/asynchronous/
 * https://developers.google.com/adwords-remarketing-tag/parameters
 *
 * @param {Page} page
 */

AdWords.prototype.page = function(page){
  var remarketing = !!this.options.remarketing;
  var id = this.options.conversionId;
  var props = {};
  window.google_trackConversion({
    google_conversion_id: id,
    google_custom_params: props,
    google_remarketing_only: remarketing
  });
};

/**
 * Track.
 *
 * @param {Track}
 * @api public
 */

AdWords.prototype.track = function(track){
  var id = this.options.conversionId;
  var events = this.events(track.event());
  var revenue = track.revenue() || 0;
  each(events, function(label){
    var props = track.properties();
    window.google_trackConversion({
      google_conversion_id: id,
      // TODO
      // google_custom_params: props,
      google_conversion_language: 'en',
      google_conversion_format: '3',
      google_conversion_color: 'ffffff',
      google_conversion_label: label,
      google_conversion_value: revenue,
      google_remarketing_only: false
    });
  });
};

}, {"analytics.js-integration":89,"domify":117,"each":11}],
275: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose Alexa integration.
 */

var Alexa = module.exports = integration('Alexa')
  .assumesPageview()
  .global('_atrk_opts')
  .option('account', null)
  .option('domain', '')
  .option('dynamic', true)
  .tag('<script src="//d31qbv1cthcecs.cloudfront.net/atrk.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Alexa.prototype.initialize = function(page){
  var self = this;
  window._atrk_opts = {
    atrk_acct: this.options.account,
    domain: this.options.domain,
    dynamic: this.options.dynamic
  };
  this.load(function(){
    window.atrk();
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Alexa.prototype.loaded = function(){
  return !! window.atrk;
};

}, {"analytics.js-integration":89}],
276: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `Amplitude` integration.
 */

var Amplitude = module.exports = integration('Amplitude')
  .global('amplitude')
  .option('apiKey', '')
  .option('trackAllPages', false)
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .tag('<script src="https://d24n15hnbwhuhn.cloudfront.net/libs/amplitude-1.3-min.js">');

/**
 * Initialize.
 *
 * https://github.com/amplitude/Amplitude-Javascript
 *
 * @param {Object} page
 */

Amplitude.prototype.initialize = function(page){
  (function(h,a){var f=h.amplitude||{};f._q=[];function e(i){f[i]=function(){f._q.push([i].concat(Array.prototype.slice.call(arguments,0)))}}var c=["init","logEvent","setUserId","setUserProperties","setVersionName","setDomain","setGlobalUserProperties"];for(var d=0;d<c.length;d++){e(c[d])}h.amplitude=f})(window,document);
  window.amplitude.init(this.options.apiKey);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Amplitude.prototype.loaded = function(){
  return !! (window.amplitude && window.amplitude.options);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Amplitude.prototype.page = function(page){
  var properties = page.properties();
  var category = page.category();
  var name = page.fullName();
  var opts = this.options;

  // all pages
  if (opts.trackAllPages) {
    this.track(page.track());
  }

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }
};

/**
 * Identify.
 *
 * @param {Facade} identify
 */

Amplitude.prototype.identify = function(identify){
  var id = identify.userId();
  var traits = identify.traits();
  if (id) window.amplitude.setUserId(id);
  if (traits) window.amplitude.setGlobalUserProperties(traits);
};

/**
 * Track.
 *
 * @param {Track} event
 */

Amplitude.prototype.track = function(track){
  var props = track.properties();
  var event = track.event();
  window.amplitude.logEvent(event, props);
};

}, {"analytics.js-integration":89}],
277: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var load = require('load-script');
var is = require('is');

/**
 * Expose plugin.
 */

module.exports = exports = function (analytics) {
  analytics.addIntegration(Appcues);
};

/**
 * Expose `Appcues` integration.
 */

var Appcues = exports.Integration = integration('Appcues')
  .assumesPageview()
  .global('Appcues')
  .global('AppcuesIdentity')
  .option('appcuesId', '')
  .option('userId', '')
  .option('userEmail', '');

/**
 * Initialize.
 *
 * http://appcues.com/docs/
 *
 * @param {Object}
 */

Appcues.prototype.initialize = function(){
  this.load(function() {
    window.Appcues.init();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Appcues.prototype.loaded = function(){
  return is.object(window.Appcues);
};

/**
 * Load the Appcues library.
 *
 * @param {Function} callback
 */

Appcues.prototype.load = function(callback){
  var script = load('//d2dubfq97s02eu.cloudfront.net/appcues-bundle.min.js', callback);
  script.setAttribute('data-appcues-id', this.options.appcuesId);
  script.setAttribute('data-user-id', this.options.userId);
  script.setAttribute('data-user-email', this.options.userEmail);
};


/**
 * Identify.
 *
 * http://appcues.com/docs#identify
 *
 * @param {Identify} identify
 */

Appcues.prototype.identify = function(identify){
  window.Appcues.identify(identify.traits());
};

}, {"analytics.js-integration":89,"load-script":121,"is":92}],
278: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var each = require('each');

/**
 * Expose `Awesm` integration.
 */

var Awesm = module.exports = integration('awe.sm')
  .assumesPageview()
  .global('AWESM')
  .option('apiKey', '')
  .tag('<script src="//widgets.awe.sm/v3/widgets.js?key={{ apiKey }}&async=true">')
  .mapping('events');

/**
 * Initialize.
 *
 * http://developers.awe.sm/guides/javascript/
 *
 * @param {Object} page
 */

Awesm.prototype.initialize = function(page){
  window.AWESM = { api_key: this.options.apiKey };
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Awesm.prototype.loaded = function(){
  return !! (window.AWESM && window.AWESM._exists);
};

/**
 * Track.
 *
 * @param {Track} track
 */

Awesm.prototype.track = function(track){
  var user = this.analytics.user();
  var goals = this.events(track.event());
  each(goals, function(goal){
    window.AWESM.convert(goal, track.cents(), null, user.id());
  });
};

}, {"analytics.js-integration":89,"each":11}],
279: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var is = require('is');
var noop = function(){};
var onBody = require('on-body');

/**
 * Expose `Awesomatic` integration.
 */

var Awesomatic = module.exports = integration('Awesomatic')
  .assumesPageview()
  .global('Awesomatic')
  .global('AwesomaticSettings')
  .global('AwsmSetup')
  .global('AwsmTmp')
  .option('appId', '')
  .tag('<script src="https://1c817b7a15b6941337c0-dff9b5f4adb7ba28259631e99c3f3691.ssl.cf2.rackcdn.com/gen/embed.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Awesomatic.prototype.initialize = function(page){
  var self = this;
  var user = this.analytics.user();
  var id = user.id();
  var options = user.traits();

  options.appId = this.options.appId;
  if (id) options.user_id = id;

  this.load(function(){
    window.Awesomatic.initialize(options, function(){
      self.ready(); // need to wait for initialize to callback
    });
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Awesomatic.prototype.loaded = function(){
  return is.object(window.Awesomatic);
};

}, {"analytics.js-integration":89,"is":92,"on-body":122}],
280: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var onbody = require('on-body');
var domify = require('domify');
var extend = require('extend');
var bind = require('bind');
var when = require('when');
var each = require('each');

/**
 * HOP.
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Noop.
 */

var noop = function(){};

/**
 * Expose `Bing`.
 *
 * https://bingads.microsoft.com/campaign/signup
 */

var Bing = module.exports = integration('Bing Ads')
  .option('siteId', '')
  .option('domainId', '')
  .tag('<script id="mstag_tops" src="//flex.msn.com/mstag/site/{{ siteId }}/mstag.js">')
  .mapping('events');

/**
 * Initialize.
 *
 * http://msdn.microsoft.com/en-us/library/bing-ads-campaign-management-campaign-analytics-scripts.aspx
 *
 * @param {Object} page
 */

Bing.prototype.initialize = function(page){
  if (!window.mstag) {
    window.mstag = {
      loadTag: noop,
      time: (new Date()).getTime(),
      // they use document.write, which doesn't work when loaded async.
      // they provide a way to override it.
      // the first time it is called, load the script,
      // and only when that script is done, is "loading" done.
      _write: writeToAppend
    };
  };
  var self = this;
  onbody(function(){
    self.load(function(){
      var loaded = bind(self, self.loaded);

      // poll until this.loaded() is true.
      // have to do a weird hack like this because
      // the first script loads a second script,
      // and only after the second script is it actually loaded.
      when(loaded, self.ready);
    });
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Bing.prototype.loaded = function(){
  return !! (window.mstag && window.mstag.loadTag !== noop);
};

/**
 * Track.
 *
 * @param {Track} track
 */

Bing.prototype.track = function(track){
  var events = this.events(track.event());
  var revenue = track.revenue() || 0;
  var self = this;
  each(events, function(goal){
    window.mstag.loadTag('analytics', {
      domainId: self.options.domainId,
      revenue: revenue,
      dedup: '1',
      type: '1',
      actionid: goal
    });
  });
};

/**
 * Convert `document.write` to `document.appendChild`.
 *
 * TODO: make into a component.
 *
 * @param {String} str
 */

function writeToAppend(str) {
  var first = document.getElementsByTagName('script')[0];
  var el = domify(str);
  // https://github.com/component/domify/issues/14
  if ('script' == el.tagName.toLowerCase() && el.getAttribute('src')) {
    var tmp = document.createElement('script');
    tmp.src = el.getAttribute('src');
    tmp.async = true;
    el = tmp;
  }
  document.body.appendChild(el);
}

}, {"analytics.js-integration":89,"on-body":122,"domify":117,"extend":123,"bind":101,"when":124,"each":11}],
281: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var Identify = require('facade').Identify;
var Track = require('facade').Track;
var pixel = require('load-pixel')('http://app.bronto.com/public/');
var qs = require('querystring');
var each = require('each');

/**
 * Expose `Bronto` integration.
 */

var Bronto = module.exports = integration('Bronto')
  .global('__bta')
  .option('siteId', '')
  .option('host', '')
  .tag('<script src="//p.bm23.com/bta.js">');

/**
 * Initialize.
 *
 * http://app.bronto.com/mail/help/help_view/?k=mail:home:api_tracking:tracking_data_store_js#addingjavascriptconversiontrackingtoyoursite
 * http://bronto.com/product-blog/features/using-conversion-tracking-private-domain#.Ut_Vk2T8KqB
 * http://bronto.com/product-blog/features/javascript-conversion-tracking-setup-and-reporting#.Ut_VhmT8KqB
 *
 * @param {Object} page
 */

Bronto.prototype.initialize = function(page){
  var self = this;
  var params = qs.parse(window.location.search);
  if (!params._bta_tid && !params._bta_c) {
    this.debug('missing tracking URL parameters `_bta_tid` and `_bta_c`.');
  }
  this.load(function(){
    var opts = self.options;
    self.bta = new window.__bta(opts.siteId);
    if (opts.host) self.bta.setHost(opts.host);
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Bronto.prototype.loaded = function(){
  return this.bta;
};

/**
 * Completed order.
 *
 * The cookie is used to link the order being processed back to the delivery,
 * message, and contact which makes it a conversion.
 * Passing in just the email ensures that the order itself
 * gets linked to the contact record in Bronto even if the user
 * does not have a tracking cookie.
 *
 * @param {Track} track
 * @api private
 */

Bronto.prototype.completedOrder = function(track){
  var user = this.analytics.user();
  var products = track.products();
  var props = track.properties();
  var items = [];
  var identify = new Identify({
    userId: user.id(),
    traits: user.traits()
  });
  var email = identify.email();

  // items
  each(products, function(product){
    var track = new Track({ properties: product });
    items.push({
      item_id: track.id() || track.sku(),
      desc: product.description || track.name(),
      quantity: track.quantity(),
      amount: track.price(),
    });
  });

  // add conversion
  this.bta.addOrder({
    order_id: track.orderId(),
    email: email,
    // they recommend not putting in a date
    // because it needs to be formatted correctly
    // YYYY-MM-DDTHH:MM:SS
    items: items
  });
};

}, {"analytics.js-integration":89,"facade":125,"load-pixel":126,"querystring":127,"each":11}],
282: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var tick = require('next-tick');

/**
 * Expose `BugHerd` integration.
 */

var BugHerd = module.exports = integration('BugHerd')
  .assumesPageview()
  .global('BugHerdConfig')
  .global('_bugHerd')
  .option('apiKey', '')
  .option('showFeedbackTab', true)
  .tag('<script src="//www.bugherd.com/sidebarv2.js?apikey={{ apiKey }}">');

/**
 * Initialize.
 *
 * http://support.bugherd.com/home
 *
 * @param {Object} page
 */

BugHerd.prototype.initialize = function(page){
  window.BugHerdConfig = { feedback: { hide: !this.options.showFeedbackTab }};
  var ready = this.ready;
  this.load(function(){
    tick(ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

BugHerd.prototype.loaded = function(){
  return !! window._bugHerd;
};

}, {"analytics.js-integration":89,"next-tick":103}],
283: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var is = require('is');
var extend = require('extend');
var onError = require('on-error');

/**
 * UMD ?
 */

var umd = 'function' == typeof define && define.amd;

/**
 * Source.
 */

var src = '//d2wy8f7a9ursnm.cloudfront.net/bugsnag-2.min.js';

/**
 * Expose `Bugsnag` integration.
 */

var Bugsnag = module.exports = integration('Bugsnag')
  .global('Bugsnag')
  .option('apiKey', '')
  .tag('<script src="' + src + '">');

/**
 * Initialize.
 *
 * https://bugsnag.com/docs/notifiers/js
 *
 * @param {Object} page
 */

Bugsnag.prototype.initialize = function(page){
  var self = this;

  if (umd) {
    window.require([src], function(bugsnag){
      bugsnag.apiKey = self.options.apiKey;
      window.Bugsnag = bugsnag;
      self.ready();
    });
    return;
  }

  this.load(function(){
    window.Bugsnag.apiKey = self.options.apiKey;
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Bugsnag.prototype.loaded = function(){
  return is.object(window.Bugsnag);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Bugsnag.prototype.identify = function(identify){
  window.Bugsnag.metaData = window.Bugsnag.metaData || {};
  extend(window.Bugsnag.metaData, identify.traits());
};

}, {"analytics.js-integration":89,"is":92,"extend":123,"on-error":151}],
284: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var defaults = require('defaults');
var onBody = require('on-body');

/**
 * Expose `Chartbeat` integration.
 */

var Chartbeat = module.exports = integration('Chartbeat')
  .assumesPageview()
  .global('_sf_async_config')
  .global('_sf_endpt')
  .global('pSUPERFLY')
  .option('domain', '')
  .option('uid', null)
  .tag('<script src="//static.chartbeat.com/js/chartbeat.js">');

/**
 * Initialize.
 *
 * http://chartbeat.com/docs/configuration_variables/
 *
 * @param {Object} page
 */

Chartbeat.prototype.initialize = function(page){
  var self = this;

  window._sf_async_config = window._sf_async_config || {};
  window._sf_async_config.useCanonical = true;
  defaults(window._sf_async_config, this.options);

  onBody(function(){
    window._sf_endpt = new Date().getTime();
    // Note: Chartbeat depends on document.body existing so the script does
    // not load until that is confirmed. Otherwise it may trigger errors.
    self.load(self.ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Chartbeat.prototype.loaded = function(){
  return !! window.pSUPERFLY;
};

/**
 * Page.
 *
 * http://chartbeat.com/docs/handling_virtual_page_changes/
 *
 * @param {Page} page
 */

Chartbeat.prototype.page = function(page){
  var props = page.properties();
  var name = page.fullName();
  window.pSUPERFLY.virtualPage(props.path, name || props.title);
};

}, {"analytics.js-integration":89,"defaults":152,"on-body":122}],
285: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_cbq');
var each = require('each');

/**
 * HOP
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Supported events
 */

var supported = {
  activation: true,
  changePlan: true,
  register: true,
  refund: true,
  charge: true,
  cancel: true,
  login: true
};

/**
 * Expose `ChurnBee` integration.
 */

var ChurnBee = module.exports = integration('ChurnBee')
  .global('_cbq')
  .global('ChurnBee')
  .option('apiKey', '')
  .tag('<script src="//api.churnbee.com/cb.js">')
  .mapping('events');

/**
 * Initialize.
 *
 * https://churnbee.com/docs
 *
 * @param {Object} page
 */

ChurnBee.prototype.initialize = function(page){
  push('_setApiKey', this.options.apiKey);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

ChurnBee.prototype.loaded = function(){
  return !! window.ChurnBee;
};

/**
 * Track.
 *
 * @param {Track} event
 */

ChurnBee.prototype.track = function(track){
  var event = track.event();
  var events = this.events(event);
  events.push(event);
  each(events, function(event){
    if (true != supported[event]) return;
    push(event, track.properties({ revenue: 'amount' }));
  });
};

}, {"analytics.js-integration":89,"global-queue":153,"each":11}],
286: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var date = require('load-date');
var domify = require('domify');
var each = require('each');
var integration = require('analytics.js-integration');
var is = require('is');
var useHttps = require('use-https');
var onBody = require('on-body');

/**
 * Expose `ClickTale` integration.
 */

var ClickTale = module.exports = integration('ClickTale')
  .assumesPageview()
  .global('WRInitTime')
  .global('ClickTale')
  .global('ClickTaleSetUID')
  .global('ClickTaleField')
  .global('ClickTaleEvent')
  .option('httpCdnUrl', 'http://s.clicktale.net/WRe0.js')
  .option('httpsCdnUrl', '')
  .option('projectId', '')
  .option('recordingRatio', 0.01)
  .option('partitionId', '')
  .tag('<script src="{{src}}">');

/**
 * Initialize.
 *
 * http://wiki.clicktale.com/Article/JavaScript_API
 *
 * @param {Object} page
 */

ClickTale.prototype.initialize = function(page){
  var self = this;
  window.WRInitTime = date.getTime();

  onBody(function(body){
    body.appendChild(domify('<div id="ClickTaleDiv" style="display: none;">'));
  });

  var http = this.options.httpCdnUrl;
  var https = this.options.httpsCdnUrl;
  if (useHttps() && !https) return this.debug('https option required');
  var src = useHttps() ? https : http;

  this.load({ src: src }, function(){
    window.ClickTale(
      self.options.projectId,
      self.options.recordingRatio,
      self.options.partitionId
    );
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

ClickTale.prototype.loaded = function(){
  return is.fn(window.ClickTale);
};

/**
 * Identify.
 *
 * http://wiki.clicktale.com/Article/ClickTaleTag#ClickTaleSetUID
 * http://wiki.clicktale.com/Article/ClickTaleTag#ClickTaleField
 *
 * @param {Identify} identify
 */

ClickTale.prototype.identify = function(identify){
  var id = identify.userId();
  window.ClickTaleSetUID(id);
  each(identify.traits(), function(key, value){
    window.ClickTaleField(key, value);
  });
};

/**
 * Track.
 *
 * http://wiki.clicktale.com/Article/ClickTaleTag#ClickTaleEvent
 *
 * @param {Track} track
 */

ClickTale.prototype.track = function(track){
  window.ClickTaleEvent(track.event());
};

}, {"load-date":154,"domify":117,"each":11,"analytics.js-integration":89,"is":92,"use-https":91,"on-body":122}],
287: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var Identify = require('facade').Identify;
var extend = require('extend');
var integration = require('analytics.js-integration');
var is = require('is');

/**
 * Expose `Clicky` integration.
 */

var Clicky = module.exports = integration('Clicky')
  .assumesPageview()
  .global('clicky')
  .global('clicky_site_ids')
  .global('clicky_custom')
  .option('siteId', null)
  .tag('<script src="//static.getclicky.com/js"></script>');

/**
 * Initialize.
 *
 * http://clicky.com/help/customization
 *
 * @param {Object} page
 */

Clicky.prototype.initialize = function(page){
  var user = this.analytics.user();
  window.clicky_site_ids = window.clicky_site_ids || [this.options.siteId];
  this.identify(new Identify({
    userId: user.id(),
    traits: user.traits()
  }));
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Clicky.prototype.loaded = function(){
  return is.object(window.clicky);
};

/**
 * Page.
 *
 * http://clicky.com/help/customization#/help/custom/manual
 *
 * @param {Page} page
 */

Clicky.prototype.page = function(page){
  var properties = page.properties();
  var category = page.category();
  var name = page.fullName();
  window.clicky.log(properties.path, name || properties.title);
};

/**
 * Identify.
 *
 * @param {Identify} id (optional)
 */

Clicky.prototype.identify = function(identify){
  window.clicky_custom = window.clicky_custom || {};
  window.clicky_custom.session = window.clicky_custom.session || {};
  extend(window.clicky_custom.session, identify.traits());
};

/**
 * Track.
 *
 * http://clicky.com/help/customization#/help/custom/manual
 *
 * @param {Track} event
 */

Clicky.prototype.track = function(track){
  window.clicky.goal(track.event(), track.revenue());
};

}, {"facade":125,"extend":123,"analytics.js-integration":89,"is":92}],
288: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var useHttps = require('use-https');

/**
 * Expose `Comscore` integration.
 */

var Comscore = module.exports = integration('comScore')
  .assumesPageview()
  .global('_comscore')
  .global('COMSCORE')
  .option('c1', '2')
  .option('c2', '')
  .tag('http', '<script src="http://b.scorecardresearch.com/beacon.js">')
  .tag('https', '<script src="https://sb.scorecardresearch.com/beacon.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Comscore.prototype.initialize = function(page){
  window._comscore = window._comscore || [this.options];
  var name = useHttps() ? 'https' : 'http';
  this.load(name, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Comscore.prototype.loaded = function(){
  return !! window.COMSCORE;
};

/**
 * Page
 *
 * @param {Object} page
 */

Comscore.prototype.page = function(page){
  window.COMSCORE.beacon(this.options);
};

}, {"analytics.js-integration":89,"use-https":91}],
289: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `CrazyEgg` integration.
 */

var CrazyEgg = module.exports = integration('Crazy Egg')
  .assumesPageview()
  .global('CE2')
  .option('accountNumber', '')
  .tag('<script src="//dnn506yrbagrg.cloudfront.net/pages/scripts/{{ path }}.js?{{ cache }}">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

CrazyEgg.prototype.initialize = function(page){
  var number = this.options.accountNumber;
  var path = number.slice(0,4) + '/' + number.slice(4);
  var cache = Math.floor(new Date().getTime() / 3600000);
  this.load({ path: path, cache: cache }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

CrazyEgg.prototype.loaded = function(){
  return !! window.CE2;
};

}, {"analytics.js-integration":89}],
290: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_curebitq');
var Identify = require('facade').Identify;
var throttle = require('throttle');
var Track = require('facade').Track;
var iso = require('to-iso-string');
var clone = require('clone');
var each = require('each');
var bind = require('bind');

/**
 * Expose `Curebit` integration.
 */

var Curebit = module.exports = integration('Curebit')
  .global('_curebitq')
  .global('curebit')
  .option('siteId', '')
  .option('iframeWidth', '100%')
  .option('iframeHeight', '480')
  .option('iframeBorder', 0)
  .option('iframeId', 'curebit_integration')
  .option('responsive', true)
  .option('device', '')
  .option('insertIntoId', '')
  .option('campaigns', {})
  .option('server', 'https://www.curebit.com')
  .tag('<script src="//d2jjzw81hqbuqv.cloudfront.net/integration/curebit-1.0.min.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Curebit.prototype.initialize = function(page){
  push('init', { site_id: this.options.siteId, server: this.options.server });
  this.load(this.ready);

  // throttle the call to `page` since curebit needs to append an iframe
  this.page = throttle(bind(this, this.page), 250);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Curebit.prototype.loaded = function(){
  return !!window.curebit;
};

/**
 * Page.
 *
 * Call the `register_affiliate` method of the Curebit API that will load a
 * custom iframe onto the page, only if this page's path is marked as a
 * campaign.
 *
 * http://www.curebit.com/docs/affiliate/registration
 *
 * This is throttled to prevent accidentally drawing the iframe multiple times,
 * from multiple `.page()` calls. The `250` is from the curebit script.
 *
 * @param {String} url
 * @param {String} id
 * @param {Function} fn
 * @api private
 */

Curebit.prototype.injectIntoId = function(url, id, fn){
  var server = this.options.server;
  when(function(){
    return document.getElementById(id);
  }, function(){
    var script = document.createElement('script');
    script.src = url;
    var parent = document.getElementById(id);
    parent.appendChild(script);
    onload(script, fn);
  });
};

/**
 * Campaign tags.
 *
 * @param {Page} page
 */

Curebit.prototype.page = function(page){
  var user = this.analytics.user();
  var campaigns = this.options.campaigns;
  var path = window.location.pathname;
  if (!campaigns[path]) return;

  var tags = (campaigns[path] || '').split(',');
  if (!tags.length) return;

  var settings = {
    responsive: this.options.responsive,
    device: this.options.device,
    campaign_tags: tags,
    iframe: {
      width: this.options.iframeWidth,
      height: this.options.iframeHeight,
      id: this.options.iframeId,
      frameborder: this.options.iframeBorder,
      container: this.options.insertIntoId
    }
  };

  var identify = new Identify({
    userId: user.id(),
    traits: user.traits()
  });

  // if we have an email, add any information about the user
  if (identify.email()) {
    settings.affiliate_member = {
      email: identify.email(),
      first_name: identify.firstName(),
      last_name: identify.lastName(),
      customer_id: identify.userId()
    };
  }

  push('register_affiliate', settings);
};

/**
 * Completed order.
 *
 * Fire the Curebit `register_purchase` with the order details and items.
 *
 * https://www.curebit.com/docs/ecommerce/custom
 *
 * @param {Track} track
 */

Curebit.prototype.completedOrder = function(track){
  var user = this.analytics.user();
  var orderId = track.orderId();
  var products = track.products();
  var props = track.properties();
  var items = [];
  var identify = new Identify({
    traits: user.traits(),
    userId: user.id()
  });

  each(products, function(product){
    var track = new Track({ properties: product });
    items.push({
      product_id: track.id() || track.sku(),
      quantity: track.quantity(),
      image_url: product.image,
      price: track.price(),
      title: track.name(),
      url: product.url,
    });
  });

  push('register_purchase', {
    order_date: iso(props.date || new Date()),
    order_number: orderId,
    coupon_code: track.coupon(),
    subtotal: track.total(),
    customer_id: identify.userId(),
    first_name: identify.firstName(),
    last_name: identify.lastName(),
    email: identify.email(),
    items: items
  });
};

}, {"analytics.js-integration":89,"global-queue":153,"facade":125,"throttle":155,"to-iso-string":156,"clone":157,"each":11,"bind":101}],
291: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var alias = require('alias');
var convertDates = require('convert-dates');
var Identify = require('facade').Identify;
var integration = require('analytics.js-integration');

/**
 * Expose `Customerio` integration.
 */

var Customerio = module.exports = integration('Customer.io')
  .assumesPageview()
  .global('_cio')
  .option('siteId', '')
  .tag('<script id="cio-tracker" src="https://assets.customer.io/assets/track.js" data-site-id="{{ siteId }}">');

/**
 * Initialize.
 *
 * http://customer.io/docs/api/javascript.html
 *
 * @param {Object} page
 */

Customerio.prototype.initialize = function(page){
  window._cio = window._cio || [];
  (function(){var a,b,c; a = function(f){return function(){window._cio.push([f].concat(Array.prototype.slice.call(arguments,0))); }; }; b = ['identify', 'track']; for (c = 0; c < b.length; c++) {window._cio[b[c]] = a(b[c]); } })();
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Customerio.prototype.loaded = function(){
  return (!! window._cio) && (window._cio.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * http://customer.io/docs/api/javascript.html#section-Identify_customers
 *
 * @param {Identify} identify
 */

Customerio.prototype.identify = function(identify){
  if (!identify.userId()) return this.debug('user id required');
  var traits = identify.traits({ created: 'created_at' });
  traits = convertDates(traits, convertDate);
  window._cio.identify(traits);
};

/**
 * Group.
 *
 * @param {Group} group
 */

Customerio.prototype.group = function(group){
  var traits = group.traits();
  var user = this.analytics.user();

  traits = alias(traits, function(trait){
    return 'Group ' + trait;
  });

  this.identify(new Identify({
    userId: user.id(),
    traits: traits
  }));
};

/**
 * Track.
 *
 * http://customer.io/docs/api/javascript.html#section-Track_a_custom_event
 *
 * @param {Track} track
 */

Customerio.prototype.track = function(track){
  var properties = track.properties();
  properties = convertDates(properties, convertDate);
  window._cio.track(track.event(), properties);
};

/**
 * Convert a date to the format Customer.io supports.
 *
 * @param {Date} date
 * @return {Number}
 */

function convertDate(date){
  return Math.floor(date.getTime() / 1000);
}

}, {"alias":158,"convert-dates":159,"facade":125,"analytics.js-integration":89}],
292: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var alias = require('alias');
var integration = require('analytics.js-integration');
var is = require('is');
var load = require('load-script');
var push = require('global-queue')('_dcq');

/**
 * Expose `Drip` integration.
 */

var Drip = module.exports = integration('Drip')
  .assumesPageview()
  .global('dc')
  .global('_dcq')
  .global('_dcs')
  .option('account', '')
  .tag('<script src="//tag.getdrip.com/{{ account }}.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Drip.prototype.initialize = function(page){
  window._dcq = window._dcq || [];
  window._dcs = window._dcs || {};
  window._dcs.account = this.options.account;
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Drip.prototype.loaded = function(){
  return is.object(window.dc);
};

/**
 * Track.
 *
 * @param {Track} track
 */

Drip.prototype.track = function(track){
  var props = track.properties();
  var cents = track.cents();
  if (cents) props.value = cents;
  delete props.revenue;
  push('track', track.event(), props);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Drip.prototype.identify = function (identify) {
  push('identify', identify.traits());
};

}, {"alias":158,"analytics.js-integration":89,"is":92,"load-script":121,"global-queue":153}],
293: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var extend = require('extend');
var integration = require('analytics.js-integration');
var onError = require('on-error');
var push = require('global-queue')('_errs');

/**
 * Expose `Errorception` integration.
 */

var Errorception = module.exports = integration('Errorception')
  .assumesPageview()
  .global('_errs')
  .option('projectId', '')
  .option('meta', true)
  .tag('<script src="//beacon.errorception.com/{{ projectId }}.js">');

/**
 * Initialize.
 *
 * https://github.com/amplitude/Errorception-Javascript
 *
 * @param {Object} page
 */

Errorception.prototype.initialize = function(page){
  window._errs = window._errs || [this.options.projectId];
  onError(push);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Errorception.prototype.loaded = function(){
  return !! (window._errs && window._errs.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * http://blog.errorception.com/2012/11/capture-custom-data-with-your-errors.html
 *
 * @param {Object} identify
 */

Errorception.prototype.identify = function(identify){
  if (!this.options.meta) return;
  var traits = identify.traits();
  window._errs = window._errs || [];
  window._errs.meta = window._errs.meta || {};
  extend(window._errs.meta, traits);
};

}, {"extend":123,"analytics.js-integration":89,"on-error":151,"global-queue":153}],
294: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var each = require('each');
var integration = require('analytics.js-integration');
var push = require('global-queue')('_aaq');

/**
 * Expose `Evergage` integration.integration.
 */

var Evergage = module.exports = integration('Evergage')
  .assumesPageview()
  .global('_aaq')
  .option('account', '')
  .option('dataset', '')
  .tag('<script src="//cdn.evergage.com/beacon/{{ account }}/{{ dataset }}/scripts/evergage.min.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Evergage.prototype.initialize = function(page){
  var account = this.options.account;
  var dataset = this.options.dataset;

  window._aaq = window._aaq || [];
  push('setEvergageAccount', account);
  push('setDataset', dataset);
  push('setUseSiteConfig', true);

  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Evergage.prototype.loaded = function(){
  return !! (window._aaq && window._aaq.push !== Array.prototype.push);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Evergage.prototype.page = function(page){
  var props = page.properties();
  var name = page.name();
  if (name) push('namePage', name);

  each(props, function(key, value){
    push('setCustomField', key, value, 'page');
  });

  window.Evergage.init(true);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Evergage.prototype.identify = function(identify){
  var id = identify.userId();
  if (!id) return;

  push('setUser', id);

  var traits = identify.traits({
    email: 'userEmail',
    name: 'userName'
  });

  each(traits, function(key, value){
    push('setUserField', key, value, 'page');
  });
};

/**
 * Group.
 *
 * @param {Group} group
 */

Evergage.prototype.group = function(group){
  var props = group.traits();
  var id = group.groupId();
  if (!id) return;

  push('setCompany', id);
  each(props, function(key, value){
    push('setAccountField', key, value, 'page');
  });
};

/**
 * Track.
 *
 * @param {Track} track
 */

Evergage.prototype.track = function(track){
  push('trackAction', track.event(), track.properties());
};

}, {"each":11,"analytics.js-integration":89,"global-queue":153}],
295: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_fbq');
var each = require('each');

/**
 * HOP
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Expose `Facebook`
 */

var Facebook = module.exports = integration('Facebook Conversion Tracking')
  .global('_fbq')
  .option('currency', 'USD')
  .tag('<script src="//connect.facebook.net/en_US/fbds.js">')
  .mapping('events');

/**
 * Initialize Facebook Conversion Tracking
 *
 * https://developers.facebook.com/docs/ads-for-websites/conversion-pixel-code-migration
 *
 * @param {Object} page
 */

Facebook.prototype.initialize = function(page){
  window._fbq = window._fbq || [];
  this.load(this.ready);
  window._fbq.loaded = true;
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Facebook.prototype.loaded = function(){
  return !! (window._fbq && window._fbq.loaded);
};

/**
 * Track.
 *
 * https://developers.facebook.com/docs/reference/ads-api/custom-audience-website-faq/#fbpixel
 *
 * @param {Track} track
 */

Facebook.prototype.track = function(track){
  var event = track.event();
  var events = this.events(event);
  var revenue = track.revenue() || 0;
  var self = this;

  each(events, function(event){
    push('track', event, {
      value: String(revenue.toFixed(2)),
      currency: self.options.currency
    });
  });

  if (!events.length) {
    var data = track.properties();
    push('track', event, data);
  }
};

}, {"analytics.js-integration":89,"global-queue":153,"each":11}],
296: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var push = require('global-queue')('_fxm');
var integration = require('analytics.js-integration');
var Track = require('facade').Track;
var each = require('each');

/**
 * Expose `FoxMetrics` integration.
 */

var FoxMetrics = module.exports = integration('FoxMetrics')
  .assumesPageview()
  .global('_fxm')
  .option('appId', '')
  .tag('<script src="//d35tca7vmefkrc.cloudfront.net/scripts/{{ appId }}.js">');

/**
 * Initialize.
 *
 * http://foxmetrics.com/documentation/apijavascript
 *
 * @param {Object} page
 */

FoxMetrics.prototype.initialize = function(page){
  window._fxm = window._fxm || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

FoxMetrics.prototype.loaded = function(){
  return !! (window._fxm && window._fxm.appId);
};

/**
 * Page.
 *
 * @param {Page} page
 */

FoxMetrics.prototype.page = function(page){
  var properties = page.proxy('properties');
  var category = page.category();
  var name = page.name();
  this._category = category; // store for later

  push(
    '_fxm.pages.view',
    properties.title,   // title
    name,               // name
    category,           // category
    properties.url,     // url
    properties.referrer // referrer
  );
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

FoxMetrics.prototype.identify = function(identify){
  var id = identify.userId();

  if (!id) return;

  push(
    '_fxm.visitor.profile',
    id,                    // user id
    identify.firstName(), // first name
    identify.lastName(),  // last name
    identify.email(),     // email
    identify.address(),   // address
    undefined,            // social
    undefined,            // partners
    identify.traits()     // attributes
  );
};

/**
 * Track.
 *
 * @param {Track} track
 */

FoxMetrics.prototype.track = function(track){
  var props = track.properties();
  var category = this._category || props.category;
  push(track.event(), category, props);
};

/**
 * Viewed product.
 *
 * @param {Track} track
 * @api private
 */

FoxMetrics.prototype.viewedProduct = function(track){
  ecommerce('productview', track);
};

/**
 * Removed product.
 *
 * @param {Track} track
 * @api private
 */

FoxMetrics.prototype.removedProduct = function(track){
  ecommerce('removecartitem', track);
};

/**
 * Added product.
 *
 * @param {Track} track
 * @api private
 */

FoxMetrics.prototype.addedProduct = function(track){
  ecommerce('cartitem', track);
};

/**
 * Completed Order.
 *
 * @param {Track} track
 * @api private
 */

FoxMetrics.prototype.completedOrder = function(track){
  var orderId = track.orderId();

  // transaction
  push(
    '_fxm.ecommerce.order',
    orderId,
    track.subtotal(),
    track.shipping(),
    track.tax(),
    track.city(),
    track.state(),
    track.zip(),
    track.quantity()
  );

  // items
  each(track.products(), function(product){
    var track = new Track({ properties: product });
    ecommerce('purchaseitem', track, [
      track.quantity(),
      track.price(),
      orderId
    ]);
  });
};

/**
 * Track ecommerce `event` with `track`
 * with optional `arr` to append.
 *
 * @param {String} event
 * @param {Track} track
 * @param {Array} arr
 * @api private
 */

function ecommerce(event, track, arr){
  push.apply(null, [
    '_fxm.ecommerce.' + event,
    track.id() || track.sku(),
    track.name(),
    track.category()
  ].concat(arr || []));
}

}, {"global-queue":153,"analytics.js-integration":89,"facade":125,"each":11}],
297: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var bind = require('bind');
var when = require('when');
var is = require('is');

/**
 * Expose `Frontleaf` integration.
 */

var Frontleaf = module.exports = integration('Frontleaf')
  .assumesPageview()
  .global('_fl')
  .global('_flBaseUrl')
  .option('baseUrl', 'https://api.frontleaf.com')
  .option('token', '')
  .option('stream', '')
  .option('trackNamedPages', false)
  .option('trackCategorizedPages', false)
  .tag('<script id="_fl" src="{{ baseUrl }}/lib/tracker.js">');

/**
 * Initialize.
 *
 * http://docs.frontleaf.com/#/technical-implementation/tracking-customers/tracking-beacon
 *
 * @param {Object} page
 */

Frontleaf.prototype.initialize = function(page){
  window._fl = window._fl || [];
  window._flBaseUrl = window._flBaseUrl || this.options.baseUrl;
  this._push('setApiToken', this.options.token);
  this._push('setStream', this.options.stream);
  var loaded = bind(this, this.loaded);
  var ready = this.ready;
  this.load({ baseUrl: window._flBaseUrl }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Frontleaf.prototype.loaded = function(){
  return is.array(window._fl) && window._fl.ready === true;
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Frontleaf.prototype.identify = function(identify){
  var userId = identify.userId();
  if (userId) {
    this._push('setUser', {
      id: userId,
      name: identify.name() || identify.username(),
      data: clean(identify.traits())
    });
  }
};

/**
 * Group.
 *
 * @param {Group} group
 */

Frontleaf.prototype.group = function(group){
  var groupId = group.groupId();
  if (groupId) {
    this._push('setAccount', {
      id: groupId,
      name: group.proxy('traits.name'),
      data: clean(group.traits())
    });
  }
};

/**
 * Page.
 *
 * @param {Page} page
 */

Frontleaf.prototype.page = function(page){
  var category = page.category();
  var name = page.fullName();
  var opts = this.options;

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }
};

/**
 * Track.
 *
 * @param {Track} track
 */

Frontleaf.prototype.track = function(track){
  var event = track.event();
  this._push('event', event, clean(track.properties()));
};

/**
 * Push a command onto the global Frontleaf queue.
 *
 * @param {String} command
 * @return {Object} args
 * @api private
 */

Frontleaf.prototype._push = function(command){
  var args = [].slice.call(arguments, 1);
  window._fl.push(function(t){ t[command].apply(command, args); });
};

/**
 * Clean all nested objects and arrays.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */

function clean(obj){
  var ret = {};

  // Remove traits/properties that are already represented
  // outside of the data container
  var excludeKeys = ["id","name","firstName","lastName"];
  var len = excludeKeys.length;
  for (var i = 0; i < len; i++) {
    clear(obj, excludeKeys[i]);
  }

  // Flatten nested hierarchy, preserving arrays
  obj = flatten(obj);

  // Discard nulls, represent arrays as comma-separated strings
  for (var key in obj) {
    var val = obj[key];
    if (null == val) {
      continue;
    }

    if (is.array(val)) {
      ret[key] = val.toString();
      continue;
    }

    ret[key] = val;
  }

  return ret;
}

/**
 * Remove a property from an object if set.
 *
 * @param {Object} obj
 * @param {String} key
 * @api private
 */

function clear(obj, key){
  if (obj.hasOwnProperty(key)) {
    delete obj[key];
  }
}

/**
 * Flatten a nested object into a single level space-delimited
 * hierarchy.
 *
 * Based on https://github.com/hughsk/flat
 *
 * @param {Object} source
 * @return {Object}
 * @api private
 */

function flatten(source){
  var output = {};

  function step(object, prev){
    for (var key in object) {
      var value = object[key];
      var newKey = prev ? prev + ' ' + key : key;

      if (!is.array(value) && is.object(value)) {
        return step(value, newKey);
      }

      output[newKey] = value;
    }
  }

  step(source);

  return output;
}

}, {"analytics.js-integration":89,"bind":101,"when":124,"is":92}],
298: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `FullStory` integration.
 *
 * https://www.fullstory.com/docs/developer
 */

var FullStory = module.exports = integration('FullStory')
  .option('org', '')
  .option('debug', false)
  .tag('<script src="https://www.fullstory.com/s/fs.js"></script>')

/**
 * Initialize.
 */

FullStory.prototype.initialize = function(){
  var self = this;
  window['_fs_debug'] = this.options.debug;
  window['_fs_host'] = 'www.fullstory.com';
  window['_fs_org'] = this.options.org;

  (function(m,n,e,t,l,o,g,y){
    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){FS(l,v)};
    g.setSessionVars=function(v){FS('session',v)};g.setPageVars=function(v){FS('page',v)}; 
    self.ready();
    self.load();
  })(window,document,'FS','script','user');
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

FullStory.prototype.loaded = function(){
  return !! window.FS;
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

FullStory.prototype.identify = function(identify){
  var id = identify.userId();
  var traits = identify.traits();
  traits.displayName = identify.name();
  traits.email = identify.email();
  if (!id) return; // id is required
  window.FS.identify(id, traits);
};

}, {"analytics.js-integration":89}],
299: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_gauges');

/**
 * Expose `Gauges` integration.
 */

var Gauges = module.exports = integration('Gauges')
  .assumesPageview()
  .global('_gauges')
  .option('siteId', '')
  .tag('<script id="gauges-tracker" src="//secure.gaug.es/track.js" data-site-id="{{ siteId }}">');

/**
 * Initialize Gauges.
 *
 * http://get.gaug.es/documentation/tracking/
 *
 * @param {Object} page
 */

Gauges.prototype.initialize = function(page){
  window._gauges = window._gauges || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Gauges.prototype.loaded = function(){
  return !! (window._gauges && window._gauges.push !== Array.prototype.push);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Gauges.prototype.page = function(page){
  push('track');
};

}, {"analytics.js-integration":89,"global-queue":153}],
300: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var onBody = require('on-body');

/**
 * Expose `GetSatisfaction` integration.
 */

var GetSatisfaction = module.exports = integration('Get Satisfaction')
  .assumesPageview()
  .global('GSFN')
  .option('widgetId', '')
  .tag('<script src="https://loader.engage.gsfn.us/loader.js">');

/**
 * Initialize.
 *
 * https://console.getsatisfaction.com/start/101022?signup=true#engage
 *
 * @param {Object} page
 */

GetSatisfaction.prototype.initialize = function(page){
  var self = this;
  var widget = this.options.widgetId;
  var div = document.createElement('div');
  var id = div.id = 'getsat-widget-' + widget;
  onBody(function(body){ body.appendChild(div); });

  // usually the snippet is sync, so wait for it before initializing the tab
  this.load(function(){
    window.GSFN.loadWidget(widget, { containerId: id });
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

GetSatisfaction.prototype.loaded = function(){
  return !! window.GSFN;
};

}, {"analytics.js-integration":89,"on-body":122}],
301: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_gaq');
var length = require('object').length;
var canonical = require('canonical');
var useHttps = require('use-https');
var Track = require('facade').Track;
var callback = require('callback');
var defaults = require('defaults');
var load = require('load-script');
var keys = require('object').keys;
var select = require('select');
var dot = require('obj-case');
var each = require('each');
var type = require('type');
var url = require('url');
var is = require('is');
var group;
var user;

/**
 * Expose plugin.
 */

module.exports = exports = function(analytics){
  analytics.addIntegration(GA);
  group = analytics.group();
  user = analytics.user();
};

/**
 * Expose `GA` integration.
 *
 * http://support.google.com/analytics/bin/answer.py?hl=en&answer=2558867
 * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setSiteSpeedSampleRate
 */

var GA = exports.Integration = integration('Google Analytics')
  .readyOnLoad()
  .global('ga')
  .global('gaplugins')
  .global('_gaq')
  .global('GoogleAnalyticsObject')
  .option('anonymizeIp', false)
  .option('classic', false)
  .option('domain', 'auto')
  .option('doubleClick', false)
  .option('enhancedEcommerce', false)
  .option('enhancedLinkAttribution', false)
  .option('nonInteraction', false)
  .option('ignoredReferrers', null)
  .option('includeSearch', false)
  .option('siteSpeedSampleRate', 1)
  .option('trackingId', '')
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .option('sendUserId', false)
  .option('metrics', {})
  .option('dimensions', {})
  .tag('library', '<script src="//www.google-analytics.com/analytics.js">')
  .tag('double click', '<script src="//stats.g.doubleclick.net/dc.js">')
  .tag('http', '<script src="http://www.google-analytics.com/ga.js">')
  .tag('https', '<script src="https://ssl.google-analytics.com/ga.js">');

/**
 * On `construct` swap any config-based methods to the proper implementation.
 */

GA.on('construct', function(integration){
  if (integration.options.classic) {
    integration.initialize = integration.initializeClassic;
    integration.loaded = integration.loadedClassic;
    integration.page = integration.pageClassic;
    integration.track = integration.trackClassic;
    integration.completedOrder = integration.completedOrderClassic;

  } else if (integration.options.enhancedEcommerce) {
    integration.viewedProduct = integration.viewedProductEnhanced;
    integration.clickedProduct = integration.clickedProductEnhanced;
    integration.viewedProductDetails = integration.viewedProductDetailsEnhanced;
    integration.addedProduct = integration.addedProductEnhanced;
    integration.removedProduct = integration.removedProductEnhanced;
    integration.startedOrder = integration.startedOrderEnhanced;
    integration.viewedCheckoutStep = integration.viewedCheckoutStepEnhanced;
    integration.completedCheckoutStep = integration.completedCheckoutStepEnhanced;
    integration.updatedOrder = integration.updatedOrderEnhanced;
    integration.completedOrder = integration.completedOrderEnhanced;
    integration.refundedOrder = integration.refundedOrderEnhanced;
    integration.viewedPromotion = integration.viewedPromotionEnhanced;
    integration.clickedPromotion = integration.clickedPromotionEnhanced;
  }
});

/**
 * Initialize.
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced
 */

GA.prototype.initialize = function(){
  var opts = this.options;

  // setup the tracker globals
  window.GoogleAnalyticsObject = 'ga';
  window.ga = window.ga || function(){
    window.ga.q = window.ga.q || [];
    window.ga.q.push(arguments);
  };
  window.ga.l = new Date().getTime();

  if(window.location.hostname == 'localhost') opts.domain = 'none';

  window.ga('create', opts.trackingId, {
    cookieDomain: opts.domain || GA.prototype.defaults.domain, // to protect against empty string
    siteSpeedSampleRate: opts.siteSpeedSampleRate,
    allowLinker: true
  });

  // display advertising
  if (opts.doubleClick) {
    window.ga('require', 'displayfeatures');
  }

  // send global id
  if (opts.sendUserId && user.id()) {
    window.ga('set', 'userId', user.id());
  }

  // anonymize after initializing, otherwise a warning is shown
  // in google analytics debugger
  if (opts.anonymizeIp) window.ga('set', 'anonymizeIp', true);

  // custom dimensions & metrics
  var custom = metrics(user.traits(), opts);
  if (length(custom)) window.ga('set', custom);

  this.load('library', this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

GA.prototype.loaded = function(){
  return !! window.gaplugins;
};

/**
 * Page.
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/pages
 *
 * @param {Page} page
 */

GA.prototype.page = function(page){
  var category = page.category();
  var props = page.properties();
  var name = page.fullName();
  var pageview = {};
  var track;

  this._category = category; // store for later

  // send
  window.ga('send', 'pageview', {
    page: path(props, this.options),
    title: name || props.title,
    location: props.url
  });

  // categorized pages
  if (category && this.options.trackCategorizedPages) {
    track = page.track(category);
    this.track(track, { nonInteraction: 1 });
  }

  // named pages
  if (name && this.options.trackNamedPages) {
    track = page.track(name);
    this.track(track, { nonInteraction: 1 });
  }
};

/**
 * Track.
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/events
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference
 *
 * @param {Track} event
 */

GA.prototype.track = function(track, options){
  var contextOpts = track.options(this.name);
  var interfaceOpts = this.options;    
  var opts = defaults(options || {}, contextOpts);
  opts = defaults(opts, interfaceOpts);
  var props = track.properties();
  
  window.ga('send', 'event', {
    eventAction: track.event(),
    eventCategory: props.category || this._category || 'All',
    eventLabel: props.label,
    eventValue: formatValue(props.value || track.revenue()),
    nonInteraction: !!(props.nonInteraction || opts.nonInteraction)
  });
};

/**
 * Completed order.
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/ecommerce
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/ecommerce#multicurrency
 *
 * @param {Track} track
 * @api private
 */

GA.prototype.completedOrder = function(track){
  var total = track.total() || track.revenue() || 0;
  var orderId = track.orderId();
  var products = track.products();
  var props = track.properties();

  // orderId is required.
  if (!orderId) return;

  // require ecommerce
  if (!this.ecommerce) {
    window.ga('require', 'ecommerce');
    this.ecommerce = true;
  }

  // add transaction
  window.ga('ecommerce:addTransaction', {
    affiliation: props.affiliation,
    shipping: track.shipping(),
    revenue: total,
    tax: track.tax(),
    id: orderId,
    currency: track.currency()
  });

  // add products
  each(products, function(product){
    var track = new Track({ properties: product });
    window.ga('ecommerce:addItem', {
      category: track.category(),
      quantity: track.quantity(),
      price: track.price(),
      name: track.name(),
      sku: track.sku(),
      id: orderId,
      currency: track.currency()
    });
  });

  // send
  window.ga('ecommerce:send');
};

/**
 * Initialize (classic).
 *
 * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration
 */

GA.prototype.initializeClassic = function(){
  var opts = this.options;
  var anonymize = opts.anonymizeIp;
  var db = opts.doubleClick;
  var domain = opts.domain;
  var enhanced = opts.enhancedLinkAttribution;
  var ignore = opts.ignoredReferrers;
  var sample = opts.siteSpeedSampleRate;

  window._gaq = window._gaq || [];
  push('_setAccount', opts.trackingId);
  push('_setAllowLinker', true);

  if (anonymize) push('_gat._anonymizeIp');
  if (domain) push('_setDomainName', domain);
  if (sample) push('_setSiteSpeedSampleRate', sample);

  if (enhanced) {
    var protocol = 'https:' === document.location.protocol ? 'https:' : 'http:';
    var pluginUrl = protocol + '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    push('_require', 'inpage_linkid', pluginUrl);
  }

  if (ignore) {
    if (!is.array(ignore)) ignore = [ignore];
    each(ignore, function (domain) {
      push('_addIgnoredRef', domain);
    });
  }

  if (this.options.doubleClick) {
    this.load('double click', this.ready);
  } else {
    var name = useHttps() ? 'https' : 'http';
    this.load(name, this.ready);
  }
};

/**
 * Loaded? (classic)
 *
 * @return {Boolean}
 */

GA.prototype.loadedClassic = function(){
  return !! (window._gaq && window._gaq.push !== Array.prototype.push);
};

/**
 * Page (classic).
 *
 * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration
 *
 * @param {Page} page
 */

GA.prototype.pageClassic = function(page){
  var opts = page.options(this.name);
  var category = page.category();
  var props = page.properties();
  var name = page.fullName();
  var track;

  push('_trackPageview', path(props, this.options));

  // categorized pages
  if (category && this.options.trackCategorizedPages) {
    track = page.track(category);
    this.track(track, { nonInteraction: 1 });
  }

  // named pages
  if (name && this.options.trackNamedPages) {
    track = page.track(name);
    this.track(track, { nonInteraction: 1 });
  }
};

/**
 * Track (classic).
 *
 * https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiEventTracking
 *
 * @param {Track} track
 */

GA.prototype.trackClassic = function(track, options){
  var opts = options || track.options(this.name);
  var props = track.properties();
  var revenue = track.revenue();
  var event = track.event();
  var category = this._category || props.category || 'All';
  var label = props.label;
  var value = formatValue(revenue || props.value);
  var nonInteraction = !!(props.nonInteraction || opts.nonInteraction);
  push('_trackEvent', category, event, label, value, nonInteraction);
};

/**
 * Completed order.
 *
 * https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingEcommerce
 * https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingEcommerce#localcurrencies
 *
 * @param {Track} track
 * @api private
 */

GA.prototype.completedOrderClassic = function(track){
  var total = track.total() || track.revenue() || 0;
  var orderId = track.orderId();
  var products = track.products() || [];
  var props = track.properties();
  var currency = track.currency();

  // required
  if (!orderId) return;

  // add transaction
  push('_addTrans'
    , orderId
    , props.affiliation
    , total
    , track.tax()
    , track.shipping()
    , track.city()
    , track.state()
    , track.country());

  // add items
  each(products, function(product){
    var track = new Track({ properties: product });
    push('_addItem'
      , orderId
      , track.sku()
      , track.name()
      , track.category()
      , track.price()
      , track.quantity());
  });

  // send
  push('_set', 'currencyCode', currency);
  push('_trackTrans');
};

/**
 * Return the path based on `properties` and `options`.
 *
 * @param {Object} properties
 * @param {Object} options
 */

function path(properties, options) {
  if (!properties) return;
  var str = properties.path;
  if (options.includeSearch && properties.search) str += properties.search;
  return str;
}

/**
 * Format the value property to Google's liking.
 *
 * @param {Number} value
 * @return {Number}
 */

function formatValue(value) {
  if (!value || value < 0) return 0;
  return Math.round(value);
}

/**
 * Map google's custom dimensions & metrics with `obj`.
 *
 * Example:
 *
 *      metrics({ revenue: 1.9 }, { { metrics : { revenue: 'metric8' } });
 *      // => { metric8: 1.9 }
 *
 *      metrics({ revenue: 1.9 }, {});
 *      // => {}
 *
 * @param {Object} obj
 * @param {Object} data
 * @return {Object|null}
 * @api private
 */

function metrics(obj, data){
  var dimensions = data.dimensions;
  var metrics = data.metrics;
  var names = keys(metrics).concat(keys(dimensions));
  var ret = {};

  for (var i = 0; i < names.length; ++i) {
    var name = names[i];
    var key = metrics[name] || dimensions[name];
    var value = dot(obj, name) || obj[name];
    if (null == value) continue;
    ret[key] = value;
  }

  return ret;
}

/**
 * Loads ec.js (unless already loaded)
 */

GA.prototype.loadEnhancedEcommerce = function(track){
  if (!this.enhancedEcommerceLoaded) {
    window.ga('require', 'ec');
    this.enhancedEcommerceLoaded = true;
  }

  // Ensure we set currency for every hit
  window.ga('set', '&cu', track.currency());
};

/**
 * Pushes an event and all previously set EE data to GA.
 */

GA.prototype.pushEnhancedEcommerce = function(track){
  // Send a custom non-interaction event to ensure all EE data is pushed.
  // Without doing this we'd need to require page display after setting EE data.
  ga('send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1});
};

/**
 * Started order - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-steps
 *
 * @param {Track} track
 */

GA.prototype.startedOrderEnhanced = function(track) {
  // same as viewed checkout step #1
  this.viewedCheckoutStep(track);
};

/**
 * Updated order - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-steps
 *
 * @param {Track} track
 */

GA.prototype.updatedOrderEnhanced = function(track){
  // Same event as started order - will override
  this.startedOrderEnhanced(track);
};

/**
 * Viewed checkout step - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-steps
 *
 * @param {Track} track
 */

GA.prototype.viewedCheckoutStepEnhanced = function(track){
  var products = track.products();
  var props = track.properties();
  var options = extractCheckoutOptions(props);

  this.loadEnhancedEcommerce(track);

  each(products, function(product){
    var track = new Track({ properties: product });
    enhancedEcommerceTrackProduct(track);
  });

  window.ga('ec:setAction','checkout', {
    'step': props.step || 1,
    'option': options || undefined,
  });

  this.pushEnhancedEcommerce();
};

/**
 * Completed checkout step - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#checkout-options
 *
 * @param {Track} track
 */

GA.prototype.completedCheckoutStepEnhanced = function(track){
  var props = track.properties();
  var options = extractCheckoutOptions(props);

  // Only send an event if we have step and options to update
  if (!props.step || !options) return;

  this.loadEnhancedEcommerce(track);

  window.ga('ec:setAction', 'checkout_option', {
    step: props.step || 1,
    option: options,
  });

  window.ga('send', 'event', 'Checkout', 'Option');
};

/**
 * Completed order - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-transactions
 *
 * @param {Track} track
 */

GA.prototype.completedOrderEnhanced = function(track){
  var total = track.total() || track.revenue() || 0;
  var orderId = track.orderId();
  var products = track.products();
  var props = track.properties();

  // orderId is required.
  if (!orderId) return;

  this.loadEnhancedEcommerce(track);

  each(products, function(product){
    var track = new Track({ properties: product });
    enhancedEcommerceTrackProduct(track);
  });

  window.ga('ec:setAction', 'purchase', {
    id: orderId,
    affiliation: props.affiliation,
    revenue: total,
    tax: track.tax(),
    shipping: track.shipping(),
    coupon: track.coupon(),
  });

  this.pushEnhancedEcommerce(track);
};

/**
 * Refunded order - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-refunds
 *
 * @param {Track} track
 */

GA.prototype.refundedOrderEnhanced = function(track) {
  var orderId = track.orderId();
  var products = track.products();

  // orderId is required.
  if (!orderId) return;

  this.loadEnhancedEcommerce(track);

  // Without any products it's a full refund
  each(products, function(product){
    var track = new Track({ properties: product });
    window.ga('ec:addProduct', {
      id: track.id() || track.sku(),
      quantity: track.quantity(),
    });
  });

  window.ga('ec:setAction', 'refund', {
    id: orderId,
  });

  this.pushEnhancedEcommerce(track);
};

/**
 * Added product - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#add-remove-cart
 *
 * @param {Track} track
 */

GA.prototype.addedProductEnhanced = function(track) {
  this.loadEnhancedEcommerce(track);
  enhancedEcommerceProductAction(track, 'add');
  this.pushEnhancedEcommerce(track);
};

/**
 * Removed product - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#add-remove-cart
 *
 * @param {Track} track
 */

GA.prototype.removedProductEnhanced = function(track) {
  this.loadEnhancedEcommerce(track);
  enhancedEcommerceProductAction(track, 'remove');
  this.pushEnhancedEcommerce(track);
};

/**
 * Viewed product details - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#product-detail-view
 *
 * @param {Track} track
 */

GA.prototype.viewedProductDetailsEnhanced = function(track) {
  this.loadEnhancedEcommerce(track);
  enhancedEcommerceProductAction(track, 'detail');
  this.pushEnhancedEcommerce(track);
};

/**
 * Viewed product - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-impressions
 *
 * @param {Track} track
 */

GA.prototype.viewedProductEnhanced = function(track) {
  var props = track.properties();

  this.loadEnhancedEcommerce(track);
  ga('ec:addImpression', {
    id: track.id() || track.sku(),
    name: track.name(),
    category: track.category(),
    brand: props.brand,
    variant: props.variant,
    list: props.list,
    position: props.position,
  });
  this.pushEnhancedEcommerce(track);
};

/**
 * Clicked product - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-actions
 *
 * @param {Track} track
 */

GA.prototype.clickedProductEnhanced = function(track) {
  var props = track.properties();

  this.loadEnhancedEcommerce(track);
  enhancedEcommerceProductAction(track, 'click', {
    list: props.list
  });
  this.pushEnhancedEcommerce(track);
};

/**
 * Viewed promotion - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-promo-impressions
 *
 * @param {Track} track
 */

GA.prototype.viewedPromotionEnhanced = function(track) {
  var props = track.properties();

  this.loadEnhancedEcommerce(track);
  window.ga('ec:addPromo', {
    id: track.id(),
    name: track.name(),
    creative: props.creative,
    position: props.position,
  });
  this.pushEnhancedEcommerce(track);
};

/**
 * Clicked promotion - Enhanced Ecommerce
 *
 * https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce#measuring-promo-clicks
 *
 * @param {Track} track
 */

GA.prototype.clickedPromotionEnhanced = function(track) {
  var props = track.properties();

  this.loadEnhancedEcommerce(track);
  window.ga('ec:addPromo', {
    id: track.id(),
    name: track.name(),
    creative: props.creative,
    position: props.position,
  });
  ga('ec:setAction', 'promo_click', {});
  this.pushEnhancedEcommerce(track);
};

/**
 * Enhanced ecommerce track product.
 *
 * Simple helper so that we don't repeat `ec:addProduct` everywhere.
 *
 * @param {Track} track
 */

function enhancedEcommerceTrackProduct(track) {
  var props = track.properties();

  window.ga('ec:addProduct', {
    id: track.id() || track.sku(),
    name: track.name(),
    category: track.category(),
    quantity: track.quantity(),
    price: track.price(),
    brand: props.brand,
    variant: props.variant,
  });
}

/**
 * Set `action` on `track` with `data`.
 *
 * @param {Track} track
 * @param {String} action
 * @param {Object} data
 */

function enhancedEcommerceProductAction(track, action, data) {
  enhancedEcommerceTrackProduct(track);
  window.ga('ec:setAction', action, data || {});
}

/**
 * Extracts checkout options.
 *
 * @param {Object} props
 * @return {Null|String}
 */

function extractCheckoutOptions(props) {
  var options = [
    props.paymentMethod,
    props.shippingMethod
  ];

  // Remove all nulls, empty strings, zeroes, and join with commas.
  var valid = select(options, function(e){return e; });
  return valid.length > 0 ? valid.join(', ') : null;
}

}, {"analytics.js-integration":89,"global-queue":153,"object":5,"canonical":160,"use-https":91,"facade":125,"callback":94,"defaults":152,"load-script":121,"select":161,"obj-case":162,"each":11,"type":13,"url":163,"is":92}],
302: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var push = require('global-queue')('dataLayer', { wrap: false });
var integration = require('analytics.js-integration');

/**
 * Expose `GTM`.
 */

var GTM = module.exports = integration('Google Tag Manager')
  .assumesPageview()
  .global('dataLayer')
  .global('google_tag_manager')
  .option('containerId', '')
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .tag('<script src="//www.googletagmanager.com/gtm.js?id={{ containerId }}&l=dataLayer">');

/**
 * Initialize.
 *
 * https://developers.google.com/tag-manager
 *
 * @param {Object} page
 */

GTM.prototype.initialize = function(){
  push({ 'gtm.start': +new Date, event: 'gtm.js' });
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

GTM.prototype.loaded = function(){
  return !! (window.dataLayer && [].push != window.dataLayer.push);
};

/**
 * Page.
 *
 * @param {Page} page
 * @api public
 */

GTM.prototype.page = function(page){
  var category = page.category();
  var props = page.properties();
  var name = page.fullName();
  var opts = this.options;
  var track;

  // all
  if (opts.trackAllPages) {
    this.track(page.track());
  }

  // categorized
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }

  // named
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }
};

/**
 * Track.
 *
 * https://developers.google.com/tag-manager/devguide#events
 *
 * @param {Track} track
 * @api public
 */

GTM.prototype.track = function(track){
  var props = track.properties();
  props.event = track.event();
  push(props);
};

}, {"global-queue":153,"analytics.js-integration":89}],
303: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var Identify = require('facade').Identify;
var Track = require('facade').Track;
var callback = require('callback');
var load = require('load-script');
var onBody = require('on-body');
var each = require('each');

/**
 * Expose `GoSquared` integration.
 */

var GoSquared = module.exports = integration('GoSquared')
  .assumesPageview()
  .global('_gs')
  .option('siteToken', '')
  .option('anonymizeIP', false)
  .option('cookieDomain', null)
  .option('useCookies', true)
  .option('trackHash', false)
  .option('trackLocal', false)
  .option('trackParams', true)
  .tag('<script src="//d1l6p2sc9645hc.cloudfront.net/tracker.js">');

/**
 * Initialize.
 *
 * https://www.gosquared.com/developer/tracker
 * Options: https://www.gosquared.com/developer/tracker/configuration
 *
 * @param {Object} page
 */

GoSquared.prototype.initialize = function(page){
  var self = this;
  var options = this.options;
  var user = this.analytics.user();
  push(options.siteToken);

  each(options, function(name, value){
    if ('siteToken' == name) return;
    if (null == value) return;
    push('set', name, value);
  });

  self.identify(new Identify({
    traits: user.traits(),
    userId: user.id()
  }));

  self.load(this.ready);
};

/**
 * Loaded? (checks if the tracker version is set)
 *
 * @return {Boolean}
 */

GoSquared.prototype.loaded = function(){
  return !! (window._gs && window._gs.v);
};

/**
 * Page.
 *
 * https://www.gosquared.com/developer/tracker/pageviews
 *
 * @param {Page} page
 */

GoSquared.prototype.page = function(page){
  var props = page.properties();
  var name = page.fullName();
  push('track', props.path, name || props.title)
};

/**
 * Identify.
 *
 * https://www.gosquared.com/developer/tracker/tagging
 *
 * @param {Identify} identify
 */

GoSquared.prototype.identify = function(identify){
  var traits = identify.traits({ userId: 'userID' });
  var username = identify.username();
  var email = identify.email();
  var id = identify.userId();
  if (id) push('set', 'visitorID', id);
  var name =  email || username || id;
  if (name) push('set', 'visitorName', name);
  push('set', 'visitor', traits);
};

/**
 * Track.
 *
 * https://www.gosquared.com/developer/tracker/events
 *
 * @param {Track} track
 */

GoSquared.prototype.track = function(track){
  push('event', track.event(), track.properties());
};

/**
 * Checked out.
 *
 * @param {Track} track
 * @api private
 */

GoSquared.prototype.completedOrder = function(track){
  var products = track.products();
  var items = [];

  each(products, function(product){
    var track = new Track({ properties: product });
    items.push({
      category: track.category(),
      quantity: track.quantity(),
      price: track.price(),
      name: track.name(),
    });
  })

  push('transaction', track.orderId(), {
    revenue: track.total(),
    track: true
  }, items);
};

/**
 * Push to `_gs.q`.
 *
 * @param {...} args
 * @api private
 */

function push(){
  var _gs = window._gs = window._gs || function(){
    (_gs.q = _gs.q || []).push(arguments);
  };
  _gs.apply(null, arguments);
}

}, {"analytics.js-integration":89,"facade":125,"callback":94,"load-script":121,"on-body":122,"each":11}],
304: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var alias = require('alias');

/**
 * Expose `Heap` integration.
 */

var Heap = module.exports = integration('Heap')
  .assumesPageview()
  .global('heap')
  .global('_heapid')
  .option('appId', '')
  .tag('<script src="//d36lvucg9kzous.cloudfront.net">');

/**
 * Initialize.
 *
 * https://heapanalytics.com/docs#installWeb
 *
 * @param {Object} page
 */

Heap.prototype.initialize = function(page){
  window.heap=window.heap||[];window.heap.load=function(a){window._heapid=a;var d=function(a){return function(){window.heap.push([a].concat(Array.prototype.slice.call(arguments,0)));};},e=["identify","track"];for (var f=0;f<e.length;f++)window.heap[e[f]]=d(e[f]);};
  window.heap.load(this.options.appId);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Heap.prototype.loaded = function(){
  return (window.heap && window.heap.appid);
};

/**
 * Identify.
 *
 * https://heapanalytics.com/docs#identify
 *
 * @param {Identify} identify
 */

Heap.prototype.identify = function(identify){
  var traits = identify.traits();
  var username = identify.username();
  var id = identify.userId();
  var handle = username || id;
  if (handle) traits.handle = handle;
  delete traits.username;
  window.heap.identify(traits);
};

/**
 * Track.
 *
 * https://heapanalytics.com/docs#track
 *
 * @param {Track} track
 */

Heap.prototype.track = function(track){
  window.heap.track(track.event(), track.properties());
};

}, {"analytics.js-integration":89,"alias":158}],
305: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `hellobar.com` integration.
 */

var Hellobar = module.exports = integration('Hello Bar')
  .assumesPageview()
  .global('_hbq')
  .option('apiKey', '')
  .tag('<script src="//s3.amazonaws.com/scripts.hellobar.com/{{ apiKey }}.js">');

/**
 * Initialize.
 *
 * https://s3.amazonaws.com/scripts.hellobar.com/bb900665a3090a79ee1db98c3af21ea174bbc09f.js
 *
 * @param {Object} page
 */

Hellobar.prototype.initialize = function(page){
  window._hbq = window._hbq || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Hellobar.prototype.loaded = function(){
  return !! (window._hbq && window._hbq.push !== Array.prototype.push);
};

}, {"analytics.js-integration":89}],
306: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var is = require('is');

/**
 * Expose `HitTail` integration.
 */

var HitTail = module.exports = integration('HitTail')
  .assumesPageview()
  .global('htk')
  .option('siteId', '')
  .tag('<script src="//{{ siteId }}.hittail.com/mlt.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

HitTail.prototype.initialize = function(page){
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

HitTail.prototype.loaded = function(){
  return is.fn(window.htk);
};

}, {"analytics.js-integration":89,"is":92}],
307: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_hsq');
var convert = require('convert-dates');

/**
 * Expose `HubSpot` integration.
 */

var HubSpot = module.exports = integration('HubSpot')
  .assumesPageview()
  .global('_hsq')
  .option('portalId', null)
  .tag('<script id="hs-analytics" src="https://js.hs-analytics.net/analytics/{{ cache }}/{{ portalId }}.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

HubSpot.prototype.initialize = function(page){
  window._hsq = [];
  var cache = Math.ceil(new Date() / 300000) * 300000;
  this.load({ cache: cache }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

HubSpot.prototype.loaded = function(){
  return !! (window._hsq && window._hsq.push !== Array.prototype.push);
};

/**
 * Page.
 *
 * @param {String} category (optional)
 * @param {String} name (optional)
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 */

HubSpot.prototype.page = function(page){
  push('_trackPageview');
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

HubSpot.prototype.identify = function(identify){
  if (!identify.email()) return;
  var traits = identify.traits();
  traits = convertDates(traits);
  push('identify', traits);
};

/**
 * Track.
 *
 * @param {Track} track
 */

HubSpot.prototype.track = function(track){
  var props = track.properties();
  props = convertDates(props);
  push('trackEvent', track.event(), props);
};

/**
 * Convert all the dates in the HubSpot properties to millisecond times
 *
 * @param {Object} properties
 */

function convertDates(properties){
  return convert(properties, function(date){ return date.getTime(); });
}

}, {"analytics.js-integration":89,"global-queue":153,"convert-dates":159}],
308: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var alias = require('alias');

/**
 * Expose `Improvely` integration.
 */

var Improvely = module.exports = integration('Improvely')
  .assumesPageview()
  .global('_improvely')
  .global('improvely')
  .option('domain', '')
  .option('projectId', null)
  .tag('<script src="//{{ domain }}.iljmp.com/improvely.js">');

/**
 * Initialize.
 *
 * http://www.improvely.com/docs/landing-page-code
 *
 * @param {Object} page
 */

Improvely.prototype.initialize = function(page){
  window._improvely = [];
  window.improvely = { init: function(e, t){ window._improvely.push(["init", e, t]); }, goal: function(e){ window._improvely.push(["goal", e]); }, label: function(e){ window._improvely.push(["label", e]); }};

  var domain = this.options.domain;
  var id = this.options.projectId;
  window.improvely.init(domain, id);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Improvely.prototype.loaded = function(){
  return !! (window.improvely && window.improvely.identify);
};

/**
 * Identify.
 *
 * http://www.improvely.com/docs/labeling-visitors
 *
 * @param {Identify} identify
 */

Improvely.prototype.identify = function(identify){
  var id = identify.userId();
  if (id) window.improvely.label(id);
};

/**
 * Track.
 *
 * http://www.improvely.com/docs/conversion-code
 *
 * @param {Track} track
 */

Improvely.prototype.track = function(track){
  var props = track.properties({ revenue: 'amount' });
  props.type = track.event();
  window.improvely.goal(props);
};

}, {"analytics.js-integration":89,"alias":158}],
309: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_iva');
var Track = require('facade').Track;
var each = require('each');
var is = require('is');

/**
 * HOP.
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Expose `InsideVault` integration.
 */

var InsideVault = module.exports = integration('InsideVault')
  .global('_iva')
  .option('clientId', '')
  .option('domain', '')
  .tag('<script src="//analytics.staticiv.com/iva.js">')
  .mapping('events');

/**
 * Initialize.
 *
 * @param page
 */

InsideVault.prototype.initialize = function(page){
  var domain = this.options.domain;
  window._iva = window._iva || [];
  push('setClientId', this.options.clientId);
  var userId = this.analytics.user().id();
  if (userId) push('setUserId', userId);
  if (domain) push('setDomain', domain);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

InsideVault.prototype.loaded = function(){
  return !! (window._iva && window._iva.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

InsideVault.prototype.identify = function(identify){
  push('setUserId', identify.userId());
};


/**
 * Page.
 *
 * @param {Page} page
 */

InsideVault.prototype.page = function(page){
  // they want every landing page to send a "click" event.
  push('trackEvent', 'click');
};

/**
 * Track.
 *
 * Tracks everything except 'sale' events.
 *
 * @param {Track} track
 */

InsideVault.prototype.track = function(track){
  var user = this.analytics.user();
  var events = this.events(track.event());
  var value = track.revenue() || track.value() || 0;
  var eventId = track.orderId() || user.id() || '';
  each(events, function(event){
    // 'sale' is a special event that will be routed to a table that is deprecated on InsideVault's end.
    // They don't want a generic 'sale' event to go to their deprecated table.
    if (event != 'sale') {
      push('trackEvent', event, value, eventId);
    }
  });
};

}, {"analytics.js-integration":89,"global-queue":153,"facade":125,"each":11,"is":92}],
310: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('__insp');
var alias = require('alias');
var clone = require('clone');

/**
 * Expose `Inspectlet` integration.
 */

var Inspectlet = module.exports = integration('Inspectlet')
  .assumesPageview()
  .global('__insp')
  .global('__insp_')
  .option('wid', '')
  .tag('<script src="//cdn.inspectlet.com/inspectlet.js">');

/**
 * Initialize.
 *
 * https://www.inspectlet.com/dashboard/embedcode/1492461759/initial
 *
 * @param {Object} page
 */

Inspectlet.prototype.initialize = function(page){
  push('wid', this.options.wid);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Inspectlet.prototype.loaded = function(){
  return !! (window.__insp_ && window.__insp);
};

/**
 * Identify.
 *
 * http://www.inspectlet.com/docs#tagging
 *
 * @param {Identify} identify
 */

Inspectlet.prototype.identify = function (identify) {
  var traits = identify.traits({ id: 'userid' });
  push('tagSession', traits);
};

/**
 * Track.
 *
 * http://www.inspectlet.com/docs/tags
 *
 * @param {Track} track
 */

Inspectlet.prototype.track = function(track){
  push('tagSession', track.event());
};

/**
 * Page.
 *
 * http://www.inspectlet.com/docs/tags
 *
 * @param {Track} track
 */

Inspectlet.prototype.page = function(){
  push('virtualPage');
};

}, {"analytics.js-integration":89,"global-queue":153,"alias":158,"clone":157}],
311: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var convertDates = require('convert-dates');
var defaults = require('defaults');
var isEmail = require('is-email');
var load = require('load-script');
var empty = require('is-empty');
var alias = require('alias');
var each = require('each');
var when = require('when');
var is = require('is');

/**
 * Expose `Intercom` integration.
 */

var Intercom = module.exports = integration('Intercom')
  .assumesPageview()
  .global('Intercom')
  .option('activator', '#IntercomDefaultWidget')
  .option('appId', '')
  .option('inbox', false)
  .tag('<script src="https://static.intercomcdn.com/intercom.v1.js">');

/**
 * Initialize.
 *
 * http://docs.intercom.io/
 * http://docs.intercom.io/#IntercomJS
 *
 * @param {Object} page
 */

Intercom.prototype.initialize = function(page){
  var self = this;
  this.load(function(){
    when(function(){ return self.loaded(); }, self.ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Intercom.prototype.loaded = function(){
  return is.fn(window.Intercom);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Intercom.prototype.page = function(page){
  window.Intercom('update');
};

/**
 * Identify.
 *
 * http://docs.intercom.io/#IntercomJS
 *
 * @param {Identify} identify
 */

Intercom.prototype.identify = function(identify){
  var traits = identify.traits({ userId: 'user_id' });
  var activator = this.options.activator;
  var opts = identify.options(this.name);
  var companyCreated = identify.companyCreated();
  var created = identify.created();
  var email = identify.email();
  var name = identify.name();
  var id = identify.userId();
  var group = this.analytics.group();

  if (!id && !traits.email) return; // one is required

  traits.app_id = this.options.appId;

  // intercom requires `company` to be an object. default it with group traits
  // so that we guarantee an `id` is there, since they require it
  if (null != traits.company && !is.object(traits.company)) delete traits.company;
  if (traits.company) defaults(traits.company, group.traits());

  // name
  if (name) traits.name = name;

  // handle dates
  if (traits.company && companyCreated) traits.company.created = companyCreated;
  if (created) traits.created = created;

  // convert dates
  traits = convertDates(traits, formatDate);
  traits = alias(traits, { created: 'created_at'});
  if (traits.company) traits.company = alias(traits.company, { created: 'created_at' });

  // handle options
  if (opts.increments) traits.increments = opts.increments;
  if (opts.userHash) traits.user_hash = opts.userHash;
  if (opts.user_hash) traits.user_hash = opts.user_hash;

  // Intercom, will force the widget to appear
  // if the selector is #IntercomDefaultWidget
  // so no need to check inbox, just need to check
  // that the selector isn't #IntercomDefaultWidget.
  if ('#IntercomDefaultWidget' != activator) {
    traits.widget = { activator: activator };
  }

  var method = this._id !== id ? 'boot': 'update';
  this._id = id; // cache for next time

  window.Intercom(method, traits);
};

/**
 * Group.
 *
 * @param {Group} group
 */

Intercom.prototype.group = function(group){
  var props = group.properties();
  var id = group.groupId();
  if (id) props.id = id;
  window.Intercom('update', { company: props });
};

/**
 * Track.
 *
 * @param {Track} track
 */

Intercom.prototype.track = function(track){
  window.Intercom('trackEvent', track.event(), track.properties());
};

/**
 * Format a date to Intercom's liking.
 *
 * @param {Date} date
 * @return {Number}
 */

function formatDate(date) {
  return Math.floor(date / 1000);
}

}, {"analytics.js-integration":89,"convert-dates":159,"defaults":152,"is-email":148,"load-script":121,"is-empty":120,"alias":158,"each":11,"when":124,"is":92}],
312: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var clone = require('clone');

/**
 * Expose `Keen IO` integration.
 */

var Keen = module.exports = integration('Keen IO')
  .global('Keen')
  .option('projectId', '')
  .option('readKey', '')
  .option('writeKey', '')
  .option('ipAddon', false)
  .option('uaAddon', false)
  .option('urlAddon', false)
  .option('referrerAddon', false)
  .option('trackNamedPages', true)
  .option('trackAllPages', false)
  .option('trackCategorizedPages', true)
  .tag('<script src="//d26b395fwzu5fz.cloudfront.net/3.0.7/{{ lib }}.min.js">');

/**
 * Initialize.
 *
 * https://keen.io/docs/
 */

Keen.prototype.initialize = function(){
  var options = this.options;
  !function(a,b){if(void 0===b[a]){b["_"+a]={},b[a]=function(c){b["_"+a].clients=b["_"+a].clients||{},b["_"+a].clients[c.projectId]=this,this._config=c},b[a].ready=function(c){b["_"+a].ready=b["_"+a].ready||[],b["_"+a].ready.push(c)};for(var c=["addEvent","setGlobalProperties","trackExternalLink","on"],d=0;d<c.length;d++){var e=c[d],f=function(a){return function(){return this["_"+a]=this["_"+a]||[],this["_"+a].push(arguments),this}};b[a].prototype[e]=f(e)}}}("Keen",window);
  this.client = new window.Keen({
    projectId: options.projectId,
    writeKey: options.writeKey,
    readKey: options.readKey
  });

  // if you have a read-key, then load the full keen library
  var lib = this.options.readKey ? 'keen' : 'keen-tracker';
  this.load({ lib: lib }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Keen.prototype.loaded = function(){
  return !!(window.Keen && window.Keen.prototype.configure);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Keen.prototype.page = function(page){
  var category = page.category();
  var props = page.properties();
  var name = page.fullName();
  var opts = this.options;

  // all pages
  if (opts.trackAllPages) {
    this.track(page.track());
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }
};

/**
 * Identify.
 *
 * TODO: migrate from old `userId` to simpler `id`
 * https://keen.io/docs/data-collection/data-enrichment/#add-ons
 *
 * Set up the Keen addons object. These must be specifically
 * enabled by the settings in order to include the plugins, or else
 * Keen will reject the request.
 *
 * @param {Identify} identify
 */

Keen.prototype.identify = function(identify){
  var traits = identify.traits();
  var id = identify.userId();
  var user = {};
  if (id) user.userId = id;
  if (traits) user.traits = traits;
  var props = { user: user };
  this.addons(props, identify);
  this.client.setGlobalProperties(function(){
    return clone(props);
  });
};

/**
 * Track.
 *
 * @param {Track} track
 */

Keen.prototype.track = function(track){
  var props = track.properties();
  this.addons(props, track);
  this.client.addEvent(track.event(), props);
};

/**
 * Attach addons to `obj` with `msg`.
 *
 * @param {Object} obj
 * @param {Facade} msg
 */

Keen.prototype.addons = function(obj, msg){
  var options = this.options;
  var addons = [];

  if (options.ipAddon) {
    addons.push({
      name: 'keen:ip_to_geo',
      input: { ip: 'ip_address' },
      output: 'ip_geo_info'
    });
    obj.ip_address = '${keen.ip}';
  }

  if (options.uaAddon) {
    addons.push({
      name: 'keen:ua_parser',
      input: { ua_string: 'user_agent' },
      output: 'parsed_user_agent'
    });
    obj.user_agent = '${keen.user_agent}';
  }

  if (options.urlAddon) {
    addons.push({
      name: 'keen:url_parser',
      input: { url: 'page_url' },
      output: 'parsed_page_url'
    });
    obj.page_url = document.location.href;
  }

  if (options.referrerAddon) {
    addons.push({
      name: 'keen:referrer_parser',
      input: {
        referrer_url: 'referrer_url',
        page_url: 'page_url'
      },
      output: 'referrer_info'
    });
    obj.referrer_url = document.referrer;
    obj.page_url = document.location.href;
  }

  obj.keen = {
    timestamp: msg.timestamp(),
    addons: addons
  };
};

}, {"analytics.js-integration":89,"clone":157}],
313: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var indexof = require('indexof');
var is = require('is');

/**
 * Expose `Kenshoo` integration.
 */

var Kenshoo = module.exports = integration('Kenshoo')
  .global('k_trackevent')
  .option('cid', '')
  .option('subdomain', '')
  .option('events', [])
  .tag('<script src="//{{ subdomain }}.xg4ken.com/media/getpx.php?cid={{ cid }}">');

/**
 * Initialize.
 *
 * See https://gist.github.com/justinboyle/7875832
 *
 * @param {Object} page
 */

Kenshoo.prototype.initialize = function(page){
  this.load(this.ready);
};

/**
 * Loaded? (checks if the tracking function is set)
 *
 * @return {Boolean}
 */

Kenshoo.prototype.loaded = function(){
  return is.fn(window.k_trackevent);
};

/**
 * Track.
 *
 * Only tracks events if they are listed in the events array option.
 * We've asked for docs a few times but no go :/
 *
 * https://github.com/jorgegorka/the_tracker/blob/master/lib/the_tracker/trackers/kenshoo.rb
 *
 * @param {Track} event
 */

Kenshoo.prototype.track = function(track){
  var events = this.options.events;
  var traits = track.traits();
  var event = track.event();
  var revenue = track.revenue() || 0;
  if (!~indexof(events, event)) return;

  var params = [
    'id=' + this.options.cid,
    'type=conv',
    'val=' + revenue,
    'orderId=' + track.orderId(),
    'promoCode=' + track.coupon(),
    'valueCurrency=' + track.currency(),

    // Live tracking fields. Ignored for now (until we get documentation).
    'GCID=',
    'kw=',
    'product='
  ];

  window.k_trackevent(params, this.options.subdomain);
};

}, {"analytics.js-integration":89,"indexof":114,"is":92}],
314: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_kmq');
var Track = require('facade').Track;
var alias = require('alias');
var Batch = require('batch');
var each = require('each');
var is = require('is');

/**
 * Expose `KISSmetrics` integration.
 */

var KISSmetrics = module.exports = integration('KISSmetrics')
  .assumesPageview()
  .global('_kmq')
  .global('KM')
  .global('_kmil')
  .option('apiKey', '')
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .option('prefixProperties', true)
  .tag('useless', '<script src="//i.kissmetrics.com/i.js">')
  .tag('library', '<script src="//doug1izaerwt3.cloudfront.net/{{ apiKey }}.1.js">');

/**
 * Check if browser is mobile, for kissmetrics.
 *
 * http://support.kissmetrics.com/how-tos/browser-detection.html#mobile-vs-non-mobile
 */

exports.isMobile = navigator.userAgent.match(/Android/i)
  || navigator.userAgent.match(/BlackBerry/i)
  || navigator.userAgent.match(/iPhone|iPod/i)
  || navigator.userAgent.match(/iPad/i)
  || navigator.userAgent.match(/Opera Mini/i)
  || navigator.userAgent.match(/IEMobile/i);

/**
 * Initialize.
 *
 * http://support.kissmetrics.com/apis/javascript
 *
 * @param {Object} page
 */

KISSmetrics.prototype.initialize = function(page){
  var self = this;
  window._kmq = [];
  if (exports.isMobile) push('set', { 'Mobile Session': 'Yes' });

  var batch = new Batch();
  batch.push(function(done){ self.load('useless', done); }) // :)
  batch.push(function(done){ self.load('library', done); })
  batch.end(function(){
    self.trackPage(page);
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

KISSmetrics.prototype.loaded = function(){
  return is.object(window.KM);
};

/**
 * Page.
 *
 * @param {Page} page
 */

KISSmetrics.prototype.page = function(page){
  if (!window.KM_SKIP_PAGE_VIEW) window.KM.pageView();
  this.trackPage(page);
};

/**
 * Track page.
 *
 * @param {Page} page
 */

KISSmetrics.prototype.trackPage = function(page){
  var category = page.category();
  var name = page.fullName();
  var opts = this.options;

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

KISSmetrics.prototype.identify = function(identify){
  var traits = identify.traits();
  var id = identify.userId();
  if (id) push('identify', id);
  if (traits) push('set', traits);
};

/**
 * Track.
 *
 * @param {Track} track
 */

KISSmetrics.prototype.track = function(track){
  var mapping = { revenue: 'Billing Amount' };
  var event = track.event();
  var properties = track.properties(mapping);
  if (this.options.prefixProperties) properties = prefix(event, properties);
  push('record', event, properties);
};

/**
 * Alias.
 *
 * @param {Alias} to
 */

KISSmetrics.prototype.alias = function(alias){
  push('alias', alias.to(), alias.from());
};

/**
 * Completed order.
 *
 * @param {Track} track
 * @api private
 */

KISSmetrics.prototype.completedOrder = function(track){
  var products = track.products();
  var event = track.event();

  // transaction
  push('record', event, prefix(event, track.properties()));

  // items
  window._kmq.push(function(){
    var km = window.KM;
    each(products, function(product, i){
      var temp = new Track({ event: event, properties: product });
      var item = prefix(event, product);
      item._t = km.ts() + i;
      item._d = 1;
      km.set(item);
    });
  });
};

/**
 * Prefix properties with the event name.
 *
 * @param {String} event
 * @param {Object} properties
 * @return {Object} prefixed
 * @api private
 */

function prefix(event, properties){
  var prefixed = {};
  each(properties, function(key, val){
    if (key === 'Billing Amount') {
      prefixed[key] = val;
    } else {
      prefixed[event + ' - ' + key] = val;
    }
  });
  return prefixed;
}

}, {"analytics.js-integration":89,"global-queue":153,"facade":125,"alias":158,"batch":179,"each":11,"is":92}],
315: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_learnq');
var tick = require('next-tick');
var alias = require('alias');

/**
 * Trait aliases.
 */

var aliases = {
  id: '$id',
  email: '$email',
  firstName: '$first_name',
  lastName: '$last_name',
  phone: '$phone_number',
  title: '$title'
};

/**
 * Expose `Klaviyo` integration.
 */

var Klaviyo = module.exports = integration('Klaviyo')
  .assumesPageview()
  .global('_learnq')
  .option('apiKey', '')
  .tag('<script src="//a.klaviyo.com/media/js/learnmarklet.js">');

/**
 * Initialize.
 *
 * https://www.klaviyo.com/docs/getting-started
 *
 * @param {Object} page
 */

Klaviyo.prototype.initialize = function(page){
  var self = this;
  push('account', this.options.apiKey);
  this.load(function(){
    tick(self.ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Klaviyo.prototype.loaded = function(){
  return !! (window._learnq && window._learnq.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Klaviyo.prototype.identify = function(identify){
  var traits = identify.traits(aliases);
  if (!traits.$id && !traits.$email) return;
  push('identify', traits);
};

/**
 * Group.
 *
 * @param {Group} group
 */

Klaviyo.prototype.group = function(group){
  var props = group.properties();
  if (!props.name) return;
  push('identify', { $organization: props.name });
};

/**
 * Track.
 *
 * @param {Track} track
 */

Klaviyo.prototype.track = function(track){
  push('track', track.event(), track.properties({
    revenue: '$value'
  }));
};

}, {"analytics.js-integration":89,"global-queue":153,"next-tick":103,"alias":158}],
316: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `LeadLander` integration.
 */

var LeadLander = module.exports = integration('LeadLander')
  .assumesPageview()
  .global('llactid')
  .global('trackalyzer')
  .option('accountId', null)
  .tag('<script src="http://t6.trackalyzer.com/trackalyze-nodoc.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

LeadLander.prototype.initialize = function(page){
  window.llactid = this.options.accountId;
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

LeadLander.prototype.loaded = function(){
  return !! window.trackalyzer;
};

}, {"analytics.js-integration":89}],
317: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var clone = require('clone');
var each = require('each');
var Identify = require('facade').Identify;
var when = require('when');

/**
 * Expose `LiveChat` integration.
 */

var LiveChat = module.exports = integration('LiveChat')
  .assumesPageview()
  .global('__lc')
  .global('__lc_inited')
  .global('LC_API')
  .global('LC_Invite')
  .option('group', 0)
  .option('license', '')
  .tag('<script src="//cdn.livechatinc.com/tracking.js">');

/**
 * Initialize.
 *
 * http://www.livechatinc.com/api/javascript-api
 *
 * @param {Object} page
 */

LiveChat.prototype.initialize = function(page){
  var self = this;
  var user = this.analytics.user();
  var identify = new Identify({
    userId: user.id(),
    traits: user.traits()
  });

  window.__lc = clone(this.options);
  window.__lc.visitor = {
    name: identify.name(),
    email: identify.email()
  };

  this.load(function(){
    when(function(){ return self.loaded(); }, self.ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

LiveChat.prototype.loaded = function(){
  return !!(window.LC_API && window.LC_Invite);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

LiveChat.prototype.identify = function(identify){
  var traits = identify.traits({ userId: 'User ID' });
  window.LC_API.set_custom_variables(convert(traits));
};

/**
 * Convert a traits object into the format LiveChat requires.
 *
 * @param {Object} traits
 * @return {Array}
 */

function convert(traits){
  var arr = [];
  each(traits, function(key, value){
    arr.push({ name: key, value: value });
  });
  return arr;
}

}, {"analytics.js-integration":89,"clone":157,"each":11,"facade":125,"when":124}],
318: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var Identify = require('facade').Identify;
var useHttps = require('use-https');

/**
 * Expose `LuckyOrange` integration.
 */

var LuckyOrange = module.exports = integration('Lucky Orange')
  .assumesPageview()
  .global('_loq')
  .global('__wtw_watcher_added')
  .global('__wtw_lucky_site_id')
  .global('__wtw_lucky_is_segment_io')
  .global('__wtw_custom_user_data')
  .option('siteId', null)
  .tag('http', '<script src="http://www.luckyorange.com/w.js?{{ cache }}">')
  .tag('https', '<script src="https://ssl.luckyorange.com/w.js?{{ cache }}">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

LuckyOrange.prototype.initialize = function(page){
  var user = this.analytics.user();
  window._loq || (window._loq = []);
  window.__wtw_lucky_site_id = this.options.siteId;
  this.identify(new Identify({
    traits: user.traits(),
    userId: user.id()
  }));
  var cache = Math.floor(new Date().getTime() / 60000);
  var name = useHttps() ? 'https' : 'http';
  this.load(name, { cache: cache }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

LuckyOrange.prototype.loaded = function(){
  return !! window.__wtw_watcher_added;
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

LuckyOrange.prototype.identify = function(identify){
  var traits = identify.traits();
  var email = identify.email();
  var name = identify.name();
  if (name) traits.name = name;
  if (email) traits.email = email;
  window.__wtw_custom_user_data = traits;
};

}, {"analytics.js-integration":89,"facade":125,"use-https":91}],
319: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var alias = require('alias');

/**
 * Expose `Lytics` integration.
 */

var Lytics = module.exports = integration('Lytics')
  .global('jstag')
  .option('cid', '')
  .option('cookie', 'seerid')
  .option('delay', 2000)
  .option('sessionTimeout', 1800)
  .option('url', '//c.lytics.io')
  .tag('<script src="//c.lytics.io/static/io.min.js">');

/**
 * Options aliases.
 */

var aliases = {
  sessionTimeout: 'sessecs'
};

/**
 * Initialize.
 *
 * http://admin.lytics.io/doc#jstag
 *
 * @param {Object} page
 */

Lytics.prototype.initialize = function(page){
  var options = alias(this.options, aliases);
  window.jstag = (function(){var t = { _q: [], _c: options, ts: (new Date()).getTime() }; t.send = function(){this._q.push(['ready', 'send', Array.prototype.slice.call(arguments)]); return this; }; return t; })();
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Lytics.prototype.loaded = function(){
  return !! (window.jstag && window.jstag.bind);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Lytics.prototype.page = function(page){
  window.jstag.send(page.properties());
};

/**
 * Idenfity.
 *
 * @param {Identify} identify
 */

Lytics.prototype.identify = function(identify){
  var traits = identify.traits({ userId: '_uid' });
  window.jstag.send(traits);
};

/**
 * Track.
 *
 * @param {String} event
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 */

Lytics.prototype.track = function(track){
  var props = track.properties();
  props._e = track.event();
  window.jstag.send(props);
};

}, {"analytics.js-integration":89,"alias":158}],
320: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var alias = require('alias');
var clone = require('clone');
var dates = require('convert-dates');
var integration = require('analytics.js-integration');
var is = require('is');
var iso = require('to-iso-string');
var indexof = require('indexof');
var del = require('obj-case').del;
var some = require('some');

/**
 * Expose `Mixpanel` integration.
 */

var Mixpanel = module.exports = integration('Mixpanel')
  .global('mixpanel')
  .option('increments', [])
  .option('cookieName', '')
  .option('nameTag', true)
  .option('pageview', false)
  .option('people', false)
  .option('token', '')
  .option('trackAllPages', false)
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .tag('<script src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js">');

/**
 * Options aliases.
 */

var optionsAliases = {
  cookieName: 'cookie_name'
};

/**
 * Initialize.
 *
 * https://mixpanel.com/help/reference/javascript#installing
 * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.init
 */

Mixpanel.prototype.initialize = function(){
  (function(c, a){window.mixpanel = a; var b, d, h, e; a._i = []; a.init = function(b, c, f){function d(a, b){var c = b.split('.'); 2 == c.length && (a = a[c[0]], b = c[1]); a[b] = function(){a.push([b].concat(Array.prototype.slice.call(arguments, 0))); }; } var g = a; 'undefined' !== typeof f ? g = a[f] = [] : f = 'mixpanel'; g.people = g.people || []; h = ['disable', 'track', 'track_pageview', 'track_links', 'track_forms', 'register', 'register_once', 'unregister', 'identify', 'alias', 'name_tag', 'set_config', 'people.set', 'people.increment', 'people.track_charge', 'people.append']; for (e = 0; e < h.length; e++) d(g, h[e]); a._i.push([b, c, f]); }; a.__SV = 1.2; })(document, window.mixpanel || []);
  this.options.increments = lowercase(this.options.increments);
  var options = alias(this.options, optionsAliases);
  window.mixpanel.init(options.token, options);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Mixpanel.prototype.loaded = function(){
  return !! (window.mixpanel && window.mixpanel.config);
};

/**
 * Page.
 *
 * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.track_pageview
 *
 * @param {String} category (optional)
 * @param {String} name (optional)
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 */

Mixpanel.prototype.page = function(page){
  var category = page.category();
  var name = page.fullName();
  var opts = this.options;

  // all pages
  if (opts.trackAllPages) {
    this.track(page.track());
  }

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }
};

/**
 * Trait aliases.
 */

var traitAliases = {
  created: '$created',
  email: '$email',
  firstName: '$first_name',
  lastName: '$last_name',
  lastSeen: '$last_seen',
  name: '$name',
  username: '$username',
  phone: '$phone'
};

/**
 * Identify.
 *
 * https://mixpanel.com/help/reference/javascript#super-properties
 * https://mixpanel.com/help/reference/javascript#user-identity
 * https://mixpanel.com/help/reference/javascript#storing-user-profiles
 *
 * @param {Identify} identify
 */

Mixpanel.prototype.identify = function(identify){
  var username = identify.username();
  var email = identify.email();
  var id = identify.userId();

  // id
  if (id) window.mixpanel.identify(id);

  // name tag
  var nametag = email || username || id;
  if (nametag) window.mixpanel.name_tag(nametag);

  // traits
  var traits = identify.traits(traitAliases);
  if (traits.$created) del(traits, 'createdAt');
  window.mixpanel.register(dates(traits, iso));
  if (this.options.people) window.mixpanel.people.set(traits);
};

/**
 * Track.
 *
 * https://mixpanel.com/help/reference/javascript#sending-events
 * https://mixpanel.com/help/reference/javascript#tracking-revenue
 *
 * @param {Track} track
 */

Mixpanel.prototype.track = function(track){
  var increments = this.options.increments;
  var increment = track.event().toLowerCase();
  var people = this.options.people;
  var props = track.properties();
  var revenue = track.revenue();

  // delete mixpanel's reserved properties, so they don't conflict
  delete props.distinct_id;
  delete props.ip;
  delete props.mp_name_tag;
  delete props.mp_note;
  delete props.token;

  // convert arrays of objects to length, since mixpanel doesn't support object arrays
  for (var key in props) {
    var val = props[key];
    if (is.array(val) && some(val, is.object)) props[key] = val.length;
  }

  // increment properties in mixpanel people
  if (people && ~indexof(increments, increment)) {
    window.mixpanel.people.increment(track.event());
    window.mixpanel.people.set('Last ' + track.event(), new Date);
  }

  // track the event
  props = dates(props, iso);
  window.mixpanel.track(track.event(), props);

  // track revenue specifically
  if (revenue && people) {
    window.mixpanel.people.track_charge(revenue);
  }
};

/**
 * Alias.
 *
 * https://mixpanel.com/help/reference/javascript#user-identity
 * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.alias
 *
 * @param {Alias} alias
 */

Mixpanel.prototype.alias = function(alias){
  var mp = window.mixpanel;
  var to = alias.to();
  if (mp.get_distinct_id && mp.get_distinct_id() === to) return;
  // HACK: internal mixpanel API to ensure we don't overwrite
  if (mp.get_property && mp.get_property('$people_distinct_id') === to) return;
  // although undocumented, mixpanel takes an optional original id
  mp.alias(to, alias.from());
};

/**
 * Lowercase the given `arr`.
 *
 * @param {Array} arr
 * @return {Array}
 * @api private
 */

function lowercase(arr){
  var ret = new Array(arr.length);

  for (var i = 0; i < arr.length; ++i) {
    ret[i] = String(arr[i]).toLowerCase();
  }

  return ret;
}

}, {"alias":158,"clone":157,"convert-dates":159,"analytics.js-integration":89,"is":92,"to-iso-string":156,"indexof":114,"obj-case":162,"some":181}],
321: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var bind = require('bind');
var when = require('when');
var is = require('is');

/**
 * Expose `Mojn`
 */

var Mojn = module.exports = integration('Mojn')
  .option('customerCode', '')
  .global('_mojnTrack')
  .tag('<script src="https://track.idtargeting.com/{{ customerCode }}/track.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Mojn.prototype.initialize = function(){
  window._mojnTrack = window._mojnTrack || [];
  window._mojnTrack.push({ cid: this.options.customerCode });
  var loaded = bind(this, this.loaded);
  var ready = this.ready;
  this.load(function(){
    when(loaded, ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Mojn.prototype.loaded = function(){
  return is.object(window._mojnTrack);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Mojn.prototype.identify = function(identify){
  var email = identify.email();
  if (!email) return;
  var img = new Image();
  img.src = '//matcher.idtargeting.com/analytics.gif?cid=' + this.options.customerCode + '&_mjnctid='+email;
  img.width = 1;
  img.height = 1;
  return img;
};

/**
 * Track.
 *
 * @param {Track} event
 */

Mojn.prototype.track = function(track){
  var properties = track.properties();
  var revenue = properties.revenue;
  var currency = properties.currency || '';
  var conv = currency + revenue;
  if (!revenue) return;
  window._mojnTrack.push({ conv: conv });
  return conv;
};

}, {"analytics.js-integration":89,"bind":101,"when":124,"is":92}],
322: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var push = require('global-queue')('_mfq');
var integration = require('analytics.js-integration');
var each = require('each');

/**
 * Expose `Mouseflow`.
 */

var Mouseflow = module.exports = integration('Mouseflow')
  .assumesPageview()
  .global('mouseflow')
  .global('_mfq')
  .option('apiKey', '')
  .option('mouseflowHtmlDelay', 0)
  .tag('<script src="//cdn.mouseflow.com/projects/{{ apiKey }}.js">');

/**
 * Initalize.
 *
 * @param {Object} page
 */

Mouseflow.prototype.initialize = function(page){
  window.mouseflowHtmlDelay = this.options.mouseflowHtmlDelay;
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Mouseflow.prototype.loaded = function(){
  return !! window.mouseflow;
};

/**
 * Page.
 *
 * http://mouseflow.zendesk.com/entries/22528817-Single-page-websites
 *
 * @param {Page} page
 */

Mouseflow.prototype.page = function(page){
  if (!window.mouseflow) return;
  if ('function' != typeof mouseflow.newPageView) return;
  mouseflow.newPageView();
};

/**
 * Identify.
 *
 * http://mouseflow.zendesk.com/entries/24643603-Custom-Variables-Tagging
 *
 * @param {Identify} identify
 */

Mouseflow.prototype.identify = function(identify){
  set(identify.traits());
};

/**
 * Track.
 *
 * http://mouseflow.zendesk.com/entries/24643603-Custom-Variables-Tagging
 *
 * @param {Track} track
 */

Mouseflow.prototype.track = function(track){
  var props = track.properties();
  props.event = track.event();
  set(props);
};

/**
 * Push each key and value in the given `obj` onto the queue.
 *
 * @param {Object} obj
 */

function set(obj){
  each(obj, function(key, value){
    push('setVariable', key, value);
  });
}

}, {"global-queue":153,"analytics.js-integration":89,"each":11}],
323: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var useHttps = require('use-https');
var each = require('each');
var is = require('is');

/**
 * Expose `MouseStats` integration.
 */

var MouseStats = module.exports = integration('MouseStats')
  .assumesPageview()
  .global('msaa')
  .global('MouseStatsVisitorPlaybacks')
  .option('accountNumber', '')
  .tag('http', '<script src="http://www2.mousestats.com/js/{{ path }}.js?{{ cache }}">')
  .tag('https', '<script src="https://ssl.mousestats.com/js/{{ path }}.js?{{ cache }}">');

/**
 * Initialize.
 *
 * http://www.mousestats.com/docs/pages/allpages
 *
 * @param {Object} page
 */

MouseStats.prototype.initialize = function(page){
  var number = this.options.accountNumber;
  var path = number.slice(0,1) + '/' + number.slice(1,2) + '/' + number;
  var cache = Math.floor(new Date().getTime() / 60000);
  var name = useHttps() ? 'https' : 'http';
  this.load(name, { path: path, cache: cache }, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

MouseStats.prototype.loaded = function(){
  return is.array(window.MouseStatsVisitorPlaybacks);
};

/**
 * Identify.
 *
 * http://www.mousestats.com/docs/wiki/7/how-to-add-custom-data-to-visitor-playbacks
 *
 * @param {Identify} identify
 */

MouseStats.prototype.identify = function(identify){
  each(identify.traits(), function (key, value) {
    window.MouseStatsVisitorPlaybacks.customVariable(key, value);
  });
};

}, {"analytics.js-integration":89,"use-https":91,"each":11,"is":92}],
324: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('__nls');

/**
 * Expose `Navilytics` integration.
 */

var Navilytics = module.exports = integration('Navilytics')
  .assumesPageview()
  .global('__nls')
  .option('memberId', '')
  .option('projectId', '')
  .tag('<script src="//www.navilytics.com/nls.js?mid={{ memberId }}&pid={{ projectId }}">');

/**
 * Initialize.
 *
 * https://www.navilytics.com/member/code_settings
 *
 * @param {Object} page
 */

Navilytics.prototype.initialize = function(page){
  window.__nls = window.__nls || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Navilytics.prototype.loaded = function(){
  return !! (window.__nls && [].push != window.__nls.push);
};

/**
 * Track.
 *
 * https://www.navilytics.com/docs#tags
 *
 * @param {Track} track
 */

Navilytics.prototype.track = function(track){
  push('tagRecording', track.event());
};

}, {"analytics.js-integration":89,"global-queue":153}],
325: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var https = require('use-https');
var tick = require('next-tick');

/**
 * Expose `Olark` integration.
 */

var Olark = module.exports = integration('Olark')
  .assumesPageview()
  .global('olark')
  .option('identify', true)
  .option('page', true)
  .option('siteId', '')
  .option('groupId', '')
  .option('track', false);

/**
 * Initialize.
 *
 * http://www.olark.com/documentation
 * https://www.olark.com/documentation/javascript/api.chat.setOperatorGroup
 *
 * @param {Facade} page
 */

Olark.prototype.initialize = function(page){
  var self = this;
  this.load(function(){
    tick(self.ready);
  });

  // assign chat to a specific site
  var groupId = this.options.groupId;
  if (groupId) api('chat.setOperatorGroup', { group: groupId });

  // keep track of the widget's open state
  api('box.onExpand', function(){ self._open = true; });
  api('box.onShrink', function(){ self._open = false; });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Olark.prototype.loaded = function(){
  return !! window.olark;
};

/**
 * Load.
 *
 * @param {Function} callback
 */

Olark.prototype.load = function(callback){
  var el = document.getElementById('olark');
  window.olark||(function(c){var f=window,d=document,l=https()?"https:":"http:",z=c.name,r="load";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while (q--) {(function(n){f[z][n]=function(){f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={ 0:+new Date() };a.P=function(u){a.p[u]=new Date()-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){hd="head";return ["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if (!m) {return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if (/MSIE[ ]+6/.test(navigator.userAgent)) {b.src="javascript:false"}b.allowTransparency="true";v[j](b);try {b.contentWindow[g].open()}catch (w) {c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try {var t=b.contentWindow[g];t.write(p());t.close()}catch (x) {b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({ loader: "static.olark.com/jsclient/loader0.js", name:"olark", methods:["configure","extend","declare","identify"] });
  window.olark.identify(this.options.siteId);
  callback();
};

/**
 * Page.
 *
 * @param {Facade} page
 */

Olark.prototype.page = function(page){
  if (!this.options.page) return;
  var props = page.properties();
  var name = page.fullName();
  if (!name && !props.url) return;

  name = name ? name + ' page' : props.url;
  this.notify('looking at ' + name);
};

/**
 * Identify.
 *
 * @param {Facade} identify
 */

Olark.prototype.identify = function(identify){
  if (!this.options.identify) return;

  var username = identify.username();
  var traits = identify.traits();
  var id = identify.userId();
  var email = identify.email();
  var phone = identify.phone();
  var name = identify.name() || identify.firstName();

  if (traits) api('visitor.updateCustomFields', traits);
  if (email) api('visitor.updateEmailAddress', { emailAddress: email });
  if (phone) api('visitor.updatePhoneNumber', { phoneNumber: phone });
  if (name) api('visitor.updateFullName', { fullName: name });

  // figure out best nickname
  var nickname = name || email || username || id;
  if (name && email) nickname += ' (' + email + ')';
  if (nickname) api('chat.updateVisitorNickname', { snippet: nickname });
};

/**
 * Track.
 *
 * @param {Facade} track
 */

Olark.prototype.track = function(track){
  if (!this.options.track) return;
  this.notify('visitor triggered "' + track.event() + '"');
};

/**
 * Send a notification `message` to the operator, only when a chat is active and
 * when the chat is open.
 *
 * @param {String} message
 */

Olark.prototype.notify = function(message){
  if (!this._open) return;

  // lowercase since olark does
  message = message.toLowerCase();

  api('visitor.getDetails', function(data){
    if (!data || !data.isConversing) return;
    api('chat.sendNotificationToOperator', { body: message });
  });
};

/**
 * Helper for Olark API calls.
 *
 * @param {String} action
 * @param {Object} value
 */

function api(action, value) {
  window.olark('api.' + action, value);
}

}, {"analytics.js-integration":89,"use-https":91,"next-tick":103}],
326: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('optimizely');
var callback = require('callback');
var tick = require('next-tick');
var bind = require('bind');
var each = require('each');

/**
 * Expose `Optimizely` integration.
 */

var Optimizely = module.exports = integration('Optimizely')
  .option('variations', true)
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true);

/**
 * Initialize.
 *
 * https://www.optimizely.com/docs/api#function-calls
 */

Optimizely.prototype.initialize = function(){
  if (this.options.variations) {
    var self = this;
    tick(function(){
      self.replay();
    });
  }
  this.ready();
};

/**
 * Track.
 *
 * https://www.optimizely.com/docs/api#track-event
 *
 * @param {Track} track
 */

Optimizely.prototype.track = function(track){
  var props = track.properties();
  if (props.revenue) props.revenue *= 100;
  push('trackEvent', track.event(), props);
};

/**
 * Page.
 *
 * https://www.optimizely.com/docs/api#track-event
 *
 * @param {Page} page
 */

Optimizely.prototype.page = function(page){
  var category = page.category();
  var name = page.fullName();
  var opts = this.options;

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }
};

/**
 * Replay experiment data as traits to other enabled providers.
 *
 * https://www.optimizely.com/docs/api#data-object
 */

Optimizely.prototype.replay = function(){
  if (!window.optimizely) return; // in case the snippet isnt on the page

  var data = window.optimizely.data;
  if (!data) return;

  var experiments = data.experiments;
  var map = data.state.variationNamesMap;
  var traits = {};

  each(map, function(experimentId, variation){
    var experiment = experiments[experimentId].name;
    traits['Experiment: ' + experiment] = variation;
  });

  this.analytics.identify(traits);
};

}, {"analytics.js-integration":89,"global-queue":153,"callback":94,"next-tick":103,"bind":101,"each":11}],
327: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_pq');

/**
 * Expose `PerfectAudience` integration.
 */

var PerfectAudience = module.exports = integration('Perfect Audience')
  .assumesPageview()
  .global('_pq')
  .option('siteId', '')
  .tag('<script src="//tag.perfectaudience.com/serve/{{ siteId }}.js">');

/**
 * Initialize.
 *
 * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api
 *
 * @param {Object} page
 */

PerfectAudience.prototype.initialize = function(page){
  window._pq = window._pq || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

PerfectAudience.prototype.loaded = function(){
  return !! (window._pq && window._pq.push);
};

/**
 * Track.
 *
 * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api
 *
 * @param {Track} event
 */

PerfectAudience.prototype.track = function(track){
  push('track', track.event());
};


/**
 * Viewed Product.
 *
 * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api
 *
 * @param {Track} event
 */

PerfectAudience.prototype.viewedProduct = function(track){
  var product = track.sku();
  push('track', track.event());
  push('trackProduct', product);
};

/**
 * Completed Purchase.
 *
 * http://support.perfectaudience.com/knowledgebase/articles/212490-visitor-tracking-api
 *
 * @param {Track} event
 */

PerfectAudience.prototype.completedOrder = function(track){
  var total = track.total() || track.revenue();
  var orderId = track.orderId();
  var props = {};
  if (total) props.revenue = total;
  if (orderId) props.orderId = orderId;
  push('track', track.event(), props);
};

}, {"analytics.js-integration":89,"global-queue":153}],
328: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_prum');
var date = require('load-date');

/**
 * Expose `Pingdom` integration.
 */

var Pingdom = module.exports = integration('Pingdom')
  .assumesPageview()
  .global('_prum')
  .global('PRUM_EPISODES')
  .option('id', '')
  .tag('<script src="//rum-static.pingdom.net/prum.min.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Pingdom.prototype.initialize = function(page){
  window._prum = window._prum || [];
  push('id', this.options.id);
  push('mark', 'firstbyte', date.getTime());
  var self = this;
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Pingdom.prototype.loaded = function(){
  return !! (window._prum && window._prum.push !== Array.prototype.push);
};

}, {"analytics.js-integration":89,"global-queue":153,"load-date":154}],
329: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_paq');
var each = require('each');

/**
 * Expose `Piwik` integration.
 */

var Piwik = module.exports = integration('Piwik')
  .global('_paq')
  .option('url', null)
  .option('siteId', '')
  .mapping('goals')
  .tag('<script src="{{ url }}/piwik.js">');

/**
 * Initialize.
 *
 * http://piwik.org/docs/javascript-tracking/#toc-asynchronous-tracking
 */

Piwik.prototype.initialize = function(){
  window._paq = window._paq || [];
  push('setSiteId', this.options.siteId);
  push('setTrackerUrl', this.options.url + '/piwik.php');
  push('enableLinkTracking');
  this.load(this.ready);
};

/**
 * Check if Piwik is loaded
 */

Piwik.prototype.loaded = function(){
  return !! (window._paq && window._paq.push != [].push);
};

/**
 * Page
 *
 * @param {Page} page
 */

Piwik.prototype.page = function(page){
  push('trackPageView');
};

/**
 * Track.
 *
 * @param {Track} track
 */

Piwik.prototype.track = function(track){
  var goals = this.goals(track.event());
  var revenue = track.revenue() || 0;
  each(goals, function(goal){
    push('trackGoal', goal, revenue);
  });
};

}, {"analytics.js-integration":89,"global-queue":153,"each":11}],
330: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var convertDates = require('convert-dates');
var push = require('global-queue')('_lnq');
var alias = require('alias');

/**
 * Expose `Preact` integration.
 */

var Preact = module.exports = integration('Preact')
  .assumesPageview()
  .global('_lnq')
  .option('projectCode', '')
  .tag('<script src="//d2bbvl6dq48fa6.cloudfront.net/js/ln-2.4.min.js">');

/**
 * Initialize.
 *
 * http://www.preact.io/api/javascript
 *
 * @param {Object} page
 */

Preact.prototype.initialize = function(page){
  window._lnq = window._lnq || [];
  push('_setCode', this.options.projectCode);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Preact.prototype.loaded = function(){
  return !! (window._lnq && window._lnq.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Preact.prototype.identify = function(identify){
  if (!identify.userId()) return;
  var traits = identify.traits({ created: 'created_at' });
  traits = convertDates(traits, convertDate);
  push('_setPersonData', {
    name: identify.name(),
    email: identify.email(),
    uid: identify.userId(),
    properties: traits
  });
};

/**
 * Group.
 *
 * @param {String} id
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 */

Preact.prototype.group = function(group){
  if (!group.groupId()) return;
  push('_setAccount', group.traits());
};

/**
 * Track.
 *
 * @param {Track} track
 */

Preact.prototype.track = function(track){
  var props = track.properties();
  var revenue = track.revenue();
  var event = track.event();
  var special = { name: event };

  if (revenue) {
    special.revenue = revenue * 100;
    delete props.revenue;
  }

  if (props.note) {
    special.note = props.note;
    delete props.note;
  }

  push('_logEvent', special, props);
};

/**
 * Convert a `date` to a format Preact supports.
 *
 * @param {Date} date
 * @return {Number}
 */

function convertDate(date){
  return Math.floor(date / 1000);
}

}, {"analytics.js-integration":89,"convert-dates":159,"global-queue":153,"alias":158}],
331: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_kiq');
var Facade = require('facade');
var Identify = Facade.Identify;
var bind = require('bind');
var when = require('when');

/**
 * Expose `Qualaroo` integration.
 */

var Qualaroo = module.exports = integration('Qualaroo')
  .assumesPageview()
  .global('_kiq')
  .option('customerId', '')
  .option('siteToken', '')
  .option('track', false)
  .tag('<script src="//s3.amazonaws.com/ki.js/{{ customerId }}/{{ siteToken }}.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Qualaroo.prototype.initialize = function(page){
  window._kiq = window._kiq || [];
  var loaded = bind(this, this.loaded);
  var ready = this.ready;
  this.load(function(){
    when(loaded, ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Qualaroo.prototype.loaded = function(){
  return !! (window._kiq && window._kiq.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * http://help.qualaroo.com/customer/portal/articles/731085-identify-survey-nudge-takers
 * http://help.qualaroo.com/customer/portal/articles/731091-set-additional-user-properties
 *
 * @param {Identify} identify
 */

Qualaroo.prototype.identify = function(identify){
  var traits = identify.traits();
  var id = identify.userId();
  var email = identify.email();
  if (email) id = email;
  if (id) push('identify', id);
  if (traits) push('set', traits);
};

/**
 * Track.
 *
 * @param {String} event
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 */

Qualaroo.prototype.track = function(track){
  if (!this.options.track) return;
  var event = track.event();
  var traits = {};
  traits['Triggered: ' + event] = true;
  this.identify(new Identify({ traits: traits }));
};

}, {"analytics.js-integration":89,"global-queue":153,"facade":125,"bind":101,"when":124}],
332: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var push = require('global-queue')('_qevents', { wrap: false });
var integration = require('analytics.js-integration');
var useHttps = require('use-https');

/**
 * Expose `Quantcast` integration.
 */

var Quantcast = module.exports = integration('Quantcast')
  .assumesPageview()
  .global('_qevents')
  .global('__qc')
  .option('pCode', null)
  .option('advertise', false)
  .tag('http', '<script src="http://edge.quantserve.com/quant.js">')
  .tag('https', '<script src="https://secure.quantserve.com/quant.js">');

/**
 * Initialize.
 *
 * https://www.quantcast.com/learning-center/guides/using-the-quantcast-asynchronous-tag/
 * https://www.quantcast.com/help/cross-platform-audience-measurement-guide/
 *
 * @param {Page} page
 */

Quantcast.prototype.initialize = function(page){
  window._qevents = window._qevents || [];

  var opts = this.options;
  var settings = { qacct: opts.pCode };
  var user = this.analytics.user();
  if (user.id()) settings.uid = user.id();

  if (page) {
    settings.labels = this.labels('page', page.category(), page.name());
  }

  push(settings);

  var name = useHttps() ? 'https' : 'http';
  this.load(name, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Quantcast.prototype.loaded = function(){
  return !! window.__qc;
};

/**
 * Page.
 *
 * https://cloudup.com/cBRRFAfq6mf
 *
 * @param {Page} page
 */

Quantcast.prototype.page = function(page){
  var category = page.category();
  var name = page.name();
  var settings = {
    event: 'refresh',
    labels: this.labels('page', category, name),
    qacct: this.options.pCode,
  };
  var user = this.analytics.user();
  if (user.id()) settings.uid = user.id();
  push(settings);
};

/**
 * Identify.
 *
 * https://www.quantcast.com/help/cross-platform-audience-measurement-guide/
 *
 * @param {String} id (optional)
 */

Quantcast.prototype.identify = function(identify){
  // edit the initial quantcast settings
  // TODO: could be done in a cleaner way
  var id = identify.userId();
  if (id) {
    window._qevents[0] = window._qevents[0] || {};
    window._qevents[0].uid = id;
  }
};

/**
 * Track.
 *
 * https://cloudup.com/cBRRFAfq6mf
 *
 * @param {Track} track
 */

Quantcast.prototype.track = function(track){
  var name = track.event();
  var revenue = track.revenue();
  var settings = {
    event: 'click',
    labels: this.labels('event', name),
    qacct: this.options.pCode
  };
  var user = this.analytics.user();
  if (null != revenue) settings.revenue = (revenue+''); // convert to string
  if (user.id()) settings.uid = user.id();
  push(settings);
};

/**
 * Completed Order.
 *
 * @param {Track} track
 * @api private
 */

Quantcast.prototype.completedOrder = function(track){
  var name = track.event();
  var revenue = track.total();
  var labels = this.labels('event', name);
  var category = track.category();

  if (this.options.advertise && category) {
    labels += ',' + this.labels('pcat', category);
  }

  var settings = {
    event: 'refresh', // the example Quantcast sent has completed order send refresh not click
    labels: labels,
    revenue: (revenue+''), // convert to string
    orderid: track.orderId(),
    qacct: this.options.pCode
  };
  push(settings);
};

/**
 * Generate quantcast labels.
 *
 * Example:
 *
 *    options.advertise = false;
 *    labels('event', 'my event');
 *    // => "event.my event"
 *
 *    options.advertise = true;
 *    labels('event', 'my event');
 *    // => "_fp.event.my event"
 *
 * @param {String} type
 * @param {String} ...
 * @return {String}
 * @api private
 */

Quantcast.prototype.labels = function(type){
  var args = [].slice.call(arguments, 1);
  var advertise = this.options.advertise;
  var ret = [];

  if (advertise && 'page' == type) type = 'event';
  if (advertise) type = '_fp.' + type;

  for (var i = 0; i < args.length; ++i) {
    if (null == args[i]) continue;
    var value = String(args[i]);
    ret.push(value.replace(/,/g, ';'));
  }

  ret = advertise ? ret.join(' ') : ret.join('.');
  return [type, ret].join('.');
};

}, {"global-queue":153,"analytics.js-integration":89,"use-https":91}],
333: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var extend = require('extend');
var is = require('is');

/**
 * Expose `Rollbar` integration.
 */

var RollbarIntegration = module.exports = integration('Rollbar')
  .global('Rollbar')
  .option('identify', true)
  .option('accessToken', '')
  .option('environment', 'unknown')
  .option('captureUncaught', true);

/**
 * Initialize.
 *
 * @param {Object} page
 */

RollbarIntegration.prototype.initialize = function(page){
  var _rollbarConfig = this.config = {
    accessToken: this.options.accessToken,
    captureUncaught: this.options.captureUncaught,
    payload: {
      environment: this.options.environment
    }
  };

  (function(a){function b(b){this.shimId=++g,this.notifier=null,this.parentShim=b,this.logger=function(){},a.console&&void 0 === a.console.shimId&&(this.logger=a.console.log)}function c(b,c,d){!d[4]&&a._rollbarWrappedError&&(d[4]=a._rollbarWrappedError,a._rollbarWrappedError=null),b.uncaughtError.apply(b,d),c&&c.apply(a,d)}function d(c){var d=b;return f(function(){if (this.notifier)return this.notifier[c].apply(this.notifier,arguments);var b=this,e="scope"===c;e&&(b=new d(this));var f=Array.prototype.slice.call(arguments,0),g={ shim:b, method:c, args:f, ts:new Date };return a._rollbarShimQueue.push(g),e?b:void 0})}function e(a,b){if (b.hasOwnProperty&&b.hasOwnProperty("addEventListener")){var c=b.addEventListener;b.addEventListener=function(b,d,e){c.call(this,b,a.wrap(d),e)};var d=b.removeEventListener;b.removeEventListener=function(a,b,c){d.call(this,a,b._wrapped||b,c)}}}function f(a,b){return b=b||this.logger,function(){try {return a.apply(this,arguments)} catch (c) {b("Rollbar internal error:",c)}}}var g=0;b.init=function(a,d){var g=d.globalAlias||"Rollbar";if ("object"==typeof a[g])return a[g];a._rollbarShimQueue=[],a._rollbarWrappedError=null,d=d||{};var h=new b;return f(function(){if (h.configure(d),d.captureUncaught){var b=a.onerror;a.onerror=function(){var a=Array.prototype.slice.call(arguments,0);c(h,b,a)};var f,i,j=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];for (f=0;f<j.length;++f)i=j[f],a[i]&&a[i].prototype&&e(h,a[i].prototype)}return a[g]=h,h},h.logger)()},b.prototype.loadFull=function(a,b,c,d,e){var g=f(function(){var a=b.createElement("script"),e=b.getElementsByTagName("script")[0];a.src=d.rollbarJsUrl,a.async=!c,a.onload=h,e.parentNode.insertBefore(a,e)},this.logger),h=f(function(){var b;if (void 0===a._rollbarPayloadQueue){var c,d,f,g;for (b=new Error("rollbar.js did not load");c=a._rollbarShimQueue.shift();)for (f=c.args,g=0;g<f.length;++g)if (d=f[g],"function"==typeof d){d(b);break}}e&&e(b)},this.logger);f(function(){c?g():a.addEventListener?a.addEventListener("load",g,!1):a.attachEvent("onload",g)},this.logger)()},b.prototype.wrap=function(b){if ("function"!=typeof b)return b;if (b._isWrap)return b;if (!b._wrapped){b._wrapped=function(){try {return b.apply(this,arguments)} catch (c) {throw a._rollbarWrappedError=c,c}},b._wrapped._isWrap=!0;for (var c in b)b.hasOwnProperty(c)&&(b._wrapped[c]=b[c])}return b._wrapped};for (var h="log,debug,info,warn,warning,error,critical,global,configure,scope,uncaughtError".split(","),i=0;i<h.length;++i)b.prototype[h[i]]=d(h[i]);var j="//d37gvrvc0wt4s1.cloudfront.net/js/v1.0/rollbar.min.js";_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||j,b.init(a,_rollbarConfig)})(window,document);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

RollbarIntegration.prototype.loaded = function(){
  return is.object(window.Rollbar) && null == window.Rollbar.shimId;
};

/**
 * Load.
 *
 * @param {Function} callback
 */

RollbarIntegration.prototype.load = function(callback){
  window.Rollbar.loadFull(window, document, true, this.config, callback);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */
RollbarIntegration.prototype.identify = function(identify){
  // do stuff with `id` or `traits`
  if (!this.options.identify) return;

  // Don't allow identify without a user id
  var uid = identify.userId();
  if (uid === null || uid === undefined) return;

  var rollbar = window.Rollbar;
  var person = { id: uid };
  extend(person, identify.traits());
  rollbar.configure({ payload: { person: person }});
};

}, {"analytics.js-integration":89,"extend":123,"is":92}],
334: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');

/**
 * Expose `SaaSquatch` integration.
 */

var SaaSquatch = module.exports = integration('SaaSquatch')
  .option('tenantAlias', '')
  .option('referralImage', '')
  .global('_sqh')
  .tag('<script src="//d2rcp9ak152ke1.cloudfront.net/assets/javascripts/squatch.min.js">');

/**
 * Initialize.
 *
 * @param {Page} page
 */

SaaSquatch.prototype.initialize = function(page){
  window._sqh = window._sqh || [];
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

SaaSquatch.prototype.loaded = function(){
  return window._sqh && window._sqh.push != [].push;
};

/**
 * Identify.
 *
 * @param {Facade} identify
 */

SaaSquatch.prototype.identify = function(identify){
  var sqh = window._sqh;
  var accountId = identify.proxy('traits.accountId');
  var image = identify.proxy('traits.referralImage') || this.options.referralImage;
  var opts = identify.options(this.name);
  var id = identify.userId();
  var email = identify.email();

  if (!(id || email)) return;
  if (this.called) return;

  var init = {
    tenant_alias: this.options.tenantAlias,
    first_name: identify.firstName(),
    last_name: identify.lastName(),
    user_image: identify.avatar(),
    email: email,
    user_id: id,
  };

  if (accountId) init.account_id = accountId;
  if (opts.checksum) init.checksum = opts.checksum;
  if (image) init.fb_share_image = image;

  sqh.push(['init', init]);
  this.called = true;
  this.load();
};

/**
 * Group.
 *
 * @param {Group} group
 */

SaaSquatch.prototype.group = function(group){
  var sqh = window._sqh;
  var props = group.properties();
  var id = group.groupId();
  var image = group.proxy('traits.referralImage') || this.options.referralImage;
  var opts = group.options(this.name);

  // tenant_alias is required.
  if (this.called) return;

  var init = {
    tenant_alias: this.options.tenantAlias,
    account_id: id
  };

  if (opts.checksum) init.checksum = opts.checksum;
  if (image) init.fb_share_image = image;

  sqh.push(['init', init]);
  this.called = true;
  this.load();
};

}, {"analytics.js-integration":89}],
335: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var is = require('is');

/**
 * Expose `Sentry` integration.
 */

var Sentry = module.exports = integration('Sentry')
  .global('Raven')
  .option('config', '')
  .tag('<script src="//cdn.ravenjs.com/1.1.10/native/raven.min.js">');

/**
 * Initialize.
 *
 * http://raven-js.readthedocs.org/en/latest/config/index.html
 */

Sentry.prototype.initialize = function(){
  var config = this.options.config;
  var self = this;
  this.load(function(){
    // for now, raven basically requires `install` to be called
    // https://github.com/getsentry/raven-js/blob/master/src/raven.js#L113
    window.Raven.config(config).install();
    self.ready();
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Sentry.prototype.loaded = function(){
  return is.object(window.Raven);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Sentry.prototype.identify = function(identify){
  window.Raven.setUser(identify.traits());
};

}, {"analytics.js-integration":89,"is":92}],
336: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var is = require('is');

/**
 * Expose `SnapEngage` integration.
 */

var SnapEngage = module.exports = integration('SnapEngage')
  .assumesPageview()
  .global('SnapABug')
  .option('apiKey', '')
  .tag('<script src="//commondatastorage.googleapis.com/code.snapengage.com/js/{{ apiKey }}.js">');

/**
 * Initialize.
 *
 * http://help.snapengage.com/installation-guide-getting-started-in-a-snap/
 *
 * @param {Object} page
 */

SnapEngage.prototype.initialize = function(page){
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

SnapEngage.prototype.loaded = function(){
  return is.object(window.SnapABug);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

SnapEngage.prototype.identify = function(identify){
  var email = identify.email();
  if (!email) return;
  window.SnapABug.setUserEmail(email);
};

}, {"analytics.js-integration":89,"is":92}],
337: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var bind = require('bind');
var when = require('when');

/**
 * Expose `Spinnakr` integration.
 */

var Spinnakr = module.exports = integration('Spinnakr')
  .assumesPageview()
  .global('_spinnakr_site_id')
  .global('_spinnakr')
  .option('siteId', '')
  .tag('<script src="//d3ojzyhbolvoi5.cloudfront.net/js/so.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Spinnakr.prototype.initialize = function(page){
  window._spinnakr_site_id = this.options.siteId;
  var loaded = bind(this, this.loaded);
  var ready = this.ready;
  this.load(function(){
    when(loaded, ready);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Spinnakr.prototype.loaded = function(){
  return !! window._spinnakr;
};

}, {"analytics.js-integration":89,"bind":101,"when":124}],
338: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var slug = require('slug');
var push = require('global-queue')('_tsq');

/**
 * Expose `Tapstream` integration.
 */

var Tapstream = module.exports = integration('Tapstream')
  .assumesPageview()
  .global('_tsq')
  .option('accountName', '')
  .option('trackAllPages', true)
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .tag('<script src="//cdn.tapstream.com/static/js/tapstream.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

Tapstream.prototype.initialize = function(page){
  window._tsq = window._tsq || [];
  push('setAccountName', this.options.accountName);
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Tapstream.prototype.loaded = function(){
  return !! (window._tsq && window._tsq.push !== Array.prototype.push);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Tapstream.prototype.page = function(page){
  var category = page.category();
  var opts = this.options;
  var name = page.fullName();

  // all pages
  if (opts.trackAllPages) {
    this.track(page.track());
  }

  // named pages
  if (name && opts.trackNamedPages) {
    this.track(page.track(name));
  }

  // categorized pages
  if (category && opts.trackCategorizedPages) {
    this.track(page.track(category));
  }
};

/**
 * Track.
 *
 * @param {Track} track
 */

Tapstream.prototype.track = function(track){
  var props = track.properties();
  push('fireHit', slug(track.event()), [props.url]); // needs events as slugs
};

}, {"analytics.js-integration":89,"slug":99,"global-queue":153}],
339: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var alias = require('alias');
var clone = require('clone');

/**
 * Expose `Trakio` integration.
 */

var Trakio = module.exports = integration('trak.io')
  .assumesPageview()
  .global('trak')
  .option('token', '')
  .option('trackNamedPages', true)
  .option('trackCategorizedPages', true)
  .tag('<script src="//d29p64779x43zo.cloudfront.net/v1/trak.io.min.js">');

/**
 * Options aliases.
 */

var optionsAliases = {
  initialPageview: 'auto_track_page_view'
};

/**
 * Initialize.
 *
 * https://docs.trak.io
 *
 * @param {Object} page
 */

Trakio.prototype.initialize = function(page){
  var options = this.options;
  window.trak = window.trak || [];
  window.trak.io = window.trak.io || {};
  window.trak.push = window.trak.push || function(){};
  window.trak.io.load = window.trak.io.load || function(e){var r = function(e){return function(){window.trak.push([e].concat(Array.prototype.slice.call(arguments,0))); }; } ,i=["initialize","identify","track","alias","channel","source","host","protocol","page_view"]; for (var s=0;s<i.length;s++) window.trak.io[i[s]]=r(i[s]); window.trak.io.initialize.apply(window.trak.io,arguments); };
  window.trak.io.load(options.token, alias(options, optionsAliases));
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Trakio.prototype.loaded = function(){
  return !! (window.trak && window.trak.loaded);
};

/**
 * Page.
 *
 * @param {Page} page
 */

Trakio.prototype.page = function(page){
  var category = page.category();
  var props = page.properties();
  var name = page.fullName();

  window.trak.io.page_view(props.path, name || props.title);

  // named pages
  if (name && this.options.trackNamedPages) {
    this.track(page.track(name));
  }

  // categorized pages
  if (category && this.options.trackCategorizedPages) {
    this.track(page.track(category));
  }
};

/**
 * Trait aliases.
 *
 * http://docs.trak.io/properties.html#special
 */

var traitAliases = {
  avatar: 'avatar_url',
  firstName: 'first_name',
  lastName: 'last_name'
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Trakio.prototype.identify = function(identify){
  var traits = identify.traits(traitAliases);
  var id = identify.userId();

  if (id) {
    window.trak.io.identify(id, traits);
  } else {
    window.trak.io.identify(traits);
  }
};

/**
 * Group.
 *
 * @param {String} id (optional)
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 *
 * TODO: add group
 * TODO: add `trait.company/organization` from trak.io docs http://docs.trak.io/properties.html#special
 */

/**
 * Track.
 *
 * @param {Track} track
 */

Trakio.prototype.track = function(track){
  window.trak.io.track(track.event(), track.properties());
};

/**
 * Alias.
 *
 * @param {Alias} alias
 */

Trakio.prototype.alias = function(alias){
  if (!window.trak.io.distinct_id) return;
  var from = alias.from();
  var to = alias.to();

  if (to === window.trak.io.distinct_id()) return;

  if (from) {
    window.trak.io.alias(from, to);
  } else {
    window.trak.io.alias(to);
  }
};

}, {"analytics.js-integration":89,"alias":158,"clone":157}],
340: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var each = require('each');

/**
 * HOP.
 */

var has = Object.prototype.hasOwnProperty;

/**
 * Expose `TwitterAds`.
 */

var TwitterAds = module.exports = integration('Twitter Ads')
  .option('page', '')
  .tag('<img src="//analytics.twitter.com/i/adsct?txn_id={{ pixelId }}&p_id=Twitter"/>')
  .mapping('events');

/**
 * Initialize.
 *
 * @param {Object} page
 */

TwitterAds.prototype.initialize = function(){
  this.ready();
};

/**
 * Page.
 *
 * @param {Page} page
 */

TwitterAds.prototype.page = function(page){
  if (this.options.page) {
    this.load({ pixelId: this.options.page });
  }
};

/**
 * Track.
 *
 * @param {Track} track
 */

TwitterAds.prototype.track = function(track){
  var events = this.events(track.event());
  var self = this;
  each(events, function(pixelId){
    self.load({ pixelId: pixelId });
  });
};

}, {"analytics.js-integration":89,"each":11}],
341: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('UserVoice');
var convertDates = require('convert-dates');
var unix = require('to-unix-timestamp');
var alias = require('alias');
var clone = require('clone');

/**
 * Expose `UserVoice` integration.
 */

var UserVoice = module.exports = integration('UserVoice')
  .assumesPageview()
  .global('UserVoice')
  .global('showClassicWidget')
  .option('apiKey', '')
  .option('classic', false)
  .option('forumId', null)
  .option('showWidget', true)
  .option('mode', 'contact')
  .option('accentColor', '#448dd6')
  .option('smartvote', true)
  .option('trigger', null)
  .option('triggerPosition', 'bottom-right')
  .option('triggerColor', '#ffffff')
  .option('triggerBackgroundColor', 'rgba(46, 49, 51, 0.6)')
  // BACKWARDS COMPATIBILITY: classic options
  .option('classicMode', 'full')
  .option('primaryColor', '#cc6d00')
  .option('linkColor', '#007dbf')
  .option('defaultMode', 'support')
  .option('tabLabel', 'Feedback & Support')
  .option('tabColor', '#cc6d00')
  .option('tabPosition', 'middle-right')
  .option('tabInverted', false)
  .tag('<script src="//widget.uservoice.com/{{ apiKey }}.js">');

/**
 * When in "classic" mode, on `construct` swap all of the method to point to
 * their classic counterparts.
 */

UserVoice.on('construct', function(integration){
  if (!integration.options.classic) return;
  integration.group = undefined;
  integration.identify = integration.identifyClassic;
  integration.initialize = integration.initializeClassic;
});

/**
 * Initialize.
 *
 * @param {Object} page
 */

UserVoice.prototype.initialize = function(page){
  var options = this.options;
  var opts = formatOptions(options);
  push('set', opts);
  push('autoprompt', {});
  if (options.showWidget) {
    options.trigger
      ? push('addTrigger', options.trigger, opts)
      : push('addTrigger', opts);
  }

  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

UserVoice.prototype.loaded = function(){
  return !! (window.UserVoice && window.UserVoice.push !== Array.prototype.push);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

UserVoice.prototype.identify = function(identify){
  var traits = identify.traits({ created: 'created_at' });
  traits = convertDates(traits, unix);
  push('identify', traits);
};

/**
 * Group.
 *
 * @param {Group} group
 */

UserVoice.prototype.group = function(group){
  var traits = group.traits({ created: 'created_at' });
  traits = convertDates(traits, unix);
  push('identify', { account: traits });
};

/**
 * Initialize (classic).
 *
 * @param {Object} options
 * @param {Function} ready
 */

UserVoice.prototype.initializeClassic = function(){
  var options = this.options;
  window.showClassicWidget = showClassicWidget; // part of public api
  if (options.showWidget) showClassicWidget('showTab', formatClassicOptions(options));
  this.load(this.ready);
};

/**
 * Identify (classic).
 *
 * @param {Identify} identify
 */

UserVoice.prototype.identifyClassic = function(identify){
  push('setCustomFields', identify.traits());
};

/**
 * Format the options for UserVoice.
 *
 * @param {Object} options
 * @return {Object}
 */

function formatOptions(options){
  return alias(options, {
    forumId: 'forum_id',
    accentColor: 'accent_color',
    smartvote: 'smartvote_enabled',
    triggerColor: 'trigger_color',
    triggerBackgroundColor: 'trigger_background_color',
    triggerPosition: 'trigger_position'
  });
}

/**
 * Format the classic options for UserVoice.
 *
 * @param {Object} options
 * @return {Object}
 */

function formatClassicOptions(options){
  return alias(options, {
    forumId: 'forum_id',
    classicMode: 'mode',
    primaryColor: 'primary_color',
    tabPosition: 'tab_position',
    tabColor: 'tab_color',
    linkColor: 'link_color',
    defaultMode: 'default_mode',
    tabLabel: 'tab_label',
    tabInverted: 'tab_inverted'
  });
}

/**
 * Show the classic version of the UserVoice widget. This method is usually part
 * of UserVoice classic's public API.
 *
 * @param {String} type ('showTab' or 'showLightbox')
 * @param {Object} options (optional)
 */

function showClassicWidget(type, options){
  type = type || 'showLightbox';
  push(type, 'classic_widget', options);
}

}, {"analytics.js-integration":89,"global-queue":153,"convert-dates":159,"to-unix-timestamp":182,"alias":158,"clone":157}],
342: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var push = require('global-queue')('_veroq');
var cookie = require('component/cookie');
var objCase = require('obj-case');

/**
 * Expose `Vero` integration.
 */

var Vero = module.exports = integration('Vero')
  .global('_veroq')
  .option('apiKey', '')
  .tag('<script src="//d3qxef4rp70elm.cloudfront.net/m.js">');

/**
 * Initialize.
 *
 * https://github.com/getvero/vero-api/blob/master/sections/js.md
 *
 * @param {Object} page
 */

Vero.prototype.initialize = function(page){
  // clear default cookie so vero parses correctly.
  // this is for the tests.
  // basically, they have window.addEventListener('unload')
  // which then saves their "command_store", which is an array.
  // so we just want to create that initially so we can reload the tests.
  if (!cookie('__veroc4')) cookie('__veroc4', '[]');
  push('init', { api_key: this.options.apiKey });
  this.load(this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Vero.prototype.loaded = function(){
  return !! (window._veroq && window._veroq.push !== Array.prototype.push);
};

/**
 * Page.
 *
 * https://www.getvero.com/knowledge-base#/questions/71768-Does-Vero-track-pageviews
 *
 * @param {Page} page
 */

Vero.prototype.page = function(page){
  push('trackPageview');
};

/**
 * Identify.
 *
 * https://github.com/getvero/vero-api/blob/master/sections/js.md#user-identification
 *
 * @param {Identify} identify
 */

Vero.prototype.identify = function(identify){
  var traits = identify.traits();
  var email = identify.email();
  var id = identify.userId();
  if (!id || !email) return; // both required
  push('user', traits);
};

/**
 * Track.
 *
 * https://github.com/getvero/vero-api/blob/master/sections/js.md#tracking-events
 *
 * @param {Track} track
 */

Vero.prototype.track = function(track){
  var regex = /[uU]nsubscribe/;

  if (track.event().match(regex)) {
    push('unsubscribe', { id: track.properties().id });
  } else {
    push('track', track.event(), track.properties());
  }
};

}, {"analytics.js-integration":89,"global-queue":153,"component/cookie":183,"obj-case":162}],
343: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var tick = require('next-tick');
var each = require('each');

/**
 * Expose `VWO` integration.
 */

var VWO = module.exports = integration('Visual Website Optimizer')
  .option('replay', true);

/**
 * Initialize.
 *
 * http://v2.visualwebsiteoptimizer.com/tools/get_tracking_code.php
 */

VWO.prototype.initialize = function(){
  if (this.options.replay) this.replay();
  this.ready();
};

/**
 * Replay the experiments the user has seen as traits to all other integrations.
 * Wait for the next tick to replay so that the `analytics` object and all of
 * the integrations are fully initialized.
 */

VWO.prototype.replay = function(){
  var analytics = this.analytics;
  tick(function(){
    experiments(function(err, traits){
      if (traits) analytics.identify(traits);
    });
  });
};

/**
 * Get dictionary of experiment keys and variations.
 *
 * http://visualwebsiteoptimizer.com/knowledge/integration-of-vwo-with-kissmetrics/
 *
 * @param {Function} fn
 * @return {Object}
 */

function experiments(fn){
  enqueue(function(){
    var data = {};
    var ids = window._vwo_exp_ids;
    if (!ids) return fn();
    each(ids, function(id){
      var name = variation(id);
      if (name) data['Experiment: ' + id] = name;
    });
    fn(null, data);
  });
}

/**
 * Add a `fn` to the VWO queue, creating one if it doesn't exist.
 *
 * @param {Function} fn
 */

function enqueue(fn){
  window._vis_opt_queue = window._vis_opt_queue || [];
  window._vis_opt_queue.push(fn);
}

/**
 * Get the chosen variation's name from an experiment `id`.
 *
 * http://visualwebsiteoptimizer.com/knowledge/integration-of-vwo-with-kissmetrics/
 *
 * @param {String} id
 * @return {String}
 */

function variation(id){
  var experiments = window._vwo_exp;
  if (!experiments) return null;
  var experiment = experiments[id];
  var variationId = experiment.combination_chosen;
  return variationId ? experiment.comb_n[variationId] : null;
}

}, {"analytics.js-integration":89,"next-tick":103,"each":11}],
344: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var useHttps = require('use-https');

/**
 * Expose `WebEngage` integration.
 */

var WebEngage = module.exports = integration('WebEngage')
  .assumesPageview()
  .global('_weq')
  .global('webengage')
  .option('widgetVersion', '4.0')
  .option('licenseCode', '')
  .tag('http', '<script src="http://cdn.widgets.webengage.com/js/widget/webengage-min-v-4.0.js">')
  .tag('https', '<script src="https://ssl.widgets.webengage.com/js/widget/webengage-min-v-4.0.js">');

/**
 * Initialize.
 *
 * @param {Object} page
 */

WebEngage.prototype.initialize = function(page){
  var _weq = window._weq = window._weq || {};
  _weq['webengage.licenseCode'] = this.options.licenseCode;
  _weq['webengage.widgetVersion'] = this.options.widgetVersion;
  var name = useHttps() ? 'https' : 'http';
  this.load(name, this.ready);
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

WebEngage.prototype.loaded = function(){
  return !! window.webengage;
};

}, {"analytics.js-integration":89,"use-https":91}],
345: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var snake = require('to-snake-case');
var isEmail = require('is-email');
var extend = require('extend');
var each = require('each');
var type = require('type');

/**
 * Expose `Woopra` integration.
 */

var Woopra = module.exports = integration('Woopra')
  .global('woopra')
  .option('domain', '')
  .option('cookieName', 'wooTracker')
  .option('cookieDomain', null)
  .option('cookiePath', '/')
  .option('ping', true)
  .option('pingInterval', 12000)
  .option('idleTimeout', 300000)
  .option('downloadTracking', true)
  .option('outgoingTracking', true)
  .option('outgoingIgnoreSubdomain', true)
  .option('downloadPause', 200)
  .option('outgoingPause', 400)
  .option('ignoreQueryUrl', true)
  .option('hideCampaign', false)
  .tag('<script src="//static.woopra.com/js/w.js">');

/**
 * Initialize.
 *
 * http://www.woopra.com/docs/setup/javascript-tracking/
 *
 * @param {Object} page
 */

Woopra.prototype.initialize = function(page){
  (function () {var i, s, z, w = window, d = document, a = arguments, q = 'script', f = ['config', 'track', 'identify', 'visit', 'push', 'call'], c = function () {var i, self = this; self._e = []; for (i = 0; i < f.length; i++) {(function (f) {self[f] = function () {self._e.push([f].concat(Array.prototype.slice.call(arguments, 0))); return self; }; })(f[i]); } }; w._w = w._w || {}; for (i = 0; i < a.length; i++) { w._w[a[i]] = w[a[i]] = w[a[i]] || new c(); } })('woopra');
  this.load(this.ready);
  each(this.options, function(key, value){
    key = snake(key);
    if (null == value) return;
    if ('' === value) return;
    window.woopra.config(key, value);
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Woopra.prototype.loaded = function(){
  return !! (window.woopra && window.woopra.loaded);
};

/**
 * Page.
 *
 * @param {String} category (optional)
 */

Woopra.prototype.page = function(page){
  var props = page.properties();
  var name = page.fullName();
  if (name) props.title = name;
  window.woopra.track('pv', props);
};

/**
 * Identify.
 *
 * @param {Identify} identify
 */

Woopra.prototype.identify = function(identify){
  var traits = identify.traits();
  if (identify.name()) traits.name = identify.name();
  window.woopra.identify(traits).push(); // `push` sends it off async
};

/**
 * Track.
 *
 * @param {Track} track
 */

Woopra.prototype.track = function(track){
  window.woopra.track(track.event(), track.properties());
};

}, {"analytics.js-integration":89,"to-snake-case":90,"is-email":148,"extend":123,"each":11,"type":13}],
346: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var integration = require('analytics.js-integration');
var tick = require('next-tick');
var bind = require('bind');
var when = require('when');

/**
 * Expose `Yandex` integration.
 */

var Yandex = module.exports = integration('Yandex Metrica')
  .assumesPageview()
  .global('yandex_metrika_callbacks')
  .global('Ya')
  .option('counterId', null)
  .option('clickmap', false)
  .option('webvisor', false)
  .tag('<script src="//mc.yandex.ru/metrika/watch.js">');

/**
 * Initialize.
 *
 * http://api.yandex.com/metrika/
 * https://metrica.yandex.com/22522351?step=2#tab=code
 *
 * @param {Object} page
 */

Yandex.prototype.initialize = function(page){
  var id = this.options.counterId;
  var clickmap = this.options.clickmap;
  var webvisor = this.options.webvisor;

  push(function(){
    window['yaCounter' + id] = new window.Ya.Metrika({
      id: id,
      clickmap: clickmap,
      webvisor: webvisor
    });
  });

  var loaded = bind(this, this.loaded);
  var ready = this.ready;
  this.load(function(){
    when(loaded, function(){
      tick(ready);
    });
  });
};

/**
 * Loaded?
 *
 * @return {Boolean}
 */

Yandex.prototype.loaded = function(){
  return !! (window.Ya && window.Ya.Metrika);
};

/**
 * Push a new callback on the global Yandex queue.
 *
 * @param {Function} callback
 */

function push(callback){
  window.yandex_metrika_callbacks = window.yandex_metrika_callbacks || [];
  window.yandex_metrika_callbacks.push(callback);
}

}, {"analytics.js-integration":89,"next-tick":103,"bind":101,"when":124}],
270: [function(require, module, exports) {

var after = require('after');
var bind = require('bind');
var callback = require('callback');
var canonical = require('canonical');
var clone = require('clone');
var cookie = require('./cookie');
var debug = require('debug');
var defaults = require('defaults');
var each = require('each');
var Emitter = require('emitter');
var group = require('./group');
var is = require('is');
var isEmail = require('is-email');
var isMeta = require('is-meta');
var newDate = require('new-date');
var on = require('event').bind;
var prevent = require('prevent');
var querystring = require('querystring');
var size = require('object').length;
var store = require('./store');
var url = require('url');
var user = require('./user');
var Facade = require('facade');
var Identify = Facade.Identify;
var Group = Facade.Group;
var Alias = Facade.Alias;
var Track = Facade.Track;
var Page = Facade.Page;

/**
 * Expose `Analytics`.
 */

exports = module.exports = Analytics;

/**
 * Expose `cookie`
 */

exports.cookie = cookie;
exports.store = store;

/**
 * Initialize a new `Analytics` instance.
 */

function Analytics () {
  this.Integrations = {};
  this._integrations = {};
  this._readied = false;
  this._timeout = 300;
  this._user = user; // BACKWARDS COMPATIBILITY
  bind.all(this);

  var self = this;
  this.on('initialize', function(settings, options){
    if (options.initialPageview) self.page();
  });

  this.on('initialize', function(){
    self._parseQuery();
  });
}

/**
 * Event Emitter.
 */

Emitter(Analytics.prototype);

/**
 * Use a `plugin`.
 *
 * @param {Function} plugin
 * @return {Analytics}
 */

Analytics.prototype.use = function (plugin) {
  plugin(this);
  return this;
};

/**
 * Define a new `Integration`.
 *
 * @param {Function} Integration
 * @return {Analytics}
 */

Analytics.prototype.addIntegration = function (Integration) {
  var name = Integration.prototype.name;
  if (!name) throw new TypeError('attempted to add an invalid integration');
  this.Integrations[name] = Integration;
  return this;
};

/**
 * Initialize with the given integration `settings` and `options`. Aliased to
 * `init` for convenience.
 *
 * @param {Object} settings
 * @param {Object} options (optional)
 * @return {Analytics}
 */

Analytics.prototype.init =
Analytics.prototype.initialize = function (settings, options) {
  settings = settings || {};
  options = options || {};

  this._options(options);
  this._readied = false;

  // clean unknown integrations from settings
  var self = this;
  each(settings, function (name) {
    var Integration = self.Integrations[name];
    if (!Integration) delete settings[name];
  });

  // add integrations
  each(settings, function (name, opts) {
    var Integration = self.Integrations[name];
    var integration = new Integration(clone(opts));
    self.add(integration);
  });

  var integrations = this._integrations;

  // load user now that options are set
  user.load();
  group.load();

  // make ready callback
  var ready = after(size(integrations), function () {
    self._readied = true;
    self.emit('ready');
  });

  // initialize integrations, passing ready
  each(integrations, function (name, integration) {
    if (options.initialPageview && integration.options.initialPageview === false) {
      integration.page = after(2, integration.page);
    }

    integration.analytics = self;
    integration.once('ready', ready);
    integration.initialize();
  });

  // backwards compat with angular plugin.
  // TODO: remove
  this.initialized = true;

  this.emit('initialize', settings, options);
  return this;
};

/**
 * Add an integration.
 *
 * @param {Integration} integration
 */

Analytics.prototype.add = function(integration){
  this._integrations[integration.name] = integration;
  return this;
};

/**
 * Identify a user by optional `id` and `traits`.
 *
 * @param {String} id (optional)
 * @param {Object} traits (optional)
 * @param {Object} options (optional)
 * @param {Function} fn (optional)
 * @return {Analytics}
 */

Analytics.prototype.identify = function (id, traits, options, fn) {
  if (is.fn(options)) fn = options, options = null;
  if (is.fn(traits)) fn = traits, options = null, traits = null;
  if (is.object(id)) options = traits, traits = id, id = user.id();


  // clone traits before we manipulate so we don't do anything uncouth, and take
  // from `user` so that we carryover anonymous traits
  user.identify(id, traits);
  id = user.id();
  traits = user.traits();

  this._invoke('identify', message(Identify, {
    options: options,
    traits: traits,
    userId: id
  }));

  // emit
  this.emit('identify', id, traits, options);
  this._callback(fn);
  return this;
};

/**
 * Return the current user.
 *
 * @return {Object}
 */

Analytics.prototype.user = function () {
  return user;
};

/**
 * Identify a group by optional `id` and `traits`. Or, if no arguments are
 * supplied, return the current group.
 *
 * @param {String} id (optional)
 * @param {Object} traits (optional)
 * @param {Object} options (optional)
 * @param {Function} fn (optional)
 * @return {Analytics or Object}
 */

Analytics.prototype.group = function (id, traits, options, fn) {
  if (0 === arguments.length) return group;
  if (is.fn(options)) fn = options, options = null;
  if (is.fn(traits)) fn = traits, options = null, traits = null;
  if (is.object(id)) options = traits, traits = id, id = group.id();


  // grab from group again to make sure we're taking from the source
  group.identify(id, traits);
  id = group.id();
  traits = group.traits();

  this._invoke('group', message(Group, {
    options: options,
    traits: traits,
    groupId: id
  }));

  this.emit('group', id, traits, options);
  this._callback(fn);
  return this;
};

/**
 * Track an `event` that a user has triggered with optional `properties`.
 *
 * @param {String} event
 * @param {Object} properties (optional)
 * @param {Object} options (optional)
 * @param {Function} fn (optional)
 * @return {Analytics}
 */

Analytics.prototype.track = function (event, properties, options, fn) {
  if (is.fn(options)) fn = options, options = null;
  if (is.fn(properties)) fn = properties, options = null, properties = null;

  this._invoke('track', message(Track, {
    properties: properties,
    options: options,
    event: event
  }));

  this.emit('track', event, properties, options);
  this._callback(fn);
  return this;
};

/**
 * Helper method to track an outbound link that would normally navigate away
 * from the page before the analytics calls were sent.
 *
 * BACKWARDS COMPATIBILITY: aliased to `trackClick`.
 *
 * @param {Element or Array} links
 * @param {String or Function} event
 * @param {Object or Function} properties (optional)
 * @return {Analytics}
 */

Analytics.prototype.trackClick =
Analytics.prototype.trackLink = function (links, event, properties) {
  if (!links) return this;
  if (is.element(links)) links = [links]; // always arrays, handles jquery

  var self = this;
  each(links, function (el) {
    if (!is.element(el)) throw new TypeError('Must pass HTMLElement to `analytics.trackLink`.');
    on(el, 'click', function (e) {
      var ev = is.fn(event) ? event(el) : event;
      var props = is.fn(properties) ? properties(el) : properties;
      self.track(ev, props);

      if (el.href && el.target !== '_blank' && !isMeta(e)) {
        prevent(e);
        self._callback(function () {
          window.location.href = el.href;
        });
      }
    });
  });

  return this;
};

/**
 * Helper method to track an outbound form that would normally navigate away
 * from the page before the analytics calls were sent.
 *
 * BACKWARDS COMPATIBILITY: aliased to `trackSubmit`.
 *
 * @param {Element or Array} forms
 * @param {String or Function} event
 * @param {Object or Function} properties (optional)
 * @return {Analytics}
 */

Analytics.prototype.trackSubmit =
Analytics.prototype.trackForm = function (forms, event, properties) {
  if (!forms) return this;
  if (is.element(forms)) forms = [forms]; // always arrays, handles jquery

  var self = this;
  each(forms, function (el) {
    if (!is.element(el)) throw new TypeError('Must pass HTMLElement to `analytics.trackForm`.');
    function handler (e) {
      prevent(e);

      var ev = is.fn(event) ? event(el) : event;
      var props = is.fn(properties) ? properties(el) : properties;
      self.track(ev, props);

      self._callback(function () {
        el.submit();
      });
    }

    // support the events happening through jQuery or Zepto instead of through
    // the normal DOM API, since `el.submit` doesn't bubble up events...
    var $ = window.jQuery || window.Zepto;
    if ($) {
      $(el).submit(handler);
    } else {
      on(el, 'submit', handler);
    }
  });

  return this;
};

/**
 * Trigger a pageview, labeling the current page with an optional `category`,
 * `name` and `properties`.
 *
 * @param {String} category (optional)
 * @param {String} name (optional)
 * @param {Object or String} properties (or path) (optional)
 * @param {Object} options (optional)
 * @param {Function} fn (optional)
 * @return {Analytics}
 */

Analytics.prototype.page = function (category, name, properties, options, fn) {
  if (is.fn(options)) fn = options, options = null;
  if (is.fn(properties)) fn = properties, options = properties = null;
  if (is.fn(name)) fn = name, options = properties = name = null;
  if (is.object(category)) options = name, properties = category, name = category = null;
  if (is.object(name)) options = properties, properties = name, name = null;
  if (is.string(category) && !is.string(name)) name = category, category = null;

  var defs = {
    path: canonicalPath(),
    referrer: document.referrer,
    title: document.title,
    search: location.search
  };

  if (name) defs.name = name;
  if (category) defs.category = category;

  properties = clone(properties) || {};
  defaults(properties, defs);
  properties.url = properties.url || canonicalUrl(properties.search);

  this._invoke('page', message(Page, {
    properties: properties,
    category: category,
    options: options,
    name: name
  }));

  this.emit('page', category, name, properties, options);
  this._callback(fn);
  return this;
};

/**
 * BACKWARDS COMPATIBILITY: convert an old `pageview` to a `page` call.
 *
 * @param {String} url (optional)
 * @param {Object} options (optional)
 * @return {Analytics}
 * @api private
 */

Analytics.prototype.pageview = function (url, options) {
  var properties = {};
  if (url) properties.path = url;
  this.page(properties);
  return this;
};

/**
 * Merge two previously unassociated user identities.
 *
 * @param {String} to
 * @param {String} from (optional)
 * @param {Object} options (optional)
 * @param {Function} fn (optional)
 * @return {Analytics}
 */

Analytics.prototype.alias = function (to, from, options, fn) {
  if (is.fn(options)) fn = options, options = null;
  if (is.fn(from)) fn = from, options = null, from = null;
  if (is.object(from)) options = from, from = null;

  this._invoke('alias', message(Alias, {
    options: options,
    from: from,
    to: to
  }));

  this.emit('alias', to, from, options);
  this._callback(fn);
  return this;
};

/**
 * Register a `fn` to be fired when all the analytics services are ready.
 *
 * @param {Function} fn
 * @return {Analytics}
 */

Analytics.prototype.ready = function (fn) {
  if (!is.fn(fn)) return this;
  this._readied
    ? callback.async(fn)
    : this.once('ready', fn);
  return this;
};

/**
 * Set the `timeout` (in milliseconds) used for callbacks.
 *
 * @param {Number} timeout
 */

Analytics.prototype.timeout = function (timeout) {
  this._timeout = timeout;
};

/**
 * Enable or disable debug.
 *
 * @param {String or Boolean} str
 */

Analytics.prototype.debug = function(str){
  if (0 == arguments.length || str) {
    debug.enable('analytics:' + (str || '*'));
  } else {
    debug.disable();
  }
};

/**
 * Apply options.
 *
 * @param {Object} options
 * @return {Analytics}
 * @api private
 */

Analytics.prototype._options = function (options) {
  options = options || {};
  cookie.options(options.cookie);
  store.options(options.localStorage);
  user.options(options.user);
  group.options(options.group);
  return this;
};

/**
 * Callback a `fn` after our defined timeout period.
 *
 * @param {Function} fn
 * @return {Analytics}
 * @api private
 */

Analytics.prototype._callback = function (fn) {
  callback.async(fn, this._timeout);
  return this;
};

/**
 * Call `method` with `facade` on all enabled integrations.
 *
 * @param {String} method
 * @param {Facade} facade
 * @return {Analytics}
 * @api private
 */

Analytics.prototype._invoke = function (method, facade) {
  var options = facade.options();

  this.emit('invoke', facade);

  each(this._integrations, function (name, integration) {
    if (!facade.enabled(name)) return;
    integration.invoke.call(integration, method, facade);
  });

  return this;
};

/**
 * Push `args`.
 *
 * @param {Array} args
 * @api private
 */

Analytics.prototype.push = function(args){
  var method = args.shift();
  if (!this[method]) return;
  this[method].apply(this, args);
};

/**
 * Reset group and user traits and id's.
 *
 * @api public
 */

Analytics.prototype.reset = function(){
  this.user().logout();
  this.group().logout();
};

/**
 * Parse the query string for callable methods.
 *
 * @return {Analytics}
 * @api private
 */

Analytics.prototype._parseQuery = function () {
  // Identify and track any `ajs_uid` and `ajs_event` parameters in the URL.
  var q = querystring.parse(window.location.search);
  if (q.ajs_uid) this.identify(q.ajs_uid);
  if (q.ajs_event) this.track(q.ajs_event);
  if (q.ajs_aid) user.anonymousId(q.ajs_aid);
  return this;
};

/**
 * Return the canonical path for the page.
 *
 * @return {String}
 */

function canonicalPath () {
  var canon = canonical();
  if (!canon) return window.location.pathname;
  var parsed = url.parse(canon);
  return parsed.pathname;
}

/**
 * Return the canonical URL for the page concat the given `search`
 * and strip the hash.
 *
 * @param {String} search
 * @return {String}
 */

function canonicalUrl (search) {
  var canon = canonical();
  if (canon) return ~canon.indexOf('?') ? canon : canon + search;
  var url = window.location.href;
  var i = url.indexOf('#');
  return -1 == i ? url : url.slice(0, i);
}

/**
 * Create a new message with `Type` and `msg`
 *
 * the function will make sure that the `msg.options`
 * is merged to `msg` and deletes `msg.options` if it
 * has `.context / .timestamp / .integrations / .anonymousId`.
 *
 * Example:
 *
 *      message(Identify, {
 *        options: { timestamp: Date, context: Object, integrations: Object },
 *        traits: { trait: true },
 *        userId: 123
 *      });
 *
 *      // =>
 *
 *      {
 *        userId: 123,
 *        context: Object,
 *        timestamp: Date,
 *        integrations: Object
 *        traits: { trait: true }
 *      }
 *
 * @param {Function} Type
 * @param {Object} msg
 * @return {Facade}
 */

function message(Type, msg){
  var ctx = msg.options || {};

  if (ctx.timestamp || ctx.integrations || ctx.context || ctx.anonymousId) {
    msg = defaults(ctx, msg);
    delete msg.options;
  }

  if (ctx.anonymousId) {
    user.anonymousId(ctx.anonymousId);
  }

  msg.anonymousId = user.anonymousId();

  return new Type(msg);
}

}, {"after":110,"bind":347,"callback":94,"canonical":160,"clone":95,"./cookie":348,"debug":349,"defaults":97,"each":11,"emitter":109,"./group":350,"is":92,"is-email":148,"is-meta":351,"new-date":140,"event":352,"prevent":353,"querystring":354,"object":5,"./store":355,"url":163,"./user":356,"facade":125}],
347: [function(require, module, exports) {

try {
  var bind = require('bind');
} catch (e) {
  var bind = require('bind-component');
}

var bindAll = require('bind-all');


/**
 * Expose `bind`.
 */

module.exports = exports = bind;


/**
 * Expose `bindAll`.
 */

exports.all = bindAll;


/**
 * Expose `bindMethods`.
 */

exports.methods = bindMethods;


/**
 * Bind `methods` on `obj` to always be called with the `obj` as context.
 *
 * @param {Object} obj
 * @param {String} methods...
 */

function bindMethods (obj, methods) {
  methods = [].slice.call(arguments, 1);
  for (var i = 0, method; method = methods[i]; i++) {
    obj[method] = bind(obj, obj[method]);
  }
  return obj;
}
}, {"bind":101,"bind-all":102}],
348: [function(require, module, exports) {

var debug = require('debug')('analytics.js:cookie');
var bind = require('bind');
var cookie = require('cookie');
var clone = require('clone');
var defaults = require('defaults');
var json = require('json');
var topDomain = require('top-domain');


/**
 * Initialize a new `Cookie` with `options`.
 *
 * @param {Object} options
 */

function Cookie (options) {
  this.options(options);
}


/**
 * Get or set the cookie options.
 *
 * @param {Object} options
 *   @field {Number} maxage (1 year)
 *   @field {String} domain
 *   @field {String} path
 *   @field {Boolean} secure
 */

Cookie.prototype.options = function (options) {
  if (arguments.length === 0) return this._options;

  options = options || {};

  var domain = '.' + topDomain(window.location.href);

  this._options = defaults(options, {
    maxage: 31536000000, // default to a year
    path: '/',
    domain: domain
  });

  // http://curl.haxx.se/rfc/cookie_spec.html
  // https://publicsuffix.org/list/effective_tld_names.dat
  //
  // try setting a dummy cookie with the options
  // if the cookie isn't set, it probably means
  // that the domain is on the public suffix list
  // like myapp.herokuapp.com or localhost / ip.
  this.set('ajs:test', true);
  if (!this.get('ajs:test')) {
    debug('fallback to domain=null');
    this._options.domain = null;
  }
  this.remove('ajs:test');
};


/**
 * Set a `key` and `value` in our cookie.
 *
 * @param {String} key
 * @param {Object} value
 * @return {Boolean} saved
 */

Cookie.prototype.set = function (key, value) {
  try {
    value = json.stringify(value);
    cookie(key, value, clone(this._options));
    return true;
  } catch (e) {
    return false;
  }
};


/**
 * Get a value from our cookie by `key`.
 *
 * @param {String} key
 * @return {Object} value
 */

Cookie.prototype.get = function (key) {
  try {
    var value = cookie(key);
    value = value ? json.parse(value) : null;
    return value;
  } catch (e) {
    return null;
  }
};


/**
 * Remove a value from our cookie by `key`.
 *
 * @param {String} key
 * @return {Boolean} removed
 */

Cookie.prototype.remove = function (key) {
  try {
    cookie(key, null, clone(this._options));
    return true;
  } catch (e) {
    return false;
  }
};


/**
 * Expose the cookie singleton.
 */

module.exports = bind.all(new Cookie());


/**
 * Expose the `Cookie` constructor.
 */

module.exports.Cookie = Cookie;

}, {"debug":349,"bind":347,"cookie":183,"clone":95,"defaults":97,"json":357,"top-domain":358}],
349: [function(require, module, exports) {
if ('undefined' == typeof window) {
  module.exports = require('./lib/debug');
} else {
  module.exports = require('./debug');
}

}, {"./lib/debug":359,"./debug":360}],
359: [function(require, module, exports) {
/**
 * Module dependencies.
 */

var tty = require('tty');

/**
 * Expose `debug()` as the module.
 */

module.exports = debug;

/**
 * Enabled debuggers.
 */

var names = []
  , skips = [];

(process.env.DEBUG || '')
  .split(/[\s,]+/)
  .forEach(function(name){
    name = name.replace('*', '.*?');
    if (name[0] === '-') {
      skips.push(new RegExp('^' + name.substr(1) + '$'));
    } else {
      names.push(new RegExp('^' + name + '$'));
    }
  });

/**
 * Colors.
 */

var colors = [6, 2, 3, 4, 5, 1];

/**
 * Previous debug() call.
 */

var prev = {};

/**
 * Previously assigned color.
 */

var prevColor = 0;

/**
 * Is stdout a TTY? Colored output is disabled when `true`.
 */

var isatty = tty.isatty(2);

/**
 * Select a color.
 *
 * @return {Number}
 * @api private
 */

function color() {
  return colors[prevColor++ % colors.length];
}

/**
 * Humanize the given `ms`.
 *
 * @param {Number} m
 * @return {String}
 * @api private
 */

function humanize(ms) {
  var sec = 1000
    , min = 60 * 1000
    , hour = 60 * min;

  if (ms >= hour) return (ms / hour).toFixed(1) + 'h';
  if (ms >= min) return (ms / min).toFixed(1) + 'm';
  if (ms >= sec) return (ms / sec | 0) + 's';
  return ms + 'ms';
}

/**
 * Create a debugger with the given `name`.
 *
 * @param {String} name
 * @return {Type}
 * @api public
 */

function debug(name) {
  function disabled(){}
  disabled.enabled = false;

  var match = skips.some(function(re){
    return re.test(name);
  });

  if (match) return disabled;

  match = names.some(function(re){
    return re.test(name);
  });

  if (!match) return disabled;
  var c = color();

  function colored(fmt) {
    fmt = coerce(fmt);

    var curr = new Date;
    var ms = curr - (prev[name] || curr);
    prev[name] = curr;

    fmt = '  \u001b[9' + c + 'm' + name + ' '
      + '\u001b[3' + c + 'm\u001b[90m'
      + fmt + '\u001b[3' + c + 'm'
      + ' +' + humanize(ms) + '\u001b[0m';

    console.error.apply(this, arguments);
  }

  function plain(fmt) {
    fmt = coerce(fmt);

    fmt = new Date().toUTCString()
      + ' ' + name + ' ' + fmt;
    console.error.apply(this, arguments);
  }

  colored.enabled = plain.enabled = true;

  return isatty || process.env.DEBUG_COLORS
    ? colored
    : plain;
}

/**
 * Coerce `val`.
 */

function coerce(val) {
  if (val instanceof Error) return val.stack || val.message;
  return val;
}

}, {}],
360: [function(require, module, exports) {

/**
 * Expose `debug()` as the module.
 */

module.exports = debug;

/**
 * Create a debugger with the given `name`.
 *
 * @param {String} name
 * @return {Type}
 * @api public
 */

function debug(name) {
  if (!debug.enabled(name)) return function(){};

  return function(fmt){
    fmt = coerce(fmt);

    var curr = new Date;
    var ms = curr - (debug[name] || curr);
    debug[name] = curr;

    fmt = name
      + ' '
      + fmt
      + ' +' + debug.humanize(ms);

    // This hackery is required for IE8
    // where `console.log` doesn't have 'apply'
    window.console
      && console.log
      && Function.prototype.apply.call(console.log, console, arguments);
  }
}

/**
 * The currently active debug mode names.
 */

debug.names = [];
debug.skips = [];

/**
 * Enables a debug mode by name. This can include modes
 * separated by a colon and wildcards.
 *
 * @param {String} name
 * @api public
 */

debug.enable = function(name) {
  try {
    localStorage.debug = name;
  } catch(e){}

  var split = (name || '').split(/[\s,]+/)
    , len = split.length;

  for (var i = 0; i < len; i++) {
    name = split[i].replace('*', '.*?');
    if (name[0] === '-') {
      debug.skips.push(new RegExp('^' + name.substr(1) + '$'));
    }
    else {
      debug.names.push(new RegExp('^' + name + '$'));
    }
  }
};

/**
 * Disable debug output.
 *
 * @api public
 */

debug.disable = function(){
  debug.enable('');
};

/**
 * Humanize the given `ms`.
 *
 * @param {Number} m
 * @return {String}
 * @api private
 */

debug.humanize = function(ms) {
  var sec = 1000
    , min = 60 * 1000
    , hour = 60 * min;

  if (ms >= hour) return (ms / hour).toFixed(1) + 'h';
  if (ms >= min) return (ms / min).toFixed(1) + 'm';
  if (ms >= sec) return (ms / sec | 0) + 's';
  return ms + 'ms';
};

/**
 * Returns true if the given mode name is enabled, false otherwise.
 *
 * @param {String} name
 * @return {Boolean}
 * @api public
 */

debug.enabled = function(name) {
  for (var i = 0, len = debug.skips.length; i < len; i++) {
    if (debug.skips[i].test(name)) {
      return false;
    }
  }
  for (var i = 0, len = debug.names.length; i < len; i++) {
    if (debug.names[i].test(name)) {
      return true;
    }
  }
  return false;
};

/**
 * Coerce `val`.
 */

function coerce(val) {
  if (val instanceof Error) return val.stack || val.message;
  return val;
}

// persist

try {
  if (window.localStorage) debug.enable(localStorage.debug);
} catch(e){}

}, {}],
357: [function(require, module, exports) {

var json = window.JSON || {};
var stringify = json.stringify;
var parse = json.parse;

module.exports = parse && stringify
  ? JSON
  : require('json-fallback');

}, {"json-fallback":361}],
361: [function(require, module, exports) {
/*
    json2.js
    2014-02-04

    Public Domain.

    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.

    See http://www.JSON.org/js.html


    This code should be minified before deployment.
    See http://javascript.crockford.com/jsmin.html

    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO
    NOT CONTROL.


    This file creates a global JSON object containing two methods: stringify
    and parse.

        JSON.stringify(value, replacer, space)
            value       any JavaScript value, usually an object or array.

            replacer    an optional parameter that determines how object
                        values are stringified for objects. It can be a
                        function or an array of strings.

            space       an optional parameter that specifies the indentation
                        of nested structures. If it is omitted, the text will
                        be packed without extra whitespace. If it is a number,
                        it will specify the number of spaces to indent at each
                        level. If it is a string (such as '\t' or '&nbsp;'),
                        it contains the characters used to indent at each level.

            This method produces a JSON text from a JavaScript value.

            When an object value is found, if the object contains a toJSON
            method, its toJSON method will be called and the result will be
            stringified. A toJSON method does not serialize: it returns the
            value represented by the name/value pair that should be serialized,
            or undefined if nothing should be serialized. The toJSON method
            will be passed the key associated with the value, and this will be
            bound to the value

            For example, this would serialize Dates as ISO strings.

                Date.prototype.toJSON = function (key) {
                    function f(n) {
                        // Format integers to have at least two digits.
                        return n < 10 ? '0' + n : n;
                    }

                    return this.getUTCFullYear()   + '-' +
                         f(this.getUTCMonth() + 1) + '-' +
                         f(this.getUTCDate())      + 'T' +
                         f(this.getUTCHours())     + ':' +
                         f(this.getUTCMinutes())   + ':' +
                         f(this.getUTCSeconds())   + 'Z';
                };

            You can provide an optional replacer method. It will be passed the
            key and value of each member, with this bound to the containing
            object. The value that is returned from your method will be
            serialized. If your method returns undefined, then the member will
            be excluded from the serialization.

            If the replacer parameter is an array of strings, then it will be
            used to select the members to be serialized. It filters the results
            such that only members with keys listed in the replacer array are
            stringified.

            Values that do not have JSON representations, such as undefined or
            functions, will not be serialized. Such values in objects will be
            dropped; in arrays they will be replaced with null. You can use
            a replacer function to replace those with JSON values.
            JSON.stringify(undefined) returns undefined.

            The optional space parameter produces a stringification of the
            value that is filled with line breaks and indentation to make it
            easier to read.

            If the space parameter is a non-empty string, then that string will
            be used for indentation. If the space parameter is a number, then
            the indentation will be that many spaces.

            Example:

            text = JSON.stringify(['e', {pluribus: 'unum'}]);
            // text is '["e",{"pluribus":"unum"}]'


            text = JSON.stringify(['e', {pluribus: 'unum'}], null, '\t');
            // text is '[\n\t"e",\n\t{\n\t\t"pluribus": "unum"\n\t}\n]'

            text = JSON.stringify([new Date()], function (key, value) {
                return this[key] instanceof Date ?
                    'Date(' + this[key] + ')' : value;
            });
            // text is '["Date(---current time---)"]'


        JSON.parse(text, reviver)
            This method parses a JSON text to produce an object or array.
            It can throw a SyntaxError exception.

            The optional reviver parameter is a function that can filter and
            transform the results. It receives each of the keys and values,
            and its return value is used instead of the original value.
            If it returns what it received, then the structure is not modified.
            If it returns undefined then the member is deleted.

            Example:

            // Parse the text. Values that look like ISO date strings will
            // be converted to Date objects.

            myData = JSON.parse(text, function (key, value) {
                var a;
                if (typeof value === 'string') {
                    a =
/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(value);
                    if (a) {
                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],
                            +a[5], +a[6]));
                    }
                }
                return value;
            });

            myData = JSON.parse('["Date(09/09/2001)"]', function (key, value) {
                var d;
                if (typeof value === 'string' &&
                        value.slice(0, 5) === 'Date(' &&
                        value.slice(-1) === ')') {
                    d = new Date(value.slice(5, -1));
                    if (d) {
                        return d;
                    }
                }
                return value;
            });


    This is a reference implementation. You are free to copy, modify, or
    redistribute.
*/

/*jslint evil: true, regexp: true */

/*members "", "\b", "\t", "\n", "\f", "\r", "\"", JSON, "\\", apply,
    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,
    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,
    lastIndex, length, parse, prototype, push, replace, slice, stringify,
    test, toJSON, toString, valueOf
*/


// Create a JSON object only if one does not already exist. We create the
// methods in a closure to avoid creating global variables.

(function () {
    'use strict';

    var JSON = module.exports = {};

    function f(n) {
        // Format integers to have at least two digits.
        return n < 10 ? '0' + n : n;
    }

    if (typeof Date.prototype.toJSON !== 'function') {

        Date.prototype.toJSON = function () {

            return isFinite(this.valueOf())
                ? this.getUTCFullYear()     + '-' +
                    f(this.getUTCMonth() + 1) + '-' +
                    f(this.getUTCDate())      + 'T' +
                    f(this.getUTCHours())     + ':' +
                    f(this.getUTCMinutes())   + ':' +
                    f(this.getUTCSeconds())   + 'Z'
                : null;
        };

        String.prototype.toJSON      =
            Number.prototype.toJSON  =
            Boolean.prototype.toJSON = function () {
                return this.valueOf();
            };
    }

    var cx,
        escapable,
        gap,
        indent,
        meta,
        rep;


    function quote(string) {

// If the string contains no control characters, no quote characters, and no
// backslash characters, then we can safely slap some quotes around it.
// Otherwise we must also replace the offending characters with safe escape
// sequences.

        escapable.lastIndex = 0;
        return escapable.test(string) ? '"' + string.replace(escapable, function (a) {
            var c = meta[a];
            return typeof c === 'string'
                ? c
                : '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
        }) + '"' : '"' + string + '"';
    }


    function str(key, holder) {

// Produce a string from holder[key].

        var i,          // The loop counter.
            k,          // The member key.
            v,          // The member value.
            length,
            mind = gap,
            partial,
            value = holder[key];

// If the value has a toJSON method, call it to obtain a replacement value.

        if (value && typeof value === 'object' &&
                typeof value.toJSON === 'function') {
            value = value.toJSON(key);
        }

// If we were called with a replacer function, then call the replacer to
// obtain a replacement value.

        if (typeof rep === 'function') {
            value = rep.call(holder, key, value);
        }

// What happens next depends on the value's type.

        switch (typeof value) {
        case 'string':
            return quote(value);

        case 'number':

// JSON numbers must be finite. Encode non-finite numbers as null.

            return isFinite(value) ? String(value) : 'null';

        case 'boolean':
        case 'null':

// If the value is a boolean or null, convert it to a string. Note:
// typeof null does not produce 'null'. The case is included here in
// the remote chance that this gets fixed someday.

            return String(value);

// If the type is 'object', we might be dealing with an object or an array or
// null.

        case 'object':

// Due to a specification blunder in ECMAScript, typeof null is 'object',
// so watch out for that case.

            if (!value) {
                return 'null';
            }

// Make an array to hold the partial results of stringifying this object value.

            gap += indent;
            partial = [];

// Is the value an array?

            if (Object.prototype.toString.apply(value) === '[object Array]') {

// The value is an array. Stringify every element. Use null as a placeholder
// for non-JSON values.

                length = value.length;
                for (i = 0; i < length; i += 1) {
                    partial[i] = str(i, value) || 'null';
                }

// Join all of the elements together, separated with commas, and wrap them in
// brackets.

                v = partial.length === 0
                    ? '[]'
                    : gap
                    ? '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']'
                    : '[' + partial.join(',') + ']';
                gap = mind;
                return v;
            }

// If the replacer is an array, use it to select the members to be stringified.

            if (rep && typeof rep === 'object') {
                length = rep.length;
                for (i = 0; i < length; i += 1) {
                    if (typeof rep[i] === 'string') {
                        k = rep[i];
                        v = str(k, value);
                        if (v) {
                            partial.push(quote(k) + (gap ? ': ' : ':') + v);
                        }
                    }
                }
            } else {

// Otherwise, iterate through all of the keys in the object.

                for (k in value) {
                    if (Object.prototype.hasOwnProperty.call(value, k)) {
                        v = str(k, value);
                        if (v) {
                            partial.push(quote(k) + (gap ? ': ' : ':') + v);
                        }
                    }
                }
            }

// Join all of the member texts together, separated with commas,
// and wrap them in braces.

            v = partial.length === 0
                ? '{}'
                : gap
                ? '{\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '}'
                : '{' + partial.join(',') + '}';
            gap = mind;
            return v;
        }
    }

// If the JSON object does not yet have a stringify method, give it one.

    if (typeof JSON.stringify !== 'function') {
        escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        meta = {    // table of character substitutions
            '\b': '\\b',
            '\t': '\\t',
            '\n': '\\n',
            '\f': '\\f',
            '\r': '\\r',
            '"' : '\\"',
            '\\': '\\\\'
        };
        JSON.stringify = function (value, replacer, space) {

// The stringify method takes a value and an optional replacer, and an optional
// space parameter, and returns a JSON text. The replacer can be a function
// that can replace values, or an array of strings that will select the keys.
// A default replacer method can be provided. Use of the space parameter can
// produce text that is more easily readable.

            var i;
            gap = '';
            indent = '';

// If the space parameter is a number, make an indent string containing that
// many spaces.

            if (typeof space === 'number') {
                for (i = 0; i < space; i += 1) {
                    indent += ' ';
                }

// If the space parameter is a string, it will be used as the indent string.

            } else if (typeof space === 'string') {
                indent = space;
            }

// If there is a replacer, it must be a function or an array.
// Otherwise, throw an error.

            rep = replacer;
            if (replacer && typeof replacer !== 'function' &&
                    (typeof replacer !== 'object' ||
                    typeof replacer.length !== 'number')) {
                throw new Error('JSON.stringify');
            }

// Make a fake root object containing our value under the key of ''.
// Return the result of stringifying the value.

            return str('', {'': value});
        };
    }


// If the JSON object does not yet have a parse method, give it one.

    if (typeof JSON.parse !== 'function') {
        cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        JSON.parse = function (text, reviver) {

// The parse method takes a text and an optional reviver function, and returns
// a JavaScript value if the text is a valid JSON text.

            var j;

            function walk(holder, key) {

// The walk method is used to recursively walk the resulting structure so
// that modifications can be made.

                var k, v, value = holder[key];
                if (value && typeof value === 'object') {
                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = walk(value, k);
                            if (v !== undefined) {
                                value[k] = v;
                            } else {
                                delete value[k];
                            }
                        }
                    }
                }
                return reviver.call(holder, key, value);
            }


// Parsing happens in four stages. In the first stage, we replace certain
// Unicode characters with escape sequences. JavaScript handles many characters
// incorrectly, either silently deleting them, or treating them as line endings.

            text = String(text);
            cx.lastIndex = 0;
            if (cx.test(text)) {
                text = text.replace(cx, function (a) {
                    return '\\u' +
                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
                });
            }

// In the second stage, we run the text against regular expressions that look
// for non-JSON patterns. We are especially concerned with '()' and 'new'
// because they can cause invocation, and '=' because it can cause mutation.
// But just to be safe, we want to reject all unexpected forms.

// We split the second stage into 4 regexp operations in order to work around
// crippling inefficiencies in IE's and Safari's regexp engines. First we
// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we
// replace all simple value tokens with ']' characters. Third, we delete all
// open brackets that follow a colon or comma or that begin the text. Finally,
// we look to see that the remaining characters are only whitespace or ']' or
// ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.

            if (/^[\],:{}\s]*$/
                    .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                        .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                        .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

// In the third stage we use the eval function to compile the text into a
// JavaScript structure. The '{' operator is subject to a syntactic ambiguity
// in JavaScript: it can begin a block or an object literal. We wrap the text
// in parens to eliminate the ambiguity.

                j = eval('(' + text + ')');

// In the optional fourth stage, we recursively walk the new structure, passing
// each name/value pair to a reviver function for possible transformation.

                return typeof reviver === 'function'
                    ? walk({'': j}, '')
                    : j;
            }

// If the text is not JSON parseable, then a SyntaxError is thrown.

            throw new SyntaxError('JSON.parse');
        };
    }
}());

}, {}],
358: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var parse = require('url').parse;

/**
 * Expose `domain`
 */

module.exports = domain;

/**
 * RegExp
 */

var regexp = /[a-z0-9][a-z0-9\-]*[a-z0-9]\.[a-z\.]{2,6}$/i;

/**
 * Get the top domain.
 * 
 * Official Grammar: http://tools.ietf.org/html/rfc883#page-56
 * Look for tlds with up to 2-6 characters.
 * 
 * Example:
 * 
 *      domain('http://localhost:3000/baz');
 *      // => ''
 *      domain('http://dev:3000/baz');
 *      // => ''
 *      domain('http://127.0.0.1:3000/baz');
 *      // => ''
 *      domain('http://segment.io/baz');
 *      // => 'segment.io'
 * 
 * @param {String} url
 * @return {String}
 * @api public
 */

function domain(url){
  var host = parse(url).hostname;
  var match = host.match(regexp);
  return match ? match[0] : '';
};

}, {"url":163}],
350: [function(require, module, exports) {

var debug = require('debug')('analytics:group');
var Entity = require('./entity');
var inherit = require('inherit');
var bind = require('bind');


/**
 * Group defaults
 */

Group.defaults = {
  persist: true,
  cookie: {
    key: 'ajs_group_id'
  },
  localStorage: {
    key: 'ajs_group_properties'
  }
};


/**
 * Initialize a new `Group` with `options`.
 *
 * @param {Object} options
 */

function Group (options) {
  this.defaults = Group.defaults;
  this.debug = debug;
  Entity.call(this, options);
}


/**
 * Inherit `Entity`
 */

inherit(Group, Entity);


/**
 * Expose the group singleton.
 */

module.exports = bind.all(new Group());


/**
 * Expose the `Group` constructor.
 */

module.exports.Group = Group;

}, {"debug":349,"./entity":362,"inherit":363,"bind":347}],
362: [function(require, module, exports) {

var traverse = require('isodate-traverse');
var defaults = require('defaults');
var cookie = require('./cookie');
var store = require('./store');
var extend = require('extend');
var clone = require('clone');


/**
 * Expose `Entity`
 */

module.exports = Entity;


/**
 * Initialize new `Entity` with `options`.
 *
 * @param {Object} options
 */

function Entity(options){
  this.protocol = window.location.protocol;
  this.options(options);
}

/**
 * Get the storage.
 *
 * When .protocol is `file:` or `chrome-extension:`
 * the method will return the localstorage (store)
 * otherwise it will return the cookie.
 *
 * @return {Object}
 */

Entity.prototype.storage = function(){
  return 'file:' == this.protocol
    || 'chrome-extension:' == this.protocol
    ? store
    : cookie;
};

/**
 * Get or set storage `options`.
 *
 * @param {Object} options
 *   @property {Object} cookie
 *   @property {Object} localStorage
 *   @property {Boolean} persist (default: `true`)
 */

Entity.prototype.options = function (options) {
  if (arguments.length === 0) return this._options;
  options || (options = {});
  defaults(options, this.defaults || {});
  this._options = options;
};


/**
 * Get or set the entity's `id`.
 *
 * @param {String} id
 */

Entity.prototype.id = function (id) {
  switch (arguments.length) {
    case 0: return this._getId();
    case 1: return this._setId(id);
  }
};


/**
 * Get the entity's id.
 *
 * @return {String}
 */

Entity.prototype._getId = function () {
  var storage = this.storage();
  var ret = this._options.persist
    ? storage.get(this._options.cookie.key)
    : this._id;
  return ret === undefined ? null : ret;
};


/**
 * Set the entity's `id`.
 *
 * @param {String} id
 */

Entity.prototype._setId = function (id) {
  var storage = this.storage();
  if (this._options.persist) {
    storage.set(this._options.cookie.key, id);
  } else {
    this._id = id;
  }
};


/**
 * Get or set the entity's `traits`.
 *
 * BACKWARDS COMPATIBILITY: aliased to `properties`
 *
 * @param {Object} traits
 */

Entity.prototype.properties =
Entity.prototype.traits = function (traits) {
  switch (arguments.length) {
    case 0: return this._getTraits();
    case 1: return this._setTraits(traits);
  }
};


/**
 * Get the entity's traits. Always convert ISO date strings into real dates,
 * since they aren't parsed back from local storage.
 *
 * @return {Object}
 */

Entity.prototype._getTraits = function () {
  var ret = this._options.persist
    ? store.get(this._options.localStorage.key)
    : this._traits;
  return ret ? traverse(clone(ret)) : {};
};


/**
 * Set the entity's `traits`.
 *
 * @param {Object} traits
 */

Entity.prototype._setTraits = function (traits) {
  traits || (traits = {});
  if (this._options.persist) {
    store.set(this._options.localStorage.key, traits);
  } else {
    this._traits = traits;
  }
};


/**
 * Identify the entity with an `id` and `traits`. If we it's the same entity,
 * extend the existing `traits` instead of overwriting.
 *
 * @param {String} id
 * @param {Object} traits
 */

Entity.prototype.identify = function (id, traits) {
  traits || (traits = {});
  var current = this.id();
  if (current === null || current === id) traits = extend(this.traits(), traits);
  if (id) this.id(id);
  this.debug('identify %o, %o', id, traits);
  this.traits(traits);
  this.save();
};


/**
 * Save the entity to local storage and the cookie.
 *
 * @return {Boolean}
 */

Entity.prototype.save = function () {
  if (!this._options.persist) return false;
  cookie.set(this._options.cookie.key, this.id());
  store.set(this._options.localStorage.key, this.traits());
  return true;
};


/**
 * Log the entity out, reseting `id` and `traits` to defaults.
 */

Entity.prototype.logout = function () {
  this.id(null);
  this.traits({});
  cookie.remove(this._options.cookie.key);
  store.remove(this._options.localStorage.key);
};


/**
 * Reset all entity state, logging out and returning options to defaults.
 */

Entity.prototype.reset = function () {
  this.logout();
  this.options({});
};


/**
 * Load saved entity `id` or `traits` from storage.
 */

Entity.prototype.load = function () {
  this.id(cookie.get(this._options.cookie.key));
  this.traits(store.get(this._options.localStorage.key));
};


}, {"isodate-traverse":135,"defaults":97,"./cookie":348,"./store":355,"extend":123,"clone":95}],
355: [function(require, module, exports) {

var bind = require('bind');
var defaults = require('defaults');
var store = require('store.js');


/**
 * Initialize a new `Store` with `options`.
 *
 * @param {Object} options
 */

function Store (options) {
  this.options(options);
}


/**
 * Set the `options` for the store.
 *
 * @param {Object} options
 *   @field {Boolean} enabled (true)
 */

Store.prototype.options = function (options) {
  if (arguments.length === 0) return this._options;

  options = options || {};
  defaults(options, { enabled : true });

  this.enabled  = options.enabled && store.enabled;
  this._options = options;
};


/**
 * Set a `key` and `value` in local storage.
 *
 * @param {String} key
 * @param {Object} value
 */

Store.prototype.set = function (key, value) {
  if (!this.enabled) return false;
  return store.set(key, value);
};


/**
 * Get a value from local storage by `key`.
 *
 * @param {String} key
 * @return {Object}
 */

Store.prototype.get = function (key) {
  if (!this.enabled) return null;
  return store.get(key);
};


/**
 * Remove a value from local storage by `key`.
 *
 * @param {String} key
 */

Store.prototype.remove = function (key) {
  if (!this.enabled) return false;
  return store.remove(key);
};


/**
 * Expose the store singleton.
 */

module.exports = bind.all(new Store());


/**
 * Expose the `Store` constructor.
 */

module.exports.Store = Store;

}, {"bind":347,"defaults":97,"store.js":364}],
364: [function(require, module, exports) {
var json             = require('json')
  , store            = {}
  , win              = window
	,	doc              = win.document
	,	localStorageName = 'localStorage'
	,	namespace        = '__storejs__'
	,	storage;

store.disabled = false
store.set = function(key, value) {}
store.get = function(key) {}
store.remove = function(key) {}
store.clear = function() {}
store.transact = function(key, defaultVal, transactionFn) {
	var val = store.get(key)
	if (transactionFn == null) {
		transactionFn = defaultVal
		defaultVal = null
	}
	if (typeof val == 'undefined') { val = defaultVal || {} }
	transactionFn(val)
	store.set(key, val)
}
store.getAll = function() {}

store.serialize = function(value) {
	return json.stringify(value)
}
store.deserialize = function(value) {
	if (typeof value != 'string') { return undefined }
	try { return json.parse(value) }
	catch(e) { return value || undefined }
}

// Functions to encapsulate questionable FireFox 3.6.13 behavior
// when about.config::dom.storage.enabled === false
// See https://github.com/marcuswestin/store.js/issues#issue/13
function isLocalStorageNameSupported() {
	try { return (localStorageName in win && win[localStorageName]) }
	catch(err) { return false }
}

if (isLocalStorageNameSupported()) {
	storage = win[localStorageName]
	store.set = function(key, val) {
		if (val === undefined) { return store.remove(key) }
		storage.setItem(key, store.serialize(val))
		return val
	}
	store.get = function(key) { return store.deserialize(storage.getItem(key)) }
	store.remove = function(key) { storage.removeItem(key) }
	store.clear = function() { storage.clear() }
	store.getAll = function() {
		var ret = {}
		for (var i=0; i<storage.length; ++i) {
			var key = storage.key(i)
			ret[key] = store.get(key)
		}
		return ret
	}
} else if (doc.documentElement.addBehavior) {
	var storageOwner,
		storageContainer
	// Since #userData storage applies only to specific paths, we need to
	// somehow link our data to a specific path.  We choose /favicon.ico
	// as a pretty safe option, since all browsers already make a request to
	// this URL anyway and being a 404 will not hurt us here.  We wrap an
	// iframe pointing to the favicon in an ActiveXObject(htmlfile) object
	// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)
	// since the iframe access rules appear to allow direct access and
	// manipulation of the document element, even for a 404 page.  This
	// document can be used instead of the current document (which would
	// have been limited to the current path) to perform #userData storage.
	try {
		storageContainer = new ActiveXObject('htmlfile')
		storageContainer.open()
		storageContainer.write('<s' + 'cript>document.w=window</s' + 'cript><iframe src="/favicon.ico"></iframe>')
		storageContainer.close()
		storageOwner = storageContainer.w.frames[0].document
		storage = storageOwner.createElement('div')
	} catch(e) {
		// somehow ActiveXObject instantiation failed (perhaps some special
		// security settings or otherwse), fall back to per-path storage
		storage = doc.createElement('div')
		storageOwner = doc.body
	}
	function withIEStorage(storeFunction) {
		return function() {
			var args = Array.prototype.slice.call(arguments, 0)
			args.unshift(storage)
			// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx
			// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx
			storageOwner.appendChild(storage)
			storage.addBehavior('#default#userData')
			storage.load(localStorageName)
			var result = storeFunction.apply(store, args)
			storageOwner.removeChild(storage)
			return result
		}
	}

	// In IE7, keys may not contain special chars. See all of https://github.com/marcuswestin/store.js/issues/40
	var forbiddenCharsRegex = new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]", "g")
	function ieKeyFix(key) {
		return key.replace(forbiddenCharsRegex, '___')
	}
	store.set = withIEStorage(function(storage, key, val) {
		key = ieKeyFix(key)
		if (val === undefined) { return store.remove(key) }
		storage.setAttribute(key, store.serialize(val))
		storage.save(localStorageName)
		return val
	})
	store.get = withIEStorage(function(storage, key) {
		key = ieKeyFix(key)
		return store.deserialize(storage.getAttribute(key))
	})
	store.remove = withIEStorage(function(storage, key) {
		key = ieKeyFix(key)
		storage.removeAttribute(key)
		storage.save(localStorageName)
	})
	store.clear = withIEStorage(function(storage) {
		var attributes = storage.XMLDocument.documentElement.attributes
		storage.load(localStorageName)
		for (var i=0, attr; attr=attributes[i]; i++) {
			storage.removeAttribute(attr.name)
		}
		storage.save(localStorageName)
	})
	store.getAll = withIEStorage(function(storage) {
		var attributes = storage.XMLDocument.documentElement.attributes
		var ret = {}
		for (var i=0, attr; attr=attributes[i]; ++i) {
			var key = ieKeyFix(attr.name)
			ret[attr.name] = store.deserialize(storage.getAttribute(key))
		}
		return ret
	})
}

try {
	store.set(namespace, namespace)
	if (store.get(namespace) != namespace) { store.disabled = true }
	store.remove(namespace)
} catch(e) {
	store.disabled = true
}
store.enabled = !store.disabled

module.exports = store;
}, {"json":357}],
363: [function(require, module, exports) {

module.exports = function(a, b){
  var fn = function(){};
  fn.prototype = b.prototype;
  a.prototype = new fn;
  a.prototype.constructor = a;
};
}, {}],
351: [function(require, module, exports) {
module.exports = function isMeta (e) {
    if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) return true;

    // Logic that handles checks for the middle mouse button, based
    // on [jQuery](https://github.com/jquery/jquery/blob/master/src/event.js#L466).
    var which = e.which, button = e.button;
    if (!which && button !== undefined) {
      return (!button & 1) && (!button & 2) && (button & 4);
    } else if (which === 2) {
      return true;
    }

    return false;
};
}, {}],
352: [function(require, module, exports) {

/**
 * Bind `el` event `type` to `fn`.
 *
 * @param {Element} el
 * @param {String} type
 * @param {Function} fn
 * @param {Boolean} capture
 * @return {Function}
 * @api public
 */

exports.bind = function(el, type, fn, capture){
  if (el.addEventListener) {
    el.addEventListener(type, fn, capture || false);
  } else {
    el.attachEvent('on' + type, fn);
  }
  return fn;
};

/**
 * Unbind `el` event `type`'s callback `fn`.
 *
 * @param {Element} el
 * @param {String} type
 * @param {Function} fn
 * @param {Boolean} capture
 * @return {Function}
 * @api public
 */

exports.unbind = function(el, type, fn, capture){
  if (el.removeEventListener) {
    el.removeEventListener(type, fn, capture || false);
  } else {
    el.detachEvent('on' + type, fn);
  }
  return fn;
};

}, {}],
353: [function(require, module, exports) {

/**
 * prevent default on the given `e`.
 * 
 * examples:
 * 
 *      anchor.onclick = prevent;
 *      anchor.onclick = function(e){
 *        if (something) return prevent(e);
 *      };
 * 
 * @param {Event} e
 */

module.exports = function(e){
  e = e || window.event
  return e.preventDefault
    ? e.preventDefault()
    : e.returnValue = false;
};

}, {}],
354: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var encode = encodeURIComponent;
var decode = decodeURIComponent;
var trim = require('trim');
var type = require('type');

/**
 * Parse the given query `str`.
 *
 * @param {String} str
 * @return {Object}
 * @api public
 */

exports.parse = function(str){
  if ('string' != typeof str) return {};

  str = trim(str);
  if ('' == str) return {};
  if ('?' == str.charAt(0)) str = str.slice(1);

  var obj = {};
  var pairs = str.split('&');
  for (var i = 0; i < pairs.length; i++) {
    var parts = pairs[i].split('=');
    var key = decode(parts[0]);
    var m;

    if (m = /(\w+)\[(\d+)\]/.exec(key)) {
      obj[m[1]] = obj[m[1]] || [];
      obj[m[1]][m[2]] = decode(parts[1]);
      continue;
    }

    obj[parts[0]] = null == parts[1]
      ? ''
      : decode(parts[1]);
  }

  return obj;
};

/**
 * Stringify the given `obj`.
 *
 * @param {Object} obj
 * @return {String}
 * @api public
 */

exports.stringify = function(obj){
  if (!obj) return '';
  var pairs = [];

  for (var key in obj) {
    var value = obj[key];

    if ('array' == type(value)) {
      for (var i = 0; i < value.length; ++i) {
        pairs.push(encode(key + '[' + i + ']') + '=' + encode(value[i]));
      }
      continue;
    }

    pairs.push(encode(key) + '=' + encode(obj[key]));
  }

  return pairs.join('&');
};

}, {"trim":149,"type":13}],
356: [function(require, module, exports) {

var debug = require('debug')('analytics:user');
var Entity = require('./entity');
var inherit = require('inherit');
var bind = require('bind');
var cookie = require('./cookie');
var uuid = require('uuid');
var rawCookie = require('cookie');


/**
 * User defaults
 */

User.defaults = {
  persist: true,
  cookie: {
    key: 'ajs_user_id',
    oldKey: 'ajs_user'
  },
  localStorage: {
    key: 'ajs_user_traits'
  }
};


/**
 * Initialize a new `User` with `options`.
 *
 * @param {Object} options
 */

function User (options) {
  this.defaults = User.defaults;
  this.debug = debug;
  Entity.call(this, options);
}


/**
 * Inherit `Entity`
 */

inherit(User, Entity);

/**
 * Set / get the user id.
 *
 * When the user id changes, the method will
 * reset his anonymousId to a new one.
 *
 * Example:
 *
 *      // didn't change because the user didn't have previous id.
 *      anonId = user.anonymousId();
 *      user.id('foo');
 *      assert.equal(anonId, user.anonymousId());
 *
 *      // didn't change because the user id changed to null.
 *      anonId = user.anonymousId();
 *      user.id('foo');
 *      user.id(null);
 *      assert.equal(anonId, user.anonymousId());
 *
 *     // change because the user had previous id.
 *     anonId = user.anonymousId();
 *     user.id('foo');
 *     user.id('baz'); // triggers change
 *     user.id('baz'); // no change
 *     assert.notEqual(anonId, user.anonymousId());
 *
 * @param {String} id
 * @return {Mixed}
 */

User.prototype.id = function(id){
  var prev = this._getId();
  var ret = Entity.prototype.id.apply(this, arguments);
  if (null == prev) return ret;
  if (prev != id && id) this.anonymousId(null);
  return ret;
};

/**
 * Set / get / remove anonymousId.
 *
 * @param {String} anonId
 * @return {String|User}
 */

User.prototype.anonymousId = function(anonId){
  var store = this.storage();

  // set / remove
  if (arguments.length) {
    store.set('ajs_anonymous_id', anonId);
    return this;
  }

  // new
  if (anonId = store.get('ajs_anonymous_id')) {
    return anonId;
  }

  // old - it is not stringified so we use the raw cookie.
  if (anonId = rawCookie('_sio')) {
    anonId = anonId.split('----')[1];
    store.set('ajs_anonymous_id', anonId);
    store.remove('_sio');
    return anonId;
  }

  // empty
  anonId = uuid();
  store.set('ajs_anonymous_id', anonId);
  return store.get('ajs_anonymous_id');
};

/**
 * Remove anonymous id on logout too.
 */

User.prototype.logout = function(){
  Entity.prototype.logout.call(this);
  this.anonymousId(null);
};

/**
 * Load saved user `id` or `traits` from storage.
 */

User.prototype.load = function () {
  if (this._loadOldCookie()) return;
  Entity.prototype.load.call(this);
};


/**
 * BACKWARDS COMPATIBILITY: Load the old user from the cookie.
 *
 * @return {Boolean}
 * @api private
 */

User.prototype._loadOldCookie = function () {
  var user = cookie.get(this._options.cookie.oldKey);
  if (!user) return false;

  this.id(user.id);
  this.traits(user.traits);
  cookie.remove(this._options.cookie.oldKey);
  return true;
};


/**
 * Expose the user singleton.
 */

module.exports = bind.all(new User());


/**
 * Expose the `User` constructor.
 */

module.exports.User = User;

}, {"debug":349,"./entity":362,"inherit":363,"bind":347,"./cookie":348,"uuid":365,"cookie":183}],
365: [function(require, module, exports) {

/**
 * Taken straight from jed's gist: https://gist.github.com/982883
 *
 * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,
 * where each x is replaced with a random hexadecimal digit from 0 to f, and
 * y is replaced with a random hexadecimal digit from 8 to b.
 */

module.exports = function uuid(a){
  return a           // if the placeholder was passed, return
    ? (              // a random number from 0 to 15
      a ^            // unless b is 8,
      Math.random()  // in which case
      * 16           // a random number from
      >> a/4         // 8 to 11
      ).toString(16) // in hexadecimal
    : (              // or otherwise a concatenated string:
      [1e7] +        // 10000000 +
      -1e3 +         // -1000 +
      -4e3 +         // -4000 +
      -8e3 +         // -80000000 +
      -1e11          // -100000000000,
      ).replace(     // replacing
        /[018]/g,    // zeroes, ones, and eights with
        uuid         // random hex digits
      )
};
}, {}],
271: [function(require, module, exports) {

module.exports = '2.4.6';

}, {}],
268: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var indexOf = require('indexof');
var assert = require('assert');
var domify = require('domify');
var stub = require('stub');
var each = require('each');
var keys = require('keys');
var fmt = require('fmt');
var spy = require('spy');
var is = require('is');

/**
 * Expose `plugin`.
 */

module.exports = plugin;

/**
 * Integration testing plugin.
 *
 * @param {Analytics} analytics
 */

function plugin(analytics) {
  analytics.spies = [];

  /**
   * Spy on a `method` of host `object`.
   *
   * @param {Object} object
   * @param {String} method
   * @return {Analytics}
   */

  analytics.spy = function(object, method){
    var s = spy(object, method);
    this.spies.push(s);
    return this;
  };

  /**
   * Stub a `method` of host `object`.
   *
   * @param {Object} object
   * @param {String} method
   * @return {Analytics}
   */

  analytics.stub = function(object, method){
    var s = stub(object, method);
    this.spies.push(s);
    return this;
  };

  /**
   * Restore all spies.
   *
   * @return {Analytics}
   */

  analytics.restore = function(){
    each(this.spies, function(spy, i){
      spy.restore();
    });
    this.spies = [];
    return this;
  };

  /**
   * Assert that a `spy` was called with `args...`
   *
   * @param {Spy} spy
   * @param {Mixed} args... (optional)
   * @return {Analytics}
   */

  analytics.called = function(spy){
    assert(
      ~indexOf(this.spies, spy),
      'You must call `.spy(object, method)` prior to calling `.called()`.'
    );
    assert(spy.called, fmt('Expected "%s" to have been called.', spy.name));

    var args = [].slice.call(arguments, 1);
    if (!args.length) return this;

    assert(
      spy.got.apply(spy, args), fmt(''
      + 'Expected "%s" to be called with "%s", \n'
      + 'but it was called with "%s".'
      , spy.name
      , JSON.stringify(args, null, 2)
      , JSON.stringify(spy.args[0], null, 2))
    );

    return this;
  };

  /**
   * Assert that a `spy` was not called with `args...`.
   *
   * @param {Spy} spy
   * @param {Mixed} args... (optional)
   * @return {Analytics}
   */

  analytics.didNotCall = function(spy){
    assert(
      ~indexOf(this.spies, spy),
      'You must call `.spy(object, method)` prior to calling `.didNotCall()`.'
    );

    var args = [].slice.call(arguments, 1);
    if (!args.length) {
      assert(
        !spy.called,
        fmt('Expected "%s" not to have been called.', spy.name)
      );
    } else {
      assert(!spy.got.apply(spy, args), fmt(''
        + 'Expected "%s" not to be called with "%o", '
        + 'but it was called with "%o".'
        , spy.name
        , args
        , spy.args[0])
      );
    }

    return this;
  };

  /**
   * Assert that a `spy` was not called 1 time.
   *
   * @param {Spy} spy
   * @return {Analytics}
   */

  analytics.calledOnce = calledTimes(1);

  /**
   * Assert that a `spy` was called 2 times.
   *
   * @param {Spy} spy
   * @return {Analytics}
   */

  analytics.calledTwice = calledTimes(2);

  /**
   * Assert that a `spy` was called 3 times.
   *
   * @param {Spy} spy
   * @return {Analytics}
   */

  analytics.calledThrice = calledTimes(2);

  /**
   * Generate a function for asserting a spy
   * was called `n` times.
   *
   * @param {Number} n
   * @return {Function}
   */

  function calledTimes(n) {
    return function(spy) {
      var m = spy.args.length;
      assert(
        n == m,
        fmt(''
          + 'Expected "%s" to have been called %s time%s, '
          + 'but it was only called %s time%s.'
          , spy.name, n, 1 != n ? 's' : '', m, 1 != m ? 's' : '')
      );
    }
  }

  /**
   * Assert that a `spy` returned `value`.
   *
   * @param {Spy} spy
   * @param {Mixed} value
   * @return {Tester}
   */

  analytics.returned = function(spy, value){
    assert(
      ~indexOf(this.spies, spy),
      'You must call `.spy(object, method)` prior to calling `.returned()`.'
    );
    assert(
      spy.returned(value),
      fmt('Expected "%s" to have returned "%o".', spy.name, value)
    );

    return this;
  };

  /**
   * Assert that a `spy` did not return `value`.
   *
   * @param {Spy} spy
   * @param {Mixed} value
   * @return {Tester}
   */

  analytics.didNotReturn = function(spy, value){
    assert(
      ~indexOf(this.spies, spy),
      'You must call `.spy(object, method)` prior to calling `.didNotReturn()`.'
    );
    assert(
      !spy.returned(value),
      fmt('Expected "%s" not to have returned "%o".', spy.name, value)
    );

    return this;
  };

  /**
   * Call `reset` on the integration.
   *
   * @return {Analytics}
   */

  analytics.reset = function(){
    this.user().reset();
    this.group().reset();
    return this;
  };

  /**
   * Compare `int` against `test`.
   *
   * To double-check that they have the right defaults, globals, and config.
   *
   * @param {Function} a actual integration constructor
   * @param {Function} b test integration constructor
   */

  analytics.compare = function(a, b){
    a = new a;
    b = new b;
    // name
    assert(
      a.name === b.name,
      fmt('Expected name to be "%s", but it was "%s".', b.name, a.name)
    );

    // options
    var x = a.defaults;
    var y = b.defaults;
    for (var key in y) {
      assert(
        x.hasOwnProperty(key),
        fmt('The integration does not have an option named "%s".', key)
      );
      assert.deepEqual(
        x[key], y[key],
        fmt(
          'Expected option "%s" to default to "%s", but it defaults to "%s".',
          key, y[key], x[key]
        )
      );
    }

    // globals
    var x = a.globals;
    var y = b.globals;
    each(y, function(key){
      assert(
        indexOf(x, key) !== -1,
        fmt('Expected global "%s" to be registered.', key)
      );
    });

    // assumesPageview
    assert(
      a._assumesPageview == b._assumesPageview,
      'Expected the integration to assume a pageview.'
    );

    // readyOnInitialize
    assert(
      a._readyOnInitialize == b._readyOnInitialize,
      'Expected the integration to be ready on initialize.'
    );

    // readyOnLoad
    assert(
      a._readyOnLoad == b._readyOnLoad,
      'Expected integration to be ready on load.'
    );
  };

  /**
   * Assert the integration being tested loads.
   *
   * @param {Integration} integration
   * @param {Function} done
   */

  analytics.load = function(integration, done){
    analytics.assert(!integration.loaded(), 'Expected `integration.loaded()` to be false before loading.');
    analytics.once('ready', function(){
      analytics.assert(integration.loaded(), 'Expected `integration.loaded()` to be true after loading.');
      done();
    });
    analytics.initialize();
    analytics.page({}, { Marketo: true });
  };

  /**
   * Assert a script, image, or iframe was loaded.
   *
   * @param {String} str DOM template
   */
  
  analytics.loaded = function(integration, str){
    if ('string' == typeof integration) {
      str = integration;
      integration = this.integration();
    }

    var tags = [];

    assert(
      ~indexOf(this.spies, integration.load),
      'You must call `.spy(integration, \'load\')` prior to calling `.loaded()`.'
    );

    // collect all Image or HTMLElement objects
    // in an array of stringified elements, for human-readable assertions.
    each(integration.load.returns, function(el){
      var tag = {};
      if (el instanceof HTMLImageElement) {
        tag.type = 'img';
        tag.attrs = { src: el.src };
      } else if (is.element(el)) {
        tag.type = el.tagName.toLowerCase();
        tag.attrs = attributes(el);
        switch (tag.type) {
          case 'script':
            // don't care about these properties.
            delete tag.attrs.type;
            delete tag.attrs.async;
            delete tag.attrs.defer;
            break;
        }
      }
      if (tag.type) tags.push(stringify(tag.type, tag.attrs));
    });

    // normalize formatting
    var tag = objectify(str);
    var expected = stringify(tag.type, tag.attrs);

    if (!tags.length) {
      assert(false, fmt('No tags were returned.\nExpected %s.', expected));
    } else {
      // show the closest match
      assert(
        indexOf(tags, expected) !== -1,
        fmt('\nExpected %s.\nFound %s', expected, tags.join('\n'))
      );
    }
  };

  /**
   * Get current integration.
   *
   * @return {Integration}
   */
  
  analytics.integration = function(){
    for (var name in this._integrations) return this._integrations[name];
  };

  /**
   * Assert a `value` is truthy.
   *
   * @param {Mixed} value
   * @return {Tester}
   */

  analytics.assert = assert;

  /**
   * Expose all of the methods on `assert`.
   *
   * @param {Mixed} args...
   * @return {Tester}
   */

  each(keys(assert), function(key){
    analytics[key] = function(){
      var args = [].slice.call(arguments);
      assert[key].apply(assert, args);
      return this;
    };
  });

  /**
   * Create a DOM node string.
   */

  function stringify(name, attrs) {
    var str = [];
    str.push('<' + name);
    each(attrs, function(key, val){
      str.push(' ' + key + '="' + val + '"');
    });
    str.push('>');
    // block
    if ('img' !== name) str.push('</' + name + '>');
    return str.join('');
  }

  /**
   * DOM node attributes as object.
   *
   * @param {Element}
   * @return {Object}
   */
  
  function attributes(node) {
    var obj = {};
    each(node.attributes, function(attr){
      obj[attr.name] = attr.value;
    });
    return obj;
  }

  /**
   * Given a string, give back DOM attributes.
   *
   * @param {String} str
   * @return {Object}
   */

  function objectify(str) {
    // replace `src` with `data-src` to prevent image loading
    str = str.replace(' src="', ' data-src="');
    
    var el = domify(str);
    var attrs = {};
    
    each(el.attributes, function(attr){
      // then replace it back
      var name = 'data-src' == attr.name ? 'src' : attr.name;
      attrs[name] = attr.value;
    });
    
    return {
      type: el.tagName.toLowerCase(),
      attrs: attrs
    };
  }
}
}, {"indexof":114,"assert":2,"domify":117,"stub":366,"each":111,"keys":367,"fmt":112,"spy":368,"is":141}],
366: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var merge = require('merge');
var eql = require('eql');

/**
 * Create a test stub with `obj`, `method`.
 *
 * Examples:
 *
 *      s = require('stub')({}, 'toString');
 *      s = require('stub')(document.write);
 *      s = require('stub')();
 *
 * @param {Object|Function} obj
 * @param {String} method
 * @return {Function}
 * @api public
 */

module.exports = function(obj, method){
  var fn = toFunction(arguments, stub);
  merge(stub, proto);
  stub.reset();
  stub.name = method;
  return stub;

  function stub(){
    var args = [].slice.call(arguments);
    var ret = fn(arguments);
    //stub.returns || stub.reset();
    stub.args.push(args);
    stub.returns.push(ret);
    stub.update();
    return ret;
  }
};

/**
 * Prototype.
 */

var proto = {};

/**
 * `true` if the stub was called with `args`.
 *
 * @param {Arguments} ...
 * @return {Boolean}
 * @api public
 */

proto.got =
proto.calledWith = function(n){
  var a = [].slice.call(arguments);
  for (var i = 0, n = this.args.length; i < n; i++) {
    var b = this.args[i];
    if (eql(a, b.slice(0, a.length))) return true;
  }
  return;
};

/**
 * `true` if the stub returned `value`.
 *
 * @param {Mixed} value
 * @return {Boolean}
 * @api public
 */

proto.returned = function(value){
  var ret = this.returns[this.returns.length - 1];
  return eql(ret, value);
};

/**
 * `true` if the stub was called once.
 *
 * @return {Boolean}
 * @api public
 */

proto.once = function(){
  return 1 == this.args.length;
};

/**
 * `true` if the stub was called twice.
 *
 * @return {Boolean}
 * @api public
 */

proto.twice = function(){
  return 2 == this.args.length;
};

/**
 * `true` if the stub was called three times.
 *
 * @return {Boolean}
 * @api public
 */

proto.thrice = function(){
  return 3 == this.args.length;
};

/**
 * Reset the stub.
 *
 * @return {Function}
 * @api public
 */

proto.reset = function(){
  this.returns = [];
  this.args = [];
  this.update();
  return this;
};

/**
 * Restore.
 *
 * @return {Function}
 * @api public
 */

proto.restore = function(){
  if (!this.obj) return this;
  var m = this.method;
  var fn = this.fn;
  this.obj[m] = fn;
  return this;
};

/**
 * Update the stub.
 *
 * @return {Function}
 * @api private
 */

proto.update = function(){
  this.called = !! this.args.length;
  this.calledOnce = this.once();
  this.calledTwice = this.twice();
  this.calledThrice = this.thrice();
  return this;
};

/**
 * To function.
 *
 * @param {...} args
 * @param {Function} stub
 * @return {Function}
 * @api private
 */

function toFunction(args, stub){
  var obj = args[0];
  var method = args[1];
  var fn = args[2] || function(){};

  switch (args.length) {
    case 0: return function noop(){};
    case 1: return function(args){ return obj.apply(null, args); };
    case 2:
    case 3:
    var m = obj[method];
    stub.method = method;
    stub.fn = m;
    stub.obj = obj;
    obj[method] = stub;
    return function(args) { fn.apply(obj, args) };
  }
}
}, {"merge":369,"eql":370}],
369: [function(require, module, exports) {

/**
 * merge `b`'s properties with `a`'s.
 *
 * example:
 *
 *        var user = {};
 *        merge(user, console);
 *        // > { log: fn, dir: fn ..}
 *
 * @param {Object} a
 * @param {Object} b
 * @return {Object}
 */

module.exports = function (a, b) {
  for (var k in b) a[k] = b[k];
  return a;
};

}, {}],
370: [function(require, module, exports) {

/**
 * dependencies
 */

var type = require('type');
var k = require('keys');

/**
 * Export `eql`
 */

exports = module.exports = eql;

/**
 * Compare `a` to `b`.
 *
 * @param {Mixed} a
 * @param {Mixed} b
 * @return {Boolean}
 * @api public
 */

function eql(a, b){
  var compare = type(a);

  // sanity check
  if (compare != type(b)) return false;
  if (a === b) return true;

  // compare
  return (compare = eql[compare])
    ? compare(a, b)
    : a == b;
}

/**
 * Compare regexps `a`, `b`.
 *
 * @param {RegExp} a
 * @param {RegExp} b
 * @return {Boolean}
 * @api public
 */

eql.regexp = function(a, b){
  return a.ignoreCase == b.ignoreCase
    && a.multiline == b.multiline
    && a.lastIndex == b.lastIndex
    && a.global == b.global
    && a.source == b.source;
};

/**
 * Compare objects `a`, `b`.
 *
 * @param {Object} a
 * @param {Object} b
 * @return {Boolean}
 * @api public
 */

eql.object = function(a, b){
  var keys = {};

  // proto
  if (a.prototype != b.prototype) return false;

  // keys
  keys.a = k(a).sort();
  keys.b = k(b).sort();

  // length
  if (keys.a.length != keys.b.length) return false;

  // keys
  if (keys.a.toString() != keys.b.toString()) return false;

  // walk
  for (var i = 0; i < keys.a.length; ++i) {
    var key = keys.a[i];
    if (!eql(a[key], b[key])) return false;
  }

  // eql
  return true;
};

/**
 * Compare arrays `a`, `b`.
 *
 * @param {Array} a
 * @param {Array} b
 * @return {Boolean}
 * @api public
 */

eql.array = function(a, b){
  if (a.length != b.length) return false;
  for (var i = 0; i < a.length; ++i) {
    if (!eql(a[i], b[i])) return false;
  }
  return true;
};

/**
 * Compare dates `a`, `b`.
 *
 * @param {Date} a
 * @param {Date} b
 * @return {Boolean}
 * @api public
 */

eql.date = function(a, b){
  return +a == +b;
};

}, {"type":13,"keys":367}],
367: [function(require, module, exports) {
var has = Object.prototype.hasOwnProperty;

module.exports = Object.keys || function(obj){
  var keys = [];

  for (var key in obj) {
    if (has.call(obj, key)) {
      keys.push(key);
    }
  }

  return keys;
};

}, {}],
368: [function(require, module, exports) {

/**
 * Module dependencies.
 */

var merge = require('merge');
var eql = require('eql');

/**
 * Create a test spy with `obj`, `method`.
 *
 * Examples:
 *
 *      s = require('spy')({}, 'toString');
 *      s = require('spy')(document.write);
 *      s = require('spy')();
 *
 * @param {Object|Function} obj
 * @param {String} method
 * @return {Function}
 * @api public
 */

module.exports = function(obj, method){
  var fn = toFunction(arguments, spy);
  merge(spy, proto);
  return spy.reset();

  function spy(){
    var args = [].slice.call(arguments);
    var ret = fn(arguments);
    spy.returns || spy.reset();
    spy.args.push(args);
    spy.returns.push(ret);
    spy.update();
    return ret;
  }
};

/**
 * Pseudo-prototype.
 */

var proto = {};

/**
 * Lazily match `args` and return `true` if the spy was called with them.
 *
 * @param {Arguments} args
 * @return {Boolean}
 * @api public
 */

proto.got =
proto.calledWith =
proto.gotLazy =
proto.calledWithLazy = function(){
  var a = [].slice.call(arguments);

  for (var i = 0, args; args = this.args[i]; i++) {
    if (eql(a,  args.slice(0, a.length))) return true;
  }

  return false;
};

/**
 * Exactly match `args` and return `true` if the spy was called with them.
 *
 * @param {Arguments} ...
 * @return {Boolean}
 * @api public
 */

proto.gotExactly =
proto.calledWithExactly = function(){
  var a = [].slice.call(arguments);

  for (var i = 0, args; args = this.args[i]; i++) {
    if (eql(a, args)) return true;
  }

  return false;
};

/**
 * `true` if the spy returned `value`.
 *
 * @param {Mixed} value
 * @return {Boolean}
 * @api public
 */

proto.returned = function(value){
  var ret = this.returns[this.returns.length - 1];
  return eql(ret, value);
};

/**
 * `true` if the spy was called once.
 *
 * @return {Boolean}
 * @api public
 */

proto.once = function(){
  return 1 == this.args.length;
};

/**
 * `true` if the spy was called twice.
 *
 * @return {Boolean}
 * @api public
 */

proto.twice = function(){
  return 2 == this.args.length;
};

/**
 * `true` if the spy was called three times.
 *
 * @return {Boolean}
 * @api public
 */

proto.thrice = function(){
  return 3 == this.args.length;
};

/**
 * Reset the spy.
 *
 * @return {Function}
 * @api public
 */

proto.reset = function(){
  this.returns = [];
  this.args = [];
  this.update();
  return this;
};

/**
 * Restore.
 *
 * @return {Function}
 * @api public
 */

proto.restore = function(){
  if (!this.obj) return this;
  var m = this.method;
  var fn = this.fn;
  this.obj[m] = fn;
  return this;
};

/**
 * Update the spy.
 *
 * @return {Function}
 * @api private
 */

proto.update = function(){
  this.called = !! this.args.length;
  this.calledOnce = this.once();
  this.calledTwice = this.twice();
  this.calledThrice = this.thrice();
  return this;
};

/**
 * To function.
 *
 * @param {...} args
 * @param {Function} spy
 * @return {Function}
 * @api private
 */

function toFunction(args, spy){
  var obj = args[0];
  var method = args[1];

  switch (args.length) {
    case 0: return function noop(){};
    case 1: return function(args){ return obj.apply(null, args); };
    case 2:
      var m = obj[method];
      merge(spy, m);
      spy.method = method;
      spy.fn = m;
      spy.obj = obj;
      obj[method] = spy;
      return function(args){
        return m.apply(obj, args);
      };
  }
}

}, {"merge":369,"eql":370}],
194: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('AdWords', function(){
  var AdWords = plugin;
  var adwords;
  var analytics;
  var options = {
    conversionId: 978352801,
    events: {
      signup: '-kGkCJ_TsgcQofXB0gM',
      login: 'QbThCM_zogcQofXB0gM',
      play: 'b91fc77f'
    }
  };

  beforeEach(function(){
    analytics = new Analytics;
    adwords = new AdWords(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(adwords);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    adwords.reset();
    sandbox();
  });

  it('should have the correct settings', function(){
    analytics.compare(AdWords, integration('AdWords')
      .option('conversionId', '')
      .option('remarketing', false)
      .mapping('events'));
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window, 'google_trackConversion');
      });

      it('should not load remarketing if option is not on', function(){
        adwords.options.remarketing = false;
        analytics.page();
        analytics.called(window.google_trackConversion, {
          google_conversion_id: options.conversionId,
          google_custom_params: {},
          google_remarketing_only: false
        });
      });

      it('should load remarketing if option is on', function(){
        adwords.options.remarketing = true;
        analytics.page();
        analytics.called(window.google_trackConversion, {
          google_conversion_id: options.conversionId,
          google_custom_params: {},
          google_remarketing_only: true
        });
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window, 'google_trackConversion');
      });

      it('should not send if event is not defined', function(){
        analytics.track('toString', {});
        analytics.didNotCall(window.google_trackConversion);
      });

      it('should send event if it is defined', function(){
        analytics.track('signup', {});
        analytics.called(window.google_trackConversion, {
          google_conversion_id: options.conversionId,
          google_conversion_language: 'en',
          google_conversion_format: '3',
          google_conversion_color: 'ffffff',
          google_conversion_label: options.events.signup,
          google_conversion_value: 0,
          google_remarketing_only: false
        });
      });

      it('should support array events', function(){
        adwords.options.events = [{ key: 'login', value: 'QbThCM_zogcQofXB0gM' }];
        analytics.track('login');
        analytics.called(window.google_trackConversion, {
          google_conversion_id: options.conversionId,
          google_conversion_language: 'en',
          google_conversion_format: '3',
          google_conversion_color: 'ffffff',
          google_conversion_label: adwords.options.events[0].value,
          google_conversion_value: 0,
          google_remarketing_only: false
        });
      });

      it('should send revenue', function(){
        analytics.track('login', { revenue: 90 });
        analytics.called(window.google_trackConversion, {
          google_conversion_id: options.conversionId,
          google_conversion_language: 'en',
          google_conversion_format: '3',
          google_conversion_color: 'ffffff',
          google_conversion_label: options.events.login,
          google_conversion_value: 90,
          google_remarketing_only: false
        });
      });

      it('should always send remarketing_only false', function(){
        adwords.options.remarketing = true;
        analytics.track('login', { revenue: 90 });
        analytics.called(window.google_trackConversion, {
          google_conversion_id: options.conversionId,
          google_conversion_language: 'en',
          google_conversion_format: '3',
          google_conversion_color: 'ffffff',
          google_conversion_label: options.events.login,
          google_conversion_value: 90,
          google_remarketing_only: false
        });
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":15,"clear-env":4}],
195: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Alexa', function(){
  var Alexa = plugin;
  var alexa;
  var analytics;
  var options = {
    account: 'h5Gaj1a4ZP000h',
    domain: 'mydomain.com',
    dynamic: true
  };

  beforeEach(function(){
    analytics = new Analytics;
    alexa = new Alexa(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(alexa);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    alexa.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Alexa, integration('Alexa')
      .assumesPageview()
      .global('_atrk_opts')
      .option('account', null)
      .option('domain', '')
      .option('dynamic', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(alexa, 'load');
    });

    describe('#initialize', function(){
      it('should create window._atrk_opts', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._atrk_opts, {
          atrk_acct: options.account,
          domain: options.domain,
          dynamic: options.dynamic
        });
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(alexa.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(alexa, done);
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":16,"clear-env":4}],
196: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Amplitude', function(){
  var Amplitude = plugin;
  var amplitude;
  var analytics;
  var options = {
    apiKey: '07808866adb2510adf19ee69e8fc2201'
  };

  beforeEach(function(){
    analytics = new Analytics;
    amplitude = new Amplitude(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(amplitude);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    amplitude.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Amplitude, integration('Amplitude')
      .global('amplitude')
      .option('apiKey', '')
      .option('trackAllPages', false)
      .option('trackNamedPages', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(amplitude, 'load');
    });

    afterEach(function(){
      amplitude.reset();
    });

    describe('#initialize', function(){
      it('should create window.amplitude', function(){
        analytics.assert(!window.amplitude);
        analytics.initialize();
        analytics.page();
        analytics.assert(window.amplitude);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(amplitude.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(amplitude, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.amplitude, 'logEvent');
      });

      it('should not track unnamed pages by default', function(){
        analytics.page();
        analytics.didNotCall(window.amplitude.logEvent);
      });

      it('should track unnamed pages if enabled', function(){
        amplitude.options.trackAllPages = true;
        analytics.page();
        analytics.called(window.amplitude.logEvent, 'Loaded a Page');
      });

      it('should track named pages by default', function(){
        analytics.page('Name');
        analytics.called(window.amplitude.logEvent, 'Viewed Name Page');
      });

      it('should track named pages with a category added', function(){
        analytics.page('Category', 'Name');
        analytics.called(window.amplitude.logEvent, 'Viewed Category Name Page');
      });

      it('should track categorized pages by default', function(){
        analytics.page('Category', 'Name');
        analytics.called(window.amplitude.logEvent, 'Viewed Category Page');
      });

      it('should not track name or categorized pages if disabled', function(){
        amplitude.options.trackNamedPages = false;
        amplitude.options.trackCategorizedPages = false;
        analytics.page('Category', 'Name');
        analytics.didNotCall(window.amplitude.logEvent);
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.amplitude, 'setUserId');
        analytics.stub(window.amplitude, 'setGlobalUserProperties');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window.amplitude.setUserId, 'id');
      });

      it('should send traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window.amplitude.setGlobalUserProperties, { trait: true });
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.amplitude.setUserId, 'id');
        analytics.called(window.amplitude.setGlobalUserProperties, { id: 'id', trait: true });
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.amplitude, 'logEvent');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.amplitude.logEvent, 'event');
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window.amplitude.logEvent, 'event', { property: true });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":17,"clear-env":4}],
197: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe.skip('Appcues', function(){
  var Appcues = plugin.Integration;
  var appcues;
  var analytics;
  var options = {
    appcuesId: 'test',
    userId: 'test',
    userEmail: 'test@testification.com'
  };

  // Disable AMD for these browser tests.
  var _define = window.define;

  beforeEach(function(){
    analytics = new Analytics;
    appcues = new Appcues(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(appcues);
    window.define = undefined;
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    sandbox();
    window.define = _define;
  });

  after(function(){
    appcues.reset();
  });

  it('should have the right settings', function(){
    analytics.compare(Appcues, integration('Appcues')
      .assumesPageview()
      .global('Appcues')
      .global('AppcuesIdentity')
      .option('appcuesId', '')
      .option('userId', '')
      .option('userEmail', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(appcues, 'load');
    });

    afterEach(function(){
      appcues.reset();
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(appcues.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(appcues, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.Appcues, 'identify');
      });

      it('should send and id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.Appcues.identify, { id: 'id', trait: true });
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":18,"clear-env":4}],
198: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('awe.sm', function(){
  var Awesm = plugin;
  var awesm;
  var analytics;
  var options = {
    apiKey: '5c8b1a212434c2153c2f2c2f2c765a36140add243bf6eae876345f8fd11045d9',
    events: { event: 'goal_1' }
  };

  beforeEach(function(){
    analytics = new Analytics;
    awesm = new Awesm(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(awesm);
    // turn off the data capturing to prevent jsonp from breaking other tests
    window.AWESMEXTRA = { capture_data: false };
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    awesm.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Awesm, integration('awe.sm')
      .assumesPageview()
      .global('AWESM')
      .option('apiKey', '')
      .mapping('events'));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(awesm, 'load');
    });

    describe('#initialize', function(){
      it('should pass options to awe.sm', function(){
        analytics.initialize();
        analytics.page();
        analytics.equal(window.AWESM.api_key, options.apiKey);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(awesm.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(awesm, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.AWESM, 'convert');
      });

      it('should convert an event to a goal', function(){
        analytics.track('event')
        analytics.called(window.AWESM.convert, 'goal_1', 0);
      });

      it('should not convert an unknown event', function(){
        analytics.track('unknown');
        analytics.didNotCall(window.AWESM.convert);
      });

      it('should support array events', function(){
        awesm.options.events = [{ key: 'event', value: 'goal_2' }];
        analytics.track('event', { value: 2 });
        analytics.called(window.AWESM.convert, 'goal_2', 2);
      });

      it('should accept a value property', function(){
        analytics.track('event', { value: 1 });
        analytics.called(window.AWESM.convert, 'goal_1', 1);
      });

      it('should prefer and convert a revenue property', function(){
        analytics.track('event', { value: 1, revenue: '$42.99' });
        analytics.called(window.AWESM.convert, 'goal_1', 4299);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":19,"clear-env":4}],
199: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

// awesomatic as a company seems to have been shut down
describe.skip('Awesomatic', function(){
  var Awesomatic = plugin;
  var awesomatic;
  var analytics;
  var options = {
    appId: 'af392af01603ca383672689241b648b2'
  };

  beforeEach(function(){
    analytics = new Analytics;
    awesomatic = new Awesomatic(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(awesomatic);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    awesomatic.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Awesomatic, integration('Awesomatic')
      .assumesPageview()
      .global('Awesomatic')
      .global('AwesomaticSettings')
      .global('AwsmSetup')
      .global('AwsmTmp')
      .option('appId', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(awesomatic, 'load');
    });

    describe('#initialize', function(){
      after(function(){
        delete window.Awesomatic;
      });
      
      it('should initialize with the current user', function(){
        // need to stub out these pieces because the loading logic is complex
        window.Awesomatic = {};
        analytics.stub(window.Awesomatic, 'initialize');
        analytics.once('ready', function(){
          analytics.called(window.Awesomatic.initialize, {
            appId: options.appId,
            user_id: 'id',
            trait: true
          });
        });
        analytics.identify('id', { trait: true });
        analytics.initialize();
        analytics.page();
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(awesomatic, done);
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":20,"clear-env":4}],
200: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Bing Ads', function(){
  var Bing = plugin;
  var bing;
  var analytics;
  var options = {
    siteId: 'fd080b41-0f80-421d-9f12-d6ba437e206d',
    domainId: '2823204',
    events: {
      signup: 1,
      login: 2,
      play: 3
    }
  };

  beforeEach(function(){
    analytics = new Analytics;
    bing = new Bing(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(bing);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    bing.reset();
    sandbox();
  });

  it('should have the correct settings', function(){
    analytics.compare(Bing, integration('Bing Ads')
      .option('siteId', '')
      .option('domainId', '')
      .mapping('events'));
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(bing, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.mstag, 'loadTag');
      });

      it('should not send if goal is not defined', function(){
        analytics.track('toString', {});
        analytics.didNotCall(window.mstag.loadTag);
      });

      it('should send correctly', function(){
        analytics.track('play', { revenue: 90 });
        analytics.called(window.mstag.loadTag, 'analytics', {
          domainId: options.domainId,
          revenue: 90,
          dedup: '1',
          type: '1',
          actionid: options.events.play
        });
      });

      it('should support array events', function(){
        bing.options.events = [{ key: 'event', value: 4 }];
        analytics.track('event', { revenue: 99 });
        analytics.called(window.mstag.loadTag, 'analytics', {
          actionid: bing.options.events[0].value,
          domainId: options.domainId,
          revenue: 99,
          dedup: '1',
          type: '1'
        });
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":21,"clear-env":4}],
201: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Bronto', function(){
  var Bronto = plugin;
  var bronto;
  var analytics;
  var options = {
    siteId: 'arvdsiahdyhbxhukvignflhdknldben'
  };

  beforeEach(function(){
    analytics = new Analytics;
    bronto = new Bronto(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(bronto);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    bronto.reset();
    sandbox();
  });

  it('should have the correct settings', function(){
    analytics.compare(Bronto, integration('Bronto')
      .option('siteId', '')
      .option('host', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(bronto, 'load');
      analytics.stub(bronto, 'debug');
    });

    afterEach(function(){
      analytics.debug(false);
    });

    describe('#initialize', function(){
      it('should warn that _bta_tid and _bta_c arent found if debugger is on', function(){
        analytics.debug();
        analytics.initialize();
        analytics.page();
        analytics.called(
          bronto.debug,
          'missing tracking URL parameters `_bta_tid` and `_bta_c`.'
        );
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(bronto, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#completedOrder', function(){
      beforeEach(function(){
        analytics.stub(bronto.bta, 'addOrder');
      });

      it('should send ecommerce data', function(){
        analytics.identify({ email: 'lance@segment.io' });
        analytics.track('completed order', {
          products: [{ sku: 'c546c96', quantity: 8, name: 'my-product', price: 99.99 }],
          orderId: '55c497bf'
        });

        analytics.deepEqual(bronto.bta.addOrder.args[0][0], {
          email: 'lance@segment.io',
          items: [{ item_id: 'c546c96', quantity: 8, desc: 'my-product', amount: 99.99 }],
          order_id: '55c497bf'
        });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":22,"clear-env":4}],
202: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('BugHerd', function(){
  var BugHerd = plugin;
  var bugherd;
  var analytics;
  var options = {
    apiKey: 'vp3z4lyri7mdjf7wjrufpa'
  };

  beforeEach(function(){
    analytics = new Analytics;
    bugherd = new BugHerd(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(bugherd);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    bugherd.reset();
    sandbox();
    var iframe = document.getElementById('_BH_frame');
    if (iframe) iframe.parentNode.removeChild(iframe);
  });

  it('should have the right settings', function(){
    analytics.compare(BugHerd, integration('BugHerd')
      .assumesPageview()
      .global('BugHerdConfig')
      .global('_bugHerd')
      .option('apiKey', '')
      .option('showFeedbackTab', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(bugherd, 'load');
    });

    describe('#initialize', function(){
      it('should create window.BugHerdConfig', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window.BugHerdConfig, {
          feedback: { hide: false }
        });
      });

      it('should be able to hide the tab', function(){
        bugherd.options.showFeedbackTab = false;
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window.BugHerdConfig, {
          feedback: { hide: true }
        });
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(bugherd, done);
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":23,"clear-env":4}],
203: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Bugsnag', function(){
  var Bugsnag = plugin;
  var bugsnag;
  var analytics;
  var options = {
    apiKey: '7563fdfc1f418e956f5e5472148759f0'
  };
  var onerror = window.onerror;

  beforeEach(function(){
    analytics = new Analytics;
    bugsnag = new Bugsnag(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(bugsnag);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    bugsnag.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Bugsnag, integration('Bugsnag')
      .global('Bugsnag')
      .option('apiKey', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(bugsnag, 'load');
    });

    describe('#initialize', function(){
      
    });
  });

  describe('loading', function(){
    it('should load and set an onerror handler', function(done){
      analytics.load(bugsnag, function(err){
        if (err) return done(err);
        analytics.notEqual(window.onerror, onerror);
        analytics.equal('function', typeof window.onerror);
        done();
      });
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      it('should set metadata', function(){
        analytics.identify('id', { trait: true });
        analytics.deepEqual(window.Bugsnag.metaData, {
          id: 'id',
          trait: true
        });
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":24,"clear-env":4}],
204: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var extend = require('extend');
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Chartbeat', function () {
  var Chartbeat = plugin;
  var chartbeat;
  var analytics;
  var options = {
    uid: 'x',
    domain: 'example.com'
  };

  beforeEach(function(){
    analytics = new Analytics;
    chartbeat = new Chartbeat(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(chartbeat);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    chartbeat.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Chartbeat, integration('Chartbeat')
      .assumesPageview()
      .global('_sf_async_config')
      .global('_sf_endpt')
      .global('pSUPERFLY')
      .option('domain', '')
      .option('uid', null));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(chartbeat, 'load');
    });

    afterEach(function(){
      chartbeat.reset();
    });

    describe('#initialize', function(){
      it('should create window._sf_async_config', function(){
        var expected = extend({}, options, { useCanonical: true });
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._sf_async_config, expected);
      });

      it('should inherit global window._sf_async_config defaults', function(){
        window._sf_async_config = { setting: true };
        var expected = extend({}, options, {
          setting: true,
          useCanonical: true
        });

        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._sf_async_config, expected);
      });

      it('should create window._sf_endpt', function(){
        analytics.assert(!window._sf_endpt);
        analytics.initialize();
        analytics.page();
        analytics.equal('number', typeof window._sf_endpt);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(chartbeat.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(chartbeat, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.pSUPERFLY, 'virtualPage');
      });

      it('should send a path and title', function(){
        analytics.page({ path: '/path', title: 'title' });
        analytics.called(window.pSUPERFLY.virtualPage, '/path', 'title');
      });

      it('should prefer a name', function(){
        analytics.page('Name', { path: '/path', title: 'title' });
        analytics.called(window.pSUPERFLY.virtualPage, '/path', 'Name');
      });

      it('should prefer a name and category', function(){
        analytics.page('Category', 'Name', { path: '/path', title: 'title' });
        analytics.called(window.pSUPERFLY.virtualPage, '/path', 'Category Name');
      });
    });
  });
});

}, {"analytics.js":267,"extend":123,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":25,"clear-env":4}],
205: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('ChurnBee', function(){
  var ChurnBee = plugin;
  var churnbee;
  var analytics;
  var options = {
    apiKey: 'h_pEvkGaxoKEMgadS5-GlToHZJkGAXq70wlwUg87ZA0',
    events: {
      'Logged In': 'login'
    }
  };

  beforeEach(function(){
    analytics = new Analytics;
    churnbee = new ChurnBee(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(churnbee);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    churnbee.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(ChurnBee, integration('ChurnBee')
      .global('_cbq')
      .global('ChurnBee')
      .option('apiKey', '')
      .mapping('events'));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(churnbee, 'load');
    });
    
    describe('#initialize', function(){
      beforeEach(function(){
        window._cbq = [];
        analytics.stub(window._cbq, 'push');
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.called(churnbee.load);
      });

      it('should push the api key', function(){
        analytics.initialize();
        analytics.called(window._cbq.push, [
          '_setApiKey',
          'h_pEvkGaxoKEMgadS5-GlToHZJkGAXq70wlwUg87ZA0'
        ]);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(churnbee, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._cbq, 'push');
      });

      it('should ignore non standard events', function(){
        analytics.track('non-standard');
        analytics.didNotCall(window._cbq.push);
      });

      it('should allow standard events', function(){
        analytics.track('login');
        analytics.called(window._cbq.push, ['login', {}]);
      });

      it('should try and map non standard events using `events` option', function(){
        analytics.track('Logged In');
        analytics.called(window._cbq.push, ['login', {}]);
      });

      it('should support array events', function(){
        churnbee.options.events = [{ key: 'event', value: 'login' }];
        analytics.track('event');
        analytics.called(window._cbq.push, ['login', {}]);
      })

      it('should alias `revenue` to `amount`', function(){
        analytics.track('register', { revenue: 90 });
        analytics.called(window._cbq.push, ['register', { amount: 90 }]);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":26,"clear-env":4}],
206: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('ClickTale', function(){
  var ClickTale = plugin;
  var clicktale;
  var analytics;
  var options = {
    partitionId: 'www14',
    projectId: '19370',
    recordingRatio: '0.0089'
  };

  beforeEach(function(){
    analytics = new Analytics;
    clicktale = new ClickTale(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(clicktale);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    clicktale.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(ClickTale, integration('ClickTale')
      .assumesPageview()
      .global('WRInitTime')
      .global('ClickTale')
      .option('httpCdnUrl', 'http://s.clicktale.net/WRe0.js')
      .option('httpsCdnUrl', '')
      .option('projectId', '')
      .option('recordingRatio', 0.01)
      .option('partitionId', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(clicktale, 'load');
    });

    describe('#initialize', function(){
      it('should store the load time', function(){
        analytics.assert(!window.WRInitTime);
        analytics.initialize();
        analytics.page();
        analytics.equal('number', typeof window.WRInitTime);
      });

      it('should append the clicktale div', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(document.getElementById('ClickTaleDiv'));
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(clicktale, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window, 'ClickTaleSetUID');
        analytics.stub(window, 'ClickTaleField');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window.ClickTaleSetUID, 'id');
      });

      it('should send traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window.ClickTaleField, 'trait', true);
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.ClickTaleSetUID, 'id');
        analytics.called(window.ClickTaleField, 'trait', true);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window, 'ClickTaleEvent');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.ClickTaleEvent, 'event');
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":27,"clear-env":4}],
207: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Clicky', function(){
  var Clicky = plugin;
  var clicky;
  var analytics;
  var options = {
    siteId: 100649848
  };

  beforeEach(function(){
    analytics = new Analytics;
    clicky = new Clicky(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(clicky);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    clicky.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Clicky, integration('Clicky')
      .assumesPageview()
      .global('clicky_site_ids')
      .option('siteId', null));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(clicky, 'load');
    });

    describe('#initialize', function(){
      it('should initialize the clicky global', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window.clicky_site_ids, [ options.siteId ]);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(clicky, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.clicky, 'log');
      });

      it('should send a path and title', function(){
        analytics.page({ path: '/path', title: 'title' });
        analytics.called(window.clicky.log, '/path', 'title');
      });

      it('should prefer a name', function(){
        analytics.page('name', { path: '/path', title: 'title' });
        analytics.called(window.clicky.log, '/path', 'name');
      });

      it('should prefer a name and category', function(){
        analytics.page('category', 'name', { path: '/path', title: 'title' });
        analytics.called(window.clicky.log, '/path', 'category name');
      });
    });

    describe('#identify', function(){
      afterEach(function(){
        delete window.clicky_custom.session;
      });

      it('should set an id', function(){
        analytics.identify('id');
        analytics.deepEqual(window.clicky_custom.session, { id: 'id' });
      });

      it('should set traits', function(){
        analytics.identify({ trait: true });
        analytics.deepEqual(window.clicky_custom.session, { trait: true });
      });

      it('should set an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.deepEqual(window.clicky_custom.session, { id: 'id', trait: true });
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.clicky, 'goal');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.clicky.goal, 'event');
      });

      it('should send revenue', function(){
        analytics.track('event', { revenue: 42.99 });
        analytics.called(window.clicky.goal, 'event', 42.99);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":28,"clear-env":4}],
208: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('comScore', function(){
  var Comscore = plugin;
  var comscore;
  var analytics;
  var options = {
    c2: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    comscore = new Comscore(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(comscore);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    comscore.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Comscore, integration('comScore')
      .assumesPageview()
      .global('_comscore')
      .option('c1', '2')
      .option('c2', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(comscore, 'load');
    });

    describe('#initialize', function(){
      it('should create window._comscore', function(){
        analytics.assert(!window._comscore);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._comscore instanceof Array);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(comscore, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.COMSCORE, 'beacon');
      });

      it('should call only on 2nd page', function(){
        analytics.didNotCall(window.COMSCORE.beacon, {'c1':'2', 'c2':'x'});
        analytics.page();
        analytics.called(window.COMSCORE.beacon, {'c1':'2', 'c2':'x'});
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":29,"clear-env":4}],
209: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Crazy Egg', function(){
  var CrazyEgg = plugin;
  var crazyegg;
  var analytics;
  var options = {
    accountNumber: '00138301'
  };

  beforeEach(function(){
    analytics = new Analytics;
    crazyegg = new CrazyEgg(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(crazyegg);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    crazyegg.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(CrazyEgg, integration('Crazy Egg')
      .assumesPageview()
      .global('CE2')
      .option('accountNumber', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(crazyegg, 'load');
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(crazyegg.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(crazyegg, done);
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":30,"clear-env":4}],
210: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var iso = require('to-iso-string');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Curebit', function(){
  var Curebit = plugin;
  var curebit;
  var analytics;
  var options = {
    siteId: 'curebit-87ab995d-736b-45ba-ac41-71f4dbb5c74a',
    server: 'https://api.segment.io/track'
  };

  beforeEach(function(){
    analytics = new Analytics;
    curebit = new Curebit(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(curebit);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    curebit.reset();
    sandbox();
  });

  it('should have the correct settings', function(){
    analytics.compare(Curebit, integration('Curebit')
      .global('_curebitq')
      .global('curebit')
      .option('siteId', '')
      .option('iframeBorder', 0)
      .option('iframeId', 'curebit_integration')
      .option('iframeHeight', '480')
      .option('iframeWidth', '100%')
      .option('responsive', true)
      .option('device', '')
      .option('insertIntoId', '')
      .option('campaigns', {})
      .option('server', 'https://www.curebit.com'));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(curebit, 'load');
    });

    describe('#initialize', function(){
      it('should push settings', function(){
        analytics.initialize();
        analytics.deepEqual(window._curebitq, [['init', {
          site_id: options.siteId,
          server: 'https://api.segment.io/track'
        }]]);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.called(curebit.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(curebit, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window._curebitq, 'push');
      });

      it('should not register affiliate when the url doesnt match', function(){
        curebit.options.campaigns = { '/share': 'share,test' };
        analytics.page();
        analytics.didNotCall(window._curebitq.push);
      });

      it('should register affiliate when the url matches', function(){
        var campaigns = {};
        campaigns[window.location.pathname] = 'share,test';
        curebit.options.campaigns = campaigns;
        curebit.options.iframeId = 'curebit_integration';
        analytics.page();
        analytics.called(window._curebitq.push, ['register_affiliate', {
          responsive: true,
          device: '',
          campaign_tags : ['share', 'test'],
          iframe: {
            container: '',
            frameborder: 0,
            height: '480',
            id: 'curebit_integration',
            width: '100%'
          },
        }]);
      });

      it('should register affiliate with affiliate member info', function(){
        var campaigns = {};
        campaigns[window.location.pathname] = 'share,test';
        curebit.options.campaigns = campaigns;
        analytics.identify('id', {
          name: 'first last',
          email: 'name@example.com'
        });
        analytics.page();
        analytics.called(window._curebitq.push, ['register_affiliate', {
          responsive: true,
          device: '',
          campaign_tags : ['share', 'test'],
          iframe: {
            container: '',
            frameborder: 0,
            width: '100%',
            id: 'curebit_integration',
            height: '480',
          },
          affiliate_member: {
            email: 'name@example.com',
            first_name: 'first',
            last_name: 'last',
            customer_id: 'id'
          }
        }]);
      });

      it('should throttle', function(){
        window._curebitq = [];
        var campaigns = {};
        campaigns[window.location.pathname] = 'share,test';
        curebit.options.campaigns = campaigns;
        analytics.page();
        analytics.page();
        analytics.page();
        analytics.page();
        analytics.page();
        analytics.equal(window._curebitq.length, 1);
      });
    });

    describe('#completedOrder', function(){
      beforeEach(function(){
        analytics.stub(window._curebitq, 'push');
      });

      it('should send ecommerce data', function(){
        var date = new Date;

        analytics.track('completed order', {
          orderId: 'ab535a52',
          coupon: 'save20',
          date: date,
          total: 647.92,
          products: [{
            sku: '5be59f56',
            quantity: 8,
            price: 80.99,
            name: 'my-product',
            url: '//products.io/my-product',
            image: '//products.io/my-product.webp'
          }]
        });

        analytics.called(window._curebitq.push, ['register_purchase', {
          coupon_code: 'save20',
          customer_id: null,
          email: undefined,
          order_date: iso(date),
          first_name: undefined,
          last_name: undefined,
          order_number: 'ab535a52',
          subtotal: 647.92,
          items: [{
            product_id: '5be59f56',
            quantity: 8,
            price: 80.99,
            title: 'my-product',
            url: '//products.io/my-product',
            image_url: '//products.io/my-product.webp',
          }]
        }]);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"to-iso-string":156,"analytics.js-integration-tester":268,"./":31,"clear-env":4}],
211: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Customer.io', function(){
  var Customerio = plugin;
  var customerio;
  var analytics;
  var options = {
    siteId: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    customerio = new Customerio(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(customerio);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    customerio.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Customerio, integration('Customer.io')
      .assumesPageview()
      .global('_cio')
      .option('siteId', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(customerio, 'load');
    });

    describe('#initialize', function(){
      it('should create the window._cio object', function(){
        analytics.assert(!window._cio);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._cio);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(customerio.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(customerio, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._cio, 'identify');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window._cio.identify, { id: 'id' });
      });

      it('should not send only traits', function(){
        analytics.identify({ trait: true });
        analytics.didNotCall(window._cio.identify);
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window._cio.identify, { id: 'id', trait: true });
      });

      it('should convert dates to unix timestamps', function(){
        var date = new Date();
        analytics.identify('id', { date: date });
        analytics.called(window._cio.identify, {
          id: 'id',
          date: Math.floor(date/1000)
        });
      });

      it('should alias created to created_at', function(){
        var date = new Date();
        analytics.identify('id', { created: date });
        analytics.called(window._cio.identify, {
          id: 'id',
          created_at: Math.floor(date/1000)
        });
      });
    });

    describe('#group', function(){
      beforeEach(function () {
        analytics.user().identify('id');
        analytics.stub(window._cio, 'identify');
      });

      it('should send an id', function(){
        analytics.group('id');
        analytics.called(window._cio.identify, {
          id: 'id',
          'Group id': 'id'
        });
      });

      it('should send traits', function(){
        analytics.group({ trait: true });
        analytics.called(window._cio.identify, {
          id: 'id',
          'Group trait': true
        });
      });

      it('should send an id and traits', function(){
        analytics.group('id', { trait: true });
        analytics.called(window._cio.identify, {
          id: 'id',
          'Group id': 'id',
          'Group trait': true
        });
      });

      it('should convert dates to unix timestamps', function(){
        var date = new Date();
        analytics.group({ date: date });
        analytics.called(window._cio.identify, {
          id: 'id',
          'Group date': Math.floor(date/1000)
        });
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._cio, 'track');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window._cio.track, 'event');
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window._cio.track, 'event', { property: true });
      });

      it('should convert dates to unix timestamps', function(){
        var date = new Date();
        analytics.track('event', { date: date });
        analytics.called(window._cio.track, 'event', { date: Math.floor(date/1000) });
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":32,"clear-env":4}],
212: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Drip', function(){
  var Drip = plugin;
  var drip;
  var analytics;
  var options = {
    account: '9999999'
  };

  beforeEach(function(){
    analytics = new Analytics;
    drip = new Drip(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(drip);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    drip.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Drip, integration('Drip')
      .assumesPageview()
      .global('dc')
      .global('_dcq')
      .global('_dcs')
      .option('account', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(drip, 'load');
    });

    describe('#initialize', function(){
      it('should create window._dcq', function(){
        analytics.assert(!window._dcq);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._dcq instanceof Array);
      });

      it('should create window._dcs', function(){
        analytics.assert(!window._dcs);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._dcs);
        analytics.assert(window._dcs.account === options.account);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(drip.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(drip, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._dcq, 'push');
      });

      it('should send event as the action', function(){
        analytics.track('event');
        analytics.called(window._dcq.push, ['track', 'event', {}]);
      });

      it('should convert and alias revenue', function(){
        analytics.track('event', { revenue: '$9.99' });
        analytics.called(window._dcq.push, ['track', 'event', { value: 999 }]);
      });
    });

    describe('#identify', function () {
      beforeEach(function () {
        analytics.stub(window._dcq, 'push');
      });

      it('should send identify with traits', function () {
        analytics.identify('id', { trait: true });
        analytics.called(window._dcq.push, ['identify', { id: 'id', trait: true }]);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":33,"clear-env":4}],
213: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Errorception', function(){
  var Errorception = plugin;
  var noop = function(){};
  var errorception;
  var analytics;
  var onerror;
  var options = {
    projectId: '53502178c0906d4031000350'
  };

  beforeEach(function(){
    analytics = new Analytics;
    errorception = new Errorception(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(errorception);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    errorception.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Errorception, integration('Errorception')
      .assumesPageview()
      .global('_errs')
      .option('projectId', '')
      .option('meta', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(errorception, 'load');
    });

    afterEach(function(){
      errorception.reset();
    });

    describe('#initialize', function(){
      beforeEach(function(){
        onerror = window.onerror;
        window.onerror = noop;
      });

      afterEach(function(){
        window.onerror = onerror;
      });

      it('should initialize the errorception queue', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._errs, [options.projectId]);
      });

      it('should add the error handler', function(){
        var err = new Error('a test error');
        analytics.initialize();
        analytics.page();
        analytics.stub(window._errs, 'push');
        window.onerror(err);
        analytics.called(window._errs.push, [err]);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(errorception.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(errorception, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      afterEach(function(){
        delete window._errs.meta;
      });

      it('should add an id to metadata', function(){
        analytics.identify('id');
        analytics.deepEqual(window._errs.meta, { id: 'id' });
      });

      it('should add traits to metadata', function(){
        analytics.identify({ trait: true });
        analytics.deepEqual(window._errs.meta, { trait: true });
      });

      it('should add an id and traits to metadata', function(){
        analytics.identify('id', { trait: true });
        analytics.deepEqual(window._errs.meta, { id: 'id', trait: true });
      });

      it('should not add to metadata when meta option is false', function(){
        errorception.options.meta = false;
        analytics.identify('id');
        analytics.assert(!window._errs.meta);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":34,"clear-env":4}],
214: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Evergage', function(){
  var Evergage = plugin;
  var evergage;
  var analytics;
  var options = {
    account: 'segmentiotest',
    dataset: 'segio_b2b_anon'
  };

  beforeEach(function(){
    analytics = new Analytics;
    evergage = new Evergage(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(evergage);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    evergage.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Evergage, integration('Evergage')
      .assumesPageview()
      .global('_aaq')
      .option('account', '')
      .option('dataset', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(evergage, 'load');
    });

    describe('#initialize', function(){
      it('should create window._aaq', function(){
        analytics.assert(!window._aaq);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._aaq);
      });

      it('should push the account', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._aaq[0], ['setEvergageAccount', options.account]);
      });

      it('should push the dataset', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._aaq[1], ['setDataset', options.dataset]);
      });

      it('should push use site config', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._aaq[2], ['setUseSiteConfig', true]);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(evergage.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(evergage, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._aaq, 'push');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window._aaq.push, ['setUser', 'id']);
      });

      it('should not send just traits', function(){
        analytics.identify({ trait: true });
        analytics.didNotCall(window._aaq.push);
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window._aaq.push, ['setUser', 'id']);
        analytics.called(window._aaq.push, ['setUserField', 'trait', true, 'page']);
      });

      it('should send an email', function(){
        analytics.identify('id', { email: 'name@example.com' });
        analytics.called(window._aaq.push, ['setUserField', 'userEmail', 'name@example.com', 'page']);
      });

      it('should send a name', function(){
        analytics.identify('id', { name: 'name' });
        analytics.called(window._aaq.push, ['setUserField', 'userName', 'name', 'page']);
      });
    });

    describe('#group', function(){
      beforeEach(function(){
        analytics.stub(window._aaq, 'push');
      });

      it('should send an id', function(){
        analytics.group('id');
        analytics.called(window._aaq.push, ['setCompany', 'id']);
      });

      it('should not send just traits', function(){
        analytics.group({ trait: true });
        analytics.didNotCall(window._aaq.push);
      });

      it('should send an id and properties', function(){
        analytics.group('id', { trait: true });
        analytics.called(window._aaq.push, ['setCompany', 'id']);
        analytics.called(window._aaq.push, ['setAccountField', 'trait', true, 'page']);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._aaq, 'push');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window._aaq.push, ['trackAction', 'event', {}]);
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window._aaq.push, ['trackAction', 'event', { property: true }]);
      });
    });

    describe('#page', function(){
      beforeEach(function () {
        analytics.stub(window._aaq, 'push');
        analytics.stub(window.Evergage, 'init');
      });

      it('should send a page view', function(){
        analytics.page();
        analytics.called(window.Evergage.init, true);
      });

      it('should send page properties', function(){
        analytics.page({ property: true });
        analytics.called(window._aaq.push, ['setCustomField', 'property', true, 'page']);
      });

      it('should send a page name', function(){
        analytics.page('name');
        analytics.called(window._aaq.push, ['namePage', 'name']);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":35,"clear-env":4}],
215: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Facebook Conversion Tracking', function(){
  var Facebook = plugin;
  var facebook;
  var analytics;
  var options = {
    events: {
      signup: 0,
      login: 1,
      play: 2
    }
  };

  beforeEach(function(){
    analytics = new Analytics;
    facebook = new Facebook(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(facebook);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    facebook.reset();
    sandbox();
  });

  it('should have the correct settings', function(){
    analytics.compare(Facebook, integration('Facebook Conversion Tracking')
      .option('currency', 'USD')
      .mapping('events'));
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(facebook, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._fbq, 'push');
      });

      it('should send custom event even if event is not defined', function(){
        analytics.track('event', { x: 10 });
        analytics.called(window._fbq.push, [ 'track', 'event', { x: 10 } ]);
      });

      it('should send event if found', function(){
        analytics.track('signup', {});
        analytics.called(window._fbq.push, [ 'track', 0, {
          currency: 'USD',
          value: '0.00'
        }]);
      });

      it('should support array events', function(){
        facebook.options.events = [{ key: 'event', value: 4 }];
        analytics.track('event');
        analytics.called(window._fbq.push, ['track', 4, {
          currency: 'USD',
          value: '0.00'
        }]);
      });

      it('should send revenue', function(){
        analytics.track('login', { revenue: '$50' });
        analytics.called(window._fbq.push, [ 'track', 1, {
          value: '50.00',
          currency: 'USD'
        } ]);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":36,"clear-env":4}],
216: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('FoxMetrics', function(){
  var FoxMetrics = plugin;
  var foxmetrics;
  var analytics;
  var options = {
    appId: '5135085424023236bca9c08c'
  };

  beforeEach(function(){
    analytics = new Analytics;
    foxmetrics = new FoxMetrics(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(foxmetrics);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    foxmetrics.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(FoxMetrics, integration('FoxMetrics')
      .assumesPageview()
      .global('_fxm')
      .option('appId', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(foxmetrics, 'load');
    });

    describe('#initialize', function(){
      
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(foxmetrics, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window._fxm, 'push');
      });

      it('should send a page view', function(){
        analytics.page();
        analytics.called(window._fxm.push, [
          '_fxm.pages.view',
          document.title,
          undefined,
          undefined,
          window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname,
          ''
        ]);
      });

      it('should send page properties', function(){
        analytics.page('category', 'name', {
          referrer: 'referrer',
          title: 'title',
          url: 'url'
        });

        analytics.called(window._fxm.push, [
          '_fxm.pages.view',
          'title',
          'name',
          'category',
          'url',
          'referrer'
        ]);
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._fxm, 'push');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window._fxm.push, [
          '_fxm.visitor.profile',
          'id',
          undefined,
          undefined,
          undefined,
          undefined,
          undefined,
          undefined,
          { id: 'id' }
        ]);
      });

      it('should not only send traits', function(){
        analytics.identify({ trait: true });
        analytics.didNotCall(window._fxm.push);
      });

      it('should send an id and traits', function(){
        analytics.identify('id', {
          address: 'address',
          email: 'email@example.com',
          firstName: 'first',
          lastName: 'last',
          trait: true
        });
        analytics.called(window._fxm.push, [
          '_fxm.visitor.profile',
          'id',
          'first',
          'last',
          'email@example.com',
          'address',
          undefined,
          undefined,
          {
            address: 'address',
            email: 'email@example.com',
            firstName: 'first',
            lastName: 'last',
            trait: true,
            id: 'id'
          }
        ]);
      });

      it('should split a name trait', function(){
        analytics.identify('id', { name: 'first last' });
        analytics.called(window._fxm.push, [
          '_fxm.visitor.profile',
          'id',
          'first',
          'last',
          undefined,
          undefined,
          undefined,
          undefined,
          {
            name: 'first last',
            id: 'id'
          }
        ]);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._fxm, 'push');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window._fxm.push, [
          'event',
          undefined,
          {}
        ]);
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window._fxm.push, [
          'event',
          undefined,
          { property: true }
        ]);
      });

      it('should send a category property', function(){
        analytics.track('event', { category: 'category' });
        analytics.called(window._fxm.push, [
          'event',
          'category',
          { category: 'category' }
        ]);
      });

      it('should send a stored category', function(){
        analytics.page('category');
        analytics.track('event', { category: 'category' });
        analytics.called(window._fxm.push, [
          '_fxm.pages.view',
          document.title,
          'category',
          null,
          window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname,
          ''
        ]);
      });
    });

    describe('ecommerce', function(){
      beforeEach(function(){
        analytics.stub(window._fxm, 'push');
      });

      it('should track viewed product', function(){
        analytics.track('viewed product', {
          sku: 'f84d349b',
          name: 'my-product',
          category: 'category'
        });

        analytics.called(window._fxm.push, [
          '_fxm.ecommerce.productview',
          'f84d349b',
          'my-product',
          'category'
        ]);
      });

      it('should track added product', function(){
        analytics.track('added product', {
          id: 'c1ec1864',
          name: 'my-product',
          category: 'category'
        });

        analytics.called(window._fxm.push, [
          '_fxm.ecommerce.cartitem',
          'c1ec1864',
          'my-product',
          'category'
        ]);
      });

      it('should track removed product', function(){
        analytics.track('removed product', {
          sku: 'c1ec1864',
          name: 'my-product'
        });

        analytics.called(window._fxm.push, [
          '_fxm.ecommerce.removecartitem',
          'c1ec1864',
          'my-product',
          undefined
        ]);
      });

      it('should track completed order', function(){
        analytics.track('completed order', {
          orderId: '3723ee8a',
          total: 300,
          tax: 10,
          shipping: 20,
          products: [{
            sku: 'd370b4cd',
            name: 'sony pulse',
            category: 'tech',
            price: 270,
            quantity: 1
          }]
        });

        analytics.deepEqual(window._fxm.push.args[0][0], [
          '_fxm.ecommerce.order',
          '3723ee8a',
          270,
          20,
          10,
          null,
          null,
          undefined,
          1,
        ]);

        analytics.deepEqual(window._fxm.push.args[1][0], [
          '_fxm.ecommerce.purchaseitem',
          'd370b4cd',
          'sony pulse',
          'tech',
          1,
          270,
          '3723ee8a'
        ]);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":37,"clear-env":4}],
217: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Frontleaf', function(){
  var Frontleaf = plugin;
  var frontleaf;
  var analytics;
  var options = {
    baseUrl: 'https://demo.frontleaf.com',
    token: 'alHTmBjMiewZnPLycFeBQxaidbBeouXG',
    stream: 'segment.io'
  };

  beforeEach(function(){
    analytics = new Analytics;
    frontleaf = new Frontleaf(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(frontleaf);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    frontleaf.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Frontleaf, integration('Frontleaf')
      .assumesPageview()
      .global('_fl')
      .global('_flBaseUrl')
      .option('token', '')
      .option('stream', '')
      .option('trackNamedPages', false)
      .option('trackCategorizedPages', false));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(frontleaf, 'load');
    });

    describe('#initialize', function(){
      it('should create window._fl', function(){
        analytics.assert(!window._fl);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._fl);
      });

      it('should create window._flBaseUrl', function(){
        analytics.assert(!window._flBaseUrl);
        analytics.initialize();
        analytics.page();
        analytics.equal(window._flBaseUrl, options.baseUrl);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(frontleaf, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(frontleaf, '_push');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(frontleaf._push, 'setUser', {
          id: 'id',
          name: undefined,
          data: {}
        });
      });

      it('should send traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(frontleaf._push, 'setUser', {
          id: 'id',
          name: undefined,
          data: { trait: true }
        });
      });

      it('should send a name', function(){
        analytics.identify('id', { name: 'name' });
        analytics.called(frontleaf._push, 'setUser', {
          id: 'id',
          name: 'name',
          data: {}
        });
      });

      it('should send a username', function(){
        analytics.identify('id', { username: 'username' });
        analytics.called(frontleaf._push, 'setUser', {
          id: 'id',
          name: 'username',
          data: { username: 'username' }
        });
      });
    });

    describe('#group', function(){
      beforeEach(function(){
        analytics.stub(frontleaf, '_push');
      });

      it('should not send without an id', function(){
        analytics.group();
        analytics.didNotCall(frontleaf._push);
      });

      it('should send an id', function(){
        analytics.group('id');
        analytics.called(frontleaf._push, 'setAccount', {
          id: 'id',
          name: undefined,
          data: {}
        });
      });

      it('should send traits', function(){
        analytics.group('id', { trait: true });
        analytics.called(frontleaf._push, 'setAccount', {
          id: 'id',
          name: undefined,
          data: { trait: true }
        });
      });

      it('should send a name', function(){
        analytics.group('id', { name: 'name' });
        analytics.called(frontleaf._push, 'setAccount', {
          id: 'id',
          name: 'name',
          data: {}
        });
      });
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(frontleaf, '_push');
      });

      it('should not track anonymous pages by default', function(){
        analytics.page();
        analytics.didNotCall(frontleaf._push);
      });

      it('should track named pages when the option is on', function(){
        frontleaf.options.trackNamedPages = true;
        analytics.page('Name');
        analytics.didNotCall(frontleaf._push, 'event', 'Viewed Category Page');
        analytics.called(frontleaf._push, 'event', 'Viewed Name Page');
      });

      it('should track named pages with categories when the options are on', function(){
        frontleaf.options.trackNamedPages = true;
        frontleaf.options.trackCategorizedPages = true;
        analytics.page('Category', 'Name');
        analytics.didNotCall(frontleaf._push, 'event', 'Viewed Name Page');
        analytics.called(frontleaf._push, 'event', 'Viewed Category Page');
        analytics.called(frontleaf._push, 'event', 'Viewed Category Name Page');
      });

      it('should track categorized pages when the option is on', function(){
        frontleaf.options.trackCategorizedPages = true;
        analytics.page('Category', 'Name');
        analytics.didNotCall(frontleaf._push, 'event', 'Viewed Name Page');
        analytics.called(frontleaf._push, 'event', 'Viewed Category Page');
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(frontleaf, '_push');
      });

      it('should send an event', function(){
        analytics.track('login');
        analytics.called(frontleaf._push, 'event', 'login');
      });

      it('should send properties', function(){
        analytics.track('login', { property: true });
        analytics.called(frontleaf._push, 'event', 'login', { property: true });
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":38,"clear-env":4}],
218: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('FullStory', function(){
  var FullStory = plugin;
  var fullstory;
  var analytics;
  var options = {
    org: '1JO',
    debug: false
  };

  beforeEach(function(){
    analytics = new Analytics;
    fullstory = new FullStory(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(fullstory);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    fullstory.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(FullStory, integration('FullStory')
      .option('org', '')
      .option('debug', false));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(fullstory, 'load');
    });

    describe('#initialize', function(){
      it('should create window.FS', function(){
        analytics.assert(!window.FS);
        analytics.initialize();
        analytics.page();
        analytics.assert(window.FS);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(fullstory.load);
      });
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.FS, 'identify');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window.FS.identify, 'id');
      });

      it('should not send only traits', function(){
        analytics.identify({ trait: true });
        analytics.didNotCall(window.FS.identify);
      });
      
      it('should map name and email', function(){
        analytics.identify('id', { name: 'Test', email: 'test@test.com' });
        analytics.called(window.FS.identify, 'id', { displayName: 'Test', name: 'Test', id: 'id', email: 'test@test.com' });
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":39,"clear-env":4}],
219: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Gauges', function(){
  var Gauges = plugin;
  var gauges;
  var analytics;
  var options = {
    siteId: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    gauges = new Gauges(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(gauges);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    gauges.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Gauges, integration('Gauges')
      .assumesPageview()
      .global('_gauges')
      .option('siteId', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(gauges, 'load');
    });

    describe('#initialize', function(){
      it('should create the gauges queue', function(){
        analytics.assert(!window._gauges);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._gauges instanceof Array);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(gauges, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window._gauges, 'push');
      });

      it('should send a page view', function(){
        analytics.page();
        analytics.called(window._gauges.push);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":40,"clear-env":4}],
220: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Get Satisfaction', function(){
  var GetSatisfaction = plugin;
  var gs;
  var analytics;
  var options = {
    widgetId: 5005
  };

  beforeEach(function(){
    analytics = new Analytics;
    gs = new GetSatisfaction(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(gs);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    gs.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(GetSatisfaction, integration('Get Satisfaction')
      .assumesPageview()
      .global('GSFN')
      .option('widgetId', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(gs, 'load');
    });

    describe('#initialize', function(){
      it('should add the get satisfaction widget to the dom', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(document.getElementById('getsat-widget-' + options.widgetId));
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(gs, done);
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":41,"clear-env":4}],
221: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Google Analytics', function(){
  var GA = plugin.Integration;
  var ga;
  var analytics;

  beforeEach(function(){
    analytics = new Analytics;
    analytics.use(plugin);
    analytics.use(tester);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(GA, integration('Google Analytics')
      .readyOnLoad()
      .global('ga')
      .global('_gaq')
      .global('GoogleAnalyticsObject')
      .option('anonymizeIp', false)
      .option('classic', false)
      .option('domain', 'auto')
      .option('doubleClick', false)
      .option('enhancedEcommerce', false)
      .option('enhancedLinkAttribution', false)
      .option('nonInteraction',false)
      .option('ignoredReferrers', null)
      .option('siteSpeedSampleRate', 1)
      .option('trackingId', '')
      .option('trackNamedPages', true));
  });

  describe('Universal', function(){
    var settings = {
      anonymizeIp: true,
      domain: 'auto',
      siteSpeedSampleRate: 42,
      trackingId: 'UA-27033709-12'
    };

    beforeEach(function(){
      ga = new GA(settings);
      analytics.add(ga);
    });

    afterEach(function(){
      ga.reset();
    });

    describe('before loading', function(){
      beforeEach(function(){
        analytics.stub(ga, 'load');
      });

      describe('#initialize', function(){
        it('should require "displayfeatures" if .doubleClick option is `true`', function(){
          ga.options.doubleClick = true;
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window.ga.q[1], ['require', 'displayfeatures']);
        });

        it('should create window.GoogleAnalyticsObject', function(){
          analytics.assert(!window.GoogleAnalyticsObject);
          analytics.initialize();
          analytics.page();
          analytics.assert('ga' === window.GoogleAnalyticsObject);
        });

        it('should create window.ga', function(){
          analytics.assert(!window.ga);
          analytics.initialize();
          analytics.page();
          analytics.assert('function' === typeof window.ga);
        });

        it('should create window.ga.l', function(){
          analytics.assert(!window.ga);
          analytics.initialize();
          analytics.page();
          analytics.assert('number' === typeof window.ga.l);
        });

        it('should call window.ga.create with options', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(Array.prototype.slice.call(window.ga.q[0]), ['create', settings.trackingId, {
            cookieDomain: 'none',
            siteSpeedSampleRate: settings.siteSpeedSampleRate,
            allowLinker: true
          }]);
        });

        it('should anonymize the ip', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window.ga.q[1], ['set', 'anonymizeIp', true]);
        });

        it('should call #load', function(){
          analytics.initialize();
          analytics.page();
          analytics.called(ga.load);
        });

        it('should not send universal user id by default', function(){
          analytics.user().id('baz');
          analytics.initialize();
          analytics.page();
          analytics.notDeepEqual(window.ga.q[1], ['set', 'userId', 'baz']);
        });

        it('should send universal user id if sendUserId option is true and user.id() is truthy', function(){
          analytics.user().id('baz');
          ga.options.sendUserId = true;
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window.ga.q[1], ['set', 'userId', 'baz']);
        });

        it('should map custom dimensions & metrics using user.traits()', function(){
          ga.options.metrics = { firstName: 'metric1', last_name: 'metric2' };
          ga.options.dimensions = { Age: 'dimension2' };
          analytics.user().traits({ firstName: 'John', lastName: 'Doe', age: 20 });
          analytics.initialize();
          analytics.page();

          analytics.deepEqual(window.ga.q[2], ['set', {
            metric1: 'John',
            metric2: 'Doe',
            dimension2: 20
          }]);
        });

        it('should not set metrics and dimensions if there are no traits', function(){
          ga.options.metrics = { metric1: 'something' };
          ga.options.dimensions = { dimension3: 'industry' };
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window.ga.q[2], undefined);
        });

        it('should set metrics and dimensions that have dots but arent nested', function(){
          ga.options.metrics = { 'name.first': 'metric1', 'name.last': 'metric2' };
          ga.options.dimensions = { Age: 'dimension2' };
          analytics.user().traits({ 'name.first': 'John', 'name.last': 'Doe', age: 20 });
          analytics.initialize();
          analytics.page();

          analytics.deepEqual(window.ga.q[2], ['set', {
            metric1: 'John',
            metric2: 'Doe',
            dimension2: 20
          }]);
        });

        it('should set metrics and dimensions that are nested, using dot notation', function(){
          ga.options.metrics = { 'name.first': 'metric1', 'name.last': 'metric2' };
          ga.options.dimensions = { Age: 'dimension2' };
          analytics.user().traits({
            name: {
              first: 'John',
              last: 'Doe',
            },
            age: 20
          });
          analytics.initialize();
          analytics.page();

          analytics.deepEqual(window.ga.q[2], ['set', {
            metric1: 'John',
            metric2: 'Doe',
            dimension2: 20
          }]);
        });
      });
    });

    describe('loading', function(){
      it('should load', function(done){
        analytics.load(ga, done);
      });
    });

    describe('after loading', function(){
      beforeEach(function(done){
        analytics.once('ready', done);
        analytics.initialize();
        analytics.page();
      });

      describe('#page', function(){
        beforeEach(function(){
          analytics.stub(window, 'ga');
        });

        it('should send a page view', function(){
          analytics.page();
          analytics.called(window.ga, 'send', 'pageview', {
            page: window.location.pathname,
            title: document.title,
            location: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname + window.location.search
          });
        });

        it('should send a page view with properties', function(){
          analytics.page('category', 'name', { url: 'url', path: '/path' });
          analytics.called(window.ga, 'send', 'pageview', {
            page: '/path',
            title: 'category name',
            location: 'url'
          });
        });

        it('should send the query if its included', function(){
          ga.options.includeSearch = true;
          analytics.page('category', 'name', { url: 'url', path: '/path', search: '?q=1' });
          analytics.called(window.ga, 'send', 'pageview', {
            page: '/path?q=1',
            title: 'category name',
            location: 'url'
          });
        });

        it('should track a named page', function(){
          analytics.page('Name');
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'All',
            eventAction: 'Viewed Name Page',
            eventLabel: undefined,
            eventValue: 0,
            nonInteraction: true
          });
        });

        it('should track a name + category page', function(){
          analytics.page('Category', 'Name');
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'Category',
            eventAction: 'Viewed Category Name Page',
            eventLabel: undefined,
            eventValue: 0,
            nonInteraction: true
          });
        });

        it('should track a categorized page', function(){
          analytics.page('Category', 'Name');
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'Category',
            eventAction: 'Viewed Category Page',
            eventLabel: undefined,
            eventValue: 0,
            nonInteraction: true
          });
        });

        it('should not track a named or categorized page when the option is off', function(){
          ga.options.trackNamedPages = false;
          ga.options.trackCategorizedPages = false;
          analytics.page('Name');
          analytics.page('Category', 'Name');
          analytics.calledTwice(window.ga);
        });
      });

      describe('#track', function(){
        beforeEach(function(){
          analytics.stub(window, 'ga');
        });

        it('should send an event', function(){
          analytics.track('event');
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'All',
            eventAction: 'event',
            eventLabel: undefined,
            eventValue: 0,
            nonInteraction: false
          });
        });

        it('should send a category property', function(){
          analytics.track('event', { category: 'category' });
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'category',
            eventAction: 'event',
            eventLabel: undefined,
            eventValue: 0,
            nonInteraction: false
          });
        });

        it('should send a stored category', function(){
          analytics.page('category', 'name');
          analytics.track('event', {});
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'category',
            eventAction: 'event',
            eventLabel: undefined,
            eventValue: 0,
            nonInteraction: false
          });
        });

        it('should send a category property even if there is a stored category', function(){
          analytics.page('category(page)');
          analytics.track('event', { category: 'category(track)' });
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'category(track)',
            eventAction: 'event',
            eventLabel: undefined,
            eventValue: 0,
            nonInteraction: false
          });
        });

        it('should send a label property', function(){
          analytics.track('event', { label: 'label' });
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'All',
            eventAction: 'event',
            eventLabel: 'label',
            eventValue: 0,
            nonInteraction: false
          });
        });

        it('should send a rounded value property', function(){
          analytics.track('event', { value: 1.1 });
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'All',
            eventAction: 'event',
            eventLabel: undefined,
            eventValue: 1,
            nonInteraction: false
          });
        });

        it('should prefer a rounded revenue property', function(){
          analytics.track('event', { revenue: 9.99 });
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'All',
            eventAction: 'event',
            eventLabel: undefined,
            eventValue: 10,
            nonInteraction: false
          });
        });

        it('should send a non-interaction property', function(){
          analytics.track('event', { nonInteraction: 1 });
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'All',
            eventAction: 'event',
            eventLabel: undefined,
            eventValue: 0,
            nonInteraction: true
          });
        });

        it('should send a non-interaction option', function(){
          analytics.track('event', {}, { 'Google Analytics': { nonInteraction: 1 } });
          analytics.called(window.ga, 'send', 'event', {
            eventCategory: 'All',
            eventAction: 'event',
            eventLabel: undefined,
            eventValue: 0,
            nonInteraction: true
          });
        });
      });

      describe('ecommerce', function(){
        beforeEach(function(){
          analytics.stub(window, 'ga');
        });

        it('should require ecommerce.js', function(){
          analytics.track('completed order', { orderId: 'ee099bf7' });
          analytics.called(window.ga, 'require', 'ecommerce');
          analytics.assert(ga.ecommerce);
        });

        it('should not require ecommerce if .ecommerce is true', function(){
          ga.ecommerce = true;
          analytics.track('completed order', { orderId: 'e213e4da' });
          analytics.didNotCall(window.ga, 'require', 'ecommerce');
        });

        it('should send simple ecommerce data', function(){
          analytics.track('completed order', { orderId: '7306cc06' });
          analytics.assert(3 == window.ga.args.length);
          analytics.assert('ecommerce:addTransaction' == window.ga.args[1][0]);
          analytics.assert('ecommerce:send' == window.ga.args[2][0]);
        });

        it('should send ecommerce data', function(){
          analytics.track('completed order', {
            orderId: '780bc55',
            total: 99.99,
            shipping: 13.99,
            tax: 20.99,
            products: [{
              quantity: 1,
              price: 24.75,
              name: 'my product',
              sku: 'p-298'
            }, {
              quantity: 3,
              price: 24.75,
              name: 'other product',
              sku: 'p-299'
            }]
          });

          analytics.deepEqual(window.ga.args[1], ['ecommerce:addTransaction', {
            id: '780bc55',
            revenue: 99.99,
            shipping: 13.99,
            affiliation: undefined,
            tax: 20.99,
            currency: 'USD'
          }]);

          analytics.deepEqual(window.ga.args[2], ['ecommerce:addItem', {
            id: '780bc55',
            category: undefined,
            name: 'my product',
            price: 24.75,
            quantity: 1,
            sku: 'p-298',
            currency: 'USD'
          }]);

          analytics.deepEqual(window.ga.args[3], ['ecommerce:addItem', {
            id: '780bc55',
            category: undefined,
            name: 'other product',
            price: 24.75,
            sku: 'p-299',
            quantity: 3,
            currency: 'USD'
          }]);

          analytics.deepEqual(window.ga.args[4], ['ecommerce:send']);
        });

        it('should fallback to revenue', function(){
          analytics.track('completed order', {
            orderId: '5d4c7cb5',
            revenue: 99.9,
            shipping: 13.99,
            tax: 20.99,
            products: []
          });

          analytics.deepEqual(window.ga.args[1], ['ecommerce:addTransaction', {
            id: '5d4c7cb5',
            revenue: 99.9,
            shipping: 13.99,
            affiliation: undefined,
            tax: 20.99,
            currency: 'USD'
          }]);
        });

        it('should pass custom currency', function(){
          analytics.track('completed order', {
            orderId: '5d4c7cb5',
            revenue: 99.9,
            shipping: 13.99,
            tax: 20.99,
            products: [],
            currency: 'EUR'
          });

          analytics.deepEqual(window.ga.args[1], ['ecommerce:addTransaction', {
            id: '5d4c7cb5',
            revenue: 99.9,
            shipping: 13.99,
            affiliation: undefined,
            tax: 20.99,
            currency: 'EUR'
          }]);
        });
      });
    });
  });

  describe('Universal Enhanced Ecommerce', function(){
    var settings = {
      enhancedEcommerce: true,
      anonymizeIp: true,
      domain: 'none',
      siteSpeedSampleRate: 42,
      trackingId: 'UA-27033709-12'
    };

    beforeEach(function(){
      ga = new GA(settings);
      analytics.add(ga);
    });

    afterEach(function(){
      ga.reset();
    });

    describe('after loading', function(){
      beforeEach(function(done){
        analytics.once('ready', done);
        analytics.initialize();
        analytics.page();
      });

      describe('enhanced ecommerce', function(){
        beforeEach(function(){
          analytics.stub(window, 'ga');
        });

        it('should require ec.js', function(){
          analytics.track('completed order', { orderId: 'ee099bf7' });
          analytics.assert(window.ga.args.length > 0);
          analytics.deepEqual(window.ga.args[0], ['require', 'ec']);
        });

        it('should not require ec if .enhancedEcommerceLoaded is true', function(){
          ga.enhancedEcommerceLoaded = true;
          analytics.track('completed order', { orderId: 'e213e4da' });
          analytics.assert(window.ga.args.length > 0);
          analytics.notDeepEqual(window.ga.args[0], ['require', 'ec']);
        });

        it('should set currency for ec.js  to default', function(){
          analytics.track('completed order', { orderId: 'ee099bf7' });
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'USD']);
        });

        it('should set currency for ec.js to custom currency', function(){
          analytics.track('completed order', { orderId: 'ee099bf7', currency: 'EUR' });
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'EUR']);
        });

        it('should send added product data', function(){
          analytics.track('added product', {
            currency: 'CAD',
            quantity: 1,
            price: 24.75,
            name: 'my product',
            category: 'cat 1',
            sku: 'p-298'
          });

          analytics.assert(5 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:addProduct', {
            id: 'p-298',
            name: 'my product',
            category: 'cat 1',
            quantity: 1,
            price: 24.75,
            brand: undefined,
            variant: undefined,
          }]);
          analytics.deepEqual(window.ga.args[3], ['ec:setAction', 'add', {}]);
          analytics.deepEqual(window.ga.args[4], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send removed product data', function(){
          analytics.track('removed product', {
            currency: 'CAD',
            quantity: 1,
            price: 24.75,
            name: 'my product',
            category: 'cat 1',
            sku: 'p-298'
          });

          analytics.assert(5 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:addProduct', {
            id: 'p-298',
            name: 'my product',
            category: 'cat 1',
            quantity: 1,
            price: 24.75,
            brand: undefined,
            variant: undefined,
          }]);
          analytics.deepEqual(window.ga.args[3], ['ec:setAction', 'remove', {}]);
          analytics.deepEqual(window.ga.args[4], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send viewed product details data', function(){
          analytics.track('viewed product details', {
            currency: 'CAD',
            quantity: 1,
            price: 24.75,
            name: 'my product',
            category: 'cat 1',
            sku: 'p-298'
          });

          analytics.assert(5 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:addProduct', {
            id: 'p-298',
            name: 'my product',
            category: 'cat 1',
            quantity: 1,
            price: 24.75,
            brand: undefined,
            variant: undefined,
          }]);
          analytics.deepEqual(window.ga.args[3], ['ec:setAction', 'detail', {}]);
          analytics.deepEqual(window.ga.args[4], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send clicked product data', function(){
          analytics.track('clicked product', {
            currency: 'CAD',
            quantity: 1,
            price: 24.75,
            name: 'my product',
            category: 'cat 1',
            sku: 'p-298',
            list: 'search results',
          });

          analytics.assert(5 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:addProduct', {
            id: 'p-298',
            name: 'my product',
            category: 'cat 1',
            quantity: 1,
            price: 24.75,
            brand: undefined,
            variant: undefined,
          }]);
          analytics.deepEqual(window.ga.args[3], ['ec:setAction', 'click', {
            list: 'search results'
          }]);
          analytics.deepEqual(window.ga.args[4], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send viewed product data', function(){
          analytics.track('viewed product', {
            currency: 'CAD',
            name: 'my product',
            category: 'cat 1',
            sku: 'p-298',
            list: 'search results',
            position: 1
          });

          analytics.assert(4 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:addImpression', {
            id: 'p-298',
            name: 'my product',
            category: 'cat 1',
            brand: undefined,
            variant: undefined,
            list: 'search results',
            position: 1
          }]);
          analytics.deepEqual(window.ga.args[3], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send viewed promotion data', function(){
          analytics.track('viewed promotion', {
            currency: 'CAD',
            id: 'PROMO_1234',
            name: 'Summer Sale',
            creative: 'summer_banner2',
            position: 'banner_slot1'
          });

          //analytics.assert(4 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:addPromo', {
            id: 'PROMO_1234',
            name: 'Summer Sale',
            creative: 'summer_banner2',
            position: 'banner_slot1'
          }]);
          analytics.deepEqual(window.ga.args[3], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send clicked promotion data', function(){
          analytics.track('clicked promotion', {
            currency: 'CAD',
            id: 'PROMO_1234',
            name: 'Summer Sale',
            creative: 'summer_banner2',
            position: 'banner_slot1'
          });

          //analytics.assert(5 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:addPromo', {
            id: 'PROMO_1234',
            name: 'Summer Sale',
            creative: 'summer_banner2',
            position: 'banner_slot1'
          }]);
          analytics.deepEqual(window.ga.args[3], ['ec:setAction', 'promo_click', {}]);
          analytics.deepEqual(window.ga.args[4], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send started order data', function(){
          analytics.track('started order', {
            currency: 'CAD',
            products: [{
              quantity: 1,
              price: 24.75,
              name: 'my product',
              sku: 'p-298'
            }, {
              quantity: 3,
              price: 24.75,
              name: 'other product',
              sku: 'p-299'
            }],
            step: 1,
            paymentMethod: 'Visa'
          });

          analytics.assert(6 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:addProduct', {
            id: 'p-298',
            name: 'my product',
            category: undefined,
            quantity: 1,
            price: 24.75,
            brand: undefined,
            variant: undefined,
          }]);
          analytics.deepEqual(window.ga.args[3], ['ec:addProduct', {
            id: 'p-299',
            name: 'other product',
            category: undefined,
            quantity: 3,
            price: 24.75,
            brand: undefined,
            variant: undefined,
          }]);
          analytics.deepEqual(window.ga.args[4], ['ec:setAction', 'checkout', {
            step: 1,
            option: 'Visa'
          }]);
          analytics.deepEqual(window.ga.args[5], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send updated order data', function(){
          analytics.track('updated order', {
            currency: 'CAD',
            products: [{
              quantity: 1,
              price: 24.75,
              name: 'my product',
              category: 'cat 1',
              sku: 'p-298'
            }, {
              quantity: 3,
              price: 24.75,
              name: 'other product',
              category: 'cat 2',
              sku: 'p-299'
            }],
            step: 1,
            paymentMethod: 'Visa'
          });

          analytics.assert(6 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:addProduct', {
            id: 'p-298',
            name: 'my product',
            category: 'cat 1',
            quantity: 1,
            price: 24.75,
            brand: undefined,
            variant: undefined,
          }]);
          analytics.deepEqual(window.ga.args[3], ['ec:addProduct', {
            id: 'p-299',
            name: 'other product',
            category: 'cat 2',
            quantity: 3,
            price: 24.75,
            brand: undefined,
            variant: undefined,
          }]);
          analytics.deepEqual(window.ga.args[4], ['ec:setAction', 'checkout', {
            step: 1,
            option: 'Visa'
          }]);
          analytics.deepEqual(window.ga.args[5], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send viewed checkout step data', function(){
          analytics.track('viewed checkout step', {
            currency: 'CAD',
            step: 2
          });

          analytics.assert(4 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:setAction', 'checkout', {
            step: 2,
            option: undefined,
          }]);
          analytics.deepEqual(window.ga.args[3], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send completed checkout step data', function(){
          analytics.track('completed checkout step', {
            currency: 'CAD',
            step: 2,
            shippingMethod: 'FedEx'
          });

          analytics.assert(4 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:setAction', 'checkout_option', {
            step: 2,
            option: 'FedEx',
          }]);
          analytics.deepEqual(window.ga.args[3], ['send', 'event', 'Checkout', 'Option']);
        });

        it('should send completed checkout step data with all options', function(){
          analytics.track('completed checkout step', {
            currency: 'CAD',
            step: 2,
            paymentMethod: 'Visa',
            shippingMethod: 'FedEx',
          });

          analytics.assert(4 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:setAction', 'checkout_option', {
            step: 2,
            option: 'Visa, FedEx',
          }]);
          analytics.deepEqual(window.ga.args[3], ['send', 'event', 'Checkout', 'Option']);
        });

        it('should not send completed checkout step data without a step', function(){
          analytics.track('completed checkout step', {
            currency: 'CAD',
            shippingMethod: 'FedEx',
          });

          analytics.assert(0 == window.ga.args.length);
        });

        it('should not send completed checkout step data without an option', function(){
          analytics.track('completed checkout step', {
            currency: 'CAD',
            step: 2,
          });

          analytics.assert(0 == window.ga.args.length);
        });

        it('should send simple completed order data', function(){
          analytics.track('completed order', { orderId: '7306cc06' });
          analytics.assert(4 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[2], ['ec:setAction', 'purchase', {
            id: '7306cc06',
            affiliation: undefined,
            revenue: 0.0,
            tax: undefined,
            shipping: undefined,
            coupon: undefined
          }]);
          analytics.deepEqual(window.ga.args[3], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send completed order data', function(){
          analytics.track('completed order', {
            orderId: '780bc55',
            total: 99.9,
            shipping: 13.99,
            tax: 20.99,
            currency: 'CAD',
            coupon: 'coupon',
            affiliation: 'affiliation',
            products: [{
              quantity: 1,
              price: 24.75,
              name: 'my product',
              category: 'cat 1',
              sku: 'p-298'
            }, {
              quantity: 3,
              price: 24.75,
              name: 'other product',
              category: 'cat 2',
              sku: 'p-299'
            }]
          });

          analytics.assert(6 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[1], ['set', '&cu', 'CAD']);
          analytics.deepEqual(window.ga.args[2], ['ec:addProduct', {
            id: 'p-298',
            name: 'my product',
            category: 'cat 1',
            quantity: 1,
            price: 24.75,
            brand: undefined,
            variant: undefined,
          }]);
          analytics.deepEqual(window.ga.args[3], ['ec:addProduct', {
            id: 'p-299',
            name: 'other product',
            category: 'cat 2',
            quantity: 3,
            price: 24.75,
            brand: undefined,
            variant: undefined,
          }]);
          analytics.deepEqual(window.ga.args[4], ['ec:setAction', 'purchase', {
            id: '780bc55',
            affiliation: 'affiliation',
            revenue: 99.9,
            tax: 20.99,
            shipping: 13.99,
            coupon: 'coupon'
          }]);
          analytics.deepEqual(window.ga.args[5], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('completed order should fallback to revenue', function(){
          analytics.track('completed order', {
            orderId: '5d4c7cb5',
            revenue: 99.9,
            shipping: 13.99,
            tax: 20.99,
            products: []
          });

          analytics.deepEqual(window.ga.args[2], ['ec:setAction', 'purchase', {
            id: '5d4c7cb5',
            affiliation: undefined,
            revenue: 99.9,
            tax: 20.99,
            shipping: 13.99,
            coupon: undefined
          }]);
        });

        it('should send full refunded order data', function(){
          analytics.track('refunded order', { orderId: '780bc55' });

          analytics.assert(4 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[2], ['ec:setAction', 'refund', {
            id: '780bc55'
          }]);
          analytics.deepEqual(window.ga.args[3], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });

        it('should send partial refunded order data', function(){
          analytics.track('refunded order', {
            orderId: '780bc55',
            products: [{
              quantity: 1,
              sku: 'p-298'
            }, {
              quantity: 2,
              sku: 'p-299'
            }]
          });

          analytics.assert(6 == window.ga.args.length);
          analytics.deepEqual(window.ga.args[2], ['ec:addProduct', {
            id: 'p-298',
            quantity: 1,
          }]);
          analytics.deepEqual(window.ga.args[3], ['ec:addProduct', {
            id: 'p-299',
            quantity: 2,
          }]);
          analytics.deepEqual(window.ga.args[4], ['ec:setAction', 'refund', {
            id: '780bc55'
          }]);
          analytics.deepEqual(window.ga.args[5], ['send', 'event', 'EnhancedEcommerce', 'Push', {'nonInteraction': 1}]);
        });
      });
    });
  });

  describe('Classic', function(){
    var settings = {
      anonymizeIp: true,
      classic: true,
      domain: 'auto',
      enhancedLinkAttribution: true,
      ignoredReferrers: ['domain.com', 'www.domain.com'],
      siteSpeedSampleRate: 42,
      trackingId: 'UA-27033709-5'
    };

    beforeEach(function(){
      ga = new GA(settings);
      analytics.add(ga);
    });

    afterEach(function(){
      ga.reset();
    });

    describe('before loading', function(){
      beforeEach(function(){
        analytics.stub(ga, 'load');
      });

      describe('#initialize', function(){
        it('should create window._gaq', function(){
          analytics.assert(!window._gaq);
          analytics.initialize();
          analytics.page();
          analytics.assert(window._gaq instanceof Array);
        });

        it('should push the tracking id', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window._gaq[0], ['_setAccount', settings.trackingId]);
        });

        it('should set allow linker', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window._gaq[1], ['_setAllowLinker', true]);
        });

        it('should set anonymize ip', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window._gaq[2], ['_gat._anonymizeIp']);
        });

        it('should set domain name', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window._gaq[3], ['_setDomainName', settings.domain]);
        });

        it('should set site speed sample rate', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window._gaq[4], ['_setSiteSpeedSampleRate', settings.siteSpeedSampleRate]);
        });

        it('should set enhanced link attribution', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window._gaq[5], ['_require', 'inpage_linkid', 'http://www.google-analytics.com/plugins/ga/inpage_linkid.js']);
        });

        it('should set ignored referrers', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window._gaq[6], ['_addIgnoredRef', settings.ignoredReferrers[0]]);
          analytics.deepEqual(window._gaq[7], ['_addIgnoredRef', settings.ignoredReferrers[1]]);
        });
      });
    });

    describe('loading', function(){
      it('should load', function(done){
        analytics.load(ga, done);
      });
    });

    describe('after loading', function(){
      beforeEach(function(done){
        analytics.once('ready', done);
        analytics.initialize();
        analytics.page();
      });

      describe('#page', function(){
        beforeEach(function(){
          analytics.stub(window._gaq, 'push');
        });

        it('should send a page view', function(){
          analytics.page();
          analytics.called(window._gaq.push, ['_trackPageview', window.location.pathname]);
        });

        it('should send a path', function(){
          analytics.page({ path: '/path' });
          analytics.called(window._gaq.push, ['_trackPageview', '/path']);
        });

        it('should send the query if its included', function(){
          ga.options.includeSearch = true;
          analytics.page({ path: '/path', search: '?q=1' });
          analytics.called(window._gaq.push, ['_trackPageview', '/path?q=1']);
        });

        it('should track a named page', function(){
          analytics.page('Name');
          analytics.called(window._gaq.push, ['_trackEvent', 'All', 'Viewed Name Page', undefined, 0, true]);
        });

        it('should track a named page with a category', function(){
          analytics.page('Category', 'Name');
          analytics.called(window._gaq.push, ['_trackEvent', 'Category', 'Viewed Category Name Page', undefined, 0, true]);
        });

        it('should track a categorized page', function(){
          analytics.page('Category', 'Name');
          analytics.called(window._gaq.push, ['_trackEvent', 'Category', 'Viewed Category Page', undefined, 0, true]);
        });

        it('should not track a named or categorized page when the option is off', function(){
          ga.options.trackNamedPages = false;
          ga.options.trackCategorizedPages = false;
          analytics.page('Name');
          analytics.page('Category', 'Name');
          analytics.calledTwice(window._gaq.push);
        });
      });

      describe('#track', function(){
        beforeEach(function(){
          analytics.stub(window._gaq, 'push');
        });

        it('should send an event', function(){
          analytics.track('event');
          analytics.called(window._gaq.push, ['_trackEvent', 'All', 'event', undefined, 0, false]);
        });

        it('should send a category property', function(){
          analytics.track('event', { category: 'category' });
          analytics.called(window._gaq.push, ['_trackEvent', 'category', 'event', undefined, 0, false]);
        });

        it('should send a stored category', function(){
          analytics.page('category');
          analytics.track('event', { category: 'category' });
          analytics.called(window._gaq.push, ['_trackEvent', 'category', 'event', undefined, 0, false]);
        });

        it('should send a label property', function(){
          analytics.track('event', { label: 'label' });
          analytics.called(window._gaq.push, ['_trackEvent', 'All', 'event', 'label', 0, false]);
        });

        it('should send a rounded value property', function(){
          analytics.track('event', { value: 1.1 });
          analytics.called(window._gaq.push, ['_trackEvent', 'All', 'event', undefined, 1, false]);
        });

        it('should prefer a rounded revenue property', function(){
          analytics.track('event', { revenue: 9.99 });
          analytics.called(window._gaq.push, ['_trackEvent', 'All', 'event', undefined, 10, false]);
        });

        it('should send a non-interaction property', function(){
          analytics.track('event', { nonInteraction: 1 });
          analytics.called(window._gaq.push, ['_trackEvent', 'All', 'event', undefined, 0, true]);
        });

        it('should send a non-interaction option', function(){
          analytics.track('event', {}, { 'Google Analytics': { nonInteraction: 1 } });
          analytics.called(window._gaq.push, ['_trackEvent', 'All', 'event', undefined, 0, true]);
        });

      });

      describe('ecommerce', function(){
        beforeEach(function(){
          analytics.stub(window._gaq, 'push');
        });

        it('should send simple ecommerce data', function(){
          analytics.track('completed order', { orderId: '078781c7' });
          analytics.assert(3 == window._gaq.push.args.length);
          analytics.assert('_addTrans' == window._gaq.push.args[0][0][0]);
          analytics.deepEqual(['_set', 'currencyCode', 'USD'], window._gaq.push.args[1][0]);
          analytics.assert('_trackTrans' == window._gaq.push.args[2][0][0]);
        });

        it('should send ecommerce data', function(){
          analytics.track('completed order', {
            orderId: 'af5ccd73',
            total: 99.99,
            shipping: 13.99,
            tax: 20.99,
            products: [{
              quantity: 1,
              price: 24.75,
              name: 'my product',
              sku: 'p-298'
            }, {
              quantity: 3,
              price: 24.75,
              name: 'other product',
              sku: 'p-299'
            }]
          });

          analytics.deepEqual(window._gaq.push.args[0], [[
            '_addTrans',
            'af5ccd73',
            undefined,
            99.99,
            20.99,
            13.99,
            null,
            null,
            null
          ]]);

          analytics.deepEqual(window._gaq.push.args[1], [[
            '_addItem',
            'af5ccd73',
            'p-298',
            'my product',
            undefined,
            24.75,
            1,
          ]]);

          analytics.deepEqual(window._gaq.push.args[2], [[
            '_addItem',
            'af5ccd73',
            'p-299',
            'other product',
            undefined,
            24.75,
            3
          ]]);

          analytics.deepEqual(window._gaq.push.args[3], [[
            '_set',
            'currencyCode',
            'USD'
          ]]);

          analytics.deepEqual(window._gaq.push.args[4], [[
            '_trackTrans'
          ]]);
        });

        it('should fallback to revenue', function(){
          analytics.track('completed order', {
            orderId: 'f2ffee5c',
            revenue: 9,
            shipping: 3,
            tax: 2,
            products: []
          });

          analytics.deepEqual(window._gaq.push.args[0], [[
            '_addTrans',
            'f2ffee5c',
            undefined,
            9,
            2,
            3,
            null,
            null,
            null
          ]]);
        });
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":42,"clear-env":4}],
222: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Google Tag Manager', function(){
  var GTM = plugin;
  var gtm;
  var analytics;
  var options = {
    containerId: 'GTM-K5F78L'
  };

  beforeEach(function(){
    analytics = new Analytics;
    gtm = new GTM(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(gtm);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    gtm.reset();
    sandbox();
  });

  it('should store the correct settings', function(){
    analytics.compare(GTM, integration('Google Tag Manager')
      .assumesPageview()
      .global('dataLayer')
      .option('containerId', '')
      .option('trackNamedPages', true)
      .option('trackCategorizedPages', true));
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(gtm, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    it('should push initial gtm.start event', function(){
      var dl = window.dataLayer;
      analytics.assert(dl);
      analytics.assert('gtm.js' == dl[0].event);
      analytics.assert('number' == typeof dl[0]['gtm.start']);
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.dataLayer, 'push');
      });

      it('should send event', function(){
        analytics.track('some-event');
        analytics.called(window.dataLayer.push, { event: 'some-event' });
      });

      it('should send event with properties', function(){
        analytics.track('event', { prop: true });
        analytics.called(window.dataLayer.push, { event: 'event', prop: true });
      });
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.dataLayer, 'push');
      });

      it('should not track unamed pages by default', function(){
        analytics.page();
        analytics.didNotCall(window.dataLayer.push);
      });

      it('should track unamed pages if enabled', function(){
        gtm.options.trackAllPages = true;
        analytics.page();
        analytics.called(window.dataLayer.push, {
          event: 'Loaded a Page',
          path: window.location.pathname,
          referrer: document.referrer,
          title: document.title,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname
        });
      });

      it('should track named pages by default', function(){
        analytics.page('Name');
        analytics.called(window.dataLayer.push, {
          event: 'Viewed Name Page',
          name: 'Name',
          path: window.location.pathname,
          referrer: document.referrer,
          title: document.title,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname
        });
      });

      it('should track named pages with a category added', function(){
        analytics.page('Category', 'Name')
        analytics.called(window.dataLayer.push, {
          event: 'Viewed Category Name Page',
          category: 'Category',
          name: 'Name',
          path: window.location.pathname,
          referrer: document.referrer,
          title: document.title,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname
        });
      });

      it('should track categorized pages by default', function(){
        analytics.page('Category', 'Name')
        analytics.called(window.dataLayer.push, {
          event: 'Viewed Category Name Page',
          category: 'Category',
          name: 'Name',
          path: window.location.pathname,
          referrer: document.referrer,
          title: document.title,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname
        });
      });

      it('should not track name or categorized pages if disabled', function(){
        gtm.options.trackNamedPages = false;
        gtm.options.trackCategorizedPages = false;
        analytics.page('Name');
        analytics.page('Category', 'Name');
        analytics.didNotCall(window.dataLayer.push);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":43,"clear-env":4}],
223: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');
var each = require('each');

describe('GoSquared', function(){
  var GoSquared = plugin;
  var gosquared;
  var analytics;
  var options = {
    siteToken: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    gosquared = new GoSquared(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(gosquared);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    gosquared.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(GoSquared, integration('GoSquared')
      .assumesPageview()
      .global('_gs')
      .option('siteToken', '')
      .option('anonymizeIP', false)
      .option('cookieDomain', null)
      .option('useCookies', true)
      .option('trackHash', false)
      .option('trackLocal', false)
      .option('trackParams', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(gosquared, 'load');
    });

    describe('#initialize', function(){
      it('should initialize the _gs global', function(){
        analytics.assert(!window._gs);
        analytics.initialize();
        analytics.page();
        analytics.assert(typeof window._gs === 'function');
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(gosquared.load);
      });

      it('should be configure the site token', function(){
        analytics.stub(window, '_gs');
        analytics.initialize();
        analytics.page();
        analytics.called(window._gs, options.siteToken);
      });

      it('should configure all defaults', function(){
        analytics.stub(window, '_gs');
        analytics.initialize();
        analytics.page();
        each(gosquared.options, function(name, value){
          if ('siteToken' == name) return;
          if (null == value) return;
          analytics.called(window._gs, 'set', name, value);
        });
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(gosquared, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window, '_gs');
      });

      it('should send a path and title', function(){
        analytics.page({ path: '/path', title: 'title' });
        analytics.called(window._gs, 'track', '/path', 'title');
      });

      it('should prefer a name', function(){
        analytics.page('name', { path: '/path', title: 'title' });
        analytics.called(window._gs, 'track', '/path', 'name');
      });

      it('should prefer a name and category', function(){
        analytics.page('category', 'name', { path: '/path', title: 'title' });
        analytics.called(window._gs, 'track', '/path', 'category name');
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window, '_gs');
      });

      it('should set an id', function(){
        analytics.identify('id');
        analytics.called(window._gs, 'set', 'visitorID', 'id');
      });

      it('should set traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window._gs, 'set', 'visitor', { trait: true });
      });

      it('should set an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window._gs, 'set', 'visitorID', 'id')
        analytics.called(window._gs, 'set', 'visitor', {
          userID: 'id',
          trait: true,
          id: 'id'
        });
      });

      it('should prefer an email for visitor name', function(){
        analytics.identify('id', {
          email: 'email@example.com',
          username: 'username'
        });
        analytics.called(window._gs, 'set', 'visitorName', 'email@example.com');
      });

      it('should also prefer a username for visitor name', function(){
        analytics.identify('id', { username: 'username' });
        analytics.called(window._gs, 'set', 'visitorName', 'username');
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window, '_gs');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window._gs, 'event', 'event', {});
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window._gs, 'event', 'event', { property: true });
      });
    });

    describe('ecommerce', function(){
      beforeEach(function(){
        analytics.stub(window, '_gs');
      });

      it('should send a transaction', function(){
        analytics.track('completed order', {
          id: 'a9173991',
          total: 90,
          quantity: 10,
          products: [{
            category: 'my category',
            name: 'my-product',
            quantity: 10,
            price: 9
          }]
        });

        analytics.called(window._gs, 'transaction', 'a9173991', {
          revenue: 90,
          track: true
        }, [{
          name: 'my-product',
          category: 'my category',
          quantity: 10,
          price: 9
        }]);
      })
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":44,"clear-env":4,"each":11}],
224: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');
var each = require('each');

describe('Heap', function(){
  var Heap = plugin;
  var heap;
  var analytics;
  var options = {
    appId: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    heap = new Heap(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(heap);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    heap.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Heap, integration('Heap')
      .assumesPageview()
      .global('heap')
      .global('_heapid')
      .option('appId', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(heap, 'load');
    });

    describe('#initialize', function(){
      it('should create window.heap', function(){
        analytics.assert(!window.heap);
        analytics.initialize();
        analytics.page();
        analytics.assert(window.heap);
      });

      it('should stub window.heap with the right methods', function(){
        var methods = ['identify', 'track'];
        analytics.assert(!window.heap);
        analytics.initialize();
        analytics.page();
        each(methods, function(method){
          analytics.assert(window.heap[method]);
        });
      });

      it('should set window._heapid', function(){
        analytics.assert(!window._heapid);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._heapid === options.appId);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(heap.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(heap, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.heap, 'identify');
      });

      it('should send traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window.heap.identify, { trait: true });
      });

      it('should send username as handle', function(){
        analytics.identify({ username: 'username' });
        analytics.called(window.heap.identify, { handle: 'username' });
      });

      it('should send id as handle', function(){
        analytics.identify('id');
        analytics.called(window.heap.identify, { handle: 'id', id: 'id' });
      })

      it('should prefer username', function(){
        analytics.identify('id', { username: 'baz' });
        analytics.called(window.heap.identify, { handle: 'baz', id: 'id' });
      })
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.heap, 'track');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.heap.track, 'event');
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window.heap.track, 'event', { property: true });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":45,"clear-env":4,"each":11}],
225: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Hellobar', function(){
  var Hellobar = plugin;
  var hellobar;
  var analytics;
  var options = {
    apiKey: 'bb900665a3090a79ee1db98c3af21ea174bbc09f'
  };

  beforeEach(function(){
    analytics = new Analytics;
    hellobar = new Hellobar(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(hellobar);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    hellobar.reset();
    sandbox();
  });

  after(function(){
    reset();
  });

  it('should have the right settings', function(){
    analytics.compare(Hellobar, integration('Hello Bar')
      .assumesPageview()
      .global('_hbq')
      .option('apiKey', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(hellobar, 'load');
    });

    afterEach(function(){
      reset();
    });

    describe('#initialize', function(){
      it('should create the window._hbq object', function(){
        analytics.assert(typeof(window._hbq) === 'undefined');
        analytics.initialize();
        analytics.page();
        analytics.assert(window._hbq);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(hellobar.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(hellobar, done);
    });
  });
});

function reset() {
  var el = document.getElementById('hellobar_container');
  if (el) el.parentNode.removeChild(el);
}
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":46,"clear-env":4}],
226: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('HitTail', function(){
  var HitTail = plugin;
  var hittail;
  var analytics;
  var options = {
    siteId: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    hittail = new HitTail(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(hittail);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    hittail.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(HitTail, integration('HitTail')
      .assumesPageview()
      .global('htk')
      .option('siteId', ''));
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(hittail, done);
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":47,"clear-env":4}],
227: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('HubSpot', function(){
  var HubSpot = plugin;
  var hubspot;
  var analytics;
  var options = {
    portalId: 62515
  };

  beforeEach(function(){
    analytics = new Analytics;
    hubspot = new HubSpot(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(hubspot);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    hubspot.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(HubSpot, integration('HubSpot')
      .assumesPageview()
      .global('_hsq')
      .option('portalId', null));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(hubspot, 'load');
    });

    describe('#initialize', function(){
      it('should create window._hsq', function(){
        analytics.assert(!window._hsq);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._hsq instanceof Array);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(hubspot, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._hsq, 'push');
      });

      it('should not send traits without an email', function(){
        analytics.identify('id');
        analytics.didNotCall(window._hsq.push);
      });

      it('should send traits with an email', function(){
        analytics.identify({ email: 'name@example.com' });
        analytics.called(window._hsq.push, ['identify', { email: 'name@example.com' }]);
      });

      it('should send an id and traits with an email', function(){
        analytics.identify('id', { email: 'name@example.com' });
        analytics.called(window._hsq.push, ['identify', {
          id: 'id',
          email: 'name@example.com'
        }]);
      });

      it('should convert dates to milliseconds', function(){
        var date = new Date();
        analytics.identify({
          email: 'name@example.com',
          date: date
        });
        analytics.called(window._hsq.push, ['identify', {
          email: 'name@example.com',
          date: date.getTime()
        }]);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._hsq, 'push');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window._hsq.push, ['trackEvent', 'event', {}]);
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window._hsq.push, ['trackEvent', 'event', { property: true }]);
      });

      it('should convert dates to milliseconds', function(){
        var date = new Date();
        var ms = date.getTime();

        analytics.track('event', { date: date });
        analytics.called(window._hsq.push, ['trackEvent', 'event', { date: ms }]);
      });
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window._hsq, 'push');
      });

      it('should send a page view', function(){
        analytics.page();
        analytics.called(window._hsq.push, ['_trackPageview']);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":48,"clear-env":4}],
228: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Improvely', function(){
  var Improvely = plugin;
  var improvely;
  var analytics;
  var options = {
    domain: 'demo',
    projectId: 1
  };

  beforeEach(function(){
    analytics = new Analytics;
    improvely = new Improvely(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(improvely);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    improvely.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Improvely, integration('Improvely')
      .assumesPageview()
      .global('_improvely')
      .global('improvely')
      .option('domain', '')
      .option('projectId', null));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(improvely, 'load');
    });

    describe('#initialize', function(){
      it('should create window._improvely', function(){
        analytics.assert(!window._improvely);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._improvely instanceof Array);
      });

      it('should create window.improvely', function(){
        analytics.assert(!window.improvely);
        analytics.initialize();
        analytics.page();
        analytics.assert(window.improvely);
      });

      it('should init with a domain and project id', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._improvely[0], ['init', options.domain, options.projectId]);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(improvely.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(improvely, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.improvely, 'label');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window.improvely.label, 'id');
      });

      it('should not send if id is empty', function(){
        analytics.identify();
        analytics.didNotCall(window.improvely.label);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.improvely, 'goal');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.improvely.goal, { type: 'event' });
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window.improvely.goal, {
          type: 'event',
          property: true
        });
      });

      it('should alias revenue to amount', function(){
        analytics.track('event', { revenue: 42.99 });
        analytics.called(window.improvely.goal, {
          type: 'event',
          amount: 42.99
        });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":49,"clear-env":4}],
229: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('InsideVault', function(){
  var InsideVault = plugin;
  var iv;
  var analytics;
  var options = {
    clientId: 'test17',
    domain: 'testdomain.com',
    events: {
      'sign up': 'event1',
      'completed order': 'event2'
    }
  };

  beforeEach(function(){
    analytics = new Analytics;
    iv = new InsideVault(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(iv);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    iv.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(InsideVault, integration('InsideVault')
      .global('_iva')
      .option('clientId', '')
      .option('domain', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(iv, 'load');
    });

    describe('#initialize', function(){
      it('should create window._iva and call load', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(window._iva instanceof Array);
        analytics.called(iv.load);
      });

      it('should pass in clientId', function(){
        window._iva = [];
        analytics.stub(window._iva, 'push');
        analytics.initialize();
        analytics.page();
        analytics.called(window._iva.push, ['setClientId', iv.options.clientId]);
      });

      it('should pass in userId', function(){
        window._iva = [];
        analytics.stub(window._iva, 'push');
        analytics.identify('user-id');
        analytics.initialize();
        analytics.page();
        analytics.called(window._iva.push, ['setUserId', 'user-id']);
      });

      it('should pass in domain if present', function(){
        window._iva = [];
        analytics.stub(window._iva, 'push');
        analytics.initialize();
        analytics.page();
        analytics.called(window._iva.push, ['setDomain', iv.options.domain]);
      });

      it('should not pass in domain if blank', function(){
        window._iva = [];
        iv.options.domain = null;
        analytics.stub(window._iva, 'push');
        analytics.initialize();
        analytics.page();
        analytics.didNotCall(window._iva.push, ['setDomain', iv.options.domain]);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(iv, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window._iva, 'push');
      });

      it('should send "click" event', function(){
        analytics.page();
        analytics.called(window._iva.push, ['trackEvent', 'click']);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._iva, 'push');
      });

      it('should track an event', function(){
        analytics.track('sign up');
        analytics.called(window._iva.push, ['trackEvent', 'event1', 0, '']);
      });

      it('should track an event with revenue', function(){
        analytics.track('completed order', { revenue: '0.75' });
        analytics.called(window._iva.push, ['trackEvent', 'event2', 0.75, '']);
      });

      it('should track an event with value', function(){
        analytics.track('completed order', { value: 1.23 });
        analytics.called(window._iva.push, ['trackEvent', 'event2', 1.23, '']);
      });

      it('should track an event with revenue and order id', function(){
        analytics.track('completed order', { revenue: '89.7', orderId: 'abc123' });
        analytics.called(window._iva.push, ['trackEvent', 'event2', 89.7, 'abc123']);
      });

      it('should track an event with userId and orderId, using orderId', function(){
        analytics.identify('id');
        analytics.track('completed order', { orderId: 'abc123' });
        analytics.called(window._iva.push, ['trackEvent', 'event2', 0, 'abc123']);
      });

      it('should fall back to userId if no orderId', function(){
        analytics.identify('id');
        analytics.track('sign up');
        analytics.called(window._iva.push, ['trackEvent', 'event1', 0, 'id']);
      });

      it('should track multiple events', function(){
        iv.options.events = [
          { key: 'completed order', value: 'event1' },
          { key: 'completed order', value: 'event2' }
        ];

        window._iva = [];
        analytics.track('completed order', { orderId: 'id', revenue: 9.99 });
        analytics.assert.deepEqual(window._iva, [
          ['trackEvent', 'event1', 9.99, 'id'],
          ['trackEvent', 'event2', 9.99, 'id']
        ]);
      });

      it('should not track a "sale" event', function(){
        analytics.track('sale');
        analytics.didNotCall(window._iva.push);
      });

      it('should not track unmapped event', function(){
        analytics.track('event');
        analytics.didNotCall(window._iva.push);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":50,"clear-env":4}],
230: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Inspectlet', function(){
  var Inspectlet = plugin;
  var inspectlet;
  var analytics;
  var options = {
    wid: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    inspectlet = new Inspectlet(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(inspectlet);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    inspectlet.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Inspectlet, integration('Inspectlet')
      .assumesPageview()
      .global('__insp')
      .global('__insp_')
      .option('wid', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(inspectlet, 'load');
    });

    describe('#initialize', function(){
      it('should create the inspectlet queue', function(){
        analytics.assert(!window.__insp);
        analytics.initialize();
        analytics.page();
        analytics.assert(window.__insp);
      });

      it('should push the wid', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window.__insp, [['wid', options.wid]]);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(inspectlet.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(inspectlet, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.__insp, 'push');
      });

      it('should identify the user', function(){
        analytics.identify('userId', { email: 'email@example.com' });
        analytics.called(window.__insp.push, ['tagSession', {
          email: 'email@example.com',
          userid: 'userId'
        }]);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.__insp, 'push');
      });

      it('should tag the session', function(){
        analytics.track('event');
        analytics.called(window.__insp.push, ['tagSession', 'event']);
      });
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.__insp, 'push');
      });

      it('should call only on 2nd page', function(){
        analytics.didNotCall(window.__insp.push, ['virtualPage']);
        analytics.page();
        analytics.called(window.__insp.push, ['virtualPage']);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":51,"clear-env":4}],
231: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Intercom', function(){
  var Intercom = plugin;
  var intercom;
  var analytics;
  var options = {
    appId: '8cf9338df9625cbe6811a16d573a79b0c8a8fa86'
  };

  beforeEach(function(){
    analytics = new Analytics;
    intercom = new Intercom(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(intercom);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    intercom.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Intercom, integration('Intercom')
      .assumesPageview()
      .global('Intercom')
      .option('activator', '#IntercomDefaultWidget')
      .option('appId', '')
      .option('inbox', false));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(intercom, 'load');
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(intercom.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(intercom, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window, 'Intercom');
      });

      it('should call update on subsequent pageviews', function(){
        analytics.page();
        analytics.called(window.Intercom, 'update');
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window, 'Intercom');
      });

      it('should call boot the first time and update the second', function(){
        analytics.identify('id');
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          id: 'id'
        });

        analytics.identify('id');
        analytics.called(window.Intercom, 'update', {
          app_id: options.appId,
          user_id: 'id',
          id: 'id'
        });
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { email: 'email@example.com' });
        analytics.called(window.Intercom, 'boot', {
          email: 'email@example.com',
          app_id: options.appId,
          user_id: 'id',
          id: 'id'
        });
      });

      it('should send user name', function(){
        analytics.identify('id', { name: 'john doe' });
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          name: 'john doe',
          id: 'id'
        });
      });

      it('should send first and last as name', function(){
        analytics.identify('id', { firstName: 'john', lastName: 'doe' });
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          firstName: 'john',
          lastName: 'doe',
          name: 'john doe',
          id: 'id'
        });
      });

      it('should respect .name, .firstName and .lastName', function(){
        analytics.identify('id', { firstName: 'john', lastName: 'doe', name: 'baz' });
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          firstName: 'john',
          lastName: 'doe',
          name: 'baz',
          id: 'id'
        });
      });

      it('should send created_at as seconds', function(){
        var now = new Date;
        analytics.identify('id', { created: now });
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          created_at: Math.floor(now.getTime() / 1000),
          user_id: 'id',
          id: 'id'
        });
      });

      it('should convert dates', function(){
        var date = new Date();
        analytics.identify('id', {
          created: date,
          company: { created: date }
        });
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          created_at: Math.floor(date / 1000),
          company: { created_at: Math.floor(date / 1000) },
          id: 'id'
        });
      });

      it('should allow passing a user hash', function(){
        analytics.identify('id', {}, {
          Intercom: { userHash: 'x' }
        });
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          user_hash: 'x',
          id: 'id'
        });
      });

      it('should allow passing increments', function(){
        analytics.identify('id', {}, {
          Intercom: { increments: { number: 42 } }
        });
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          increments: { number: 42 },
          id: 'id'
        });
      });

      it('should send widget settings if the activator isnt the default one.', function(){
        intercom.options.activator = '#my-widget';
        analytics.identify('id');
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          id: 'id',
          widget: {
            activator: '#my-widget'
          }
        });
      });

      it('should not send activator if its the default one.', function(){
        analytics.identify('id');
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          id: 'id'
        });
      });

      it('should not fail when the company trait is a string', function () {
        analytics.identify('id', { company: 'string' });
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          id: 'id'
        });
      });

      it('should not fail when the company trait is a number', function () {
        analytics.identify('id', { company: 97 });
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          id: 'id'
        });
      });

      it('should carry over company traits set in group if a company trait exists', function() {
        analytics.group().traits({ foo: 'bar' });
        analytics.identify('id', { company: { name: 'name' }});
        analytics.called(window.Intercom, 'boot', {
          app_id: options.appId,
          user_id: 'id',
          id: 'id',
          company: {
            name: 'name',
            foo: 'bar'
          }
        });
      });
    });

    describe('#group', function(){
      beforeEach(function(){
        analytics.stub(window, 'Intercom');
      });

      it('should send an id', function(){
        analytics.group('id');
        analytics.called(window.Intercom, 'update', { company: { id: 'id' }});
      });

      it('should send an id and properties', function(){
        analytics.group('id', { name: 'Name' });
        analytics.called(window.Intercom, 'update', {
          company: {
            id: 'id',
            name: 'Name'
          }
        });
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window, 'Intercom');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.Intercom, 'trackEvent', 'event', {});
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":52,"clear-env":4}],
232: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Keen IO', function(){
  var Keen = plugin;
  var keen;
  var analytics;
  var options = {
    projectId: '53e40374e861700e79000002',
    writeKey: 'f474c11bcf5813fabc933d0a1f80ff2e1ac9ff1c9338dcf2707bbb8cf68971ae524b4cac8db5da549aa3383d499ed4a809e2b6294d1d093818d699495a4171dab3e6ad86e2c31d06627f27aadb8433f43c8f27f3e0354e6ea4c12f9da57ca9d8420b18c5e4f719286a0fae08914d9c44'
  };
  var readKey = 'e5cdee9b7395b315bd8cc635f3b04fc07561d4e42889fe1b6ac719a9a4b45732c746666d83ce8644c8b0f06b867166654f900b67b250adbc225befac4b3a2562729c2ebebfbf19b1d13f631c2ed0c9f8de0be7897eded88102abe4366c7906011dd480631ed9ba60cdef84f908abc852';

  beforeEach(function(){
    analytics = new Analytics;
    keen = new Keen(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(keen);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    keen.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Keen, integration('Keen IO')
      .global('Keen')
      .option('projectId', '')
      .option('readKey', '')
      .option('writeKey', '')
      .option('ipAddon', false)
      .option('uaAddon', false)
      .option('urlAddon', false)
      .option('referrerAddon', false)
      .option('trackNamedPages', true)
      .option('trackAllPages', false));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(keen, 'load');
    });

    describe('#initialize', function(){
      it('should create window.Keen', function(){
        analytics.assert(!window.Keen);
        analytics.initialize();
        analytics.page();
        analytics.assert(window.Keen);
      });

      it('should configure Keen', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(keen.client._config, {
          projectId: options.projectId,
          writeKey: options.writeKey,
          readKey: ''
        });
      });
    });
  });

  describe('loading', function(){
    beforeEach(function(){
      analytics.spy(keen, 'load');
    });

    it('should load slim version by default', function(done){
      analytics.load(keen, function(){
        analytics.assert(!window.Keen.Visualization);
        done();
      });
    });

    it('should load full version if you have a `readKey`', function(done){
      keen.options.readKey = readKey;
      analytics.load(keen, function(){
        analytics.assert(window.Keen.Visualization);
        done();
      });
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(keen.client, 'addEvent');
      });

      it('should not track anonymous pages by default', function(){
        analytics.page();
        analytics.didNotCall(keen.client.addEvent);
      });

      it('should track anonymous pages when the option is on', function(){
        keen.options.trackAllPages = true;
        analytics.page();
        analytics.called(keen.client.addEvent, 'Loaded a Page');
      });

      it('should track named pages by default', function(){
        analytics.page('Name');
        analytics.called(keen.client.addEvent, 'Viewed Name Page');
      });

      it('should track named pages with categories', function(){
        analytics.page('Category', 'Name');
        analytics.called(keen.client.addEvent, 'Viewed Category Name Page');
      });

      it('should track categorized pages by default', function(){
        analytics.page('Category', 'Name');
        analytics.called(keen.client.addEvent, 'Viewed Category Page');
      });

      it('should not track a named or categorized page when the option is off', function(){
        keen.options.trackNamedPages = false;
        keen.options.trackCategorizedPages = false;
        analytics.page('Name');
        analytics.page('Category', 'Name');
        analytics.didNotCall(keen.client.addEvent);
      });

      it('should pass properties to .addEvent', function(){
        var time = new Date();
        analytics.page('category', 'name', { prop: true }, { timestamp: time });
        analytics.called(keen.client.addEvent, 'Viewed category name Page', {
          prop: true,
          path: location.pathname,
          referrer: '',
          title: document.title,
          search: location.search,
          name: 'name',
          category: 'category',
          url: location.href,
          keen: {
            timestamp: time,
            addons: []
          }
        });
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(keen.client, 'addEvent');
      });

      it('should pass an id', function(){
        analytics.identify('id');
        var user = keen.client.client.globalProperties().user;
        analytics.deepEqual(user, { userId: 'id', traits: { id: 'id' } });
      });

      it('should pass a traits', function(){
        analytics.identify({ trait: true });
        var user = keen.client.client.globalProperties().user;
        analytics.deepEqual(user, { traits: { trait: true }});
      });

      it('should pass an id and traits', function(){
        analytics.identify('id', { trait: true });
        var user = keen.client.client.globalProperties().user;
        analytics.deepEqual(user, { userId: 'id', traits: { trait: true, id: 'id' }});
      });

      describe('addons', function(){
        it('should add ipAddon if enabled', function(){
          keen.options.ipAddon = true;
          analytics.identify('id');
          var props = keen.client.client.globalProperties();
          var addon = props.keen.addons[0];
          analytics.deepEqual(addon, {
            name: 'keen:ip_to_geo',
            input: { ip: 'ip_address' },
            output: 'ip_geo_info'
          });
          analytics.equal(props.ip_address, '${keen.ip}');
        });

        it('should add uaAddon if enabled', function(){
          keen.options.uaAddon = true;
          analytics.identify('id');
          var props = keen.client.client.globalProperties();
          var addon = props.keen.addons[0];
          analytics.deepEqual(addon, {
            name: 'keen:ua_parser',
            input: { ua_string: 'user_agent' },
            output: 'parsed_user_agent'
          });
          analytics.equal(props.user_agent, '${keen.user_agent}');
        });

        it('should add urlAddon if enabled', function(){
          keen.options.urlAddon = true;
          analytics.identify('id');
          var props = keen.client.client.globalProperties();
          var addon = props.keen.addons[0];
          analytics.deepEqual(addon, {
            name: 'keen:url_parser',
            input: { url: 'page_url' },
            output: 'parsed_page_url'
          });
          analytics.equal(props.page_url, document.location.href);
        });

        it('should add referrerAddon if enabled', function(){
          keen.options.referrerAddon = true;
          analytics.identify('id');
          var props = keen.client.client.globalProperties();
          var addon = props.keen.addons[0];
          analytics.deepEqual(addon, {
            name: 'keen:referrer_parser',
            input: {
              referrer_url: 'referrer_url',
              page_url: 'page_url'
            },
            output: 'referrer_info'
          });
          analytics.equal(props.referrer_url, document.referrer);
          analytics.equal(props.page_url, document.location.href);
        });
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(keen.client, 'addEvent');
      });

      it('should pass an event', function(){
        analytics.track('event');
        analytics.called(keen.client.addEvent, 'event');
      });

      it('should pass an event and properties', function(){
        var time = new Date();
        analytics.track('event', { property: true }, { timestamp: time });
        analytics.called(keen.client.addEvent, 'event', {
          property: true,
          keen: {
            timestamp: time,
            addons: []
          }
        });
      });

      describe('addons', function(){
        it('should add ipAddon if enabled', function(){
          keen.options.ipAddon = true;
          analytics.track('event');
          var props = keen.client.addEvent.args[0][1];
          var addon = props.keen.addons[0];
          analytics.deepEqual(addon, {
            name: 'keen:ip_to_geo',
            input: { ip: 'ip_address' },
            output: 'ip_geo_info'
          });
          analytics.equal(props.ip_address, '${keen.ip}');
        });

        it('should add uaAddon if enabled', function(){
          keen.options.uaAddon = true;
          analytics.track('event');
          var props = keen.client.addEvent.args[0][1];
          var addon = props.keen.addons[0];
          analytics.deepEqual(addon, {
            name: 'keen:ua_parser',
            input: { ua_string: 'user_agent' },
            output: 'parsed_user_agent'
          });
          analytics.equal(props.user_agent, '${keen.user_agent}');
        });

        it('should add urlAddon if enabled', function(){
          keen.options.urlAddon = true;
          analytics.track('event');
          var props = keen.client.addEvent.args[0][1];
          var addon = props.keen.addons[0];
          analytics.deepEqual(addon, {
            name: 'keen:url_parser',
            input: { url: 'page_url' },
            output: 'parsed_page_url'
          });
          analytics.equal(props.page_url, document.location.href);
        });

        it('should add referrerAddon if enabled', function(){
          keen.options.referrerAddon = true;
          analytics.track('event');
          var props = keen.client.addEvent.args[0][1];
          var addon = props.keen.addons[0];
          analytics.deepEqual(addon, {
            name: 'keen:referrer_parser',
            input: {
              referrer_url: 'referrer_url',
              page_url: 'page_url'
            },
            output: 'referrer_info'
          });
          analytics.equal(props.referrer_url, document.referrer);
          analytics.equal(props.page_url, document.location.href);
        });
      });

    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":53,"clear-env":4}],
233: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Kenshoo', function(){
  var Kenshoo = plugin;
  var kenshoo;
  var analytics;
  var options = {
    cid: 'd590cb3f-ec81-4da7-97d6-3013ec020455',
    subdomain: '1223'
  };

  beforeEach(function(){
    analytics = new Analytics;
    kenshoo = new Kenshoo(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(kenshoo);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    kenshoo.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Kenshoo, integration('Kenshoo')
      .global('k_trackevent')
      .option('cid', '')
      .option('subdomain', '')
      .option('events', []));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(kenshoo, 'load');
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(kenshoo.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(kenshoo, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window, 'k_trackevent');
      });

      it('should track custom events', function(){
        kenshoo.options.events = [ 'event' ];
        analytics.track('event', {
          revenue: '42',
          orderId: '84',
          coupon: 'promo',
          currency: 'EUR',
        });

        analytics.called(window.k_trackevent, [
          'id=' + options.cid,
          'type=conv',
          'val=42',
          'orderId=84',
          'promoCode=promo',
          'valueCurrency=EUR',
          'GCID=',
          'kw=',
          'product='
        ], options.subdomain);
      });

      it('should not track undefined events', function(){
        analytics.track('random', {
          revenue: '42',
          orderId: '84',
          coupon: 'promo',
          currency: 'EUR',
        });

        analytics.didNotCall(window.k_trackevent);
      });
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window, 'k_trackevent');
      });

      it('should not make any event calls', function(){
        analytics.page();
        analytics.didNotCall(window.k_trackevent);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":54,"clear-env":4}],
234: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('KISSmetrics', function () {
  var KISSmetrics = plugin;
  var kissmetrics;
  var analytics;
  var kissmetrics;
  var options = {
    apiKey: '67f57ae9d61a6981fa07d141bec8c6c37e8b88c7'
  };

  before(function(){
    // setup global that tell kissmetrics to not fire jsonp breaking requests
    window.KM_DNT = true;
    window.KMDNTH = true;
  });

  beforeEach(function(){
    analytics = new Analytics;
    kissmetrics = new KISSmetrics(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(kissmetrics);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    kissmetrics.reset();
    sandbox();
  });

  it('should have the right settings', function () {
    analytics.compare(KISSmetrics, integration('KISSmetrics')
      .assumesPageview()
      .global('_kmq')
      .global('KM')
      .global('_kmil')
      .option('apiKey', '')
      .option('trackNamedPages', true)
      .option('trackCategorizedPages', true)
      .option('prefixProperties', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(kissmetrics, 'load');
      analytics.initialize();
      analytics.page();
    });

    describe('#initialize', function(){
      it('should create window._kmq', function () {
        analytics.assert(window._kmq instanceof Array);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(kissmetrics, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    it('should create window.KM', function () {
      analytics.assert(window.KM);
    });

    describe('#page', function () {
      beforeEach(function () {
        analytics.stub(window._kmq, 'push');
        analytics.stub(window.KM, 'pageView');
      });

      afterEach(function(){
        // set back to defaults
        window.KM_SKIP_PAGE_VIEW = 1;
      });

      it('should record normal kissmetrics page views when the option is set', function () {
        window.KM_SKIP_PAGE_VIEW = false;
        analytics.page();
        analytics.didNotCall(window._kmq.push);
      });

      it('should call `KM.pageView()` when KM_SKIP_PAGE_VIEW is not set', function () {
        window.KM_SKIP_PAGE_VIEW = false;
        analytics.page();
        analytics.calledOnce(window.KM.pageView);
      });

      it('should not call `KM.pageView()` when KM_SKIP_PAGE_VIEW is set', function () {
        window.KM_SKIP_PAGE_VIEW = 1;
        analytics.page();
        analytics.didNotCall(window.KM.pageView);
      });

      it('should track named pages by default', function () {
        analytics.page('Name', {
          title: document.title,
          url: window.location.href
        });
        analytics.called(window._kmq.push, ['record', 'Viewed Name Page', {
          'Viewed Name Page - title': document.title,
          'Viewed Name Page - url': window.location.href,
          'Viewed Name Page - path': window.location.pathname,
          'Viewed Name Page - referrer': document.referrer,
          'Viewed Name Page - search': window.location.search,
          'Viewed Name Page - name': 'Name'
        }]);
      });

      it('should not track a named page when the option is off, but should track category', function () {
        kissmetrics.options.trackNamedPages = false;
        analytics.page('Category', 'Name');
        analytics.calledOnce(window._kmq.push);
        analytics.called(window._kmq.push, ['record', 'Viewed Category Page', {
          'Viewed Category Page - path': window.location.pathname,
          'Viewed Category Page - referrer': document.referrer,
          'Viewed Category Page - title': document.title,
          'Viewed Category Page - search': window.location.search,
          'Viewed Category Page - name': 'Name',
          'Viewed Category Page - category': 'Category',
          'Viewed Category Page - url': window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname + window.location.search
        }]);
      });

      it('should not track a categorized page when the option is off, but should track name', function () {
        kissmetrics.options.trackCategorizedPages = false;
        analytics.page('Category', 'Name');
        analytics.calledOnce(window._kmq.push);
        analytics.called(window._kmq.push, ['record', 'Viewed Category Name Page', {
          'Viewed Category Name Page - title': document.title,
          'Viewed Category Name Page - url': window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname + window.location.search,
          'Viewed Category Name Page - path': window.location.pathname,
          'Viewed Category Name Page - referrer': document.referrer,
          'Viewed Category Name Page - search': window.location.search,
          'Viewed Category Name Page - name': 'Name',
          'Viewed Category Name Page - category': 'Category'
        }]);
      });

      it('should track both named and categorized page when options are on', function () {
        analytics.page('Category', 'Name');
        analytics.calledTwice(window._kmq.push);
        // TODO: maybe calledFirst(method, args)?
        analytics.called(window._kmq.push, ['record', 'Viewed Category Name Page', {
          'Viewed Category Name Page - title': document.title,
          'Viewed Category Name Page - url': window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname + window.location.search,
          'Viewed Category Name Page - path': window.location.pathname,
          'Viewed Category Name Page - referrer': document.referrer,
          'Viewed Category Name Page - search': window.location.search,
          'Viewed Category Name Page - name': 'Name',
          'Viewed Category Name Page - category': 'Category'
        }]);
        analytics.called(window._kmq.push, ['record', 'Viewed Category Page', {
          'Viewed Category Page - title': document.title,
          'Viewed Category Page - url': window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname + window.location.search,
          'Viewed Category Page - path': window.location.pathname,
          'Viewed Category Page - referrer': document.referrer,
          'Viewed Category Page - search': window.location.search,
          'Viewed Category Page - name': 'Name',
          'Viewed Category Page - category': 'Category'
        }]);
      });

      it('should not prefixProperties if option is off', function () {
        kissmetrics.options.prefixProperties = false;
        analytics.page('Name', {
          title: document.title,
          url: window.location.href
        });
        analytics.called(window._kmq.push, ['record', 'Viewed Name Page', {
          'title': document.title,
          'url': window.location.href,
          'name': 'Name',
          'path': window.location.pathname,
          'referrer': document.referrer,
          'search': window.location.search
        }]);
      });
    });

    describe('#identify', function () {
      beforeEach(function () {
        analytics.stub(window._kmq, 'push');
      });

      it('should send an id', function () {
        analytics.identify('id');
        analytics.called(window._kmq.push, ['identify', 'id']);
      });

      it('should send traits', function () {
        analytics.identify({ trait: true });
        analytics.called(window._kmq.push, ['set', { trait: true }]);
      });

      it('should send an id and traits', function () {
        analytics.identify('id', { trait: true });
        analytics.called(window._kmq.push, ['identify', 'id']);
        analytics.called(window._kmq.push, ['set', { trait: true, id: 'id' }]);
      });
    });

    describe('#track', function () {
      beforeEach(function () {
        analytics.stub(window._kmq, 'push');
      });

      it('should send an event', function () {
        analytics.track('event');
        analytics.called(window._kmq.push, ['record', 'event', {}]);
      });

      it('should send an event and properties', function () {
        analytics.track('event', { property: true });
        analytics.called(window._kmq.push, ['record', 'event', {
          'event - property': true
        }]);
      });

      it('should alias revenue to "Billing Amount"', function () {
        analytics.track('event', { revenue: 9.99 });
        analytics.called(window._kmq.push, ['record', 'event', {
          'Billing Amount': 9.99
        }]);
      });
    });

    describe('#alias', function () {
      beforeEach(function () {
        analytics.stub(window._kmq, 'push');
      });

      it('should send a new id', function () {
        analytics.alias('new');
        analytics.called(window._kmq.push, ['alias', 'new', undefined]);
      });

      it('should send a new and old id', function () {
        analytics.alias('new', 'old');
        analytics.called(window._kmq.push, ['alias', 'new', 'old']);
      });
    });

    describe('ecommerce', function(){
      beforeEach(function(){
        analytics.stub(window._kmq, 'push');
        analytics.stub(window.KM, 'set');
        analytics.stub(window.KM, 'ts', Function('return 0'));
      });

      it('should track viewed product', function(){
        analytics.track('viewed product', {
          sku: 1,
          name: 'item',
          category: 'category',
          price: 9
        });
        analytics.called(window._kmq.push, ['record', 'viewed product', {
          'viewed product - sku': 1,
          'viewed product - name': 'item',
          'viewed product - category': 'category',
          'viewed product - price': 9
        }]);
      });

      it('should track added product', function(){
        analytics.track('added product', {
          sku: 1,
          name: 'item',
          category: 'category',
          price: 9,
          quantity: 2
        });
        analytics.called(window._kmq.push, ['record', 'added product', {
          'added product - sku': 1,
          'added product - name': 'item',
          'added product - category': 'category',
          'added product - price': 9,
          'added product - quantity': 2
        }]);
      });

      it('should track completed order', function(){
        analytics.track('completed order', {
          orderId: '12074d48',
          tax: 16,
          total: 166,
          products: [{
            sku: '40bcda73',
            name: 'my-product',
            price: 75,
            quantity: 1
          }, {
            sku: '64346fc6',
            name: 'other-product',
            price: 75,
            quantity: 1
          }]
        });

        analytics.assert(window._kmq.push.args[0], ['record', 'completed order', {
          'completed order - sku': '12074d48',
          'completed order - total': 166
        }]);
      });

      it('should add items once KM is loaded', function(){
        analytics.track('completed order', {
          orderId: '12074d48',
          tax: 16,
          products: [{
            sku: '40bcda73',
            name: 'my-product',
            category: 'my-category',
            price: 75,
            quantity: 1
          }, {
            sku: '64346fc6',
            name: 'other-product',
            category: 'my-other-category',
            price: 75,
            quantity: 1
          }]
        });

        // TODO: what is happening here?
        var fn = window._kmq.push.args[1][0];
        analytics.calledTwice(window._kmq.push);
        analytics.assert('function' == typeof fn);
        fn();

        analytics.assert(window.KM.set.args[0][0], {
          'completed order - sku': '40bcda73',
          'completed order - name': 'my-product',
          'completed order - category': 'my-category',
          'completed order - price': 75,
          'completed order - quantity': 1,
          _t: 0,
          _d: 1
        });

        analytics.assert(window.KM.set.args[1][0], {
          'completed order - sku': '64346fc6',
          'completed order - name': 'other-product',
          'completed order - category': 'my-other-category',
          'completed order - price': 75,
          'completed order - quantity': 1,
          _t: 1,
          _d: 1
        });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":55,"clear-env":4}],
235: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var tick = require('next-tick');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Klaviyo', function(){
  var Klaviyo = plugin;
  var klaviyo;
  var analytics;
  var options = {
    apiKey: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    klaviyo = new Klaviyo(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(klaviyo);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    klaviyo.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Klaviyo, integration('Klaviyo')
      .assumesPageview()
      .global('_learnq')
      .option('apiKey', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(klaviyo, 'load');
    });

    describe('#initialize', function(){
      it('should create window._learnq', function(){
        analytics.assert(!window._learnq);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._learnq instanceof Array);
      });

      it('should push an api key', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._learnq, [['account', options.apiKey]]);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(klaviyo.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(klaviyo, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._learnq, 'push');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window._learnq.push, ['identify', { $id: 'id' }]);
      });

      it('shouldnt send just traits', function(){
        analytics.identify({ trait: true });
        analytics.didNotCall(window._learnq.push);
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window._learnq.push, ['identify', { $id: 'id', trait: true }]);
      });

      it('should alias traits', function(){
        analytics.identify('id', {
          email: 'name@example.com',
          firstName: 'first',
          lastName: 'last',
          phone: 'phone',
          title: 'title'
        });
        analytics.called(window._learnq.push, ['identify', {
          $id: 'id',
          $email: 'name@example.com',
          $first_name: 'first',
          $last_name: 'last',
          $phone_number: 'phone',
          $title: 'title'
        }]);
      });
    });

    describe('#group', function(){
      beforeEach(function(){
        analytics.stub(window._learnq, 'push');
      });

      it('should send a name', function(){
        analytics.group('id', { name: 'name' });
        analytics.called(window._learnq.push, ['identify', { $organization: 'name' }]);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._learnq, 'push');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window._learnq.push, ['track', 'event', {}]);
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window._learnq.push, ['track', 'event', { property: true }]);
      });

      it('should alias revenue to `$value`', function(){
        analytics.track('event', { revenue: 90 });
        analytics.called(window._learnq.push, ['track', 'event', { $value: 90 }]);
      })
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"next-tick":103,"./":56,"clear-env":4}],
236: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('LeadLander', function(){
  var LeadLander = plugin;
  var leadlander;
  var analytics;
  var options = {
    accountId: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    leadlander = new LeadLander(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(leadlander);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    leadlander.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(LeadLander, integration('LeadLander')
      .assumesPageview()
      .global('llactid')
      .global('trackalyzer')
      .option('accountId', null));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(leadlander, 'load');
    });

    describe('#initialize', function(){
      it('should set window.llactid', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(window.llactid === options.accountId);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(leadlander.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(leadlander, done);
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":57,"clear-env":4}],
237: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('LiveChat', function(){
  var LiveChat = plugin;
  var livechat;
  var analytics;
  var options = {
    license: '4293371'
  };

  beforeEach(function(){
    analytics = new Analytics;
    livechat = new LiveChat(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(livechat);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    livechat.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    var Test = integration('LiveChat')
      .assumesPageview()
      .global('__lc')
      .global('LC_API')
      .global('LC_Invite')
      .global('__lc_inited')
      .option('license', '');

    analytics.compare(LiveChat, Test);
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.identify({ email: 'email', name: 'name' });
      analytics.stub(livechat, 'load');
    });

    describe('#initialize', function(){
      it('should create window.__lc', function(){
        analytics.assert(!window.__lc);
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window.__lc, {
          license: options.license,
          group: 0,
          visitor: {
            name: 'name',
            email: 'email'
          }
        });
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(livechat, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.LC_API, 'set_custom_variables');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window.LC_API.set_custom_variables, [
          { name: 'id', value: 'id' },
          { name: 'User ID', value: 'id' }
        ]);
      });

      it('should send traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window.LC_API.set_custom_variables, [
          { name: 'trait', value: true }
        ]);
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.LC_API.set_custom_variables, [
          { name: 'trait', value: true },
          { name: 'id', value: 'id' },
          { name: 'User ID', value: 'id' }
        ]);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":58,"clear-env":4}],
238: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Lucky Orange', function(){
  var Lucky = plugin;
  var lucky;
  var analytics;
  var options = {
    siteId: '17181'
  };

  beforeEach(function(){
    analytics = new Analytics;
    lucky = new Lucky(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(lucky);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    lucky.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Lucky, integration('Lucky Orange')
      .assumesPageview()
      .global('_loq')
      .global('__wtw_lucky_site_id')
      .global('__wtw_lucky_is_segment_io')
      .global('__wtw_custom_user_data')
      .option('siteId', null));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(lucky, 'load');
    });

    describe('#initialize', function(){
      it('should create window._loq', function(){
        analytics.assert(!window._loq);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._loq instanceof Array);
      });

      it('should initialize the lucky variables', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(window.__wtw_lucky_site_id === options.siteId);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(lucky.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(lucky, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._loq, 'push');
      });

      it('should send name', function(){
        analytics.identify({ email: 'test@example.com' });
        analytics.deepEqual(window.__wtw_custom_user_data, { email: 'test@example.com' });
      });

      it('should send name', function(){
        analytics.identify({ name: 'test' });
        analytics.deepEqual(window.__wtw_custom_user_data, { name: 'test' });
      });

      it('should send traits', function(){
        analytics.identify('id', { name: 'test', email: 'test@example.com' });
        analytics.deepEqual(window.__wtw_custom_user_data, { id: 'id', name: 'test', email: 'test@example.com' });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":59,"clear-env":4}],
239: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var tick = require('next-tick');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Lytics', function(){
  var Lytics = plugin;
  var lytics;
  var analytics;
  var options = {
    cid: 'x',
    cookie: 'lytics_cookie'
  };

  beforeEach(function(){
    analytics = new Analytics;
    lytics = new Lytics(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(lytics);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    lytics.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Lytics, integration('Lytics')
      .global('jstag')
      .option('cid', '')
      .option('cookie', 'seerid')
      .option('delay', 2000)
      .option('sessionTimeout', 1800)
      .option('url', '//c.lytics.io'));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(lytics, 'load');
    });

    describe('#initialize', function(){
      it('should create window.jstag', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(window.jstag);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(lytics.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(lytics, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.jstag, 'send');
      });

      it('should call send', function(){
        analytics.page({ property: true });
        analytics.called(window.jstag.send, {
          property: true,
          path: window.location.pathname,
          referrer: document.referrer,
          title: document.title,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname + window.location.search
        });
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.jstag, 'send');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window.jstag.send, { _uid: 'id', id: 'id' });
      });

      it('should send traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window.jstag.send, { trait: true });
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.jstag.send, { _uid: 'id', trait: true, id: 'id' });
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.jstag, 'send');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.jstag.send, { _e: 'event' });
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window.jstag.send, { _e: 'event', property: true });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"next-tick":103,"./":60,"clear-env":4}],
240: [function(require, module, exports) {

var integration = require('analytics.js-integration');
var Analytics = require('analytics.js').constructor;
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');
var iso = require('to-iso-string');

describe('Mixpanel', function(){
  var Mixpanel = plugin;
  var mixpanel;
  var analytics;
  var options = {
    token: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    mixpanel = new Mixpanel(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(mixpanel);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    mixpanel.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Mixpanel, integration('Mixpanel')
      .global('mixpanel')
      .option('cookieName', '')
      .option('nameTag', true)
      .option('pageview', false)
      .option('people', false)
      .option('token', '')
      .option('trackAllPages', false)
      .option('trackNamedPages', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(mixpanel, 'load');
    });

    describe('#initialize', function(){
      it('should create window.mixpanel', function(){
        analytics.assert(!window.mixpanel);
        analytics.initialize();
        analytics.page();
        analytics.assert(window.mixpanel);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(mixpanel.load);
      });

      it('should lowercase increments', function(){
        mixpanel.options.increments = ['A', 'b', 'c_'];
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(mixpanel.options.increments, ['a', 'b', 'c_']);
      })
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(mixpanel, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.mixpanel, 'track');
      });

      it('should not track anonymous pages by default', function(){
        analytics.page();
        analytics.didNotCall(window.mixpanel.track);
      });

      it('should track anonymous pages when the option is on', function(){
        mixpanel.options.trackAllPages = true;
        analytics.page();
        analytics.called(window.mixpanel.track, 'Loaded a Page');
      });

      it('should track named pages by default', function(){
        analytics.page('Name');
        analytics.called(window.mixpanel.track, 'Viewed Name Page');
      });

      it('should track named pages with categories', function(){
        analytics.page('Category', 'Name');
        analytics.called(window.mixpanel.track, 'Viewed Category Name Page');
      });

      it('should track categorized pages by default', function(){
        analytics.page('Category', 'Name');
        analytics.called(window.mixpanel.track, 'Viewed Category Page');
      });

      it('should not track category pages when the option is off', function(){
        mixpanel.options.trackNamedPages = false;
        mixpanel.options.trackCategorizedPages = false;
        analytics.page('Name');
        analytics.page('Category', 'Name');
        analytics.didNotCall(window.mixpanel.track);
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.mixpanel, 'identify');
        analytics.stub(window.mixpanel, 'register');
        analytics.stub(window.mixpanel, 'name_tag');
        analytics.stub(window.mixpanel.people, 'set');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window.mixpanel.identify, 'id');
        analytics.called(window.mixpanel.register, { id: 'id' });
      });

      it('should send traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window.mixpanel.register, { trait: true });
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.mixpanel.identify, 'id');
        analytics.called(window.mixpanel.register, { trait: true, id: 'id' });
      });

      it('should use an id as a name tag', function(){
        analytics.identify('id');
        analytics.called(window.mixpanel.name_tag, 'id');
      });

      it('should prefer a username as a name tag', function(){
        analytics.identify('id', { username: 'username' });
        analytics.called(window.mixpanel.name_tag, 'username');
      });

      it('should prefer an email as a name tag', function(){
        analytics.identify('id', {
          username: 'username',
          email: 'name@example.com'
        });
        analytics.called(window.mixpanel.name_tag, 'name@example.com');
      });

      it('should send traits to Mixpanel People', function(){
        mixpanel.options.people = true;
        analytics.identify({ trait: true });
        analytics.called(window.mixpanel.people.set, { trait: true });
      });

      it('should alias traits', function(){
        var date = new Date();
        analytics.identify({
          created: date,
          email: 'name@example.com',
          firstName: 'first',
          lastName: 'last',
          lastSeen: date,
          name: 'name',
          username: 'username',
          phone: 'phone'
        });
        analytics.called(window.mixpanel.register, {
          $created: iso(date),
          $email: 'name@example.com',
          $first_name: 'first',
          $last_name: 'last',
          $last_seen: iso(date),
          $name: 'name',
          $username: 'username',
          $phone: 'phone'
        });
      });

      it('should alias traits to Mixpanel People', function(){
        mixpanel.options.people = true;
        var date = new Date();
        analytics.identify({
          created: date,
          email: 'name@example.com',
          firstName: 'first',
          lastName: 'last',
          lastSeen: date,
          name: 'name',
          username: 'username',
          phone: 'phone'
        });
        analytics.called(window.mixpanel.people.set, {
          $created: date,
          $email: 'name@example.com',
          $first_name: 'first',
          $last_name: 'last',
          $last_seen: date,
          $name: 'name',
          $username: 'username',
          $phone: 'phone'
        });
      });

      it('should remove .created_at', function(){
        mixpanel.options.people = true;
        var date = new Date();
        analytics.identify({
          created_at: date,
          email: 'name@example.com',
          firstName: 'first',
          lastName: 'last',
          lastSeen: date,
          name: 'name',
          username: 'username',
          phone: 'phone'
        });
        analytics.called(window.mixpanel.people.set, {
          $created: date,
          $email: 'name@example.com',
          $first_name: 'first',
          $last_name: 'last',
          $last_seen: date,
          $name: 'name',
          $username: 'username',
          $phone: 'phone'
        });
      })
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.mixpanel, 'track');
        analytics.stub(window.mixpanel.people, 'increment');
        analytics.stub(window.mixpanel.people, 'set');
        analytics.stub(window.mixpanel.people, 'track_charge');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.mixpanel.track, 'event');
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window.mixpanel.track, 'event', { property: true });
      });

      it('should send a revenue property to Mixpanel People', function(){
        mixpanel.options.people = true;
        analytics.track('event', { revenue: 9.99 });
        analytics.called(window.mixpanel.people.track_charge, 9.99);
      });

      it('should convert dates to iso strings', function(){
        var date = new Date();
        analytics.track('event', { date: date });
        analytics.called(window.mixpanel.track, 'event', { date: iso(date) });
      });

      it('should increment events that are in .increments option', function(){
        mixpanel.options.increments = [0, 'my event', 1];
        mixpanel.options.people = true;
        analytics.track('my event');
        analytics.called(window.mixpanel.people.increment, 'my event');
      });

      it('should should update people property if the event is in .increments', function(){
        mixpanel.options.increments = ['event'];
        mixpanel.options.people = true;
        analytics.track('event');
        var date = window.mixpanel.people.set.args[0][1];
        analytics.assert(date.getTime() == new Date().getTime());
        analytics.called(window.mixpanel.people.increment, 'event');
        analytics.called(window.mixpanel.people.set, 'Last event', date);
      });

      it('should not convert arrays of simple types', function(){
        analytics.track('event', { array: ['a', 'b', 'c'] });
        analytics.called(window.mixpanel.track, 'event', { array: ['a', 'b', 'c'] });
        analytics.track('event', { array: [13, 28, 99] });
        analytics.called(window.mixpanel.track, 'event', { array: [13, 28, 99] });
      });

      it('should convert arrays of objects to lengths', function(){
        analytics.track('event', { array: [{'a': 'asdf'}, {'b': 'geasd'}, {'c' : 'asfee'}] });
        analytics.called(window.mixpanel.track, 'event', { array: 3 });
      });

      it('should remove mixpanel\'s reserved properties', function(){
        analytics.track('event', {
          distinct_id: 'string',
          ip: 'string',
          mp_name_tag: 'string',
          mp_note: 'string',
          token: 'string'
        });
        analytics.called(window.mixpanel.track, 'event', {});
      });
    });

    describe('#alias', function(){
      beforeEach(function(){
        analytics.stub(window.mixpanel, 'alias');
      });

      it('should send a new id', function(){
        analytics.alias('new');
        analytics.called(window.mixpanel.alias, 'new');
      });

      it('should send a new and old id', function(){
        analytics.alias('new', 'old');
        analytics.called(window.mixpanel.alias, 'new', 'old');
      });
    });
  });
});

}, {"analytics.js-integration":89,"analytics.js":267,"analytics.js-integration-tester":268,"./":61,"clear-env":4,"to-iso-string":156}],
241: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Mojn', function(){
  var Mojn = plugin;
  var mojn;
  var analytics;
  var options = {
    customerCode: 'EWBCK'
  };

  beforeEach(function(){
    analytics = new Analytics;
    mojn = new Mojn(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(mojn);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    mojn.reset();
    sandbox();
  });

  it('should have the correct default settings', function(){
    analytics.compare(Mojn, integration('Mojn')
      .global('_mojnTrack')
      .option('customerCode', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(mojn, 'load');
    });
    
    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(mojn.load);
      });

      it('should pass customerCode to tracker script', function(){
        window._mojnTrack = [];
        analytics.stub(window._mojnTrack, 'push');
        analytics.initialize();
        analytics.page();
        analytics.called(window._mojnTrack.push, { cid: options.customerCode });
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(mojn, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._mojnTrack, 'push');
      });

      it('should ignore if revenue is not set', function(){
        analytics.track('some sale', {});
        analytics.didNotCall(window._mojnTrack.push);
      });

      it('should track if revenue is set (no currency)', function(){
        analytics.track('some sale', { revenue: 42 });
        analytics.called(window._mojnTrack.push, { conv: '42' });
      });

      it('should track if revenue is set (with currency)', function(){
        analytics.track('some sale', { revenue: 42, currency: 'DKK' });
        analytics.called(window._mojnTrack.push, { conv: 'DKK42' });
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.spy(mojn, 'identify');
      });

      it('should ignore if missing email', function(){
        analytics.identify({ anything: 'but an email' });
        var img = mojn.identify.returns[0];
        analytics.assert(null == img);
      });

      it('should track if email is set', function(){
        var email = 'test@test.mojn.com';
        analytics.identify({ email: email });
        var img = mojn.identify.returns[0];
        var expect = window.location.protocol + '//matcher.idtargeting.com/analytics.gif?cid=' + options.customerCode + '&_mjnctid=' + email;
        analytics.assert(expect == img.src);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":62,"clear-env":4}],
242: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Mouseflow', function(){
  var Mouseflow = plugin;
  var mouseflow;
  var analytics;
  var options = {
    apiKey: '093c80cf-1455-4ad6-b130-ce44cd25ca7c'
  };

  beforeEach(function(){
    analytics = new Analytics;
    mouseflow = new Mouseflow(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(mouseflow);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    mouseflow.reset();
    sandbox();
  });

  it('should have the correct settings', function(){
    analytics.compare(Mouseflow, integration('Mouseflow')
      .assumesPageview()
      .global('mouseflow')
      .global('_mfq')
      .option('apiKey', '')
      .option('mouseflowHtmlDelay', 0));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(mouseflow, 'load');
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(mouseflow.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(mouseflow, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    it('should set window.mouseflowHtmlDelay', function(){
      analytics.assert(0 == window.mouseflowHtmlDelay);
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.mouseflow, 'newPageView');
      });

      it('should call mouseflow.newPageView', function(){
        analytics.page();
        analytics.called(window.mouseflow.newPageView);
      });

      it('should not throw if its not a function', function(){
        window.mouseflow.newPageView = null;
        analytics.page();
      });

      it('should not throw if window.mouseflow is not an object', function(){
        window.mouseflow = null;
        analytics.page();
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._mfq, 'push');
      });

      it('should send id', function(){
        analytics.identify(123);
        analytics.called(window._mfq.push, ['setVariable', 'id', 123]);
      });

      it('should send traits', function(){
        analytics.identify({ a: 1 });
        analytics.called(window._mfq.push, ['setVariable', 'a', 1]);
      });

      it('should send id and traits', function(){
        analytics.identify(123, { a: 1 });
        analytics.called(window._mfq.push, ['setVariable', 'id', 123]);
        analytics.called(window._mfq.push, ['setVariable', 'a', 1]);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._mfq, 'push');
      });

      it('should send event', function(){
        analytics.track('event-name');
        analytics.called(window._mfq.push, ['setVariable', 'event', 'event-name']);
      });

      it('should send props', function(){
        analytics.track('event-name', { a: 1 });
        analytics.called(window._mfq.push, ['setVariable', 'event', 'event-name']);
        analytics.called(window._mfq.push, ['setVariable', 'a', 1]);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":63,"clear-env":4}],
243: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('MouseStats', function(){
  var MouseStats = plugin;
  var mousestats;
  var analytics;
  var options = {
    accountNumber: '5532375730335616295'
  };

  beforeEach(function(){
    analytics = new Analytics;
    mousestats = new MouseStats(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(mousestats);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    mousestats.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(MouseStats, integration('MouseStats')
      .assumesPageview()
      .global('msaa')
      .global('MouseStatsVisitorPlaybacks')
      .option('accountNumber', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(mousestats, 'load');
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(mousestats.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(mousestats, done);
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":64,"clear-env":4}],
244: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Navilytics', function(){
  var Navilytics = plugin;
  var navilytics;
  var analytics;
  var settings;

  beforeEach(function(){
    settings = {
      memberId: '1042',
      projectId: '73'
    };
    analytics = new Analytics;
    navilytics = new Navilytics(settings);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(navilytics);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    navilytics.reset();
  });

  it('should have the right settings', function(){
    analytics.compare(Navilytics, integration('Navilytics')
      .assumesPageview()
      .global('__nls')
      .option('memberId', '')
      .option('projectId', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(navilytics, 'load');
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(navilytics.load);
      });

      it('should create window.__nls', function(){
        analytics.assert(null == window.__nls);
        analytics.initialize();
        analytics.page();
        analytics.deepEqual([], window.__nls);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(navilytics, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.__nls, 'push');
      });

      it('should tag the recording', function(){
        analytics.track('event');
        analytics.called(window.__nls.push, ['tagRecording', 'event']);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":65,"clear-env":4}],
245: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var tick = require('next-tick');
var once = require('once');
var when = require('when');
var plugin = require('./');
var sandbox = require('clear-env');
var extend = require('extend');

describe('Olark', function(){
  var Olark = plugin;
  var olark;
  var analytics;
  var options = {
    siteId: '5798-949-10-1692'
  };

  beforeEach(function(){
    analytics = new Analytics;
    olark = new Olark(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(olark);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    sandbox();
  });

  after(function(){
    olark.reset();
  });

  it('should have the right settings', function(){
    analytics.compare(Olark, integration('Olark')
      .assumesPageview()
      .global('olark')
      .option('identify', true)
      .option('page', true)
      .option('siteId', '')
      .option('track', false));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(window, 'olark');
      analytics.stub(olark, 'load');
    });

    afterEach(function(){
      olark.reset();
    });

    it('should pass in group id to `configure`', function(){
      olark.options.groupId = '-groupId-';
      analytics.initialize();
      analytics.page();
      analytics.called(window.olark, 'api.chat.setOperatorGroup', { group: '-groupId-' });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(olark, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    it('should create the window.olark variable', function(){
      analytics.assert(window.olark);
    });

    it('should set up expand/shrink listeners', function(done){
      expandThen(function(){
        analytics.assert(olark._open);
        shrinkThen(function(){
          analytics.assert(!olark._open);
          done();
        });
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window, 'olark');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window.olark, 'api.visitor.updateCustomFields', {
          id: 'id'
        });
      });

      it('should send traits', function(){
        analytics.identify(undefined, { trait: true });
        analytics.called(window.olark, 'api.visitor.updateCustomFields', {
          trait: true
        });
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.olark, 'api.visitor.updateCustomFields', {
          trait: true,
          id: 'id'
        });
      });

      it('should send an email', function(){
        analytics.identify(undefined, { email: 'name@example.com' });
        analytics.called(window.olark, 'api.visitor.updateEmailAddress', {
          emailAddress: 'name@example.com'
        });
      });

      it('shouldnt send an empty email', function(){
        analytics.identify('id');
        analytics.didNotCall(window.olark, 'api.visitor.updateEmailAddress');
      });

      it('should send a name', function(){
        analytics.identify(undefined, { name: 'first last' });
        analytics.called(window.olark, 'api.visitor.updateFullName', {
          fullName: 'first last'
        });
      });

      it('shouldnt send an empty name', function(){
        analytics.identify('id');
        analytics.didNotCall(window.olark, 'api.visitor.updateFullName');
      });

      it('should fallback to sending first and last name', function(){
        analytics.identify(undefined, {
          firstName: 'first',
          lastName: 'last'
        });
        analytics.called(window.olark, 'api.visitor.updateFullName', {
          fullName: 'first last'
        });
      });

      it('should fallback to sending only a first name', function(){
        analytics.identify(undefined, { firstName: 'first' });
        analytics.called(window.olark, 'api.visitor.updateFullName', {
          fullName: 'first'
        });
      });

      it('should send a phone number', function(){
        analytics.identify(undefined, { phone: 'phone' });
        analytics.called(window.olark, 'api.visitor.updatePhoneNumber', {
          phoneNumber: 'phone'
        });
      });

      it('shouldnt send an empty phone number', function(){
        analytics.identify('id');
        analytics.didNotCall(window.olark, 'api.visitor.updatePhoneNumber');
      });

      it('should us an id as a nickname', function(){
        analytics.identify('id');
        analytics.called(window.olark, 'api.chat.updateVisitorNickname', {
          snippet: 'id'
        });
      });

      it('should prefer a username as a nickname', function(){
        analytics.identify('id', { username: 'username' });
        analytics.called(window.olark, 'api.chat.updateVisitorNickname', {
          snippet: 'username'
        });
      });

      it('should prefer an email as a nickname', function(){
        analytics.identify('id', {
          username: 'username',
          email: 'name@example.com'
        });
        analytics.called(window.olark, 'api.chat.updateVisitorNickname', {
          snippet: 'name@example.com'
        });
      });

      it('should prefer a name as a nickname', function(){
        analytics.identify('id', {
          username: 'username',
          name: 'name'
        });
        analytics.called(window.olark, 'api.chat.updateVisitorNickname', {
          snippet: 'name'
        });
      });

      it('should prefer a name and email as a nickname', function(){
        analytics.identify('id', {
          username: 'username',
          name: 'name',
          email: 'name@example.com'
        });
        analytics.called(window.olark, 'api.chat.updateVisitorNickname', {
          snippet: 'name (name@example.com)'
        });
      });
    });

    describe('not open', function(){
      beforeEach(function(){
        analytics.spy(window, 'olark');
      });

      describe('#page', function(){
        it('should not send an event when the chat isnt open', function(){
          olark.options.page = true;
          analytics.page();
          analytics.didNotCall(window.olark);
        });
      });

      describe('#track', function(){
        it('should not send an event by default', function(){
          analytics.track('event');
          analytics.didNotCall(window.olark);
        });

        it('should not send an event when the chat isnt open', function(){
          olark.options.track = true;
          analytics.track('event');
          analytics.didNotCall(window.olark);
        });
      });
    });

    describe('open and not conversing', function(){
      beforeEach(function(done){
        expandThen(function(){
          analytics.spy(window, 'olark');
          done();
        });
      });

      afterEach(function(done){
        analytics.restore();
        shrinkThen(function(){
          done();
        });
      });

      describe('#page', function(){
        it('should not send a notification', function(){
          analytics.page();
          analytics.didNotCall(window.olark, 'api.chat.sendNotificationToOperator');
        });

        it('should not send a notification when the chat isnt open', function(){
          olark.options.page = true;
          analytics.page();
          analytics.didNotCall(window.olark, 'api.chat.sendNotificationToOperator');
        });
      });

      describe('#track', function(){
        it('should not send a notification by default', function(){
          analytics.track('event');
          analytics.didNotCall(window.olark, 'api.chat.sendNotificationToOperator');
        });

        it('should not send a notification when the chat isnt open', function(){
          olark.options.track = true;
          analytics.track('event');
          analytics.didNotCall(window.olark, 'api.chat.sendNotificationToOperator');
        });
      });
    });

    describe('open and conversing', function(){
      beforeEach(function(done){
        // force the chat to start, so the user is considered "conversing"
        window.olark('api.chat.sendMessageToVisitor', { body: 'conversing' });
        expandThen(function(){
          analytics.spy(window, 'olark');
          done();
        });
      });

      afterEach(function(done){
        analytics.restore();
        shrinkThen(function(){
          done();
        });
      });

      describe('#page', function(){
        it('should send a page name', function(){
          analytics.page('Name');
          analytics.called(window.olark, 'api.chat.sendNotificationToOperator', {
            body: 'looking at name page'
          });
        });

        it('should send a page category and name', function(){
          analytics.page('Category', 'Name');
          analytics.called(window.olark, 'api.chat.sendNotificationToOperator', {
            body: 'looking at category name page'
          });
        });

        it('should send a page url', function(){
          analytics.page({ url: 'url' });
          analytics.called(window.olark, 'api.chat.sendNotificationToOperator', {
            body: 'looking at url'
          });
        });

        it('should not send an event when page is disabled', function(){
          olark.options.page = false;
          analytics.page();
          analytics.didNotCall(window.olark);
        });
      });

      describe('#track', function(){
        it('should send an event', function(){
          olark.options.track = true;
          analytics.track('event');
          analytics.called(window.olark, 'api.chat.sendNotificationToOperator', {
            body: 'visitor triggered "event"'
          });
        });
      });
    });
  });
});

function expandThen(fn) {
  if (document.querySelector('.olrk-state-expanded')) return fn();
  window.olark('api.box.onExpand', once(fn));
  window.olark('api.box.expand');
}

function shrinkThen(fn) {
  if (document.querySelector('.olrk-state-compressed')) return fn();
  window.olark('api.box.onShrink', once(fn));
  window.olark('api.box.shrink');
}
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"next-tick":103,"once":371,"when":124,"./":66,"clear-env":4,"extend":123}],
371: [function(require, module, exports) {

/**
 * Identifier.
 */

var n = 0;

/**
 * Global.
 */

var global = (function(){ return this })();

/**
 * Make `fn` callable only once.
 *
 * @param {Function} fn
 * @return {Function}
 * @api public
 */

module.exports = function(fn) {
  var id = n++;

  function once(){
    // no receiver
    if (this == global) {
      if (once.called) return;
      once.called = true;
      return fn.apply(this, arguments);
    }

    // receiver
    var key = '__called_' + id + '__';
    if (this[key]) return;
    this[key] = true;
    return fn.apply(this, arguments);
  }

  return once;
};

}, {}],
246: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var tick = require('next-tick');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Optimizely', function(){
  var Optimizely = plugin;
  var optimizely;
  var analytics;
  var options = {};

  beforeEach(function(){
    analytics = new Analytics;
    optimizely = new Optimizely(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(optimizely);

    window.optimizely.data = {
      experiments: { 0: { name: 'Test' } },
      state: { variationNamesMap: { 0: 'Variation' } }
    };
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    optimizely.reset();
    sandbox();
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(optimizely, 'load');
      analytics.stub(optimizely, 'replay');
    });

    describe('#initialize', function(){
      it('should call #replay by default', function(done){
        analytics.initialize();
        analytics.page();
        tick(function(){
          analytics.called(optimizely.replay);
          done();
        });
      });

      it('should not call #replay if variations are disabled', function(done){
        optimizely.options.variations = false;
        analytics.initialize();
        analytics.page();
        tick(function(){
          analytics.didNotCall(optimizely.replay);
          done();
        });
      });
    });
  });

  describe('#replay', function(){
    beforeEach(function(){
      analytics.stub(analytics, 'identify');
    });

    it('should replay variation traits', function(done){
      optimizely.options.variations = true;
      analytics.initialize();
      analytics.page();
      tick(function(){
        analytics.called(analytics.identify, {
          'Experiment: Test': 'Variation'
        });
        done();
      });
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.optimizely, 'push');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.optimizely.push, ['trackEvent', 'event', {}]);
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window.optimizely.push, ['trackEvent', 'event', {
          property: true
        }]);
      });

      it('should change revenue to cents', function(){
        analytics.track('event', { revenue: 9.99 });
        analytics.called(window.optimizely.push, ['trackEvent', 'event', {
          revenue: 999
        }]);
      });
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.optimizely, 'push');
      });

      it('should send an event for a named page', function(){
        analytics.page('Home');
        analytics.called(window.optimizely.push, ['trackEvent', 'Viewed Home Page', {
          name: 'Home',
          path: window.location.pathname,
          referrer: document.referrer,
          title: document.title,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname + window.location.search
        }]);
      });

      it('should send an event for a named and categorized page', function(){
        analytics.page('Blog', 'New Integration');
        analytics.called(window.optimizely.push, ['trackEvent', 'Viewed Blog New Integration Page', {
          category: 'Blog',
          name: 'New Integration',
          path: window.location.pathname,
          referrer: document.referrer,
          title: document.title,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname + window.location.search
        }]);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"next-tick":103,"./":67,"clear-env":4}],
247: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Perfect Audience', function(){
  var PerfectAudience = plugin;
  var perfect;
  var analytics;
  var options = {
    siteId: '4ff6ade4361ed500020000a5'
  };

  beforeEach(function(){
    analytics = new Analytics;
    perfect = new PerfectAudience(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(perfect);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    perfect.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(PerfectAudience, integration('Perfect Audience')
      .assumesPageview()
      .global('_pq')
      .option('siteId', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(perfect, 'load');
    });

    describe('#initialize', function(){
      it('should create the window._pq object', function(){
        analytics.assert(!window._pq);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._pq instanceof Array);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(perfect.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(perfect, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._pq, 'push');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window._pq.push, ['track', 'event']);
      });
    });

    describe('#viewedProduct', function(){
      beforeEach(function(){
        analytics.stub(window._pq, 'push');
      });

      it('should send a track and a trackProduct with product ID', function(){
        analytics.track('Viewed Product', {
          id: '507f1f77bcf86cd799439011',
          sku: '45790-32',
          name: 'Monopoly: 3rd Edition',
          price: 18.99,
          category: 'Games'
        });
        analytics.called(window._pq.push, ['track', 'Viewed Product']);
        analytics.called(window._pq.push, ['trackProduct', '45790-32']);
      });
    });

    describe('#completedOrder', function(){
      beforeEach(function(){
        analytics.stub(window._pq, 'push');
      });

      it('should send event and orderId, revenue properties', function(){
        analytics.track('Completed Order', {
          orderId: '12345',
          total: 30,
          revenue: 25,
          shipping: 3,
          tax: 2,
          discount: 2.5,
          coupon: 'hasbros',
          currency: 'USD',
          products: [
            {
              id: '507f1f77bcf86cd799439011',
              sku: '45790-32',
              name: 'Monopoly: 3rd Edition',
              price: 19,
              quantity: 1,
              category: 'Games'
            },
            {
              id: '505bd76785ebb509fc183733',
              sku: '46493-32',
              name: 'Uno Card Game',
              price: 3,
              quantity: 2,
              category: 'Games'
            }
          ]
        });
        analytics.called(window._pq.push, ['track', 'Completed Order', {orderId: '12345', revenue: 30}]);
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":68,"clear-env":4}],
248: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var date = require('load-date');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Pingdom', function(){
  var Pingdom = plugin;
  var pingdom;
  var analytics;
  var options = {
    id: '5168f8c6abe53db732000000'
  };

  beforeEach(function(){
    analytics = new Analytics;
    pingdom = new Pingdom(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(pingdom);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    pingdom.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Pingdom, integration('Pingdom')
      .assumesPageview()
      .global('_prum')
      .global('PRUM_EPISODES')
      .option('id', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(pingdom, 'load');
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(pingdom.load);
      });

      it('should push the id onto window._prum', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._prum[0], [ 'id', options.id ]);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(pingdom, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    it('should mark the first byte', function(){
      analytics.equal(date.getTime(), window.PRUM_EPISODES.marks.firstbyte);
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"load-date":154,"./":69,"clear-env":4}],
249: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Piwik', function(){
  var Piwik = plugin;
  var piwik;
  var analytics;
  var options = {
    siteId: 42,
    url: 'https://demo.piwik.org'
  };

  beforeEach(function(){
    analytics = new Analytics;
    piwik = new Piwik(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(piwik);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    piwik.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Piwik, integration('Piwik')
      .global('_paq')
      .option('siteId', '')
      .option('url', null)
      .mapping('goals'));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(piwik, 'load');
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(piwik.load);
      });

      it('should push the id onto window._paq', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._paq[0], ['setSiteId', options.siteId]);
      });

      it('should push the url onto window._paq', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._paq[1], ['setTrackerUrl', options.url + "/piwik.php"]);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(piwik, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      it('should send a page view', function(){
        analytics.page();
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._paq, 'push');
      });

      it('should track goals', function(){
        piwik.options.goals = [{ key: 'goal', value: 1 }];
        analytics.track('goal');
        analytics.called(window._paq.push, ['trackGoal', 1, 0]);
      });

      it('should send .revenue()', function(){
        piwik.options.goals = [{ key: 'goal', value: 2 }];
        analytics.track('goal', { revenue: 10 });
        analytics.called(window._paq.push, ['trackGoal', 2, 10]);
      });

      it('should send .total()', function(){
        piwik.options.goals = [{ key: 'completed order', value: 10 }];
        analytics.track('Completed Order', { total: 20 });
        analytics.called(window._paq.push, ['trackGoal', 10, 20]);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":70,"clear-env":4}],
250: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Preact', function(){
  var Preact = plugin;
  var preact;
  var analytics;
  var options = {
    projectCode: 'x'
  };

  beforeEach(function(){
    analytics = new Analytics;
    preact = new Preact(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(preact);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    preact.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Preact, integration('Preact')
      .assumesPageview()
      .global('_lnq')
      .option('projectCode', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(preact, 'load');
    });

    describe('#initialize', function(){
      it('should push _setCode onto the window._lnq object', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._lnq[0], ['_setCode', options.projectCode]);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(preact.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(preact, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._lnq, 'push');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window._lnq.push, ['_setPersonData', {
          properties: { id: 'id' },
          email: undefined,
          name: undefined,
          uid: 'id',
        }]);
      });

      it('shouldnt send just traits', function(){
        analytics.identify({ trait: true });
        analytics.didNotCall(window._lnq.push);
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window._lnq.push, ['_setPersonData', {
          properties: { trait: true, id: 'id' },
          email: undefined,
          name: undefined,
          uid: 'id',
        }]);
      });

      it('should send an email', function(){
        analytics.identify('id', { email: 'name@example.com' });
        analytics.called(window._lnq.push, ['_setPersonData', {
          properties: { email: 'name@example.com', id: 'id' },
          email: 'name@example.com',
          name: undefined,
          uid: 'id',
        }]);
      });

      it('should send a name', function(){
        analytics.identify('id', { name: 'name' });
        analytics.called(window._lnq.push, ['_setPersonData', {
          properties: { name: 'name', id: 'id' },
          email: undefined,
          name: 'name',
          uid: 'id',
        }]);
      });
    });

    describe('#group', function(){
      beforeEach(function(){
        analytics.stub(window._lnq, 'push');
      });

      it('should send an id', function(){
        analytics.group('id');
        analytics.called(window._lnq.push, ['_setAccount', { id: 'id' }]);
      });

      it('should send an id and properties', function(){
        analytics.group('id', { property: true });
        analytics.called(window._lnq.push, ['_setAccount', {
          id: 'id',
          property: true
        }]);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._lnq, 'push');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window._lnq.push, ['_logEvent', { name: 'event' }, {}]);
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window._lnq.push, ['_logEvent', { name: 'event' }, { property: true }]);
      });

      it('should special case a revenue property', function(){
        analytics.track('event', { revenue: 9.99 });
        analytics.called(window._lnq.push, ['_logEvent', {
          name: 'event',
          revenue: 999
        }, {}]);
      });

      it('should special case a note property', function(){
        analytics.track('event', { note: 'note' });
        analytics.called(window._lnq.push, ['_logEvent', {
          name: 'event',
          note: 'note'
        }, {}]);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":71,"clear-env":4}],
251: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe.skip('Qualaroo', function(){
  var Qualaroo = plugin;
  var qualaroo;
  var analytics;
  var options = {
    customerId: '47517',
    siteToken: '9Fd'
  };

  beforeEach(function(){
    analytics = new Analytics;
    qualaroo = new Qualaroo(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(qualaroo);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    qualaroo.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Qualaroo, integration('Qualaroo')
      .assumesPageview()
      .global('_kiq')
      .option('customerId', '')
      .option('siteToken', '')
      .option('track', false));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(qualaroo, 'load');
    });

    describe('#initialize', function(){
      it('should create window._kiq', function(){
        analytics.assert(!window._kiq);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._kiq);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(qualaroo.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(qualaroo, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._kiq, 'push');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window._kiq.push, ['identify', 'id']);
      });

      it('should send traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window._kiq.push, ['set', { trait: true }]);
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window._kiq.push, ['identify', 'id']);
        analytics.called(window._kiq.push, ['set', { trait: true, id: 'id' }]);
      });

      it('should prefer an email', function(){
        analytics.identify('id', { email: 'name@example.com' });
        analytics.called(window._kiq.push, ['identify', 'name@example.com']);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._kiq, 'push');
      });

      it('should not send anything by default', function(){
        analytics.track('event');
        analytics.didNotCall(window._kiq.push);
      });

      it('should set an event trait', function(){
        qualaroo.options.track = true;
        analytics.track('event');
        analytics.called(window._kiq.push, ['set', { 'Triggered: event': true }]);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":73,"clear-env":4}],
252: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Quantcast', function(){
  var Quantcast = plugin;
  var quantcast;
  var analytics;
  var options = {
    pCode: 'p-ZDsjJUtp583Se'
  };

  beforeEach(function(){
    analytics = new Analytics;
    quantcast = new Quantcast(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(quantcast);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    quantcast.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Quantcast, integration('Quantcast')
      .assumesPageview()
      .global('_qevents')
      .global('__qc')
      .option('pCode', null)
      .option('advertise', false));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(quantcast, 'load');
    });

    describe('#initialize', function(){
      it('should push the pCode', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(window._qevents[0].qacct === options.pCode);
      });

      it('should push the user id', function(){
        analytics.user().identify('id');
        analytics.initialize();
        analytics.page();
        analytics.assert(window._qevents[0].uid === 'id');
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(quantcast.load);
      });

      it('should push "refresh" with labels when given a page', function(){
        analytics.initialize();
        analytics.page('category', 'name');
        var pushed = window._qevents[0];
        analytics.assert(options.pCode == pushed.qacct);
        analytics.assert(null == pushed.event);
        analytics.assert('page.category.name' == pushed.labels);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(quantcast, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window._qevents, 'push');
      });

      it('should push a refresh event with pCode', function(){
        analytics.page();
        analytics.called(window._qevents.push, {
          event: 'refresh',
          labels: 'page.',
          qacct: options.pCode
        });
      });

      it('should push the page name as a label', function(){
        analytics.page('Page Name');
        analytics.called(window._qevents.push, {
          event: 'refresh',
          labels: 'page.Page Name',
          qacct: options.pCode
        });
      });

      it('should push the page name as a label without commas', function(){
        analytics.page('Page, Name');
        analytics.called(window._qevents.push, {
          event: 'refresh',
          labels: 'page.Page; Name',
          qacct: options.pCode
        });
      });

      it('should push the page category and name as labels', function(){
        analytics.page('Category', 'Page');
        analytics.called(window._qevents.push, {
          event: 'refresh',
          labels: 'page.Category.Page',
          qacct: options.pCode
        });
      });

      it('should push the user id', function(){
        analytics.user().identify('id');
        analytics.page();
        analytics.called(window._qevents.push, {
          event: 'refresh',
          labels: 'page.',
          qacct: options.pCode,
          uid: 'id'
        });
      });

      describe('when advertise is true', function(){
        it('should prefix with _fp.event', function(){
          quantcast.options.advertise = true;
          analytics.page('Page Name');
          analytics.called(window._qevents.push, {
            event: 'refresh',
            labels: '_fp.event.Page Name',
            qacct: options.pCode
          });
        });

        it('should send category and name', function(){
          quantcast.options.advertise = true;
          analytics.page('Category Name', 'Page Name');
          analytics.called(window._qevents.push, {
            event: 'refresh',
            labels: '_fp.event.Category Name Page Name',
            qacct: options.pCode
          });
        });
      });
    });

    describe('#identify', function(){
      it('should update the user id', function(){
        analytics.identify('id');
        analytics.assert(window._qevents[0].uid === 'id');
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._qevents, 'push');
      });

      afterEach(function(){
        analytics.restore();
      });

      it('should push a click event', function(){
        analytics.track('event');
        analytics.called(window._qevents.push, {
          event: 'click',
          labels: 'event.event',
          qacct: options.pCode
        });
      });

      it('should push revenue for the event', function(){
        analytics.track('event', { revenue : 10.45 });
        analytics.called(window._qevents.push, {
          event: 'click',
          labels: 'event.event',
          qacct: options.pCode,
          revenue: '10.45'
        });
      });

      it('should push the user id', function(){
        analytics.user().identify('id');
        analytics.track('event');
        analytics.called(window._qevents.push, {
          event: 'click',
          labels: 'event.event',
          qacct: options.pCode,
          uid: 'id'
        });
      });

      it('should handle completed order events', function(){
        analytics.track('completed order', {
          orderId: '780bc55',
          category: 'tech',
          total: 99.99,
          shipping: 13.99,
          tax: 20.99,
          products: [{
            quantity: 1,
            price: 24.75,
            name: 'my product',
            sku: 'p-298'
          }, {
            quantity: 3,
            price: 24.75,
            name: 'other product',
            sku: 'p-299'
          }]
        });
        analytics.called(window._qevents.push, {
          event: 'refresh',
          labels: 'event.completed order',
          orderid: '780bc55',
          qacct: options.pCode,
          revenue: '99.99'
        });
      });

      describe('when advertise is true', function(){
        it('should prefix with _fp.event', function(){
          quantcast.options.advertise = true;
          analytics.track('event');
          analytics.called(window._qevents.push, {
            event: 'click',
            labels: '_fp.event.event',
            qacct: options.pCode
          });
        });

        it('should handle completed order events', function(){
          quantcast.options.advertise = true;
          analytics.track('completed order', {
            orderId: '780bc55',
            category: 'tech',
            total: 99.99,
            shipping: 13.99,
            tax: 20.99,
            products: [{
              quantity: 1,
              price: 24.75,
              name: 'my product',
              sku: 'p-298'
            }, {
              quantity: 3,
              price: 24.75,
              name: 'other product',
              sku: 'p-299'
            }]
          });
          analytics.called(window._qevents.push, {
            event: 'refresh',
            labels: '_fp.event.completed order,_fp.pcat.tech',
            orderid: '780bc55',
            qacct: options.pCode,
            revenue: '99.99'
          });
        });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":74,"clear-env":4}],
253: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Rollbar', function(){
  var Rollbar = plugin;
  var rollbar;
  var analytics;
  var options = {
    accessToken: 'FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF',
    environment: 'testenvironment',
  };

  beforeEach(function(){
    prevOnError = window.onerror;
    analytics = new Analytics;
    rollbar = new Rollbar(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(rollbar);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    sandbox();
    rollbar.reset();
  });

  it('should have the right settings', function(){
    analytics.compare(Rollbar, integration('Rollbar')
      .global('Rollbar')
      .option('accessToken', '')
      .option('identify', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(rollbar, 'load');
    });

    describe('#initialize', function(){
      it('should create the window.Rollbar object', function(){
        analytics.assert(!window.Rollbar);
        analytics.initialize();
        analytics.page();
        analytics.assert(window.Rollbar);
      });

      it('should have all of the correct methods', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(window.Rollbar);
        analytics.assert(window.Rollbar.debug);
        analytics.assert(window.Rollbar.info);
        analytics.assert(window.Rollbar.warning);
        analytics.assert(window.Rollbar.error);
        analytics.assert(window.Rollbar.critical);
        analytics.assert(window.Rollbar.configure);
        analytics.assert(window.Rollbar.scope);
      });

      it('should set window.onerror', function(){
        var onerr = window.onerror;
        analytics.initialize();
        analytics.page();
        analytics.assert(window.onerror !== onerr);
        analytics.assert(typeof window.onerror === 'function');
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(rollbar.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(rollbar, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window, 'onerror');
        analytics.stub(window.Rollbar, 'configure');
      });

      it('should send an id', function(){
        analytics.identify('id', {});
        analytics.called(window.Rollbar.configure, {
          payload: { person: { id: 'id' } }
        });
      });

      it('should not send only traits', function(){
        analytics.identify({ trait: true });
        analytics.didNotCall(window.Rollbar.configure);
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.Rollbar.configure, {
          payload: { person: { id: 'id', trait: true } }
        });
      });
    });

    describe('window.onerror', function(){
      beforeEach(function(){
        analytics.stub(window.Rollbar, 'uncaughtError');
      });

      it("should call window.Rollbar.uncaughtError", function(){
        var err = new Error('testing');
        window.onerror(
          'test message',
          'http://foo.com',
          33,
          21,
          err
        );
        analytics.called(window.Rollbar.uncaughtError,
          'test message',
          'http://foo.com',
          33,
          21,
          err
        );
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":75,"clear-env":4}],
254: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('SaaSquatch', function(){
  var SaaSquatch = plugin;
  var saasquatch;
  var analytics;
  var options = {
    tenantAlias: 'baz',
    accountId: 'foo'
  };

  beforeEach(function(){
    analytics = new Analytics;
    saasquatch = new SaaSquatch(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(saasquatch);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    saasquatch.reset();
    sandbox();
  });

  it('should have the correct settings', function(){
    analytics.compare(SaaSquatch, integration('SaaSquatch')
      .option('tenantAlias', '')
      .global('_sqh'));
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.on('ready', done);
      analytics.initialize();
      analytics.page();
      analytics.identify('my-id');
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._sqh, 'push');
      });

      it('should not send if userId or email are missing', function(){
        analytics.identify();
        analytics.didNotCall(window._sqh.push);
      });

      it('should send if userId is given', function(){
        analytics.identify('id');
        analytics.called(window._sqh.push, ['init', {
          user_id: 'id',
          tenant_alias: 'baz',
          email: undefined,
          first_name: undefined,
          last_name: undefined,
          user_image: undefined
        }]);
      });

      it('should send if email is given', function(){
        analytics.identify({ email: 'self@example.com' });
        analytics.called(window._sqh.push, ['init', {
          user_id: null,
          tenant_alias: 'baz',
          email: 'self@example.com',
          first_name: undefined,
          last_name: undefined,
          user_image: undefined
        }]);
      });

      it('should pass checksum', function(){
        analytics.identify({ email: 'self@example.com' }, { SaaSquatch: { checksum: 'wee' } });
        analytics.called(window._sqh.push, ['init', {
          user_id: null,
          tenant_alias: 'baz',
          email: 'self@example.com',
          first_name: undefined,
          last_name: undefined,
          user_image: undefined,
          checksum: 'wee'
        }]);
      });

      it('should pass accountId', function(){
        analytics.identify({ email: 'self@example.com', accountId: 123 });
        analytics.called(window._sqh.push, ['init', {
          user_id: null,
          tenant_alias: 'baz',
          email: 'self@example.com',
          first_name: undefined,
          last_name: undefined,
          user_image: undefined,
          account_id: 123
        }]);
      });

      it('should pass referral image', function(){
        analytics.identify(1, { referralImage: 'img' });
        analytics.called(window._sqh.push, ['init', {
          user_id: 1,
          tenant_alias: 'baz',
          email: undefined,
          first_name: undefined,
          last_name: undefined,
          user_image: undefined,
          fb_share_image: 'img'
        }]);
      });

      it('should send only once', function(){
        analytics.identify('id');
        analytics.identify('id');
        analytics.calledOnce(window._sqh.push);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":76,"clear-env":4}],
255: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Sentry', function(){
  var Sentry = plugin;
  var sentry;
  var analytics;
  var options = {
    config: 'https://daf6980a0ff243aa9406db1edd7bdedb@app.getsentry.com/25415'
  };

  beforeEach(function(){
    analytics = new Analytics;
    sentry = new Sentry(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(sentry);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    sentry.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Sentry, integration('Sentry')
      .global('Raven')
      .option('config', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(sentry, 'load');
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(sentry.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(sentry, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.Raven, 'setUser');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window.Raven.setUser, { id: 'id' });
      });

      it('should send traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window.Raven.setUser, { trait: true });
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.Raven.setUser, { id: 'id', trait: true });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":77,"clear-env":4}],
256: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('SnapEngage', function(){
  var SnapEngage = plugin;
  var snapengage;
  var analytics;
  var options = {
    apiKey: '782b737e-487f-4117-8a2b-2beb32b600e5'
  };

  beforeEach(function(){
    analytics = new Analytics;
    snapengage = new SnapEngage(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(snapengage);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    snapengage.reset();
    sandbox();
  });

  it('should store the right settings', function(){
    analytics.compare(SnapEngage, integration('SnapEngage')
      .assumesPageview()
      .global('SnapABug')
      .option('apiKey', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(snapengage, 'load');
    });

    describe('#initialize', function(){
      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(snapengage.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(snapengage, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.SnapABug, 'setUserEmail');
      });

      it('should not send just an id', function(){
        analytics.identify('id');
        analytics.didNotCall(window.SnapABug.setUserEmail);
      });

      it('should send an email', function(){
        analytics.identify('id', { email: 'name@example.com' });
        analytics.called(window.SnapABug.setUserEmail, 'name@example.com');
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":78,"clear-env":4}],
257: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var tick = require('next-tick');
var when = require('when');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Spinnakr', function(){
  var Spinnakr = plugin;
  var spinnakr;
  var analytics;
  var options = {
    siteId: '668925604'
  };

  beforeEach(function(){
    analytics = new Analytics;
    spinnakr = new Spinnakr(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(spinnakr);
    // needed for spinnakr's script to set a global we can read
    window._spinnakr_development = true;
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    spinnakr.reset();
    sandbox();
    delete window._spinnakr_development;
  });

  it('should store the right settings', function(){
    analytics.compare(Spinnakr, integration('Spinnakr')
      .assumesPageview()
      .global('_spinnakr_site_id')
      .global('_spinnakr')
      .option('siteId', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(spinnakr, 'load');
    });

    describe('#initialize', function(){
      it('should set window._spinnakr_site_id', function(){
        analytics.assert(!window._spinnakr_site_id);
        analytics.initialize();
        analytics.page();
        analytics.assert(window._spinnakr_site_id === options.siteId);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(spinnakr.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(spinnakr, done);
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"next-tick":103,"when":124,"./":79,"clear-env":4}],
258: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Tapstream', function(){
  var Tapstream = plugin;
  var tapstream;
  var analytics;
  var options = {
    accountName: 'tapstreamTestAccount'
  };

  beforeEach(function(){
    analytics = new Analytics;
    tapstream = new Tapstream(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(tapstream);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    tapstream.reset();
    sandbox();
  });

  it('should store the right settings', function(){
    analytics.compare(Tapstream, integration('Tapstream')
      .assumesPageview()
      .global('_tsq')
      .option('accountName', '')
      .option('trackAllPages', true)
      .option('trackNamedPages', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(tapstream, 'load');
    });

    describe('#initialize', function(){
      it('should push setAccount name onto window._tsq', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._tsq[0] , ['setAccountName', options.accountName]);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(tapstream.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(tapstream, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window._tsq, 'push');
      });

      it('should track all pages by default', function(){
        analytics.page();
        analytics.called(window._tsq.push, ['fireHit', 'loaded-a-page', [window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname]]);
      });

      it('should track named pages by default', function(){
        analytics.page('Name');
        analytics.called(window._tsq.push, ['fireHit', 'viewed-name-page', [window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname]]);
      });

      it('should track named pages with a category', function(){
        analytics.page('Category', 'Name');
        analytics.called(window._tsq.push, ['fireHit', 'viewed-category-name-page', [window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname]]);
      });

      it('should track categorized pages by default', function(){
        analytics.page('Category', 'Name');
        analytics.called(window._tsq.push, ['fireHit', 'viewed-category-page', [window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname]]);
      });

      it('should not track any pages if the options are off', function(){
        tapstream.options.trackAllPages = false;
        tapstream.options.trackNamedPages = false;
        tapstream.options.trackCategorizedPages = false;
        analytics.page('Name');
        analytics.page('Category', 'Name');
        analytics.didNotCall(window._tsq.push);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._tsq, 'push');
      });

      it('should send an event as a slug', function(){
        analytics.track('Event');
        analytics.called(window._tsq.push, ['fireHit', 'event', [undefined]]);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":80,"clear-env":4}],
259: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');
var tick = require('next-tick');
var when = require('when');

describe('trak.io', function(){
  var Trakio = plugin;
  var trakio;
  var analytics;
  var options = {
    token: '740d36a79fb593bbc034a3ac934bc04f5a591c0c'
  };

  beforeEach(function(){
    analytics = new Analytics;
    trakio = new Trakio(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(trakio);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    trakio.reset();
    sandbox();
  });

  it('should store the right settings', function(){
    analytics.compare(Trakio, integration('trak.io')
      .assumesPageview()
      .global('trak')
      .option('token', '')
      .option('trackNamedPages', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(trakio, 'load');
    });
    
    describe('#initialize', function(){
      it('should set up the window.trak.io variables', function(){
        analytics.initialize();
        analytics.page();
        analytics.assert(window.trak.io);
        analytics.assert(window.trak.io.identify);
        analytics.assert(window.trak.io.track);
        analytics.assert(window.trak.io.alias);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(trakio.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(trakio, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.trak.io, 'page_view');
        analytics.stub(window.trak.io, 'track');
      });

      it('should call page_view', function(){
        analytics.page();
        analytics.called(window.trak.io.page_view);
      });

      it('should send a path and title', function(){
        analytics.page({ path: '/path', title: 'title' });
        analytics.called(window.trak.io.page_view, '/path', 'title');
      });

      it('should prefer a name', function(){
        analytics.page('name', { title: 'title' });
        analytics.called(window.trak.io.page_view, window.location.pathname, 'name');
      });

      it('should prefer a category and name', function(){
        analytics.page('category', 'name', { title: 'title' });
        analytics.called(window.trak.io.page_view, window.location.pathname, 'category name');
      });

      it('should track named pages by default', function(){
        analytics.page('Name');
        analytics.called(window.trak.io.track, 'Viewed Name Page');
      });

      it('should track named pages with categories', function(){
        analytics.page('Category', 'Name');
        analytics.called(window.trak.io.track, 'Viewed Category Name Page');
      });

      it('should track categorized pages by default', function(){
        analytics.page('Category', 'Name');
        analytics.called(window.trak.io.track, 'Viewed Category Page');
      });

      it('should not track named or categorized pages if the option is off', function(){
        trakio.options.trackNamedPages = false;
        trakio.options.trackCategorizedPages = false;
        analytics.page('Name');
        analytics.page('Category', 'Name');
        analytics.didNotCall(window.trak.io.track);
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.trak.io, 'identify');
      });

      it('should send id', function(){
        analytics.identify('id');
        analytics.called(window.trak.io.identify, 'id', { id: 'id' });
      });

      it('should send traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window.trak.io.identify, { trait: true });
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.trak.io.identify, 'id', { trait: true, id: 'id' });
      });

      it('should alias traits', function(){
        analytics.identify({
          avatar: 'avatar',
          firstName: 'first',
          lastName: 'last'
        });
        analytics.called(window.trak.io.identify, {
          avatar_url: 'avatar',
          first_name: 'first',
          last_name: 'last'
        });
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.trak.io, 'track');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.trak.io.track, 'event');
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window.trak.io.track, 'event', { property: true });
      });
    });

    describe('#alias', function(){
      beforeEach(function(){
        analytics.stub(window.trak.io, 'distinct_id');
        analytics.stub(window.trak.io, 'alias');
      });

      it('should send a new id', function(){
        analytics.alias('new');
        analytics.called(window.trak.io.alias, 'new');
      });

      it('should send a new id and an original id', function(){
        analytics.alias('another', 'original');
        analytics.called(window.trak.io.alias, 'original', 'another');
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":81,"clear-env":4,"next-tick":103,"when":124}],
260: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Twitter Ads', function(){
  var Twitter = plugin;
  var twitter;
  var analytics;
  var options = {
    events: {
      signup: 'c36462a3',
      login: '6137ab24',
      play: 'e3196de1'
    }
  };

  beforeEach(function(){
    analytics = new Analytics;
    twitter = new Twitter(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(twitter);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    twitter.reset();
    sandbox();
  });

  it('should have the correct settings', function(){
    analytics.compare(Twitter, integration('Twitter Ads')
      .option('page', '')
      .mapping('events'));
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.spy(twitter, 'load');
      });

      it('should not send if `page` option is not defined', function(){
        analytics.page();
        analytics.didNotCall(twitter.load);
      });

      it('should send if `page` option is defined', function(){
        twitter.options.page = 'e3196de1';
        analytics.page();
        analytics.loaded('<img src="http://analytics.twitter.com/i/adsct?txn_id=e3196de1&p_id=Twitter">');
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.spy(twitter, 'load');
      });

      it('should not send if event is not defined', function(){
        analytics.track('toString');
        analytics.didNotCall(twitter.load);
      });

      it('should send correctly', function(){
        analytics.track('play');
        analytics.loaded('<img src="http://analytics.twitter.com/i/adsct?txn_id=e3196de1&p_id=Twitter">');
      });

      it('should support array events', function(){
        twitter.options.events = [{ key: 'event', value: 12 }];
        analytics.track('event');
        analytics.loaded('<img src="http://analytics.twitter.com/i/adsct?txn_id=12&p_id=Twitter">')
      });
    });
  });
});

}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":82,"clear-env":4}],
261: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');
var jQuery = require('jquery');
var test = require('analytics.js-integration-tester');
var unix = require('to-unix-timestamp');
var UserVoice = require('./index')
var when = require('when');

describe('UserVoice', function(){
  var UserVoice = plugin;
  var uservoice;
  var analytics;
  var options = {
    apiKey: 'EvAljSeJvWrrIidgVvI2g'
  };

  beforeEach(function(){
    analytics = new Analytics;
    analytics.use(plugin);
    analytics.use(tester);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    sandbox();
  });

  it('should store the right settings', function(){
    analytics.compare(UserVoice, integration('UserVoice')
      .assumesPageview()
      .global('UserVoice')
      .option('apiKey', '')
      .option('classic', false)
      .option('forumId', null)
      .option('showWidget', true)
      .option('mode', 'contact')
      .option('accentColor', '#448dd6')
      .option('smartvote', true)
      .option('trigger', null)
      .option('triggerPosition', 'bottom-right')
      .option('triggerColor', '#ffffff')
      .option('triggerBackgroundColor', 'rgba(46, 49, 51, 0.6)')
      // BACKWARDS COMPATIBILITY: classic options
      .option('classicMode', 'full')
      .option('primaryColor', '#cc6d00')
      .option('linkColor', '#007dbf')
      .option('defaultMode', 'support')
      .option('tabLabel', 'Feedback & Support')
      .option('tabColor', '#cc6d00')
      .option('tabPosition', 'middle-right')
      .option('tabInverted', false));
  });

  describe('Non-Classic', function(){
    beforeEach(function(){
      uservoice = new UserVoice(options);
      analytics.add(uservoice);
    });

    afterEach(function(){
      uservoice.reset();
    });

    describe('before loading', function(){
      beforeEach(function(){
        analytics.stub(uservoice, 'load');
      });

      describe('#initialize', function(){
        var opts = {
          accent_color: '#448dd6',
          apiKey: 'EvAljSeJvWrrIidgVvI2g',
          classic: false,
          classicMode: 'full',
          defaultMode: 'support',
          forum_id: null,
          linkColor: '#007dbf',
          mode: 'contact',
          primaryColor: '#cc6d00',
          showWidget: true,
          smartvote_enabled: true,
          tabColor: '#cc6d00',
          tabInverted: false,
          tabLabel: 'Feedback & Support',
          tabPosition: 'middle-right',
          trigger: null,
          trigger_background_color: 'rgba(46, 49, 51, 0.6)',
          trigger_color: '#ffffff',
          trigger_position: 'bottom-right'
        };

        it('should call #load', function(){
          analytics.initialize();
          analytics.page();
          analytics.called(uservoice.load);
        });

        it('should push the right options onto window.UserVoice', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window.UserVoice[0], ['set', opts]);
        });

        it('should push the autoprompt options', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window.UserVoice[1], ['autoprompt', {}]);
        });

        it('should push the addTrigger options', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window.UserVoice[2], ['addTrigger', opts]);
        });
      });
    });

    describe('loading', function(){
      it('should load', function(done){
        analytics.load(uservoice, done);
      });
    });

    describe('after loading', function(){
      beforeEach(function(done){
        analytics.once('ready', done);
        analytics.initialize();
        analytics.page();
      });

      after(function(){
        uservoice.reset();
      });

      it('should show the trigger', function(done){
        when(function(){
          return jQuery('.uv-icon').length;
        }, done);
      });

      describe('#identify', function(){
        beforeEach(function(){
          analytics.stub(window.UserVoice, 'push');
        });

        it('should send an id', function(){
          analytics.identify('id');
          analytics.called(window.UserVoice.push, [
            'identify',
            { id: 'id' }
          ]);
        });

        it('should send traits', function(){
          analytics.identify({ trait: true });
          analytics.called(window.UserVoice.push, [
            'identify',
            { trait: true }
          ]);
        });

        it('should send an id and traits', function(){
          analytics.identify('id', { trait: true });
          analytics.called(window.UserVoice.push, [
            'identify',
            { id: 'id', trait: true }
          ]);
        });

        it('should convert a created date', function(){
          var date = new Date();
          analytics.identify({ created: date });
          analytics.called(window.UserVoice.push, [
            'identify',
            { created_at: unix(date) }
          ]);
        });
      });

      describe('#group', function(){
        beforeEach(function(){
          analytics.stub(window.UserVoice, 'push');
        });

        it('should send an id', function(){
          analytics.group('id');
          analytics.called(window.UserVoice.push, [
            'identify',
            { account: { id: 'id' }}
          ]);
        });

        it('should send properties', function(){
          analytics.group({ property: true });
          analytics.called(window.UserVoice.push, [
            'identify',
            { account: { property: true }}
          ]);
        });

        it('should send an id and properties', function(){
          analytics.group('id', { property: true });
          analytics.called(window.UserVoice.push, [
            'identify',
            { account: { id: 'id', property: true }}
          ]);
        });

        it('should convert a created date', function(){
          var date = new Date();
          analytics.group({ created: date });
          analytics.called(window.UserVoice.push, [
            'identify',
            { account: { created_at: unix(date) }}
          ]);
        });
      });
    });
  });

  describe('Classic', function(){
    beforeEach(function(){
      options = {
        classic: true,
        classicMode: 'full',
        apiKey: 'mhz5Op4MUft592O8Q82MwA',
        forumId: 221539,
        tabLabel: 'test',
        defaultMode: 'feedback',
        primaryColor: '#ffffff',
      };
      uservoice = new UserVoice(options);
      analytics.add(uservoice);
    });

    afterEach(function(){
      uservoice.reset();
    });

    describe('before loading', function(){
      beforeEach(function(){
        analytics.stub(uservoice, 'load');
      });

      describe('#initialize', function(){
        it('should push the options onto window.UserVoice.push', function(){
          analytics.initialize();
          analytics.page();
          analytics.deepEqual(window.UserVoice[0], [
            'showTab',
            'classic_widget',
            {
              accentColor: '#448dd6',
              apiKey: 'mhz5Op4MUft592O8Q82MwA',
              classic: true,
              default_mode: 'feedback',
              forum_id: 221539,
              link_color: '#007dbf',
              mode: 'full',
              primary_color: '#ffffff',
              showWidget: true,
              smartvote: true,
              tab_color: '#cc6d00',
              tab_inverted: false,
              tab_label: 'test',
              tab_position: 'middle-right',
              trigger: null,
              triggerBackgroundColor: 'rgba(46, 49, 51, 0.6)',
              triggerColor: '#ffffff',
              triggerPosition: 'bottom-right'
            }
          ]);
        });

        it('should create the window.showClassicWidget function', function(){
          analytics.assert(!window.showClassicWidget);
          analytics.initialize();
          analytics.page();
          analytics.assert(window.showClassicWidget);
        });

        it('should call #load', function(){
          analytics.initialize();
          analytics.page();
          analytics.called(uservoice.load);
        });

        it('should not have a group method if set to classic', function(){
          analytics.initialize();
          analytics.page();
          analytics.assert(uservoice.group === undefined);
        });
      });
    });

    describe('loading', function(){
      it('should load', function(done){
        analytics.load(uservoice, done);
      });
    });

    describe('after loading', function(){
      beforeEach(function(done){
        analytics.once('ready', done);
        analytics.initialize();
        analytics.page();
      });

      it('should show the tab', function(done){
        when(function(){
          return document.getElementById('uvTab');
        }, done);
      });

      describe('#identify', function(){
        beforeEach(function(){
          analytics.stub(window.UserVoice, 'push');
        });

        it('should send an id', function(){
          analytics.identify('id');
          analytics.called(window.UserVoice.push, [
            'setCustomFields',
            { id: 'id' }
          ]);
        });

        it('should send traits', function(){
          analytics.identify({ trait: true });
          analytics.called(window.UserVoice.push, [
            'setCustomFields',
            { trait: true }
          ]);
        });

        it('should send an id and traits', function(){
          analytics.identify('id', { trait: true });
          analytics.called(window.UserVoice.push, [
            'setCustomFields',
            { id: 'id', trait: true }
          ]);
        });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":83,"clear-env":4,"jquery":372,"to-unix-timestamp":182,"./index":83,"when":124}],
372: [function(require, module, exports) {
/*!
 * jQuery JavaScript Library v1.11.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:42Z
 */

(function( global, factory ) {

  if ( typeof module === "object" && typeof module.exports === "object" ) {
    // For CommonJS and CommonJS-like environments where a proper window is present,
    // execute the factory and get jQuery
    // For environments that do not inherently posses a window with a document
    // (such as Node.js), expose a jQuery-making factory as module.exports
    // This accentuates the need for the creation of a real window
    // e.g. var jQuery = require("jquery")(window);
    // See ticket #14549 for more info
    module.exports = global.document ?
      factory( global, true ) :
      function( w ) {
        if ( !w.document ) {
          throw new Error( "jQuery requires a window with a document" );
        }
        return factory( w );
      };
  } else {
    factory( global );
  }

// Pass this if window is not defined yet
}(typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Can't do this because several apps including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
// Support: Firefox 18+
//

var deletedIds = [];

var slice = deletedIds.slice;

var concat = deletedIds.concat;

var push = deletedIds.push;

var indexOf = deletedIds.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var support = {};



var
  version = "1.11.1",

  // Define a local copy of jQuery
  jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    // Need init if jQuery is called (just allow error to be thrown if not included)
    return new jQuery.fn.init( selector, context );
  },

  // Support: Android<4.1, IE<9
  // Make sure we trim BOM and NBSP
  rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

  // Matches dashed string for camelizing
  rmsPrefix = /^-ms-/,
  rdashAlpha = /-([\da-z])/gi,

  // Used by jQuery.camelCase as callback to replace()
  fcamelCase = function( all, letter ) {
    return letter.toUpperCase();
  };

jQuery.fn = jQuery.prototype = {
  // The current version of jQuery being used
  jquery: version,

  constructor: jQuery,

  // Start with an empty selector
  selector: "",

  // The default length of a jQuery object is 0
  length: 0,

  toArray: function() {
    return slice.call( this );
  },

  // Get the Nth element in the matched element set OR
  // Get the whole matched element set as a clean array
  get: function( num ) {
    return num != null ?

      // Return just the one element from the set
      ( num < 0 ? this[ num + this.length ] : this[ num ] ) :

      // Return all the elements in a clean array
      slice.call( this );
  },

  // Take an array of elements and push it onto the stack
  // (returning the new matched element set)
  pushStack: function( elems ) {

    // Build a new jQuery matched element set
    var ret = jQuery.merge( this.constructor(), elems );

    // Add the old object onto the stack (as a reference)
    ret.prevObject = this;
    ret.context = this.context;

    // Return the newly-formed element set
    return ret;
  },

  // Execute a callback for every element in the matched set.
  // (You can seed the arguments with an array of args, but this is
  // only used internally.)
  each: function( callback, args ) {
    return jQuery.each( this, callback, args );
  },

  map: function( callback ) {
    return this.pushStack( jQuery.map(this, function( elem, i ) {
      return callback.call( elem, i, elem );
    }));
  },

  slice: function() {
    return this.pushStack( slice.apply( this, arguments ) );
  },

  first: function() {
    return this.eq( 0 );
  },

  last: function() {
    return this.eq( -1 );
  },

  eq: function( i ) {
    var len = this.length,
      j = +i + ( i < 0 ? len : 0 );
    return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
  },

  end: function() {
    return this.prevObject || this.constructor(null);
  },

  // For internal use only.
  // Behaves like an Array's method, not like a jQuery method.
  push: push,
  sort: deletedIds.sort,
  splice: deletedIds.splice
};

jQuery.extend = jQuery.fn.extend = function() {
  var src, copyIsArray, copy, name, options, clone,
    target = arguments[0] || {},
    i = 1,
    length = arguments.length,
    deep = false;

  // Handle a deep copy situation
  if ( typeof target === "boolean" ) {
    deep = target;

    // skip the boolean and the target
    target = arguments[ i ] || {};
    i++;
  }

  // Handle case when target is a string or something (possible in deep copy)
  if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
    target = {};
  }

  // extend jQuery itself if only one argument is passed
  if ( i === length ) {
    target = this;
    i--;
  }

  for ( ; i < length; i++ ) {
    // Only deal with non-null/undefined values
    if ( (options = arguments[ i ]) != null ) {
      // Extend the base object
      for ( name in options ) {
        src = target[ name ];
        copy = options[ name ];

        // Prevent never-ending loop
        if ( target === copy ) {
          continue;
        }

        // Recurse if we're merging plain objects or arrays
        if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
          if ( copyIsArray ) {
            copyIsArray = false;
            clone = src && jQuery.isArray(src) ? src : [];

          } else {
            clone = src && jQuery.isPlainObject(src) ? src : {};
          }

          // Never move original objects, clone them
          target[ name ] = jQuery.extend( deep, clone, copy );

        // Don't bring in undefined values
        } else if ( copy !== undefined ) {
          target[ name ] = copy;
        }
      }
    }
  }

  // Return the modified object
  return target;
};

jQuery.extend({
  // Unique for each copy of jQuery on the page
  expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

  // Assume jQuery is ready without the ready module
  isReady: true,

  error: function( msg ) {
    throw new Error( msg );
  },

  noop: function() {},

  // See test/unit/core.js for details concerning isFunction.
  // Since version 1.3, DOM methods and functions like alert
  // aren't supported. They return false on IE (#2968).
  isFunction: function( obj ) {
    return jQuery.type(obj) === "function";
  },

  isArray: Array.isArray || function( obj ) {
    return jQuery.type(obj) === "array";
  },

  isWindow: function( obj ) {
    /* jshint eqeqeq: false */
    return obj != null && obj == obj.window;
  },

  isNumeric: function( obj ) {
    // parseFloat NaNs numeric-cast false positives (null|true|false|"")
    // ...but misinterprets leading-number strings, particularly hex literals ("0x...")
    // subtraction forces infinities to NaN
    return !jQuery.isArray( obj ) && obj - parseFloat( obj ) >= 0;
  },

  isEmptyObject: function( obj ) {
    var name;
    for ( name in obj ) {
      return false;
    }
    return true;
  },

  isPlainObject: function( obj ) {
    var key;

    // Must be an Object.
    // Because of IE, we also have to check the presence of the constructor property.
    // Make sure that DOM nodes and window objects don't pass through, as well
    if ( !obj || jQuery.type(obj) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
      return false;
    }

    try {
      // Not own constructor property must be Object
      if ( obj.constructor &&
        !hasOwn.call(obj, "constructor") &&
        !hasOwn.call(obj.constructor.prototype, "isPrototypeOf") ) {
        return false;
      }
    } catch ( e ) {
      // IE8,9 Will throw exceptions on certain host objects #9897
      return false;
    }

    // Support: IE<9
    // Handle iteration over inherited properties before own properties.
    if ( support.ownLast ) {
      for ( key in obj ) {
        return hasOwn.call( obj, key );
      }
    }

    // Own properties are enumerated firstly, so to speed up,
    // if last one is own, then all properties are own.
    for ( key in obj ) {}

    return key === undefined || hasOwn.call( obj, key );
  },

  type: function( obj ) {
    if ( obj == null ) {
      return obj + "";
    }
    return typeof obj === "object" || typeof obj === "function" ?
      class2type[ toString.call(obj) ] || "object" :
      typeof obj;
  },

  // Evaluates a script in a global context
  // Workarounds based on findings by Jim Driscoll
  // http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context
  globalEval: function( data ) {
    if ( data && jQuery.trim( data ) ) {
      // We use execScript on Internet Explorer
      // We use an anonymous function so that context is window
      // rather than jQuery in Firefox
      ( window.execScript || function( data ) {
        window[ "eval" ].call( window, data );
      } )( data );
    }
  },

  // Convert dashed to camelCase; used by the css and data modules
  // Microsoft forgot to hump their vendor prefix (#9572)
  camelCase: function( string ) {
    return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
  },

  nodeName: function( elem, name ) {
    return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
  },

  // args is for internal usage only
  each: function( obj, callback, args ) {
    var value,
      i = 0,
      length = obj.length,
      isArray = isArraylike( obj );

    if ( args ) {
      if ( isArray ) {
        for ( ; i < length; i++ ) {
          value = callback.apply( obj[ i ], args );

          if ( value === false ) {
            break;
          }
        }
      } else {
        for ( i in obj ) {
          value = callback.apply( obj[ i ], args );

          if ( value === false ) {
            break;
          }
        }
      }

    // A special, fast, case for the most common use of each
    } else {
      if ( isArray ) {
        for ( ; i < length; i++ ) {
          value = callback.call( obj[ i ], i, obj[ i ] );

          if ( value === false ) {
            break;
          }
        }
      } else {
        for ( i in obj ) {
          value = callback.call( obj[ i ], i, obj[ i ] );

          if ( value === false ) {
            break;
          }
        }
      }
    }

    return obj;
  },

  // Support: Android<4.1, IE<9
  trim: function( text ) {
    return text == null ?
      "" :
      ( text + "" ).replace( rtrim, "" );
  },

  // results is for internal usage only
  makeArray: function( arr, results ) {
    var ret = results || [];

    if ( arr != null ) {
      if ( isArraylike( Object(arr) ) ) {
        jQuery.merge( ret,
          typeof arr === "string" ?
          [ arr ] : arr
        );
      } else {
        push.call( ret, arr );
      }
    }

    return ret;
  },

  inArray: function( elem, arr, i ) {
    var len;

    if ( arr ) {
      if ( indexOf ) {
        return indexOf.call( arr, elem, i );
      }

      len = arr.length;
      i = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;

      for ( ; i < len; i++ ) {
        // Skip accessing in sparse arrays
        if ( i in arr && arr[ i ] === elem ) {
          return i;
        }
      }
    }

    return -1;
  },

  merge: function( first, second ) {
    var len = +second.length,
      j = 0,
      i = first.length;

    while ( j < len ) {
      first[ i++ ] = second[ j++ ];
    }

    // Support: IE<9
    // Workaround casting of .length to NaN on otherwise arraylike objects (e.g., NodeLists)
    if ( len !== len ) {
      while ( second[j] !== undefined ) {
        first[ i++ ] = second[ j++ ];
      }
    }

    first.length = i;

    return first;
  },

  grep: function( elems, callback, invert ) {
    var callbackInverse,
      matches = [],
      i = 0,
      length = elems.length,
      callbackExpect = !invert;

    // Go through the array, only saving the items
    // that pass the validator function
    for ( ; i < length; i++ ) {
      callbackInverse = !callback( elems[ i ], i );
      if ( callbackInverse !== callbackExpect ) {
        matches.push( elems[ i ] );
      }
    }

    return matches;
  },

  // arg is for internal usage only
  map: function( elems, callback, arg ) {
    var value,
      i = 0,
      length = elems.length,
      isArray = isArraylike( elems ),
      ret = [];

    // Go through the array, translating each of the items to their new values
    if ( isArray ) {
      for ( ; i < length; i++ ) {
        value = callback( elems[ i ], i, arg );

        if ( value != null ) {
          ret.push( value );
        }
      }

    // Go through every key on the object,
    } else {
      for ( i in elems ) {
        value = callback( elems[ i ], i, arg );

        if ( value != null ) {
          ret.push( value );
        }
      }
    }

    // Flatten any nested arrays
    return concat.apply( [], ret );
  },

  // A global GUID counter for objects
  guid: 1,

  // Bind a function to a context, optionally partially applying any
  // arguments.
  proxy: function( fn, context ) {
    var args, proxy, tmp;

    if ( typeof context === "string" ) {
      tmp = fn[ context ];
      context = fn;
      fn = tmp;
    }

    // Quick check to determine if target is callable, in the spec
    // this throws a TypeError, but we will just return undefined.
    if ( !jQuery.isFunction( fn ) ) {
      return undefined;
    }

    // Simulated bind
    args = slice.call( arguments, 2 );
    proxy = function() {
      return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
    };

    // Set the guid of unique handler to the same of original handler, so it can be removed
    proxy.guid = fn.guid = fn.guid || jQuery.guid++;

    return proxy;
  },

  now: function() {
    return +( new Date() );
  },

  // jQuery.support is not used in Core but other projects attach their
  // properties to it so it needs to exist.
  support: support
});

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
  class2type[ "[object " + name + "]" ] = name.toLowerCase();
});

function isArraylike( obj ) {
  var length = obj.length,
    type = jQuery.type( obj );

  if ( type === "function" || jQuery.isWindow( obj ) ) {
    return false;
  }

  if ( obj.nodeType === 1 && length ) {
    return true;
  }

  return type === "array" || length === 0 ||
    typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */
(function( window ) {

var i,
  support,
  Expr,
  getText,
  isXML,
  tokenize,
  compile,
  select,
  outermostContext,
  sortInput,
  hasDuplicate,

  // Local document vars
  setDocument,
  document,
  docElem,
  documentIsHTML,
  rbuggyQSA,
  rbuggyMatches,
  matches,
  contains,

  // Instance-specific data
  expando = "sizzle" + -(new Date()),
  preferredDoc = window.document,
  dirruns = 0,
  done = 0,
  classCache = createCache(),
  tokenCache = createCache(),
  compilerCache = createCache(),
  sortOrder = function( a, b ) {
    if ( a === b ) {
      hasDuplicate = true;
    }
    return 0;
  },

  // General-purpose constants
  strundefined = typeof undefined,
  MAX_NEGATIVE = 1 << 31,

  // Instance methods
  hasOwn = ({}).hasOwnProperty,
  arr = [],
  pop = arr.pop,
  push_native = arr.push,
  push = arr.push,
  slice = arr.slice,
  // Use a stripped-down indexOf if we can't use a native one
  indexOf = arr.indexOf || function( elem ) {
    var i = 0,
      len = this.length;
    for ( ; i < len; i++ ) {
      if ( this[i] === elem ) {
        return i;
      }
    }
    return -1;
  },

  booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

  // Regular expressions

  // Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
  whitespace = "[\\x20\\t\\r\\n\\f]",
  // http://www.w3.org/TR/css3-syntax/#characters
  characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

  // Loosely modeled on CSS identifier characters
  // An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
  // Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
  identifier = characterEncoding.replace( "w", "w#" ),

  // Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
  attributes = "\\[" + whitespace + "*(" + characterEncoding + ")(?:" + whitespace +
    // Operator (capture 2)
    "*([*^$|!~]?=)" + whitespace +
    // "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
    "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
    "*\\]",

  pseudos = ":(" + characterEncoding + ")(?:\\((" +
    // To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
    // 1. quoted (capture 3; capture 4 or capture 5)
    "('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
    // 2. simple (capture 6)
    "((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
    // 3. anything else (capture 2)
    ".*" +
    ")\\)|)",

  // Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
  rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

  rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
  rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

  rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

  rpseudo = new RegExp( pseudos ),
  ridentifier = new RegExp( "^" + identifier + "$" ),

  matchExpr = {
    "ID": new RegExp( "^#(" + characterEncoding + ")" ),
    "CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
    "TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
    "ATTR": new RegExp( "^" + attributes ),
    "PSEUDO": new RegExp( "^" + pseudos ),
    "CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
      "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
      "*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
    "bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
    // For use in libraries implementing .is()
    // We use this for POS matching in `select`
    "needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
      whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
  },

  rinputs = /^(?:input|select|textarea|button)$/i,
  rheader = /^h\d$/i,

  rnative = /^[^{]+\{\s*\[native \w/,

  // Easily-parseable/retrievable ID or TAG or CLASS selectors
  rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

  rsibling = /[+~]/,
  rescape = /'|\\/g,

  // CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
  runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
  funescape = function( _, escaped, escapedWhitespace ) {
    var high = "0x" + escaped - 0x10000;
    // NaN means non-codepoint
    // Support: Firefox<24
    // Workaround erroneous numeric interpretation of +"0x"
    return high !== high || escapedWhitespace ?
      escaped :
      high < 0 ?
        // BMP codepoint
        String.fromCharCode( high + 0x10000 ) :
        // Supplemental Plane codepoint (surrogate pair)
        String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
  };

// Optimize for push.apply( _, NodeList )
try {
  push.apply(
    (arr = slice.call( preferredDoc.childNodes )),
    preferredDoc.childNodes
  );
  // Support: Android<4.0
  // Detect silently failing push.apply
  arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
  push = { apply: arr.length ?

    // Leverage slice if possible
    function( target, els ) {
      push_native.apply( target, slice.call(els) );
    } :

    // Support: IE<9
    // Otherwise append directly
    function( target, els ) {
      var j = target.length,
        i = 0;
      // Can't trust NodeList.length
      while ( (target[j++] = els[i++]) ) {}
      target.length = j - 1;
    }
  };
}

function Sizzle( selector, context, results, seed ) {
  var match, elem, m, nodeType,
    // QSA vars
    i, groups, old, nid, newContext, newSelector;

  if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
    setDocument( context );
  }

  context = context || document;
  results = results || [];

  if ( !selector || typeof selector !== "string" ) {
    return results;
  }

  if ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {
    return [];
  }

  if ( documentIsHTML && !seed ) {

    // Shortcuts
    if ( (match = rquickExpr.exec( selector )) ) {
      // Speed-up: Sizzle("#ID")
      if ( (m = match[1]) ) {
        if ( nodeType === 9 ) {
          elem = context.getElementById( m );
          // Check parentNode to catch when Blackberry 4.6 returns
          // nodes that are no longer in the document (jQuery #6963)
          if ( elem && elem.parentNode ) {
            // Handle the case where IE, Opera, and Webkit return items
            // by name instead of ID
            if ( elem.id === m ) {
              results.push( elem );
              return results;
            }
          } else {
            return results;
          }
        } else {
          // Context is not a document
          if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
            contains( context, elem ) && elem.id === m ) {
            results.push( elem );
            return results;
          }
        }

      // Speed-up: Sizzle("TAG")
      } else if ( match[2] ) {
        push.apply( results, context.getElementsByTagName( selector ) );
        return results;

      // Speed-up: Sizzle(".CLASS")
      } else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {
        push.apply( results, context.getElementsByClassName( m ) );
        return results;
      }
    }

    // QSA path
    if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
      nid = old = expando;
      newContext = context;
      newSelector = nodeType === 9 && selector;

      // qSA works strangely on Element-rooted queries
      // We can work around this by specifying an extra ID on the root
      // and working up from there (Thanks to Andrew Dupont for the technique)
      // IE 8 doesn't work on object elements
      if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
        groups = tokenize( selector );

        if ( (old = context.getAttribute("id")) ) {
          nid = old.replace( rescape, "\\$&" );
        } else {
          context.setAttribute( "id", nid );
        }
        nid = "[id='" + nid + "'] ";

        i = groups.length;
        while ( i-- ) {
          groups[i] = nid + toSelector( groups[i] );
        }
        newContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;
        newSelector = groups.join(",");
      }

      if ( newSelector ) {
        try {
          push.apply( results,
            newContext.querySelectorAll( newSelector )
          );
          return results;
        } catch(qsaError) {
        } finally {
          if ( !old ) {
            context.removeAttribute("id");
          }
        }
      }
    }
  }

  // All others
  return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *  property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *  deleting the oldest entry
 */
function createCache() {
  var keys = [];

  function cache( key, value ) {
    // Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
    if ( keys.push( key + " " ) > Expr.cacheLength ) {
      // Only keep the most recent entries
      delete cache[ keys.shift() ];
    }
    return (cache[ key + " " ] = value);
  }
  return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
  fn[ expando ] = true;
  return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
  var div = document.createElement("div");

  try {
    return !!fn( div );
  } catch (e) {
    return false;
  } finally {
    // Remove from its parent by default
    if ( div.parentNode ) {
      div.parentNode.removeChild( div );
    }
    // release memory in IE
    div = null;
  }
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
  var arr = attrs.split("|"),
    i = attrs.length;

  while ( i-- ) {
    Expr.attrHandle[ arr[i] ] = handler;
  }
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
  var cur = b && a,
    diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
      ( ~b.sourceIndex || MAX_NEGATIVE ) -
      ( ~a.sourceIndex || MAX_NEGATIVE );

  // Use IE sourceIndex if available on both nodes
  if ( diff ) {
    return diff;
  }

  // Check if b follows a
  if ( cur ) {
    while ( (cur = cur.nextSibling) ) {
      if ( cur === b ) {
        return -1;
      }
    }
  }

  return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
  return function( elem ) {
    var name = elem.nodeName.toLowerCase();
    return name === "input" && elem.type === type;
  };
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
  return function( elem ) {
    var name = elem.nodeName.toLowerCase();
    return (name === "input" || name === "button") && elem.type === type;
  };
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
  return markFunction(function( argument ) {
    argument = +argument;
    return markFunction(function( seed, matches ) {
      var j,
        matchIndexes = fn( [], seed.length, argument ),
        i = matchIndexes.length;

      // Match elements found at the specified indexes
      while ( i-- ) {
        if ( seed[ (j = matchIndexes[i]) ] ) {
          seed[j] = !(matches[j] = seed[j]);
        }
      }
    });
  });
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
  return context && typeof context.getElementsByTagName !== strundefined && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
  // documentElement is verified for cases where it doesn't yet exist
  // (such as loading iframes in IE - #4833)
  var documentElement = elem && (elem.ownerDocument || elem).documentElement;
  return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
  var hasCompare,
    doc = node ? node.ownerDocument || node : preferredDoc,
    parent = doc.defaultView;

  // If no document and documentElement is available, return
  if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
    return document;
  }

  // Set our document
  document = doc;
  docElem = doc.documentElement;

  // Support tests
  documentIsHTML = !isXML( doc );

  // Support: IE>8
  // If iframe document is assigned to "document" variable and if iframe has been reloaded,
  // IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
  // IE6-8 do not support the defaultView property so parent will be undefined
  if ( parent && parent !== parent.top ) {
    // IE11 does not have attachEvent, so all must suffer
    if ( parent.addEventListener ) {
      parent.addEventListener( "unload", function() {
        setDocument();
      }, false );
    } else if ( parent.attachEvent ) {
      parent.attachEvent( "onunload", function() {
        setDocument();
      });
    }
  }

  /* Attributes
  ---------------------------------------------------------------------- */

  // Support: IE<8
  // Verify that getAttribute really returns attributes and not properties (excepting IE8 booleans)
  support.attributes = assert(function( div ) {
    div.className = "i";
    return !div.getAttribute("className");
  });

  /* getElement(s)By*
  ---------------------------------------------------------------------- */

  // Check if getElementsByTagName("*") returns only elements
  support.getElementsByTagName = assert(function( div ) {
    div.appendChild( doc.createComment("") );
    return !div.getElementsByTagName("*").length;
  });

  // Check if getElementsByClassName can be trusted
  support.getElementsByClassName = rnative.test( doc.getElementsByClassName ) && assert(function( div ) {
    div.innerHTML = "<div class='a'></div><div class='a i'></div>";

    // Support: Safari<4
    // Catch class over-caching
    div.firstChild.className = "i";
    // Support: Opera<10
    // Catch gEBCN failure to find non-leading classes
    return div.getElementsByClassName("i").length === 2;
  });

  // Support: IE<10
  // Check if getElementById returns elements by name
  // The broken getElementById methods don't pick up programatically-set names,
  // so use a roundabout getElementsByName test
  support.getById = assert(function( div ) {
    docElem.appendChild( div ).id = expando;
    return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
  });

  // ID find and filter
  if ( support.getById ) {
    Expr.find["ID"] = function( id, context ) {
      if ( typeof context.getElementById !== strundefined && documentIsHTML ) {
        var m = context.getElementById( id );
        // Check parentNode to catch when Blackberry 4.6 returns
        // nodes that are no longer in the document #6963
        return m && m.parentNode ? [ m ] : [];
      }
    };
    Expr.filter["ID"] = function( id ) {
      var attrId = id.replace( runescape, funescape );
      return function( elem ) {
        return elem.getAttribute("id") === attrId;
      };
    };
  } else {
    // Support: IE6/7
    // getElementById is not reliable as a find shortcut
    delete Expr.find["ID"];

    Expr.filter["ID"] =  function( id ) {
      var attrId = id.replace( runescape, funescape );
      return function( elem ) {
        var node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode("id");
        return node && node.value === attrId;
      };
    };
  }

  // Tag
  Expr.find["TAG"] = support.getElementsByTagName ?
    function( tag, context ) {
      if ( typeof context.getElementsByTagName !== strundefined ) {
        return context.getElementsByTagName( tag );
      }
    } :
    function( tag, context ) {
      var elem,
        tmp = [],
        i = 0,
        results = context.getElementsByTagName( tag );

      // Filter out possible comments
      if ( tag === "*" ) {
        while ( (elem = results[i++]) ) {
          if ( elem.nodeType === 1 ) {
            tmp.push( elem );
          }
        }

        return tmp;
      }
      return results;
    };

  // Class
  Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
    if ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {
      return context.getElementsByClassName( className );
    }
  };

  /* QSA/matchesSelector
  ---------------------------------------------------------------------- */

  // QSA and matchesSelector support

  // matchesSelector(:active) reports false when true (IE9/Opera 11.5)
  rbuggyMatches = [];

  // qSa(:focus) reports false when true (Chrome 21)
  // We allow this because of a bug in IE8/9 that throws an error
  // whenever `document.activeElement` is accessed on an iframe
  // So, we allow :focus to pass through QSA all the time to avoid the IE error
  // See http://bugs.jquery.com/ticket/13378
  rbuggyQSA = [];

  if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
    // Build QSA regex
    // Regex strategy adopted from Diego Perini
    assert(function( div ) {
      // Select is set to empty string on purpose
      // This is to test IE's treatment of not explicitly
      // setting a boolean content attribute,
      // since its presence should be enough
      // http://bugs.jquery.com/ticket/12359
      div.innerHTML = "<select msallowclip=''><option selected=''></option></select>";

      // Support: IE8, Opera 11-12.16
      // Nothing should be selected when empty strings follow ^= or $= or *=
      // The test attribute must be unknown in Opera but "safe" for WinRT
      // http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
      if ( div.querySelectorAll("[msallowclip^='']").length ) {
        rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
      }

      // Support: IE8
      // Boolean attributes and "value" are not treated correctly
      if ( !div.querySelectorAll("[selected]").length ) {
        rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
      }

      // Webkit/Opera - :checked should return selected option elements
      // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
      // IE8 throws error here and will not see later tests
      if ( !div.querySelectorAll(":checked").length ) {
        rbuggyQSA.push(":checked");
      }
    });

    assert(function( div ) {
      // Support: Windows 8 Native Apps
      // The type and name attributes are restricted during .innerHTML assignment
      var input = doc.createElement("input");
      input.setAttribute( "type", "hidden" );
      div.appendChild( input ).setAttribute( "name", "D" );

      // Support: IE8
      // Enforce case-sensitivity of name attribute
      if ( div.querySelectorAll("[name=d]").length ) {
        rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
      }

      // FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
      // IE8 throws error here and will not see later tests
      if ( !div.querySelectorAll(":enabled").length ) {
        rbuggyQSA.push( ":enabled", ":disabled" );
      }

      // Opera 10-11 does not throw on post-comma invalid pseudos
      div.querySelectorAll("*,:x");
      rbuggyQSA.push(",.*:");
    });
  }

  if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
    docElem.webkitMatchesSelector ||
    docElem.mozMatchesSelector ||
    docElem.oMatchesSelector ||
    docElem.msMatchesSelector) )) ) {

    assert(function( div ) {
      // Check to see if it's possible to do matchesSelector
      // on a disconnected node (IE 9)
      support.disconnectedMatch = matches.call( div, "div" );

      // This should fail with an exception
      // Gecko does not error, returns false instead
      matches.call( div, "[s!='']:x" );
      rbuggyMatches.push( "!=", pseudos );
    });
  }

  rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
  rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

  /* Contains
  ---------------------------------------------------------------------- */
  hasCompare = rnative.test( docElem.compareDocumentPosition );

  // Element contains another
  // Purposefully does not implement inclusive descendent
  // As in, an element does not contain itself
  contains = hasCompare || rnative.test( docElem.contains ) ?
    function( a, b ) {
      var adown = a.nodeType === 9 ? a.documentElement : a,
        bup = b && b.parentNode;
      return a === bup || !!( bup && bup.nodeType === 1 && (
        adown.contains ?
          adown.contains( bup ) :
          a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
      ));
    } :
    function( a, b ) {
      if ( b ) {
        while ( (b = b.parentNode) ) {
          if ( b === a ) {
            return true;
          }
        }
      }
      return false;
    };

  /* Sorting
  ---------------------------------------------------------------------- */

  // Document order sorting
  sortOrder = hasCompare ?
  function( a, b ) {

    // Flag for duplicate removal
    if ( a === b ) {
      hasDuplicate = true;
      return 0;
    }

    // Sort on method existence if only one input has compareDocumentPosition
    var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
    if ( compare ) {
      return compare;
    }

    // Calculate position if both inputs belong to the same document
    compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
      a.compareDocumentPosition( b ) :

      // Otherwise we know they are disconnected
      1;

    // Disconnected nodes
    if ( compare & 1 ||
      (!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

      // Choose the first element that is related to our preferred document
      if ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
        return -1;
      }
      if ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
        return 1;
      }

      // Maintain original order
      return sortInput ?
        ( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
        0;
    }

    return compare & 4 ? -1 : 1;
  } :
  function( a, b ) {
    // Exit early if the nodes are identical
    if ( a === b ) {
      hasDuplicate = true;
      return 0;
    }

    var cur,
      i = 0,
      aup = a.parentNode,
      bup = b.parentNode,
      ap = [ a ],
      bp = [ b ];

    // Parentless nodes are either documents or disconnected
    if ( !aup || !bup ) {
      return a === doc ? -1 :
        b === doc ? 1 :
        aup ? -1 :
        bup ? 1 :
        sortInput ?
        ( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
        0;

    // If the nodes are siblings, we can do a quick check
    } else if ( aup === bup ) {
      return siblingCheck( a, b );
    }

    // Otherwise we need full lists of their ancestors for comparison
    cur = a;
    while ( (cur = cur.parentNode) ) {
      ap.unshift( cur );
    }
    cur = b;
    while ( (cur = cur.parentNode) ) {
      bp.unshift( cur );
    }

    // Walk down the tree looking for a discrepancy
    while ( ap[i] === bp[i] ) {
      i++;
    }

    return i ?
      // Do a sibling check if the nodes have a common ancestor
      siblingCheck( ap[i], bp[i] ) :

      // Otherwise nodes in our document sort first
      ap[i] === preferredDoc ? -1 :
      bp[i] === preferredDoc ? 1 :
      0;
  };

  return doc;
};

Sizzle.matches = function( expr, elements ) {
  return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
  // Set document vars if needed
  if ( ( elem.ownerDocument || elem ) !== document ) {
    setDocument( elem );
  }

  // Make sure that attribute selectors are quoted
  expr = expr.replace( rattributeQuotes, "='$1']" );

  if ( support.matchesSelector && documentIsHTML &&
    ( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
    ( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

    try {
      var ret = matches.call( elem, expr );

      // IE 9's matchesSelector returns false on disconnected nodes
      if ( ret || support.disconnectedMatch ||
          // As well, disconnected nodes are said to be in a document
          // fragment in IE 9
          elem.document && elem.document.nodeType !== 11 ) {
        return ret;
      }
    } catch(e) {}
  }

  return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
  // Set document vars if needed
  if ( ( context.ownerDocument || context ) !== document ) {
    setDocument( context );
  }
  return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
  // Set document vars if needed
  if ( ( elem.ownerDocument || elem ) !== document ) {
    setDocument( elem );
  }

  var fn = Expr.attrHandle[ name.toLowerCase() ],
    // Don't get fooled by Object.prototype properties (jQuery #13807)
    val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
      fn( elem, name, !documentIsHTML ) :
      undefined;

  return val !== undefined ?
    val :
    support.attributes || !documentIsHTML ?
      elem.getAttribute( name ) :
      (val = elem.getAttributeNode(name)) && val.specified ?
        val.value :
        null;
};

Sizzle.error = function( msg ) {
  throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
  var elem,
    duplicates = [],
    j = 0,
    i = 0;

  // Unless we *know* we can detect duplicates, assume their presence
  hasDuplicate = !support.detectDuplicates;
  sortInput = !support.sortStable && results.slice( 0 );
  results.sort( sortOrder );

  if ( hasDuplicate ) {
    while ( (elem = results[i++]) ) {
      if ( elem === results[ i ] ) {
        j = duplicates.push( i );
      }
    }
    while ( j-- ) {
      results.splice( duplicates[ j ], 1 );
    }
  }

  // Clear input after sorting to release objects
  // See https://github.com/jquery/sizzle/pull/225
  sortInput = null;

  return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
  var node,
    ret = "",
    i = 0,
    nodeType = elem.nodeType;

  if ( !nodeType ) {
    // If no nodeType, this is expected to be an array
    while ( (node = elem[i++]) ) {
      // Do not traverse comment nodes
      ret += getText( node );
    }
  } else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
    // Use textContent for elements
    // innerText usage removed for consistency of new lines (jQuery #11153)
    if ( typeof elem.textContent === "string" ) {
      return elem.textContent;
    } else {
      // Traverse its children
      for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
        ret += getText( elem );
      }
    }
  } else if ( nodeType === 3 || nodeType === 4 ) {
    return elem.nodeValue;
  }
  // Do not include comment or processing instruction nodes

  return ret;
};

Expr = Sizzle.selectors = {

  // Can be adjusted by the user
  cacheLength: 50,

  createPseudo: markFunction,

  match: matchExpr,

  attrHandle: {},

  find: {},

  relative: {
    ">": { dir: "parentNode", first: true },
    " ": { dir: "parentNode" },
    "+": { dir: "previousSibling", first: true },
    "~": { dir: "previousSibling" }
  },

  preFilter: {
    "ATTR": function( match ) {
      match[1] = match[1].replace( runescape, funescape );

      // Move the given value to match[3] whether quoted or unquoted
      match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

      if ( match[2] === "~=" ) {
        match[3] = " " + match[3] + " ";
      }

      return match.slice( 0, 4 );
    },

    "CHILD": function( match ) {
      /* matches from matchExpr["CHILD"]
        1 type (only|nth|...)
        2 what (child|of-type)
        3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
        4 xn-component of xn+y argument ([+-]?\d*n|)
        5 sign of xn-component
        6 x of xn-component
        7 sign of y-component
        8 y of y-component
      */
      match[1] = match[1].toLowerCase();

      if ( match[1].slice( 0, 3 ) === "nth" ) {
        // nth-* requires argument
        if ( !match[3] ) {
          Sizzle.error( match[0] );
        }

        // numeric x and y parameters for Expr.filter.CHILD
        // remember that false/true cast respectively to 0/1
        match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
        match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

      // other types prohibit arguments
      } else if ( match[3] ) {
        Sizzle.error( match[0] );
      }

      return match;
    },

    "PSEUDO": function( match ) {
      var excess,
        unquoted = !match[6] && match[2];

      if ( matchExpr["CHILD"].test( match[0] ) ) {
        return null;
      }

      // Accept quoted arguments as-is
      if ( match[3] ) {
        match[2] = match[4] || match[5] || "";

      // Strip excess characters from unquoted arguments
      } else if ( unquoted && rpseudo.test( unquoted ) &&
        // Get excess from tokenize (recursively)
        (excess = tokenize( unquoted, true )) &&
        // advance to the next closing parenthesis
        (excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

        // excess is a negative index
        match[0] = match[0].slice( 0, excess );
        match[2] = unquoted.slice( 0, excess );
      }

      // Return only captures needed by the pseudo filter method (type and argument)
      return match.slice( 0, 3 );
    }
  },

  filter: {

    "TAG": function( nodeNameSelector ) {
      var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
      return nodeNameSelector === "*" ?
        function() { return true; } :
        function( elem ) {
          return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
        };
    },

    "CLASS": function( className ) {
      var pattern = classCache[ className + " " ];

      return pattern ||
        (pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
        classCache( className, function( elem ) {
          return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute("class") || "" );
        });
    },

    "ATTR": function( name, operator, check ) {
      return function( elem ) {
        var result = Sizzle.attr( elem, name );

        if ( result == null ) {
          return operator === "!=";
        }
        if ( !operator ) {
          return true;
        }

        result += "";

        return operator === "=" ? result === check :
          operator === "!=" ? result !== check :
          operator === "^=" ? check && result.indexOf( check ) === 0 :
          operator === "*=" ? check && result.indexOf( check ) > -1 :
          operator === "$=" ? check && result.slice( -check.length ) === check :
          operator === "~=" ? ( " " + result + " " ).indexOf( check ) > -1 :
          operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
          false;
      };
    },

    "CHILD": function( type, what, argument, first, last ) {
      var simple = type.slice( 0, 3 ) !== "nth",
        forward = type.slice( -4 ) !== "last",
        ofType = what === "of-type";

      return first === 1 && last === 0 ?

        // Shortcut for :nth-*(n)
        function( elem ) {
          return !!elem.parentNode;
        } :

        function( elem, context, xml ) {
          var cache, outerCache, node, diff, nodeIndex, start,
            dir = simple !== forward ? "nextSibling" : "previousSibling",
            parent = elem.parentNode,
            name = ofType && elem.nodeName.toLowerCase(),
            useCache = !xml && !ofType;

          if ( parent ) {

            // :(first|last|only)-(child|of-type)
            if ( simple ) {
              while ( dir ) {
                node = elem;
                while ( (node = node[ dir ]) ) {
                  if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
                    return false;
                  }
                }
                // Reverse direction for :only-* (if we haven't yet done so)
                start = dir = type === "only" && !start && "nextSibling";
              }
              return true;
            }

            start = [ forward ? parent.firstChild : parent.lastChild ];

            // non-xml :nth-child(...) stores cache data on `parent`
            if ( forward && useCache ) {
              // Seek `elem` from a previously-cached index
              outerCache = parent[ expando ] || (parent[ expando ] = {});
              cache = outerCache[ type ] || [];
              nodeIndex = cache[0] === dirruns && cache[1];
              diff = cache[0] === dirruns && cache[2];
              node = nodeIndex && parent.childNodes[ nodeIndex ];

              while ( (node = ++nodeIndex && node && node[ dir ] ||

                // Fallback to seeking `elem` from the start
                (diff = nodeIndex = 0) || start.pop()) ) {

                // When found, cache indexes on `parent` and break
                if ( node.nodeType === 1 && ++diff && node === elem ) {
                  outerCache[ type ] = [ dirruns, nodeIndex, diff ];
                  break;
                }
              }

            // Use previously-cached element index if available
            } else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
              diff = cache[1];

            // xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
            } else {
              // Use the same loop as above to seek `elem` from the start
              while ( (node = ++nodeIndex && node && node[ dir ] ||
                (diff = nodeIndex = 0) || start.pop()) ) {

                if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
                  // Cache the index of each encountered element
                  if ( useCache ) {
                    (node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
                  }

                  if ( node === elem ) {
                    break;
                  }
                }
              }
            }

            // Incorporate the offset, then check against cycle size
            diff -= last;
            return diff === first || ( diff % first === 0 && diff / first >= 0 );
          }
        };
    },

    "PSEUDO": function( pseudo, argument ) {
      // pseudo-class names are case-insensitive
      // http://www.w3.org/TR/selectors/#pseudo-classes
      // Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
      // Remember that setFilters inherits from pseudos
      var args,
        fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
          Sizzle.error( "unsupported pseudo: " + pseudo );

      // The user may use createPseudo to indicate that
      // arguments are needed to create the filter function
      // just as Sizzle does
      if ( fn[ expando ] ) {
        return fn( argument );
      }

      // But maintain support for old signatures
      if ( fn.length > 1 ) {
        args = [ pseudo, pseudo, "", argument ];
        return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
          markFunction(function( seed, matches ) {
            var idx,
              matched = fn( seed, argument ),
              i = matched.length;
            while ( i-- ) {
              idx = indexOf.call( seed, matched[i] );
              seed[ idx ] = !( matches[ idx ] = matched[i] );
            }
          }) :
          function( elem ) {
            return fn( elem, 0, args );
          };
      }

      return fn;
    }
  },

  pseudos: {
    // Potentially complex pseudos
    "not": markFunction(function( selector ) {
      // Trim the selector passed to compile
      // to avoid treating leading and trailing
      // spaces as combinators
      var input = [],
        results = [],
        matcher = compile( selector.replace( rtrim, "$1" ) );

      return matcher[ expando ] ?
        markFunction(function( seed, matches, context, xml ) {
          var elem,
            unmatched = matcher( seed, null, xml, [] ),
            i = seed.length;

          // Match elements unmatched by `matcher`
          while ( i-- ) {
            if ( (elem = unmatched[i]) ) {
              seed[i] = !(matches[i] = elem);
            }
          }
        }) :
        function( elem, context, xml ) {
          input[0] = elem;
          matcher( input, null, xml, results );
          return !results.pop();
        };
    }),

    "has": markFunction(function( selector ) {
      return function( elem ) {
        return Sizzle( selector, elem ).length > 0;
      };
    }),

    "contains": markFunction(function( text ) {
      return function( elem ) {
        return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
      };
    }),

    // "Whether an element is represented by a :lang() selector
    // is based solely on the element's language value
    // being equal to the identifier C,
    // or beginning with the identifier C immediately followed by "-".
    // The matching of C against the element's language value is performed case-insensitively.
    // The identifier C does not have to be a valid language name."
    // http://www.w3.org/TR/selectors/#lang-pseudo
    "lang": markFunction( function( lang ) {
      // lang value must be a valid identifier
      if ( !ridentifier.test(lang || "") ) {
        Sizzle.error( "unsupported lang: " + lang );
      }
      lang = lang.replace( runescape, funescape ).toLowerCase();
      return function( elem ) {
        var elemLang;
        do {
          if ( (elemLang = documentIsHTML ?
            elem.lang :
            elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

            elemLang = elemLang.toLowerCase();
            return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
          }
        } while ( (elem = elem.parentNode) && elem.nodeType === 1 );
        return false;
      };
    }),

    // Miscellaneous
    "target": function( elem ) {
      var hash = window.location && window.location.hash;
      return hash && hash.slice( 1 ) === elem.id;
    },

    "root": function( elem ) {
      return elem === docElem;
    },

    "focus": function( elem ) {
      return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
    },

    // Boolean properties
    "enabled": function( elem ) {
      return elem.disabled === false;
    },

    "disabled": function( elem ) {
      return elem.disabled === true;
    },

    "checked": function( elem ) {
      // In CSS3, :checked should return both checked and selected elements
      // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
      var nodeName = elem.nodeName.toLowerCase();
      return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
    },

    "selected": function( elem ) {
      // Accessing this property makes selected-by-default
      // options in Safari work properly
      if ( elem.parentNode ) {
        elem.parentNode.selectedIndex;
      }

      return elem.selected === true;
    },

    // Contents
    "empty": function( elem ) {
      // http://www.w3.org/TR/selectors/#empty-pseudo
      // :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
      //   but not by others (comment: 8; processing instruction: 7; etc.)
      // nodeType < 6 works because attributes (2) do not appear as children
      for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
        if ( elem.nodeType < 6 ) {
          return false;
        }
      }
      return true;
    },

    "parent": function( elem ) {
      return !Expr.pseudos["empty"]( elem );
    },

    // Element/input types
    "header": function( elem ) {
      return rheader.test( elem.nodeName );
    },

    "input": function( elem ) {
      return rinputs.test( elem.nodeName );
    },

    "button": function( elem ) {
      var name = elem.nodeName.toLowerCase();
      return name === "input" && elem.type === "button" || name === "button";
    },

    "text": function( elem ) {
      var attr;
      return elem.nodeName.toLowerCase() === "input" &&
        elem.type === "text" &&

        // Support: IE<8
        // New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
        ( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
    },

    // Position-in-collection
    "first": createPositionalPseudo(function() {
      return [ 0 ];
    }),

    "last": createPositionalPseudo(function( matchIndexes, length ) {
      return [ length - 1 ];
    }),

    "eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
      return [ argument < 0 ? argument + length : argument ];
    }),

    "even": createPositionalPseudo(function( matchIndexes, length ) {
      var i = 0;
      for ( ; i < length; i += 2 ) {
        matchIndexes.push( i );
      }
      return matchIndexes;
    }),

    "odd": createPositionalPseudo(function( matchIndexes, length ) {
      var i = 1;
      for ( ; i < length; i += 2 ) {
        matchIndexes.push( i );
      }
      return matchIndexes;
    }),

    "lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
      var i = argument < 0 ? argument + length : argument;
      for ( ; --i >= 0; ) {
        matchIndexes.push( i );
      }
      return matchIndexes;
    }),

    "gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
      var i = argument < 0 ? argument + length : argument;
      for ( ; ++i < length; ) {
        matchIndexes.push( i );
      }
      return matchIndexes;
    })
  }
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
  Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
  Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
  var matched, match, tokens, type,
    soFar, groups, preFilters,
    cached = tokenCache[ selector + " " ];

  if ( cached ) {
    return parseOnly ? 0 : cached.slice( 0 );
  }

  soFar = selector;
  groups = [];
  preFilters = Expr.preFilter;

  while ( soFar ) {

    // Comma and first run
    if ( !matched || (match = rcomma.exec( soFar )) ) {
      if ( match ) {
        // Don't consume trailing commas as valid
        soFar = soFar.slice( match[0].length ) || soFar;
      }
      groups.push( (tokens = []) );
    }

    matched = false;

    // Combinators
    if ( (match = rcombinators.exec( soFar )) ) {
      matched = match.shift();
      tokens.push({
        value: matched,
        // Cast descendant combinators to space
        type: match[0].replace( rtrim, " " )
      });
      soFar = soFar.slice( matched.length );
    }

    // Filters
    for ( type in Expr.filter ) {
      if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
        (match = preFilters[ type ]( match ))) ) {
        matched = match.shift();
        tokens.push({
          value: matched,
          type: type,
          matches: match
        });
        soFar = soFar.slice( matched.length );
      }
    }

    if ( !matched ) {
      break;
    }
  }

  // Return the length of the invalid excess
  // if we're just parsing
  // Otherwise, throw an error or return tokens
  return parseOnly ?
    soFar.length :
    soFar ?
      Sizzle.error( selector ) :
      // Cache the tokens
      tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
  var i = 0,
    len = tokens.length,
    selector = "";
  for ( ; i < len; i++ ) {
    selector += tokens[i].value;
  }
  return selector;
}

function addCombinator( matcher, combinator, base ) {
  var dir = combinator.dir,
    checkNonElements = base && dir === "parentNode",
    doneName = done++;

  return combinator.first ?
    // Check against closest ancestor/preceding element
    function( elem, context, xml ) {
      while ( (elem = elem[ dir ]) ) {
        if ( elem.nodeType === 1 || checkNonElements ) {
          return matcher( elem, context, xml );
        }
      }
    } :

    // Check against all ancestor/preceding elements
    function( elem, context, xml ) {
      var oldCache, outerCache,
        newCache = [ dirruns, doneName ];

      // We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
      if ( xml ) {
        while ( (elem = elem[ dir ]) ) {
          if ( elem.nodeType === 1 || checkNonElements ) {
            if ( matcher( elem, context, xml ) ) {
              return true;
            }
          }
        }
      } else {
        while ( (elem = elem[ dir ]) ) {
          if ( elem.nodeType === 1 || checkNonElements ) {
            outerCache = elem[ expando ] || (elem[ expando ] = {});
            if ( (oldCache = outerCache[ dir ]) &&
              oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

              // Assign to newCache so results back-propagate to previous elements
              return (newCache[ 2 ] = oldCache[ 2 ]);
            } else {
              // Reuse newcache so results back-propagate to previous elements
              outerCache[ dir ] = newCache;

              // A match means we're done; a fail means we have to keep checking
              if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
                return true;
              }
            }
          }
        }
      }
    };
}

function elementMatcher( matchers ) {
  return matchers.length > 1 ?
    function( elem, context, xml ) {
      var i = matchers.length;
      while ( i-- ) {
        if ( !matchers[i]( elem, context, xml ) ) {
          return false;
        }
      }
      return true;
    } :
    matchers[0];
}

function multipleContexts( selector, contexts, results ) {
  var i = 0,
    len = contexts.length;
  for ( ; i < len; i++ ) {
    Sizzle( selector, contexts[i], results );
  }
  return results;
}

function condense( unmatched, map, filter, context, xml ) {
  var elem,
    newUnmatched = [],
    i = 0,
    len = unmatched.length,
    mapped = map != null;

  for ( ; i < len; i++ ) {
    if ( (elem = unmatched[i]) ) {
      if ( !filter || filter( elem, context, xml ) ) {
        newUnmatched.push( elem );
        if ( mapped ) {
          map.push( i );
        }
      }
    }
  }

  return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
  if ( postFilter && !postFilter[ expando ] ) {
    postFilter = setMatcher( postFilter );
  }
  if ( postFinder && !postFinder[ expando ] ) {
    postFinder = setMatcher( postFinder, postSelector );
  }
  return markFunction(function( seed, results, context, xml ) {
    var temp, i, elem,
      preMap = [],
      postMap = [],
      preexisting = results.length,

      // Get initial elements from seed or context
      elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

      // Prefilter to get matcher input, preserving a map for seed-results synchronization
      matcherIn = preFilter && ( seed || !selector ) ?
        condense( elems, preMap, preFilter, context, xml ) :
        elems,

      matcherOut = matcher ?
        // If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
        postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

          // ...intermediate processing is necessary
          [] :

          // ...otherwise use results directly
          results :
        matcherIn;

    // Find primary matches
    if ( matcher ) {
      matcher( matcherIn, matcherOut, context, xml );
    }

    // Apply postFilter
    if ( postFilter ) {
      temp = condense( matcherOut, postMap );
      postFilter( temp, [], context, xml );

      // Un-match failing elements by moving them back to matcherIn
      i = temp.length;
      while ( i-- ) {
        if ( (elem = temp[i]) ) {
          matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
        }
      }
    }

    if ( seed ) {
      if ( postFinder || preFilter ) {
        if ( postFinder ) {
          // Get the final matcherOut by condensing this intermediate into postFinder contexts
          temp = [];
          i = matcherOut.length;
          while ( i-- ) {
            if ( (elem = matcherOut[i]) ) {
              // Restore matcherIn since elem is not yet a final match
              temp.push( (matcherIn[i] = elem) );
            }
          }
          postFinder( null, (matcherOut = []), temp, xml );
        }

        // Move matched elements from seed to results to keep them synchronized
        i = matcherOut.length;
        while ( i-- ) {
          if ( (elem = matcherOut[i]) &&
            (temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {

            seed[temp] = !(results[temp] = elem);
          }
        }
      }

    // Add elements to results, through postFinder if defined
    } else {
      matcherOut = condense(
        matcherOut === results ?
          matcherOut.splice( preexisting, matcherOut.length ) :
          matcherOut
      );
      if ( postFinder ) {
        postFinder( null, results, matcherOut, xml );
      } else {
        push.apply( results, matcherOut );
      }
    }
  });
}

function matcherFromTokens( tokens ) {
  var checkContext, matcher, j,
    len = tokens.length,
    leadingRelative = Expr.relative[ tokens[0].type ],
    implicitRelative = leadingRelative || Expr.relative[" "],
    i = leadingRelative ? 1 : 0,

    // The foundational matcher ensures that elements are reachable from top-level context(s)
    matchContext = addCombinator( function( elem ) {
      return elem === checkContext;
    }, implicitRelative, true ),
    matchAnyContext = addCombinator( function( elem ) {
      return indexOf.call( checkContext, elem ) > -1;
    }, implicitRelative, true ),
    matchers = [ function( elem, context, xml ) {
      return ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
        (checkContext = context).nodeType ?
          matchContext( elem, context, xml ) :
          matchAnyContext( elem, context, xml ) );
    } ];

  for ( ; i < len; i++ ) {
    if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
      matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
    } else {
      matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

      // Return special upon seeing a positional matcher
      if ( matcher[ expando ] ) {
        // Find the next relative operator (if any) for proper handling
        j = ++i;
        for ( ; j < len; j++ ) {
          if ( Expr.relative[ tokens[j].type ] ) {
            break;
          }
        }
        return setMatcher(
          i > 1 && elementMatcher( matchers ),
          i > 1 && toSelector(
            // If the preceding token was a descendant combinator, insert an implicit any-element `*`
            tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
          ).replace( rtrim, "$1" ),
          matcher,
          i < j && matcherFromTokens( tokens.slice( i, j ) ),
          j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
          j < len && toSelector( tokens )
        );
      }
      matchers.push( matcher );
    }
  }

  return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
  var bySet = setMatchers.length > 0,
    byElement = elementMatchers.length > 0,
    superMatcher = function( seed, context, xml, results, outermost ) {
      var elem, j, matcher,
        matchedCount = 0,
        i = "0",
        unmatched = seed && [],
        setMatched = [],
        contextBackup = outermostContext,
        // We must always have either seed elements or outermost context
        elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
        // Use integer dirruns iff this is the outermost matcher
        dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
        len = elems.length;

      if ( outermost ) {
        outermostContext = context !== document && context;
      }

      // Add elements passing elementMatchers directly to results
      // Keep `i` a string if there are no elements so `matchedCount` will be "00" below
      // Support: IE<9, Safari
      // Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
      for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
        if ( byElement && elem ) {
          j = 0;
          while ( (matcher = elementMatchers[j++]) ) {
            if ( matcher( elem, context, xml ) ) {
              results.push( elem );
              break;
            }
          }
          if ( outermost ) {
            dirruns = dirrunsUnique;
          }
        }

        // Track unmatched elements for set filters
        if ( bySet ) {
          // They will have gone through all possible matchers
          if ( (elem = !matcher && elem) ) {
            matchedCount--;
          }

          // Lengthen the array for every element, matched or not
          if ( seed ) {
            unmatched.push( elem );
          }
        }
      }

      // Apply set filters to unmatched elements
      matchedCount += i;
      if ( bySet && i !== matchedCount ) {
        j = 0;
        while ( (matcher = setMatchers[j++]) ) {
          matcher( unmatched, setMatched, context, xml );
        }

        if ( seed ) {
          // Reintegrate element matches to eliminate the need for sorting
          if ( matchedCount > 0 ) {
            while ( i-- ) {
              if ( !(unmatched[i] || setMatched[i]) ) {
                setMatched[i] = pop.call( results );
              }
            }
          }

          // Discard index placeholder values to get only actual matches
          setMatched = condense( setMatched );
        }

        // Add matches to results
        push.apply( results, setMatched );

        // Seedless set matches succeeding multiple successful matchers stipulate sorting
        if ( outermost && !seed && setMatched.length > 0 &&
          ( matchedCount + setMatchers.length ) > 1 ) {

          Sizzle.uniqueSort( results );
        }
      }

      // Override manipulation of globals by nested matchers
      if ( outermost ) {
        dirruns = dirrunsUnique;
        outermostContext = contextBackup;
      }

      return unmatched;
    };

  return bySet ?
    markFunction( superMatcher ) :
    superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
  var i,
    setMatchers = [],
    elementMatchers = [],
    cached = compilerCache[ selector + " " ];

  if ( !cached ) {
    // Generate a function of recursive functions that can be used to check each element
    if ( !match ) {
      match = tokenize( selector );
    }
    i = match.length;
    while ( i-- ) {
      cached = matcherFromTokens( match[i] );
      if ( cached[ expando ] ) {
        setMatchers.push( cached );
      } else {
        elementMatchers.push( cached );
      }
    }

    // Cache the compiled function
    cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

    // Save selector and tokenization
    cached.selector = selector;
  }
  return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
  var i, tokens, token, type, find,
    compiled = typeof selector === "function" && selector,
    match = !seed && tokenize( (selector = compiled.selector || selector) );

  results = results || [];

  // Try to minimize operations if there is no seed and only one group
  if ( match.length === 1 ) {

    // Take a shortcut and set the context if the root selector is an ID
    tokens = match[0] = match[0].slice( 0 );
    if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
        support.getById && context.nodeType === 9 && documentIsHTML &&
        Expr.relative[ tokens[1].type ] ) {

      context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
      if ( !context ) {
        return results;

      // Precompiled matchers will still verify ancestry, so step up a level
      } else if ( compiled ) {
        context = context.parentNode;
      }

      selector = selector.slice( tokens.shift().value.length );
    }

    // Fetch a seed set for right-to-left matching
    i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
    while ( i-- ) {
      token = tokens[i];

      // Abort if we hit a combinator
      if ( Expr.relative[ (type = token.type) ] ) {
        break;
      }
      if ( (find = Expr.find[ type ]) ) {
        // Search, expanding context for leading sibling combinators
        if ( (seed = find(
          token.matches[0].replace( runescape, funescape ),
          rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
        )) ) {

          // If seed is empty or no tokens remain, we can return early
          tokens.splice( i, 1 );
          selector = seed.length && toSelector( tokens );
          if ( !selector ) {
            push.apply( results, seed );
            return results;
          }

          break;
        }
      }
    }
  }

  // Compile and execute a filtering function if one is not provided
  // Provide `match` to avoid retokenization if we modified the selector above
  ( compiled || compile( selector, match ) )(
    seed,
    context,
    !documentIsHTML,
    results,
    rsibling.test( selector ) && testContext( context.parentNode ) || context
  );
  return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome<14
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( div1 ) {
  // Should return 1, but returns 4 (following)
  return div1.compareDocumentPosition( document.createElement("div") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( div ) {
  div.innerHTML = "<a href='#'></a>";
  return div.firstChild.getAttribute("href") === "#" ;
}) ) {
  addHandle( "type|href|height|width", function( elem, name, isXML ) {
    if ( !isXML ) {
      return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
    }
  });
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( div ) {
  div.innerHTML = "<input/>";
  div.firstChild.setAttribute( "value", "" );
  return div.firstChild.getAttribute( "value" ) === "";
}) ) {
  addHandle( "value", function( elem, name, isXML ) {
    if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
      return elem.defaultValue;
    }
  });
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( div ) {
  return div.getAttribute("disabled") == null;
}) ) {
  addHandle( booleans, function( elem, name, isXML ) {
    var val;
    if ( !isXML ) {
      return elem[ name ] === true ? name.toLowerCase() :
          (val = elem.getAttributeNode( name )) && val.specified ?
          val.value :
        null;
    }
  });
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos;
jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;



var rneedsContext = jQuery.expr.match.needsContext;

var rsingleTag = (/^<(\w+)\s*\/?>(?:<\/\1>|)$/);



var risSimple = /^.[^:#\[\.,]*$/;

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
  if ( jQuery.isFunction( qualifier ) ) {
    return jQuery.grep( elements, function( elem, i ) {
      /* jshint -W018 */
      return !!qualifier.call( elem, i, elem ) !== not;
    });

  }

  if ( qualifier.nodeType ) {
    return jQuery.grep( elements, function( elem ) {
      return ( elem === qualifier ) !== not;
    });

  }

  if ( typeof qualifier === "string" ) {
    if ( risSimple.test( qualifier ) ) {
      return jQuery.filter( qualifier, elements, not );
    }

    qualifier = jQuery.filter( qualifier, elements );
  }

  return jQuery.grep( elements, function( elem ) {
    return ( jQuery.inArray( elem, qualifier ) >= 0 ) !== not;
  });
}

jQuery.filter = function( expr, elems, not ) {
  var elem = elems[ 0 ];

  if ( not ) {
    expr = ":not(" + expr + ")";
  }

  return elems.length === 1 && elem.nodeType === 1 ?
    jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
    jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
      return elem.nodeType === 1;
    }));
};

jQuery.fn.extend({
  find: function( selector ) {
    var i,
      ret = [],
      self = this,
      len = self.length;

    if ( typeof selector !== "string" ) {
      return this.pushStack( jQuery( selector ).filter(function() {
        for ( i = 0; i < len; i++ ) {
          if ( jQuery.contains( self[ i ], this ) ) {
            return true;
          }
        }
      }) );
    }

    for ( i = 0; i < len; i++ ) {
      jQuery.find( selector, self[ i ], ret );
    }

    // Needed because $( selector, context ) becomes $( context ).find( selector )
    ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
    ret.selector = this.selector ? this.selector + " " + selector : selector;
    return ret;
  },
  filter: function( selector ) {
    return this.pushStack( winnow(this, selector || [], false) );
  },
  not: function( selector ) {
    return this.pushStack( winnow(this, selector || [], true) );
  },
  is: function( selector ) {
    return !!winnow(
      this,

      // If this is a positional/relative selector, check membership in the returned set
      // so $("p:first").is("p:last") won't return true for a doc with two "p".
      typeof selector === "string" && rneedsContext.test( selector ) ?
        jQuery( selector ) :
        selector || [],
      false
    ).length;
  }
});


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

  // Use the correct document accordingly with window argument (sandbox)
  document = window.document,

  // A simple way to check for HTML strings
  // Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
  // Strict HTML recognition (#11290: must start with <)
  rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,

  init = jQuery.fn.init = function( selector, context ) {
    var match, elem;

    // HANDLE: $(""), $(null), $(undefined), $(false)
    if ( !selector ) {
      return this;
    }

    // Handle HTML strings
    if ( typeof selector === "string" ) {
      if ( selector.charAt(0) === "<" && selector.charAt( selector.length - 1 ) === ">" && selector.length >= 3 ) {
        // Assume that strings that start and end with <> are HTML and skip the regex check
        match = [ null, selector, null ];

      } else {
        match = rquickExpr.exec( selector );
      }

      // Match html or make sure no context is specified for #id
      if ( match && (match[1] || !context) ) {

        // HANDLE: $(html) -> $(array)
        if ( match[1] ) {
          context = context instanceof jQuery ? context[0] : context;

          // scripts is true for back-compat
          // Intentionally let the error be thrown if parseHTML is not present
          jQuery.merge( this, jQuery.parseHTML(
            match[1],
            context && context.nodeType ? context.ownerDocument || context : document,
            true
          ) );

          // HANDLE: $(html, props)
          if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
            for ( match in context ) {
              // Properties of context are called as methods if possible
              if ( jQuery.isFunction( this[ match ] ) ) {
                this[ match ]( context[ match ] );

              // ...and otherwise set as attributes
              } else {
                this.attr( match, context[ match ] );
              }
            }
          }

          return this;

        // HANDLE: $(#id)
        } else {
          elem = document.getElementById( match[2] );

          // Check parentNode to catch when Blackberry 4.6 returns
          // nodes that are no longer in the document #6963
          if ( elem && elem.parentNode ) {
            // Handle the case where IE and Opera return items
            // by name instead of ID
            if ( elem.id !== match[2] ) {
              return rootjQuery.find( selector );
            }

            // Otherwise, we inject the element directly into the jQuery object
            this.length = 1;
            this[0] = elem;
          }

          this.context = document;
          this.selector = selector;
          return this;
        }

      // HANDLE: $(expr, $(...))
      } else if ( !context || context.jquery ) {
        return ( context || rootjQuery ).find( selector );

      // HANDLE: $(expr, context)
      // (which is just equivalent to: $(context).find(expr)
      } else {
        return this.constructor( context ).find( selector );
      }

    // HANDLE: $(DOMElement)
    } else if ( selector.nodeType ) {
      this.context = this[0] = selector;
      this.length = 1;
      return this;

    // HANDLE: $(function)
    // Shortcut for document ready
    } else if ( jQuery.isFunction( selector ) ) {
      return typeof rootjQuery.ready !== "undefined" ?
        rootjQuery.ready( selector ) :
        // Execute immediately if ready is not present
        selector( jQuery );
    }

    if ( selector.selector !== undefined ) {
      this.selector = selector.selector;
      this.context = selector.context;
    }

    return jQuery.makeArray( selector, this );
  };

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,
  // methods guaranteed to produce a unique set when starting from a unique set
  guaranteedUnique = {
    children: true,
    contents: true,
    next: true,
    prev: true
  };

jQuery.extend({
  dir: function( elem, dir, until ) {
    var matched = [],
      cur = elem[ dir ];

    while ( cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery( cur ).is( until )) ) {
      if ( cur.nodeType === 1 ) {
        matched.push( cur );
      }
      cur = cur[dir];
    }
    return matched;
  },

  sibling: function( n, elem ) {
    var r = [];

    for ( ; n; n = n.nextSibling ) {
      if ( n.nodeType === 1 && n !== elem ) {
        r.push( n );
      }
    }

    return r;
  }
});

jQuery.fn.extend({
  has: function( target ) {
    var i,
      targets = jQuery( target, this ),
      len = targets.length;

    return this.filter(function() {
      for ( i = 0; i < len; i++ ) {
        if ( jQuery.contains( this, targets[i] ) ) {
          return true;
        }
      }
    });
  },

  closest: function( selectors, context ) {
    var cur,
      i = 0,
      l = this.length,
      matched = [],
      pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
        jQuery( selectors, context || this.context ) :
        0;

    for ( ; i < l; i++ ) {
      for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
        // Always skip document fragments
        if ( cur.nodeType < 11 && (pos ?
          pos.index(cur) > -1 :

          // Don't pass non-elements to Sizzle
          cur.nodeType === 1 &&
            jQuery.find.matchesSelector(cur, selectors)) ) {

          matched.push( cur );
          break;
        }
      }
    }

    return this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );
  },

  // Determine the position of an element within
  // the matched set of elements
  index: function( elem ) {

    // No argument, return index in parent
    if ( !elem ) {
      return ( this[0] && this[0].parentNode ) ? this.first().prevAll().length : -1;
    }

    // index in selector
    if ( typeof elem === "string" ) {
      return jQuery.inArray( this[0], jQuery( elem ) );
    }

    // Locate the position of the desired element
    return jQuery.inArray(
      // If it receives a jQuery object, the first element is used
      elem.jquery ? elem[0] : elem, this );
  },

  add: function( selector, context ) {
    return this.pushStack(
      jQuery.unique(
        jQuery.merge( this.get(), jQuery( selector, context ) )
      )
    );
  },

  addBack: function( selector ) {
    return this.add( selector == null ?
      this.prevObject : this.prevObject.filter(selector)
    );
  }
});

function sibling( cur, dir ) {
  do {
    cur = cur[ dir ];
  } while ( cur && cur.nodeType !== 1 );

  return cur;
}

jQuery.each({
  parent: function( elem ) {
    var parent = elem.parentNode;
    return parent && parent.nodeType !== 11 ? parent : null;
  },
  parents: function( elem ) {
    return jQuery.dir( elem, "parentNode" );
  },
  parentsUntil: function( elem, i, until ) {
    return jQuery.dir( elem, "parentNode", until );
  },
  next: function( elem ) {
    return sibling( elem, "nextSibling" );
  },
  prev: function( elem ) {
    return sibling( elem, "previousSibling" );
  },
  nextAll: function( elem ) {
    return jQuery.dir( elem, "nextSibling" );
  },
  prevAll: function( elem ) {
    return jQuery.dir( elem, "previousSibling" );
  },
  nextUntil: function( elem, i, until ) {
    return jQuery.dir( elem, "nextSibling", until );
  },
  prevUntil: function( elem, i, until ) {
    return jQuery.dir( elem, "previousSibling", until );
  },
  siblings: function( elem ) {
    return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
  },
  children: function( elem ) {
    return jQuery.sibling( elem.firstChild );
  },
  contents: function( elem ) {
    return jQuery.nodeName( elem, "iframe" ) ?
      elem.contentDocument || elem.contentWindow.document :
      jQuery.merge( [], elem.childNodes );
  }
}, function( name, fn ) {
  jQuery.fn[ name ] = function( until, selector ) {
    var ret = jQuery.map( this, fn, until );

    if ( name.slice( -5 ) !== "Until" ) {
      selector = until;
    }

    if ( selector && typeof selector === "string" ) {
      ret = jQuery.filter( selector, ret );
    }

    if ( this.length > 1 ) {
      // Remove duplicates
      if ( !guaranteedUnique[ name ] ) {
        ret = jQuery.unique( ret );
      }

      // Reverse order for parents* and prev-derivatives
      if ( rparentsprev.test( name ) ) {
        ret = ret.reverse();
      }
    }

    return this.pushStack( ret );
  };
});
var rnotwhite = (/\S+/g);



// String to Object options format cache
var optionsCache = {};

// Convert String-formatted options into Object-formatted ones and store in cache
function createOptions( options ) {
  var object = optionsCache[ options ] = {};
  jQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {
    object[ flag ] = true;
  });
  return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *  options: an optional list of space-separated options that will change how
 *      the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *  once:     will ensure the callback list can only be fired once (like a Deferred)
 *
 *  memory:     will keep track of previous values and will call any callback added
 *          after the list has been fired right away with the latest "memorized"
 *          values (like a Deferred)
 *
 *  unique:     will ensure a callback can only be added once (no duplicate in the list)
 *
 *  stopOnFalse:  interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

  // Convert options from String-formatted to Object-formatted if needed
  // (we check in cache first)
  options = typeof options === "string" ?
    ( optionsCache[ options ] || createOptions( options ) ) :
    jQuery.extend( {}, options );

  var // Flag to know if list is currently firing
    firing,
    // Last fire value (for non-forgettable lists)
    memory,
    // Flag to know if list was already fired
    fired,
    // End of the loop when firing
    firingLength,
    // Index of currently firing callback (modified by remove if needed)
    firingIndex,
    // First callback to fire (used internally by add and fireWith)
    firingStart,
    // Actual callback list
    list = [],
    // Stack of fire calls for repeatable lists
    stack = !options.once && [],
    // Fire callbacks
    fire = function( data ) {
      memory = options.memory && data;
      fired = true;
      firingIndex = firingStart || 0;
      firingStart = 0;
      firingLength = list.length;
      firing = true;
      for ( ; list && firingIndex < firingLength; firingIndex++ ) {
        if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
          memory = false; // To prevent further calls using add
          break;
        }
      }
      firing = false;
      if ( list ) {
        if ( stack ) {
          if ( stack.length ) {
            fire( stack.shift() );
          }
        } else if ( memory ) {
          list = [];
        } else {
          self.disable();
        }
      }
    },
    // Actual Callbacks object
    self = {
      // Add a callback or a collection of callbacks to the list
      add: function() {
        if ( list ) {
          // First, we save the current length
          var start = list.length;
          (function add( args ) {
            jQuery.each( args, function( _, arg ) {
              var type = jQuery.type( arg );
              if ( type === "function" ) {
                if ( !options.unique || !self.has( arg ) ) {
                  list.push( arg );
                }
              } else if ( arg && arg.length && type !== "string" ) {
                // Inspect recursively
                add( arg );
              }
            });
          })( arguments );
          // Do we need to add the callbacks to the
          // current firing batch?
          if ( firing ) {
            firingLength = list.length;
          // With memory, if we're not firing then
          // we should call right away
          } else if ( memory ) {
            firingStart = start;
            fire( memory );
          }
        }
        return this;
      },
      // Remove a callback from the list
      remove: function() {
        if ( list ) {
          jQuery.each( arguments, function( _, arg ) {
            var index;
            while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
              list.splice( index, 1 );
              // Handle firing indexes
              if ( firing ) {
                if ( index <= firingLength ) {
                  firingLength--;
                }
                if ( index <= firingIndex ) {
                  firingIndex--;
                }
              }
            }
          });
        }
        return this;
      },
      // Check if a given callback is in the list.
      // If no argument is given, return whether or not list has callbacks attached.
      has: function( fn ) {
        return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
      },
      // Remove all callbacks from the list
      empty: function() {
        list = [];
        firingLength = 0;
        return this;
      },
      // Have the list do nothing anymore
      disable: function() {
        list = stack = memory = undefined;
        return this;
      },
      // Is it disabled?
      disabled: function() {
        return !list;
      },
      // Lock the list in its current state
      lock: function() {
        stack = undefined;
        if ( !memory ) {
          self.disable();
        }
        return this;
      },
      // Is it locked?
      locked: function() {
        return !stack;
      },
      // Call all callbacks with the given context and arguments
      fireWith: function( context, args ) {
        if ( list && ( !fired || stack ) ) {
          args = args || [];
          args = [ context, args.slice ? args.slice() : args ];
          if ( firing ) {
            stack.push( args );
          } else {
            fire( args );
          }
        }
        return this;
      },
      // Call all the callbacks with the given arguments
      fire: function() {
        self.fireWith( this, arguments );
        return this;
      },
      // To know if the callbacks have already been called at least once
      fired: function() {
        return !!fired;
      }
    };

  return self;
};


jQuery.extend({

  Deferred: function( func ) {
    var tuples = [
        // action, add listener, listener list, final state
        [ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
        [ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
        [ "notify", "progress", jQuery.Callbacks("memory") ]
      ],
      state = "pending",
      promise = {
        state: function() {
          return state;
        },
        always: function() {
          deferred.done( arguments ).fail( arguments );
          return this;
        },
        then: function( /* fnDone, fnFail, fnProgress */ ) {
          var fns = arguments;
          return jQuery.Deferred(function( newDefer ) {
            jQuery.each( tuples, function( i, tuple ) {
              var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
              // deferred[ done | fail | progress ] for forwarding actions to newDefer
              deferred[ tuple[1] ](function() {
                var returned = fn && fn.apply( this, arguments );
                if ( returned && jQuery.isFunction( returned.promise ) ) {
                  returned.promise()
                    .done( newDefer.resolve )
                    .fail( newDefer.reject )
                    .progress( newDefer.notify );
                } else {
                  newDefer[ tuple[ 0 ] + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
                }
              });
            });
            fns = null;
          }).promise();
        },
        // Get a promise for this deferred
        // If obj is provided, the promise aspect is added to the object
        promise: function( obj ) {
          return obj != null ? jQuery.extend( obj, promise ) : promise;
        }
      },
      deferred = {};

    // Keep pipe for back-compat
    promise.pipe = promise.then;

    // Add list-specific methods
    jQuery.each( tuples, function( i, tuple ) {
      var list = tuple[ 2 ],
        stateString = tuple[ 3 ];

      // promise[ done | fail | progress ] = list.add
      promise[ tuple[1] ] = list.add;

      // Handle state
      if ( stateString ) {
        list.add(function() {
          // state = [ resolved | rejected ]
          state = stateString;

        // [ reject_list | resolve_list ].disable; progress_list.lock
        }, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
      }

      // deferred[ resolve | reject | notify ]
      deferred[ tuple[0] ] = function() {
        deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
        return this;
      };
      deferred[ tuple[0] + "With" ] = list.fireWith;
    });

    // Make the deferred a promise
    promise.promise( deferred );

    // Call given func if any
    if ( func ) {
      func.call( deferred, deferred );
    }

    // All done!
    return deferred;
  },

  // Deferred helper
  when: function( subordinate /* , ..., subordinateN */ ) {
    var i = 0,
      resolveValues = slice.call( arguments ),
      length = resolveValues.length,

      // the count of uncompleted subordinates
      remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

      // the master Deferred. If resolveValues consist of only a single Deferred, just use that.
      deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

      // Update function for both resolve and progress values
      updateFunc = function( i, contexts, values ) {
        return function( value ) {
          contexts[ i ] = this;
          values[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
          if ( values === progressValues ) {
            deferred.notifyWith( contexts, values );

          } else if ( !(--remaining) ) {
            deferred.resolveWith( contexts, values );
          }
        };
      },

      progressValues, progressContexts, resolveContexts;

    // add listeners to Deferred subordinates; treat others as resolved
    if ( length > 1 ) {
      progressValues = new Array( length );
      progressContexts = new Array( length );
      resolveContexts = new Array( length );
      for ( ; i < length; i++ ) {
        if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
          resolveValues[ i ].promise()
            .done( updateFunc( i, resolveContexts, resolveValues ) )
            .fail( deferred.reject )
            .progress( updateFunc( i, progressContexts, progressValues ) );
        } else {
          --remaining;
        }
      }
    }

    // if we're not waiting on anything, resolve the master
    if ( !remaining ) {
      deferred.resolveWith( resolveContexts, resolveValues );
    }

    return deferred.promise();
  }
});


// The deferred used on DOM ready
var readyList;

jQuery.fn.ready = function( fn ) {
  // Add the callback
  jQuery.ready.promise().done( fn );

  return this;
};

jQuery.extend({
  // Is the DOM ready to be used? Set to true once it occurs.
  isReady: false,

  // A counter to track how many items to wait for before
  // the ready event fires. See #6781
  readyWait: 1,

  // Hold (or release) the ready event
  holdReady: function( hold ) {
    if ( hold ) {
      jQuery.readyWait++;
    } else {
      jQuery.ready( true );
    }
  },

  // Handle when the DOM is ready
  ready: function( wait ) {

    // Abort if there are pending holds or we're already ready
    if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
      return;
    }

    // Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
    if ( !document.body ) {
      return setTimeout( jQuery.ready );
    }

    // Remember that the DOM is ready
    jQuery.isReady = true;

    // If a normal DOM Ready event fired, decrement, and wait if need be
    if ( wait !== true && --jQuery.readyWait > 0 ) {
      return;
    }

    // If there are functions bound, to execute
    readyList.resolveWith( document, [ jQuery ] );

    // Trigger any bound ready events
    if ( jQuery.fn.triggerHandler ) {
      jQuery( document ).triggerHandler( "ready" );
      jQuery( document ).off( "ready" );
    }
  }
});

/**
 * Clean-up method for dom ready events
 */
function detach() {
  if ( document.addEventListener ) {
    document.removeEventListener( "DOMContentLoaded", completed, false );
    window.removeEventListener( "load", completed, false );

  } else {
    document.detachEvent( "onreadystatechange", completed );
    window.detachEvent( "onload", completed );
  }
}

/**
 * The ready event handler and self cleanup method
 */
function completed() {
  // readyState === "complete" is good enough for us to call the dom ready in oldIE
  if ( document.addEventListener || event.type === "load" || document.readyState === "complete" ) {
    detach();
    jQuery.ready();
  }
}

jQuery.ready.promise = function( obj ) {
  if ( !readyList ) {

    readyList = jQuery.Deferred();

    // Catch cases where $(document).ready() is called after the browser event has already occurred.
    // we once tried to use readyState "interactive" here, but it caused issues like the one
    // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
    if ( document.readyState === "complete" ) {
      // Handle it asynchronously to allow scripts the opportunity to delay ready
      setTimeout( jQuery.ready );

    // Standards-based browsers support DOMContentLoaded
    } else if ( document.addEventListener ) {
      // Use the handy event callback
      document.addEventListener( "DOMContentLoaded", completed, false );

      // A fallback to window.onload, that will always work
      window.addEventListener( "load", completed, false );

    // If IE event model is used
    } else {
      // Ensure firing before onload, maybe late but safe also for iframes
      document.attachEvent( "onreadystatechange", completed );

      // A fallback to window.onload, that will always work
      window.attachEvent( "onload", completed );

      // If IE and not a frame
      // continually check to see if the document is ready
      var top = false;

      try {
        top = window.frameElement == null && document.documentElement;
      } catch(e) {}

      if ( top && top.doScroll ) {
        (function doScrollCheck() {
          if ( !jQuery.isReady ) {

            try {
              // Use the trick by Diego Perini
              // http://javascript.nwbox.com/IEContentLoaded/
              top.doScroll("left");
            } catch(e) {
              return setTimeout( doScrollCheck, 50 );
            }

            // detach all dom ready events
            detach();

            // and execute any waiting functions
            jQuery.ready();
          }
        })();
      }
    }
  }
  return readyList.promise( obj );
};


var strundefined = typeof undefined;



// Support: IE<9
// Iteration over object's inherited properties before its own
var i;
for ( i in jQuery( support ) ) {
  break;
}
support.ownLast = i !== "0";

// Note: most support tests are defined in their respective modules.
// false until the test is run
support.inlineBlockNeedsLayout = false;

// Execute ASAP in case we need to set body.style.zoom
jQuery(function() {
  // Minified: var a,b,c,d
  var val, div, body, container;

  body = document.getElementsByTagName( "body" )[ 0 ];
  if ( !body || !body.style ) {
    // Return for frameset docs that don't have a body
    return;
  }

  // Setup
  div = document.createElement( "div" );
  container = document.createElement( "div" );
  container.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
  body.appendChild( container ).appendChild( div );

  if ( typeof div.style.zoom !== strundefined ) {
    // Support: IE<8
    // Check if natively block-level elements act like inline-block
    // elements when setting their display to 'inline' and giving
    // them layout
    div.style.cssText = "display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1";

    support.inlineBlockNeedsLayout = val = div.offsetWidth === 3;
    if ( val ) {
      // Prevent IE 6 from affecting layout for positioned elements #11048
      // Prevent IE from shrinking the body in IE 7 mode #12869
      // Support: IE<8
      body.style.zoom = 1;
    }
  }

  body.removeChild( container );
});




(function() {
  var div = document.createElement( "div" );

  // Execute the test only if not already executed in another module.
  if (support.deleteExpando == null) {
    // Support: IE<9
    support.deleteExpando = true;
    try {
      delete div.test;
    } catch( e ) {
      support.deleteExpando = false;
    }
  }

  // Null elements to avoid leaks in IE.
  div = null;
})();


/**
 * Determines whether an object can have data
 */
jQuery.acceptData = function( elem ) {
  var noData = jQuery.noData[ (elem.nodeName + " ").toLowerCase() ],
    nodeType = +elem.nodeType || 1;

  // Do not set data on non-element DOM nodes because it will not be cleared (#8335).
  return nodeType !== 1 && nodeType !== 9 ?
    false :

    // Nodes accept data unless otherwise specified; rejection can be conditional
    !noData || noData !== true && elem.getAttribute("classid") === noData;
};


var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
  rmultiDash = /([A-Z])/g;

function dataAttr( elem, key, data ) {
  // If nothing was found internally, try to fetch any
  // data from the HTML5 data-* attribute
  if ( data === undefined && elem.nodeType === 1 ) {

    var name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();

    data = elem.getAttribute( name );

    if ( typeof data === "string" ) {
      try {
        data = data === "true" ? true :
          data === "false" ? false :
          data === "null" ? null :
          // Only convert to a number if it doesn't change the string
          +data + "" === data ? +data :
          rbrace.test( data ) ? jQuery.parseJSON( data ) :
          data;
      } catch( e ) {}

      // Make sure we set the data so it isn't changed later
      jQuery.data( elem, key, data );

    } else {
      data = undefined;
    }
  }

  return data;
}

// checks a cache object for emptiness
function isEmptyDataObject( obj ) {
  var name;
  for ( name in obj ) {

    // if the public data object is empty, the private is still empty
    if ( name === "data" && jQuery.isEmptyObject( obj[name] ) ) {
      continue;
    }
    if ( name !== "toJSON" ) {
      return false;
    }
  }

  return true;
}

function internalData( elem, name, data, pvt /* Internal Use Only */ ) {
  if ( !jQuery.acceptData( elem ) ) {
    return;
  }

  var ret, thisCache,
    internalKey = jQuery.expando,

    // We have to handle DOM nodes and JS objects differently because IE6-7
    // can't GC object references properly across the DOM-JS boundary
    isNode = elem.nodeType,

    // Only DOM nodes need the global jQuery cache; JS object data is
    // attached directly to the object so GC can occur automatically
    cache = isNode ? jQuery.cache : elem,

    // Only defining an ID for JS objects if its cache already exists allows
    // the code to shortcut on the same path as a DOM node with no cache
    id = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey;

  // Avoid doing any more work than we need to when trying to get data on an
  // object that has no data at all
  if ( (!id || !cache[id] || (!pvt && !cache[id].data)) && data === undefined && typeof name === "string" ) {
    return;
  }

  if ( !id ) {
    // Only DOM nodes need a new unique ID for each element since their data
    // ends up in the global cache
    if ( isNode ) {
      id = elem[ internalKey ] = deletedIds.pop() || jQuery.guid++;
    } else {
      id = internalKey;
    }
  }

  if ( !cache[ id ] ) {
    // Avoid exposing jQuery metadata on plain JS objects when the object
    // is serialized using JSON.stringify
    cache[ id ] = isNode ? {} : { toJSON: jQuery.noop };
  }

  // An object can be passed to jQuery.data instead of a key/value pair; this gets
  // shallow copied over onto the existing cache
  if ( typeof name === "object" || typeof name === "function" ) {
    if ( pvt ) {
      cache[ id ] = jQuery.extend( cache[ id ], name );
    } else {
      cache[ id ].data = jQuery.extend( cache[ id ].data, name );
    }
  }

  thisCache = cache[ id ];

  // jQuery data() is stored in a separate object inside the object's internal data
  // cache in order to avoid key collisions between internal data and user-defined
  // data.
  if ( !pvt ) {
    if ( !thisCache.data ) {
      thisCache.data = {};
    }

    thisCache = thisCache.data;
  }

  if ( data !== undefined ) {
    thisCache[ jQuery.camelCase( name ) ] = data;
  }

  // Check for both converted-to-camel and non-converted data property names
  // If a data property was specified
  if ( typeof name === "string" ) {

    // First Try to find as-is property data
    ret = thisCache[ name ];

    // Test for null|undefined property data
    if ( ret == null ) {

      // Try to find the camelCased property
      ret = thisCache[ jQuery.camelCase( name ) ];
    }
  } else {
    ret = thisCache;
  }

  return ret;
}

function internalRemoveData( elem, name, pvt ) {
  if ( !jQuery.acceptData( elem ) ) {
    return;
  }

  var thisCache, i,
    isNode = elem.nodeType,

    // See jQuery.data for more information
    cache = isNode ? jQuery.cache : elem,
    id = isNode ? elem[ jQuery.expando ] : jQuery.expando;

  // If there is already no cache entry for this object, there is no
  // purpose in continuing
  if ( !cache[ id ] ) {
    return;
  }

  if ( name ) {

    thisCache = pvt ? cache[ id ] : cache[ id ].data;

    if ( thisCache ) {

      // Support array or space separated string names for data keys
      if ( !jQuery.isArray( name ) ) {

        // try the string as a key before any manipulation
        if ( name in thisCache ) {
          name = [ name ];
        } else {

          // split the camel cased version by spaces unless a key with the spaces exists
          name = jQuery.camelCase( name );
          if ( name in thisCache ) {
            name = [ name ];
          } else {
            name = name.split(" ");
          }
        }
      } else {
        // If "name" is an array of keys...
        // When data is initially created, via ("key", "val") signature,
        // keys will be converted to camelCase.
        // Since there is no way to tell _how_ a key was added, remove
        // both plain key and camelCase key. #12786
        // This will only penalize the array argument path.
        name = name.concat( jQuery.map( name, jQuery.camelCase ) );
      }

      i = name.length;
      while ( i-- ) {
        delete thisCache[ name[i] ];
      }

      // If there is no data left in the cache, we want to continue
      // and let the cache object itself get destroyed
      if ( pvt ? !isEmptyDataObject(thisCache) : !jQuery.isEmptyObject(thisCache) ) {
        return;
      }
    }
  }

  // See jQuery.data for more information
  if ( !pvt ) {
    delete cache[ id ].data;

    // Don't destroy the parent cache unless the internal data object
    // had been the only thing left in it
    if ( !isEmptyDataObject( cache[ id ] ) ) {
      return;
    }
  }

  // Destroy the cache
  if ( isNode ) {
    jQuery.cleanData( [ elem ], true );

  // Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)
  /* jshint eqeqeq: false */
  } else if ( support.deleteExpando || cache != cache.window ) {
    /* jshint eqeqeq: true */
    delete cache[ id ];

  // When all else fails, null
  } else {
    cache[ id ] = null;
  }
}

jQuery.extend({
  cache: {},

  // The following elements (space-suffixed to avoid Object.prototype collisions)
  // throw uncatchable exceptions if you attempt to set expando properties
  noData: {
    "applet ": true,
    "embed ": true,
    // ...but Flash objects (which have this classid) *can* handle expandos
    "object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
  },

  hasData: function( elem ) {
    elem = elem.nodeType ? jQuery.cache[ elem[jQuery.expando] ] : elem[ jQuery.expando ];
    return !!elem && !isEmptyDataObject( elem );
  },

  data: function( elem, name, data ) {
    return internalData( elem, name, data );
  },

  removeData: function( elem, name ) {
    return internalRemoveData( elem, name );
  },

  // For internal use only.
  _data: function( elem, name, data ) {
    return internalData( elem, name, data, true );
  },

  _removeData: function( elem, name ) {
    return internalRemoveData( elem, name, true );
  }
});

jQuery.fn.extend({
  data: function( key, value ) {
    var i, name, data,
      elem = this[0],
      attrs = elem && elem.attributes;

    // Special expections of .data basically thwart jQuery.access,
    // so implement the relevant behavior ourselves

    // Gets all values
    if ( key === undefined ) {
      if ( this.length ) {
        data = jQuery.data( elem );

        if ( elem.nodeType === 1 && !jQuery._data( elem, "parsedAttrs" ) ) {
          i = attrs.length;
          while ( i-- ) {

            // Support: IE11+
            // The attrs elements can be null (#14894)
            if ( attrs[ i ] ) {
              name = attrs[ i ].name;
              if ( name.indexOf( "data-" ) === 0 ) {
                name = jQuery.camelCase( name.slice(5) );
                dataAttr( elem, name, data[ name ] );
              }
            }
          }
          jQuery._data( elem, "parsedAttrs", true );
        }
      }

      return data;
    }

    // Sets multiple values
    if ( typeof key === "object" ) {
      return this.each(function() {
        jQuery.data( this, key );
      });
    }

    return arguments.length > 1 ?

      // Sets one value
      this.each(function() {
        jQuery.data( this, key, value );
      }) :

      // Gets one value
      // Try to fetch any internally stored data first
      elem ? dataAttr( elem, key, jQuery.data( elem, key ) ) : undefined;
  },

  removeData: function( key ) {
    return this.each(function() {
      jQuery.removeData( this, key );
    });
  }
});


jQuery.extend({
  queue: function( elem, type, data ) {
    var queue;

    if ( elem ) {
      type = ( type || "fx" ) + "queue";
      queue = jQuery._data( elem, type );

      // Speed up dequeue by getting out quickly if this is just a lookup
      if ( data ) {
        if ( !queue || jQuery.isArray(data) ) {
          queue = jQuery._data( elem, type, jQuery.makeArray(data) );
        } else {
          queue.push( data );
        }
      }
      return queue || [];
    }
  },

  dequeue: function( elem, type ) {
    type = type || "fx";

    var queue = jQuery.queue( elem, type ),
      startLength = queue.length,
      fn = queue.shift(),
      hooks = jQuery._queueHooks( elem, type ),
      next = function() {
        jQuery.dequeue( elem, type );
      };

    // If the fx queue is dequeued, always remove the progress sentinel
    if ( fn === "inprogress" ) {
      fn = queue.shift();
      startLength--;
    }

    if ( fn ) {

      // Add a progress sentinel to prevent the fx queue from being
      // automatically dequeued
      if ( type === "fx" ) {
        queue.unshift( "inprogress" );
      }

      // clear up the last queue stop function
      delete hooks.stop;
      fn.call( elem, next, hooks );
    }

    if ( !startLength && hooks ) {
      hooks.empty.fire();
    }
  },

  // not intended for public consumption - generates a queueHooks object, or returns the current one
  _queueHooks: function( elem, type ) {
    var key = type + "queueHooks";
    return jQuery._data( elem, key ) || jQuery._data( elem, key, {
      empty: jQuery.Callbacks("once memory").add(function() {
        jQuery._removeData( elem, type + "queue" );
        jQuery._removeData( elem, key );
      })
    });
  }
});

jQuery.fn.extend({
  queue: function( type, data ) {
    var setter = 2;

    if ( typeof type !== "string" ) {
      data = type;
      type = "fx";
      setter--;
    }

    if ( arguments.length < setter ) {
      return jQuery.queue( this[0], type );
    }

    return data === undefined ?
      this :
      this.each(function() {
        var queue = jQuery.queue( this, type, data );

        // ensure a hooks for this queue
        jQuery._queueHooks( this, type );

        if ( type === "fx" && queue[0] !== "inprogress" ) {
          jQuery.dequeue( this, type );
        }
      });
  },
  dequeue: function( type ) {
    return this.each(function() {
      jQuery.dequeue( this, type );
    });
  },
  clearQueue: function( type ) {
    return this.queue( type || "fx", [] );
  },
  // Get a promise resolved when queues of a certain type
  // are emptied (fx is the type by default)
  promise: function( type, obj ) {
    var tmp,
      count = 1,
      defer = jQuery.Deferred(),
      elements = this,
      i = this.length,
      resolve = function() {
        if ( !( --count ) ) {
          defer.resolveWith( elements, [ elements ] );
        }
      };

    if ( typeof type !== "string" ) {
      obj = type;
      type = undefined;
    }
    type = type || "fx";

    while ( i-- ) {
      tmp = jQuery._data( elements[ i ], type + "queueHooks" );
      if ( tmp && tmp.empty ) {
        count++;
        tmp.empty.add( resolve );
      }
    }
    resolve();
    return defer.promise( obj );
  }
});
var pnum = (/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;

var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var isHidden = function( elem, el ) {
    // isHidden might be called from jQuery#filter function;
    // in that case, element will be second argument
    elem = el || elem;
    return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
  };



// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
  var i = 0,
    length = elems.length,
    bulk = key == null;

  // Sets many values
  if ( jQuery.type( key ) === "object" ) {
    chainable = true;
    for ( i in key ) {
      jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
    }

  // Sets one value
  } else if ( value !== undefined ) {
    chainable = true;

    if ( !jQuery.isFunction( value ) ) {
      raw = true;
    }

    if ( bulk ) {
      // Bulk operations run against the entire set
      if ( raw ) {
        fn.call( elems, value );
        fn = null;

      // ...except when executing function values
      } else {
        bulk = fn;
        fn = function( elem, key, value ) {
          return bulk.call( jQuery( elem ), value );
        };
      }
    }

    if ( fn ) {
      for ( ; i < length; i++ ) {
        fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
      }
    }
  }

  return chainable ?
    elems :

    // Gets
    bulk ?
      fn.call( elems ) :
      length ? fn( elems[0], key ) : emptyGet;
};
var rcheckableType = (/^(?:checkbox|radio)$/i);



(function() {
  // Minified: var a,b,c
  var input = document.createElement( "input" ),
    div = document.createElement( "div" ),
    fragment = document.createDocumentFragment();

  // Setup
  div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";

  // IE strips leading whitespace when .innerHTML is used
  support.leadingWhitespace = div.firstChild.nodeType === 3;

  // Make sure that tbody elements aren't automatically inserted
  // IE will insert them into empty tables
  support.tbody = !div.getElementsByTagName( "tbody" ).length;

  // Make sure that link elements get serialized correctly by innerHTML
  // This requires a wrapper element in IE
  support.htmlSerialize = !!div.getElementsByTagName( "link" ).length;

  // Makes sure cloning an html5 element does not cause problems
  // Where outerHTML is undefined, this still works
  support.html5Clone =
    document.createElement( "nav" ).cloneNode( true ).outerHTML !== "<:nav></:nav>";

  // Check if a disconnected checkbox will retain its checked
  // value of true after appended to the DOM (IE6/7)
  input.type = "checkbox";
  input.checked = true;
  fragment.appendChild( input );
  support.appendChecked = input.checked;

  // Make sure textarea (and checkbox) defaultValue is properly cloned
  // Support: IE6-IE11+
  div.innerHTML = "<textarea>x</textarea>";
  support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;

  // #11217 - WebKit loses check when the name is after the checked attribute
  fragment.appendChild( div );
  div.innerHTML = "<input type='radio' checked='checked' name='t'/>";

  // Support: Safari 5.1, iOS 5.1, Android 4.x, Android 2.3
  // old WebKit doesn't clone checked state correctly in fragments
  support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

  // Support: IE<9
  // Opera does not clone events (and typeof div.attachEvent === undefined).
  // IE9-10 clones events bound via attachEvent, but they don't trigger with .click()
  support.noCloneEvent = true;
  if ( div.attachEvent ) {
    div.attachEvent( "onclick", function() {
      support.noCloneEvent = false;
    });

    div.cloneNode( true ).click();
  }

  // Execute the test only if not already executed in another module.
  if (support.deleteExpando == null) {
    // Support: IE<9
    support.deleteExpando = true;
    try {
      delete div.test;
    } catch( e ) {
      support.deleteExpando = false;
    }
  }
})();


(function() {
  var i, eventName,
    div = document.createElement( "div" );

  // Support: IE<9 (lack submit/change bubble), Firefox 23+ (lack focusin event)
  for ( i in { submit: true, change: true, focusin: true }) {
    eventName = "on" + i;

    if ( !(support[ i + "Bubbles" ] = eventName in window) ) {
      // Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP)
      div.setAttribute( eventName, "t" );
      support[ i + "Bubbles" ] = div.attributes[ eventName ].expando === false;
    }
  }

  // Null elements to avoid leaks in IE.
  div = null;
})();


var rformElems = /^(?:input|select|textarea)$/i,
  rkeyEvent = /^key/,
  rmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,
  rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
  rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

function returnTrue() {
  return true;
}

function returnFalse() {
  return false;
}

function safeActiveElement() {
  try {
    return document.activeElement;
  } catch ( err ) { }
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

  global: {},

  add: function( elem, types, handler, data, selector ) {
    var tmp, events, t, handleObjIn,
      special, eventHandle, handleObj,
      handlers, type, namespaces, origType,
      elemData = jQuery._data( elem );

    // Don't attach events to noData or text/comment nodes (but allow plain objects)
    if ( !elemData ) {
      return;
    }

    // Caller can pass in an object of custom data in lieu of the handler
    if ( handler.handler ) {
      handleObjIn = handler;
      handler = handleObjIn.handler;
      selector = handleObjIn.selector;
    }

    // Make sure that the handler has a unique ID, used to find/remove it later
    if ( !handler.guid ) {
      handler.guid = jQuery.guid++;
    }

    // Init the element's event structure and main handler, if this is the first
    if ( !(events = elemData.events) ) {
      events = elemData.events = {};
    }
    if ( !(eventHandle = elemData.handle) ) {
      eventHandle = elemData.handle = function( e ) {
        // Discard the second event of a jQuery.event.trigger() and
        // when an event is called after a page has unloaded
        return typeof jQuery !== strundefined && (!e || jQuery.event.triggered !== e.type) ?
          jQuery.event.dispatch.apply( eventHandle.elem, arguments ) :
          undefined;
      };
      // Add elem as a property of the handle fn to prevent a memory leak with IE non-native events
      eventHandle.elem = elem;
    }

    // Handle multiple events separated by a space
    types = ( types || "" ).match( rnotwhite ) || [ "" ];
    t = types.length;
    while ( t-- ) {
      tmp = rtypenamespace.exec( types[t] ) || [];
      type = origType = tmp[1];
      namespaces = ( tmp[2] || "" ).split( "." ).sort();

      // There *must* be a type, no attaching namespace-only handlers
      if ( !type ) {
        continue;
      }

      // If event changes its type, use the special event handlers for the changed type
      special = jQuery.event.special[ type ] || {};

      // If selector defined, determine special event api type, otherwise given type
      type = ( selector ? special.delegateType : special.bindType ) || type;

      // Update special based on newly reset type
      special = jQuery.event.special[ type ] || {};

      // handleObj is passed to all event handlers
      handleObj = jQuery.extend({
        type: type,
        origType: origType,
        data: data,
        handler: handler,
        guid: handler.guid,
        selector: selector,
        needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
        namespace: namespaces.join(".")
      }, handleObjIn );

      // Init the event handler queue if we're the first
      if ( !(handlers = events[ type ]) ) {
        handlers = events[ type ] = [];
        handlers.delegateCount = 0;

        // Only use addEventListener/attachEvent if the special events handler returns false
        if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
          // Bind the global event handler to the element
          if ( elem.addEventListener ) {
            elem.addEventListener( type, eventHandle, false );

          } else if ( elem.attachEvent ) {
            elem.attachEvent( "on" + type, eventHandle );
          }
        }
      }

      if ( special.add ) {
        special.add.call( elem, handleObj );

        if ( !handleObj.handler.guid ) {
          handleObj.handler.guid = handler.guid;
        }
      }

      // Add to the element's handler list, delegates in front
      if ( selector ) {
        handlers.splice( handlers.delegateCount++, 0, handleObj );
      } else {
        handlers.push( handleObj );
      }

      // Keep track of which events have ever been used, for event optimization
      jQuery.event.global[ type ] = true;
    }

    // Nullify elem to prevent memory leaks in IE
    elem = null;
  },

  // Detach an event or set of events from an element
  remove: function( elem, types, handler, selector, mappedTypes ) {
    var j, handleObj, tmp,
      origCount, t, events,
      special, handlers, type,
      namespaces, origType,
      elemData = jQuery.hasData( elem ) && jQuery._data( elem );

    if ( !elemData || !(events = elemData.events) ) {
      return;
    }

    // Once for each type.namespace in types; type may be omitted
    types = ( types || "" ).match( rnotwhite ) || [ "" ];
    t = types.length;
    while ( t-- ) {
      tmp = rtypenamespace.exec( types[t] ) || [];
      type = origType = tmp[1];
      namespaces = ( tmp[2] || "" ).split( "." ).sort();

      // Unbind all events (on this namespace, if provided) for the element
      if ( !type ) {
        for ( type in events ) {
          jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
        }
        continue;
      }

      special = jQuery.event.special[ type ] || {};
      type = ( selector ? special.delegateType : special.bindType ) || type;
      handlers = events[ type ] || [];
      tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );

      // Remove matching events
      origCount = j = handlers.length;
      while ( j-- ) {
        handleObj = handlers[ j ];

        if ( ( mappedTypes || origType === handleObj.origType ) &&
          ( !handler || handler.guid === handleObj.guid ) &&
          ( !tmp || tmp.test( handleObj.namespace ) ) &&
          ( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
          handlers.splice( j, 1 );

          if ( handleObj.selector ) {
            handlers.delegateCount--;
          }
          if ( special.remove ) {
            special.remove.call( elem, handleObj );
          }
        }
      }

      // Remove generic event handler if we removed something and no more handlers exist
      // (avoids potential for endless recursion during removal of special event handlers)
      if ( origCount && !handlers.length ) {
        if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
          jQuery.removeEvent( elem, type, elemData.handle );
        }

        delete events[ type ];
      }
    }

    // Remove the expando if it's no longer used
    if ( jQuery.isEmptyObject( events ) ) {
      delete elemData.handle;

      // removeData also checks for emptiness and clears the expando if empty
      // so use it instead of delete
      jQuery._removeData( elem, "events" );
    }
  },

  trigger: function( event, data, elem, onlyHandlers ) {
    var handle, ontype, cur,
      bubbleType, special, tmp, i,
      eventPath = [ elem || document ],
      type = hasOwn.call( event, "type" ) ? event.type : event,
      namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

    cur = tmp = elem = elem || document;

    // Don't do events on text and comment nodes
    if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
      return;
    }

    // focus/blur morphs to focusin/out; ensure we're not firing them right now
    if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
      return;
    }

    if ( type.indexOf(".") >= 0 ) {
      // Namespaced trigger; create a regexp to match event type in handle()
      namespaces = type.split(".");
      type = namespaces.shift();
      namespaces.sort();
    }
    ontype = type.indexOf(":") < 0 && "on" + type;

    // Caller can pass in a jQuery.Event object, Object, or just an event type string
    event = event[ jQuery.expando ] ?
      event :
      new jQuery.Event( type, typeof event === "object" && event );

    // Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
    event.isTrigger = onlyHandlers ? 2 : 3;
    event.namespace = namespaces.join(".");
    event.namespace_re = event.namespace ?
      new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
      null;

    // Clean up the event in case it is being reused
    event.result = undefined;
    if ( !event.target ) {
      event.target = elem;
    }

    // Clone any incoming data and prepend the event, creating the handler arg list
    data = data == null ?
      [ event ] :
      jQuery.makeArray( data, [ event ] );

    // Allow special events to draw outside the lines
    special = jQuery.event.special[ type ] || {};
    if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
      return;
    }

    // Determine event propagation path in advance, per W3C events spec (#9951)
    // Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
    if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

      bubbleType = special.delegateType || type;
      if ( !rfocusMorph.test( bubbleType + type ) ) {
        cur = cur.parentNode;
      }
      for ( ; cur; cur = cur.parentNode ) {
        eventPath.push( cur );
        tmp = cur;
      }

      // Only add window if we got to document (e.g., not plain obj or detached DOM)
      if ( tmp === (elem.ownerDocument || document) ) {
        eventPath.push( tmp.defaultView || tmp.parentWindow || window );
      }
    }

    // Fire handlers on the event path
    i = 0;
    while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

      event.type = i > 1 ?
        bubbleType :
        special.bindType || type;

      // jQuery handler
      handle = ( jQuery._data( cur, "events" ) || {} )[ event.type ] && jQuery._data( cur, "handle" );
      if ( handle ) {
        handle.apply( cur, data );
      }

      // Native handler
      handle = ontype && cur[ ontype ];
      if ( handle && handle.apply && jQuery.acceptData( cur ) ) {
        event.result = handle.apply( cur, data );
        if ( event.result === false ) {
          event.preventDefault();
        }
      }
    }
    event.type = type;

    // If nobody prevented the default action, do it now
    if ( !onlyHandlers && !event.isDefaultPrevented() ) {

      if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
        jQuery.acceptData( elem ) ) {

        // Call a native DOM method on the target with the same name name as the event.
        // Can't use an .isFunction() check here because IE6/7 fails that test.
        // Don't do default actions on window, that's where global variables be (#6170)
        if ( ontype && elem[ type ] && !jQuery.isWindow( elem ) ) {

          // Don't re-trigger an onFOO event when we call its FOO() method
          tmp = elem[ ontype ];

          if ( tmp ) {
            elem[ ontype ] = null;
          }

          // Prevent re-triggering of the same event, since we already bubbled it above
          jQuery.event.triggered = type;
          try {
            elem[ type ]();
          } catch ( e ) {
            // IE<9 dies on focus/blur to hidden element (#1486,#12518)
            // only reproducible on winXP IE8 native, not IE9 in IE8 mode
          }
          jQuery.event.triggered = undefined;

          if ( tmp ) {
            elem[ ontype ] = tmp;
          }
        }
      }
    }

    return event.result;
  },

  dispatch: function( event ) {

    // Make a writable jQuery.Event from the native event object
    event = jQuery.event.fix( event );

    var i, ret, handleObj, matched, j,
      handlerQueue = [],
      args = slice.call( arguments ),
      handlers = ( jQuery._data( this, "events" ) || {} )[ event.type ] || [],
      special = jQuery.event.special[ event.type ] || {};

    // Use the fix-ed jQuery.Event rather than the (read-only) native event
    args[0] = event;
    event.delegateTarget = this;

    // Call the preDispatch hook for the mapped type, and let it bail if desired
    if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
      return;
    }

    // Determine handlers
    handlerQueue = jQuery.event.handlers.call( this, event, handlers );

    // Run delegates first; they may want to stop propagation beneath us
    i = 0;
    while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
      event.currentTarget = matched.elem;

      j = 0;
      while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

        // Triggered event must either 1) have no namespace, or
        // 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).
        if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

          event.handleObj = handleObj;
          event.data = handleObj.data;

          ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
              .apply( matched.elem, args );

          if ( ret !== undefined ) {
            if ( (event.result = ret) === false ) {
              event.preventDefault();
              event.stopPropagation();
            }
          }
        }
      }
    }

    // Call the postDispatch hook for the mapped type
    if ( special.postDispatch ) {
      special.postDispatch.call( this, event );
    }

    return event.result;
  },

  handlers: function( event, handlers ) {
    var sel, handleObj, matches, i,
      handlerQueue = [],
      delegateCount = handlers.delegateCount,
      cur = event.target;

    // Find delegate handlers
    // Black-hole SVG <use> instance trees (#13180)
    // Avoid non-left-click bubbling in Firefox (#3861)
    if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {

      /* jshint eqeqeq: false */
      for ( ; cur != this; cur = cur.parentNode || this ) {
        /* jshint eqeqeq: true */

        // Don't check non-elements (#13208)
        // Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
        if ( cur.nodeType === 1 && (cur.disabled !== true || event.type !== "click") ) {
          matches = [];
          for ( i = 0; i < delegateCount; i++ ) {
            handleObj = handlers[ i ];

            // Don't conflict with Object.prototype properties (#13203)
            sel = handleObj.selector + " ";

            if ( matches[ sel ] === undefined ) {
              matches[ sel ] = handleObj.needsContext ?
                jQuery( sel, this ).index( cur ) >= 0 :
                jQuery.find( sel, this, null, [ cur ] ).length;
            }
            if ( matches[ sel ] ) {
              matches.push( handleObj );
            }
          }
          if ( matches.length ) {
            handlerQueue.push({ elem: cur, handlers: matches });
          }
        }
      }
    }

    // Add the remaining (directly-bound) handlers
    if ( delegateCount < handlers.length ) {
      handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
    }

    return handlerQueue;
  },

  fix: function( event ) {
    if ( event[ jQuery.expando ] ) {
      return event;
    }

    // Create a writable copy of the event object and normalize some properties
    var i, prop, copy,
      type = event.type,
      originalEvent = event,
      fixHook = this.fixHooks[ type ];

    if ( !fixHook ) {
      this.fixHooks[ type ] = fixHook =
        rmouseEvent.test( type ) ? this.mouseHooks :
        rkeyEvent.test( type ) ? this.keyHooks :
        {};
    }
    copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

    event = new jQuery.Event( originalEvent );

    i = copy.length;
    while ( i-- ) {
      prop = copy[ i ];
      event[ prop ] = originalEvent[ prop ];
    }

    // Support: IE<9
    // Fix target property (#1925)
    if ( !event.target ) {
      event.target = originalEvent.srcElement || document;
    }

    // Support: Chrome 23+, Safari?
    // Target should not be a text node (#504, #13143)
    if ( event.target.nodeType === 3 ) {
      event.target = event.target.parentNode;
    }

    // Support: IE<9
    // For mouse/key events, metaKey==false if it's undefined (#3368, #11328)
    event.metaKey = !!event.metaKey;

    return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
  },

  // Includes some event props shared by KeyEvent and MouseEvent
  props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),

  fixHooks: {},

  keyHooks: {
    props: "char charCode key keyCode".split(" "),
    filter: function( event, original ) {

      // Add which for key events
      if ( event.which == null ) {
        event.which = original.charCode != null ? original.charCode : original.keyCode;
      }

      return event;
    }
  },

  mouseHooks: {
    props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
    filter: function( event, original ) {
      var body, eventDoc, doc,
        button = original.button,
        fromElement = original.fromElement;

      // Calculate pageX/Y if missing and clientX/Y available
      if ( event.pageX == null && original.clientX != null ) {
        eventDoc = event.target.ownerDocument || document;
        doc = eventDoc.documentElement;
        body = eventDoc.body;

        event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
        event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
      }

      // Add relatedTarget, if necessary
      if ( !event.relatedTarget && fromElement ) {
        event.relatedTarget = fromElement === event.target ? original.toElement : fromElement;
      }

      // Add which for click: 1 === left; 2 === middle; 3 === right
      // Note: button is not normalized, so don't use it
      if ( !event.which && button !== undefined ) {
        event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
      }

      return event;
    }
  },

  special: {
    load: {
      // Prevent triggered image.load events from bubbling to window.load
      noBubble: true
    },
    focus: {
      // Fire native event if possible so blur/focus sequence is correct
      trigger: function() {
        if ( this !== safeActiveElement() && this.focus ) {
          try {
            this.focus();
            return false;
          } catch ( e ) {
            // Support: IE<9
            // If we error on focus to hidden element (#1486, #12518),
            // let .trigger() run the handlers
          }
        }
      },
      delegateType: "focusin"
    },
    blur: {
      trigger: function() {
        if ( this === safeActiveElement() && this.blur ) {
          this.blur();
          return false;
        }
      },
      delegateType: "focusout"
    },
    click: {
      // For checkbox, fire native event so checked state will be right
      trigger: function() {
        if ( jQuery.nodeName( this, "input" ) && this.type === "checkbox" && this.click ) {
          this.click();
          return false;
        }
      },

      // For cross-browser consistency, don't fire native .click() on links
      _default: function( event ) {
        return jQuery.nodeName( event.target, "a" );
      }
    },

    beforeunload: {
      postDispatch: function( event ) {

        // Support: Firefox 20+
        // Firefox doesn't alert if the returnValue field is not set.
        if ( event.result !== undefined && event.originalEvent ) {
          event.originalEvent.returnValue = event.result;
        }
      }
    }
  },

  simulate: function( type, elem, event, bubble ) {
    // Piggyback on a donor event to simulate a different one.
    // Fake originalEvent to avoid donor's stopPropagation, but if the
    // simulated event prevents default then we do the same on the donor.
    var e = jQuery.extend(
      new jQuery.Event(),
      event,
      {
        type: type,
        isSimulated: true,
        originalEvent: {}
      }
    );
    if ( bubble ) {
      jQuery.event.trigger( e, null, elem );
    } else {
      jQuery.event.dispatch.call( elem, e );
    }
    if ( e.isDefaultPrevented() ) {
      event.preventDefault();
    }
  }
};

jQuery.removeEvent = document.removeEventListener ?
  function( elem, type, handle ) {
    if ( elem.removeEventListener ) {
      elem.removeEventListener( type, handle, false );
    }
  } :
  function( elem, type, handle ) {
    var name = "on" + type;

    if ( elem.detachEvent ) {

      // #8545, #7054, preventing memory leaks for custom events in IE6-8
      // detachEvent needed property on element, by name of that event, to properly expose it to GC
      if ( typeof elem[ name ] === strundefined ) {
        elem[ name ] = null;
      }

      elem.detachEvent( name, handle );
    }
  };

jQuery.Event = function( src, props ) {
  // Allow instantiation without the 'new' keyword
  if ( !(this instanceof jQuery.Event) ) {
    return new jQuery.Event( src, props );
  }

  // Event object
  if ( src && src.type ) {
    this.originalEvent = src;
    this.type = src.type;

    // Events bubbling up the document may have been marked as prevented
    // by a handler lower down the tree; reflect the correct value.
    this.isDefaultPrevented = src.defaultPrevented ||
        src.defaultPrevented === undefined &&
        // Support: IE < 9, Android < 4.0
        src.returnValue === false ?
      returnTrue :
      returnFalse;

  // Event type
  } else {
    this.type = src;
  }

  // Put explicitly provided properties onto the event object
  if ( props ) {
    jQuery.extend( this, props );
  }

  // Create a timestamp if incoming event doesn't have one
  this.timeStamp = src && src.timeStamp || jQuery.now();

  // Mark it as fixed
  this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
  isDefaultPrevented: returnFalse,
  isPropagationStopped: returnFalse,
  isImmediatePropagationStopped: returnFalse,

  preventDefault: function() {
    var e = this.originalEvent;

    this.isDefaultPrevented = returnTrue;
    if ( !e ) {
      return;
    }

    // If preventDefault exists, run it on the original event
    if ( e.preventDefault ) {
      e.preventDefault();

    // Support: IE
    // Otherwise set the returnValue property of the original event to false
    } else {
      e.returnValue = false;
    }
  },
  stopPropagation: function() {
    var e = this.originalEvent;

    this.isPropagationStopped = returnTrue;
    if ( !e ) {
      return;
    }
    // If stopPropagation exists, run it on the original event
    if ( e.stopPropagation ) {
      e.stopPropagation();
    }

    // Support: IE
    // Set the cancelBubble property of the original event to true
    e.cancelBubble = true;
  },
  stopImmediatePropagation: function() {
    var e = this.originalEvent;

    this.isImmediatePropagationStopped = returnTrue;

    if ( e && e.stopImmediatePropagation ) {
      e.stopImmediatePropagation();
    }

    this.stopPropagation();
  }
};

// Create mouseenter/leave events using mouseover/out and event-time checks
jQuery.each({
  mouseenter: "mouseover",
  mouseleave: "mouseout",
  pointerenter: "pointerover",
  pointerleave: "pointerout"
}, function( orig, fix ) {
  jQuery.event.special[ orig ] = {
    delegateType: fix,
    bindType: fix,

    handle: function( event ) {
      var ret,
        target = this,
        related = event.relatedTarget,
        handleObj = event.handleObj;

      // For mousenter/leave call the handler if related is outside the target.
      // NB: No relatedTarget if the mouse left/entered the browser window
      if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
        event.type = handleObj.origType;
        ret = handleObj.handler.apply( this, arguments );
        event.type = fix;
      }
      return ret;
    }
  };
});

// IE submit delegation
if ( !support.submitBubbles ) {

  jQuery.event.special.submit = {
    setup: function() {
      // Only need this for delegated form submit events
      if ( jQuery.nodeName( this, "form" ) ) {
        return false;
      }

      // Lazy-add a submit handler when a descendant form may potentially be submitted
      jQuery.event.add( this, "click._submit keypress._submit", function( e ) {
        // Node name check avoids a VML-related crash in IE (#9807)
        var elem = e.target,
          form = jQuery.nodeName( elem, "input" ) || jQuery.nodeName( elem, "button" ) ? elem.form : undefined;
        if ( form && !jQuery._data( form, "submitBubbles" ) ) {
          jQuery.event.add( form, "submit._submit", function( event ) {
            event._submit_bubble = true;
          });
          jQuery._data( form, "submitBubbles", true );
        }
      });
      // return undefined since we don't need an event listener
    },

    postDispatch: function( event ) {
      // If form was submitted by the user, bubble the event up the tree
      if ( event._submit_bubble ) {
        delete event._submit_bubble;
        if ( this.parentNode && !event.isTrigger ) {
          jQuery.event.simulate( "submit", this.parentNode, event, true );
        }
      }
    },

    teardown: function() {
      // Only need this for delegated form submit events
      if ( jQuery.nodeName( this, "form" ) ) {
        return false;
      }

      // Remove delegated handlers; cleanData eventually reaps submit handlers attached above
      jQuery.event.remove( this, "._submit" );
    }
  };
}

// IE change delegation and checkbox/radio fix
if ( !support.changeBubbles ) {

  jQuery.event.special.change = {

    setup: function() {

      if ( rformElems.test( this.nodeName ) ) {
        // IE doesn't fire change on a check/radio until blur; trigger it on click
        // after a propertychange. Eat the blur-change in special.change.handle.
        // This still fires onchange a second time for check/radio after blur.
        if ( this.type === "checkbox" || this.type === "radio" ) {
          jQuery.event.add( this, "propertychange._change", function( event ) {
            if ( event.originalEvent.propertyName === "checked" ) {
              this._just_changed = true;
            }
          });
          jQuery.event.add( this, "click._change", function( event ) {
            if ( this._just_changed && !event.isTrigger ) {
              this._just_changed = false;
            }
            // Allow triggered, simulated change events (#11500)
            jQuery.event.simulate( "change", this, event, true );
          });
        }
        return false;
      }
      // Delegated event; lazy-add a change handler on descendant inputs
      jQuery.event.add( this, "beforeactivate._change", function( e ) {
        var elem = e.target;

        if ( rformElems.test( elem.nodeName ) && !jQuery._data( elem, "changeBubbles" ) ) {
          jQuery.event.add( elem, "change._change", function( event ) {
            if ( this.parentNode && !event.isSimulated && !event.isTrigger ) {
              jQuery.event.simulate( "change", this.parentNode, event, true );
            }
          });
          jQuery._data( elem, "changeBubbles", true );
        }
      });
    },

    handle: function( event ) {
      var elem = event.target;

      // Swallow native change events from checkbox/radio, we already triggered them above
      if ( this !== elem || event.isSimulated || event.isTrigger || (elem.type !== "radio" && elem.type !== "checkbox") ) {
        return event.handleObj.handler.apply( this, arguments );
      }
    },

    teardown: function() {
      jQuery.event.remove( this, "._change" );

      return !rformElems.test( this.nodeName );
    }
  };
}

// Create "bubbling" focus and blur events
if ( !support.focusinBubbles ) {
  jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {

    // Attach a single capturing handler on the document while someone wants focusin/focusout
    var handler = function( event ) {
        jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
      };

    jQuery.event.special[ fix ] = {
      setup: function() {
        var doc = this.ownerDocument || this,
          attaches = jQuery._data( doc, fix );

        if ( !attaches ) {
          doc.addEventListener( orig, handler, true );
        }
        jQuery._data( doc, fix, ( attaches || 0 ) + 1 );
      },
      teardown: function() {
        var doc = this.ownerDocument || this,
          attaches = jQuery._data( doc, fix ) - 1;

        if ( !attaches ) {
          doc.removeEventListener( orig, handler, true );
          jQuery._removeData( doc, fix );
        } else {
          jQuery._data( doc, fix, attaches );
        }
      }
    };
  });
}

jQuery.fn.extend({

  on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
    var type, origFn;

    // Types can be a map of types/handlers
    if ( typeof types === "object" ) {
      // ( types-Object, selector, data )
      if ( typeof selector !== "string" ) {
        // ( types-Object, data )
        data = data || selector;
        selector = undefined;
      }
      for ( type in types ) {
        this.on( type, selector, data, types[ type ], one );
      }
      return this;
    }

    if ( data == null && fn == null ) {
      // ( types, fn )
      fn = selector;
      data = selector = undefined;
    } else if ( fn == null ) {
      if ( typeof selector === "string" ) {
        // ( types, selector, fn )
        fn = data;
        data = undefined;
      } else {
        // ( types, data, fn )
        fn = data;
        data = selector;
        selector = undefined;
      }
    }
    if ( fn === false ) {
      fn = returnFalse;
    } else if ( !fn ) {
      return this;
    }

    if ( one === 1 ) {
      origFn = fn;
      fn = function( event ) {
        // Can use an empty set, since event contains the info
        jQuery().off( event );
        return origFn.apply( this, arguments );
      };
      // Use same guid so caller can remove using origFn
      fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
    }
    return this.each( function() {
      jQuery.event.add( this, types, fn, data, selector );
    });
  },
  one: function( types, selector, data, fn ) {
    return this.on( types, selector, data, fn, 1 );
  },
  off: function( types, selector, fn ) {
    var handleObj, type;
    if ( types && types.preventDefault && types.handleObj ) {
      // ( event )  dispatched jQuery.Event
      handleObj = types.handleObj;
      jQuery( types.delegateTarget ).off(
        handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
        handleObj.selector,
        handleObj.handler
      );
      return this;
    }
    if ( typeof types === "object" ) {
      // ( types-object [, selector] )
      for ( type in types ) {
        this.off( type, selector, types[ type ] );
      }
      return this;
    }
    if ( selector === false || typeof selector === "function" ) {
      // ( types [, fn] )
      fn = selector;
      selector = undefined;
    }
    if ( fn === false ) {
      fn = returnFalse;
    }
    return this.each(function() {
      jQuery.event.remove( this, types, fn, selector );
    });
  },

  trigger: function( type, data ) {
    return this.each(function() {
      jQuery.event.trigger( type, data, this );
    });
  },
  triggerHandler: function( type, data ) {
    var elem = this[0];
    if ( elem ) {
      return jQuery.event.trigger( type, data, elem, true );
    }
  }
});


function createSafeFragment( document ) {
  var list = nodeNames.split( "|" ),
    safeFrag = document.createDocumentFragment();

  if ( safeFrag.createElement ) {
    while ( list.length ) {
      safeFrag.createElement(
        list.pop()
      );
    }
  }
  return safeFrag;
}

var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|" +
    "header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
  rinlinejQuery = / jQuery\d+="(?:null|\d+)"/g,
  rnoshimcache = new RegExp("<(?:" + nodeNames + ")[\\s/>]", "i"),
  rleadingWhitespace = /^\s+/,
  rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
  rtagName = /<([\w:]+)/,
  rtbody = /<tbody/i,
  rhtml = /<|&#?\w+;/,
  rnoInnerhtml = /<(?:script|style|link)/i,
  // checked="checked" or checked
  rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
  rscriptType = /^$|\/(?:java|ecma)script/i,
  rscriptTypeMasked = /^true\/(.*)/,
  rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,

  // We have to close these tags to support XHTML (#13200)
  wrapMap = {
    option: [ 1, "<select multiple='multiple'>", "</select>" ],
    legend: [ 1, "<fieldset>", "</fieldset>" ],
    area: [ 1, "<map>", "</map>" ],
    param: [ 1, "<object>", "</object>" ],
    thead: [ 1, "<table>", "</table>" ],
    tr: [ 2, "<table><tbody>", "</tbody></table>" ],
    col: [ 2, "<table><tbody></tbody><colgroup>", "</colgroup></table>" ],
    td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

    // IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,
    // unless wrapped in a div with non-breaking characters in front of it.
    _default: support.htmlSerialize ? [ 0, "", "" ] : [ 1, "X<div>", "</div>"  ]
  },
  safeFragment = createSafeFragment( document ),
  fragmentDiv = safeFragment.appendChild( document.createElement("div") );

wrapMap.optgroup = wrapMap.option;
wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

function getAll( context, tag ) {
  var elems, elem,
    i = 0,
    found = typeof context.getElementsByTagName !== strundefined ? context.getElementsByTagName( tag || "*" ) :
      typeof context.querySelectorAll !== strundefined ? context.querySelectorAll( tag || "*" ) :
      undefined;

  if ( !found ) {
    for ( found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++ ) {
      if ( !tag || jQuery.nodeName( elem, tag ) ) {
        found.push( elem );
      } else {
        jQuery.merge( found, getAll( elem, tag ) );
      }
    }
  }

  return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
    jQuery.merge( [ context ], found ) :
    found;
}

// Used in buildFragment, fixes the defaultChecked property
function fixDefaultChecked( elem ) {
  if ( rcheckableType.test( elem.type ) ) {
    elem.defaultChecked = elem.checked;
  }
}

// Support: IE<8
// Manipulating tables requires a tbody
function manipulationTarget( elem, content ) {
  return jQuery.nodeName( elem, "table" ) &&
    jQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ?

    elem.getElementsByTagName("tbody")[0] ||
      elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
    elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
  elem.type = (jQuery.find.attr( elem, "type" ) !== null) + "/" + elem.type;
  return elem;
}
function restoreScript( elem ) {
  var match = rscriptTypeMasked.exec( elem.type );
  if ( match ) {
    elem.type = match[1];
  } else {
    elem.removeAttribute("type");
  }
  return elem;
}

// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
  var elem,
    i = 0;
  for ( ; (elem = elems[i]) != null; i++ ) {
    jQuery._data( elem, "globalEval", !refElements || jQuery._data( refElements[i], "globalEval" ) );
  }
}

function cloneCopyEvent( src, dest ) {

  if ( dest.nodeType !== 1 || !jQuery.hasData( src ) ) {
    return;
  }

  var type, i, l,
    oldData = jQuery._data( src ),
    curData = jQuery._data( dest, oldData ),
    events = oldData.events;

  if ( events ) {
    delete curData.handle;
    curData.events = {};

    for ( type in events ) {
      for ( i = 0, l = events[ type ].length; i < l; i++ ) {
        jQuery.event.add( dest, type, events[ type ][ i ] );
      }
    }
  }

  // make the cloned public data object a copy from the original
  if ( curData.data ) {
    curData.data = jQuery.extend( {}, curData.data );
  }
}

function fixCloneNodeIssues( src, dest ) {
  var nodeName, e, data;

  // We do not need to do anything for non-Elements
  if ( dest.nodeType !== 1 ) {
    return;
  }

  nodeName = dest.nodeName.toLowerCase();

  // IE6-8 copies events bound via attachEvent when using cloneNode.
  if ( !support.noCloneEvent && dest[ jQuery.expando ] ) {
    data = jQuery._data( dest );

    for ( e in data.events ) {
      jQuery.removeEvent( dest, e, data.handle );
    }

    // Event data gets referenced instead of copied if the expando gets copied too
    dest.removeAttribute( jQuery.expando );
  }

  // IE blanks contents when cloning scripts, and tries to evaluate newly-set text
  if ( nodeName === "script" && dest.text !== src.text ) {
    disableScript( dest ).text = src.text;
    restoreScript( dest );

  // IE6-10 improperly clones children of object elements using classid.
  // IE10 throws NoModificationAllowedError if parent is null, #12132.
  } else if ( nodeName === "object" ) {
    if ( dest.parentNode ) {
      dest.outerHTML = src.outerHTML;
    }

    // This path appears unavoidable for IE9. When cloning an object
    // element in IE9, the outerHTML strategy above is not sufficient.
    // If the src has innerHTML and the destination does not,
    // copy the src.innerHTML into the dest.innerHTML. #10324
    if ( support.html5Clone && ( src.innerHTML && !jQuery.trim(dest.innerHTML) ) ) {
      dest.innerHTML = src.innerHTML;
    }

  } else if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
    // IE6-8 fails to persist the checked state of a cloned checkbox
    // or radio button. Worse, IE6-7 fail to give the cloned element
    // a checked appearance if the defaultChecked value isn't also set

    dest.defaultChecked = dest.checked = src.checked;

    // IE6-7 get confused and end up setting the value of a cloned
    // checkbox/radio button to an empty string instead of "on"
    if ( dest.value !== src.value ) {
      dest.value = src.value;
    }

  // IE6-8 fails to return the selected option to the default selected
  // state when cloning options
  } else if ( nodeName === "option" ) {
    dest.defaultSelected = dest.selected = src.defaultSelected;

  // IE6-8 fails to set the defaultValue to the correct value when
  // cloning other types of input fields
  } else if ( nodeName === "input" || nodeName === "textarea" ) {
    dest.defaultValue = src.defaultValue;
  }
}

jQuery.extend({
  clone: function( elem, dataAndEvents, deepDataAndEvents ) {
    var destElements, node, clone, i, srcElements,
      inPage = jQuery.contains( elem.ownerDocument, elem );

    if ( support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test( "<" + elem.nodeName + ">" ) ) {
      clone = elem.cloneNode( true );

    // IE<=8 does not properly clone detached, unknown element nodes
    } else {
      fragmentDiv.innerHTML = elem.outerHTML;
      fragmentDiv.removeChild( clone = fragmentDiv.firstChild );
    }

    if ( (!support.noCloneEvent || !support.noCloneChecked) &&
        (elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem) ) {

      // We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
      destElements = getAll( clone );
      srcElements = getAll( elem );

      // Fix all IE cloning issues
      for ( i = 0; (node = srcElements[i]) != null; ++i ) {
        // Ensure that the destination node is not null; Fixes #9587
        if ( destElements[i] ) {
          fixCloneNodeIssues( node, destElements[i] );
        }
      }
    }

    // Copy the events from the original to the clone
    if ( dataAndEvents ) {
      if ( deepDataAndEvents ) {
        srcElements = srcElements || getAll( elem );
        destElements = destElements || getAll( clone );

        for ( i = 0; (node = srcElements[i]) != null; i++ ) {
          cloneCopyEvent( node, destElements[i] );
        }
      } else {
        cloneCopyEvent( elem, clone );
      }
    }

    // Preserve script evaluation history
    destElements = getAll( clone, "script" );
    if ( destElements.length > 0 ) {
      setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
    }

    destElements = srcElements = node = null;

    // Return the cloned set
    return clone;
  },

  buildFragment: function( elems, context, scripts, selection ) {
    var j, elem, contains,
      tmp, tag, tbody, wrap,
      l = elems.length,

      // Ensure a safe fragment
      safe = createSafeFragment( context ),

      nodes = [],
      i = 0;

    for ( ; i < l; i++ ) {
      elem = elems[ i ];

      if ( elem || elem === 0 ) {

        // Add nodes directly
        if ( jQuery.type( elem ) === "object" ) {
          jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

        // Convert non-html into a text node
        } else if ( !rhtml.test( elem ) ) {
          nodes.push( context.createTextNode( elem ) );

        // Convert html into DOM nodes
        } else {
          tmp = tmp || safe.appendChild( context.createElement("div") );

          // Deserialize a standard representation
          tag = (rtagName.exec( elem ) || [ "", "" ])[ 1 ].toLowerCase();
          wrap = wrapMap[ tag ] || wrapMap._default;

          tmp.innerHTML = wrap[1] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[2];

          // Descend through wrappers to the right content
          j = wrap[0];
          while ( j-- ) {
            tmp = tmp.lastChild;
          }

          // Manually add leading whitespace removed by IE
          if ( !support.leadingWhitespace && rleadingWhitespace.test( elem ) ) {
            nodes.push( context.createTextNode( rleadingWhitespace.exec( elem )[0] ) );
          }

          // Remove IE's autoinserted <tbody> from table fragments
          if ( !support.tbody ) {

            // String was a <table>, *may* have spurious <tbody>
            elem = tag === "table" && !rtbody.test( elem ) ?
              tmp.firstChild :

              // String was a bare <thead> or <tfoot>
              wrap[1] === "<table>" && !rtbody.test( elem ) ?
                tmp :
                0;

            j = elem && elem.childNodes.length;
            while ( j-- ) {
              if ( jQuery.nodeName( (tbody = elem.childNodes[j]), "tbody" ) && !tbody.childNodes.length ) {
                elem.removeChild( tbody );
              }
            }
          }

          jQuery.merge( nodes, tmp.childNodes );

          // Fix #12392 for WebKit and IE > 9
          tmp.textContent = "";

          // Fix #12392 for oldIE
          while ( tmp.firstChild ) {
            tmp.removeChild( tmp.firstChild );
          }

          // Remember the top-level container for proper cleanup
          tmp = safe.lastChild;
        }
      }
    }

    // Fix #11356: Clear elements from fragment
    if ( tmp ) {
      safe.removeChild( tmp );
    }

    // Reset defaultChecked for any radios and checkboxes
    // about to be appended to the DOM in IE 6/7 (#8060)
    if ( !support.appendChecked ) {
      jQuery.grep( getAll( nodes, "input" ), fixDefaultChecked );
    }

    i = 0;
    while ( (elem = nodes[ i++ ]) ) {

      // #4087 - If origin and destination elements are the same, and this is
      // that element, do not do anything
      if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
        continue;
      }

      contains = jQuery.contains( elem.ownerDocument, elem );

      // Append to fragment
      tmp = getAll( safe.appendChild( elem ), "script" );

      // Preserve script evaluation history
      if ( contains ) {
        setGlobalEval( tmp );
      }

      // Capture executables
      if ( scripts ) {
        j = 0;
        while ( (elem = tmp[ j++ ]) ) {
          if ( rscriptType.test( elem.type || "" ) ) {
            scripts.push( elem );
          }
        }
      }
    }

    tmp = null;

    return safe;
  },

  cleanData: function( elems, /* internal */ acceptData ) {
    var elem, type, id, data,
      i = 0,
      internalKey = jQuery.expando,
      cache = jQuery.cache,
      deleteExpando = support.deleteExpando,
      special = jQuery.event.special;

    for ( ; (elem = elems[i]) != null; i++ ) {
      if ( acceptData || jQuery.acceptData( elem ) ) {

        id = elem[ internalKey ];
        data = id && cache[ id ];

        if ( data ) {
          if ( data.events ) {
            for ( type in data.events ) {
              if ( special[ type ] ) {
                jQuery.event.remove( elem, type );

              // This is a shortcut to avoid jQuery.event.remove's overhead
              } else {
                jQuery.removeEvent( elem, type, data.handle );
              }
            }
          }

          // Remove cache only if it was not already removed by jQuery.event.remove
          if ( cache[ id ] ) {

            delete cache[ id ];

            // IE does not allow us to delete expando properties from nodes,
            // nor does it have a removeAttribute function on Document nodes;
            // we must handle all of these cases
            if ( deleteExpando ) {
              delete elem[ internalKey ];

            } else if ( typeof elem.removeAttribute !== strundefined ) {
              elem.removeAttribute( internalKey );

            } else {
              elem[ internalKey ] = null;
            }

            deletedIds.push( id );
          }
        }
      }
    }
  }
});

jQuery.fn.extend({
  text: function( value ) {
    return access( this, function( value ) {
      return value === undefined ?
        jQuery.text( this ) :
        this.empty().append( ( this[0] && this[0].ownerDocument || document ).createTextNode( value ) );
    }, null, value, arguments.length );
  },

  append: function() {
    return this.domManip( arguments, function( elem ) {
      if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
        var target = manipulationTarget( this, elem );
        target.appendChild( elem );
      }
    });
  },

  prepend: function() {
    return this.domManip( arguments, function( elem ) {
      if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
        var target = manipulationTarget( this, elem );
        target.insertBefore( elem, target.firstChild );
      }
    });
  },

  before: function() {
    return this.domManip( arguments, function( elem ) {
      if ( this.parentNode ) {
        this.parentNode.insertBefore( elem, this );
      }
    });
  },

  after: function() {
    return this.domManip( arguments, function( elem ) {
      if ( this.parentNode ) {
        this.parentNode.insertBefore( elem, this.nextSibling );
      }
    });
  },

  remove: function( selector, keepData /* Internal Use Only */ ) {
    var elem,
      elems = selector ? jQuery.filter( selector, this ) : this,
      i = 0;

    for ( ; (elem = elems[i]) != null; i++ ) {

      if ( !keepData && elem.nodeType === 1 ) {
        jQuery.cleanData( getAll( elem ) );
      }

      if ( elem.parentNode ) {
        if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
          setGlobalEval( getAll( elem, "script" ) );
        }
        elem.parentNode.removeChild( elem );
      }
    }

    return this;
  },

  empty: function() {
    var elem,
      i = 0;

    for ( ; (elem = this[i]) != null; i++ ) {
      // Remove element nodes and prevent memory leaks
      if ( elem.nodeType === 1 ) {
        jQuery.cleanData( getAll( elem, false ) );
      }

      // Remove any remaining nodes
      while ( elem.firstChild ) {
        elem.removeChild( elem.firstChild );
      }

      // If this is a select, ensure that it displays empty (#12336)
      // Support: IE<9
      if ( elem.options && jQuery.nodeName( elem, "select" ) ) {
        elem.options.length = 0;
      }
    }

    return this;
  },

  clone: function( dataAndEvents, deepDataAndEvents ) {
    dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
    deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

    return this.map(function() {
      return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
    });
  },

  html: function( value ) {
    return access( this, function( value ) {
      var elem = this[ 0 ] || {},
        i = 0,
        l = this.length;

      if ( value === undefined ) {
        return elem.nodeType === 1 ?
          elem.innerHTML.replace( rinlinejQuery, "" ) :
          undefined;
      }

      // See if we can take a shortcut and just use innerHTML
      if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
        ( support.htmlSerialize || !rnoshimcache.test( value )  ) &&
        ( support.leadingWhitespace || !rleadingWhitespace.test( value ) ) &&
        !wrapMap[ (rtagName.exec( value ) || [ "", "" ])[ 1 ].toLowerCase() ] ) {

        value = value.replace( rxhtmlTag, "<$1></$2>" );

        try {
          for (; i < l; i++ ) {
            // Remove element nodes and prevent memory leaks
            elem = this[i] || {};
            if ( elem.nodeType === 1 ) {
              jQuery.cleanData( getAll( elem, false ) );
              elem.innerHTML = value;
            }
          }

          elem = 0;

        // If using innerHTML throws an exception, use the fallback method
        } catch(e) {}
      }

      if ( elem ) {
        this.empty().append( value );
      }
    }, null, value, arguments.length );
  },

  replaceWith: function() {
    var arg = arguments[ 0 ];

    // Make the changes, replacing each context element with the new content
    this.domManip( arguments, function( elem ) {
      arg = this.parentNode;

      jQuery.cleanData( getAll( this ) );

      if ( arg ) {
        arg.replaceChild( elem, this );
      }
    });

    // Force removal if there was no new content (e.g., from empty arguments)
    return arg && (arg.length || arg.nodeType) ? this : this.remove();
  },

  detach: function( selector ) {
    return this.remove( selector, true );
  },

  domManip: function( args, callback ) {

    // Flatten any nested arrays
    args = concat.apply( [], args );

    var first, node, hasScripts,
      scripts, doc, fragment,
      i = 0,
      l = this.length,
      set = this,
      iNoClone = l - 1,
      value = args[0],
      isFunction = jQuery.isFunction( value );

    // We can't cloneNode fragments that contain checked, in WebKit
    if ( isFunction ||
        ( l > 1 && typeof value === "string" &&
          !support.checkClone && rchecked.test( value ) ) ) {
      return this.each(function( index ) {
        var self = set.eq( index );
        if ( isFunction ) {
          args[0] = value.call( this, index, self.html() );
        }
        self.domManip( args, callback );
      });
    }

    if ( l ) {
      fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );
      first = fragment.firstChild;

      if ( fragment.childNodes.length === 1 ) {
        fragment = first;
      }

      if ( first ) {
        scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
        hasScripts = scripts.length;

        // Use the original fragment for the last item instead of the first because it can end up
        // being emptied incorrectly in certain situations (#8070).
        for ( ; i < l; i++ ) {
          node = fragment;

          if ( i !== iNoClone ) {
            node = jQuery.clone( node, true, true );

            // Keep references to cloned scripts for later restoration
            if ( hasScripts ) {
              jQuery.merge( scripts, getAll( node, "script" ) );
            }
          }

          callback.call( this[i], node, i );
        }

        if ( hasScripts ) {
          doc = scripts[ scripts.length - 1 ].ownerDocument;

          // Reenable scripts
          jQuery.map( scripts, restoreScript );

          // Evaluate executable scripts on first document insertion
          for ( i = 0; i < hasScripts; i++ ) {
            node = scripts[ i ];
            if ( rscriptType.test( node.type || "" ) &&
              !jQuery._data( node, "globalEval" ) && jQuery.contains( doc, node ) ) {

              if ( node.src ) {
                // Optional AJAX dependency, but won't run scripts if not present
                if ( jQuery._evalUrl ) {
                  jQuery._evalUrl( node.src );
                }
              } else {
                jQuery.globalEval( ( node.text || node.textContent || node.innerHTML || "" ).replace( rcleanScript, "" ) );
              }
            }
          }
        }

        // Fix #11809: Avoid leaking memory
        fragment = first = null;
      }
    }

    return this;
  }
});

jQuery.each({
  appendTo: "append",
  prependTo: "prepend",
  insertBefore: "before",
  insertAfter: "after",
  replaceAll: "replaceWith"
}, function( name, original ) {
  jQuery.fn[ name ] = function( selector ) {
    var elems,
      i = 0,
      ret = [],
      insert = jQuery( selector ),
      last = insert.length - 1;

    for ( ; i <= last; i++ ) {
      elems = i === last ? this : this.clone(true);
      jQuery( insert[i] )[ original ]( elems );

      // Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()
      push.apply( ret, elems.get() );
    }

    return this.pushStack( ret );
  };
});


var iframe,
  elemdisplay = {};

/**
 * Retrieve the actual display of a element
 * @param {String} name nodeName of the element
 * @param {Object} doc Document object
 */
// Called only from within defaultDisplay
function actualDisplay( name, doc ) {
  var style,
    elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),

    // getDefaultComputedStyle might be reliably used only on attached element
    display = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?

      // Use of this method is a temporary fix (more like optmization) until something better comes along,
      // since it was removed from specification and supported only in FF
      style.display : jQuery.css( elem[ 0 ], "display" );

  // We don't have any data stored on the element,
  // so use "detach" method as fast way to get rid of the element
  elem.detach();

  return display;
}

/**
 * Try to determine the default display value of an element
 * @param {String} nodeName
 */
function defaultDisplay( nodeName ) {
  var doc = document,
    display = elemdisplay[ nodeName ];

  if ( !display ) {
    display = actualDisplay( nodeName, doc );

    // If the simple way fails, read from inside an iframe
    if ( display === "none" || !display ) {

      // Use the already-created iframe if possible
      iframe = (iframe || jQuery( "<iframe frameborder='0' width='0' height='0'/>" )).appendTo( doc.documentElement );

      // Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
      doc = ( iframe[ 0 ].contentWindow || iframe[ 0 ].contentDocument ).document;

      // Support: IE
      doc.write();
      doc.close();

      display = actualDisplay( nodeName, doc );
      iframe.detach();
    }

    // Store the correct default display
    elemdisplay[ nodeName ] = display;
  }

  return display;
}


(function() {
  var shrinkWrapBlocksVal;

  support.shrinkWrapBlocks = function() {
    if ( shrinkWrapBlocksVal != null ) {
      return shrinkWrapBlocksVal;
    }

    // Will be changed later if needed.
    shrinkWrapBlocksVal = false;

    // Minified: var b,c,d
    var div, body, container;

    body = document.getElementsByTagName( "body" )[ 0 ];
    if ( !body || !body.style ) {
      // Test fired too early or in an unsupported environment, exit.
      return;
    }

    // Setup
    div = document.createElement( "div" );
    container = document.createElement( "div" );
    container.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
    body.appendChild( container ).appendChild( div );

    // Support: IE6
    // Check if elements with layout shrink-wrap their children
    if ( typeof div.style.zoom !== strundefined ) {
      // Reset CSS: box-sizing; display; margin; border
      div.style.cssText =
        // Support: Firefox<29, Android 2.3
        // Vendor-prefix box-sizing
        "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
        "box-sizing:content-box;display:block;margin:0;border:0;" +
        "padding:1px;width:1px;zoom:1";
      div.appendChild( document.createElement( "div" ) ).style.width = "5px";
      shrinkWrapBlocksVal = div.offsetWidth !== 3;
    }

    body.removeChild( container );

    return shrinkWrapBlocksVal;
  };

})();
var rmargin = (/^margin/);

var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );



var getStyles, curCSS,
  rposition = /^(top|right|bottom|left)$/;

if ( window.getComputedStyle ) {
  getStyles = function( elem ) {
    return elem.ownerDocument.defaultView.getComputedStyle( elem, null );
  };

  curCSS = function( elem, name, computed ) {
    var width, minWidth, maxWidth, ret,
      style = elem.style;

    computed = computed || getStyles( elem );

    // getPropertyValue is only needed for .css('filter') in IE9, see #12537
    ret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined;

    if ( computed ) {

      if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
        ret = jQuery.style( elem, name );
      }

      // A tribute to the "awesome hack by Dean Edwards"
      // Chrome < 17 and Safari 5.0 uses "computed value" instead of "used value" for margin-right
      // Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
      // this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
      if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {

        // Remember the original values
        width = style.width;
        minWidth = style.minWidth;
        maxWidth = style.maxWidth;

        // Put in the new values to get a computed value out
        style.minWidth = style.maxWidth = style.width = ret;
        ret = computed.width;

        // Revert the changed values
        style.width = width;
        style.minWidth = minWidth;
        style.maxWidth = maxWidth;
      }
    }

    // Support: IE
    // IE returns zIndex value as an integer.
    return ret === undefined ?
      ret :
      ret + "";
  };
} else if ( document.documentElement.currentStyle ) {
  getStyles = function( elem ) {
    return elem.currentStyle;
  };

  curCSS = function( elem, name, computed ) {
    var left, rs, rsLeft, ret,
      style = elem.style;

    computed = computed || getStyles( elem );
    ret = computed ? computed[ name ] : undefined;

    // Avoid setting ret to empty string here
    // so we don't default to auto
    if ( ret == null && style && style[ name ] ) {
      ret = style[ name ];
    }

    // From the awesome hack by Dean Edwards
    // http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291

    // If we're not dealing with a regular pixel number
    // but a number that has a weird ending, we need to convert it to pixels
    // but not position css attributes, as those are proportional to the parent element instead
    // and we can't measure the parent instead because it might trigger a "stacking dolls" problem
    if ( rnumnonpx.test( ret ) && !rposition.test( name ) ) {

      // Remember the original values
      left = style.left;
      rs = elem.runtimeStyle;
      rsLeft = rs && rs.left;

      // Put in the new values to get a computed value out
      if ( rsLeft ) {
        rs.left = elem.currentStyle.left;
      }
      style.left = name === "fontSize" ? "1em" : ret;
      ret = style.pixelLeft + "px";

      // Revert the changed values
      style.left = left;
      if ( rsLeft ) {
        rs.left = rsLeft;
      }
    }

    // Support: IE
    // IE returns zIndex value as an integer.
    return ret === undefined ?
      ret :
      ret + "" || "auto";
  };
}




function addGetHookIf( conditionFn, hookFn ) {
  // Define the hook, we'll check on the first run if it's really needed.
  return {
    get: function() {
      var condition = conditionFn();

      if ( condition == null ) {
        // The test was not ready at this point; screw the hook this time
        // but check again when needed next time.
        return;
      }

      if ( condition ) {
        // Hook not needed (or it's not possible to use it due to missing dependency),
        // remove it.
        // Since there are no other hooks for marginRight, remove the whole object.
        delete this.get;
        return;
      }

      // Hook needed; redefine it so that the support test is not executed again.

      return (this.get = hookFn).apply( this, arguments );
    }
  };
}


(function() {
  // Minified: var b,c,d,e,f,g, h,i
  var div, style, a, pixelPositionVal, boxSizingReliableVal,
    reliableHiddenOffsetsVal, reliableMarginRightVal;

  // Setup
  div = document.createElement( "div" );
  div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
  a = div.getElementsByTagName( "a" )[ 0 ];
  style = a && a.style;

  // Finish early in limited (non-browser) environments
  if ( !style ) {
    return;
  }

  style.cssText = "float:left;opacity:.5";

  // Support: IE<9
  // Make sure that element opacity exists (as opposed to filter)
  support.opacity = style.opacity === "0.5";

  // Verify style float existence
  // (IE uses styleFloat instead of cssFloat)
  support.cssFloat = !!style.cssFloat;

  div.style.backgroundClip = "content-box";
  div.cloneNode( true ).style.backgroundClip = "";
  support.clearCloneStyle = div.style.backgroundClip === "content-box";

  // Support: Firefox<29, Android 2.3
  // Vendor-prefix box-sizing
  support.boxSizing = style.boxSizing === "" || style.MozBoxSizing === "" ||
    style.WebkitBoxSizing === "";

  jQuery.extend(support, {
    reliableHiddenOffsets: function() {
      if ( reliableHiddenOffsetsVal == null ) {
        computeStyleTests();
      }
      return reliableHiddenOffsetsVal;
    },

    boxSizingReliable: function() {
      if ( boxSizingReliableVal == null ) {
        computeStyleTests();
      }
      return boxSizingReliableVal;
    },

    pixelPosition: function() {
      if ( pixelPositionVal == null ) {
        computeStyleTests();
      }
      return pixelPositionVal;
    },

    // Support: Android 2.3
    reliableMarginRight: function() {
      if ( reliableMarginRightVal == null ) {
        computeStyleTests();
      }
      return reliableMarginRightVal;
    }
  });

  function computeStyleTests() {
    // Minified: var b,c,d,j
    var div, body, container, contents;

    body = document.getElementsByTagName( "body" )[ 0 ];
    if ( !body || !body.style ) {
      // Test fired too early or in an unsupported environment, exit.
      return;
    }

    // Setup
    div = document.createElement( "div" );
    container = document.createElement( "div" );
    container.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
    body.appendChild( container ).appendChild( div );

    div.style.cssText =
      // Support: Firefox<29, Android 2.3
      // Vendor-prefix box-sizing
      "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;" +
      "box-sizing:border-box;display:block;margin-top:1%;top:1%;" +
      "border:1px;padding:1px;width:4px;position:absolute";

    // Support: IE<9
    // Assume reasonable values in the absence of getComputedStyle
    pixelPositionVal = boxSizingReliableVal = false;
    reliableMarginRightVal = true;

    // Check for getComputedStyle so that this code is not run in IE<9.
    if ( window.getComputedStyle ) {
      pixelPositionVal = ( window.getComputedStyle( div, null ) || {} ).top !== "1%";
      boxSizingReliableVal =
        ( window.getComputedStyle( div, null ) || { width: "4px" } ).width === "4px";

      // Support: Android 2.3
      // Div with explicit width and no margin-right incorrectly
      // gets computed margin-right based on width of container (#3333)
      // WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
      contents = div.appendChild( document.createElement( "div" ) );

      // Reset CSS: box-sizing; display; margin; border; padding
      contents.style.cssText = div.style.cssText =
        // Support: Firefox<29, Android 2.3
        // Vendor-prefix box-sizing
        "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
        "box-sizing:content-box;display:block;margin:0;border:0;padding:0";
      contents.style.marginRight = contents.style.width = "0";
      div.style.width = "1px";

      reliableMarginRightVal =
        !parseFloat( ( window.getComputedStyle( contents, null ) || {} ).marginRight );
    }

    // Support: IE8
    // Check if table cells still have offsetWidth/Height when they are set
    // to display:none and there are still other visible table cells in a
    // table row; if so, offsetWidth/Height are not reliable for use when
    // determining if an element has been hidden directly using
    // display:none (it is still safe to use offsets if a parent element is
    // hidden; don safety goggles and see bug #4512 for more information).
    div.innerHTML = "<table><tr><td></td><td>t</td></tr></table>";
    contents = div.getElementsByTagName( "td" );
    contents[ 0 ].style.cssText = "margin:0;border:0;padding:0;display:none";
    reliableHiddenOffsetsVal = contents[ 0 ].offsetHeight === 0;
    if ( reliableHiddenOffsetsVal ) {
      contents[ 0 ].style.display = "";
      contents[ 1 ].style.display = "none";
      reliableHiddenOffsetsVal = contents[ 0 ].offsetHeight === 0;
    }

    body.removeChild( container );
  }

})();


// A method for quickly swapping in/out CSS properties to get correct calculations.
jQuery.swap = function( elem, options, callback, args ) {
  var ret, name,
    old = {};

  // Remember the old values, and insert the new ones
  for ( name in options ) {
    old[ name ] = elem.style[ name ];
    elem.style[ name ] = options[ name ];
  }

  ret = callback.apply( elem, args || [] );

  // Revert the old values
  for ( name in options ) {
    elem.style[ name ] = old[ name ];
  }

  return ret;
};


var
    ralpha = /alpha\([^)]*\)/i,
  ropacity = /opacity\s*=\s*([^)]*)/,

  // swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
  // see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
  rdisplayswap = /^(none|table(?!-c[ea]).+)/,
  rnumsplit = new RegExp( "^(" + pnum + ")(.*)$", "i" ),
  rrelNum = new RegExp( "^([+-])=(" + pnum + ")", "i" ),

  cssShow = { position: "absolute", visibility: "hidden", display: "block" },
  cssNormalTransform = {
    letterSpacing: "0",
    fontWeight: "400"
  },

  cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];


// return a css property mapped to a potentially vendor prefixed property
function vendorPropName( style, name ) {

  // shortcut for names that are not vendor prefixed
  if ( name in style ) {
    return name;
  }

  // check for vendor prefixed names
  var capName = name.charAt(0).toUpperCase() + name.slice(1),
    origName = name,
    i = cssPrefixes.length;

  while ( i-- ) {
    name = cssPrefixes[ i ] + capName;
    if ( name in style ) {
      return name;
    }
  }

  return origName;
}

function showHide( elements, show ) {
  var display, elem, hidden,
    values = [],
    index = 0,
    length = elements.length;

  for ( ; index < length; index++ ) {
    elem = elements[ index ];
    if ( !elem.style ) {
      continue;
    }

    values[ index ] = jQuery._data( elem, "olddisplay" );
    display = elem.style.display;
    if ( show ) {
      // Reset the inline display of this element to learn if it is
      // being hidden by cascaded rules or not
      if ( !values[ index ] && display === "none" ) {
        elem.style.display = "";
      }

      // Set elements which have been overridden with display: none
      // in a stylesheet to whatever the default browser style is
      // for such an element
      if ( elem.style.display === "" && isHidden( elem ) ) {
        values[ index ] = jQuery._data( elem, "olddisplay", defaultDisplay(elem.nodeName) );
      }
    } else {
      hidden = isHidden( elem );

      if ( display && display !== "none" || !hidden ) {
        jQuery._data( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
      }
    }
  }

  // Set the display of most of the elements in a second loop
  // to avoid the constant reflow
  for ( index = 0; index < length; index++ ) {
    elem = elements[ index ];
    if ( !elem.style ) {
      continue;
    }
    if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
      elem.style.display = show ? values[ index ] || "" : "none";
    }
  }

  return elements;
}

function setPositiveNumber( elem, value, subtract ) {
  var matches = rnumsplit.exec( value );
  return matches ?
    // Guard against undefined "subtract", e.g., when used as in cssHooks
    Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
    value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
  var i = extra === ( isBorderBox ? "border" : "content" ) ?
    // If we already have the right measurement, avoid augmentation
    4 :
    // Otherwise initialize for horizontal or vertical properties
    name === "width" ? 1 : 0,

    val = 0;

  for ( ; i < 4; i += 2 ) {
    // both box models exclude margin, so add it if we want it
    if ( extra === "margin" ) {
      val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
    }

    if ( isBorderBox ) {
      // border-box includes padding, so remove it if we want content
      if ( extra === "content" ) {
        val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
      }

      // at this point, extra isn't border nor margin, so remove border
      if ( extra !== "margin" ) {
        val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
      }
    } else {
      // at this point, extra isn't content, so add padding
      val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

      // at this point, extra isn't content nor padding, so add border
      if ( extra !== "padding" ) {
        val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
      }
    }
  }

  return val;
}

function getWidthOrHeight( elem, name, extra ) {

  // Start with offset property, which is equivalent to the border-box value
  var valueIsBorderBox = true,
    val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
    styles = getStyles( elem ),
    isBorderBox = support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

  // some non-html elements return undefined for offsetWidth, so check for null/undefined
  // svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
  // MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
  if ( val <= 0 || val == null ) {
    // Fall back to computed then uncomputed css if necessary
    val = curCSS( elem, name, styles );
    if ( val < 0 || val == null ) {
      val = elem.style[ name ];
    }

    // Computed unit is not pixels. Stop here and return.
    if ( rnumnonpx.test(val) ) {
      return val;
    }

    // we need the check for style in case a browser which returns unreliable values
    // for getComputedStyle silently falls back to the reliable elem.style
    valueIsBorderBox = isBorderBox && ( support.boxSizingReliable() || val === elem.style[ name ] );

    // Normalize "", auto, and prepare for extra
    val = parseFloat( val ) || 0;
  }

  // use the active box-sizing model to add/subtract irrelevant styles
  return ( val +
    augmentWidthOrHeight(
      elem,
      name,
      extra || ( isBorderBox ? "border" : "content" ),
      valueIsBorderBox,
      styles
    )
  ) + "px";
}

jQuery.extend({
  // Add in style property hooks for overriding the default
  // behavior of getting and setting a style property
  cssHooks: {
    opacity: {
      get: function( elem, computed ) {
        if ( computed ) {
          // We should always get a number back from opacity
          var ret = curCSS( elem, "opacity" );
          return ret === "" ? "1" : ret;
        }
      }
    }
  },

  // Don't automatically add "px" to these possibly-unitless properties
  cssNumber: {
    "columnCount": true,
    "fillOpacity": true,
    "flexGrow": true,
    "flexShrink": true,
    "fontWeight": true,
    "lineHeight": true,
    "opacity": true,
    "order": true,
    "orphans": true,
    "widows": true,
    "zIndex": true,
    "zoom": true
  },

  // Add in properties whose names you wish to fix before
  // setting or getting the value
  cssProps: {
    // normalize float css property
    "float": support.cssFloat ? "cssFloat" : "styleFloat"
  },

  // Get and set the style property on a DOM Node
  style: function( elem, name, value, extra ) {
    // Don't set styles on text and comment nodes
    if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
      return;
    }

    // Make sure that we're working with the right name
    var ret, type, hooks,
      origName = jQuery.camelCase( name ),
      style = elem.style;

    name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );

    // gets hook for the prefixed version
    // followed by the unprefixed version
    hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

    // Check if we're setting a value
    if ( value !== undefined ) {
      type = typeof value;

      // convert relative number strings (+= or -=) to relative numbers. #7345
      if ( type === "string" && (ret = rrelNum.exec( value )) ) {
        value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
        // Fixes bug #9237
        type = "number";
      }

      // Make sure that null and NaN values aren't set. See: #7116
      if ( value == null || value !== value ) {
        return;
      }

      // If a number was passed in, add 'px' to the (except for certain CSS properties)
      if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
        value += "px";
      }

      // Fixes #8908, it can be done more correctly by specifing setters in cssHooks,
      // but it would mean to define eight (for every problematic property) identical functions
      if ( !support.clearCloneStyle && value === "" && name.indexOf("background") === 0 ) {
        style[ name ] = "inherit";
      }

      // If a hook was provided, use that value, otherwise just set the specified value
      if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {

        // Support: IE
        // Swallow errors from 'invalid' CSS values (#5509)
        try {
          style[ name ] = value;
        } catch(e) {}
      }

    } else {
      // If a hook was provided get the non-computed value from there
      if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
        return ret;
      }

      // Otherwise just get the value from the style object
      return style[ name ];
    }
  },

  css: function( elem, name, extra, styles ) {
    var num, val, hooks,
      origName = jQuery.camelCase( name );

    // Make sure that we're working with the right name
    name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );

    // gets hook for the prefixed version
    // followed by the unprefixed version
    hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

    // If a hook was provided get the computed value from there
    if ( hooks && "get" in hooks ) {
      val = hooks.get( elem, true, extra );
    }

    // Otherwise, if a way to get the computed value exists, use that
    if ( val === undefined ) {
      val = curCSS( elem, name, styles );
    }

    //convert "normal" to computed value
    if ( val === "normal" && name in cssNormalTransform ) {
      val = cssNormalTransform[ name ];
    }

    // Return, converting to number if forced or a qualifier was provided and val looks numeric
    if ( extra === "" || extra ) {
      num = parseFloat( val );
      return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
    }
    return val;
  }
});

jQuery.each([ "height", "width" ], function( i, name ) {
  jQuery.cssHooks[ name ] = {
    get: function( elem, computed, extra ) {
      if ( computed ) {
        // certain elements can have dimension info if we invisibly show them
        // however, it must have a current display style that would benefit from this
        return rdisplayswap.test( jQuery.css( elem, "display" ) ) && elem.offsetWidth === 0 ?
          jQuery.swap( elem, cssShow, function() {
            return getWidthOrHeight( elem, name, extra );
          }) :
          getWidthOrHeight( elem, name, extra );
      }
    },

    set: function( elem, value, extra ) {
      var styles = extra && getStyles( elem );
      return setPositiveNumber( elem, value, extra ?
        augmentWidthOrHeight(
          elem,
          name,
          extra,
          support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
          styles
        ) : 0
      );
    }
  };
});

if ( !support.opacity ) {
  jQuery.cssHooks.opacity = {
    get: function( elem, computed ) {
      // IE uses filters for opacity
      return ropacity.test( (computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || "" ) ?
        ( 0.01 * parseFloat( RegExp.$1 ) ) + "" :
        computed ? "1" : "";
    },

    set: function( elem, value ) {
      var style = elem.style,
        currentStyle = elem.currentStyle,
        opacity = jQuery.isNumeric( value ) ? "alpha(opacity=" + value * 100 + ")" : "",
        filter = currentStyle && currentStyle.filter || style.filter || "";

      // IE has trouble with opacity if it does not have layout
      // Force it by setting the zoom level
      style.zoom = 1;

      // if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652
      // if value === "", then remove inline opacity #12685
      if ( ( value >= 1 || value === "" ) &&
          jQuery.trim( filter.replace( ralpha, "" ) ) === "" &&
          style.removeAttribute ) {

        // Setting style.filter to null, "" & " " still leave "filter:" in the cssText
        // if "filter:" is present at all, clearType is disabled, we want to avoid this
        // style.removeAttribute is IE Only, but so apparently is this code path...
        style.removeAttribute( "filter" );

        // if there is no filter style applied in a css rule or unset inline opacity, we are done
        if ( value === "" || currentStyle && !currentStyle.filter ) {
          return;
        }
      }

      // otherwise, set new filter values
      style.filter = ralpha.test( filter ) ?
        filter.replace( ralpha, opacity ) :
        filter + " " + opacity;
    }
  };
}

jQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,
  function( elem, computed ) {
    if ( computed ) {
      // WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
      // Work around by temporarily setting element display to inline-block
      return jQuery.swap( elem, { "display": "inline-block" },
        curCSS, [ elem, "marginRight" ] );
    }
  }
);

// These hooks are used by animate to expand properties
jQuery.each({
  margin: "",
  padding: "",
  border: "Width"
}, function( prefix, suffix ) {
  jQuery.cssHooks[ prefix + suffix ] = {
    expand: function( value ) {
      var i = 0,
        expanded = {},

        // assumes a single number if not a string
        parts = typeof value === "string" ? value.split(" ") : [ value ];

      for ( ; i < 4; i++ ) {
        expanded[ prefix + cssExpand[ i ] + suffix ] =
          parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
      }

      return expanded;
    }
  };

  if ( !rmargin.test( prefix ) ) {
    jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
  }
});

jQuery.fn.extend({
  css: function( name, value ) {
    return access( this, function( elem, name, value ) {
      var styles, len,
        map = {},
        i = 0;

      if ( jQuery.isArray( name ) ) {
        styles = getStyles( elem );
        len = name.length;

        for ( ; i < len; i++ ) {
          map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
        }

        return map;
      }

      return value !== undefined ?
        jQuery.style( elem, name, value ) :
        jQuery.css( elem, name );
    }, name, value, arguments.length > 1 );
  },
  show: function() {
    return showHide( this, true );
  },
  hide: function() {
    return showHide( this );
  },
  toggle: function( state ) {
    if ( typeof state === "boolean" ) {
      return state ? this.show() : this.hide();
    }

    return this.each(function() {
      if ( isHidden( this ) ) {
        jQuery( this ).show();
      } else {
        jQuery( this ).hide();
      }
    });
  }
});


function Tween( elem, options, prop, end, easing ) {
  return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
  constructor: Tween,
  init: function( elem, options, prop, end, easing, unit ) {
    this.elem = elem;
    this.prop = prop;
    this.easing = easing || "swing";
    this.options = options;
    this.start = this.now = this.cur();
    this.end = end;
    this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
  },
  cur: function() {
    var hooks = Tween.propHooks[ this.prop ];

    return hooks && hooks.get ?
      hooks.get( this ) :
      Tween.propHooks._default.get( this );
  },
  run: function( percent ) {
    var eased,
      hooks = Tween.propHooks[ this.prop ];

    if ( this.options.duration ) {
      this.pos = eased = jQuery.easing[ this.easing ](
        percent, this.options.duration * percent, 0, 1, this.options.duration
      );
    } else {
      this.pos = eased = percent;
    }
    this.now = ( this.end - this.start ) * eased + this.start;

    if ( this.options.step ) {
      this.options.step.call( this.elem, this.now, this );
    }

    if ( hooks && hooks.set ) {
      hooks.set( this );
    } else {
      Tween.propHooks._default.set( this );
    }
    return this;
  }
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
  _default: {
    get: function( tween ) {
      var result;

      if ( tween.elem[ tween.prop ] != null &&
        (!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
        return tween.elem[ tween.prop ];
      }

      // passing an empty string as a 3rd parameter to .css will automatically
      // attempt a parseFloat and fallback to a string if the parse fails
      // so, simple values such as "10px" are parsed to Float.
      // complex values such as "rotate(1rad)" are returned as is.
      result = jQuery.css( tween.elem, tween.prop, "" );
      // Empty strings, null, undefined and "auto" are converted to 0.
      return !result || result === "auto" ? 0 : result;
    },
    set: function( tween ) {
      // use step hook for back compat - use cssHook if its there - use .style if its
      // available and use plain properties where available
      if ( jQuery.fx.step[ tween.prop ] ) {
        jQuery.fx.step[ tween.prop ]( tween );
      } else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
        jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
      } else {
        tween.elem[ tween.prop ] = tween.now;
      }
    }
  }
};

// Support: IE <=9
// Panic based approach to setting things on disconnected nodes

Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
  set: function( tween ) {
    if ( tween.elem.nodeType && tween.elem.parentNode ) {
      tween.elem[ tween.prop ] = tween.now;
    }
  }
};

jQuery.easing = {
  linear: function( p ) {
    return p;
  },
  swing: function( p ) {
    return 0.5 - Math.cos( p * Math.PI ) / 2;
  }
};

jQuery.fx = Tween.prototype.init;

// Back Compat <1.8 extension point
jQuery.fx.step = {};




var
  fxNow, timerId,
  rfxtypes = /^(?:toggle|show|hide)$/,
  rfxnum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" ),
  rrun = /queueHooks$/,
  animationPrefilters = [ defaultPrefilter ],
  tweeners = {
    "*": [ function( prop, value ) {
      var tween = this.createTween( prop, value ),
        target = tween.cur(),
        parts = rfxnum.exec( value ),
        unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

        // Starting value computation is required for potential unit mismatches
        start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
          rfxnum.exec( jQuery.css( tween.elem, prop ) ),
        scale = 1,
        maxIterations = 20;

      if ( start && start[ 3 ] !== unit ) {
        // Trust units reported by jQuery.css
        unit = unit || start[ 3 ];

        // Make sure we update the tween properties later on
        parts = parts || [];

        // Iteratively approximate from a nonzero starting point
        start = +target || 1;

        do {
          // If previous iteration zeroed out, double until we get *something*
          // Use a string for doubling factor so we don't accidentally see scale as unchanged below
          scale = scale || ".5";

          // Adjust and apply
          start = start / scale;
          jQuery.style( tween.elem, prop, start + unit );

        // Update scale, tolerating zero or NaN from tween.cur()
        // And breaking the loop if scale is unchanged or perfect, or if we've just had enough
        } while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
      }

      // Update tween properties
      if ( parts ) {
        start = tween.start = +start || +target || 0;
        tween.unit = unit;
        // If a +=/-= token was provided, we're doing a relative animation
        tween.end = parts[ 1 ] ?
          start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
          +parts[ 2 ];
      }

      return tween;
    } ]
  };

// Animations created synchronously will run synchronously
function createFxNow() {
  setTimeout(function() {
    fxNow = undefined;
  });
  return ( fxNow = jQuery.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
  var which,
    attrs = { height: type },
    i = 0;

  // if we include width, step value is 1 to do all cssExpand values,
  // if we don't include width, step value is 2 to skip over Left and Right
  includeWidth = includeWidth ? 1 : 0;
  for ( ; i < 4 ; i += 2 - includeWidth ) {
    which = cssExpand[ i ];
    attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
  }

  if ( includeWidth ) {
    attrs.opacity = attrs.width = type;
  }

  return attrs;
}

function createTween( value, prop, animation ) {
  var tween,
    collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
    index = 0,
    length = collection.length;
  for ( ; index < length; index++ ) {
    if ( (tween = collection[ index ].call( animation, prop, value )) ) {

      // we're done with this property
      return tween;
    }
  }
}

function defaultPrefilter( elem, props, opts ) {
  /* jshint validthis: true */
  var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,
    anim = this,
    orig = {},
    style = elem.style,
    hidden = elem.nodeType && isHidden( elem ),
    dataShow = jQuery._data( elem, "fxshow" );

  // handle queue: false promises
  if ( !opts.queue ) {
    hooks = jQuery._queueHooks( elem, "fx" );
    if ( hooks.unqueued == null ) {
      hooks.unqueued = 0;
      oldfire = hooks.empty.fire;
      hooks.empty.fire = function() {
        if ( !hooks.unqueued ) {
          oldfire();
        }
      };
    }
    hooks.unqueued++;

    anim.always(function() {
      // doing this makes sure that the complete handler will be called
      // before this completes
      anim.always(function() {
        hooks.unqueued--;
        if ( !jQuery.queue( elem, "fx" ).length ) {
          hooks.empty.fire();
        }
      });
    });
  }

  // height/width overflow pass
  if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
    // Make sure that nothing sneaks out
    // Record all 3 overflow attributes because IE does not
    // change the overflow attribute when overflowX and
    // overflowY are set to the same value
    opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

    // Set display property to inline-block for height/width
    // animations on inline elements that are having width/height animated
    display = jQuery.css( elem, "display" );

    // Test default display if display is currently "none"
    checkDisplay = display === "none" ?
      jQuery._data( elem, "olddisplay" ) || defaultDisplay( elem.nodeName ) : display;

    if ( checkDisplay === "inline" && jQuery.css( elem, "float" ) === "none" ) {

      // inline-level elements accept inline-block;
      // block-level elements need to be inline with layout
      if ( !support.inlineBlockNeedsLayout || defaultDisplay( elem.nodeName ) === "inline" ) {
        style.display = "inline-block";
      } else {
        style.zoom = 1;
      }
    }
  }

  if ( opts.overflow ) {
    style.overflow = "hidden";
    if ( !support.shrinkWrapBlocks() ) {
      anim.always(function() {
        style.overflow = opts.overflow[ 0 ];
        style.overflowX = opts.overflow[ 1 ];
        style.overflowY = opts.overflow[ 2 ];
      });
    }
  }

  // show/hide pass
  for ( prop in props ) {
    value = props[ prop ];
    if ( rfxtypes.exec( value ) ) {
      delete props[ prop ];
      toggle = toggle || value === "toggle";
      if ( value === ( hidden ? "hide" : "show" ) ) {

        // If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden
        if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
          hidden = true;
        } else {
          continue;
        }
      }
      orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );

    // Any non-fx value stops us from restoring the original display value
    } else {
      display = undefined;
    }
  }

  if ( !jQuery.isEmptyObject( orig ) ) {
    if ( dataShow ) {
      if ( "hidden" in dataShow ) {
        hidden = dataShow.hidden;
      }
    } else {
      dataShow = jQuery._data( elem, "fxshow", {} );
    }

    // store state if its toggle - enables .stop().toggle() to "reverse"
    if ( toggle ) {
      dataShow.hidden = !hidden;
    }
    if ( hidden ) {
      jQuery( elem ).show();
    } else {
      anim.done(function() {
        jQuery( elem ).hide();
      });
    }
    anim.done(function() {
      var prop;
      jQuery._removeData( elem, "fxshow" );
      for ( prop in orig ) {
        jQuery.style( elem, prop, orig[ prop ] );
      }
    });
    for ( prop in orig ) {
      tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );

      if ( !( prop in dataShow ) ) {
        dataShow[ prop ] = tween.start;
        if ( hidden ) {
          tween.end = tween.start;
          tween.start = prop === "width" || prop === "height" ? 1 : 0;
        }
      }
    }

  // If this is a noop like .hide().hide(), restore an overwritten display value
  } else if ( (display === "none" ? defaultDisplay( elem.nodeName ) : display) === "inline" ) {
    style.display = display;
  }
}

function propFilter( props, specialEasing ) {
  var index, name, easing, value, hooks;

  // camelCase, specialEasing and expand cssHook pass
  for ( index in props ) {
    name = jQuery.camelCase( index );
    easing = specialEasing[ name ];
    value = props[ index ];
    if ( jQuery.isArray( value ) ) {
      easing = value[ 1 ];
      value = props[ index ] = value[ 0 ];
    }

    if ( index !== name ) {
      props[ name ] = value;
      delete props[ index ];
    }

    hooks = jQuery.cssHooks[ name ];
    if ( hooks && "expand" in hooks ) {
      value = hooks.expand( value );
      delete props[ name ];

      // not quite $.extend, this wont overwrite keys already present.
      // also - reusing 'index' from above because we have the correct "name"
      for ( index in value ) {
        if ( !( index in props ) ) {
          props[ index ] = value[ index ];
          specialEasing[ index ] = easing;
        }
      }
    } else {
      specialEasing[ name ] = easing;
    }
  }
}

function Animation( elem, properties, options ) {
  var result,
    stopped,
    index = 0,
    length = animationPrefilters.length,
    deferred = jQuery.Deferred().always( function() {
      // don't match elem in the :animated selector
      delete tick.elem;
    }),
    tick = function() {
      if ( stopped ) {
        return false;
      }
      var currentTime = fxNow || createFxNow(),
        remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
        // archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)
        temp = remaining / animation.duration || 0,
        percent = 1 - temp,
        index = 0,
        length = animation.tweens.length;

      for ( ; index < length ; index++ ) {
        animation.tweens[ index ].run( percent );
      }

      deferred.notifyWith( elem, [ animation, percent, remaining ]);

      if ( percent < 1 && length ) {
        return remaining;
      } else {
        deferred.resolveWith( elem, [ animation ] );
        return false;
      }
    },
    animation = deferred.promise({
      elem: elem,
      props: jQuery.extend( {}, properties ),
      opts: jQuery.extend( true, { specialEasing: {} }, options ),
      originalProperties: properties,
      originalOptions: options,
      startTime: fxNow || createFxNow(),
      duration: options.duration,
      tweens: [],
      createTween: function( prop, end ) {
        var tween = jQuery.Tween( elem, animation.opts, prop, end,
            animation.opts.specialEasing[ prop ] || animation.opts.easing );
        animation.tweens.push( tween );
        return tween;
      },
      stop: function( gotoEnd ) {
        var index = 0,
          // if we are going to the end, we want to run all the tweens
          // otherwise we skip this part
          length = gotoEnd ? animation.tweens.length : 0;
        if ( stopped ) {
          return this;
        }
        stopped = true;
        for ( ; index < length ; index++ ) {
          animation.tweens[ index ].run( 1 );
        }

        // resolve when we played the last frame
        // otherwise, reject
        if ( gotoEnd ) {
          deferred.resolveWith( elem, [ animation, gotoEnd ] );
        } else {
          deferred.rejectWith( elem, [ animation, gotoEnd ] );
        }
        return this;
      }
    }),
    props = animation.props;

  propFilter( props, animation.opts.specialEasing );

  for ( ; index < length ; index++ ) {
    result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
    if ( result ) {
      return result;
    }
  }

  jQuery.map( props, createTween, animation );

  if ( jQuery.isFunction( animation.opts.start ) ) {
    animation.opts.start.call( elem, animation );
  }

  jQuery.fx.timer(
    jQuery.extend( tick, {
      elem: elem,
      anim: animation,
      queue: animation.opts.queue
    })
  );

  // attach callbacks from options
  return animation.progress( animation.opts.progress )
    .done( animation.opts.done, animation.opts.complete )
    .fail( animation.opts.fail )
    .always( animation.opts.always );
}

jQuery.Animation = jQuery.extend( Animation, {
  tweener: function( props, callback ) {
    if ( jQuery.isFunction( props ) ) {
      callback = props;
      props = [ "*" ];
    } else {
      props = props.split(" ");
    }

    var prop,
      index = 0,
      length = props.length;

    for ( ; index < length ; index++ ) {
      prop = props[ index ];
      tweeners[ prop ] = tweeners[ prop ] || [];
      tweeners[ prop ].unshift( callback );
    }
  },

  prefilter: function( callback, prepend ) {
    if ( prepend ) {
      animationPrefilters.unshift( callback );
    } else {
      animationPrefilters.push( callback );
    }
  }
});

jQuery.speed = function( speed, easing, fn ) {
  var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
    complete: fn || !fn && easing ||
      jQuery.isFunction( speed ) && speed,
    duration: speed,
    easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
  };

  opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
    opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

  // normalize opt.queue - true/undefined/null -> "fx"
  if ( opt.queue == null || opt.queue === true ) {
    opt.queue = "fx";
  }

  // Queueing
  opt.old = opt.complete;

  opt.complete = function() {
    if ( jQuery.isFunction( opt.old ) ) {
      opt.old.call( this );
    }

    if ( opt.queue ) {
      jQuery.dequeue( this, opt.queue );
    }
  };

  return opt;
};

jQuery.fn.extend({
  fadeTo: function( speed, to, easing, callback ) {

    // show any hidden elements after setting opacity to 0
    return this.filter( isHidden ).css( "opacity", 0 ).show()

      // animate to the value specified
      .end().animate({ opacity: to }, speed, easing, callback );
  },
  animate: function( prop, speed, easing, callback ) {
    var empty = jQuery.isEmptyObject( prop ),
      optall = jQuery.speed( speed, easing, callback ),
      doAnimation = function() {
        // Operate on a copy of prop so per-property easing won't be lost
        var anim = Animation( this, jQuery.extend( {}, prop ), optall );

        // Empty animations, or finishing resolves immediately
        if ( empty || jQuery._data( this, "finish" ) ) {
          anim.stop( true );
        }
      };
      doAnimation.finish = doAnimation;

    return empty || optall.queue === false ?
      this.each( doAnimation ) :
      this.queue( optall.queue, doAnimation );
  },
  stop: function( type, clearQueue, gotoEnd ) {
    var stopQueue = function( hooks ) {
      var stop = hooks.stop;
      delete hooks.stop;
      stop( gotoEnd );
    };

    if ( typeof type !== "string" ) {
      gotoEnd = clearQueue;
      clearQueue = type;
      type = undefined;
    }
    if ( clearQueue && type !== false ) {
      this.queue( type || "fx", [] );
    }

    return this.each(function() {
      var dequeue = true,
        index = type != null && type + "queueHooks",
        timers = jQuery.timers,
        data = jQuery._data( this );

      if ( index ) {
        if ( data[ index ] && data[ index ].stop ) {
          stopQueue( data[ index ] );
        }
      } else {
        for ( index in data ) {
          if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
            stopQueue( data[ index ] );
          }
        }
      }

      for ( index = timers.length; index--; ) {
        if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
          timers[ index ].anim.stop( gotoEnd );
          dequeue = false;
          timers.splice( index, 1 );
        }
      }

      // start the next in the queue if the last step wasn't forced
      // timers currently will call their complete callbacks, which will dequeue
      // but only if they were gotoEnd
      if ( dequeue || !gotoEnd ) {
        jQuery.dequeue( this, type );
      }
    });
  },
  finish: function( type ) {
    if ( type !== false ) {
      type = type || "fx";
    }
    return this.each(function() {
      var index,
        data = jQuery._data( this ),
        queue = data[ type + "queue" ],
        hooks = data[ type + "queueHooks" ],
        timers = jQuery.timers,
        length = queue ? queue.length : 0;

      // enable finishing flag on private data
      data.finish = true;

      // empty the queue first
      jQuery.queue( this, type, [] );

      if ( hooks && hooks.stop ) {
        hooks.stop.call( this, true );
      }

      // look for any active animations, and finish them
      for ( index = timers.length; index--; ) {
        if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
          timers[ index ].anim.stop( true );
          timers.splice( index, 1 );
        }
      }

      // look for any animations in the old queue and finish them
      for ( index = 0; index < length; index++ ) {
        if ( queue[ index ] && queue[ index ].finish ) {
          queue[ index ].finish.call( this );
        }
      }

      // turn off finishing flag
      delete data.finish;
    });
  }
});

jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
  var cssFn = jQuery.fn[ name ];
  jQuery.fn[ name ] = function( speed, easing, callback ) {
    return speed == null || typeof speed === "boolean" ?
      cssFn.apply( this, arguments ) :
      this.animate( genFx( name, true ), speed, easing, callback );
  };
});

// Generate shortcuts for custom animations
jQuery.each({
  slideDown: genFx("show"),
  slideUp: genFx("hide"),
  slideToggle: genFx("toggle"),
  fadeIn: { opacity: "show" },
  fadeOut: { opacity: "hide" },
  fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
  jQuery.fn[ name ] = function( speed, easing, callback ) {
    return this.animate( props, speed, easing, callback );
  };
});

jQuery.timers = [];
jQuery.fx.tick = function() {
  var timer,
    timers = jQuery.timers,
    i = 0;

  fxNow = jQuery.now();

  for ( ; i < timers.length; i++ ) {
    timer = timers[ i ];
    // Checks the timer has not already been removed
    if ( !timer() && timers[ i ] === timer ) {
      timers.splice( i--, 1 );
    }
  }

  if ( !timers.length ) {
    jQuery.fx.stop();
  }
  fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
  jQuery.timers.push( timer );
  if ( timer() ) {
    jQuery.fx.start();
  } else {
    jQuery.timers.pop();
  }
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
  if ( !timerId ) {
    timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
  }
};

jQuery.fx.stop = function() {
  clearInterval( timerId );
  timerId = null;
};

jQuery.fx.speeds = {
  slow: 600,
  fast: 200,
  // Default speed
  _default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
  time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
  type = type || "fx";

  return this.queue( type, function( next, hooks ) {
    var timeout = setTimeout( next, time );
    hooks.stop = function() {
      clearTimeout( timeout );
    };
  });
};


(function() {
  // Minified: var a,b,c,d,e
  var input, div, select, a, opt;

  // Setup
  div = document.createElement( "div" );
  div.setAttribute( "className", "t" );
  div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
  a = div.getElementsByTagName("a")[ 0 ];

  // First batch of tests.
  select = document.createElement("select");
  opt = select.appendChild( document.createElement("option") );
  input = div.getElementsByTagName("input")[ 0 ];

  a.style.cssText = "top:1px";

  // Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)
  support.getSetAttribute = div.className !== "t";

  // Get the style information from getAttribute
  // (IE uses .cssText instead)
  support.style = /top/.test( a.getAttribute("style") );

  // Make sure that URLs aren't manipulated
  // (IE normalizes it by default)
  support.hrefNormalized = a.getAttribute("href") === "/a";

  // Check the default checkbox/radio value ("" on WebKit; "on" elsewhere)
  support.checkOn = !!input.value;

  // Make sure that a selected-by-default option has a working selected property.
  // (WebKit defaults to false instead of true, IE too, if it's in an optgroup)
  support.optSelected = opt.selected;

  // Tests for enctype support on a form (#6743)
  support.enctype = !!document.createElement("form").enctype;

  // Make sure that the options inside disabled selects aren't marked as disabled
  // (WebKit marks them as disabled)
  select.disabled = true;
  support.optDisabled = !opt.disabled;

  // Support: IE8 only
  // Check if we can trust getAttribute("value")
  input = document.createElement( "input" );
  input.setAttribute( "value", "" );
  support.input = input.getAttribute( "value" ) === "";

  // Check if an input maintains its value after becoming a radio
  input.value = "t";
  input.setAttribute( "type", "radio" );
  support.radioValue = input.value === "t";
})();


var rreturn = /\r/g;

jQuery.fn.extend({
  val: function( value ) {
    var hooks, ret, isFunction,
      elem = this[0];

    if ( !arguments.length ) {
      if ( elem ) {
        hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

        if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
          return ret;
        }

        ret = elem.value;

        return typeof ret === "string" ?
          // handle most common string cases
          ret.replace(rreturn, "") :
          // handle cases where value is null/undef or number
          ret == null ? "" : ret;
      }

      return;
    }

    isFunction = jQuery.isFunction( value );

    return this.each(function( i ) {
      var val;

      if ( this.nodeType !== 1 ) {
        return;
      }

      if ( isFunction ) {
        val = value.call( this, i, jQuery( this ).val() );
      } else {
        val = value;
      }

      // Treat null/undefined as ""; convert numbers to string
      if ( val == null ) {
        val = "";
      } else if ( typeof val === "number" ) {
        val += "";
      } else if ( jQuery.isArray( val ) ) {
        val = jQuery.map( val, function( value ) {
          return value == null ? "" : value + "";
        });
      }

      hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

      // If set returns undefined, fall back to normal setting
      if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
        this.value = val;
      }
    });
  }
});

jQuery.extend({
  valHooks: {
    option: {
      get: function( elem ) {
        var val = jQuery.find.attr( elem, "value" );
        return val != null ?
          val :
          // Support: IE10-11+
          // option.text throws exceptions (#14686, #14858)
          jQuery.trim( jQuery.text( elem ) );
      }
    },
    select: {
      get: function( elem ) {
        var value, option,
          options = elem.options,
          index = elem.selectedIndex,
          one = elem.type === "select-one" || index < 0,
          values = one ? null : [],
          max = one ? index + 1 : options.length,
          i = index < 0 ?
            max :
            one ? index : 0;

        // Loop through all the selected options
        for ( ; i < max; i++ ) {
          option = options[ i ];

          // oldIE doesn't update selected after form reset (#2551)
          if ( ( option.selected || i === index ) &&
              // Don't return options that are disabled or in a disabled optgroup
              ( support.optDisabled ? !option.disabled : option.getAttribute("disabled") === null ) &&
              ( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

            // Get the specific value for the option
            value = jQuery( option ).val();

            // We don't need an array for one selects
            if ( one ) {
              return value;
            }

            // Multi-Selects return an array
            values.push( value );
          }
        }

        return values;
      },

      set: function( elem, value ) {
        var optionSet, option,
          options = elem.options,
          values = jQuery.makeArray( value ),
          i = options.length;

        while ( i-- ) {
          option = options[ i ];

          if ( jQuery.inArray( jQuery.valHooks.option.get( option ), values ) >= 0 ) {

            // Support: IE6
            // When new option element is added to select box we need to
            // force reflow of newly added node in order to workaround delay
            // of initialization properties
            try {
              option.selected = optionSet = true;

            } catch ( _ ) {

              // Will be executed only in IE6
              option.scrollHeight;
            }

          } else {
            option.selected = false;
          }
        }

        // Force browsers to behave consistently when non-matching value is set
        if ( !optionSet ) {
          elem.selectedIndex = -1;
        }

        return options;
      }
    }
  }
});

// Radios and checkboxes getter/setter
jQuery.each([ "radio", "checkbox" ], function() {
  jQuery.valHooks[ this ] = {
    set: function( elem, value ) {
      if ( jQuery.isArray( value ) ) {
        return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
      }
    }
  };
  if ( !support.checkOn ) {
    jQuery.valHooks[ this ].get = function( elem ) {
      // Support: Webkit
      // "" is returned instead of "on" if a value isn't specified
      return elem.getAttribute("value") === null ? "on" : elem.value;
    };
  }
});




var nodeHook, boolHook,
  attrHandle = jQuery.expr.attrHandle,
  ruseDefault = /^(?:checked|selected)$/i,
  getSetAttribute = support.getSetAttribute,
  getSetInput = support.input;

jQuery.fn.extend({
  attr: function( name, value ) {
    return access( this, jQuery.attr, name, value, arguments.length > 1 );
  },

  removeAttr: function( name ) {
    return this.each(function() {
      jQuery.removeAttr( this, name );
    });
  }
});

jQuery.extend({
  attr: function( elem, name, value ) {
    var hooks, ret,
      nType = elem.nodeType;

    // don't get/set attributes on text, comment and attribute nodes
    if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
      return;
    }

    // Fallback to prop when attributes are not supported
    if ( typeof elem.getAttribute === strundefined ) {
      return jQuery.prop( elem, name, value );
    }

    // All attributes are lowercase
    // Grab necessary hook if one is defined
    if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
      name = name.toLowerCase();
      hooks = jQuery.attrHooks[ name ] ||
        ( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
    }

    if ( value !== undefined ) {

      if ( value === null ) {
        jQuery.removeAttr( elem, name );

      } else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
        return ret;

      } else {
        elem.setAttribute( name, value + "" );
        return value;
      }

    } else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
      return ret;

    } else {
      ret = jQuery.find.attr( elem, name );

      // Non-existent attributes return null, we normalize to undefined
      return ret == null ?
        undefined :
        ret;
    }
  },

  removeAttr: function( elem, value ) {
    var name, propName,
      i = 0,
      attrNames = value && value.match( rnotwhite );

    if ( attrNames && elem.nodeType === 1 ) {
      while ( (name = attrNames[i++]) ) {
        propName = jQuery.propFix[ name ] || name;

        // Boolean attributes get special treatment (#10870)
        if ( jQuery.expr.match.bool.test( name ) ) {
          // Set corresponding property to false
          if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
            elem[ propName ] = false;
          // Support: IE<9
          // Also clear defaultChecked/defaultSelected (if appropriate)
          } else {
            elem[ jQuery.camelCase( "default-" + name ) ] =
              elem[ propName ] = false;
          }

        // See #9699 for explanation of this approach (setting first, then removal)
        } else {
          jQuery.attr( elem, name, "" );
        }

        elem.removeAttribute( getSetAttribute ? name : propName );
      }
    }
  },

  attrHooks: {
    type: {
      set: function( elem, value ) {
        if ( !support.radioValue && value === "radio" && jQuery.nodeName(elem, "input") ) {
          // Setting the type on a radio button after the value resets the value in IE6-9
          // Reset value to default in case type is set after value during creation
          var val = elem.value;
          elem.setAttribute( "type", value );
          if ( val ) {
            elem.value = val;
          }
          return value;
        }
      }
    }
  }
});

// Hook for boolean attributes
boolHook = {
  set: function( elem, value, name ) {
    if ( value === false ) {
      // Remove boolean attributes when set to false
      jQuery.removeAttr( elem, name );
    } else if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
      // IE<8 needs the *property* name
      elem.setAttribute( !getSetAttribute && jQuery.propFix[ name ] || name, name );

    // Use defaultChecked and defaultSelected for oldIE
    } else {
      elem[ jQuery.camelCase( "default-" + name ) ] = elem[ name ] = true;
    }

    return name;
  }
};

// Retrieve booleans specially
jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {

  var getter = attrHandle[ name ] || jQuery.find.attr;

  attrHandle[ name ] = getSetInput && getSetAttribute || !ruseDefault.test( name ) ?
    function( elem, name, isXML ) {
      var ret, handle;
      if ( !isXML ) {
        // Avoid an infinite loop by temporarily removing this function from the getter
        handle = attrHandle[ name ];
        attrHandle[ name ] = ret;
        ret = getter( elem, name, isXML ) != null ?
          name.toLowerCase() :
          null;
        attrHandle[ name ] = handle;
      }
      return ret;
    } :
    function( elem, name, isXML ) {
      if ( !isXML ) {
        return elem[ jQuery.camelCase( "default-" + name ) ] ?
          name.toLowerCase() :
          null;
      }
    };
});

// fix oldIE attroperties
if ( !getSetInput || !getSetAttribute ) {
  jQuery.attrHooks.value = {
    set: function( elem, value, name ) {
      if ( jQuery.nodeName( elem, "input" ) ) {
        // Does not return so that setAttribute is also used
        elem.defaultValue = value;
      } else {
        // Use nodeHook if defined (#1954); otherwise setAttribute is fine
        return nodeHook && nodeHook.set( elem, value, name );
      }
    }
  };
}

// IE6/7 do not support getting/setting some attributes with get/setAttribute
if ( !getSetAttribute ) {

  // Use this for any attribute in IE6/7
  // This fixes almost every IE6/7 issue
  nodeHook = {
    set: function( elem, value, name ) {
      // Set the existing or create a new attribute node
      var ret = elem.getAttributeNode( name );
      if ( !ret ) {
        elem.setAttributeNode(
          (ret = elem.ownerDocument.createAttribute( name ))
        );
      }

      ret.value = value += "";

      // Break association with cloned elements by also using setAttribute (#9646)
      if ( name === "value" || value === elem.getAttribute( name ) ) {
        return value;
      }
    }
  };

  // Some attributes are constructed with empty-string values when not defined
  attrHandle.id = attrHandle.name = attrHandle.coords =
    function( elem, name, isXML ) {
      var ret;
      if ( !isXML ) {
        return (ret = elem.getAttributeNode( name )) && ret.value !== "" ?
          ret.value :
          null;
      }
    };

  // Fixing value retrieval on a button requires this module
  jQuery.valHooks.button = {
    get: function( elem, name ) {
      var ret = elem.getAttributeNode( name );
      if ( ret && ret.specified ) {
        return ret.value;
      }
    },
    set: nodeHook.set
  };

  // Set contenteditable to false on removals(#10429)
  // Setting to empty string throws an error as an invalid value
  jQuery.attrHooks.contenteditable = {
    set: function( elem, value, name ) {
      nodeHook.set( elem, value === "" ? false : value, name );
    }
  };

  // Set width and height to auto instead of 0 on empty string( Bug #8150 )
  // This is for removals
  jQuery.each([ "width", "height" ], function( i, name ) {
    jQuery.attrHooks[ name ] = {
      set: function( elem, value ) {
        if ( value === "" ) {
          elem.setAttribute( name, "auto" );
          return value;
        }
      }
    };
  });
}

if ( !support.style ) {
  jQuery.attrHooks.style = {
    get: function( elem ) {
      // Return undefined in the case of empty string
      // Note: IE uppercases css property names, but if we were to .toLowerCase()
      // .cssText, that would destroy case senstitivity in URL's, like in "background"
      return elem.style.cssText || undefined;
    },
    set: function( elem, value ) {
      return ( elem.style.cssText = value + "" );
    }
  };
}




var rfocusable = /^(?:input|select|textarea|button|object)$/i,
  rclickable = /^(?:a|area)$/i;

jQuery.fn.extend({
  prop: function( name, value ) {
    return access( this, jQuery.prop, name, value, arguments.length > 1 );
  },

  removeProp: function( name ) {
    name = jQuery.propFix[ name ] || name;
    return this.each(function() {
      // try/catch handles cases where IE balks (such as removing a property on window)
      try {
        this[ name ] = undefined;
        delete this[ name ];
      } catch( e ) {}
    });
  }
});

jQuery.extend({
  propFix: {
    "for": "htmlFor",
    "class": "className"
  },

  prop: function( elem, name, value ) {
    var ret, hooks, notxml,
      nType = elem.nodeType;

    // don't get/set properties on text, comment and attribute nodes
    if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
      return;
    }

    notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

    if ( notxml ) {
      // Fix name and attach hooks
      name = jQuery.propFix[ name ] || name;
      hooks = jQuery.propHooks[ name ];
    }

    if ( value !== undefined ) {
      return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
        ret :
        ( elem[ name ] = value );

    } else {
      return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
        ret :
        elem[ name ];
    }
  },

  propHooks: {
    tabIndex: {
      get: function( elem ) {
        // elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set
        // http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
        // Use proper attribute retrieval(#12072)
        var tabindex = jQuery.find.attr( elem, "tabindex" );

        return tabindex ?
          parseInt( tabindex, 10 ) :
          rfocusable.test( elem.nodeName ) || rclickable.test( elem.nodeName ) && elem.href ?
            0 :
            -1;
      }
    }
  }
});

// Some attributes require a special call on IE
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !support.hrefNormalized ) {
  // href/src property should get the full normalized URL (#10299/#12915)
  jQuery.each([ "href", "src" ], function( i, name ) {
    jQuery.propHooks[ name ] = {
      get: function( elem ) {
        return elem.getAttribute( name, 4 );
      }
    };
  });
}

// Support: Safari, IE9+
// mis-reports the default selected property of an option
// Accessing the parent's selectedIndex property fixes it
if ( !support.optSelected ) {
  jQuery.propHooks.selected = {
    get: function( elem ) {
      var parent = elem.parentNode;

      if ( parent ) {
        parent.selectedIndex;

        // Make sure that it also works with optgroups, see #5701
        if ( parent.parentNode ) {
          parent.parentNode.selectedIndex;
        }
      }
      return null;
    }
  };
}

jQuery.each([
  "tabIndex",
  "readOnly",
  "maxLength",
  "cellSpacing",
  "cellPadding",
  "rowSpan",
  "colSpan",
  "useMap",
  "frameBorder",
  "contentEditable"
], function() {
  jQuery.propFix[ this.toLowerCase() ] = this;
});

// IE6/7 call enctype encoding
if ( !support.enctype ) {
  jQuery.propFix.enctype = "encoding";
}




var rclass = /[\t\r\n\f]/g;

jQuery.fn.extend({
  addClass: function( value ) {
    var classes, elem, cur, clazz, j, finalValue,
      i = 0,
      len = this.length,
      proceed = typeof value === "string" && value;

    if ( jQuery.isFunction( value ) ) {
      return this.each(function( j ) {
        jQuery( this ).addClass( value.call( this, j, this.className ) );
      });
    }

    if ( proceed ) {
      // The disjunction here is for better compressibility (see removeClass)
      classes = ( value || "" ).match( rnotwhite ) || [];

      for ( ; i < len; i++ ) {
        elem = this[ i ];
        cur = elem.nodeType === 1 && ( elem.className ?
          ( " " + elem.className + " " ).replace( rclass, " " ) :
          " "
        );

        if ( cur ) {
          j = 0;
          while ( (clazz = classes[j++]) ) {
            if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
              cur += clazz + " ";
            }
          }

          // only assign if different to avoid unneeded rendering.
          finalValue = jQuery.trim( cur );
          if ( elem.className !== finalValue ) {
            elem.className = finalValue;
          }
        }
      }
    }

    return this;
  },

  removeClass: function( value ) {
    var classes, elem, cur, clazz, j, finalValue,
      i = 0,
      len = this.length,
      proceed = arguments.length === 0 || typeof value === "string" && value;

    if ( jQuery.isFunction( value ) ) {
      return this.each(function( j ) {
        jQuery( this ).removeClass( value.call( this, j, this.className ) );
      });
    }
    if ( proceed ) {
      classes = ( value || "" ).match( rnotwhite ) || [];

      for ( ; i < len; i++ ) {
        elem = this[ i ];
        // This expression is here for better compressibility (see addClass)
        cur = elem.nodeType === 1 && ( elem.className ?
          ( " " + elem.className + " " ).replace( rclass, " " ) :
          ""
        );

        if ( cur ) {
          j = 0;
          while ( (clazz = classes[j++]) ) {
            // Remove *all* instances
            while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
              cur = cur.replace( " " + clazz + " ", " " );
            }
          }

          // only assign if different to avoid unneeded rendering.
          finalValue = value ? jQuery.trim( cur ) : "";
          if ( elem.className !== finalValue ) {
            elem.className = finalValue;
          }
        }
      }
    }

    return this;
  },

  toggleClass: function( value, stateVal ) {
    var type = typeof value;

    if ( typeof stateVal === "boolean" && type === "string" ) {
      return stateVal ? this.addClass( value ) : this.removeClass( value );
    }

    if ( jQuery.isFunction( value ) ) {
      return this.each(function( i ) {
        jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
      });
    }

    return this.each(function() {
      if ( type === "string" ) {
        // toggle individual class names
        var className,
          i = 0,
          self = jQuery( this ),
          classNames = value.match( rnotwhite ) || [];

        while ( (className = classNames[ i++ ]) ) {
          // check each className given, space separated list
          if ( self.hasClass( className ) ) {
            self.removeClass( className );
          } else {
            self.addClass( className );
          }
        }

      // Toggle whole class name
      } else if ( type === strundefined || type === "boolean" ) {
        if ( this.className ) {
          // store className if set
          jQuery._data( this, "__className__", this.className );
        }

        // If the element has a class name or if we're passed "false",
        // then remove the whole classname (if there was one, the above saved it).
        // Otherwise bring back whatever was previously saved (if anything),
        // falling back to the empty string if nothing was stored.
        this.className = this.className || value === false ? "" : jQuery._data( this, "__className__" ) || "";
      }
    });
  },

  hasClass: function( selector ) {
    var className = " " + selector + " ",
      i = 0,
      l = this.length;
    for ( ; i < l; i++ ) {
      if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
        return true;
      }
    }

    return false;
  }
});




// Return jQuery for attributes-only inclusion


jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
  "mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
  "change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

  // Handle event binding
  jQuery.fn[ name ] = function( data, fn ) {
    return arguments.length > 0 ?
      this.on( name, null, data, fn ) :
      this.trigger( name );
  };
});

jQuery.fn.extend({
  hover: function( fnOver, fnOut ) {
    return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
  },

  bind: function( types, data, fn ) {
    return this.on( types, null, data, fn );
  },
  unbind: function( types, fn ) {
    return this.off( types, null, fn );
  },

  delegate: function( selector, types, data, fn ) {
    return this.on( types, selector, data, fn );
  },
  undelegate: function( selector, types, fn ) {
    // ( namespace ) or ( selector, types [, fn] )
    return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
  }
});


var nonce = jQuery.now();

var rquery = (/\?/);



var rvalidtokens = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;

jQuery.parseJSON = function( data ) {
  // Attempt to parse using the native JSON parser first
  if ( window.JSON && window.JSON.parse ) {
    // Support: Android 2.3
    // Workaround failure to string-cast null input
    return window.JSON.parse( data + "" );
  }

  var requireNonComma,
    depth = null,
    str = jQuery.trim( data + "" );

  // Guard against invalid (and possibly dangerous) input by ensuring that nothing remains
  // after removing valid tokens
  return str && !jQuery.trim( str.replace( rvalidtokens, function( token, comma, open, close ) {

    // Force termination if we see a misplaced comma
    if ( requireNonComma && comma ) {
      depth = 0;
    }

    // Perform no more replacements after returning to outermost depth
    if ( depth === 0 ) {
      return token;
    }

    // Commas must not follow "[", "{", or ","
    requireNonComma = open || comma;

    // Determine new depth
    // array/object open ("[" or "{"): depth += true - false (increment)
    // array/object close ("]" or "}"): depth += false - true (decrement)
    // other cases ("," or primitive): depth += true - true (numeric cast)
    depth += !close - !open;

    // Remove this token
    return "";
  }) ) ?
    ( Function( "return " + str ) )() :
    jQuery.error( "Invalid JSON: " + data );
};


// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
  var xml, tmp;
  if ( !data || typeof data !== "string" ) {
    return null;
  }
  try {
    if ( window.DOMParser ) { // Standard
      tmp = new DOMParser();
      xml = tmp.parseFromString( data, "text/xml" );
    } else { // IE
      xml = new ActiveXObject( "Microsoft.XMLDOM" );
      xml.async = "false";
      xml.loadXML( data );
    }
  } catch( e ) {
    xml = undefined;
  }
  if ( !xml || !xml.documentElement || xml.getElementsByTagName( "parsererror" ).length ) {
    jQuery.error( "Invalid XML: " + data );
  }
  return xml;
};


var
  // Document location
  ajaxLocParts,
  ajaxLocation,

  rhash = /#.*$/,
  rts = /([?&])_=[^&]*/,
  rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg, // IE leaves an \r character at EOL
  // #7653, #8125, #8152: local protocol detection
  rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
  rnoContent = /^(?:GET|HEAD)$/,
  rprotocol = /^\/\//,
  rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,

  /* Prefilters
   * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
   * 2) These are called:
   *    - BEFORE asking for a transport
   *    - AFTER param serialization (s.data is a string if s.processData is true)
   * 3) key is the dataType
   * 4) the catchall symbol "*" can be used
   * 5) execution will start with transport dataType and THEN continue down to "*" if needed
   */
  prefilters = {},

  /* Transports bindings
   * 1) key is the dataType
   * 2) the catchall symbol "*" can be used
   * 3) selection will start with transport dataType and THEN go to "*" if needed
   */
  transports = {},

  // Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
  allTypes = "*/".concat("*");

// #8138, IE may throw an exception when accessing
// a field from window.location if document.domain has been set
try {
  ajaxLocation = location.href;
} catch( e ) {
  // Use the href attribute of an A element
  // since IE will modify it given document.location
  ajaxLocation = document.createElement( "a" );
  ajaxLocation.href = "";
  ajaxLocation = ajaxLocation.href;
}

// Segment location into parts
ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

  // dataTypeExpression is optional and defaults to "*"
  return function( dataTypeExpression, func ) {

    if ( typeof dataTypeExpression !== "string" ) {
      func = dataTypeExpression;
      dataTypeExpression = "*";
    }

    var dataType,
      i = 0,
      dataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];

    if ( jQuery.isFunction( func ) ) {
      // For each dataType in the dataTypeExpression
      while ( (dataType = dataTypes[i++]) ) {
        // Prepend if requested
        if ( dataType.charAt( 0 ) === "+" ) {
          dataType = dataType.slice( 1 ) || "*";
          (structure[ dataType ] = structure[ dataType ] || []).unshift( func );

        // Otherwise append
        } else {
          (structure[ dataType ] = structure[ dataType ] || []).push( func );
        }
      }
    }
  };
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

  var inspected = {},
    seekingTransport = ( structure === transports );

  function inspect( dataType ) {
    var selected;
    inspected[ dataType ] = true;
    jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
      var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
      if ( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
        options.dataTypes.unshift( dataTypeOrTransport );
        inspect( dataTypeOrTransport );
        return false;
      } else if ( seekingTransport ) {
        return !( selected = dataTypeOrTransport );
      }
    });
    return selected;
  }

  return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
  var deep, key,
    flatOptions = jQuery.ajaxSettings.flatOptions || {};

  for ( key in src ) {
    if ( src[ key ] !== undefined ) {
      ( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
    }
  }
  if ( deep ) {
    jQuery.extend( true, target, deep );
  }

  return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {
  var firstDataType, ct, finalDataType, type,
    contents = s.contents,
    dataTypes = s.dataTypes;

  // Remove auto dataType and get content-type in the process
  while ( dataTypes[ 0 ] === "*" ) {
    dataTypes.shift();
    if ( ct === undefined ) {
      ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
    }
  }

  // Check if we're dealing with a known content-type
  if ( ct ) {
    for ( type in contents ) {
      if ( contents[ type ] && contents[ type ].test( ct ) ) {
        dataTypes.unshift( type );
        break;
      }
    }
  }

  // Check to see if we have a response for the expected dataType
  if ( dataTypes[ 0 ] in responses ) {
    finalDataType = dataTypes[ 0 ];
  } else {
    // Try convertible dataTypes
    for ( type in responses ) {
      if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
        finalDataType = type;
        break;
      }
      if ( !firstDataType ) {
        firstDataType = type;
      }
    }
    // Or just use first one
    finalDataType = finalDataType || firstDataType;
  }

  // If we found a dataType
  // We add the dataType to the list if needed
  // and return the corresponding response
  if ( finalDataType ) {
    if ( finalDataType !== dataTypes[ 0 ] ) {
      dataTypes.unshift( finalDataType );
    }
    return responses[ finalDataType ];
  }
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
  var conv2, current, conv, tmp, prev,
    converters = {},
    // Work with a copy of dataTypes in case we need to modify it for conversion
    dataTypes = s.dataTypes.slice();

  // Create converters map with lowercased keys
  if ( dataTypes[ 1 ] ) {
    for ( conv in s.converters ) {
      converters[ conv.toLowerCase() ] = s.converters[ conv ];
    }
  }

  current = dataTypes.shift();

  // Convert to each sequential dataType
  while ( current ) {

    if ( s.responseFields[ current ] ) {
      jqXHR[ s.responseFields[ current ] ] = response;
    }

    // Apply the dataFilter if provided
    if ( !prev && isSuccess && s.dataFilter ) {
      response = s.dataFilter( response, s.dataType );
    }

    prev = current;
    current = dataTypes.shift();

    if ( current ) {

      // There's only work to do if current dataType is non-auto
      if ( current === "*" ) {

        current = prev;

      // Convert response if prev dataType is non-auto and differs from current
      } else if ( prev !== "*" && prev !== current ) {

        // Seek a direct converter
        conv = converters[ prev + " " + current ] || converters[ "* " + current ];

        // If none found, seek a pair
        if ( !conv ) {
          for ( conv2 in converters ) {

            // If conv2 outputs current
            tmp = conv2.split( " " );
            if ( tmp[ 1 ] === current ) {

              // If prev can be converted to accepted input
              conv = converters[ prev + " " + tmp[ 0 ] ] ||
                converters[ "* " + tmp[ 0 ] ];
              if ( conv ) {
                // Condense equivalence converters
                if ( conv === true ) {
                  conv = converters[ conv2 ];

                // Otherwise, insert the intermediate dataType
                } else if ( converters[ conv2 ] !== true ) {
                  current = tmp[ 0 ];
                  dataTypes.unshift( tmp[ 1 ] );
                }
                break;
              }
            }
          }
        }

        // Apply converter (if not an equivalence)
        if ( conv !== true ) {

          // Unless errors are allowed to bubble, catch and return them
          if ( conv && s[ "throws" ] ) {
            response = conv( response );
          } else {
            try {
              response = conv( response );
            } catch ( e ) {
              return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
            }
          }
        }
      }
    }
  }

  return { state: "success", data: response };
}

jQuery.extend({

  // Counter for holding the number of active queries
  active: 0,

  // Last-Modified header cache for next request
  lastModified: {},
  etag: {},

  ajaxSettings: {
    url: ajaxLocation,
    type: "GET",
    isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
    global: true,
    processData: true,
    async: true,
    contentType: "application/x-www-form-urlencoded; charset=UTF-8",
    /*
    timeout: 0,
    data: null,
    dataType: null,
    username: null,
    password: null,
    cache: null,
    throws: false,
    traditional: false,
    headers: {},
    */

    accepts: {
      "*": allTypes,
      text: "text/plain",
      html: "text/html",
      xml: "application/xml, text/xml",
      json: "application/json, text/javascript"
    },

    contents: {
      xml: /xml/,
      html: /html/,
      json: /json/
    },

    responseFields: {
      xml: "responseXML",
      text: "responseText",
      json: "responseJSON"
    },

    // Data converters
    // Keys separate source (or catchall "*") and destination types with a single space
    converters: {

      // Convert anything to text
      "* text": String,

      // Text to html (true = no transformation)
      "text html": true,

      // Evaluate text as a json expression
      "text json": jQuery.parseJSON,

      // Parse text as xml
      "text xml": jQuery.parseXML
    },

    // For options that shouldn't be deep extended:
    // you can add your own custom options here if
    // and when you create one that shouldn't be
    // deep extended (see ajaxExtend)
    flatOptions: {
      url: true,
      context: true
    }
  },

  // Creates a full fledged settings object into target
  // with both ajaxSettings and settings fields.
  // If target is omitted, writes into ajaxSettings.
  ajaxSetup: function( target, settings ) {
    return settings ?

      // Building a settings object
      ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

      // Extending ajaxSettings
      ajaxExtend( jQuery.ajaxSettings, target );
  },

  ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
  ajaxTransport: addToPrefiltersOrTransports( transports ),

  // Main method
  ajax: function( url, options ) {

    // If url is an object, simulate pre-1.5 signature
    if ( typeof url === "object" ) {
      options = url;
      url = undefined;
    }

    // Force options to be an object
    options = options || {};

    var // Cross-domain detection vars
      parts,
      // Loop variable
      i,
      // URL without anti-cache param
      cacheURL,
      // Response headers as string
      responseHeadersString,
      // timeout handle
      timeoutTimer,

      // To know if global events are to be dispatched
      fireGlobals,

      transport,
      // Response headers
      responseHeaders,
      // Create the final options object
      s = jQuery.ajaxSetup( {}, options ),
      // Callbacks context
      callbackContext = s.context || s,
      // Context for global events is callbackContext if it is a DOM node or jQuery collection
      globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
        jQuery( callbackContext ) :
        jQuery.event,
      // Deferreds
      deferred = jQuery.Deferred(),
      completeDeferred = jQuery.Callbacks("once memory"),
      // Status-dependent callbacks
      statusCode = s.statusCode || {},
      // Headers (they are sent all at once)
      requestHeaders = {},
      requestHeadersNames = {},
      // The jqXHR state
      state = 0,
      // Default abort message
      strAbort = "canceled",
      // Fake xhr
      jqXHR = {
        readyState: 0,

        // Builds headers hashtable if needed
        getResponseHeader: function( key ) {
          var match;
          if ( state === 2 ) {
            if ( !responseHeaders ) {
              responseHeaders = {};
              while ( (match = rheaders.exec( responseHeadersString )) ) {
                responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
              }
            }
            match = responseHeaders[ key.toLowerCase() ];
          }
          return match == null ? null : match;
        },

        // Raw string
        getAllResponseHeaders: function() {
          return state === 2 ? responseHeadersString : null;
        },

        // Caches the header
        setRequestHeader: function( name, value ) {
          var lname = name.toLowerCase();
          if ( !state ) {
            name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
            requestHeaders[ name ] = value;
          }
          return this;
        },

        // Overrides response content-type header
        overrideMimeType: function( type ) {
          if ( !state ) {
            s.mimeType = type;
          }
          return this;
        },

        // Status-dependent callbacks
        statusCode: function( map ) {
          var code;
          if ( map ) {
            if ( state < 2 ) {
              for ( code in map ) {
                // Lazy-add the new callback in a way that preserves old ones
                statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
              }
            } else {
              // Execute the appropriate callbacks
              jqXHR.always( map[ jqXHR.status ] );
            }
          }
          return this;
        },

        // Cancel the request
        abort: function( statusText ) {
          var finalText = statusText || strAbort;
          if ( transport ) {
            transport.abort( finalText );
          }
          done( 0, finalText );
          return this;
        }
      };

    // Attach deferreds
    deferred.promise( jqXHR ).complete = completeDeferred.add;
    jqXHR.success = jqXHR.done;
    jqXHR.error = jqXHR.fail;

    // Remove hash character (#7531: and string promotion)
    // Add protocol if not provided (#5866: IE7 issue with protocol-less urls)
    // Handle falsy url in the settings object (#10093: consistency with old signature)
    // We also use the url parameter if available
    s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" ).replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

    // Alias method option to type as per ticket #12004
    s.type = options.method || options.type || s.method || s.type;

    // Extract dataTypes list
    s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( rnotwhite ) || [ "" ];

    // A cross-domain request is in order when we have a protocol:host:port mismatch
    if ( s.crossDomain == null ) {
      parts = rurl.exec( s.url.toLowerCase() );
      s.crossDomain = !!( parts &&
        ( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
          ( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
            ( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
      );
    }

    // Convert data if not already a string
    if ( s.data && s.processData && typeof s.data !== "string" ) {
      s.data = jQuery.param( s.data, s.traditional );
    }

    // Apply prefilters
    inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

    // If request was aborted inside a prefilter, stop there
    if ( state === 2 ) {
      return jqXHR;
    }

    // We can fire global events as of now if asked to
    fireGlobals = s.global;

    // Watch for a new set of requests
    if ( fireGlobals && jQuery.active++ === 0 ) {
      jQuery.event.trigger("ajaxStart");
    }

    // Uppercase the type
    s.type = s.type.toUpperCase();

    // Determine if request has content
    s.hasContent = !rnoContent.test( s.type );

    // Save the URL in case we're toying with the If-Modified-Since
    // and/or If-None-Match header later on
    cacheURL = s.url;

    // More options handling for requests with no content
    if ( !s.hasContent ) {

      // If data is available, append data to url
      if ( s.data ) {
        cacheURL = ( s.url += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
        // #9682: remove data so that it's not used in an eventual retry
        delete s.data;
      }

      // Add anti-cache in url if needed
      if ( s.cache === false ) {
        s.url = rts.test( cacheURL ) ?

          // If there is already a '_' parameter, set its value
          cacheURL.replace( rts, "$1_=" + nonce++ ) :

          // Otherwise add one to the end
          cacheURL + ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + nonce++;
      }
    }

    // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
    if ( s.ifModified ) {
      if ( jQuery.lastModified[ cacheURL ] ) {
        jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
      }
      if ( jQuery.etag[ cacheURL ] ) {
        jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
      }
    }

    // Set the correct header, if data is being sent
    if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
      jqXHR.setRequestHeader( "Content-Type", s.contentType );
    }

    // Set the Accepts header for the server, depending on the dataType
    jqXHR.setRequestHeader(
      "Accept",
      s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
        s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
        s.accepts[ "*" ]
    );

    // Check for headers option
    for ( i in s.headers ) {
      jqXHR.setRequestHeader( i, s.headers[ i ] );
    }

    // Allow custom headers/mimetypes and early abort
    if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
      // Abort if not done already and return
      return jqXHR.abort();
    }

    // aborting is no longer a cancellation
    strAbort = "abort";

    // Install callbacks on deferreds
    for ( i in { success: 1, error: 1, complete: 1 } ) {
      jqXHR[ i ]( s[ i ] );
    }

    // Get transport
    transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

    // If no transport, we auto-abort
    if ( !transport ) {
      done( -1, "No Transport" );
    } else {
      jqXHR.readyState = 1;

      // Send global event
      if ( fireGlobals ) {
        globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
      }
      // Timeout
      if ( s.async && s.timeout > 0 ) {
        timeoutTimer = setTimeout(function() {
          jqXHR.abort("timeout");
        }, s.timeout );
      }

      try {
        state = 1;
        transport.send( requestHeaders, done );
      } catch ( e ) {
        // Propagate exception as error if not done
        if ( state < 2 ) {
          done( -1, e );
        // Simply rethrow otherwise
        } else {
          throw e;
        }
      }
    }

    // Callback for when everything is done
    function done( status, nativeStatusText, responses, headers ) {
      var isSuccess, success, error, response, modified,
        statusText = nativeStatusText;

      // Called once
      if ( state === 2 ) {
        return;
      }

      // State is "done" now
      state = 2;

      // Clear timeout if it exists
      if ( timeoutTimer ) {
        clearTimeout( timeoutTimer );
      }

      // Dereference transport for early garbage collection
      // (no matter how long the jqXHR object will be used)
      transport = undefined;

      // Cache response headers
      responseHeadersString = headers || "";

      // Set readyState
      jqXHR.readyState = status > 0 ? 4 : 0;

      // Determine if successful
      isSuccess = status >= 200 && status < 300 || status === 304;

      // Get response data
      if ( responses ) {
        response = ajaxHandleResponses( s, jqXHR, responses );
      }

      // Convert no matter what (that way responseXXX fields are always set)
      response = ajaxConvert( s, response, jqXHR, isSuccess );

      // If successful, handle type chaining
      if ( isSuccess ) {

        // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
        if ( s.ifModified ) {
          modified = jqXHR.getResponseHeader("Last-Modified");
          if ( modified ) {
            jQuery.lastModified[ cacheURL ] = modified;
          }
          modified = jqXHR.getResponseHeader("etag");
          if ( modified ) {
            jQuery.etag[ cacheURL ] = modified;
          }
        }

        // if no content
        if ( status === 204 || s.type === "HEAD" ) {
          statusText = "nocontent";

        // if not modified
        } else if ( status === 304 ) {
          statusText = "notmodified";

        // If we have data, let's convert it
        } else {
          statusText = response.state;
          success = response.data;
          error = response.error;
          isSuccess = !error;
        }
      } else {
        // We extract error from statusText
        // then normalize statusText and status for non-aborts
        error = statusText;
        if ( status || !statusText ) {
          statusText = "error";
          if ( status < 0 ) {
            status = 0;
          }
        }
      }

      // Set data for the fake xhr object
      jqXHR.status = status;
      jqXHR.statusText = ( nativeStatusText || statusText ) + "";

      // Success/Error
      if ( isSuccess ) {
        deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
      } else {
        deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
      }

      // Status-dependent callbacks
      jqXHR.statusCode( statusCode );
      statusCode = undefined;

      if ( fireGlobals ) {
        globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
          [ jqXHR, s, isSuccess ? success : error ] );
      }

      // Complete
      completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

      if ( fireGlobals ) {
        globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
        // Handle the global AJAX counter
        if ( !( --jQuery.active ) ) {
          jQuery.event.trigger("ajaxStop");
        }
      }
    }

    return jqXHR;
  },

  getJSON: function( url, data, callback ) {
    return jQuery.get( url, data, callback, "json" );
  },

  getScript: function( url, callback ) {
    return jQuery.get( url, undefined, callback, "script" );
  }
});

jQuery.each( [ "get", "post" ], function( i, method ) {
  jQuery[ method ] = function( url, data, callback, type ) {
    // shift arguments if data argument was omitted
    if ( jQuery.isFunction( data ) ) {
      type = type || callback;
      callback = data;
      data = undefined;
    }

    return jQuery.ajax({
      url: url,
      type: method,
      dataType: type,
      data: data,
      success: callback
    });
  };
});

// Attach a bunch of functions for handling common AJAX events
jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ) {
  jQuery.fn[ type ] = function( fn ) {
    return this.on( type, fn );
  };
});


jQuery._evalUrl = function( url ) {
  return jQuery.ajax({
    url: url,
    type: "GET",
    dataType: "script",
    async: false,
    global: false,
    "throws": true
  });
};


jQuery.fn.extend({
  wrapAll: function( html ) {
    if ( jQuery.isFunction( html ) ) {
      return this.each(function(i) {
        jQuery(this).wrapAll( html.call(this, i) );
      });
    }

    if ( this[0] ) {
      // The elements to wrap the target around
      var wrap = jQuery( html, this[0].ownerDocument ).eq(0).clone(true);

      if ( this[0].parentNode ) {
        wrap.insertBefore( this[0] );
      }

      wrap.map(function() {
        var elem = this;

        while ( elem.firstChild && elem.firstChild.nodeType === 1 ) {
          elem = elem.firstChild;
        }

        return elem;
      }).append( this );
    }

    return this;
  },

  wrapInner: function( html ) {
    if ( jQuery.isFunction( html ) ) {
      return this.each(function(i) {
        jQuery(this).wrapInner( html.call(this, i) );
      });
    }

    return this.each(function() {
      var self = jQuery( this ),
        contents = self.contents();

      if ( contents.length ) {
        contents.wrapAll( html );

      } else {
        self.append( html );
      }
    });
  },

  wrap: function( html ) {
    var isFunction = jQuery.isFunction( html );

    return this.each(function(i) {
      jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
    });
  },

  unwrap: function() {
    return this.parent().each(function() {
      if ( !jQuery.nodeName( this, "body" ) ) {
        jQuery( this ).replaceWith( this.childNodes );
      }
    }).end();
  }
});


jQuery.expr.filters.hidden = function( elem ) {
  // Support: Opera <= 12.12
  // Opera reports offsetWidths and offsetHeights less than zero on some elements
  return elem.offsetWidth <= 0 && elem.offsetHeight <= 0 ||
    (!support.reliableHiddenOffsets() &&
      ((elem.style && elem.style.display) || jQuery.css( elem, "display" )) === "none");
};

jQuery.expr.filters.visible = function( elem ) {
  return !jQuery.expr.filters.hidden( elem );
};




var r20 = /%20/g,
  rbracket = /\[\]$/,
  rCRLF = /\r?\n/g,
  rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
  rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
  var name;

  if ( jQuery.isArray( obj ) ) {
    // Serialize array item.
    jQuery.each( obj, function( i, v ) {
      if ( traditional || rbracket.test( prefix ) ) {
        // Treat each array item as a scalar.
        add( prefix, v );

      } else {
        // Item is non-scalar (array or object), encode its numeric index.
        buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
      }
    });

  } else if ( !traditional && jQuery.type( obj ) === "object" ) {
    // Serialize object item.
    for ( name in obj ) {
      buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
    }

  } else {
    // Serialize scalar item.
    add( prefix, obj );
  }
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
  var prefix,
    s = [],
    add = function( key, value ) {
      // If value is a function, invoke it and return its value
      value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
      s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
    };

  // Set traditional to true for jQuery <= 1.3.2 behavior.
  if ( traditional === undefined ) {
    traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
  }

  // If an array was passed in, assume that it is an array of form elements.
  if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
    // Serialize the form elements
    jQuery.each( a, function() {
      add( this.name, this.value );
    });

  } else {
    // If traditional, encode the "old" way (the way 1.3.2 or older
    // did it), otherwise encode params recursively.
    for ( prefix in a ) {
      buildParams( prefix, a[ prefix ], traditional, add );
    }
  }

  // Return the resulting serialization
  return s.join( "&" ).replace( r20, "+" );
};

jQuery.fn.extend({
  serialize: function() {
    return jQuery.param( this.serializeArray() );
  },
  serializeArray: function() {
    return this.map(function() {
      // Can add propHook for "elements" to filter or add form elements
      var elements = jQuery.prop( this, "elements" );
      return elements ? jQuery.makeArray( elements ) : this;
    })
    .filter(function() {
      var type = this.type;
      // Use .is(":disabled") so that fieldset[disabled] works
      return this.name && !jQuery( this ).is( ":disabled" ) &&
        rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
        ( this.checked || !rcheckableType.test( type ) );
    })
    .map(function( i, elem ) {
      var val = jQuery( this ).val();

      return val == null ?
        null :
        jQuery.isArray( val ) ?
          jQuery.map( val, function( val ) {
            return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
          }) :
          { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
    }).get();
  }
});


// Create the request object
// (This is still attached to ajaxSettings for backward compatibility)
jQuery.ajaxSettings.xhr = window.ActiveXObject !== undefined ?
  // Support: IE6+
  function() {

    // XHR cannot access local files, always use ActiveX for that case
    return !this.isLocal &&

      // Support: IE7-8
      // oldIE XHR does not support non-RFC2616 methods (#13240)
      // See http://msdn.microsoft.com/en-us/library/ie/ms536648(v=vs.85).aspx
      // and http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9
      // Although this check for six methods instead of eight
      // since IE also does not support "trace" and "connect"
      /^(get|post|head|put|delete|options)$/i.test( this.type ) &&

      createStandardXHR() || createActiveXHR();
  } :
  // For all other browsers, use the standard XMLHttpRequest object
  createStandardXHR;

var xhrId = 0,
  xhrCallbacks = {},
  xhrSupported = jQuery.ajaxSettings.xhr();

// Support: IE<10
// Open requests must be manually aborted on unload (#5280)
if ( window.ActiveXObject ) {
  jQuery( window ).on( "unload", function() {
    for ( var key in xhrCallbacks ) {
      xhrCallbacks[ key ]( undefined, true );
    }
  });
}

// Determine support properties
support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
xhrSupported = support.ajax = !!xhrSupported;

// Create transport if the browser can provide an xhr
if ( xhrSupported ) {

  jQuery.ajaxTransport(function( options ) {
    // Cross domain only allowed if supported through XMLHttpRequest
    if ( !options.crossDomain || support.cors ) {

      var callback;

      return {
        send: function( headers, complete ) {
          var i,
            xhr = options.xhr(),
            id = ++xhrId;

          // Open the socket
          xhr.open( options.type, options.url, options.async, options.username, options.password );

          // Apply custom fields if provided
          if ( options.xhrFields ) {
            for ( i in options.xhrFields ) {
              xhr[ i ] = options.xhrFields[ i ];
            }
          }

          // Override mime type if needed
          if ( options.mimeType && xhr.overrideMimeType ) {
            xhr.overrideMimeType( options.mimeType );
          }

          // X-Requested-With header
          // For cross-domain requests, seeing as conditions for a preflight are
          // akin to a jigsaw puzzle, we simply never set it to be sure.
          // (it can always be set on a per-request basis or even using ajaxSetup)
          // For same-domain requests, won't change header if already provided.
          if ( !options.crossDomain && !headers["X-Requested-With"] ) {
            headers["X-Requested-With"] = "XMLHttpRequest";
          }

          // Set headers
          for ( i in headers ) {
            // Support: IE<9
            // IE's ActiveXObject throws a 'Type Mismatch' exception when setting
            // request header to a null-value.
            //
            // To keep consistent with other XHR implementations, cast the value
            // to string and ignore `undefined`.
            if ( headers[ i ] !== undefined ) {
              xhr.setRequestHeader( i, headers[ i ] + "" );
            }
          }

          // Do send the request
          // This may raise an exception which is actually
          // handled in jQuery.ajax (so no try/catch here)
          xhr.send( ( options.hasContent && options.data ) || null );

          // Listener
          callback = function( _, isAbort ) {
            var status, statusText, responses;

            // Was never called and is aborted or complete
            if ( callback && ( isAbort || xhr.readyState === 4 ) ) {
              // Clean up
              delete xhrCallbacks[ id ];
              callback = undefined;
              xhr.onreadystatechange = jQuery.noop;

              // Abort manually if needed
              if ( isAbort ) {
                if ( xhr.readyState !== 4 ) {
                  xhr.abort();
                }
              } else {
                responses = {};
                status = xhr.status;

                // Support: IE<10
                // Accessing binary-data responseText throws an exception
                // (#11426)
                if ( typeof xhr.responseText === "string" ) {
                  responses.text = xhr.responseText;
                }

                // Firefox throws an exception when accessing
                // statusText for faulty cross-domain requests
                try {
                  statusText = xhr.statusText;
                } catch( e ) {
                  // We normalize with Webkit giving an empty statusText
                  statusText = "";
                }

                // Filter status for non standard behaviors

                // If the request is local and we have data: assume a success
                // (success with no data won't get notified, that's the best we
                // can do given current implementations)
                if ( !status && options.isLocal && !options.crossDomain ) {
                  status = responses.text ? 200 : 404;
                // IE - #1450: sometimes returns 1223 when it should be 204
                } else if ( status === 1223 ) {
                  status = 204;
                }
              }
            }

            // Call complete if needed
            if ( responses ) {
              complete( status, statusText, responses, xhr.getAllResponseHeaders() );
            }
          };

          if ( !options.async ) {
            // if we're in sync mode we fire the callback
            callback();
          } else if ( xhr.readyState === 4 ) {
            // (IE6 & IE7) if it's in cache and has been
            // retrieved directly we need to fire the callback
            setTimeout( callback );
          } else {
            // Add to the list of active xhr callbacks
            xhr.onreadystatechange = xhrCallbacks[ id ] = callback;
          }
        },

        abort: function() {
          if ( callback ) {
            callback( undefined, true );
          }
        }
      };
    }
  });
}

// Functions to create xhrs
function createStandardXHR() {
  try {
    return new window.XMLHttpRequest();
  } catch( e ) {}
}

function createActiveXHR() {
  try {
    return new window.ActiveXObject( "Microsoft.XMLHTTP" );
  } catch( e ) {}
}




// Install script dataType
jQuery.ajaxSetup({
  accepts: {
    script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
  },
  contents: {
    script: /(?:java|ecma)script/
  },
  converters: {
    "text script": function( text ) {
      jQuery.globalEval( text );
      return text;
    }
  }
});

// Handle cache's special case and global
jQuery.ajaxPrefilter( "script", function( s ) {
  if ( s.cache === undefined ) {
    s.cache = false;
  }
  if ( s.crossDomain ) {
    s.type = "GET";
    s.global = false;
  }
});

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function(s) {

  // This transport only deals with cross domain requests
  if ( s.crossDomain ) {

    var script,
      head = document.head || jQuery("head")[0] || document.documentElement;

    return {

      send: function( _, callback ) {

        script = document.createElement("script");

        script.async = true;

        if ( s.scriptCharset ) {
          script.charset = s.scriptCharset;
        }

        script.src = s.url;

        // Attach handlers for all browsers
        script.onload = script.onreadystatechange = function( _, isAbort ) {

          if ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {

            // Handle memory leak in IE
            script.onload = script.onreadystatechange = null;

            // Remove the script
            if ( script.parentNode ) {
              script.parentNode.removeChild( script );
            }

            // Dereference the script
            script = null;

            // Callback if not abort
            if ( !isAbort ) {
              callback( 200, "success" );
            }
          }
        };

        // Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending
        // Use native DOM manipulation to avoid our domManip AJAX trickery
        head.insertBefore( script, head.firstChild );
      },

      abort: function() {
        if ( script ) {
          script.onload( undefined, true );
        }
      }
    };
  }
});




var oldCallbacks = [],
  rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup({
  jsonp: "callback",
  jsonpCallback: function() {
    var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
    this[ callback ] = true;
    return callback;
  }
});

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

  var callbackName, overwritten, responseContainer,
    jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
      "url" :
      typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
    );

  // Handle iff the expected data type is "jsonp" or we have a parameter to set
  if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

    // Get callback name, remembering preexisting value associated with it
    callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
      s.jsonpCallback() :
      s.jsonpCallback;

    // Insert callback into url or form data
    if ( jsonProp ) {
      s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
    } else if ( s.jsonp !== false ) {
      s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
    }

    // Use data converter to retrieve json after script execution
    s.converters["script json"] = function() {
      if ( !responseContainer ) {
        jQuery.error( callbackName + " was not called" );
      }
      return responseContainer[ 0 ];
    };

    // force json dataType
    s.dataTypes[ 0 ] = "json";

    // Install callback
    overwritten = window[ callbackName ];
    window[ callbackName ] = function() {
      responseContainer = arguments;
    };

    // Clean-up function (fires after converters)
    jqXHR.always(function() {
      // Restore preexisting value
      window[ callbackName ] = overwritten;

      // Save back as free
      if ( s[ callbackName ] ) {
        // make sure that re-using the options doesn't screw things around
        s.jsonpCallback = originalSettings.jsonpCallback;

        // save the callback name for future use
        oldCallbacks.push( callbackName );
      }

      // Call if it was a function and we have a response
      if ( responseContainer && jQuery.isFunction( overwritten ) ) {
        overwritten( responseContainer[ 0 ] );
      }

      responseContainer = overwritten = undefined;
    });

    // Delegate to script
    return "script";
  }
});




// data: string of html
// context (optional): If specified, the fragment will be created in this context, defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
  if ( !data || typeof data !== "string" ) {
    return null;
  }
  if ( typeof context === "boolean" ) {
    keepScripts = context;
    context = false;
  }
  context = context || document;

  var parsed = rsingleTag.exec( data ),
    scripts = !keepScripts && [];

  // Single tag
  if ( parsed ) {
    return [ context.createElement( parsed[1] ) ];
  }

  parsed = jQuery.buildFragment( [ data ], context, scripts );

  if ( scripts && scripts.length ) {
    jQuery( scripts ).remove();
  }

  return jQuery.merge( [], parsed.childNodes );
};


// Keep a copy of the old load method
var _load = jQuery.fn.load;

/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
  if ( typeof url !== "string" && _load ) {
    return _load.apply( this, arguments );
  }

  var selector, response, type,
    self = this,
    off = url.indexOf(" ");

  if ( off >= 0 ) {
    selector = jQuery.trim( url.slice( off, url.length ) );
    url = url.slice( 0, off );
  }

  // If it's a function
  if ( jQuery.isFunction( params ) ) {

    // We assume that it's the callback
    callback = params;
    params = undefined;

  // Otherwise, build a param string
  } else if ( params && typeof params === "object" ) {
    type = "POST";
  }

  // If we have elements to modify, make the request
  if ( self.length > 0 ) {
    jQuery.ajax({
      url: url,

      // if "type" variable is undefined, then "GET" method will be used
      type: type,
      dataType: "html",
      data: params
    }).done(function( responseText ) {

      // Save response for use in complete callback
      response = arguments;

      self.html( selector ?

        // If a selector was specified, locate the right elements in a dummy div
        // Exclude scripts to avoid IE 'Permission Denied' errors
        jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

        // Otherwise use the full result
        responseText );

    }).complete( callback && function( jqXHR, status ) {
      self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
    });
  }

  return this;
};




jQuery.expr.filters.animated = function( elem ) {
  return jQuery.grep(jQuery.timers, function( fn ) {
    return elem === fn.elem;
  }).length;
};





var docElem = window.document.documentElement;

/**
 * Gets a window from an element
 */
function getWindow( elem ) {
  return jQuery.isWindow( elem ) ?
    elem :
    elem.nodeType === 9 ?
      elem.defaultView || elem.parentWindow :
      false;
}

jQuery.offset = {
  setOffset: function( elem, options, i ) {
    var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
      position = jQuery.css( elem, "position" ),
      curElem = jQuery( elem ),
      props = {};

    // set position first, in-case top/left are set even on static elem
    if ( position === "static" ) {
      elem.style.position = "relative";
    }

    curOffset = curElem.offset();
    curCSSTop = jQuery.css( elem, "top" );
    curCSSLeft = jQuery.css( elem, "left" );
    calculatePosition = ( position === "absolute" || position === "fixed" ) &&
      jQuery.inArray("auto", [ curCSSTop, curCSSLeft ] ) > -1;

    // need to be able to calculate position if either top or left is auto and position is either absolute or fixed
    if ( calculatePosition ) {
      curPosition = curElem.position();
      curTop = curPosition.top;
      curLeft = curPosition.left;
    } else {
      curTop = parseFloat( curCSSTop ) || 0;
      curLeft = parseFloat( curCSSLeft ) || 0;
    }

    if ( jQuery.isFunction( options ) ) {
      options = options.call( elem, i, curOffset );
    }

    if ( options.top != null ) {
      props.top = ( options.top - curOffset.top ) + curTop;
    }
    if ( options.left != null ) {
      props.left = ( options.left - curOffset.left ) + curLeft;
    }

    if ( "using" in options ) {
      options.using.call( elem, props );
    } else {
      curElem.css( props );
    }
  }
};

jQuery.fn.extend({
  offset: function( options ) {
    if ( arguments.length ) {
      return options === undefined ?
        this :
        this.each(function( i ) {
          jQuery.offset.setOffset( this, options, i );
        });
    }

    var docElem, win,
      box = { top: 0, left: 0 },
      elem = this[ 0 ],
      doc = elem && elem.ownerDocument;

    if ( !doc ) {
      return;
    }

    docElem = doc.documentElement;

    // Make sure it's not a disconnected DOM node
    if ( !jQuery.contains( docElem, elem ) ) {
      return box;
    }

    // If we don't have gBCR, just use 0,0 rather than error
    // BlackBerry 5, iOS 3 (original iPhone)
    if ( typeof elem.getBoundingClientRect !== strundefined ) {
      box = elem.getBoundingClientRect();
    }
    win = getWindow( doc );
    return {
      top: box.top  + ( win.pageYOffset || docElem.scrollTop )  - ( docElem.clientTop  || 0 ),
      left: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )
    };
  },

  position: function() {
    if ( !this[ 0 ] ) {
      return;
    }

    var offsetParent, offset,
      parentOffset = { top: 0, left: 0 },
      elem = this[ 0 ];

    // fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent
    if ( jQuery.css( elem, "position" ) === "fixed" ) {
      // we assume that getBoundingClientRect is available when computed position is fixed
      offset = elem.getBoundingClientRect();
    } else {
      // Get *real* offsetParent
      offsetParent = this.offsetParent();

      // Get correct offsets
      offset = this.offset();
      if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
        parentOffset = offsetParent.offset();
      }

      // Add offsetParent borders
      parentOffset.top  += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
      parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
    }

    // Subtract parent offsets and element margins
    // note: when an element has margin: auto the offsetLeft and marginLeft
    // are the same in Safari causing offset.left to incorrectly be 0
    return {
      top:  offset.top  - parentOffset.top - jQuery.css( elem, "marginTop", true ),
      left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true)
    };
  },

  offsetParent: function() {
    return this.map(function() {
      var offsetParent = this.offsetParent || docElem;

      while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position" ) === "static" ) ) {
        offsetParent = offsetParent.offsetParent;
      }
      return offsetParent || docElem;
    });
  }
});

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
  var top = /Y/.test( prop );

  jQuery.fn[ method ] = function( val ) {
    return access( this, function( elem, method, val ) {
      var win = getWindow( elem );

      if ( val === undefined ) {
        return win ? (prop in win) ? win[ prop ] :
          win.document.documentElement[ method ] :
          elem[ method ];
      }

      if ( win ) {
        win.scrollTo(
          !top ? val : jQuery( win ).scrollLeft(),
          top ? val : jQuery( win ).scrollTop()
        );

      } else {
        elem[ method ] = val;
      }
    }, method, val, arguments.length, null );
  };
});

// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// getComputedStyle returns percent when specified for top/left/bottom/right
// rather than make the css module depend on the offset module, we just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
  jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
    function( elem, computed ) {
      if ( computed ) {
        computed = curCSS( elem, prop );
        // if curCSS returns percentage, fallback to offset
        return rnumnonpx.test( computed ) ?
          jQuery( elem ).position()[ prop ] + "px" :
          computed;
      }
    }
  );
});


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
  jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
    // margin is only for outerHeight, outerWidth
    jQuery.fn[ funcName ] = function( margin, value ) {
      var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
        extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

      return access( this, function( elem, type, value ) {
        var doc;

        if ( jQuery.isWindow( elem ) ) {
          // As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
          // isn't a whole lot we can do. See pull request at this URL for discussion:
          // https://github.com/jquery/jquery/pull/764
          return elem.document.documentElement[ "client" + name ];
        }

        // Get document width or height
        if ( elem.nodeType === 9 ) {
          doc = elem.documentElement;

          // Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest
          // unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.
          return Math.max(
            elem.body[ "scroll" + name ], doc[ "scroll" + name ],
            elem.body[ "offset" + name ], doc[ "offset" + name ],
            doc[ "client" + name ]
          );
        }

        return value === undefined ?
          // Get width or height on the element, requesting but not forcing parseFloat
          jQuery.css( elem, type, extra ) :

          // Set width or height on the element
          jQuery.style( elem, type, value, extra );
      }, type, chainable ? margin : undefined, chainable, null );
    };
  });
});


// The number of elements contained in the matched element set
jQuery.fn.size = function() {
  return this.length;
};

jQuery.fn.andSelf = jQuery.fn.addBack;




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
  define( "jquery", [], function() {
    return jQuery;
  });
}




var
  // Map over jQuery in case of overwrite
  _jQuery = window.jQuery,

  // Map over the $ in case of overwrite
  _$ = window.$;

jQuery.noConflict = function( deep ) {
  if ( window.$ === jQuery ) {
    window.$ = _$;
  }

  if ( deep && window.jQuery === jQuery ) {
    window.jQuery = _jQuery;
  }

  return jQuery;
};

// Expose jQuery and $ identifiers, even in
// AMD (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( typeof noGlobal === strundefined ) {
  window.jQuery = window.$ = jQuery;
}




return jQuery;

}));

}, {}],
262: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var tick = require('next-tick');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Vero', function(){
  var Vero = plugin;
  var vero;
  var analytics;
  var options = {
    apiKey: '99504fea17d9b70805e470a672af1c5b608eb88f'
  };

  beforeEach(function(){
    analytics = new Analytics;
    vero = new Vero(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(vero);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    vero.reset();
    sandbox();
  });

  it('should store the proper settings', function(){
    analytics.compare(Vero, integration('Vero')
      .global('_veroq')
      .option('apiKey', ''));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(vero, 'load');
    });

    describe('#initialize', function(){
      it('should push onto window._veroq', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window._veroq[0], ['init', { api_key: options.apiKey }]);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(vero.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(vero, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window._veroq, 'push');
      });

      it('should push "trackPageview"', function(){
        analytics.page();
        analytics.called(window._veroq.push, ['trackPageview']);
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window._veroq, 'push');
      });

      it('shouldnt send just an id', function(){
        analytics.identify('id');
        analytics.didNotCall(window._veroq.push);
      });

      it('shouldnt send without an id', function(){
        analytics.identify({ trait: true });
        analytics.didNotCall(window._veroq.push);
      });

      it('should send an id and email', function(){
        analytics.identify('id', { email: 'name@example.com' });
        analytics.called(window._veroq.push, ['user', {
          id: 'id',
          email: 'name@example.com'
        }]);
      });

      it('should send an id and traits', function(){
        analytics.identify('id', {
          email: 'name@example.com',
          trait: true
        });
        analytics.called(window._veroq.push, ['user', {
          id: 'id',
          email: 'name@example.com',
          trait: true
        }]);
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window._veroq, 'push');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window._veroq.push, ['track', 'event', {}]);
      });

      it('should send an event and properties', function(){
        analytics.track('event', { property: true });
        analytics.called(window._veroq.push, ['track', 'event', { property: true }]);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"next-tick":103,"./":84,"clear-env":4}],
263: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var tick = require('next-tick');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Visual Website Optimizer', function(){
  var VWO = plugin;
  var vwo;
  var analytics;
  var options = {};

  beforeEach(function(){
    analytics = new Analytics;
    vwo = new VWO(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(vwo);

    // set up fake VWO data to simulate the replay
    window._vwo_exp_ids = [1];
    window._vwo_exp = { 1: { comb_n: { 1: 'Variation' }, combination_chosen: 1 } };
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    vwo.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(VWO, integration('Visual Website Optimizer')
      .option('replay', true));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(vwo, 'replay');
    });

    describe('#initialize', function(){
      it('should call replay', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(vwo.replay);
      });
    });

    describe('#replay', function(){
      it('should replay variation data');
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"next-tick":103,"./":85,"clear-env":4}],
264: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('WebEngage', function(){
  var WebEngage = plugin;
  var webengage;
  var analytics;
  var options = {
    licenseCode: '~2024c003'
  };

  beforeEach(function(){
    analytics = new Analytics;
    webengage = new WebEngage(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(webengage);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    webengage.reset();
    sandbox();
  });

  it('should store the correct settings', function(){
    analytics.compare(WebEngage, integration('WebEngage')
      .assumesPageview()
      .global('webengage')
      .global('_weq')
      .option('widgetVersion', '4.0')
      .option('licenseCode', ''));
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(webengage, done);
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":86,"clear-env":4}],
265: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Woopra', function(){
  var Woopra = plugin;
  var woopra;
  var analytics;
  var options = {
    domain: 'x',
    outgoingTracking: false
  };

  beforeEach(function(){
    analytics = new Analytics;
    woopra = new Woopra(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(woopra);
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    woopra.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Woopra, integration('Woopra')
      .global('woopra')
      .option('domain', '')
      .option('cookieName', 'wooTracker')
      .option('cookieDomain', null)
      .option('cookiePath', '/')
      .option('ping', true)
      .option('pingInterval', 12000)
      .option('idleTimeout', 300000)
      .option('downloadTracking', true)
      .option('outgoingTracking', true)
      .option('outgoingIgnoreSubdomain', true)
      .option('downloadPause', 200)
      .option('outgoingPause', 400)
      .option('ignoreQueryUrl', true)
      .option('hideCampaign', false));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(woopra, 'load');
    });

    describe('#initialize', function(){
      it('should create a woopra object', function(){
        analytics.assert(!window.woopra);
        analytics.initialize();
        analytics.page();
        analytics.assert(window.woopra);
      });

      it('should configure woopra', function(){
        analytics.initialize();
        analytics.page();
        analytics.deepEqual(window.woopra._e, [
          ['config', 'domain', 'x'],
          ['config', 'outgoing_tracking', false],
          ['config', 'cookie_name', 'wooTracker'],
          ['config', 'cookie_path', '/'],
          ['config', 'ping', true],
          ['config', 'ping_interval', 12000],
          ['config', 'idle_timeout', 300000],
          ['config', 'download_tracking', true],
          ['config', 'outgoing_ignore_subdomain', true],
          ['config', 'download_pause', 200],
          ['config', 'outgoing_pause', 400],
          ['config', 'ignore_query_url', true],
          ['config', 'hide_campaign', false]
        ]);
      });

      it('should not send options if they are null, or empty', function(){
        woopra.options.domain = '';
        woopra.options.cookieName = '';
        woopra.options.cookiePath = null;
        woopra.options.ping = null;
        woopra.options.pingInterval = null;
        woopra.options.idleTimeout = null;
        woopra.options.downloadTracking = null;
        woopra.options.outgoingTracking = null;
        woopra.options.outgoingIgnoreSubdomain = null;
        woopra.options.downloadPause = '';
        woopra.options.outgoingPause = '';
        woopra.options.ignoreQueryUrl = null;
        woopra.options.hideCampaign = null;
        analytics.initialize();
        analytics.page();
        analytics.deepEqual([], window.woopra._e);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(woopra.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(woopra, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    describe('#page', function(){
      beforeEach(function(){
        analytics.stub(window.woopra, 'track');
      });

      it('should send a page view', function(){
        analytics.page();
        analytics.called(window.woopra.track, 'pv', {
          path: window.location.pathname,
          referrer: document.referrer,
          title: document.title,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname
        });
      });

      it('should send a title', function(){
        analytics.page({ title: 'title' });
        analytics.called(window.woopra.track, 'pv', {
          title: 'title',
          path: window.location.pathname,
          referrer: document.referrer,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname
        });
      });

      it('should prefer a name', function(){
        analytics.page('name', { title: 'title' });
        analytics.called(window.woopra.track, 'pv', {
          title: 'name',
          name: 'name',
          path: window.location.pathname,
          referrer: document.referrer,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname
        });
      });

      it('should prefer a category and name', function(){
        analytics.page('category', 'name', { title: 'title' });
        analytics.called(window.woopra.track, 'pv', {
          title: 'category name',
          category: 'category',
          name: 'name',
          path: window.location.pathname,
          referrer: document.referrer,
          search: window.location.search,
          url: window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + window.location.pathname
        });
      });
    });

    describe('#identify', function(){
      beforeEach(function(){
        analytics.stub(window.woopra, 'identify');
      });

      it('should send an id', function(){
        analytics.identify('id');
        analytics.called(window.woopra.identify, { id: 'id' });
      });

      it('should send traits', function(){
        analytics.identify({ trait: true });
        analytics.called(window.woopra.identify, { trait: true });
      });

      it('should send an id and traits', function(){
        analytics.identify('id', { trait: true });
        analytics.called(window.woopra.identify, { id: 'id', trait: true });
      });

      it('should alias the name properly', function(){
        analytics.identify('id', {
          firstName: 'firstName',
          lastName: 'lastName'
        });
        analytics.called(window.woopra.identify, {
          name: 'firstName lastName',
          firstName: 'firstName',
          lastName: 'lastName',
          id: 'id'
        });
      });
    });

    describe('#track', function(){
      beforeEach(function(){
        analytics.stub(window.woopra, 'track');
      });

      it('should send an event', function(){
        analytics.track('event');
        analytics.called(window.woopra.track, 'event');
      });

      it('should send properties', function(){
        analytics.track('event', { property: 'Property' });
        analytics.called(window.woopra.track, 'event', { property: 'Property' });
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"./":87,"clear-env":4}],
266: [function(require, module, exports) {

var Analytics = require('analytics.js').constructor;
var integration = require('analytics.js-integration');
var tester = require('analytics.js-integration-tester');
var tick = require('next-tick');
var plugin = require('./');
var sandbox = require('clear-env');

describe('Yandex', function(){
  var Yandex = plugin;
  var yandex;
  var analytics;
  var options = {
    counterId: 22522351
  };

  beforeEach(function(){
    analytics = new Analytics;
    yandex = new Yandex(options);
    analytics.use(plugin);
    analytics.use(tester);
    analytics.add(yandex);
    window['yaCounter' + options.counterId] = undefined;
  });

  afterEach(function(){
    analytics.restore();
    analytics.reset();
    yandex.reset();
    sandbox();
  });

  it('should have the right settings', function(){
    analytics.compare(Yandex, integration('Yandex Metrica')
      .assumesPageview()
      .global('yandex_metrika_callbacks')
      .global('Ya')
      .option('counterId', null)
      .option('clickmap', false)
      .option('webvisor', false));
  });

  describe('before loading', function(){
    beforeEach(function(){
      analytics.stub(yandex, 'load');
    });

    describe('#initialize', function(){
      it('should push onto the yandex_metrica_callbacks', function(){
        analytics.assert(!window.yandex_metrika_callbacks);
        analytics.initialize();
        analytics.page();
        analytics.assert(window.yandex_metrika_callbacks.length === 1);
      });

      it('should call #load', function(){
        analytics.initialize();
        analytics.page();
        analytics.called(yandex.load);
      });
    });
  });

  describe('loading', function(){
    it('should load', function(done){
      analytics.load(yandex, done);
    });
  });

  describe('after loading', function(){
    beforeEach(function(done){
      analytics.once('ready', done);
      analytics.initialize();
      analytics.page();
    });

    it('should create a yaCounter object', function(){
      tick(function(){
        var key = 'yaCounter' + yandex.options.counterId;
        analytics.assert(window[key]);
      });
    });
  });
});
}, {"analytics.js":267,"analytics.js-integration":89,"analytics.js-integration-tester":268,"next-tick":103,"./":88,"clear-env":4}]}, {}, {"1":""})

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcXVpcmUuanMiLCJ0ZXN0L2luZGV4LmpzIiwiY29tcG9uZW50cy9jb21wb25lbnQtYXNzZXJ0QDAuNS4wL2luZGV4LmpzIiwiY29tcG9uZW50cy9qa3Jvc28tZXF1YWxzQDAuMy43L2luZGV4LmpzIiwiY29tcG9uZW50cy9qa3Jvc28tdHlwZUAxLjEuMC9pbmRleC5qcyIsImNvbXBvbmVudHMveWllbGRzLWZtdEAwLjAuMi9pbmRleC5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LXN0YWNrQDAuMC4xL2luZGV4LmpzIiwiaW5kZXguanMiLCJjb21wb25lbnRzL2NvbXBvbmVudC1lYWNoQDAuMC4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9jb21wb25lbnQtdHlwZUAxLjAuMC9pbmRleC5qcyIsImludGVncmF0aW9ucy5qcyIsImxpYi9hZHJvbGwvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25AMC4zLjgvbGliL2luZGV4LmpzIiwiY29tcG9uZW50cy9pYW5zdG9ybXRheWxvci1iaW5kQDAuMC4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9jb21wb25lbnQtYmluZEAxLjAuMC9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWJpbmQtYWxsQDAuMC4yL2luZGV4LmpzIiwiY29tcG9uZW50cy9pYW5zdG9ybXRheWxvci1jYWxsYmFja0AwLjAuMS9pbmRleC5qcyIsImNvbXBvbmVudHMvdGltb3hsZXktbmV4dC10aWNrQDAuMC4yL2luZGV4LmpzIiwiY29tcG9uZW50cy9jb21wb25lbnQtY2xvbmVAMC4xLjAvaW5kZXguanMiLCJjb21wb25lbnRzL3Zpc2lvbm1lZGlhLWRlYnVnQDAuNy4zL2luZGV4LmpzIiwiY29tcG9uZW50cy92aXNpb25tZWRpYS1kZWJ1Z0AwLjcuMy9saWIvZGVidWcuanMiLCJjb21wb25lbnRzL3Zpc2lvbm1lZGlhLWRlYnVnQDAuNy4zL2RlYnVnLmpzIiwiY29tcG9uZW50cy9hdmV0aXNrLWRlZmF1bHRzQDAuMC40L2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uQDAuMy44L2xpYi9wcm90b3MuanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1sb2FkLXNjcmlwdEAwLjEuMy9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLXNjcmlwdC1vbmxvYWRAMS4wLjEvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MtZXZlbnRzQDEuMi4wL2luZGV4LmpzIiwiY29tcG9uZW50cy9pYW5zdG9ybXRheWxvci10by1uby1jYXNlQDAuMS4yL2luZGV4LmpzIiwiY29tcG9uZW50cy9jb21wb25lbnQtZW1pdHRlckAxLjEuMC9pbmRleC5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LWluZGV4b2ZAMC4wLjMvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hZnRlckAwLjAuMS9pbmRleC5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LWVhY2hAMC4yLjUvaW5kZXguanMiLCJjb21wb25lbnRzL2NvbXBvbmVudC10by1mdW5jdGlvbkAyLjAuNS9pbmRleC5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LXByb3BzQDEuMS4yL2luZGV4LmpzIiwiY29tcG9uZW50cy95aWVsZHMtZm10QDAuMS4wL2luZGV4LmpzIiwiY29tcG9uZW50cy95aWVsZHMtc2x1Z0AxLjEuMC9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbkAwLjMuOC9saWIvc3RhdGljcy5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LWRvbWlmeUAxLjMuMS9pbmRleC5qcyIsImNvbXBvbmVudHMvaWFuc3Rvcm10YXlsb3ItdG8tc25ha2UtY2FzZUAwLjEuMi9pbmRleC5qcyIsImNvbXBvbmVudHMvaWFuc3Rvcm10YXlsb3ItdG8tc3BhY2UtY2FzZUAwLjEuMi9pbmRleC5qcyIsImNvbXBvbmVudHMvaWFuc3Rvcm10YXlsb3ItdG8tbm8tY2FzZUAwLjEuMC9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLXVzZS1odHRwc0AwLjEuMC9pbmRleC5qcyIsImNvbXBvbmVudHMvaWFuc3Rvcm10YXlsb3ItaXNAMC4xLjAvaW5kZXguanMiLCJjb21wb25lbnRzL2lhbnN0b3JtdGF5bG9yLWlzLWVtcHR5QDAuMC4xL2luZGV4LmpzIiwibGliL2Fkd29yZHMvaW5kZXguanMiLCJsaWIvYWxleGEvaW5kZXguanMiLCJsaWIvYW1wbGl0dWRlL2luZGV4LmpzIiwibGliL2FwcGN1ZXMvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1sb2FkLXNjcmlwdEAwLjEuMi9pbmRleC5qcyIsImxpYi9hd2VzbS9pbmRleC5qcyIsImxpYi9hd2Vzb21hdGljL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tb24tYm9keUAwLjAuMS9pbmRleC5qcyIsImxpYi9iaW5nLWFkcy9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWV4dGVuZEAwLjAuMS9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLXdoZW5AMC4wLjEvaW5kZXguanMiLCJsaWIvYnJvbnRvL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tZmFjYWRlQDEuNC43L2xpYi9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWZhY2FkZUAxLjQuNy9saWIvZmFjYWRlLmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8taXNvZGF0ZS10cmF2ZXJzZUAwLjMuMy9pbmRleC5qcyIsImNvbXBvbmVudHMvaWFuc3Rvcm10YXlsb3ItaXNAMC4xLjEvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1pc29kYXRlQDAuMC4yL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tZmFjYWRlQDEuNC43L2xpYi9pcy1lbmFibGVkLmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tZmFjYWRlQDEuNC43L2xpYi91dGlscy5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LWluaGVyaXRAMC4wLjMvaW5kZXguanMiLCJjb21wb25lbnRzL2NvbXBvbmVudC1jbG9uZUAwLjIuMi9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWZhY2FkZUAxLjQuNy9saWIvYWRkcmVzcy5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLW9iai1jYXNlQDAuMS4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tbmV3LWRhdGVAMC4zLjEvbGliL2luZGV4LmpzIiwiY29tcG9uZW50cy9pYW5zdG9ybXRheWxvci1pc0AwLjAuNS9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLW5ldy1kYXRlQDAuMy4xL2xpYi9taWxsaXNlY29uZHMuanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1uZXctZGF0ZUAwLjMuMS9saWIvc2Vjb25kcy5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWZhY2FkZUAxLjQuNy9saWIvYWxpYXMuanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1mYWNhZGVAMS40LjcvbGliL2dyb3VwLmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8taXMtZW1haWxAMC4xLjEvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1mYWNhZGVAMS40LjcvbGliL2lkZW50aWZ5LmpzIiwiY29tcG9uZW50cy9jb21wb25lbnQtdHJpbUAwLjAuMS9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWZhY2FkZUAxLjQuNy9saWIvdHJhY2suanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1mYWNhZGVAMS40LjcvbGliL3BhZ2UuanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1mYWNhZGVAMS40LjcvbGliL3NjcmVlbi5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWxvYWQtcGl4ZWxAMC4xLjEvaW5kZXguanMiLCJjb21wb25lbnRzL2NvbXBvbmVudC1xdWVyeXN0cmluZ0AxLjMuMS9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLXN1YnN0aXR1dGVAMC4xLjAvaW5kZXguanMiLCJsaWIvYnVnaGVyZC9pbmRleC5qcyIsImxpYi9idWdzbmFnL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tb24tZXJyb3JAMC4xLjAvaW5kZXguanMiLCJsaWIvY2hhcnRiZWF0L2luZGV4LmpzIiwiY29tcG9uZW50cy9hdmV0aXNrLWRlZmF1bHRzQDAuMC4xL2luZGV4LmpzIiwibGliL2NodXJuYmVlL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tZ2xvYmFsLXF1ZXVlQDAuMC4yL2luZGV4LmpzIiwibGliL2NsaWNrdGFsZS9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWxvYWQtZGF0ZUAwLjAuMS9pbmRleC5qcyIsImxpYi9jbGlja3kvaW5kZXguanMiLCJsaWIvY29tc2NvcmUvaW5kZXguanMiLCJsaWIvY3JhenktZWdnL2luZGV4LmpzIiwibGliL2N1cmViaXQvaW5kZXguanMiLCJjb21wb25lbnRzL2NvbXBvbmVudC10aHJvdHRsZUAwLjAuMi9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLXRvLWlzby1zdHJpbmdAMC4wLjEvaW5kZXguanMiLCJjb21wb25lbnRzL2NvbXBvbmVudC1jbG9uZUAwLjEuMS9pbmRleC5qcyIsImxpYi9jdXN0b21lcmlvL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYWxpYXNAMC4yLjEvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1jb252ZXJ0LWRhdGVzQDAuMS4wL2luZGV4LmpzIiwibGliL2RyaXAvaW5kZXguanMiLCJsaWIvZXJyb3JjZXB0aW9uL2luZGV4LmpzIiwibGliL2V2ZXJnYWdlL2luZGV4LmpzIiwibGliL2ZhY2Vib29rLWNvbnZlcnNpb24tdHJhY2tpbmcvaW5kZXguanMiLCJsaWIvZm94bWV0cmljcy9pbmRleC5qcyIsImxpYi9mcm9udGxlYWYvaW5kZXguanMiLCJsaWIvZnVsbHN0b3J5L2luZGV4LmpzIiwibGliL2dhdWdlcy9pbmRleC5qcyIsImxpYi9nZXQtc2F0aXNmYWN0aW9uL2luZGV4LmpzIiwibGliL2dvb2dsZS1hbmFseXRpY3MvaW5kZXguanMiLCJjb21wb25lbnRzL2NvbXBvbmVudC1vYmplY3RAMC4wLjMvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1jYW5vbmljYWxAMC4wLjEvaW5kZXguanMiLCJjb21wb25lbnRzL2NvbXBvbmVudC1zZWxlY3RAMC4wLjEvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1vYmotY2FzZUAwLjAuNy9pbmRleC5qcyIsImNvbXBvbmVudHMvaWFuc3Rvcm10YXlsb3ItY2FzZUAwLjEuMC9saWIvaW5kZXguanMiLCJjb21wb25lbnRzL2lhbnN0b3JtdGF5bG9yLWNhc2VAMC4xLjAvbGliL2Nhc2VzLmpzIiwiY29tcG9uZW50cy9pYW5zdG9ybXRheWxvci10by1jYW1lbC1jYXNlQDAuMS4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9pYW5zdG9ybXRheWxvci10by1zcGFjZS1jYXNlQDAuMS4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9pYW5zdG9ybXRheWxvci10by1jYXBpdGFsLWNhc2VAMC4xLjAvaW5kZXguanMiLCJjb21wb25lbnRzL2lhbnN0b3JtdGF5bG9yLXRvLWNvbnN0YW50LWNhc2VAMC4xLjEvaW5kZXguanMiLCJjb21wb25lbnRzL2lhbnN0b3JtdGF5bG9yLXRvLXNuYWtlLWNhc2VAMC4xLjEvaW5kZXguanMiLCJjb21wb25lbnRzL2lhbnN0b3JtdGF5bG9yLXRvLWRvdC1jYXNlQDAuMC4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9pYW5zdG9ybXRheWxvci10by1wYXNjYWwtY2FzZUAwLjAuMS9pbmRleC5qcyIsImNvbXBvbmVudHMvaWFuc3Rvcm10YXlsb3ItdG8tc2VudGVuY2UtY2FzZUAwLjEuMC9pbmRleC5qcyIsImNvbXBvbmVudHMvaWFuc3Rvcm10YXlsb3ItdG8tc2x1Zy1jYXNlQDAuMS4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9pYW5zdG9ybXRheWxvci10by10aXRsZS1jYXNlQDAuMS4wL2luZGV4LmpzIiwiY29tcG9uZW50cy9jb21wb25lbnQtZXNjYXBlLXJlZ2V4cEAxLjAuMi9pbmRleC5qcyIsImNvbXBvbmVudHMvaWFuc3Rvcm10YXlsb3ItbWFwQDAuMC4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9pYW5zdG9ybXRheWxvci10aXRsZS1jYXNlLW1pbm9yc0AwLjAuMi9pbmRleC5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LXVybEAwLjEuMC9pbmRleC5qcyIsImxpYi9nb29nbGUtdGFnLW1hbmFnZXIvaW5kZXguanMiLCJsaWIvZ29zcXVhcmVkL2luZGV4LmpzIiwibGliL2hlYXAvaW5kZXguanMiLCJsaWIvaGVsbG9iYXIvaW5kZXguanMiLCJsaWIvaGl0dGFpbC9pbmRleC5qcyIsImxpYi9odWJzcG90L2luZGV4LmpzIiwibGliL2ltcHJvdmVseS9pbmRleC5qcyIsImxpYi9pbnNpZGV2YXVsdC9pbmRleC5qcyIsImxpYi9pbnNwZWN0bGV0L2luZGV4LmpzIiwibGliL2ludGVyY29tL2luZGV4LmpzIiwibGliL2tlZW4taW8vaW5kZXguanMiLCJsaWIva2Vuc2hvby9pbmRleC5qcyIsImxpYi9raXNzbWV0cmljcy9pbmRleC5qcyIsImNvbXBvbmVudHMvdmlzaW9ubWVkaWEtYmF0Y2hAMC41LjAvaW5kZXguanMiLCJjb21wb25lbnRzL2NvbXBvbmVudC1lbWl0dGVyQDEuMS4zL2luZGV4LmpzIiwibGliL2tsYXZpeW8vaW5kZXguanMiLCJsaWIvbGVhZGxhbmRlci9pbmRleC5qcyIsImxpYi9saXZlY2hhdC9pbmRleC5qcyIsImxpYi9sdWNreS1vcmFuZ2UvaW5kZXguanMiLCJsaWIvbHl0aWNzL2luZGV4LmpzIiwibGliL21peHBhbmVsL2luZGV4LmpzIiwiY29tcG9uZW50cy95aWVsZHMtc29tZUAxLjAuMC9pbmRleC5qcyIsImxpYi9tb2puL2luZGV4LmpzIiwibGliL21vdXNlZmxvdy9pbmRleC5qcyIsImxpYi9tb3VzZXN0YXRzL2luZGV4LmpzIiwibGliL25hdmlseXRpY3MvaW5kZXguanMiLCJsaWIvb2xhcmsvaW5kZXguanMiLCJsaWIvb3B0aW1pemVseS9pbmRleC5qcyIsImxpYi9wZXJmZWN0LWF1ZGllbmNlL2luZGV4LmpzIiwibGliL3Bpbmdkb20vaW5kZXguanMiLCJsaWIvcGl3aWsvaW5kZXguanMiLCJsaWIvcHJlYWN0L2luZGV4LmpzIiwibGliL3B1YmxldC1pbnRlZ3JhdGlvbi9pbmRleC5qcyIsImxpYi9xdWFsYXJvby9pbmRleC5qcyIsImxpYi9xdWFudGNhc3QvaW5kZXguanMiLCJsaWIvcm9sbGJhci9pbmRleC5qcyIsImxpYi9zYWFzcXVhdGNoL2luZGV4LmpzIiwibGliL3NlbnRyeS9pbmRleC5qcyIsImxpYi9zbmFwZW5nYWdlL2luZGV4LmpzIiwibGliL3NwaW5uYWtyL2luZGV4LmpzIiwibGliL3RhcHN0cmVhbS9pbmRleC5qcyIsImxpYi90cmFraW8vaW5kZXguanMiLCJsaWIvdHdpdHRlci1hZHMvaW5kZXguanMiLCJsaWIvdXNlcnZvaWNlL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tdG8tdW5peC10aW1lc3RhbXBAMC4wLjEvaW5kZXguanMiLCJsaWIvdmVyby9pbmRleC5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LWNvb2tpZUAxLjAuMS9pbmRleC5qcyIsImxpYi92aXN1YWwtd2Vic2l0ZS1vcHRpbWl6ZXIvaW5kZXguanMiLCJsaWIvd2ViZW5nYWdlL2luZGV4LmpzIiwibGliL3dvb3ByYS9pbmRleC5qcyIsImxpYi95YW5kZXgtbWV0cmljYS9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWNsZWFyLWVudkAwLjIuMC9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWNsZWFyLWFqYXhAMC4wLjEvaW5kZXguanMiLCJjb21wb25lbnRzL3lpZWxkcy1jbGVhci10aW1lb3V0c0AwLjAuMi9pbmRleC5qcyIsImNvbXBvbmVudHMveWllbGRzLWNsZWFyLWludGVydmFsc0AwLjAuMy9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWNsZWFyLWxpc3RlbmVyc0AwLjEuMi9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWNsZWFyLWdsb2JhbHNAMC4xLjAvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1jbGVhci1pbWFnZXNAMC4xLjAvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1jbGVhci1zY3JpcHRzQDAuMS4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9jb21wb25lbnQtcXVlcnlAMC4wLjMvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1jbGVhci1jb29raWVzQDAuMS4wL2luZGV4LmpzIiwidGVzdC90ZXN0cy5qcyIsImxpYi9hZHJvbGwvdGVzdC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qc0AyLjQuNy9saWIvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9pbnRlZ3JhdGlvbnMuanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9hZHJvbGwvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9hZHdvcmRzL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvYWxleGEvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9hbXBsaXR1ZGUvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9hcHBjdWVzL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvYXdlc20vaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9hd2Vzb21hdGljL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvYmluZy1hZHMvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9icm9udG8vaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9idWdoZXJkL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvYnVnc25hZy9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL2NoYXJ0YmVhdC9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL2NodXJuYmVlL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvY2xpY2t0YWxlL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvY2xpY2t5L2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvY29tc2NvcmUvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9jcmF6eS1lZ2cvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9jdXJlYml0L2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvY3VzdG9tZXJpby9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL2RyaXAvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9lcnJvcmNlcHRpb24vaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9ldmVyZ2FnZS9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL2ZhY2Vib29rLWNvbnZlcnNpb24tdHJhY2tpbmcvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9mb3htZXRyaWNzL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvZnJvbnRsZWFmL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvZnVsbHN0b3J5L2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvZ2F1Z2VzL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvZ2V0LXNhdGlzZmFjdGlvbi9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL2dvb2dsZS1hbmFseXRpY3MvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9nb29nbGUtdGFnLW1hbmFnZXIvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9nb3NxdWFyZWQvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9oZWFwL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvaGVsbG9iYXIvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9oaXR0YWlsL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvaHVic3BvdC9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL2ltcHJvdmVseS9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL2luc2lkZXZhdWx0L2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvaW5zcGVjdGxldC9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL2ludGVyY29tL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIva2Vlbi1pby9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL2tlbnNob28vaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9raXNzbWV0cmljcy9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL2tsYXZpeW8vaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9sZWFkbGFuZGVyL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvbGl2ZWNoYXQvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9sdWNreS1vcmFuZ2UvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9seXRpY3MvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9taXhwYW5lbC9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL21vam4vaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9tb3VzZWZsb3cvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9tb3VzZXN0YXRzL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvbmF2aWx5dGljcy9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL29sYXJrL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvb3B0aW1pemVseS9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL3BlcmZlY3QtYXVkaWVuY2UvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9waW5nZG9tL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvcGl3aWsvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9wcmVhY3QvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9xdWFsYXJvby9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL3F1YW50Y2FzdC9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL3JvbGxiYXIvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi9zYWFzcXVhdGNoL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvc2VudHJ5L2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvc25hcGVuZ2FnZS9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbnNAMS4zLjIvbGliL3NwaW5uYWtyL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvdGFwc3RyZWFtL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvdHJha2lvL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvdHdpdHRlci1hZHMvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi91c2Vydm9pY2UvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb25zQDEuMy4yL2xpYi92ZXJvL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvdmlzdWFsLXdlYnNpdGUtb3B0aW1pemVyL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvd2ViZW5nYWdlL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIvd29vcHJhL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tYW5hbHl0aWNzLmpzLWludGVncmF0aW9uc0AxLjMuMi9saWIveWFuZGV4LW1ldHJpY2EvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanNAMi40LjcvbGliL2FuYWx5dGljcy5qcyIsImNvbXBvbmVudHMvaWFuc3Rvcm10YXlsb3ItYmluZEAwLjAuMi9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qc0AyLjQuNy9saWIvY29va2llLmpzIiwiY29tcG9uZW50cy92aXNpb25tZWRpYS1kZWJ1Z0AwLjcuNC9pbmRleC5qcyIsImNvbXBvbmVudHMvdmlzaW9ubWVkaWEtZGVidWdAMC43LjQvbGliL2RlYnVnLmpzIiwiY29tcG9uZW50cy92aXNpb25tZWRpYS1kZWJ1Z0AwLjcuNC9kZWJ1Zy5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWpzb25AMS4wLjAvaW5kZXguanMiLCJjb21wb25lbnRzL2NvbXBvbmVudC1qc29uLWZhbGxiYWNrQDEuMC4wL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tdG9wLWRvbWFpbkAxLjAuMC9pbmRleC5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qc0AyLjQuNy9saWIvZ3JvdXAuanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanNAMi40LjcvbGliL2VudGl0eS5qcyIsImNvbXBvbmVudHMvc2VnbWVudGlvLWFuYWx5dGljcy5qc0AyLjQuNy9saWIvc3RvcmUuanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1zdG9yZS5qc0AyLjAuMC9zdG9yZS5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LWluaGVyaXRAMC4wLjIvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1pcy1tZXRhQDAuMC4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9jb21wb25lbnQtZXZlbnRAMC4xLjEvaW5kZXguanMiLCJjb21wb25lbnRzL3lpZWxkcy1wcmV2ZW50QDAuMC4yL2luZGV4LmpzIiwiY29tcG9uZW50cy9jb21wb25lbnQtcXVlcnlzdHJpbmdAMS4zLjAvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanNAMi40LjcvbGliL3VzZXIuanMiLCJjb21wb25lbnRzL2dqb2huc29uLXV1aWRAMC4wLjEvaW5kZXguanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanNAMi40LjcvbGliL3ZlcnNpb24uanMiLCJjb21wb25lbnRzL3NlZ21lbnRpby1hbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyQDEuNC4xL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tc3R1YkAwLjEuMC9pbmRleC5qcyIsImNvbXBvbmVudHMveWllbGRzLW1lcmdlQDEuMC4wL2luZGV4LmpzIiwiY29tcG9uZW50cy95aWVsZHMtZXFsQDAuMC4yL2luZGV4LmpzIiwiY29tcG9uZW50cy9tYXR0aGV3cC1rZXlzQDAuMC4zL2luZGV4LmpzIiwiY29tcG9uZW50cy9zZWdtZW50aW8tc3B5QDAuMy4wL2luZGV4LmpzIiwibGliL2Fkd29yZHMvdGVzdC5qcyIsImxpYi9hbGV4YS90ZXN0LmpzIiwibGliL2FtcGxpdHVkZS90ZXN0LmpzIiwibGliL2FwcGN1ZXMvdGVzdC5qcyIsImxpYi9hd2VzbS90ZXN0LmpzIiwibGliL2F3ZXNvbWF0aWMvdGVzdC5qcyIsImxpYi9iaW5nLWFkcy90ZXN0LmpzIiwibGliL2Jyb250by90ZXN0LmpzIiwibGliL2J1Z2hlcmQvdGVzdC5qcyIsImxpYi9idWdzbmFnL3Rlc3QuanMiLCJsaWIvY2hhcnRiZWF0L3Rlc3QuanMiLCJsaWIvY2h1cm5iZWUvdGVzdC5qcyIsImxpYi9jbGlja3RhbGUvdGVzdC5qcyIsImxpYi9jbGlja3kvdGVzdC5qcyIsImxpYi9jb21zY29yZS90ZXN0LmpzIiwibGliL2NyYXp5LWVnZy90ZXN0LmpzIiwibGliL2N1cmViaXQvdGVzdC5qcyIsImxpYi9jdXN0b21lcmlvL3Rlc3QuanMiLCJsaWIvZHJpcC90ZXN0LmpzIiwibGliL2Vycm9yY2VwdGlvbi90ZXN0LmpzIiwibGliL2V2ZXJnYWdlL3Rlc3QuanMiLCJsaWIvZmFjZWJvb2stY29udmVyc2lvbi10cmFja2luZy90ZXN0LmpzIiwibGliL2ZveG1ldHJpY3MvdGVzdC5qcyIsImxpYi9mcm9udGxlYWYvdGVzdC5qcyIsImxpYi9mdWxsc3RvcnkvdGVzdC5qcyIsImxpYi9nYXVnZXMvdGVzdC5qcyIsImxpYi9nZXQtc2F0aXNmYWN0aW9uL3Rlc3QuanMiLCJsaWIvZ29vZ2xlLWFuYWx5dGljcy90ZXN0LmpzIiwibGliL2dvb2dsZS10YWctbWFuYWdlci90ZXN0LmpzIiwibGliL2dvc3F1YXJlZC90ZXN0LmpzIiwibGliL2hlYXAvdGVzdC5qcyIsImxpYi9oZWxsb2Jhci90ZXN0LmpzIiwibGliL2hpdHRhaWwvdGVzdC5qcyIsImxpYi9odWJzcG90L3Rlc3QuanMiLCJsaWIvaW1wcm92ZWx5L3Rlc3QuanMiLCJsaWIvaW5zaWRldmF1bHQvdGVzdC5qcyIsImxpYi9pbnNwZWN0bGV0L3Rlc3QuanMiLCJsaWIvaW50ZXJjb20vdGVzdC5qcyIsImxpYi9rZWVuLWlvL3Rlc3QuanMiLCJsaWIva2Vuc2hvby90ZXN0LmpzIiwibGliL2tpc3NtZXRyaWNzL3Rlc3QuanMiLCJsaWIva2xhdml5by90ZXN0LmpzIiwibGliL2xlYWRsYW5kZXIvdGVzdC5qcyIsImxpYi9saXZlY2hhdC90ZXN0LmpzIiwibGliL2x1Y2t5LW9yYW5nZS90ZXN0LmpzIiwibGliL2x5dGljcy90ZXN0LmpzIiwibGliL21peHBhbmVsL3Rlc3QuanMiLCJsaWIvbW9qbi90ZXN0LmpzIiwibGliL21vdXNlZmxvdy90ZXN0LmpzIiwibGliL21vdXNlc3RhdHMvdGVzdC5qcyIsImxpYi9uYXZpbHl0aWNzL3Rlc3QuanMiLCJsaWIvb2xhcmsvdGVzdC5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LW9uY2VAMC4wLjEvaW5kZXguanMiLCJsaWIvb3B0aW1pemVseS90ZXN0LmpzIiwibGliL3BlcmZlY3QtYXVkaWVuY2UvdGVzdC5qcyIsImxpYi9waW5nZG9tL3Rlc3QuanMiLCJsaWIvcGl3aWsvdGVzdC5qcyIsImxpYi9wcmVhY3QvdGVzdC5qcyIsImxpYi9xdWFsYXJvby90ZXN0LmpzIiwibGliL3F1YW50Y2FzdC90ZXN0LmpzIiwibGliL3JvbGxiYXIvdGVzdC5qcyIsImxpYi9zYWFzcXVhdGNoL3Rlc3QuanMiLCJsaWIvc2VudHJ5L3Rlc3QuanMiLCJsaWIvc25hcGVuZ2FnZS90ZXN0LmpzIiwibGliL3NwaW5uYWtyL3Rlc3QuanMiLCJsaWIvdGFwc3RyZWFtL3Rlc3QuanMiLCJsaWIvdHJha2lvL3Rlc3QuanMiLCJsaWIvdHdpdHRlci1hZHMvdGVzdC5qcyIsImxpYi91c2Vydm9pY2UvdGVzdC5qcyIsImNvbXBvbmVudHMvY29tcG9uZW50LWpxdWVyeUAxLjAuMC9pbmRleC5qcyIsImxpYi92ZXJvL3Rlc3QuanMiLCJsaWIvdmlzdWFsLXdlYnNpdGUtb3B0aW1pemVyL3Rlc3QuanMiLCJsaWIvd2ViZW5nYWdlL3Rlc3QuanMiLCJsaWIvd29vcHJhL3Rlc3QuanMiLCJsaWIveWFuZGV4LW1ldHJpY2EvdGVzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbkpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdFhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy9GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy9GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcFRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy9IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeFBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNoU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDN0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzF6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDaEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDN0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNoT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN4RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy96QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN4RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDaEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy9MQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDN0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDN0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDem9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25KQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0JBO0FBQ0E7QUFDQTs7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNoZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM01BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDN0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN4TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN4TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3U0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNXdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25VQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2hYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNoVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDaEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDaEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDaEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOVZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwa1VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbE9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIG91dGVyKG1vZHVsZXMsIGNhY2hlLCBlbnRyaWVzKXtcblxuICAvKipcbiAgICogR2xvYmFsXG4gICAqL1xuXG4gIHZhciBnbG9iYWwgPSAoZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0pKCk7XG5cbiAgLyoqXG4gICAqIFJlcXVpcmUgYG5hbWVgLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGp1bXBlZFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiByZXF1aXJlKG5hbWUsIGp1bXBlZCl7XG4gICAgaWYgKGNhY2hlW25hbWVdKSByZXR1cm4gY2FjaGVbbmFtZV0uZXhwb3J0cztcbiAgICBpZiAobW9kdWxlc1tuYW1lXSkgcmV0dXJuIGNhbGwobmFtZSwgcmVxdWlyZSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgZmluZCBtb2R1bGUgXCInICsgbmFtZSArICdcIicpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgbW9kdWxlIGBpZGAgYW5kIGNhY2hlIGl0LlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICogQGFwaSBwcml2YXRlXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNhbGwoaWQsIHJlcXVpcmUpe1xuICAgIHZhciBtID0gY2FjaGVbaWRdID0geyBleHBvcnRzOiB7fSB9O1xuICAgIHZhciBtb2QgPSBtb2R1bGVzW2lkXTtcbiAgICB2YXIgbmFtZSA9IG1vZFsyXTtcbiAgICB2YXIgZm4gPSBtb2RbMF07XG5cbiAgICBmbi5jYWxsKG0uZXhwb3J0cywgZnVuY3Rpb24ocmVxKXtcbiAgICAgIHZhciBkZXAgPSBtb2R1bGVzW2lkXVsxXVtyZXFdO1xuICAgICAgcmV0dXJuIHJlcXVpcmUoZGVwID8gZGVwIDogcmVxKTtcbiAgICB9LCBtLCBtLmV4cG9ydHMsIG91dGVyLCBtb2R1bGVzLCBjYWNoZSwgZW50cmllcyk7XG5cbiAgICAvLyBleHBvc2UgYXMgYG5hbWVgLlxuICAgIGlmIChuYW1lKSBjYWNoZVtuYW1lXSA9IGNhY2hlW2lkXTtcblxuICAgIHJldHVybiBjYWNoZVtpZF0uZXhwb3J0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1aXJlIGFsbCBlbnRyaWVzIGV4cG9zaW5nIHRoZW0gb24gZ2xvYmFsIGlmIG5lZWRlZC5cbiAgICovXG5cbiAgZm9yICh2YXIgaWQgaW4gZW50cmllcykge1xuICAgIGlmIChlbnRyaWVzW2lkXSkge1xuICAgICAgZ2xvYmFsW2VudHJpZXNbaWRdXSA9IHJlcXVpcmUoaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXF1aXJlKGlkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRHVvIGZsYWcuXG4gICAqL1xuXG4gIHJlcXVpcmUuZHVvID0gdHJ1ZTtcblxuICAvKipcbiAgICogRXhwb3NlIGNhY2hlLlxuICAgKi9cblxuICByZXF1aXJlLmNhY2hlID0gY2FjaGU7XG5cbiAgLyoqXG4gICAqIEV4cG9zZSBtb2R1bGVzXG4gICAqL1xuXG4gIHJlcXVpcmUubW9kdWxlcyA9IG1vZHVsZXM7XG5cbiAgLyoqXG4gICAqIFJldHVybiBuZXdlc3QgcmVxdWlyZS5cbiAgICovXG5cbiAgIHJldHVybiByZXF1aXJlO1xufSkiLCJcbnZhciBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKTtcbnZhciBJbnRlZ3JhdGlvbnMgPSByZXF1aXJlKCcuLi9pbmRleC5qcycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcbnZhciBvYmplY3QgPSByZXF1aXJlKCdvYmplY3QnKTtcblxuLyoqXG4gKiBJbml0aWFsaXplIG1vY2hhLlxuICovXG5cbmlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2Ygd2luZG93KSB7XG4gIG1vY2hhLnNldHVwKHtcbiAgICB1aTogJ2JkZCcsXG4gICAgaWdub3JlTGVha3M6IHRydWUsXG4gICAgc2xvdzogMzAwLFxuICAgIHRpbWVvdXQ6IDEwMDAwXG4gIH0pO1xufVxuXG4vKipcbiAqIEFzc2VydCB3ZSBoYXZlIHRoZSByaWdodCBudW1iZXIgb2YgaW50ZWdyYXRpb25zLlxuICovXG5cbmRlc2NyaWJlKCdpbnRlZ3JhdGlvbnMnLCBmdW5jdGlvbigpe1xuICBpdCgnc2hvdWxkIGV4cG9ydCBvdXIgaW50ZWdyYXRpb25zJywgZnVuY3Rpb24oKXtcbiAgICBhc3NlcnQuZXF1YWwoNzQsIG9iamVjdC5sZW5ndGgoSW50ZWdyYXRpb25zKSk7XG4gIH0pO1xufSk7XG5cbi8qKlxuICogTG9hZCBpbnRlZ3JhdGlvbiB0ZXN0cy5cbiAqL1xuXG5yZXF1aXJlKCcuL3Rlc3RzJyk7XG5cbi8qKlxuICogUnVuIHRlc3RzLlxuICovXG5cbmlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2Ygd2luZG93KSB7XG4gIGlmICh3aW5kb3cubW9jaGFQaGFudG9tSlMpIHtcbiAgICBtb2NoYVBoYW50b21KUy5ydW4oKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAod2luZG93LnNhdWNlbGFicykge1xuICAgICAgc2F1Y2VsYWJzKG1vY2hhLnJ1bigpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbW9jaGEucnVuKCk7XG4gICAgfVxuICB9XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgZXF1YWxzID0gcmVxdWlyZSgnZXF1YWxzJyk7XG52YXIgZm10ID0gcmVxdWlyZSgnZm10Jyk7XG52YXIgc3RhY2sgPSByZXF1aXJlKCdzdGFjaycpO1xuXG4vKipcbiAqIEFzc2VydCBgZXhwcmAgd2l0aCBvcHRpb25hbCBmYWlsdXJlIGBtc2dgLlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IGV4cHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBbbXNnXVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBmdW5jdGlvbiAoZXhwciwgbXNnKSB7XG4gIGlmIChleHByKSByZXR1cm47XG4gIHRocm93IGVycm9yKG1zZyB8fCBtZXNzYWdlKCkpO1xufTtcblxuLyoqXG4gKiBBc3NlcnQgYGFjdHVhbGAgaXMgd2VhayBlcXVhbCB0byBgZXhwZWN0ZWRgLlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbbXNnXVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmVxdWFsID0gZnVuY3Rpb24gKGFjdHVhbCwgZXhwZWN0ZWQsIG1zZykge1xuICBpZiAoYWN0dWFsID09IGV4cGVjdGVkKSByZXR1cm47XG4gIHRocm93IGVycm9yKG1zZyB8fCBmbXQoJ0V4cGVjdGVkICVvIHRvIGVxdWFsICVvLicsIGFjdHVhbCwgZXhwZWN0ZWQpLCBhY3R1YWwsIGV4cGVjdGVkKTtcbn07XG5cbi8qKlxuICogQXNzZXJ0IGBhY3R1YWxgIGlzIG5vdCB3ZWFrIGVxdWFsIHRvIGBleHBlY3RlZGAuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG4gKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuICogQHBhcmFtIHtTdHJpbmd9IFttc2ddXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMubm90RXF1YWwgPSBmdW5jdGlvbiAoYWN0dWFsLCBleHBlY3RlZCwgbXNnKSB7XG4gIGlmIChhY3R1YWwgIT0gZXhwZWN0ZWQpIHJldHVybjtcbiAgdGhyb3cgZXJyb3IobXNnIHx8IGZtdCgnRXhwZWN0ZWQgJW8gbm90IHRvIGVxdWFsICVvLicsIGFjdHVhbCwgZXhwZWN0ZWQpKTtcbn07XG5cbi8qKlxuICogQXNzZXJ0IGBhY3R1YWxgIGlzIGRlZXAgZXF1YWwgdG8gYGV4cGVjdGVkYC5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcbiAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG4gKiBAcGFyYW0ge1N0cmluZ30gW21zZ11cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5kZWVwRXF1YWwgPSBmdW5jdGlvbiAoYWN0dWFsLCBleHBlY3RlZCwgbXNnKSB7XG4gIGlmIChlcXVhbHMoYWN0dWFsLCBleHBlY3RlZCkpIHJldHVybjtcbiAgdGhyb3cgZXJyb3IobXNnIHx8IGZtdCgnRXhwZWN0ZWQgJW8gdG8gZGVlcGx5IGVxdWFsICVvLicsIGFjdHVhbCwgZXhwZWN0ZWQpLCBhY3R1YWwsIGV4cGVjdGVkKTtcbn07XG5cbi8qKlxuICogQXNzZXJ0IGBhY3R1YWxgIGlzIG5vdCBkZWVwIGVxdWFsIHRvIGBleHBlY3RlZGAuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG4gKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuICogQHBhcmFtIHtTdHJpbmd9IFttc2ddXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMubm90RGVlcEVxdWFsID0gZnVuY3Rpb24gKGFjdHVhbCwgZXhwZWN0ZWQsIG1zZykge1xuICBpZiAoIWVxdWFscyhhY3R1YWwsIGV4cGVjdGVkKSkgcmV0dXJuO1xuICB0aHJvdyBlcnJvcihtc2cgfHwgZm10KCdFeHBlY3RlZCAlbyBub3QgdG8gZGVlcGx5IGVxdWFsICVvLicsIGFjdHVhbCwgZXhwZWN0ZWQpKTtcbn07XG5cbi8qKlxuICogQXNzZXJ0IGBhY3R1YWxgIGlzIHN0cmljdCBlcXVhbCB0byBgZXhwZWN0ZWRgLlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbbXNnXVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnN0cmljdEVxdWFsID0gZnVuY3Rpb24gKGFjdHVhbCwgZXhwZWN0ZWQsIG1zZykge1xuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkgcmV0dXJuO1xuICB0aHJvdyBlcnJvcihtc2cgfHwgZm10KCdFeHBlY3RlZCAlbyB0byBzdHJpY3RseSBlcXVhbCAlby4nLCBhY3R1YWwsIGV4cGVjdGVkKSwgYWN0dWFsLCBleHBlY3RlZCk7XG59O1xuXG4vKipcbiAqIEFzc2VydCBgYWN0dWFsYCBpcyBub3Qgc3RyaWN0IGVxdWFsIHRvIGBleHBlY3RlZGAuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG4gKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuICogQHBhcmFtIHtTdHJpbmd9IFttc2ddXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMubm90U3RyaWN0RXF1YWwgPSBmdW5jdGlvbiAoYWN0dWFsLCBleHBlY3RlZCwgbXNnKSB7XG4gIGlmIChhY3R1YWwgIT09IGV4cGVjdGVkKSByZXR1cm47XG4gIHRocm93IGVycm9yKG1zZyB8fCBmbXQoJ0V4cGVjdGVkICVvIG5vdCB0byBzdHJpY3RseSBlcXVhbCAlby4nLCBhY3R1YWwsIGV4cGVjdGVkKSk7XG59O1xuXG4vKipcbiAqIEFzc2VydCBgYmxvY2tgIHRocm93cyBhbiBgZXJyb3JgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGJsb2NrXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZXJyb3JdXG4gKiBAcGFyYW0ge1N0cmluZ30gW21zZ11cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy50aHJvd3MgPSBmdW5jdGlvbiAoYmxvY2ssIGVyciwgbXNnKSB7XG4gIHZhciB0aHJldztcbiAgdHJ5IHtcbiAgICBibG9jaygpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyZXcgPSBlO1xuICB9XG5cbiAgaWYgKCF0aHJldykgdGhyb3cgZXJyb3IobXNnIHx8IGZtdCgnRXhwZWN0ZWQgJXMgdG8gdGhyb3cgYW4gZXJyb3IuJywgYmxvY2sudG9TdHJpbmcoKSkpO1xuICBpZiAoZXJyICYmICEodGhyZXcgaW5zdGFuY2VvZiBlcnIpKSB7XG4gICAgdGhyb3cgZXJyb3IobXNnIHx8IGZtdCgnRXhwZWN0ZWQgJXMgdG8gdGhyb3cgYW4gJW8uJywgYmxvY2sudG9TdHJpbmcoKSwgZXJyKSk7XG4gIH1cbn07XG5cbi8qKlxuICogQXNzZXJ0IGBibG9ja2AgZG9lc24ndCB0aHJvdyBhbiBgZXJyb3JgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGJsb2NrXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZXJyb3JdXG4gKiBAcGFyYW0ge1N0cmluZ30gW21zZ11cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5kb2VzTm90VGhyb3cgPSBmdW5jdGlvbiAoYmxvY2ssIGVyciwgbXNnKSB7XG4gIHZhciB0aHJldztcbiAgdHJ5IHtcbiAgICBibG9jaygpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyZXcgPSBlO1xuICB9XG5cbiAgaWYgKHRocmV3KSB0aHJvdyBlcnJvcihtc2cgfHwgZm10KCdFeHBlY3RlZCAlcyBub3QgdG8gdGhyb3cgYW4gZXJyb3IuJywgYmxvY2sudG9TdHJpbmcoKSkpO1xuICBpZiAoZXJyICYmICh0aHJldyBpbnN0YW5jZW9mIGVycikpIHtcbiAgICB0aHJvdyBlcnJvcihtc2cgfHwgZm10KCdFeHBlY3RlZCAlcyBub3QgdG8gdGhyb3cgYW4gJW8uJywgYmxvY2sudG9TdHJpbmcoKSwgZXJyKSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgbWVzc2FnZSBmcm9tIHRoZSBjYWxsIHN0YWNrLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIG1lc3NhZ2UoKSB7XG4gIGlmICghRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHJldHVybiAnYXNzZXJ0aW9uIGZhaWxlZCc7XG4gIHZhciBjYWxsc2l0ZSA9IHN0YWNrKClbMl07XG4gIHZhciBmbiA9IGNhbGxzaXRlLmdldEZ1bmN0aW9uTmFtZSgpO1xuICB2YXIgZmlsZSA9IGNhbGxzaXRlLmdldEZpbGVOYW1lKCk7XG4gIHZhciBsaW5lID0gY2FsbHNpdGUuZ2V0TGluZU51bWJlcigpIC0gMTtcbiAgdmFyIGNvbCA9IGNhbGxzaXRlLmdldENvbHVtbk51bWJlcigpIC0gMTtcbiAgdmFyIHNyYyA9IGdldChmaWxlKTtcbiAgbGluZSA9IHNyYy5zcGxpdCgnXFxuJylbbGluZV0uc2xpY2UoY29sKTtcbiAgdmFyIG0gPSBsaW5lLm1hdGNoKC9hc3NlcnRcXCgoLiopXFwpLyk7XG4gIHJldHVybiBtICYmIG1bMV0udHJpbSgpO1xufVxuXG4vKipcbiAqIExvYWQgY29udGVudHMgb2YgYHNjcmlwdGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNjcmlwdFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZ2V0KHNjcmlwdCkge1xuICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0O1xuICB4aHIub3BlbignR0VUJywgc2NyaXB0LCBmYWxzZSk7XG4gIHhoci5zZW5kKG51bGwpO1xuICByZXR1cm4geGhyLnJlc3BvbnNlVGV4dDtcbn1cblxuLyoqXG4gKiBFcnJvciB3aXRoIGBtc2dgLCBgYWN0dWFsYCBhbmQgYGV4cGVjdGVkYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbXNnXG4gKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcbiAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG4gKiBAcmV0dXJuIHtFcnJvcn1cbiAqL1xuXG5mdW5jdGlvbiBlcnJvcihtc2csIGFjdHVhbCwgZXhwZWN0ZWQpe1xuICB2YXIgZXJyID0gbmV3IEVycm9yKG1zZyk7XG4gIGVyci5zaG93RGlmZiA9IDMgPT0gYXJndW1lbnRzLmxlbmd0aDtcbiAgZXJyLmFjdHVhbCA9IGFjdHVhbDtcbiAgZXJyLmV4cGVjdGVkID0gZXhwZWN0ZWQ7XG4gIHJldHVybiBlcnI7XG59XG4iLCJcbnZhciB0eXBlID0gcmVxdWlyZSgndHlwZScpXG5cbi8vIChhbnksIGFueSwgW2FycmF5XSkgLT4gYm9vbGVhblxuZnVuY3Rpb24gZXF1YWxzKGEsIGIsIG1lbW9zKXtcbiAgLy8gQWxsIGlkZW50aWNhbCB2YWx1ZXMgYXJlIGVxdWl2YWxlbnRcbiAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlXG4gIHZhciBmbkEgPSB0eXBlc1t0eXBlKGEpXVxuICB2YXIgZm5CID0gdHlwZXNbdHlwZShiKV1cbiAgcmV0dXJuIGZuQSAmJiBmbkEgPT09IGZuQlxuICAgID8gZm5BKGEsIGIsIG1lbW9zKVxuICAgIDogZmFsc2Vcbn1cblxudmFyIHR5cGVzID0ge31cblxuLy8gKE51bWJlcikgLT4gYm9vbGVhblxudHlwZXMubnVtYmVyID0gZnVuY3Rpb24oYSl7XG4gIC8vIE5hTiBjaGVja1xuICByZXR1cm4gYSAhPT0gYVxufVxuXG4vLyAoZnVuY3Rpb24sIGZ1bmN0aW9uLCBhcnJheSkgLT4gYm9vbGVhblxudHlwZXNbJ2Z1bmN0aW9uJ10gPSBmdW5jdGlvbihhLCBiLCBtZW1vcyl7XG4gIHJldHVybiBhLnRvU3RyaW5nKCkgPT09IGIudG9TdHJpbmcoKVxuICAgIC8vIEZ1bmN0aW9ucyBjYW4gYWN0IGFzIG9iamVjdHNcbiAgICAmJiB0eXBlcy5vYmplY3QoYSwgYiwgbWVtb3MpXG4gICAgJiYgZXF1YWxzKGEucHJvdG90eXBlLCBiLnByb3RvdHlwZSlcbn1cblxuLy8gKGRhdGUsIGRhdGUpIC0+IGJvb2xlYW5cbnR5cGVzLmRhdGUgPSBmdW5jdGlvbihhLCBiKXtcbiAgcmV0dXJuICthID09PSArYlxufVxuXG4vLyAocmVnZXhwLCByZWdleHApIC0+IGJvb2xlYW5cbnR5cGVzLnJlZ2V4cCA9IGZ1bmN0aW9uKGEsIGIpe1xuICByZXR1cm4gYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKClcbn1cblxuLy8gKERPTUVsZW1lbnQsIERPTUVsZW1lbnQpIC0+IGJvb2xlYW5cbnR5cGVzLmVsZW1lbnQgPSBmdW5jdGlvbihhLCBiKXtcbiAgcmV0dXJuIGEub3V0ZXJIVE1MID09PSBiLm91dGVySFRNTFxufVxuXG4vLyAodGV4dG5vZGUsIHRleHRub2RlKSAtPiBib29sZWFuXG50eXBlcy50ZXh0bm9kZSA9IGZ1bmN0aW9uKGEsIGIpe1xuICByZXR1cm4gYS50ZXh0Q29udGVudCA9PT0gYi50ZXh0Q29udGVudFxufVxuXG4vLyBkZWNvcmF0ZSBgZm5gIHRvIHByZXZlbnQgaXQgcmUtY2hlY2tpbmcgb2JqZWN0c1xuLy8gKGZ1bmN0aW9uKSAtPiBmdW5jdGlvblxuZnVuY3Rpb24gbWVtb0dhdXJkKGZuKXtcbiAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIG1lbW9zKXtcbiAgICBpZiAoIW1lbW9zKSByZXR1cm4gZm4oYSwgYiwgW10pXG4gICAgdmFyIGkgPSBtZW1vcy5sZW5ndGgsIG1lbW9cbiAgICB3aGlsZSAobWVtbyA9IG1lbW9zWy0taV0pIHtcbiAgICAgIGlmIChtZW1vWzBdID09PSBhICYmIG1lbW9bMV0gPT09IGIpIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmbihhLCBiLCBtZW1vcylcbiAgfVxufVxuXG50eXBlc1snYXJndW1lbnRzJ10gPVxudHlwZXMuYXJyYXkgPSBtZW1vR2F1cmQoY29tcGFyZUFycmF5cylcblxuLy8gKGFycmF5LCBhcnJheSwgYXJyYXkpIC0+IGJvb2xlYW5cbmZ1bmN0aW9uIGNvbXBhcmVBcnJheXMoYSwgYiwgbWVtb3Mpe1xuICB2YXIgaSA9IGEubGVuZ3RoXG4gIGlmIChpICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlXG4gIG1lbW9zLnB1c2goW2EsIGJdKVxuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKCFlcXVhbHMoYVtpXSwgYltpXSwgbWVtb3MpKSByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG50eXBlcy5vYmplY3QgPSBtZW1vR2F1cmQoY29tcGFyZU9iamVjdHMpXG5cbi8vIChvYmplY3QsIG9iamVjdCwgYXJyYXkpIC0+IGJvb2xlYW5cbmZ1bmN0aW9uIGNvbXBhcmVPYmplY3RzKGEsIGIsIG1lbW9zKSB7XG4gIHZhciBrYSA9IGdldEVudW1lcmFibGVQcm9wZXJ0aWVzKGEpXG4gIHZhciBrYiA9IGdldEVudW1lcmFibGVQcm9wZXJ0aWVzKGIpXG4gIHZhciBpID0ga2EubGVuZ3RoXG5cbiAgLy8gc2FtZSBudW1iZXIgb2YgcHJvcGVydGllc1xuICBpZiAoaSAhPT0ga2IubGVuZ3RoKSByZXR1cm4gZmFsc2VcblxuICAvLyBhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXJcbiAga2Euc29ydCgpXG4gIGtiLnNvcnQoKVxuXG4gIC8vIGNoZWFwIGtleSB0ZXN0XG4gIHdoaWxlIChpLS0pIGlmIChrYVtpXSAhPT0ga2JbaV0pIHJldHVybiBmYWxzZVxuXG4gIC8vIHJlbWVtYmVyXG4gIG1lbW9zLnB1c2goW2EsIGJdKVxuXG4gIC8vIGl0ZXJhdGUgYWdhaW4gdGhpcyB0aW1lIGRvaW5nIGEgdGhvcm91Z2ggY2hlY2tcbiAgaSA9IGthLmxlbmd0aFxuICB3aGlsZSAoaS0tKSB7XG4gICAgdmFyIGtleSA9IGthW2ldXG4gICAgaWYgKCFlcXVhbHMoYVtrZXldLCBiW2tleV0sIG1lbW9zKSkgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG4vLyAob2JqZWN0KSAtPiBhcnJheVxuZnVuY3Rpb24gZ2V0RW51bWVyYWJsZVByb3BlcnRpZXMgKG9iamVjdCkge1xuICB2YXIgcmVzdWx0ID0gW11cbiAgZm9yICh2YXIgayBpbiBvYmplY3QpIGlmIChrICE9PSAnY29uc3RydWN0b3InKSB7XG4gICAgcmVzdWx0LnB1c2goaylcbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG5cbi8qKlxuICogYXNzZXJ0IGFsbCB2YWx1ZXMgYXJlIGVxdWFsXG4gKlxuICogQHBhcmFtIHtBbnl9IFsuLi5dXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGFsbEVxdWFsKCl7XG4gIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCAtIDFcbiAgd2hpbGUgKGkgPiAwKSB7XG4gICAgaWYgKCFlcXVhbHMoYXJndW1lbnRzW2ldLCBhcmd1bWVudHNbLS1pXSkpIHJldHVybiBmYWxzZVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbi8qKlxuICogZXhwb3NlIGVxdWFsc1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gYWxsRXF1YWxcbmFsbEVxdWFsLmNvbXBhcmUgPSBlcXVhbHNcbiIsIlxudmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmdcbnZhciBEb21Ob2RlID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJ1xuICA/IHdpbmRvdy5Ob2RlXG4gIDogRnVuY3Rpb25cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHR5cGUgb2YgYHZhbGAuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gdmFsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGZ1bmN0aW9uKHgpe1xuICB2YXIgdHlwZSA9IHR5cGVvZiB4XG4gIGlmICh0eXBlICE9ICdvYmplY3QnKSByZXR1cm4gdHlwZVxuICB0eXBlID0gdHlwZXNbdG9TdHJpbmcuY2FsbCh4KV1cbiAgaWYgKHR5cGUpIHJldHVybiB0eXBlXG4gIGlmICh4IGluc3RhbmNlb2YgRG9tTm9kZSkgc3dpdGNoICh4Lm5vZGVUeXBlKSB7XG4gICAgY2FzZSAxOiAgcmV0dXJuICdlbGVtZW50J1xuICAgIGNhc2UgMzogIHJldHVybiAndGV4dC1ub2RlJ1xuICAgIGNhc2UgOTogIHJldHVybiAnZG9jdW1lbnQnXG4gICAgY2FzZSAxMTogcmV0dXJuICdkb2N1bWVudC1mcmFnbWVudCdcbiAgICBkZWZhdWx0OiByZXR1cm4gJ2RvbS1ub2RlJ1xuICB9XG59XG5cbnZhciB0eXBlcyA9IGV4cG9ydHMudHlwZXMgPSB7XG4gICdbb2JqZWN0IEZ1bmN0aW9uXSc6ICdmdW5jdGlvbicsXG4gICdbb2JqZWN0IERhdGVdJzogJ2RhdGUnLFxuICAnW29iamVjdCBSZWdFeHBdJzogJ3JlZ2V4cCcsXG4gICdbb2JqZWN0IEFyZ3VtZW50c10nOiAnYXJndW1lbnRzJyxcbiAgJ1tvYmplY3QgQXJyYXldJzogJ2FycmF5JyxcbiAgJ1tvYmplY3QgU3RyaW5nXSc6ICdzdHJpbmcnLFxuICAnW29iamVjdCBOdWxsXSc6ICdudWxsJyxcbiAgJ1tvYmplY3QgVW5kZWZpbmVkXSc6ICd1bmRlZmluZWQnLFxuICAnW29iamVjdCBOdW1iZXJdJzogJ251bWJlcicsXG4gICdbb2JqZWN0IEJvb2xlYW5dJzogJ2Jvb2xlYW4nLFxuICAnW29iamVjdCBPYmplY3RdJzogJ29iamVjdCcsXG4gICdbb2JqZWN0IFRleHRdJzogJ3RleHQtbm9kZScsXG4gICdbb2JqZWN0IFVpbnQ4QXJyYXldJzogJ2JpdC1hcnJheScsXG4gICdbb2JqZWN0IFVpbnQxNkFycmF5XSc6ICdiaXQtYXJyYXknLFxuICAnW29iamVjdCBVaW50MzJBcnJheV0nOiAnYml0LWFycmF5JyxcbiAgJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJzogJ2JpdC1hcnJheScsXG4gICdbb2JqZWN0IEVycm9yXSc6ICdlcnJvcicsXG4gICdbb2JqZWN0IEZvcm1EYXRhXSc6ICdmb3JtLWRhdGEnLFxuICAnW29iamVjdCBGaWxlXSc6ICdmaWxlJyxcbiAgJ1tvYmplY3QgQmxvYl0nOiAnYmxvYidcbn1cbiIsIlxuLyoqXG4gKiBFeHBvcnQgYGZtdGBcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZtdDtcblxuLyoqXG4gKiBGb3JtYXR0ZXJzXG4gKi9cblxuZm10Lm8gPSBKU09OLnN0cmluZ2lmeTtcbmZtdC5zID0gU3RyaW5nO1xuZm10LmQgPSBwYXJzZUludDtcblxuLyoqXG4gKiBGb3JtYXQgdGhlIGdpdmVuIGBzdHJgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7Li4ufSBhcmdzXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGZtdChzdHIpe1xuICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgdmFyIGogPSAwO1xuXG4gIHJldHVybiBzdHIucmVwbGFjZSgvJShbYS16XSkvZ2ksIGZ1bmN0aW9uKF8sIGYpe1xuICAgIHJldHVybiBmbXRbZl1cbiAgICAgID8gZm10W2ZdKGFyZ3NbaisrXSlcbiAgICAgIDogXyArIGY7XG4gIH0pO1xufVxuIiwiXG4vKipcbiAqIEV4cG9zZSBgc3RhY2soKWAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFjaztcblxuLyoqXG4gKiBSZXR1cm4gdGhlIHN0YWNrLlxuICpcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBzdGFjaygpIHtcbiAgdmFyIG9yaWcgPSBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZTtcbiAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBmdW5jdGlvbihfLCBzdGFjayl7IHJldHVybiBzdGFjazsgfTtcbiAgdmFyIGVyciA9IG5ldyBFcnJvcjtcbiAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZXJyLCBhcmd1bWVudHMuY2FsbGVlKTtcbiAgdmFyIHN0YWNrID0gZXJyLnN0YWNrO1xuICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IG9yaWc7XG4gIHJldHVybiBzdGFjaztcbn0iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcbnZhciBwbHVnaW5zID0gcmVxdWlyZSgnLi9pbnRlZ3JhdGlvbnMuanMnKTtcblxuLyoqXG4gKiBFeHBvc2UgdGhlIGludGVncmF0aW9ucywgdXNpbmcgdGhlaXIgb3duIGBuYW1lYCBmcm9tIHRoZWlyIGBwcm90b3R5cGVgLlxuICovXG5cbmVhY2gocGx1Z2lucywgZnVuY3Rpb24ocGx1Z2luKXtcbiAgdmFyIG5hbWUgPSAocGx1Z2luLkludGVncmF0aW9uIHx8IHBsdWdpbikucHJvdG90eXBlLm5hbWU7XG4gIGV4cG9ydHNbbmFtZV0gPSBwbHVnaW47XG59KTtcblxuXG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgdHlwZSA9IHJlcXVpcmUoJ3R5cGUnKTtcblxuLyoqXG4gKiBIT1AgcmVmZXJlbmNlLlxuICovXG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEl0ZXJhdGUgdGhlIGdpdmVuIGBvYmpgIGFuZCBpbnZva2UgYGZuKHZhbCwgaSlgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fE9iamVjdH0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaiwgZm4pe1xuICBzd2l0Y2ggKHR5cGUob2JqKSkge1xuICAgIGNhc2UgJ2FycmF5JzpcbiAgICAgIHJldHVybiBhcnJheShvYmosIGZuKTtcbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAgaWYgKCdudW1iZXInID09IHR5cGVvZiBvYmoubGVuZ3RoKSByZXR1cm4gYXJyYXkob2JqLCBmbik7XG4gICAgICByZXR1cm4gb2JqZWN0KG9iaiwgZm4pO1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gc3RyaW5nKG9iaiwgZm4pO1xuICB9XG59O1xuXG4vKipcbiAqIEl0ZXJhdGUgc3RyaW5nIGNoYXJzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBvYmpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBzdHJpbmcob2JqLCBmbikge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7ICsraSkge1xuICAgIGZuKG9iai5jaGFyQXQoaSksIGkpO1xuICB9XG59XG5cbi8qKlxuICogSXRlcmF0ZSBvYmplY3Qga2V5cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gb2JqZWN0KG9iaiwgZm4pIHtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChoYXMuY2FsbChvYmosIGtleSkpIHtcbiAgICAgIGZuKGtleSwgb2JqW2tleV0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEl0ZXJhdGUgYXJyYXktaXNoLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBhcnJheShvYmosIGZuKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgKytpKSB7XG4gICAgZm4ob2JqW2ldLCBpKTtcbiAgfVxufSIsIlxuLyoqXG4gKiB0b1N0cmluZyByZWYuXG4gKi9cblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBSZXR1cm4gdGhlIHR5cGUgb2YgYHZhbGAuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gdmFsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odmFsKXtcbiAgc3dpdGNoICh0b1N0cmluZy5jYWxsKHZhbCkpIHtcbiAgICBjYXNlICdbb2JqZWN0IEZ1bmN0aW9uXSc6IHJldHVybiAnZnVuY3Rpb24nO1xuICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOiByZXR1cm4gJ2RhdGUnO1xuICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6IHJldHVybiAncmVnZXhwJztcbiAgICBjYXNlICdbb2JqZWN0IEFyZ3VtZW50c10nOiByZXR1cm4gJ2FyZ3VtZW50cyc7XG4gICAgY2FzZSAnW29iamVjdCBBcnJheV0nOiByZXR1cm4gJ2FycmF5JztcbiAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOiByZXR1cm4gJ3N0cmluZyc7XG4gIH1cblxuICBpZiAodmFsID09PSBudWxsKSByZXR1cm4gJ251bGwnO1xuICBpZiAodmFsID09PSB1bmRlZmluZWQpIHJldHVybiAndW5kZWZpbmVkJztcbiAgaWYgKHZhbCAmJiB2YWwubm9kZVR5cGUgPT09IDEpIHJldHVybiAnZWxlbWVudCc7XG4gIGlmICh2YWwgPT09IE9iamVjdCh2YWwpKSByZXR1cm4gJ29iamVjdCc7XG5cbiAgcmV0dXJuIHR5cGVvZiB2YWw7XG59O1xuIiwiXG4vKipcbiAqIERPTidUIEVESVQgVEhJUyBGSUxFLiBJdCdzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gW1xuICByZXF1aXJlKCcuL2xpYi9hZHJvbGwnKSxcbiAgcmVxdWlyZSgnLi9saWIvYWR3b3JkcycpLFxuICByZXF1aXJlKCcuL2xpYi9hbGV4YScpLFxuICByZXF1aXJlKCcuL2xpYi9hbXBsaXR1ZGUnKSxcbiAgcmVxdWlyZSgnLi9saWIvYXBwY3VlcycpLFxuICByZXF1aXJlKCcuL2xpYi9hd2VzbScpLFxuICByZXF1aXJlKCcuL2xpYi9hd2Vzb21hdGljJyksXG4gIHJlcXVpcmUoJy4vbGliL2JpbmctYWRzJyksXG4gIHJlcXVpcmUoJy4vbGliL2Jyb250bycpLFxuICByZXF1aXJlKCcuL2xpYi9idWdoZXJkJyksXG4gIHJlcXVpcmUoJy4vbGliL2J1Z3NuYWcnKSxcbiAgcmVxdWlyZSgnLi9saWIvY2hhcnRiZWF0JyksXG4gIHJlcXVpcmUoJy4vbGliL2NodXJuYmVlJyksXG4gIHJlcXVpcmUoJy4vbGliL2NsaWNrdGFsZScpLFxuICByZXF1aXJlKCcuL2xpYi9jbGlja3knKSxcbiAgcmVxdWlyZSgnLi9saWIvY29tc2NvcmUnKSxcbiAgcmVxdWlyZSgnLi9saWIvY3JhenktZWdnJyksXG4gIHJlcXVpcmUoJy4vbGliL2N1cmViaXQnKSxcbiAgcmVxdWlyZSgnLi9saWIvY3VzdG9tZXJpbycpLFxuICByZXF1aXJlKCcuL2xpYi9kcmlwJyksXG4gIHJlcXVpcmUoJy4vbGliL2Vycm9yY2VwdGlvbicpLFxuICByZXF1aXJlKCcuL2xpYi9ldmVyZ2FnZScpLFxuICByZXF1aXJlKCcuL2xpYi9mYWNlYm9vay1jb252ZXJzaW9uLXRyYWNraW5nJyksXG4gIHJlcXVpcmUoJy4vbGliL2ZveG1ldHJpY3MnKSxcbiAgcmVxdWlyZSgnLi9saWIvZnJvbnRsZWFmJyksXG4gIHJlcXVpcmUoJy4vbGliL2Z1bGxzdG9yeScpLFxuICByZXF1aXJlKCcuL2xpYi9nYXVnZXMnKSxcbiAgcmVxdWlyZSgnLi9saWIvZ2V0LXNhdGlzZmFjdGlvbicpLFxuICByZXF1aXJlKCcuL2xpYi9nb29nbGUtYW5hbHl0aWNzJyksXG4gIHJlcXVpcmUoJy4vbGliL2dvb2dsZS10YWctbWFuYWdlcicpLFxuICByZXF1aXJlKCcuL2xpYi9nb3NxdWFyZWQnKSxcbiAgcmVxdWlyZSgnLi9saWIvaGVhcCcpLFxuICByZXF1aXJlKCcuL2xpYi9oZWxsb2JhcicpLFxuICByZXF1aXJlKCcuL2xpYi9oaXR0YWlsJyksXG4gIHJlcXVpcmUoJy4vbGliL2h1YnNwb3QnKSxcbiAgcmVxdWlyZSgnLi9saWIvaW1wcm92ZWx5JyksXG4gIHJlcXVpcmUoJy4vbGliL2luc2lkZXZhdWx0JyksXG4gIHJlcXVpcmUoJy4vbGliL2luc3BlY3RsZXQnKSxcbiAgcmVxdWlyZSgnLi9saWIvaW50ZXJjb20nKSxcbiAgcmVxdWlyZSgnLi9saWIva2Vlbi1pbycpLFxuICByZXF1aXJlKCcuL2xpYi9rZW5zaG9vJyksXG4gIHJlcXVpcmUoJy4vbGliL2tpc3NtZXRyaWNzJyksXG4gIHJlcXVpcmUoJy4vbGliL2tsYXZpeW8nKSxcbiAgcmVxdWlyZSgnLi9saWIvbGVhZGxhbmRlcicpLFxuICByZXF1aXJlKCcuL2xpYi9saXZlY2hhdCcpLFxuICByZXF1aXJlKCcuL2xpYi9sdWNreS1vcmFuZ2UnKSxcbiAgcmVxdWlyZSgnLi9saWIvbHl0aWNzJyksXG4gIHJlcXVpcmUoJy4vbGliL21peHBhbmVsJyksXG4gIHJlcXVpcmUoJy4vbGliL21vam4nKSxcbiAgcmVxdWlyZSgnLi9saWIvbW91c2VmbG93JyksXG4gIHJlcXVpcmUoJy4vbGliL21vdXNlc3RhdHMnKSxcbiAgcmVxdWlyZSgnLi9saWIvbmF2aWx5dGljcycpLFxuICByZXF1aXJlKCcuL2xpYi9vbGFyaycpLFxuICByZXF1aXJlKCcuL2xpYi9vcHRpbWl6ZWx5JyksXG4gIHJlcXVpcmUoJy4vbGliL3BlcmZlY3QtYXVkaWVuY2UnKSxcbiAgcmVxdWlyZSgnLi9saWIvcGluZ2RvbScpLFxuICByZXF1aXJlKCcuL2xpYi9waXdpaycpLFxuICByZXF1aXJlKCcuL2xpYi9wcmVhY3QnKSxcbiAgcmVxdWlyZSgnLi9saWIvcHVibGV0LWludGVncmF0aW9uJyksXG4gIHJlcXVpcmUoJy4vbGliL3F1YWxhcm9vJyksXG4gIHJlcXVpcmUoJy4vbGliL3F1YW50Y2FzdCcpLFxuICByZXF1aXJlKCcuL2xpYi9yb2xsYmFyJyksXG4gIHJlcXVpcmUoJy4vbGliL3NhYXNxdWF0Y2gnKSxcbiAgcmVxdWlyZSgnLi9saWIvc2VudHJ5JyksXG4gIHJlcXVpcmUoJy4vbGliL3NuYXBlbmdhZ2UnKSxcbiAgcmVxdWlyZSgnLi9saWIvc3Bpbm5ha3InKSxcbiAgcmVxdWlyZSgnLi9saWIvdGFwc3RyZWFtJyksXG4gIHJlcXVpcmUoJy4vbGliL3RyYWtpbycpLFxuICByZXF1aXJlKCcuL2xpYi90d2l0dGVyLWFkcycpLFxuICByZXF1aXJlKCcuL2xpYi91c2Vydm9pY2UnKSxcbiAgcmVxdWlyZSgnLi9saWIvdmVybycpLFxuICByZXF1aXJlKCcuL2xpYi92aXN1YWwtd2Vic2l0ZS1vcHRpbWl6ZXInKSxcbiAgcmVxdWlyZSgnLi9saWIvd2ViZW5nYWdlJyksXG4gIHJlcXVpcmUoJy4vbGliL3dvb3ByYScpLFxuICByZXF1aXJlKCcuL2xpYi95YW5kZXgtbWV0cmljYScpXG5dO1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgc25ha2UgPSByZXF1aXJlKCd0by1zbmFrZS1jYXNlJyk7XG52YXIgdXNlSHR0cHMgPSByZXF1aXJlKCd1c2UtaHR0cHMnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcblxuLyoqXG4gKiBIT1BcbiAqL1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBFeHBvc2UgYEFkUm9sbGAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEFkUm9sbCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0FkUm9sbCcpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfX2Fkcm9sbF9sb2FkZWQnKVxuICAuZ2xvYmFsKCdhZHJvbGxfYWR2X2lkJylcbiAgLmdsb2JhbCgnYWRyb2xsX3BpeF9pZCcpXG4gIC5nbG9iYWwoJ2Fkcm9sbF9jdXN0b21fZGF0YScpXG4gIC5vcHRpb24oJ2FkdklkJywgJycpXG4gIC5vcHRpb24oJ3BpeElkJywgJycpXG4gIC50YWcoJ2h0dHAnLCAnPHNjcmlwdCBzcmM9XCJodHRwOi8vYS5hZHJvbGwuY29tL2ovcm91bmR0cmlwLmpzXCI+JylcbiAgLnRhZygnaHR0cHMnLCAnPHNjcmlwdCBzcmM9XCJodHRwczovL3MuYWRyb2xsLmNvbS9qL3JvdW5kdHJpcC5qc1wiPicpXG4gIC5tYXBwaW5nKCdldmVudHMnKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9zdXBwb3J0LmFkcm9sbC5jb20vZ2V0dGluZy1zdGFydGVkLWluLTQtZWFzeS1zdGVwcy8jc3RlcC1vbmVcbiAqIGh0dHA6Ly9zdXBwb3J0LmFkcm9sbC5jb20vZW5oYW5jZWQtY29udmVyc2lvbi10cmFja2luZy9cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkFkUm9sbC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuYWRyb2xsX2Fkdl9pZCA9IHRoaXMub3B0aW9ucy5hZHZJZDtcbiAgd2luZG93LmFkcm9sbF9waXhfaWQgPSB0aGlzLm9wdGlvbnMucGl4SWQ7XG4gIHdpbmRvdy5fX2Fkcm9sbF9sb2FkZWQgPSB0cnVlO1xuICB2YXIgbmFtZSA9IHVzZUh0dHBzKCkgPyAnaHR0cHMnIDogJ2h0dHAnO1xuICB0aGlzLmxvYWQobmFtZSwgdGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkFkUm9sbC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHdpbmRvdy5fX2Fkcm9sbDtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBodHRwOi8vc3VwcG9ydC5hZHJvbGwuY29tL3NlZ21lbnRpbmctY2xpY2tzL1xuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbkFkUm9sbC5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcbiAgdGhpcy50cmFjayhwYWdlLnRyYWNrKG5hbWUpKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5BZFJvbGwucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgZXZlbnQgPSB0cmFjay5ldmVudCgpO1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzKGV2ZW50KTtcbiAgdmFyIHRvdGFsID0gdHJhY2sucmV2ZW51ZSgpIHx8IHRyYWNrLnRvdGFsKCkgfHwgMDtcbiAgdmFyIG9yZGVySWQgPSB0cmFjay5vcmRlcklkKCkgfHwgMDtcblxuICBlYWNoKGV2ZW50cywgZnVuY3Rpb24oZXZlbnQpe1xuICAgIHZhciBkYXRhID0ge307XG4gICAgaWYgKHVzZXIuaWQoKSkgZGF0YS51c2VyX2lkID0gdXNlci5pZCgpO1xuICAgIGRhdGEuYWRyb2xsX2NvbnZlcnNpb25fdmFsdWVfaW5fZG9sbGFycyA9IHRvdGFsO1xuICAgIGRhdGEub3JkZXJfaWQgPSBvcmRlcklkO1xuICAgIC8vIHRoZSBhZHJvbGwgaW50ZXJmYWNlIG9ubHkgYWxsb3dzIGZvclxuICAgIC8vIHNlZ21lbnQgbmFtZXMgd2hpY2ggYXJlIHNuYWtlIGNhc2VkLlxuICAgIGRhdGEuYWRyb2xsX3NlZ21lbnRzID0gc25ha2UoZXZlbnQpO1xuICAgIHdpbmRvdy5fX2Fkcm9sbC5yZWNvcmRfdXNlcihkYXRhKTtcbiAgfSk7XG5cbiAgLy8gbm8gZXZlbnRzIGZvdW5kXG4gIGlmICghZXZlbnRzLmxlbmd0aCkge1xuICAgIHZhciBkYXRhID0ge307XG4gICAgaWYgKHVzZXIuaWQoKSkgZGF0YS51c2VyX2lkID0gdXNlci5pZCgpO1xuICAgIGRhdGEuYWRyb2xsX3NlZ21lbnRzID0gc25ha2UoZXZlbnQpO1xuICAgIHdpbmRvdy5fX2Fkcm9sbC5yZWNvcmRfdXNlcihkYXRhKTtcbiAgfVxufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBiaW5kID0gcmVxdWlyZSgnYmluZCcpO1xudmFyIGNhbGxiYWNrID0gcmVxdWlyZSgnY2FsbGJhY2snKTtcbnZhciBjbG9uZSA9IHJlcXVpcmUoJ2Nsb25lJyk7XG52YXIgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnZGVmYXVsdHMnKTtcbnZhciBwcm90b3MgPSByZXF1aXJlKCcuL3Byb3RvcycpO1xudmFyIHNsdWcgPSByZXF1aXJlKCdzbHVnJyk7XG52YXIgc3RhdGljcyA9IHJlcXVpcmUoJy4vc3RhdGljcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgY3JlYXRlSW50ZWdyYXRpb25gLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlSW50ZWdyYXRpb247XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGBJbnRlZ3JhdGlvbmAgY29uc3RydWN0b3IuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBJbnRlZ3JhdGlvblxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUludGVncmF0aW9uKG5hbWUpe1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGEgbmV3IGBJbnRlZ3JhdGlvbmAuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqL1xuXG4gIGZ1bmN0aW9uIEludGVncmF0aW9uKG9wdGlvbnMpe1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWRkSW50ZWdyYXRpb24pIHtcbiAgICAgIC8vIHBsdWdpblxuICAgICAgcmV0dXJuIG9wdGlvbnMuYWRkSW50ZWdyYXRpb24oSW50ZWdyYXRpb24pO1xuICAgIH1cbiAgICB0aGlzLmRlYnVnID0gZGVidWcoJ2FuYWx5dGljczppbnRlZ3JhdGlvbjonICsgc2x1ZyhuYW1lKSk7XG4gICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdHMoY2xvbmUob3B0aW9ucykgfHwge30sIHRoaXMuZGVmYXVsdHMpO1xuICAgIHRoaXMuX3F1ZXVlID0gW107XG4gICAgdGhpcy5vbmNlKCdyZWFkeScsIGJpbmQodGhpcywgdGhpcy5mbHVzaCkpO1xuXG4gICAgSW50ZWdyYXRpb24uZW1pdCgnY29uc3RydWN0JywgdGhpcyk7XG4gICAgdGhpcy5yZWFkeSA9IGJpbmQodGhpcywgdGhpcy5yZWFkeSk7XG4gICAgdGhpcy5fd3JhcEluaXRpYWxpemUoKTtcbiAgICB0aGlzLl93cmFwUGFnZSgpO1xuICAgIHRoaXMuX3dyYXBUcmFjaygpO1xuICB9XG5cbiAgSW50ZWdyYXRpb24ucHJvdG90eXBlLmRlZmF1bHRzID0ge307XG4gIEludGVncmF0aW9uLnByb3RvdHlwZS5nbG9iYWxzID0gW107XG4gIEludGVncmF0aW9uLnByb3RvdHlwZS50ZW1wbGF0ZXMgPSB7fTtcbiAgSW50ZWdyYXRpb24ucHJvdG90eXBlLm5hbWUgPSBuYW1lO1xuICBmb3IgKHZhciBrZXkgaW4gc3RhdGljcykgSW50ZWdyYXRpb25ba2V5XSA9IHN0YXRpY3Nba2V5XTtcbiAgZm9yICh2YXIga2V5IGluIHByb3RvcykgSW50ZWdyYXRpb24ucHJvdG90eXBlW2tleV0gPSBwcm90b3Nba2V5XTtcbiAgcmV0dXJuIEludGVncmF0aW9uO1xufVxuIiwiXG52YXIgYmluZCA9IHJlcXVpcmUoJ2JpbmQnKVxuICAsIGJpbmRBbGwgPSByZXF1aXJlKCdiaW5kLWFsbCcpO1xuXG5cbi8qKlxuICogRXhwb3NlIGBiaW5kYC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBiaW5kO1xuXG5cbi8qKlxuICogRXhwb3NlIGBiaW5kQWxsYC5cbiAqL1xuXG5leHBvcnRzLmFsbCA9IGJpbmRBbGw7XG5cblxuLyoqXG4gKiBFeHBvc2UgYGJpbmRNZXRob2RzYC5cbiAqL1xuXG5leHBvcnRzLm1ldGhvZHMgPSBiaW5kTWV0aG9kcztcblxuXG4vKipcbiAqIEJpbmQgYG1ldGhvZHNgIG9uIGBvYmpgIHRvIGFsd2F5cyBiZSBjYWxsZWQgd2l0aCB0aGUgYG9iamAgYXMgY29udGV4dC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kcy4uLlxuICovXG5cbmZ1bmN0aW9uIGJpbmRNZXRob2RzIChvYmosIG1ldGhvZHMpIHtcbiAgbWV0aG9kcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgZm9yICh2YXIgaSA9IDAsIG1ldGhvZDsgbWV0aG9kID0gbWV0aG9kc1tpXTsgaSsrKSB7XG4gICAgb2JqW21ldGhvZF0gPSBiaW5kKG9iaiwgb2JqW21ldGhvZF0pO1xuICB9XG4gIHJldHVybiBvYmo7XG59IiwiLyoqXG4gKiBTbGljZSByZWZlcmVuY2UuXG4gKi9cblxudmFyIHNsaWNlID0gW10uc2xpY2U7XG5cbi8qKlxuICogQmluZCBgb2JqYCB0byBgZm5gLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBmbiBvciBzdHJpbmdcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaiwgZm4pe1xuICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGZuKSBmbiA9IG9ialtmbl07XG4gIGlmICgnZnVuY3Rpb24nICE9IHR5cGVvZiBmbikgdGhyb3cgbmV3IEVycm9yKCdiaW5kKCkgcmVxdWlyZXMgYSBmdW5jdGlvbicpO1xuICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIGZuLmFwcGx5KG9iaiwgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gIH1cbn07XG4iLCJcbnRyeSB7XG4gIHZhciBiaW5kID0gcmVxdWlyZSgnYmluZCcpO1xuICB2YXIgdHlwZSA9IHJlcXVpcmUoJ3R5cGUnKTtcbn0gY2F0Y2ggKGUpIHtcbiAgdmFyIGJpbmQgPSByZXF1aXJlKCdiaW5kLWNvbXBvbmVudCcpO1xuICB2YXIgdHlwZSA9IHJlcXVpcmUoJ3R5cGUtY29tcG9uZW50Jyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgdmFyIHZhbCA9IG9ialtrZXldO1xuICAgIGlmICh0eXBlKHZhbCkgPT09ICdmdW5jdGlvbicpIG9ialtrZXldID0gYmluZChvYmosIG9ialtrZXldKTtcbiAgfVxuICByZXR1cm4gb2JqO1xufTsiLCJ2YXIgbmV4dCA9IHJlcXVpcmUoJ25leHQtdGljaycpO1xuXG5cbi8qKlxuICogRXhwb3NlIGBjYWxsYmFja2AuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBjYWxsYmFjaztcblxuXG4vKipcbiAqIENhbGwgYW4gYGZuYCBiYWNrIHN5bmNocm9ub3VzbHkgaWYgaXQgZXhpc3RzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuZnVuY3Rpb24gY2FsbGJhY2sgKGZuKSB7XG4gIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZm4pIGZuKCk7XG59XG5cblxuLyoqXG4gKiBDYWxsIGFuIGBmbmAgYmFjayBhc3luY2hyb25vdXNseSBpZiBpdCBleGlzdHMuIElmIGB3YWl0YCBpcyBvbW1pdHRlZCwgdGhlXG4gKiBgZm5gIHdpbGwgYmUgY2FsbGVkIG9uIG5leHQgdGljay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtOdW1iZXJ9IHdhaXQgKG9wdGlvbmFsKVxuICovXG5cbmNhbGxiYWNrLmFzeW5jID0gZnVuY3Rpb24gKGZuLCB3YWl0KSB7XG4gIGlmICgnZnVuY3Rpb24nICE9PSB0eXBlb2YgZm4pIHJldHVybjtcbiAgaWYgKCF3YWl0KSByZXR1cm4gbmV4dChmbik7XG4gIHNldFRpbWVvdXQoZm4sIHdhaXQpO1xufTtcblxuXG4vKipcbiAqIFN5bW1ldHJ5LlxuICovXG5cbmNhbGxiYWNrLnN5bmMgPSBjYWxsYmFjaztcbiIsIlwidXNlIHN0cmljdFwiXG5cbmlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlID09ICdmdW5jdGlvbicpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmKXsgc2V0SW1tZWRpYXRlKGYpIH1cbn1cbi8vIGxlZ2FjeSBub2RlLmpzXG5lbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2Vzcy5uZXh0VGljayA9PSAnZnVuY3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcHJvY2Vzcy5uZXh0VGlja1xufVxuLy8gZmFsbGJhY2sgZm9yIG90aGVyIGVudmlyb25tZW50cyAvIHBvc3RNZXNzYWdlIGJlaGF2ZXMgYmFkbHkgb24gSUU4XG5lbHNlIGlmICh0eXBlb2Ygd2luZG93ID09ICd1bmRlZmluZWQnIHx8IHdpbmRvdy5BY3RpdmVYT2JqZWN0IHx8ICF3aW5kb3cucG9zdE1lc3NhZ2UpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmKXsgc2V0VGltZW91dChmKSB9O1xufSBlbHNlIHtcbiAgdmFyIHEgPSBbXTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uKCl7XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgcS5sZW5ndGgpIHtcbiAgICAgIHRyeSB7IHFbaSsrXSgpOyB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBxID0gcS5zbGljZShpKTtcbiAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKCd0aWMhJywgJyonKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcS5sZW5ndGggPSAwO1xuICB9LCB0cnVlKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuKXtcbiAgICBpZiAoIXEubGVuZ3RoKSB3aW5kb3cucG9zdE1lc3NhZ2UoJ3RpYyEnLCAnKicpO1xuICAgIHEucHVzaChmbik7XG4gIH1cbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciB0eXBlO1xuXG50cnkge1xuICB0eXBlID0gcmVxdWlyZSgndHlwZScpO1xufSBjYXRjaChlKXtcbiAgdHlwZSA9IHJlcXVpcmUoJ3R5cGUtY29tcG9uZW50Jyk7XG59XG5cbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBjbG9uZTtcblxuLyoqXG4gKiBDbG9uZXMgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSBhbnkgb2JqZWN0XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGNsb25lKG9iail7XG4gIHN3aXRjaCAodHlwZShvYmopKSB7XG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHZhciBjb3B5ID0ge307XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGNvcHlba2V5XSA9IGNsb25lKG9ialtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNvcHk7XG5cbiAgICBjYXNlICdhcnJheSc6XG4gICAgICB2YXIgY29weSA9IG5ldyBBcnJheShvYmoubGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjb3B5W2ldID0gY2xvbmUob2JqW2ldKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb3B5O1xuXG4gICAgY2FzZSAncmVnZXhwJzpcbiAgICAgIC8vIGZyb20gbWlsbGVybWVkZWlyb3MvYW1kLXV0aWxzIC0gTUlUXG4gICAgICB2YXIgZmxhZ3MgPSAnJztcbiAgICAgIGZsYWdzICs9IG9iai5tdWx0aWxpbmUgPyAnbScgOiAnJztcbiAgICAgIGZsYWdzICs9IG9iai5nbG9iYWwgPyAnZycgOiAnJztcbiAgICAgIGZsYWdzICs9IG9iai5pZ25vcmVDYXNlID8gJ2knIDogJyc7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChvYmouc291cmNlLCBmbGFncyk7XG5cbiAgICBjYXNlICdkYXRlJzpcbiAgICAgIHJldHVybiBuZXcgRGF0ZShvYmouZ2V0VGltZSgpKTtcblxuICAgIGRlZmF1bHQ6IC8vIHN0cmluZywgbnVtYmVyLCBib29sZWFuLCDigKZcbiAgICAgIHJldHVybiBvYmo7XG4gIH1cbn1cbiIsImlmICgndW5kZWZpbmVkJyA9PSB0eXBlb2Ygd2luZG93KSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvZGVidWcnKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9kZWJ1ZycpO1xufVxuIiwiLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciB0dHkgPSByZXF1aXJlKCd0dHknKTtcblxuLyoqXG4gKiBFeHBvc2UgYGRlYnVnKClgIGFzIHRoZSBtb2R1bGUuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBkZWJ1ZztcblxuLyoqXG4gKiBFbmFibGVkIGRlYnVnZ2Vycy5cbiAqL1xuXG52YXIgbmFtZXMgPSBbXVxuICAsIHNraXBzID0gW107XG5cbihwcm9jZXNzLmVudi5ERUJVRyB8fCAnJylcbiAgLnNwbGl0KC9bXFxzLF0rLylcbiAgLmZvckVhY2goZnVuY3Rpb24obmFtZSl7XG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgnKicsICcuKj8nKTtcbiAgICBpZiAobmFtZVswXSA9PT0gJy0nKSB7XG4gICAgICBza2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZS5zdWJzdHIoMSkgKyAnJCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZXMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWUgKyAnJCcpKTtcbiAgICB9XG4gIH0pO1xuXG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG52YXIgY29sb3JzID0gWzYsIDIsIDMsIDQsIDUsIDFdO1xuXG4vKipcbiAqIFByZXZpb3VzIGRlYnVnKCkgY2FsbC5cbiAqL1xuXG52YXIgcHJldiA9IHt9O1xuXG4vKipcbiAqIFByZXZpb3VzbHkgYXNzaWduZWQgY29sb3IuXG4gKi9cblxudmFyIHByZXZDb2xvciA9IDA7XG5cbi8qKlxuICogSXMgc3Rkb3V0IGEgVFRZPyBDb2xvcmVkIG91dHB1dCBpcyBkaXNhYmxlZCB3aGVuIGB0cnVlYC5cbiAqL1xuXG52YXIgaXNhdHR5ID0gdHR5LmlzYXR0eSgyKTtcblxuLyoqXG4gKiBTZWxlY3QgYSBjb2xvci5cbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBjb2xvcigpIHtcbiAgcmV0dXJuIGNvbG9yc1twcmV2Q29sb3IrKyAlIGNvbG9ycy5sZW5ndGhdO1xufVxuXG4vKipcbiAqIEh1bWFuaXplIHRoZSBnaXZlbiBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBodW1hbml6ZShtcykge1xuICB2YXIgc2VjID0gMTAwMFxuICAgICwgbWluID0gNjAgKiAxMDAwXG4gICAgLCBob3VyID0gNjAgKiBtaW47XG5cbiAgaWYgKG1zID49IGhvdXIpIHJldHVybiAobXMgLyBob3VyKS50b0ZpeGVkKDEpICsgJ2gnO1xuICBpZiAobXMgPj0gbWluKSByZXR1cm4gKG1zIC8gbWluKS50b0ZpeGVkKDEpICsgJ20nO1xuICBpZiAobXMgPj0gc2VjKSByZXR1cm4gKG1zIC8gc2VjIHwgMCkgKyAncyc7XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgZGVidWdnZXIgd2l0aCB0aGUgZ2l2ZW4gYG5hbWVgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtUeXBlfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBkZWJ1ZyhuYW1lKSB7XG4gIGZ1bmN0aW9uIGRpc2FibGVkKCl7fVxuICBkaXNhYmxlZC5lbmFibGVkID0gZmFsc2U7XG5cbiAgdmFyIG1hdGNoID0gc2tpcHMuc29tZShmdW5jdGlvbihyZSl7XG4gICAgcmV0dXJuIHJlLnRlc3QobmFtZSk7XG4gIH0pO1xuXG4gIGlmIChtYXRjaCkgcmV0dXJuIGRpc2FibGVkO1xuXG4gIG1hdGNoID0gbmFtZXMuc29tZShmdW5jdGlvbihyZSl7XG4gICAgcmV0dXJuIHJlLnRlc3QobmFtZSk7XG4gIH0pO1xuXG4gIGlmICghbWF0Y2gpIHJldHVybiBkaXNhYmxlZDtcbiAgdmFyIGMgPSBjb2xvcigpO1xuXG4gIGZ1bmN0aW9uIGNvbG9yZWQoZm10KSB7XG4gICAgZm10ID0gY29lcmNlKGZtdCk7XG5cbiAgICB2YXIgY3VyciA9IG5ldyBEYXRlO1xuICAgIHZhciBtcyA9IGN1cnIgLSAocHJldltuYW1lXSB8fCBjdXJyKTtcbiAgICBwcmV2W25hbWVdID0gY3VycjtcblxuICAgIGZtdCA9ICcgIFxcdTAwMWJbOScgKyBjICsgJ20nICsgbmFtZSArICcgJ1xuICAgICAgKyAnXFx1MDAxYlszJyArIGMgKyAnbVxcdTAwMWJbOTBtJ1xuICAgICAgKyBmbXQgKyAnXFx1MDAxYlszJyArIGMgKyAnbSdcbiAgICAgICsgJyArJyArIGh1bWFuaXplKG1zKSArICdcXHUwMDFiWzBtJztcblxuICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYWluKGZtdCkge1xuICAgIGZtdCA9IGNvZXJjZShmbXQpO1xuXG4gICAgZm10ID0gbmV3IERhdGUoKS50b1VUQ1N0cmluZygpXG4gICAgICArICcgJyArIG5hbWUgKyAnICcgKyBmbXQ7XG4gICAgY29uc29sZS5lcnJvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgY29sb3JlZC5lbmFibGVkID0gcGxhaW4uZW5hYmxlZCA9IHRydWU7XG5cbiAgcmV0dXJuIGlzYXR0eSB8fCBwcm9jZXNzLmVudi5ERUJVR19DT0xPUlNcbiAgICA/IGNvbG9yZWRcbiAgICA6IHBsYWluO1xufVxuXG4vKipcbiAqIENvZXJjZSBgdmFsYC5cbiAqL1xuXG5mdW5jdGlvbiBjb2VyY2UodmFsKSB7XG4gIGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikgcmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtcbiAgcmV0dXJuIHZhbDtcbn1cbiIsIlxuLyoqXG4gKiBFeHBvc2UgYGRlYnVnKClgIGFzIHRoZSBtb2R1bGUuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBkZWJ1ZztcblxuLyoqXG4gKiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1R5cGV9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGRlYnVnKG5hbWUpIHtcbiAgaWYgKCFkZWJ1Zy5lbmFibGVkKG5hbWUpKSByZXR1cm4gZnVuY3Rpb24oKXt9O1xuXG4gIHJldHVybiBmdW5jdGlvbihmbXQpe1xuICAgIGZtdCA9IGNvZXJjZShmbXQpO1xuXG4gICAgdmFyIGN1cnIgPSBuZXcgRGF0ZTtcbiAgICB2YXIgbXMgPSBjdXJyIC0gKGRlYnVnW25hbWVdIHx8IGN1cnIpO1xuICAgIGRlYnVnW25hbWVdID0gY3VycjtcblxuICAgIGZtdCA9IG5hbWVcbiAgICAgICsgJyAnXG4gICAgICArIGZtdFxuICAgICAgKyAnICsnICsgZGVidWcuaHVtYW5pemUobXMpO1xuXG4gICAgLy8gVGhpcyBoYWNrZXJ5IGlzIHJlcXVpcmVkIGZvciBJRThcbiAgICAvLyB3aGVyZSBgY29uc29sZS5sb2dgIGRvZXNuJ3QgaGF2ZSAnYXBwbHknXG4gICAgd2luZG93LmNvbnNvbGVcbiAgICAgICYmIGNvbnNvbGUubG9nXG4gICAgICAmJiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjb25zb2xlLmxvZywgY29uc29sZSwgYXJndW1lbnRzKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGRlYnVnIG1vZGUgbmFtZXMuXG4gKi9cblxuZGVidWcubmFtZXMgPSBbXTtcbmRlYnVnLnNraXBzID0gW107XG5cbi8qKlxuICogRW5hYmxlcyBhIGRlYnVnIG1vZGUgYnkgbmFtZS4gVGhpcyBjYW4gaW5jbHVkZSBtb2Rlc1xuICogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5kZWJ1Zy5lbmFibGUgPSBmdW5jdGlvbihuYW1lKSB7XG4gIHRyeSB7XG4gICAgbG9jYWxTdG9yYWdlLmRlYnVnID0gbmFtZTtcbiAgfSBjYXRjaChlKXt9XG5cbiAgdmFyIHNwbGl0ID0gKG5hbWUgfHwgJycpLnNwbGl0KC9bXFxzLF0rLylcbiAgICAsIGxlbiA9IHNwbGl0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgbmFtZSA9IHNwbGl0W2ldLnJlcGxhY2UoJyonLCAnLio/Jyk7XG4gICAgaWYgKG5hbWVbMF0gPT09ICctJykge1xuICAgICAgZGVidWcuc2tpcHMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWUuc3Vic3RyKDEpICsgJyQnKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGVidWcubmFtZXMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWUgKyAnJCcpKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5kZWJ1Zy5kaXNhYmxlID0gZnVuY3Rpb24oKXtcbiAgZGVidWcuZW5hYmxlKCcnKTtcbn07XG5cbi8qKlxuICogSHVtYW5pemUgdGhlIGdpdmVuIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmRlYnVnLmh1bWFuaXplID0gZnVuY3Rpb24obXMpIHtcbiAgdmFyIHNlYyA9IDEwMDBcbiAgICAsIG1pbiA9IDYwICogMTAwMFxuICAgICwgaG91ciA9IDYwICogbWluO1xuXG4gIGlmIChtcyA+PSBob3VyKSByZXR1cm4gKG1zIC8gaG91cikudG9GaXhlZCgxKSArICdoJztcbiAgaWYgKG1zID49IG1pbikgcmV0dXJuIChtcyAvIG1pbikudG9GaXhlZCgxKSArICdtJztcbiAgaWYgKG1zID49IHNlYykgcmV0dXJuIChtcyAvIHNlYyB8IDApICsgJ3MnO1xuICByZXR1cm4gbXMgKyAnbXMnO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG1vZGUgbmFtZSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmRlYnVnLmVuYWJsZWQgPSBmdW5jdGlvbihuYW1lKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkZWJ1Zy5za2lwcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChkZWJ1Zy5za2lwc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkZWJ1Zy5uYW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChkZWJ1Zy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBDb2VyY2UgYHZhbGAuXG4gKi9cblxuZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuICBpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG4gIHJldHVybiB2YWw7XG59XG5cbi8vIHBlcnNpc3RcblxudHJ5IHtcbiAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIGRlYnVnLmVuYWJsZShsb2NhbFN0b3JhZ2UuZGVidWcpO1xufSBjYXRjaChlKXt9XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTWVyZ2UgZGVmYXVsdCB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0c1xuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xudmFyIGRlZmF1bHRzID0gZnVuY3Rpb24gKGRlc3QsIHNyYywgcmVjdXJzaXZlKSB7XG4gIGZvciAodmFyIHByb3AgaW4gc3JjKSB7XG4gICAgaWYgKHJlY3Vyc2l2ZSAmJiBkZXN0W3Byb3BdIGluc3RhbmNlb2YgT2JqZWN0ICYmIHNyY1twcm9wXSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgZGVzdFtwcm9wXSA9IGRlZmF1bHRzKGRlc3RbcHJvcF0sIHNyY1twcm9wXSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmICghIChwcm9wIGluIGRlc3QpKSB7XG4gICAgICBkZXN0W3Byb3BdID0gc3JjW3Byb3BdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkZXN0O1xufTtcblxuLyoqXG4gKiBFeHBvc2UgYGRlZmF1bHRzYC5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0cztcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBsb2FkU2NyaXB0ID0gcmVxdWlyZSgnc2VnbWVudGlvL2xvYWQtc2NyaXB0Jyk7XG52YXIgZXZlbnRzID0gcmVxdWlyZSgnYW5hbHl0aWNzLWV2ZW50cycpO1xudmFyIG5vcm1hbGl6ZSA9IHJlcXVpcmUoJ3RvLW5vLWNhc2UnKTtcbnZhciBjYWxsYmFjayA9IHJlcXVpcmUoJ2NhbGxiYWNrJyk7XG52YXIgRW1pdHRlciA9IHJlcXVpcmUoJ2VtaXR0ZXInKTtcbnZhciB0aWNrID0gcmVxdWlyZSgnbmV4dC10aWNrJyk7XG52YXIgYWZ0ZXIgPSByZXF1aXJlKCdhZnRlcicpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdjb21wb25lbnQvZWFjaCcpO1xudmFyIHR5cGUgPSByZXF1aXJlKCd0eXBlJyk7XG52YXIgZm10ID0gcmVxdWlyZSgnZm10Jyk7XG5cbi8qKlxuICogTm9vcC5cbiAqL1xuXG5mdW5jdGlvbiBub29wKCl7fVxuXG4vKipcbiAqIFdpbmRvdyBkZWZhdWx0cy5cbiAqL1xuXG52YXIgc2V0VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0O1xudmFyIHNldEludGVydmFsID0gd2luZG93LnNldEludGVydmFsO1xudmFyIG9uZXJyb3IgPSB3aW5kb3cub25lcnJvcjtcbnZhciBvbmxvYWQgPSBudWxsO1xuXG4vKipcbiAqIE1peGluIGVtaXR0ZXIuXG4gKi9cblxuRW1pdHRlcihleHBvcnRzKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICovXG5cbmV4cG9ydHMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIHZhciByZWFkeSA9IHRoaXMucmVhZHk7XG4gIHRpY2socmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbmV4cG9ydHMucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe307XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5leHBvcnRzLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe307XG5cbi8qKlxuICogR2V0IGV2ZW50cyB0aGF0IG1hdGNoIGBzdHJgLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgIGV2ZW50cyA9IHsgbXlfZXZlbnQ6ICdhNDk5MWI4OCcgfVxuICogICAgLm1hcChldmVudHMsICdNeSBFdmVudCcpO1xuICogICAgLy8gPT4gW1wiYTQ5OTFiODhcIl1cbiAqICAgIC5tYXAoZXZlbnRzLCAnd2hhdGV2ZXInKTtcbiAqICAgIC8vID0+IFtdXG4gKlxuICogICAgZXZlbnRzID0gW3sga2V5OiAnbXkgZXZlbnQnLCB2YWx1ZTogJzliNWViMWZhJyB9XVxuICogICAgLm1hcChldmVudHMsICdteV9ldmVudCcpO1xuICogICAgLy8gPT4gW1wiOWI1ZWIxZmFcIl1cbiAqICAgIC5tYXAoZXZlbnRzLCAnd2hhdGV2ZXInKTtcbiAqICAgIC8vID0+IFtdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMubWFwID0gZnVuY3Rpb24ob2JqLCBzdHIpe1xuICB2YXIgYSA9IG5vcm1hbGl6ZShzdHIpO1xuICB2YXIgcmV0ID0gW107XG5cbiAgLy8gbm9vcFxuICBpZiAoIW9iaikgcmV0dXJuIHJldDtcblxuICAvLyBvYmplY3RcbiAgaWYgKCdvYmplY3QnID09IHR5cGUob2JqKSkge1xuICAgIGZvciAodmFyIGsgaW4gb2JqKSB7XG4gICAgICB2YXIgaXRlbSA9IG9ialtrXTtcbiAgICAgIHZhciBiID0gbm9ybWFsaXplKGspO1xuICAgICAgaWYgKGIgPT0gYSkgcmV0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgLy8gYXJyYXlcbiAgaWYgKCdhcnJheScgPT0gdHlwZShvYmopKSB7XG4gICAgaWYgKCFvYmoubGVuZ3RoKSByZXR1cm4gcmV0O1xuICAgIGlmICghb2JqWzBdLmtleSkgcmV0dXJuIHJldDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgaXRlbSA9IG9ialtpXTtcbiAgICAgIHZhciBiID0gbm9ybWFsaXplKGl0ZW0ua2V5KTtcbiAgICAgIGlmIChiID09IGEpIHJldC5wdXNoKGl0ZW0udmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIEludm9rZSBhIGBtZXRob2RgIHRoYXQgbWF5IG9yIG1heSBub3QgZXhpc3Qgb24gdGhlIHByb3RvdHlwZSB3aXRoIGBhcmdzYCxcbiAqIHF1ZXVlaW5nIG9yIG5vdCBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgaW50ZWdyYXRpb24gaXMgXCJyZWFkeVwiLiBEb24ndFxuICogdHJ1c3QgdGhlIG1ldGhvZCBjYWxsLCBzaW5jZSBpdCBjb250YWlucyBpbnRlZ3JhdGlvbiBwYXJ0eSBjb2RlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7TWl4ZWR9IGFyZ3MuLi5cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMuaW52b2tlID0gZnVuY3Rpb24obWV0aG9kKXtcbiAgaWYgKCF0aGlzW21ldGhvZF0pIHJldHVybjtcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIGlmICghdGhpcy5fcmVhZHkpIHJldHVybiB0aGlzLnF1ZXVlKG1ldGhvZCwgYXJncyk7XG4gIHZhciByZXQ7XG5cbiAgdHJ5IHtcbiAgICB0aGlzLmRlYnVnKCclcyB3aXRoICVvJywgbWV0aG9kLCBhcmdzKTtcbiAgICByZXQgPSB0aGlzW21ldGhvZF0uYXBwbHkodGhpcywgYXJncyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aGlzLmRlYnVnKCdlcnJvciAlbyBjYWxsaW5nICVzIHdpdGggJW8nLCBlLCBtZXRob2QsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogUXVldWUgYSBgbWV0aG9kYCB3aXRoIGBhcmdzYC4gSWYgdGhlIGludGVncmF0aW9uIGFzc3VtZXMgYW4gaW5pdGlhbFxuICogcGFnZXZpZXcsIHRoZW4gbGV0IHRoZSBmaXJzdCBjYWxsIHRvIGBwYWdlYCBwYXNzIHRocm91Z2guXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHtBcnJheX0gYXJnc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5xdWV1ZSA9IGZ1bmN0aW9uKG1ldGhvZCwgYXJncyl7XG4gIGlmICgncGFnZScgPT0gbWV0aG9kICYmIHRoaXMuX2Fzc3VtZXNQYWdldmlldyAmJiAhdGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICByZXR1cm4gdGhpcy5wYWdlLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgdGhpcy5fcXVldWUucHVzaCh7IG1ldGhvZDogbWV0aG9kLCBhcmdzOiBhcmdzIH0pO1xufTtcblxuLyoqXG4gKiBGbHVzaCB0aGUgaW50ZXJuYWwgcXVldWUuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5mbHVzaCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuX3JlYWR5ID0gdHJ1ZTtcbiAgdmFyIGNhbGw7XG4gIHdoaWxlIChjYWxsID0gdGhpcy5fcXVldWUuc2hpZnQoKSkgdGhpc1tjYWxsLm1ldGhvZF0uYXBwbHkodGhpcywgY2FsbC5hcmdzKTtcbn07XG5cbi8qKlxuICogUmVzZXQgdGhlIGludGVncmF0aW9uLCByZW1vdmluZyBpdHMgZ2xvYmFsIHZhcmlhYmxlcy5cbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLnJlc2V0ID0gZnVuY3Rpb24oKXtcbiAgZm9yICh2YXIgaSA9IDAsIGtleTsga2V5ID0gdGhpcy5nbG9iYWxzW2ldOyBpKyspIHdpbmRvd1trZXldID0gdW5kZWZpbmVkO1xuICB3aW5kb3cuc2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gIHdpbmRvdy5zZXRJbnRlcnZhbCA9IHNldEludGVydmFsO1xuICB3aW5kb3cub25lcnJvciA9IG9uZXJyb3I7XG4gIHdpbmRvdy5vbmxvYWQgPSBvbmxvYWQ7XG59O1xuXG4vKipcbiAqIExvYWQgYSB0YWcgYnkgYG5hbWVgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKi9cblxuZXhwb3J0cy5sb2FkID0gZnVuY3Rpb24obmFtZSwgbG9jYWxzLCBmbil7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBuYW1lKSBmbiA9IG5hbWUsIGxvY2FscyA9IG51bGwsIG5hbWUgPSBudWxsO1xuICBpZiAobmFtZSAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgbmFtZSkgZm4gPSBsb2NhbHMsIGxvY2FscyA9IG5hbWUsIG5hbWUgPSBudWxsO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgbG9jYWxzKSBmbiA9IGxvY2FscywgbG9jYWxzID0gbnVsbDtcbiAgbmFtZSA9IG5hbWUgfHwgJ2xpYnJhcnknO1xuICBsb2NhbHMgPSBsb2NhbHMgfHwge307XG4gIGxvY2FscyA9IHRoaXMubG9jYWxzKGxvY2Fscyk7XG4gIHZhciB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVzW25hbWVdO1xuICBpZiAoIXRlbXBsYXRlKSB0aHJvdyBuZXcgRXJyb3IoZm10KCd0ZW1wbGF0ZSBcIiVzXCIgbm90IGRlZmluZWQuJywgbmFtZSkpO1xuICB2YXIgYXR0cnMgPSByZW5kZXIodGVtcGxhdGUsIGxvY2Fscyk7XG4gIHZhciBmbiA9IGZuIHx8IG5vb3A7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGVsO1xuXG4gIHN3aXRjaCAodGVtcGxhdGUudHlwZSkge1xuICAgIGNhc2UgJ2ltZyc6XG4gICAgICBhdHRycy53aWR0aCA9IDE7XG4gICAgICBhdHRycy5oZWlnaHQgPSAxO1xuICAgICAgZWwgPSBsb2FkSW1hZ2UoYXR0cnMsIGZuKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3NjcmlwdCc6XG4gICAgICBlbCA9IGxvYWRTY3JpcHQoYXR0cnMsIGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGlmICghZXJyKSByZXR1cm4gZm4oKTtcbiAgICAgICAgc2VsZi5kZWJ1ZygnZXJyb3IgbG9hZGluZyBcIiVzXCIgZXJyb3I9XCIlc1wiJywgc2VsZi5uYW1lLCBlcnIpO1xuICAgICAgfSk7XG4gICAgICAvLyBUT0RPOiBoYWNrIHVudGlsIHJlZmFjdG9yaW5nIGxvYWQtc2NyaXB0XG4gICAgICBkZWxldGUgYXR0cnMuc3JjO1xuICAgICAgZWFjaChhdHRycywgZnVuY3Rpb24oa2V5LCB2YWwpe1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWwpO1xuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgZWwgPSBsb2FkSWZyYW1lKGF0dHJzLCBmbik7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiBlbDtcbn07XG5cbi8qKlxuICogTG9jYWxzIGZvciB0YWcgdGVtcGxhdGVzLlxuICpcbiAqIEJ5IGRlZmF1bHQgaXQgaW5jbHVkZXMgYSBjYWNoZSBidXN0ZXIsXG4gKiBhbmQgYWxsIG9mIHRoZSBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbbG9jYWxzXVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmV4cG9ydHMubG9jYWxzID0gZnVuY3Rpb24obG9jYWxzKXtcbiAgbG9jYWxzID0gbG9jYWxzIHx8IHt9O1xuICB2YXIgY2FjaGUgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMzYwMDAwMCk7XG4gIGlmICghbG9jYWxzLmhhc093blByb3BlcnR5KCdjYWNoZScpKSBsb2NhbHMuY2FjaGUgPSBjYWNoZTtcbiAgZWFjaCh0aGlzLm9wdGlvbnMsIGZ1bmN0aW9uKGtleSwgdmFsKXtcbiAgICBpZiAoIWxvY2Fscy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBsb2NhbHNba2V5XSA9IHZhbDtcbiAgfSk7XG4gIHJldHVybiBsb2NhbHM7XG59O1xuXG4vKipcbiAqIFNpbXBsZSB3YXkgdG8gZW1pdCByZWFkeS5cbiAqL1xuXG5leHBvcnRzLnJlYWR5ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5lbWl0KCdyZWFkeScpO1xufTtcblxuLyoqXG4gKiBXcmFwIHRoZSBpbml0aWFsaXplIG1ldGhvZCBpbiBhbiBleGlzdHMgY2hlY2ssIHNvIHdlIGRvbid0IGhhdmUgdG8gZG8gaXQgZm9yXG4gKiBldmVyeSBzaW5nbGUgaW50ZWdyYXRpb24uXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5fd3JhcEluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICB2YXIgaW5pdGlhbGl6ZSA9IHRoaXMuaW5pdGlhbGl6ZTtcbiAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLmRlYnVnKCdpbml0aWFsaXplJyk7XG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIHZhciByZXQgPSBpbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5lbWl0KCdpbml0aWFsaXplJyk7XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcblxuICBpZiAodGhpcy5fYXNzdW1lc1BhZ2V2aWV3KSB0aGlzLmluaXRpYWxpemUgPSBhZnRlcigyLCB0aGlzLmluaXRpYWxpemUpO1xufTtcblxuLyoqXG4gKiBXcmFwIHRoZSBwYWdlIG1ldGhvZCB0byBjYWxsIGBpbml0aWFsaXplYCBpbnN0ZWFkIGlmIHRoZSBpbnRlZ3JhdGlvbiBhc3N1bWVzXG4gKiBhIHBhZ2V2aWV3LlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMuX3dyYXBQYWdlID0gZnVuY3Rpb24oKXtcbiAgdmFyIHBhZ2UgPSB0aGlzLnBhZ2U7XG4gIHRoaXMucGFnZSA9IGZ1bmN0aW9uKCl7XG4gICAgaWYgKHRoaXMuX2Fzc3VtZXNQYWdldmlldyAmJiAhdGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFnZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufTtcblxuLyoqXG4gKiBXcmFwIHRoZSB0cmFjayBtZXRob2QgdG8gY2FsbMKgb3RoZXIgZWNvbW1lcmNlIG1ldGhvZHMgaWZcbiAqIGF2YWlsYWJsZSBkZXBlbmRpbmcgb24gdGhlIGB0cmFjay5ldmVudCgpYC5cbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLl93cmFwVHJhY2sgPSBmdW5jdGlvbigpe1xuICB2YXIgdCA9IHRoaXMudHJhY2s7XG4gIHRoaXMudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gICAgdmFyIGV2ZW50ID0gdHJhY2suZXZlbnQoKTtcbiAgICB2YXIgY2FsbGVkO1xuICAgIHZhciByZXQ7XG5cbiAgICBmb3IgKHZhciBtZXRob2QgaW4gZXZlbnRzKSB7XG4gICAgICB2YXIgcmVnZXhwID0gZXZlbnRzW21ldGhvZF07XG4gICAgICBpZiAoIXRoaXNbbWV0aG9kXSkgY29udGludWU7XG4gICAgICBpZiAoIXJlZ2V4cC50ZXN0KGV2ZW50KSkgY29udGludWU7XG4gICAgICByZXQgPSB0aGlzW21ldGhvZF0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoIWNhbGxlZCkgcmV0ID0gdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHJldHVybiByZXQ7XG4gIH07XG59O1xuXG5mdW5jdGlvbiBsb2FkSW1hZ2UoYXR0cnMsIGZuKSB7XG4gIGZuID0gZm4gfHwgZnVuY3Rpb24oKXt9O1xuICB2YXIgaW1nID0gbmV3IEltYWdlO1xuICBpbWcub25lcnJvciA9IGVycm9yKGZuLCAnZmFpbGVkIHRvIGxvYWQgcGl4ZWwnLCBpbWcpO1xuICBpbWcub25sb2FkID0gZnVuY3Rpb24oKXsgZm4oKTsgfTtcbiAgaW1nLnNyYyA9IGF0dHJzLnNyYztcbiAgaW1nLndpZHRoID0gMTtcbiAgaW1nLmhlaWdodCA9IDE7XG4gIHJldHVybiBpbWc7XG59XG5cbmZ1bmN0aW9uIGVycm9yKGZuLCBtZXNzYWdlLCBpbWcpe1xuICByZXR1cm4gZnVuY3Rpb24oZSl7XG4gICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgZXJyLmV2ZW50ID0gZTtcbiAgICBlcnIuc291cmNlID0gaW1nO1xuICAgIGZuKGVycik7XG4gIH07XG59XG5cbi8qKlxuICogUmVuZGVyIHRlbXBsYXRlICsgbG9jYWxzIGludG8gYW4gYGF0dHJzYCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRlbXBsYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbG9jYWxzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcmVuZGVyKHRlbXBsYXRlLCBsb2NhbHMpIHtcbiAgdmFyIGF0dHJzID0ge307XG4gIGVhY2godGVtcGxhdGUuYXR0cnMsIGZ1bmN0aW9uKGtleSwgdmFsKXtcbiAgICBhdHRyc1trZXldID0gdmFsLnJlcGxhY2UoL1xce1xce1xcICooXFx3KylcXCAqXFx9XFx9L2csIGZ1bmN0aW9uKF8sICQxKXtcbiAgICAgIHJldHVybiBsb2NhbHNbJDFdO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGF0dHJzO1xufVxuXG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgb25sb2FkID0gcmVxdWlyZSgnc2NyaXB0LW9ubG9hZCcpO1xudmFyIHRpY2sgPSByZXF1aXJlKCduZXh0LXRpY2snKTtcbnZhciB0eXBlID0gcmVxdWlyZSgndHlwZScpO1xuXG4vKipcbiAqIEV4cG9zZSBgbG9hZFNjcmlwdGAuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbG9hZFNjcmlwdChvcHRpb25zLCBmbil7XG4gIGlmICghb3B0aW9ucykgdGhyb3cgbmV3IEVycm9yKCdDYW50IGxvYWQgbm90aGluZy4uLicpO1xuXG4gIC8vIEFsbG93IGZvciB0aGUgc2ltcGxlc3QgY2FzZSwganVzdCBwYXNzaW5nIGEgYHNyY2Agc3RyaW5nLlxuICBpZiAoJ3N0cmluZycgPT0gdHlwZShvcHRpb25zKSkgb3B0aW9ucyA9IHsgc3JjIDogb3B0aW9ucyB9O1xuXG4gIHZhciBodHRwcyA9IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyB8fFxuICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2Nocm9tZS1leHRlbnNpb246JztcblxuICAvLyBJZiB5b3UgdXNlIHByb3RvY29sIHJlbGF0aXZlIFVSTHMsIHRoaXJkLXBhcnR5IHNjcmlwdHMgbGlrZSBHb29nbGVcbiAgLy8gQW5hbHl0aWNzIGJyZWFrIHdoZW4gdGVzdGluZyB3aXRoIGBmaWxlOmAgc28gdGhpcyBmaXhlcyB0aGF0LlxuICBpZiAob3B0aW9ucy5zcmMgJiYgb3B0aW9ucy5zcmMuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuICAgIG9wdGlvbnMuc3JjID0gaHR0cHMgPyAnaHR0cHM6JyArIG9wdGlvbnMuc3JjIDogJ2h0dHA6JyArIG9wdGlvbnMuc3JjO1xuICB9XG5cbiAgLy8gQWxsb3cgdGhlbSB0byBwYXNzIGluIGRpZmZlcmVudCBVUkxzIGRlcGVuZGluZyBvbiB0aGUgcHJvdG9jb2wuXG4gIGlmIChodHRwcyAmJiBvcHRpb25zLmh0dHBzKSBvcHRpb25zLnNyYyA9IG9wdGlvbnMuaHR0cHM7XG4gIGVsc2UgaWYgKCFodHRwcyAmJiBvcHRpb25zLmh0dHApIG9wdGlvbnMuc3JjID0gb3B0aW9ucy5odHRwO1xuXG4gIC8vIE1ha2UgdGhlIGA8c2NyaXB0PmAgZWxlbWVudCBhbmQgaW5zZXJ0IGl0IGJlZm9yZSB0aGUgZmlyc3Qgc2NyaXB0IG9uIHRoZVxuICAvLyBwYWdlLCB3aGljaCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0IHNpbmNlIHRoaXMgSmF2YXNjcmlwdCBpcyBydW5uaW5nLlxuICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gIHNjcmlwdC5zcmMgPSBvcHRpb25zLnNyYztcblxuICAvLyBJZiB3ZSBoYXZlIGEgZm4sIGF0dGFjaCBldmVudCBoYW5kbGVycywgZXZlbiBpbiBJRS4gQmFzZWQgb2ZmIG9mXG4gIC8vIHRoZSBUaGlyZC1QYXJ0eSBKYXZhc2NyaXB0IHNjcmlwdCBsb2FkaW5nIGV4YW1wbGU6XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90aGlyZHBhcnR5anMvdGhpcmRwYXJ0eWpzLWNvZGUvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvdGVtcGxhdGVzLzAyL2xvYWRpbmctZmlsZXMvaW5kZXguaHRtbFxuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlKGZuKSkge1xuICAgIG9ubG9hZChzY3JpcHQsIGZuKTtcbiAgfVxuXG4gIHRpY2soZnVuY3Rpb24oKXtcbiAgICAvLyBBcHBlbmQgYWZ0ZXIgZXZlbnQgbGlzdGVuZXJzIGFyZSBhdHRhY2hlZCBmb3IgSUUuXG4gICAgdmFyIGZpcnN0U2NyaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICAgIGZpcnN0U2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgZmlyc3RTY3JpcHQpO1xuICB9KTtcblxuICAvLyBSZXR1cm4gdGhlIHNjcmlwdCBlbGVtZW50IGluIGNhc2UgdGhleSB3YW50IHRvIGRvIGFueXRoaW5nIHNwZWNpYWwsIGxpa2VcbiAgLy8gZ2l2ZSBpdCBhbiBJRCBvciBhdHRyaWJ1dGVzLlxuICByZXR1cm4gc2NyaXB0O1xufTsiLCJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90aGlyZHBhcnR5anMvdGhpcmRwYXJ0eWpzLWNvZGUvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvdGVtcGxhdGVzLzAyL2xvYWRpbmctZmlsZXMvaW5kZXguaHRtbFxuXG4vKipcbiAqIEludm9rZSBgZm4oZXJyKWAgd2hlbiB0aGUgZ2l2ZW4gYGVsYCBzY3JpcHQgbG9hZHMuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlbCwgZm4pe1xuICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lclxuICAgID8gYWRkKGVsLCBmbilcbiAgICA6IGF0dGFjaChlbCwgZm4pO1xufTtcblxuLyoqXG4gKiBBZGQgZXZlbnQgbGlzdGVuZXIgdG8gYGVsYCwgYGZuKClgLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBhZGQoZWwsIGZuKXtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKF8sIGUpeyBmbihudWxsLCBlKTsgfSwgZmFsc2UpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGUpe1xuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ3NjcmlwdCBlcnJvciBcIicgKyBlbC5zcmMgKyAnXCInKTtcbiAgICBlcnIuZXZlbnQgPSBlO1xuICAgIGZuKGVycik7XG4gIH0sIGZhbHNlKTtcbn1cblxuLyoqXG4gKiBBdHRhY2ggZXZuZXQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGF0dGFjaChlbCwgZm4pe1xuICBlbC5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24oZSl7XG4gICAgaWYgKCEvY29tcGxldGV8bG9hZGVkLy50ZXN0KGVsLnJlYWR5U3RhdGUpKSByZXR1cm47XG4gICAgZm4obnVsbCwgZSk7XG4gIH0pO1xuICBlbC5hdHRhY2hFdmVudCgnb25lcnJvcicsIGZ1bmN0aW9uKGUpe1xuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ2ZhaWxlZCB0byBsb2FkIHRoZSBzY3JpcHQgXCInICsgZWwuc3JjICsgJ1wiJyk7XG4gICAgZXJyLmV2ZW50ID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgZm4oZXJyKTtcbiAgfSk7XG59XG4iLCJcbm1vZHVsZS5leHBvcnRzID0ge1xuICByZW1vdmVkUHJvZHVjdDogL15bIF9dP3JlbW92ZWRbIF9dP3Byb2R1Y3RbIF9dPyQvaSxcbiAgdmlld2VkUHJvZHVjdDogL15bIF9dP3ZpZXdlZFsgX10/cHJvZHVjdFsgX10/JC9pLFxuICB2aWV3ZWRQcm9kdWN0Q2F0ZWdvcnk6IC9eWyBfXT92aWV3ZWRbIF9dP3Byb2R1Y3RbIF9dP2NhdGVnb3J5WyBfXT8kL2ksXG4gIGFkZGVkUHJvZHVjdDogL15bIF9dP2FkZGVkWyBfXT9wcm9kdWN0WyBfXT8kL2ksXG4gIGNvbXBsZXRlZE9yZGVyOiAvXlsgX10/Y29tcGxldGVkWyBfXT9vcmRlclsgX10/JC9pLFxuICBzdGFydGVkT3JkZXI6IC9eWyBfXT9zdGFydGVkWyBfXT9vcmRlclsgX10/JC9pLFxuICB1cGRhdGVkT3JkZXI6IC9eWyBfXT91cGRhdGVkWyBfXT9vcmRlclsgX10/JC9pLFxuICByZWZ1bmRlZE9yZGVyOiAvXlsgX10/cmVmdW5kZWQ/WyBfXT9vcmRlclsgX10/JC9pLFxuICB2aWV3ZWRQcm9kdWN0RGV0YWlsczogL15bIF9dP3ZpZXdlZFsgX10/cHJvZHVjdFsgX10/ZGV0YWlscz9bIF9dPyQvaSxcbiAgY2xpY2tlZFByb2R1Y3Q6IC9eWyBfXT9jbGlja2VkWyBfXT9wcm9kdWN0WyBfXT8kL2ksXG4gIHZpZXdlZFByb21vdGlvbjogL15bIF9dP3ZpZXdlZFsgX10/cHJvbW90aW9uP1sgX10/JC9pLFxuICBjbGlja2VkUHJvbW90aW9uOiAvXlsgX10/Y2xpY2tlZFsgX10/cHJvbW90aW9uP1sgX10/JC9pLFxuICB2aWV3ZWRDaGVja291dFN0ZXA6IC9eWyBfXT92aWV3ZWRbIF9dP2NoZWNrb3V0WyBfXT9zdGVwWyBfXT8kL2ksXG4gIGNvbXBsZXRlZENoZWNrb3V0U3RlcDogL15bIF9dP2NvbXBsZXRlZFsgX10/Y2hlY2tvdXRbIF9dP3N0ZXBbIF9dPyQvaVxufTtcbiIsIlxuLyoqXG4gKiBFeHBvc2UgYHRvTm9DYXNlYC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRvTm9DYXNlO1xuXG5cbi8qKlxuICogVGVzdCB3aGV0aGVyIGEgc3RyaW5nIGlzIGNhbWVsLWNhc2UuXG4gKi9cblxudmFyIGhhc1NwYWNlID0gL1xccy87XG52YXIgaGFzU2VwYXJhdG9yID0gL1tcXFdfXS87XG5cblxuLyoqXG4gKiBSZW1vdmUgYW55IHN0YXJ0aW5nIGNhc2UgZnJvbSBhIGBzdHJpbmdgLCBsaWtlIGNhbWVsIG9yIHNuYWtlLCBidXQga2VlcFxuICogc3BhY2VzIGFuZCBwdW5jdHVhdGlvbiB0aGF0IG1heSBiZSBpbXBvcnRhbnQgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b05vQ2FzZSAoc3RyaW5nKSB7XG4gIGlmIChoYXNTcGFjZS50ZXN0KHN0cmluZykpIHJldHVybiBzdHJpbmcudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGhhc1NlcGFyYXRvci50ZXN0KHN0cmluZykpIHJldHVybiB1bnNlcGFyYXRlKHN0cmluZykudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIHVuY2FtZWxpemUoc3RyaW5nKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5cbi8qKlxuICogU2VwYXJhdG9yIHNwbGl0dGVyLlxuICovXG5cbnZhciBzZXBhcmF0b3JTcGxpdHRlciA9IC9bXFxXX10rKC58JCkvZztcblxuXG4vKipcbiAqIFVuLXNlcGFyYXRlIGEgYHN0cmluZ2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHVuc2VwYXJhdGUgKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2Uoc2VwYXJhdG9yU3BsaXR0ZXIsIGZ1bmN0aW9uIChtLCBuZXh0KSB7XG4gICAgcmV0dXJuIG5leHQgPyAnICcgKyBuZXh0IDogJyc7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogQ2FtZWxjYXNlIHNwbGl0dGVyLlxuICovXG5cbnZhciBjYW1lbFNwbGl0dGVyID0gLyguKShbQS1aXSspL2c7XG5cblxuLyoqXG4gKiBVbi1jYW1lbGNhc2UgYSBgc3RyaW5nYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gdW5jYW1lbGl6ZSAoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZShjYW1lbFNwbGl0dGVyLCBmdW5jdGlvbiAobSwgcHJldmlvdXMsIHVwcGVycykge1xuICAgIHJldHVybiBwcmV2aW91cyArICcgJyArIHVwcGVycy50b0xvd2VyQ2FzZSgpLnNwbGl0KCcnKS5qb2luKCcgJyk7XG4gIH0pO1xufSIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbmRleCA9IHJlcXVpcmUoJ2luZGV4b2YnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEVtaXR0ZXJgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIEVtaXR0ZXIob2JqKSB7XG4gIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopO1xufTtcblxuLyoqXG4gKiBNaXhpbiB0aGUgZW1pdHRlciBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIG1peGluKG9iaikge1xuICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtcbiAgICBvYmpba2V5XSA9IEVtaXR0ZXIucHJvdG90eXBlW2tleV07XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLm9uID1cbkVtaXR0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG4gICh0aGlzLl9jYWxsYmFja3NbZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XSB8fCBbXSlcbiAgICAucHVzaChmbik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcbiAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RW1pdHRlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xuXG4gIGZ1bmN0aW9uIG9uKCkge1xuICAgIHNlbGYub2ZmKGV2ZW50LCBvbik7XG4gICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGZuLl9vZmYgPSBvbjtcbiAgdGhpcy5vbihldmVudCwgb24pO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLm9mZiA9XG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcblxuICAvLyBhbGxcbiAgaWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1tldmVudF07XG4gIGlmICghY2FsbGJhY2tzKSByZXR1cm4gdGhpcztcblxuICAvLyByZW1vdmUgYWxsIGhhbmRsZXJzXG4gIGlmICgxID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXG4gIHZhciBpID0gaW5kZXgoY2FsbGJhY2tzLCBmbi5fb2ZmIHx8IGZuKTtcbiAgaWYgKH5pKSBjYWxsYmFja3Muc3BsaWNlKGksIDEpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRW1pdCBgZXZlbnRgIHdpdGggdGhlIGdpdmVuIGFyZ3MuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge01peGVkfSAuLi5cbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xuICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxuICAgICwgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtcblxuICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmV0dXJuIGFycmF5IG9mIGNhbGxiYWNrcyBmb3IgYGV2ZW50YC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcbiAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrc1tldmVudF0gfHwgW107XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIHRoaXMgZW1pdHRlciBoYXMgYGV2ZW50YCBoYW5kbGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgcmV0dXJuICEhIHRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcnIsIG9iail7XG4gIGlmIChhcnIuaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKG9iaik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcbiAgfVxuICByZXR1cm4gLTE7XG59OyIsIlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhZnRlciAodGltZXMsIGZ1bmMpIHtcbiAgLy8gQWZ0ZXIgMCwgcmVhbGx5P1xuICBpZiAodGltZXMgPD0gMCkgcmV0dXJuIGZ1bmMoKTtcblxuICAvLyBUaGF0J3MgbW9yZSBsaWtlIGl0LlxuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgaWYgKC0tdGltZXMgPCAxKSB7XG4gICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfTtcbn07IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudHJ5IHtcbiAgdmFyIHR5cGUgPSByZXF1aXJlKCd0eXBlJyk7XG59IGNhdGNoIChlcnIpIHtcbiAgdmFyIHR5cGUgPSByZXF1aXJlKCdjb21wb25lbnQtdHlwZScpO1xufVxuXG52YXIgdG9GdW5jdGlvbiA9IHJlcXVpcmUoJ3RvLWZ1bmN0aW9uJyk7XG5cbi8qKlxuICogSE9QIHJlZmVyZW5jZS5cbiAqL1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBJdGVyYXRlIHRoZSBnaXZlbiBgb2JqYCBhbmQgaW52b2tlIGBmbih2YWwsIGkpYFxuICogaW4gb3B0aW9uYWwgY29udGV4dCBgY3R4YC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxPYmplY3R9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbY3R4XVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaiwgZm4sIGN0eCl7XG4gIGZuID0gdG9GdW5jdGlvbihmbik7XG4gIGN0eCA9IGN0eCB8fCB0aGlzO1xuICBzd2l0Y2ggKHR5cGUob2JqKSkge1xuICAgIGNhc2UgJ2FycmF5JzpcbiAgICAgIHJldHVybiBhcnJheShvYmosIGZuLCBjdHgpO1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICBpZiAoJ251bWJlcicgPT0gdHlwZW9mIG9iai5sZW5ndGgpIHJldHVybiBhcnJheShvYmosIGZuLCBjdHgpO1xuICAgICAgcmV0dXJuIG9iamVjdChvYmosIGZuLCBjdHgpO1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gc3RyaW5nKG9iaiwgZm4sIGN0eCk7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBzdHJpbmcgY2hhcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHN0cmluZyhvYmosIGZuLCBjdHgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyArK2kpIHtcbiAgICBmbi5jYWxsKGN0eCwgb2JqLmNoYXJBdChpKSwgaSk7XG4gIH1cbn1cblxuLyoqXG4gKiBJdGVyYXRlIG9iamVjdCBrZXlzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBvYmplY3Qob2JqLCBmbiwgY3R4KSB7XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoaGFzLmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICBmbi5jYWxsKGN0eCwga2V5LCBvYmpba2V5XSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSXRlcmF0ZSBhcnJheS1pc2guXG4gKlxuICogQHBhcmFtIHtBcnJheXxPYmplY3R9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGFycmF5KG9iaiwgZm4sIGN0eCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7ICsraSkge1xuICAgIGZuLmNhbGwoY3R4LCBvYmpbaV0sIGkpO1xuICB9XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIERlcGVuZGVuY2llc1xuICovXG5cbnZhciBleHByO1xudHJ5IHtcbiAgZXhwciA9IHJlcXVpcmUoJ3Byb3BzJyk7XG59IGNhdGNoKGUpIHtcbiAgZXhwciA9IHJlcXVpcmUoJ2NvbXBvbmVudC1wcm9wcycpO1xufVxuXG4vKipcbiAqIEV4cG9zZSBgdG9GdW5jdGlvbigpYC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRvRnVuY3Rpb247XG5cbi8qKlxuICogQ29udmVydCBgb2JqYCB0byBhIGBGdW5jdGlvbmAuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gb2JqXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHRvRnVuY3Rpb24ob2JqKSB7XG4gIHN3aXRjaCAoe30udG9TdHJpbmcuY2FsbChvYmopKSB7XG4gICAgY2FzZSAnW29iamVjdCBPYmplY3RdJzpcbiAgICAgIHJldHVybiBvYmplY3RUb0Z1bmN0aW9uKG9iaik7XG4gICAgY2FzZSAnW29iamVjdCBGdW5jdGlvbl0nOlxuICAgICAgcmV0dXJuIG9iajtcbiAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxuICAgICAgcmV0dXJuIHN0cmluZ1RvRnVuY3Rpb24ob2JqKTtcbiAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOlxuICAgICAgcmV0dXJuIHJlZ2V4cFRvRnVuY3Rpb24ob2JqKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGRlZmF1bHRUb0Z1bmN0aW9uKG9iaik7XG4gIH1cbn1cblxuLyoqXG4gKiBEZWZhdWx0IHRvIHN0cmljdCBlcXVhbGl0eS5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSB2YWxcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZGVmYXVsdFRvRnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmope1xuICAgIHJldHVybiB2YWwgPT09IG9iajtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGByZWAgdG8gYSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlZ0V4cH0gcmVcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcmVnZXhwVG9GdW5jdGlvbihyZSkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqKXtcbiAgICByZXR1cm4gcmUudGVzdChvYmopO1xuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnQgcHJvcGVydHkgYHN0cmAgdG8gYSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHN0cmluZ1RvRnVuY3Rpb24oc3RyKSB7XG4gIC8vIGltbWVkaWF0ZSBzdWNoIGFzIFwiPiAyMFwiXG4gIGlmICgvXiAqXFxXKy8udGVzdChzdHIpKSByZXR1cm4gbmV3IEZ1bmN0aW9uKCdfJywgJ3JldHVybiBfICcgKyBzdHIpO1xuXG4gIC8vIHByb3BlcnRpZXMgc3VjaCBhcyBcIm5hbWUuZmlyc3RcIiBvciBcImFnZSA+IDE4XCIgb3IgXCJhZ2UgPiAxOCAmJiBhZ2UgPCAzNlwiXG4gIHJldHVybiBuZXcgRnVuY3Rpb24oJ18nLCAncmV0dXJuICcgKyBnZXQoc3RyKSk7XG59XG5cbi8qKlxuICogQ29udmVydCBgb2JqZWN0YCB0byBhIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gb2JqZWN0VG9GdW5jdGlvbihvYmopIHtcbiAgdmFyIG1hdGNoID0ge307XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBtYXRjaFtrZXldID0gdHlwZW9mIG9ialtrZXldID09PSAnc3RyaW5nJ1xuICAgICAgPyBkZWZhdWx0VG9GdW5jdGlvbihvYmpba2V5XSlcbiAgICAgIDogdG9GdW5jdGlvbihvYmpba2V5XSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbCl7XG4gICAgaWYgKHR5cGVvZiB2YWwgIT09ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG4gICAgZm9yICh2YXIga2V5IGluIG1hdGNoKSB7XG4gICAgICBpZiAoIShrZXkgaW4gdmFsKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKCFtYXRjaFtrZXldKHZhbFtrZXldKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbn1cblxuLyoqXG4gKiBCdWlsdCB0aGUgZ2V0dGVyIGZ1bmN0aW9uLiBTdXBwb3J0cyBnZXR0ZXIgc3R5bGUgZnVuY3Rpb25zXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZ2V0KHN0cikge1xuICB2YXIgcHJvcHMgPSBleHByKHN0cik7XG4gIGlmICghcHJvcHMubGVuZ3RoKSByZXR1cm4gJ18uJyArIHN0cjtcblxuICB2YXIgdmFsLCBpLCBwcm9wO1xuICBmb3IgKGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgdmFsID0gJ18uJyArIHByb3A7XG4gICAgdmFsID0gXCIoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgXCIgKyB2YWwgKyBcIiA/IFwiICsgdmFsICsgXCIoKSA6IFwiICsgdmFsICsgXCIpXCI7XG5cbiAgICAvLyBtaW1pYyBuZWdhdGl2ZSBsb29rYmVoaW5kIHRvIGF2b2lkIHByb2JsZW1zIHdpdGggbmVzdGVkIHByb3BlcnRpZXNcbiAgICBzdHIgPSBzdHJpcE5lc3RlZChwcm9wLCBzdHIsIHZhbCk7XG4gIH1cblxuICByZXR1cm4gc3RyO1xufVxuXG4vKipcbiAqIE1pbWljIG5lZ2F0aXZlIGxvb2tiZWhpbmQgdG8gYXZvaWQgcHJvYmxlbXMgd2l0aCBuZXN0ZWQgcHJvcGVydGllcy5cbiAqXG4gKiBTZWU6IGh0dHA6Ly9ibG9nLnN0ZXZlbmxldml0aGFuLmNvbS9hcmNoaXZlcy9taW1pYy1sb29rYmVoaW5kLWphdmFzY3JpcHRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IHZhbFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc3RyaXBOZXN0ZWQgKHByb3AsIHN0ciwgdmFsKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShuZXcgUmVnRXhwKCcoXFxcXC4pPycgKyBwcm9wLCAnZycpLCBmdW5jdGlvbigkMCwgJDEpIHtcbiAgICByZXR1cm4gJDEgPyAkMCA6IHZhbDtcbiAgfSk7XG59XG4iLCIvKipcbiAqIEdsb2JhbCBOYW1lc1xuICovXG5cbnZhciBnbG9iYWxzID0gL1xcYih0aGlzfEFycmF5fERhdGV8T2JqZWN0fE1hdGh8SlNPTilcXGIvZztcblxuLyoqXG4gKiBSZXR1cm4gaW1tZWRpYXRlIGlkZW50aWZpZXJzIHBhcnNlZCBmcm9tIGBzdHJgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBtYXAgZnVuY3Rpb24gb3IgcHJlZml4XG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzdHIsIGZuKXtcbiAgdmFyIHAgPSB1bmlxdWUocHJvcHMoc3RyKSk7XG4gIGlmIChmbiAmJiAnc3RyaW5nJyA9PSB0eXBlb2YgZm4pIGZuID0gcHJlZml4ZWQoZm4pO1xuICBpZiAoZm4pIHJldHVybiBtYXAoc3RyLCBwLCBmbik7XG4gIHJldHVybiBwO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gaW1tZWRpYXRlIGlkZW50aWZpZXJzIGluIGBzdHJgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcHJvcHMoc3RyKSB7XG4gIHJldHVybiBzdHJcbiAgICAucmVwbGFjZSgvXFwuXFx3K3xcXHcrICpcXCh8XCJbXlwiXSpcInwnW14nXSonfFxcLyhbXi9dKylcXC8vZywgJycpXG4gICAgLnJlcGxhY2UoZ2xvYmFscywgJycpXG4gICAgLm1hdGNoKC9bJGEtekEtWl9dXFx3Ki9nKVxuICAgIHx8IFtdO1xufVxuXG4vKipcbiAqIFJldHVybiBgc3RyYCB3aXRoIGBwcm9wc2AgbWFwcGVkIHdpdGggYGZuYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIG1hcChzdHIsIHByb3BzLCBmbikge1xuICB2YXIgcmUgPSAvXFwuXFx3K3xcXHcrICpcXCh8XCJbXlwiXSpcInwnW14nXSonfFxcLyhbXi9dKylcXC98W2EtekEtWl9dXFx3Ki9nO1xuICByZXR1cm4gc3RyLnJlcGxhY2UocmUsIGZ1bmN0aW9uKF8pe1xuICAgIGlmICgnKCcgPT0gX1tfLmxlbmd0aCAtIDFdKSByZXR1cm4gZm4oXyk7XG4gICAgaWYgKCF+cHJvcHMuaW5kZXhPZihfKSkgcmV0dXJuIF87XG4gICAgcmV0dXJuIGZuKF8pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gdW5pcXVlIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiB1bmlxdWUoYXJyKSB7XG4gIHZhciByZXQgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGlmICh+cmV0LmluZGV4T2YoYXJyW2ldKSkgY29udGludWU7XG4gICAgcmV0LnB1c2goYXJyW2ldKTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogTWFwIHdpdGggcHJlZml4IGBzdHJgLlxuICovXG5cbmZ1bmN0aW9uIHByZWZpeGVkKHN0cikge1xuICByZXR1cm4gZnVuY3Rpb24oXyl7XG4gICAgcmV0dXJuIHN0ciArIF87XG4gIH07XG59XG4iLCJcbi8qKlxuICogdG9TdHJpbmcuXG4gKi9cblxudmFyIHRvU3RyaW5nID0gd2luZG93LkpTT05cbiAgPyBKU09OLnN0cmluZ2lmeVxuICA6IGZ1bmN0aW9uKF8peyByZXR1cm4gU3RyaW5nKF8pOyB9O1xuXG4vKipcbiAqIEV4cG9ydCBgZm10YFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZm10O1xuXG4vKipcbiAqIEZvcm1hdHRlcnNcbiAqL1xuXG5mbXQubyA9IHRvU3RyaW5nO1xuZm10LnMgPSBTdHJpbmc7XG5mbXQuZCA9IHBhcnNlSW50O1xuXG4vKipcbiAqIEZvcm1hdCB0aGUgZ2l2ZW4gYHN0cmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHsuLi59IGFyZ3NcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm10KHN0cil7XG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB2YXIgaiA9IDA7XG5cbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC8lKFthLXpdKS9naSwgZnVuY3Rpb24oXywgZil7XG4gICAgcmV0dXJuIGZtdFtmXVxuICAgICAgPyBmbXRbZl0oYXJnc1tqKytdKVxuICAgICAgOiBfICsgZjtcbiAgfSk7XG59XG4iLCJcbi8qKlxuICogR2VuZXJhdGUgYSBzbHVnIGZyb20gdGhlIGdpdmVuIGBzdHJgLlxuICpcbiAqIGV4YW1wbGU6XG4gKlxuICogICAgICAgIGdlbmVyYXRlKCdmb28gYmFyJyk7XG4gKiAgICAgICAgLy8gPiBmb28tYmFyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBjb25maWcge1N0cmluZ3xSZWdFeHB9IFtyZXBsYWNlXSBjaGFyYWN0ZXJzIHRvIHJlcGxhY2UsIGRlZmF1bHRlZCB0byBgL1teYS16MC05XS9nYFxuICogQGNvbmZpZyB7U3RyaW5nfSBbc2VwYXJhdG9yXSBzZXBhcmF0b3IgdG8gaW5zZXJ0LCBkZWZhdWx0ZWQgdG8gYC1gXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc3RyLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKVxuICAgIC5yZXBsYWNlKG9wdGlvbnMucmVwbGFjZSB8fCAvW15hLXowLTldL2csICcgJylcbiAgICAucmVwbGFjZSgvXiArfCArJC9nLCAnJylcbiAgICAucmVwbGFjZSgvICsvZywgb3B0aW9ucy5zZXBhcmF0b3IgfHwgJy0nKVxufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBhZnRlciA9IHJlcXVpcmUoJ2FmdGVyJyk7XG52YXIgZG9taWZ5ID0gcmVxdWlyZSgnZG9taWZ5Jyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcbnZhciBFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpO1xuXG4vKipcbiAqIE1peGluIGVtaXR0ZXIuXG4gKi9cblxuRW1pdHRlcihleHBvcnRzKTtcblxuLyoqXG4gKiBBZGQgYSBuZXcgb3B0aW9uIHRvIHRoZSBpbnRlZ3JhdGlvbiBieSBga2V5YCB3aXRoIGRlZmF1bHQgYHZhbHVlYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICogQHJldHVybiB7SW50ZWdyYXRpb259XG4gKi9cblxuZXhwb3J0cy5vcHRpb24gPSBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgdGhpcy5wcm90b3R5cGUuZGVmYXVsdHNba2V5XSA9IHZhbHVlO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQWRkIGEgbmV3IG1hcHBpbmcgb3B0aW9uLlxuICpcbiAqIFRoaXMgd2lsbCBjcmVhdGUgYSBtZXRob2QgYG5hbWVgIHRoYXQgd2lsbCByZXR1cm4gYSBtYXBwaW5nXG4gKiBmb3IgeW91IHRvIHVzZS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgIEludGVncmF0aW9uKCdNeSBJbnRlZ3JhdGlvbicpXG4gKiAgICAgIC5tYXBwaW5nKCdldmVudHMnKTtcbiAqXG4gKiAgICBuZXcgTXlJbnRlZ3JhdGlvbigpLnRyYWNrKCdNeSBFdmVudCcpO1xuICpcbiAqICAgIC50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAqICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzKHRyYWNrLmV2ZW50KCkpO1xuICogICAgICBlYWNoKGV2ZW50cywgc2VuZCk7XG4gKiAgICAgfTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7SW50ZWdyYXRpb259XG4gKi9cblxuZXhwb3J0cy5tYXBwaW5nID0gZnVuY3Rpb24obmFtZSl7XG4gIHRoaXMub3B0aW9uKG5hbWUsIFtdKTtcbiAgdGhpcy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbihzdHIpe1xuICAgIHJldHVybiB0aGlzLm1hcCh0aGlzLm9wdGlvbnNbbmFtZV0sIHN0cik7XG4gIH07XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZWdpc3RlciBhIG5ldyBnbG9iYWwgdmFyaWFibGUgYGtleWAgb3duZWQgYnkgdGhlIGludGVncmF0aW9uLCB3aGljaCB3aWxsIGJlXG4gKiB1c2VkIHRvIHRlc3Qgd2hldGhlciB0aGUgaW50ZWdyYXRpb24gaXMgYWxyZWFkeSBvbiB0aGUgcGFnZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZ2xvYmFsXG4gKiBAcmV0dXJuIHtJbnRlZ3JhdGlvbn1cbiAqL1xuXG5leHBvcnRzLmdsb2JhbCA9IGZ1bmN0aW9uKGtleSl7XG4gIHRoaXMucHJvdG90eXBlLmdsb2JhbHMucHVzaChrZXkpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogTWFyayB0aGUgaW50ZWdyYXRpb24gYXMgYXNzdW1pbmcgYW4gaW5pdGlhbCBwYWdldmlldywgc28gdG8gZGVmZXIgbG9hZGluZ1xuICogdGhlIHNjcmlwdCB1bnRpbCB0aGUgZmlyc3QgYHBhZ2VgIGNhbGwsIG5vb3AgdGhlIGZpcnN0IGBpbml0aWFsaXplYC5cbiAqXG4gKiBAcmV0dXJuIHtJbnRlZ3JhdGlvbn1cbiAqL1xuXG5leHBvcnRzLmFzc3VtZXNQYWdldmlldyA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucHJvdG90eXBlLl9hc3N1bWVzUGFnZXZpZXcgPSB0cnVlO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogTWFyayB0aGUgaW50ZWdyYXRpb24gYXMgYmVpbmcgXCJyZWFkeVwiIG9uY2UgYGxvYWRgIGlzIGNhbGxlZC5cbiAqXG4gKiBAcmV0dXJuIHtJbnRlZ3JhdGlvbn1cbiAqL1xuXG5leHBvcnRzLnJlYWR5T25Mb2FkID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5wcm90b3R5cGUuX3JlYWR5T25Mb2FkID0gdHJ1ZTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIE1hcmsgdGhlIGludGVncmF0aW9uIGFzIGJlaW5nIFwicmVhZHlcIiBvbmNlIGBpbml0aWFsaXplYCBpcyBjYWxsZWQuXG4gKlxuICogQHJldHVybiB7SW50ZWdyYXRpb259XG4gKi9cblxuZXhwb3J0cy5yZWFkeU9uSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucHJvdG90eXBlLl9yZWFkeU9uSW5pdGlhbGl6ZSA9IHRydWU7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBEZWZpbmUgYSB0YWcgdG8gYmUgbG9hZGVkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgRE9NIHRhZyBhcyBzdHJpbmcgb3IgVVJMXG4gKiBAcmV0dXJuIHtJbnRlZ3JhdGlvbn1cbiAqL1xuXG5leHBvcnRzLnRhZyA9IGZ1bmN0aW9uKG5hbWUsIHN0cil7XG4gIGlmIChudWxsID09IHN0cikge1xuICAgIHN0ciA9IG5hbWU7XG4gICAgbmFtZSA9ICdsaWJyYXJ5JztcbiAgfVxuICB0aGlzLnByb3RvdHlwZS50ZW1wbGF0ZXNbbmFtZV0gPSBvYmplY3RpZnkoc3RyKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEdpdmVuIGEgc3RyaW5nLCBnaXZlIGJhY2sgRE9NIGF0dHJpYnV0ZXMuXG4gKlxuICogRG8gaXQgaW4gYSB3YXkgd2hlcmUgdGhlIGJyb3dzZXIgZG9lc24ndCBsb2FkIGltYWdlcyBvciBpZnJhbWVzLlxuICogSXQgdHVybnMgb3V0LCBkb21pZnkgd2lsbCBsb2FkIGltYWdlcy9pZnJhbWVzLCBiZWNhdXNlXG4gKiB3aGVuZXZlciB5b3UgY29uc3RydWN0IHRob3NlIERPTSBlbGVtZW50cyxcbiAqIHRoZSBicm93c2VyIGltbWVkaWF0ZWx5IGxvYWRzIHRoZW0uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIG9iamVjdGlmeShzdHIpIHtcbiAgLy8gcmVwbGFjZSBgc3JjYCB3aXRoIGBkYXRhLXNyY2AgdG8gcHJldmVudCBpbWFnZSBsb2FkaW5nXG4gIHN0ciA9IHN0ci5yZXBsYWNlKCcgc3JjPVwiJywgJyBkYXRhLXNyYz1cIicpO1xuXG4gIHZhciBlbCA9IGRvbWlmeShzdHIpO1xuICB2YXIgYXR0cnMgPSB7fTtcblxuICBlYWNoKGVsLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uKGF0dHIpe1xuICAgIC8vIHRoZW4gcmVwbGFjZSBpdCBiYWNrXG4gICAgdmFyIG5hbWUgPSAnZGF0YS1zcmMnID09IGF0dHIubmFtZSA/ICdzcmMnIDogYXR0ci5uYW1lO1xuICAgIGF0dHJzW25hbWVdID0gYXR0ci52YWx1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgYXR0cnM6IGF0dHJzXG4gIH07XG59XG4iLCJcbi8qKlxuICogRXhwb3NlIGBwYXJzZWAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZTtcblxuLyoqXG4gKiBUZXN0cyBmb3IgYnJvd3NlciBzdXBwb3J0LlxuICovXG5cbnZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbi8vIFNldHVwXG5kaXYuaW5uZXJIVE1MID0gJyAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9XCIvYVwiPmE8L2E+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiLz4nO1xuLy8gTWFrZSBzdXJlIHRoYXQgbGluayBlbGVtZW50cyBnZXQgc2VyaWFsaXplZCBjb3JyZWN0bHkgYnkgaW5uZXJIVE1MXG4vLyBUaGlzIHJlcXVpcmVzIGEgd3JhcHBlciBlbGVtZW50IGluIElFXG52YXIgaW5uZXJIVE1MQnVnID0gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGluaycpLmxlbmd0aDtcbmRpdiA9IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBXcmFwIG1hcCBmcm9tIGpxdWVyeS5cbiAqL1xuXG52YXIgbWFwID0ge1xuICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J10sXG4gIC8vIGZvciBzY3JpcHQvbGluay9zdHlsZSB0YWdzIHRvIHdvcmsgaW4gSUU2LTgsIHlvdSBoYXZlIHRvIHdyYXBcbiAgLy8gaW4gYSBkaXYgd2l0aCBhIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlciBpbiBmcm9udCwgaGEhXG4gIF9kZWZhdWx0OiBpbm5lckhUTUxCdWcgPyBbMSwgJ1g8ZGl2PicsICc8L2Rpdj4nXSA6IFswLCAnJywgJyddXG59O1xuXG5tYXAudGQgPVxubWFwLnRoID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cbm1hcC5vcHRpb24gPVxubWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cbm1hcC50aGVhZCA9XG5tYXAudGJvZHkgPVxubWFwLmNvbGdyb3VwID1cbm1hcC5jYXB0aW9uID1cbm1hcC50Zm9vdCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xuXG5tYXAudGV4dCA9XG5tYXAuY2lyY2xlID1cbm1hcC5lbGxpcHNlID1cbm1hcC5saW5lID1cbm1hcC5wYXRoID1cbm1hcC5wb2x5Z29uID1cbm1hcC5wb2x5bGluZSA9XG5tYXAucmVjdCA9IFsxLCAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmVyc2lvbj1cIjEuMVwiPicsJzwvc3ZnPiddO1xuXG4vKipcbiAqIFBhcnNlIGBodG1sYCBhbmQgcmV0dXJuIGEgRE9NIE5vZGUgaW5zdGFuY2UsIHdoaWNoIGNvdWxkIGJlIGEgVGV4dE5vZGUsXG4gKiBIVE1MIERPTSBOb2RlIG9mIHNvbWUga2luZCAoPGRpdj4gZm9yIGV4YW1wbGUpLCBvciBhIERvY3VtZW50RnJhZ21lbnRcbiAqIGluc3RhbmNlLCBkZXBlbmRpbmcgb24gdGhlIGNvbnRlbnRzIG9mIHRoZSBgaHRtbGAgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sIC0gSFRNTCBzdHJpbmcgdG8gXCJkb21pZnlcIlxuICogQHBhcmFtIHtEb2N1bWVudH0gZG9jIC0gVGhlIGBkb2N1bWVudGAgaW5zdGFuY2UgdG8gY3JlYXRlIHRoZSBOb2RlIGZvclxuICogQHJldHVybiB7RE9NTm9kZX0gdGhlIFRleHROb2RlLCBET00gTm9kZSwgb3IgRG9jdW1lbnRGcmFnbWVudCBpbnN0YW5jZVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2UoaHRtbCwgZG9jKSB7XG4gIGlmICgnc3RyaW5nJyAhPSB0eXBlb2YgaHRtbCkgdGhyb3cgbmV3IFR5cGVFcnJvcignU3RyaW5nIGV4cGVjdGVkJyk7XG5cbiAgLy8gZGVmYXVsdCB0byB0aGUgZ2xvYmFsIGBkb2N1bWVudGAgb2JqZWN0XG4gIGlmICghZG9jKSBkb2MgPSBkb2N1bWVudDtcblxuICAvLyB0YWcgbmFtZVxuICB2YXIgbSA9IC88KFtcXHc6XSspLy5leGVjKGh0bWwpO1xuICBpZiAoIW0pIHJldHVybiBkb2MuY3JlYXRlVGV4dE5vZGUoaHRtbCk7XG5cbiAgaHRtbCA9IGh0bWwucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpOyAvLyBSZW1vdmUgbGVhZGluZy90cmFpbGluZyB3aGl0ZXNwYWNlXG5cbiAgdmFyIHRhZyA9IG1bMV07XG5cbiAgLy8gYm9keSBzdXBwb3J0XG4gIGlmICh0YWcgPT0gJ2JvZHknKSB7XG4gICAgdmFyIGVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2h0bWwnKTtcbiAgICBlbC5pbm5lckhUTUwgPSBodG1sO1xuICAgIHJldHVybiBlbC5yZW1vdmVDaGlsZChlbC5sYXN0Q2hpbGQpO1xuICB9XG5cbiAgLy8gd3JhcCBtYXBcbiAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuX2RlZmF1bHQ7XG4gIHZhciBkZXB0aCA9IHdyYXBbMF07XG4gIHZhciBwcmVmaXggPSB3cmFwWzFdO1xuICB2YXIgc3VmZml4ID0gd3JhcFsyXTtcbiAgdmFyIGVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBlbC5pbm5lckhUTUwgPSBwcmVmaXggKyBodG1sICsgc3VmZml4O1xuICB3aGlsZSAoZGVwdGgtLSkgZWwgPSBlbC5sYXN0Q2hpbGQ7XG5cbiAgLy8gb25lIGVsZW1lbnRcbiAgaWYgKGVsLmZpcnN0Q2hpbGQgPT0gZWwubGFzdENoaWxkKSB7XG4gICAgcmV0dXJuIGVsLnJlbW92ZUNoaWxkKGVsLmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgLy8gc2V2ZXJhbCBlbGVtZW50c1xuICB2YXIgZnJhZ21lbnQgPSBkb2MuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB3aGlsZSAoZWwuZmlyc3RDaGlsZCkge1xuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGVsLnJlbW92ZUNoaWxkKGVsLmZpcnN0Q2hpbGQpKTtcbiAgfVxuXG4gIHJldHVybiBmcmFnbWVudDtcbn1cbiIsInZhciB0b1NwYWNlID0gcmVxdWlyZSgndG8tc3BhY2UtY2FzZScpO1xuXG5cbi8qKlxuICogRXhwb3NlIGB0b1NuYWtlQ2FzZWAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b1NuYWtlQ2FzZTtcblxuXG4vKipcbiAqIENvbnZlcnQgYSBgc3RyaW5nYCB0byBzbmFrZSBjYXNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5cbmZ1bmN0aW9uIHRvU25ha2VDYXNlIChzdHJpbmcpIHtcbiAgcmV0dXJuIHRvU3BhY2Uoc3RyaW5nKS5yZXBsYWNlKC9cXHMvZywgJ18nKTtcbn1cbiIsIlxudmFyIGNsZWFuID0gcmVxdWlyZSgndG8tbm8tY2FzZScpO1xuXG5cbi8qKlxuICogRXhwb3NlIGB0b1NwYWNlQ2FzZWAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b1NwYWNlQ2FzZTtcblxuXG4vKipcbiAqIENvbnZlcnQgYSBgc3RyaW5nYCB0byBzcGFjZSBjYXNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5cbmZ1bmN0aW9uIHRvU3BhY2VDYXNlIChzdHJpbmcpIHtcbiAgcmV0dXJuIGNsZWFuKHN0cmluZykucmVwbGFjZSgvW1xcV19dKygufCQpL2csIGZ1bmN0aW9uIChtYXRjaGVzLCBtYXRjaCkge1xuICAgIHJldHVybiBtYXRjaCA/ICcgJyArIG1hdGNoIDogJyc7XG4gIH0pO1xufSIsIlxuLyoqXG4gKiBFeHBvc2UgYHRvTm9DYXNlYC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRvTm9DYXNlO1xuXG5cbi8qKlxuICogVGVzdCB3aGV0aGVyIGEgc3RyaW5nIGlzIGNhbWVsLWNhc2UuXG4gKi9cblxudmFyIGhhc1NwYWNlID0gL1xccy87XG52YXIgaGFzQ2FtZWwgPSAvW2Etel1bQS1aXS87XG52YXIgaGFzU2VwYXJhdG9yID0gL1tcXFdfXS87XG5cblxuLyoqXG4gKiBSZW1vdmUgYW55IHN0YXJ0aW5nIGNhc2UgZnJvbSBhIGBzdHJpbmdgLCBsaWtlIGNhbWVsIG9yIHNuYWtlLCBidXQga2VlcFxuICogc3BhY2VzIGFuZCBwdW5jdHVhdGlvbiB0aGF0IG1heSBiZSBpbXBvcnRhbnQgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b05vQ2FzZSAoc3RyaW5nKSB7XG4gIGlmIChoYXNTcGFjZS50ZXN0KHN0cmluZykpIHJldHVybiBzdHJpbmcudG9Mb3dlckNhc2UoKTtcblxuICBpZiAoaGFzU2VwYXJhdG9yLnRlc3Qoc3RyaW5nKSkgc3RyaW5nID0gdW5zZXBhcmF0ZShzdHJpbmcpO1xuICBpZiAoaGFzQ2FtZWwudGVzdChzdHJpbmcpKSBzdHJpbmcgPSB1bmNhbWVsaXplKHN0cmluZyk7XG4gIHJldHVybiBzdHJpbmcudG9Mb3dlckNhc2UoKTtcbn1cblxuXG4vKipcbiAqIFNlcGFyYXRvciBzcGxpdHRlci5cbiAqL1xuXG52YXIgc2VwYXJhdG9yU3BsaXR0ZXIgPSAvW1xcV19dKygufCQpL2c7XG5cblxuLyoqXG4gKiBVbi1zZXBhcmF0ZSBhIGBzdHJpbmdgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB1bnNlcGFyYXRlIChzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHNlcGFyYXRvclNwbGl0dGVyLCBmdW5jdGlvbiAobSwgbmV4dCkge1xuICAgIHJldHVybiBuZXh0ID8gJyAnICsgbmV4dCA6ICcnO1xuICB9KTtcbn1cblxuXG4vKipcbiAqIENhbWVsY2FzZSBzcGxpdHRlci5cbiAqL1xuXG52YXIgY2FtZWxTcGxpdHRlciA9IC8oLikoW0EtWl0rKS9nO1xuXG5cbi8qKlxuICogVW4tY2FtZWxjYXNlIGEgYHN0cmluZ2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHVuY2FtZWxpemUgKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoY2FtZWxTcGxpdHRlciwgZnVuY3Rpb24gKG0sIHByZXZpb3VzLCB1cHBlcnMpIHtcbiAgICByZXR1cm4gcHJldmlvdXMgKyAnICcgKyB1cHBlcnMudG9Mb3dlckNhc2UoKS5zcGxpdCgnJykuam9pbignICcpO1xuICB9KTtcbn0iLCJcbi8qKlxuICogUHJvdG9jb2wuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXJsKSB7XG4gIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIGNhc2UgMDogcmV0dXJuIGNoZWNrKCk7XG4gICAgY2FzZSAxOiByZXR1cm4gdHJhbnNmb3JtKHVybCk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBUcmFuc2Zvcm0gYSBwcm90b2NvbC1yZWxhdGl2ZSBgdXJsYCB0byB0aGUgdXNlIHRoZSBwcm9wZXIgcHJvdG9jb2wuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHRyYW5zZm9ybSAodXJsKSB7XG4gIHJldHVybiBjaGVjaygpID8gJ2h0dHBzOicgKyB1cmwgOiAnaHR0cDonICsgdXJsO1xufVxuXG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBgaHR0cHM6YCBiZSB1c2VkIGZvciBsb2FkaW5nIHNjcmlwdHMuXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBjaGVjayAoKSB7XG4gIHJldHVybiAoXG4gICAgbG9jYXRpb24ucHJvdG9jb2wgPT0gJ2h0dHBzOicgfHxcbiAgICBsb2NhdGlvbi5wcm90b2NvbCA9PSAnY2hyb21lLWV4dGVuc2lvbjonXG4gICk7XG59IiwiXG52YXIgaXNFbXB0eSA9IHJlcXVpcmUoJ2lzLWVtcHR5Jyk7XG5cbnRyeSB7XG4gIHZhciB0eXBlT2YgPSByZXF1aXJlKCd0eXBlJyk7XG59IGNhdGNoIChlKSB7XG4gIHZhciB0eXBlT2YgPSByZXF1aXJlKCdjb21wb25lbnQtdHlwZScpO1xufVxuXG5cbi8qKlxuICogVHlwZXMuXG4gKi9cblxudmFyIHR5cGVzID0gW1xuICAnYXJndW1lbnRzJyxcbiAgJ2FycmF5JyxcbiAgJ2Jvb2xlYW4nLFxuICAnZGF0ZScsXG4gICdlbGVtZW50JyxcbiAgJ2Z1bmN0aW9uJyxcbiAgJ251bGwnLFxuICAnbnVtYmVyJyxcbiAgJ29iamVjdCcsXG4gICdyZWdleHAnLFxuICAnc3RyaW5nJyxcbiAgJ3VuZGVmaW5lZCdcbl07XG5cblxuLyoqXG4gKiBFeHBvc2UgdHlwZSBjaGVja2Vycy5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mb3IgKHZhciBpID0gMCwgdHlwZTsgdHlwZSA9IHR5cGVzW2ldOyBpKyspIGV4cG9ydHNbdHlwZV0gPSBnZW5lcmF0ZSh0eXBlKTtcblxuXG4vKipcbiAqIEFkZCBhbGlhcyBmb3IgYGZ1bmN0aW9uYCBmb3Igb2xkIGJyb3dzZXJzLlxuICovXG5cbmV4cG9ydHMuZm4gPSBleHBvcnRzWydmdW5jdGlvbiddO1xuXG5cbi8qKlxuICogRXhwb3NlIGBlbXB0eWAgY2hlY2suXG4gKi9cblxuZXhwb3J0cy5lbXB0eSA9IGlzRW1wdHk7XG5cblxuLyoqXG4gKiBFeHBvc2UgYG5hbmAgY2hlY2suXG4gKi9cblxuZXhwb3J0cy5uYW4gPSBmdW5jdGlvbiAodmFsKSB7XG4gIHJldHVybiBleHBvcnRzLm51bWJlcih2YWwpICYmIHZhbCAhPSB2YWw7XG59O1xuXG5cbi8qKlxuICogR2VuZXJhdGUgYSB0eXBlIGNoZWNrZXIuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGdlbmVyYXRlICh0eXBlKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZSA9PT0gdHlwZU9mKHZhbHVlKTtcbiAgfTtcbn0iLCJcbi8qKlxuICogRXhwb3NlIGBpc0VtcHR5YC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRW1wdHk7XG5cblxuLyoqXG4gKiBIYXMuXG4gKi9cblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cblxuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYSB2YWx1ZSBpcyBcImVtcHR5XCIuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gdmFsXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzRW1wdHkgKHZhbCkge1xuICBpZiAobnVsbCA9PSB2YWwpIHJldHVybiB0cnVlO1xuICBpZiAoJ251bWJlcicgPT0gdHlwZW9mIHZhbCkgcmV0dXJuIDAgPT09IHZhbDtcbiAgaWYgKHVuZGVmaW5lZCAhPT0gdmFsLmxlbmd0aCkgcmV0dXJuIDAgPT09IHZhbC5sZW5ndGg7XG4gIGZvciAodmFyIGtleSBpbiB2YWwpIGlmIChoYXMuY2FsbCh2YWwsIGtleSkpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgZG9taWZ5ID0gcmVxdWlyZSgnZG9taWZ5Jyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcblxuLyoqXG4gKiBIT1BcbiAqL1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBFeHBvc2UgYEFkV29yZHNgLlxuICovXG5cbnZhciBBZFdvcmRzID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQWRXb3JkcycpXG4gIC5vcHRpb24oJ2NvbnZlcnNpb25JZCcsICcnKVxuICAub3B0aW9uKCdyZW1hcmtldGluZycsIGZhbHNlKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vd3d3Lmdvb2dsZWFkc2VydmljZXMuY29tL3BhZ2VhZC9jb252ZXJzaW9uX2FzeW5jLmpzXCI+JylcbiAgLm1hcHBpbmcoJ2V2ZW50cycpO1xuXG4vKipcbiAqIExvYWQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQWRXb3Jkcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkLlxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkFkV29yZHMucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISBkb2N1bWVudC5ib2R5O1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHBzOi8vc3VwcG9ydC5nb29nbGUuY29tL2Fkd29yZHMvYW5zd2VyLzMxMTE5MjAjc3RhbmRhcmRfcGFyYW1ldGVyc1xuICogaHR0cHM6Ly9zdXBwb3J0Lmdvb2dsZS5jb20vYWR3b3Jkcy9hbnN3ZXIvMzEwMzM1N1xuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYWR3b3Jkcy1yZW1hcmtldGluZy10YWcvYXN5bmNocm9ub3VzL1xuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYWR3b3Jkcy1yZW1hcmtldGluZy10YWcvcGFyYW1ldGVyc1xuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbkFkV29yZHMucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHJlbWFya2V0aW5nID0gISF0aGlzLm9wdGlvbnMucmVtYXJrZXRpbmc7XG4gIHZhciBpZCA9IHRoaXMub3B0aW9ucy5jb252ZXJzaW9uSWQ7XG4gIHZhciBwcm9wcyA9IHt9O1xuICB3aW5kb3cuZ29vZ2xlX3RyYWNrQ29udmVyc2lvbih7XG4gICAgZ29vZ2xlX2NvbnZlcnNpb25faWQ6IGlkLFxuICAgIGdvb2dsZV9jdXN0b21fcGFyYW1zOiBwcm9wcyxcbiAgICBnb29nbGVfcmVtYXJrZXRpbmdfb25seTogcmVtYXJrZXRpbmdcbiAgfSk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkFkV29yZHMucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgaWQgPSB0aGlzLm9wdGlvbnMuY29udmVyc2lvbklkO1xuICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHModHJhY2suZXZlbnQoKSk7XG4gIHZhciByZXZlbnVlID0gdHJhY2sucmV2ZW51ZSgpIHx8IDA7XG4gIGVhY2goZXZlbnRzLCBmdW5jdGlvbihsYWJlbCl7XG4gICAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICAgIHdpbmRvdy5nb29nbGVfdHJhY2tDb252ZXJzaW9uKHtcbiAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2lkOiBpZCxcbiAgICAgIC8vIFRPRE9cbiAgICAgIC8vIGdvb2dsZV9jdXN0b21fcGFyYW1zOiBwcm9wcyxcbiAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2xhbmd1YWdlOiAnZW4nLFxuICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fZm9ybWF0OiAnMycsXG4gICAgICBnb29nbGVfY29udmVyc2lvbl9jb2xvcjogJ2ZmZmZmZicsXG4gICAgICBnb29nbGVfY29udmVyc2lvbl9sYWJlbDogbGFiZWwsXG4gICAgICBnb29nbGVfY29udmVyc2lvbl92YWx1ZTogcmV2ZW51ZSxcbiAgICAgIGdvb2dsZV9yZW1hcmtldGluZ19vbmx5OiBmYWxzZVxuICAgIH0pO1xuICB9KTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcblxuLyoqXG4gKiBFeHBvc2UgQWxleGEgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEFsZXhhID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQWxleGEnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2F0cmtfb3B0cycpXG4gIC5vcHRpb24oJ2FjY291bnQnLCBudWxsKVxuICAub3B0aW9uKCdkb21haW4nLCAnJylcbiAgLm9wdGlvbignZHluYW1pYycsIHRydWUpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9kMzFxYnYxY3RoY2Vjcy5jbG91ZGZyb250Lm5ldC9hdHJrLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkFsZXhhLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgd2luZG93Ll9hdHJrX29wdHMgPSB7XG4gICAgYXRya19hY2N0OiB0aGlzLm9wdGlvbnMuYWNjb3VudCxcbiAgICBkb21haW46IHRoaXMub3B0aW9ucy5kb21haW4sXG4gICAgZHluYW1pYzogdGhpcy5vcHRpb25zLmR5bmFtaWNcbiAgfTtcbiAgdGhpcy5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgd2luZG93LmF0cmsoKTtcbiAgICBzZWxmLnJlYWR5KCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5BbGV4YS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhIHdpbmRvdy5hdHJrO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xuXG4vKipcbiAqIEV4cG9zZSBgQW1wbGl0dWRlYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQW1wbGl0dWRlID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQW1wbGl0dWRlJylcbiAgLmdsb2JhbCgnYW1wbGl0dWRlJylcbiAgLm9wdGlvbignYXBpS2V5JywgJycpXG4gIC5vcHRpb24oJ3RyYWNrQWxsUGFnZXMnLCBmYWxzZSlcbiAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSlcbiAgLm9wdGlvbigndHJhY2tDYXRlZ29yaXplZFBhZ2VzJywgdHJ1ZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCJodHRwczovL2QyNG4xNWhuYndodWhuLmNsb3VkZnJvbnQubmV0L2xpYnMvYW1wbGl0dWRlLTEuMy1taW4uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbXBsaXR1ZGUvQW1wbGl0dWRlLUphdmFzY3JpcHRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkFtcGxpdHVkZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICAoZnVuY3Rpb24oaCxhKXt2YXIgZj1oLmFtcGxpdHVkZXx8e307Zi5fcT1bXTtmdW5jdGlvbiBlKGkpe2ZbaV09ZnVuY3Rpb24oKXtmLl9xLnB1c2goW2ldLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpKX19dmFyIGM9W1wiaW5pdFwiLFwibG9nRXZlbnRcIixcInNldFVzZXJJZFwiLFwic2V0VXNlclByb3BlcnRpZXNcIixcInNldFZlcnNpb25OYW1lXCIsXCJzZXREb21haW5cIixcInNldEdsb2JhbFVzZXJQcm9wZXJ0aWVzXCJdO2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXtlKGNbZF0pfWguYW1wbGl0dWRlPWZ9KSh3aW5kb3csZG9jdW1lbnQpO1xuICB3aW5kb3cuYW1wbGl0dWRlLmluaXQodGhpcy5vcHRpb25zLmFwaUtleSk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuQW1wbGl0dWRlLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5hbXBsaXR1ZGUgJiYgd2luZG93LmFtcGxpdHVkZS5vcHRpb25zKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5BbXBsaXR1ZGUucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHByb3BlcnRpZXMgPSBwYWdlLnByb3BlcnRpZXMoKTtcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcbiAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgLy8gYWxsIHBhZ2VzXG4gIGlmIChvcHRzLnRyYWNrQWxsUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2soKSk7XG4gIH1cblxuICAvLyBjYXRlZ29yaXplZCBwYWdlc1xuICBpZiAoY2F0ZWdvcnkgJiYgb3B0cy50cmFja0NhdGVnb3JpemVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2soY2F0ZWdvcnkpKTtcbiAgfVxuXG4gIC8vIG5hbWVkIHBhZ2VzXG4gIGlmIChuYW1lICYmIG9wdHMudHJhY2tOYW1lZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKG5hbWUpKTtcbiAgfVxufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0ZhY2FkZX0gaWRlbnRpZnlcbiAqL1xuXG5BbXBsaXR1ZGUucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICBpZiAoaWQpIHdpbmRvdy5hbXBsaXR1ZGUuc2V0VXNlcklkKGlkKTtcbiAgaWYgKHRyYWl0cykgd2luZG93LmFtcGxpdHVkZS5zZXRHbG9iYWxVc2VyUHJvcGVydGllcyh0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSBldmVudFxuICovXG5cbkFtcGxpdHVkZS5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgdmFyIGV2ZW50ID0gdHJhY2suZXZlbnQoKTtcbiAgd2luZG93LmFtcGxpdHVkZS5sb2dFdmVudChldmVudCwgcHJvcHMpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGxvYWQgPSByZXF1aXJlKCdsb2FkLXNjcmlwdCcpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgcGx1Z2luLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGZ1bmN0aW9uIChhbmFseXRpY3MpIHtcbiAgYW5hbHl0aWNzLmFkZEludGVncmF0aW9uKEFwcGN1ZXMpO1xufTtcblxuLyoqXG4gKiBFeHBvc2UgYEFwcGN1ZXNgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBBcHBjdWVzID0gZXhwb3J0cy5JbnRlZ3JhdGlvbiA9IGludGVncmF0aW9uKCdBcHBjdWVzJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ0FwcGN1ZXMnKVxuICAuZ2xvYmFsKCdBcHBjdWVzSWRlbnRpdHknKVxuICAub3B0aW9uKCdhcHBjdWVzSWQnLCAnJylcbiAgLm9wdGlvbigndXNlcklkJywgJycpXG4gIC5vcHRpb24oJ3VzZXJFbWFpbCcsICcnKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9hcHBjdWVzLmNvbS9kb2NzL1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fVxuICovXG5cbkFwcGN1ZXMucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICB0aGlzLmxvYWQoZnVuY3Rpb24oKSB7XG4gICAgd2luZG93LkFwcGN1ZXMuaW5pdCgpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuQXBwY3Vlcy5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGlzLm9iamVjdCh3aW5kb3cuQXBwY3Vlcyk7XG59O1xuXG4vKipcbiAqIExvYWQgdGhlIEFwcGN1ZXMgbGlicmFyeS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICovXG5cbkFwcGN1ZXMucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbihjYWxsYmFjayl7XG4gIHZhciBzY3JpcHQgPSBsb2FkKCcvL2QyZHViZnE5N3MwMmV1LmNsb3VkZnJvbnQubmV0L2FwcGN1ZXMtYnVuZGxlLm1pbi5qcycsIGNhbGxiYWNrKTtcbiAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnZGF0YS1hcHBjdWVzLWlkJywgdGhpcy5vcHRpb25zLmFwcGN1ZXNJZCk7XG4gIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdXNlci1pZCcsIHRoaXMub3B0aW9ucy51c2VySWQpO1xuICBzY3JpcHQuc2V0QXR0cmlidXRlKCdkYXRhLXVzZXItZW1haWwnLCB0aGlzLm9wdGlvbnMudXNlckVtYWlsKTtcbn07XG5cblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBodHRwOi8vYXBwY3Vlcy5jb20vZG9jcyNpZGVudGlmeVxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuQXBwY3Vlcy5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHdpbmRvdy5BcHBjdWVzLmlkZW50aWZ5KGlkZW50aWZ5LnRyYWl0cygpKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgb25sb2FkID0gcmVxdWlyZSgnc2NyaXB0LW9ubG9hZCcpO1xudmFyIHRpY2sgPSByZXF1aXJlKCduZXh0LXRpY2snKTtcbnZhciB0eXBlID0gcmVxdWlyZSgndHlwZScpO1xuXG4vKipcbiAqIEV4cG9zZSBgbG9hZFNjcmlwdGAuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbG9hZFNjcmlwdChvcHRpb25zLCBmbil7XG4gIGlmICghb3B0aW9ucykgdGhyb3cgbmV3IEVycm9yKCdDYW50IGxvYWQgbm90aGluZy4uLicpO1xuXG4gIC8vIEFsbG93IGZvciB0aGUgc2ltcGxlc3QgY2FzZSwganVzdCBwYXNzaW5nIGEgYHNyY2Agc3RyaW5nLlxuICBpZiAoJ3N0cmluZycgPT0gdHlwZShvcHRpb25zKSkgb3B0aW9ucyA9IHsgc3JjIDogb3B0aW9ucyB9O1xuXG4gIHZhciBodHRwcyA9IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyB8fFxuICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2Nocm9tZS1leHRlbnNpb246JztcblxuICAvLyBJZiB5b3UgdXNlIHByb3RvY29sIHJlbGF0aXZlIFVSTHMsIHRoaXJkLXBhcnR5IHNjcmlwdHMgbGlrZSBHb29nbGVcbiAgLy8gQW5hbHl0aWNzIGJyZWFrIHdoZW4gdGVzdGluZyB3aXRoIGBmaWxlOmAgc28gdGhpcyBmaXhlcyB0aGF0LlxuICBpZiAob3B0aW9ucy5zcmMgJiYgb3B0aW9ucy5zcmMuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuICAgIG9wdGlvbnMuc3JjID0gaHR0cHMgPyAnaHR0cHM6JyArIG9wdGlvbnMuc3JjIDogJ2h0dHA6JyArIG9wdGlvbnMuc3JjO1xuICB9XG5cbiAgLy8gQWxsb3cgdGhlbSB0byBwYXNzIGluIGRpZmZlcmVudCBVUkxzIGRlcGVuZGluZyBvbiB0aGUgcHJvdG9jb2wuXG4gIGlmIChodHRwcyAmJiBvcHRpb25zLmh0dHBzKSBvcHRpb25zLnNyYyA9IG9wdGlvbnMuaHR0cHM7XG4gIGVsc2UgaWYgKCFodHRwcyAmJiBvcHRpb25zLmh0dHApIG9wdGlvbnMuc3JjID0gb3B0aW9ucy5odHRwO1xuXG4gIC8vIE1ha2UgdGhlIGA8c2NyaXB0PmAgZWxlbWVudCBhbmQgaW5zZXJ0IGl0IGJlZm9yZSB0aGUgZmlyc3Qgc2NyaXB0IG9uIHRoZVxuICAvLyBwYWdlLCB3aGljaCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0IHNpbmNlIHRoaXMgSmF2YXNjcmlwdCBpcyBydW5uaW5nLlxuICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gIHNjcmlwdC5zcmMgPSBvcHRpb25zLnNyYztcblxuICAvLyBJZiB3ZSBoYXZlIGEgZm4sIGF0dGFjaCBldmVudCBoYW5kbGVycywgZXZlbiBpbiBJRS4gQmFzZWQgb2ZmIG9mXG4gIC8vIHRoZSBUaGlyZC1QYXJ0eSBKYXZhc2NyaXB0IHNjcmlwdCBsb2FkaW5nIGV4YW1wbGU6XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90aGlyZHBhcnR5anMvdGhpcmRwYXJ0eWpzLWNvZGUvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvdGVtcGxhdGVzLzAyL2xvYWRpbmctZmlsZXMvaW5kZXguaHRtbFxuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlKGZuKSkge1xuICAgIG9ubG9hZChzY3JpcHQsIGZuKTtcbiAgfVxuXG4gIHRpY2soZnVuY3Rpb24oKXtcbiAgICAvLyBBcHBlbmQgYWZ0ZXIgZXZlbnQgbGlzdGVuZXJzIGFyZSBhdHRhY2hlZCBmb3IgSUUuXG4gICAgdmFyIGZpcnN0U2NyaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICAgIGZpcnN0U2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgZmlyc3RTY3JpcHQpO1xuICB9KTtcblxuICAvLyBSZXR1cm4gdGhlIHNjcmlwdCBlbGVtZW50IGluIGNhc2UgdGhleSB3YW50IHRvIGRvIGFueXRoaW5nIHNwZWNpYWwsIGxpa2VcbiAgLy8gZ2l2ZSBpdCBhbiBJRCBvciBhdHRyaWJ1dGVzLlxuICByZXR1cm4gc2NyaXB0O1xufTsiLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xuXG4vKipcbiAqIEV4cG9zZSBgQXdlc21gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBBd2VzbSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ2F3ZS5zbScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdBV0VTTScpXG4gIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vd2lkZ2V0cy5hd2Uuc20vdjMvd2lkZ2V0cy5qcz9rZXk9e3sgYXBpS2V5IH19JmFzeW5jPXRydWVcIj4nKVxuICAubWFwcGluZygnZXZlbnRzJyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vZGV2ZWxvcGVycy5hd2Uuc20vZ3VpZGVzL2phdmFzY3JpcHQvXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Bd2VzbS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuQVdFU00gPSB7IGFwaV9rZXk6IHRoaXMub3B0aW9ucy5hcGlLZXkgfTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Bd2VzbS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuQVdFU00gJiYgd2luZG93LkFXRVNNLl9leGlzdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkF3ZXNtLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG4gIHZhciBnb2FscyA9IHRoaXMuZXZlbnRzKHRyYWNrLmV2ZW50KCkpO1xuICBlYWNoKGdvYWxzLCBmdW5jdGlvbihnb2FsKXtcbiAgICB3aW5kb3cuQVdFU00uY29udmVydChnb2FsLCB0cmFjay5jZW50cygpLCBudWxsLCB1c2VyLmlkKCkpO1xuICB9KTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG52YXIgbm9vcCA9IGZ1bmN0aW9uKCl7fTtcbnZhciBvbkJvZHkgPSByZXF1aXJlKCdvbi1ib2R5Jyk7XG5cbi8qKlxuICogRXhwb3NlIGBBd2Vzb21hdGljYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQXdlc29tYXRpYyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0F3ZXNvbWF0aWMnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnQXdlc29tYXRpYycpXG4gIC5nbG9iYWwoJ0F3ZXNvbWF0aWNTZXR0aW5ncycpXG4gIC5nbG9iYWwoJ0F3c21TZXR1cCcpXG4gIC5nbG9iYWwoJ0F3c21UbXAnKVxuICAub3B0aW9uKCdhcHBJZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cImh0dHBzOi8vMWM4MTdiN2ExNWI2OTQxMzM3YzAtZGZmOWI1ZjRhZGI3YmEyODI1OTYzMWU5OWMzZjM2OTEuc3NsLmNmMi5yYWNrY2RuLmNvbS9nZW4vZW1iZWQuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuQXdlc29tYXRpYy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB1c2VyID0gdGhpcy5hbmFseXRpY3MudXNlcigpO1xuICB2YXIgaWQgPSB1c2VyLmlkKCk7XG4gIHZhciBvcHRpb25zID0gdXNlci50cmFpdHMoKTtcblxuICBvcHRpb25zLmFwcElkID0gdGhpcy5vcHRpb25zLmFwcElkO1xuICBpZiAoaWQpIG9wdGlvbnMudXNlcl9pZCA9IGlkO1xuXG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIHdpbmRvdy5Bd2Vzb21hdGljLmluaXRpYWxpemUob3B0aW9ucywgZnVuY3Rpb24oKXtcbiAgICAgIHNlbGYucmVhZHkoKTsgLy8gbmVlZCB0byB3YWl0IGZvciBpbml0aWFsaXplIHRvIGNhbGxiYWNrXG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Bd2Vzb21hdGljLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMub2JqZWN0KHdpbmRvdy5Bd2Vzb21hdGljKTtcbn07XG4iLCJ2YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcblxuXG4vKipcbiAqIENhY2hlIHdoZXRoZXIgYDxib2R5PmAgZXhpc3RzLlxuICovXG5cbnZhciBib2R5ID0gZmFsc2U7XG5cblxuLyoqXG4gKiBDYWxsYmFja3MgdG8gY2FsbCB3aGVuIHRoZSBib2R5IGV4aXN0cy5cbiAqL1xuXG52YXIgY2FsbGJhY2tzID0gW107XG5cblxuLyoqXG4gKiBFeHBvcnQgYSB3YXkgdG8gYWRkIGhhbmRsZXJzIHRvIGJlIGludm9rZWQgb25jZSB0aGUgYm9keSBleGlzdHMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgIEEgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBib2R5IGV4aXN0cy5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG9uQm9keSAoY2FsbGJhY2spIHtcbiAgaWYgKGJvZHkpIHtcbiAgICBjYWxsKGNhbGxiYWNrKTtcbiAgfSBlbHNlIHtcbiAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBTZXQgYW4gaW50ZXJ2YWwgdG8gY2hlY2sgZm9yIGBkb2N1bWVudC5ib2R5YC5cbiAqL1xuXG52YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gIGlmICghZG9jdW1lbnQuYm9keSkgcmV0dXJuO1xuICBib2R5ID0gdHJ1ZTtcbiAgZWFjaChjYWxsYmFja3MsIGNhbGwpO1xuICBjbGVhckludGVydmFsKGludGVydmFsKTtcbn0sIDUpO1xuXG5cbi8qKlxuICogQ2FsbCBhIGNhbGxiYWNrLCBwYXNzaW5nIGl0IHRoZSBib2R5LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrICBUaGUgY2FsbGJhY2sgdG8gY2FsbC5cbiAqL1xuXG5mdW5jdGlvbiBjYWxsIChjYWxsYmFjaykge1xuICBjYWxsYmFjayhkb2N1bWVudC5ib2R5KTtcbn0iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBvbmJvZHkgPSByZXF1aXJlKCdvbi1ib2R5Jyk7XG52YXIgZG9taWZ5ID0gcmVxdWlyZSgnZG9taWZ5Jyk7XG52YXIgZXh0ZW5kID0gcmVxdWlyZSgnZXh0ZW5kJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJ2JpbmQnKTtcbnZhciB3aGVuID0gcmVxdWlyZSgnd2hlbicpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbi8qKlxuICogSE9QLlxuICovXG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIE5vb3AuXG4gKi9cblxudmFyIG5vb3AgPSBmdW5jdGlvbigpe307XG5cbi8qKlxuICogRXhwb3NlIGBCaW5nYC5cbiAqXG4gKiBodHRwczovL2JpbmdhZHMubWljcm9zb2Z0LmNvbS9jYW1wYWlnbi9zaWdudXBcbiAqL1xuXG52YXIgQmluZyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0JpbmcgQWRzJylcbiAgLm9wdGlvbignc2l0ZUlkJywgJycpXG4gIC5vcHRpb24oJ2RvbWFpbklkJywgJycpXG4gIC50YWcoJzxzY3JpcHQgaWQ9XCJtc3RhZ190b3BzXCIgc3JjPVwiLy9mbGV4Lm1zbi5jb20vbXN0YWcvc2l0ZS97eyBzaXRlSWQgfX0vbXN0YWcuanNcIj4nKVxuICAubWFwcGluZygnZXZlbnRzJyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvYmluZy1hZHMtY2FtcGFpZ24tbWFuYWdlbWVudC1jYW1wYWlnbi1hbmFseXRpY3Mtc2NyaXB0cy5hc3B4XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5CaW5nLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIGlmICghd2luZG93Lm1zdGFnKSB7XG4gICAgd2luZG93Lm1zdGFnID0ge1xuICAgICAgbG9hZFRhZzogbm9vcCxcbiAgICAgIHRpbWU6IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCksXG4gICAgICAvLyB0aGV5IHVzZSBkb2N1bWVudC53cml0ZSwgd2hpY2ggZG9lc24ndCB3b3JrIHdoZW4gbG9hZGVkIGFzeW5jLlxuICAgICAgLy8gdGhleSBwcm92aWRlIGEgd2F5IHRvIG92ZXJyaWRlIGl0LlxuICAgICAgLy8gdGhlIGZpcnN0IHRpbWUgaXQgaXMgY2FsbGVkLCBsb2FkIHRoZSBzY3JpcHQsXG4gICAgICAvLyBhbmQgb25seSB3aGVuIHRoYXQgc2NyaXB0IGlzIGRvbmUsIGlzIFwibG9hZGluZ1wiIGRvbmUuXG4gICAgICBfd3JpdGU6IHdyaXRlVG9BcHBlbmRcbiAgICB9O1xuICB9O1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIG9uYm9keShmdW5jdGlvbigpe1xuICAgIHNlbGYubG9hZChmdW5jdGlvbigpe1xuICAgICAgdmFyIGxvYWRlZCA9IGJpbmQoc2VsZiwgc2VsZi5sb2FkZWQpO1xuXG4gICAgICAvLyBwb2xsIHVudGlsIHRoaXMubG9hZGVkKCkgaXMgdHJ1ZS5cbiAgICAgIC8vIGhhdmUgdG8gZG8gYSB3ZWlyZCBoYWNrIGxpa2UgdGhpcyBiZWNhdXNlXG4gICAgICAvLyB0aGUgZmlyc3Qgc2NyaXB0IGxvYWRzIGEgc2Vjb25kIHNjcmlwdCxcbiAgICAgIC8vIGFuZCBvbmx5IGFmdGVyIHRoZSBzZWNvbmQgc2NyaXB0IGlzIGl0IGFjdHVhbGx5IGxvYWRlZC5cbiAgICAgIHdoZW4obG9hZGVkLCBzZWxmLnJlYWR5KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkJpbmcucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Lm1zdGFnICYmIHdpbmRvdy5tc3RhZy5sb2FkVGFnICE9PSBub29wKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5CaW5nLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzKHRyYWNrLmV2ZW50KCkpO1xuICB2YXIgcmV2ZW51ZSA9IHRyYWNrLnJldmVudWUoKSB8fCAwO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGVhY2goZXZlbnRzLCBmdW5jdGlvbihnb2FsKXtcbiAgICB3aW5kb3cubXN0YWcubG9hZFRhZygnYW5hbHl0aWNzJywge1xuICAgICAgZG9tYWluSWQ6IHNlbGYub3B0aW9ucy5kb21haW5JZCxcbiAgICAgIHJldmVudWU6IHJldmVudWUsXG4gICAgICBkZWR1cDogJzEnLFxuICAgICAgdHlwZTogJzEnLFxuICAgICAgYWN0aW9uaWQ6IGdvYWxcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgYGRvY3VtZW50LndyaXRlYCB0byBgZG9jdW1lbnQuYXBwZW5kQ2hpbGRgLlxuICpcbiAqIFRPRE86IG1ha2UgaW50byBhIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cblxuZnVuY3Rpb24gd3JpdGVUb0FwcGVuZChzdHIpIHtcbiAgdmFyIGZpcnN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICB2YXIgZWwgPSBkb21pZnkoc3RyKTtcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NvbXBvbmVudC9kb21pZnkvaXNzdWVzLzE0XG4gIGlmICgnc2NyaXB0JyA9PSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgJiYgZWwuZ2V0QXR0cmlidXRlKCdzcmMnKSkge1xuICAgIHZhciB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICB0bXAuc3JjID0gZWwuZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgICB0bXAuYXN5bmMgPSB0cnVlO1xuICAgIGVsID0gdG1wO1xuICB9XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xufVxuIiwiXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGV4dGVuZCAob2JqZWN0KSB7XG4gICAgLy8gVGFrZXMgYW4gdW5saW1pdGVkIG51bWJlciBvZiBleHRlbmRlcnMuXG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gICAgLy8gRm9yIGVhY2ggZXh0ZW5kZXIsIGNvcHkgdGhlaXIgcHJvcGVydGllcyBvbiBvdXIgb2JqZWN0LlxuICAgIGZvciAodmFyIGkgPSAwLCBzb3VyY2U7IHNvdXJjZSA9IGFyZ3NbaV07IGkrKykge1xuICAgICAgICBpZiAoIXNvdXJjZSkgY29udGludWU7XG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgb2JqZWN0W3Byb3BlcnR5XSA9IHNvdXJjZVtwcm9wZXJ0eV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufTsiLCJcbnZhciBjYWxsYmFjayA9IHJlcXVpcmUoJ2NhbGxiYWNrJyk7XG5cblxuLyoqXG4gKiBFeHBvc2UgYHdoZW5gLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gd2hlbjtcblxuXG4vKipcbiAqIExvb3Agb24gYSBzaG9ydCBpbnRlcnZhbCB1bnRpbCBgY29uZGl0aW9uKClgIGlzIHRydWUsIHRoZW4gY2FsbCBgZm5gLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7TnVtYmVyfSBpbnRlcnZhbCAob3B0aW9uYWwpXG4gKi9cblxuZnVuY3Rpb24gd2hlbiAoY29uZGl0aW9uLCBmbiwgaW50ZXJ2YWwpIHtcbiAgaWYgKGNvbmRpdGlvbigpKSByZXR1cm4gY2FsbGJhY2suYXN5bmMoZm4pO1xuXG4gIHZhciByZWYgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFjb25kaXRpb24oKSkgcmV0dXJuO1xuICAgIGNhbGxiYWNrKGZuKTtcbiAgICBjbGVhckludGVydmFsKHJlZik7XG4gIH0sIGludGVydmFsIHx8IDEwKTtcbn0iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBJZGVudGlmeSA9IHJlcXVpcmUoJ2ZhY2FkZScpLklkZW50aWZ5O1xudmFyIFRyYWNrID0gcmVxdWlyZSgnZmFjYWRlJykuVHJhY2s7XG52YXIgcGl4ZWwgPSByZXF1aXJlKCdsb2FkLXBpeGVsJykoJ2h0dHA6Ly9hcHAuYnJvbnRvLmNvbS9wdWJsaWMvJyk7XG52YXIgcXMgPSByZXF1aXJlKCdxdWVyeXN0cmluZycpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbi8qKlxuICogRXhwb3NlIGBCcm9udG9gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBCcm9udG8gPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdCcm9udG8nKVxuICAuZ2xvYmFsKCdfX2J0YScpXG4gIC5vcHRpb24oJ3NpdGVJZCcsICcnKVxuICAub3B0aW9uKCdob3N0JywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9wLmJtMjMuY29tL2J0YS5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL2FwcC5icm9udG8uY29tL21haWwvaGVscC9oZWxwX3ZpZXcvP2s9bWFpbDpob21lOmFwaV90cmFja2luZzp0cmFja2luZ19kYXRhX3N0b3JlX2pzI2FkZGluZ2phdmFzY3JpcHRjb252ZXJzaW9udHJhY2tpbmd0b3lvdXJzaXRlXG4gKiBodHRwOi8vYnJvbnRvLmNvbS9wcm9kdWN0LWJsb2cvZmVhdHVyZXMvdXNpbmctY29udmVyc2lvbi10cmFja2luZy1wcml2YXRlLWRvbWFpbiMuVXRfVmsyVDhLcUJcbiAqIGh0dHA6Ly9icm9udG8uY29tL3Byb2R1Y3QtYmxvZy9mZWF0dXJlcy9qYXZhc2NyaXB0LWNvbnZlcnNpb24tdHJhY2tpbmctc2V0dXAtYW5kLXJlcG9ydGluZyMuVXRfVmhtVDhLcUJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkJyb250by5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBwYXJhbXMgPSBxcy5wYXJzZSh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgaWYgKCFwYXJhbXMuX2J0YV90aWQgJiYgIXBhcmFtcy5fYnRhX2MpIHtcbiAgICB0aGlzLmRlYnVnKCdtaXNzaW5nIHRyYWNraW5nIFVSTCBwYXJhbWV0ZXJzIGBfYnRhX3RpZGAgYW5kIGBfYnRhX2NgLicpO1xuICB9XG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIHZhciBvcHRzID0gc2VsZi5vcHRpb25zO1xuICAgIHNlbGYuYnRhID0gbmV3IHdpbmRvdy5fX2J0YShvcHRzLnNpdGVJZCk7XG4gICAgaWYgKG9wdHMuaG9zdCkgc2VsZi5idGEuc2V0SG9zdChvcHRzLmhvc3QpO1xuICAgIHNlbGYucmVhZHkoKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkJyb250by5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMuYnRhO1xufTtcblxuLyoqXG4gKiBDb21wbGV0ZWQgb3JkZXIuXG4gKlxuICogVGhlIGNvb2tpZSBpcyB1c2VkIHRvIGxpbmsgdGhlIG9yZGVyIGJlaW5nIHByb2Nlc3NlZCBiYWNrIHRvIHRoZSBkZWxpdmVyeSxcbiAqIG1lc3NhZ2UsIGFuZCBjb250YWN0IHdoaWNoIG1ha2VzIGl0IGEgY29udmVyc2lvbi5cbiAqIFBhc3NpbmcgaW4ganVzdCB0aGUgZW1haWwgZW5zdXJlcyB0aGF0IHRoZSBvcmRlciBpdHNlbGZcbiAqIGdldHMgbGlua2VkIHRvIHRoZSBjb250YWN0IHJlY29yZCBpbiBCcm9udG8gZXZlbiBpZiB0aGUgdXNlclxuICogZG9lcyBub3QgaGF2ZSBhIHRyYWNraW5nIGNvb2tpZS5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuQnJvbnRvLnByb3RvdHlwZS5jb21wbGV0ZWRPcmRlciA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG4gIHZhciBwcm9kdWN0cyA9IHRyYWNrLnByb2R1Y3RzKCk7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgdmFyIGl0ZW1zID0gW107XG4gIHZhciBpZGVudGlmeSA9IG5ldyBJZGVudGlmeSh7XG4gICAgdXNlcklkOiB1c2VyLmlkKCksXG4gICAgdHJhaXRzOiB1c2VyLnRyYWl0cygpXG4gIH0pO1xuICB2YXIgZW1haWwgPSBpZGVudGlmeS5lbWFpbCgpO1xuXG4gIC8vIGl0ZW1zXG4gIGVhY2gocHJvZHVjdHMsIGZ1bmN0aW9uKHByb2R1Y3Qpe1xuICAgIHZhciB0cmFjayA9IG5ldyBUcmFjayh7IHByb3BlcnRpZXM6IHByb2R1Y3QgfSk7XG4gICAgaXRlbXMucHVzaCh7XG4gICAgICBpdGVtX2lkOiB0cmFjay5pZCgpIHx8IHRyYWNrLnNrdSgpLFxuICAgICAgZGVzYzogcHJvZHVjdC5kZXNjcmlwdGlvbiB8fCB0cmFjay5uYW1lKCksXG4gICAgICBxdWFudGl0eTogdHJhY2sucXVhbnRpdHkoKSxcbiAgICAgIGFtb3VudDogdHJhY2sucHJpY2UoKSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gYWRkIGNvbnZlcnNpb25cbiAgdGhpcy5idGEuYWRkT3JkZXIoe1xuICAgIG9yZGVyX2lkOiB0cmFjay5vcmRlcklkKCksXG4gICAgZW1haWw6IGVtYWlsLFxuICAgIC8vIHRoZXkgcmVjb21tZW5kIG5vdCBwdXR0aW5nIGluIGEgZGF0ZVxuICAgIC8vIGJlY2F1c2UgaXQgbmVlZHMgdG8gYmUgZm9ybWF0dGVkIGNvcnJlY3RseVxuICAgIC8vIFlZWVktTU0tRERUSEg6TU06U1NcbiAgICBpdGVtczogaXRlbXNcbiAgfSk7XG59O1xuIiwiXG52YXIgRmFjYWRlID0gcmVxdWlyZSgnLi9mYWNhZGUnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEZhY2FkZWAgZmFjYWRlLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gRmFjYWRlO1xuXG4vKipcbiAqIEV4cG9zZSBzcGVjaWZpYy1tZXRob2QgZmFjYWRlcy5cbiAqL1xuXG5GYWNhZGUuQWxpYXMgPSByZXF1aXJlKCcuL2FsaWFzJyk7XG5GYWNhZGUuR3JvdXAgPSByZXF1aXJlKCcuL2dyb3VwJyk7XG5GYWNhZGUuSWRlbnRpZnkgPSByZXF1aXJlKCcuL2lkZW50aWZ5Jyk7XG5GYWNhZGUuVHJhY2sgPSByZXF1aXJlKCcuL3RyYWNrJyk7XG5GYWNhZGUuUGFnZSA9IHJlcXVpcmUoJy4vcGFnZScpO1xuRmFjYWRlLlNjcmVlbiA9IHJlcXVpcmUoJy4vc2NyZWVuJyk7XG4iLCJcbnZhciB0cmF2ZXJzZSA9IHJlcXVpcmUoJ2lzb2RhdGUtdHJhdmVyc2UnKTtcbnZhciBpc0VuYWJsZWQgPSByZXF1aXJlKCcuL2lzLWVuYWJsZWQnKTtcbnZhciBjbG9uZSA9IHJlcXVpcmUoJy4vdXRpbHMnKS5jbG9uZTtcbnZhciB0eXBlID0gcmVxdWlyZSgnLi91dGlscycpLnR5cGU7XG52YXIgYWRkcmVzcyA9IHJlcXVpcmUoJy4vYWRkcmVzcycpO1xudmFyIG9iakNhc2UgPSByZXF1aXJlKCdvYmotY2FzZScpO1xudmFyIG5ld0RhdGUgPSByZXF1aXJlKCduZXctZGF0ZScpO1xuXG4vKipcbiAqIEV4cG9zZSBgRmFjYWRlYC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZhY2FkZTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBGYWNhZGVgIHdpdGggYW4gYG9iamAgb2YgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqL1xuXG5mdW5jdGlvbiBGYWNhZGUgKG9iaikge1xuICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eSgndGltZXN0YW1wJykpIG9iai50aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuICBlbHNlIG9iai50aW1lc3RhbXAgPSBuZXdEYXRlKG9iai50aW1lc3RhbXApO1xuICB0cmF2ZXJzZShvYmopO1xuICB0aGlzLm9iaiA9IG9iajtcbn1cblxuLyoqXG4gKiBNaXhpbiBhZGRyZXNzIHRyYWl0cy5cbiAqL1xuXG5hZGRyZXNzKEZhY2FkZS5wcm90b3R5cGUpO1xuXG4vKipcbiAqIFJldHVybiBhIHByb3h5IGZ1bmN0aW9uIGZvciBhIGBmaWVsZGAgdGhhdCB3aWxsIGF0dGVtcHQgdG8gZmlyc3QgdXNlIG1ldGhvZHMsXG4gKiBhbmQgZmFsbGJhY2sgdG8gYWNjZXNzaW5nIHRoZSB1bmRlcmx5aW5nIG9iamVjdCBkaXJlY3RseS4gWW91IGNhbiBzcGVjaWZ5XG4gKiBkZWVwbHkgbmVzdGVkIGZpZWxkcyB0b28gbGlrZTpcbiAqXG4gKiAgIHRoaXMucHJveHkoJ29wdGlvbnMuTGlicmF0bycpO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICovXG5cbkZhY2FkZS5wcm90b3R5cGUucHJveHkgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgdmFyIGZpZWxkcyA9IGZpZWxkLnNwbGl0KCcuJyk7XG4gIGZpZWxkID0gZmllbGRzLnNoaWZ0KCk7XG5cbiAgLy8gQ2FsbCBhIGZ1bmN0aW9uIGF0IHRoZSBiZWdpbm5pbmcgdG8gdGFrZSBhZHZhbnRhZ2Ugb2YgZmFjYWRlZCBmaWVsZHNcbiAgdmFyIG9iaiA9IHRoaXNbZmllbGRdIHx8IHRoaXMuZmllbGQoZmllbGQpO1xuICBpZiAoIW9iaikgcmV0dXJuIG9iajtcbiAgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIG9iaiA9IG9iai5jYWxsKHRoaXMpIHx8IHt9O1xuICBpZiAoZmllbGRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRyYW5zZm9ybShvYmopO1xuXG4gIG9iaiA9IG9iakNhc2Uob2JqLCBmaWVsZHMuam9pbignLicpKTtcbiAgcmV0dXJuIHRyYW5zZm9ybShvYmopO1xufTtcblxuLyoqXG4gKiBEaXJlY3RseSBhY2Nlc3MgYSBzcGVjaWZpYyBgZmllbGRgIGZyb20gdGhlIHVuZGVybHlpbmcgb2JqZWN0LCByZXR1cm5pbmcgYVxuICogY2xvbmUgc28gb3V0c2lkZXJzIGRvbid0IG1lc3Mgd2l0aCBzdHVmZi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqIEByZXR1cm4ge01peGVkfVxuICovXG5cbkZhY2FkZS5wcm90b3R5cGUuZmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgdmFyIG9iaiA9IHRoaXMub2JqW2ZpZWxkXTtcbiAgcmV0dXJuIHRyYW5zZm9ybShvYmopO1xufTtcblxuLyoqXG4gKiBVdGlsaXR5IG1ldGhvZCB0byBhbHdheXMgcHJveHkgYSBwYXJ0aWN1bGFyIGBmaWVsZGAuIFlvdSBjYW4gc3BlY2lmeSBkZWVwbHlcbiAqIG5lc3RlZCBmaWVsZHMgdG9vIGxpa2U6XG4gKlxuICogICBGYWNhZGUucHJveHkoJ29wdGlvbnMuTGlicmF0bycpO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuRmFjYWRlLnByb3h5ID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJveHkoZmllbGQpO1xuICB9O1xufTtcblxuLyoqXG4gKiBVdGlsaXR5IG1ldGhvZCB0byBkaXJlY3RseSBhY2Nlc3MgYSBgZmllbGRgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuRmFjYWRlLmZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmllbGQoZmllbGQpO1xuICB9O1xufTtcblxuLyoqXG4gKiBQcm94eSBtdWx0aXBsZSBgcGF0aGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbkZhY2FkZS5tdWx0aSA9IGZ1bmN0aW9uKHBhdGgpe1xuICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICB2YXIgbXVsdGkgPSB0aGlzLnByb3h5KHBhdGggKyAncycpO1xuICAgIGlmICgnYXJyYXknID09IHR5cGUobXVsdGkpKSByZXR1cm4gbXVsdGk7XG4gICAgdmFyIG9uZSA9IHRoaXMucHJveHkocGF0aCk7XG4gICAgaWYgKG9uZSkgb25lID0gW2Nsb25lKG9uZSldO1xuICAgIHJldHVybiBvbmUgfHwgW107XG4gIH07XG59O1xuXG4vKipcbiAqIFByb3h5IG9uZSBgcGF0aGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge01peGVkfVxuICovXG5cbkZhY2FkZS5vbmUgPSBmdW5jdGlvbihwYXRoKXtcbiAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgdmFyIG9uZSA9IHRoaXMucHJveHkocGF0aCk7XG4gICAgaWYgKG9uZSkgcmV0dXJuIG9uZTtcbiAgICB2YXIgbXVsdGkgPSB0aGlzLnByb3h5KHBhdGggKyAncycpO1xuICAgIGlmICgnYXJyYXknID09IHR5cGUobXVsdGkpKSByZXR1cm4gbXVsdGlbMF07XG4gIH07XG59O1xuXG4vKipcbiAqIEdldCB0aGUgYmFzaWMganNvbiBvYmplY3Qgb2YgdGhpcyBmYWNhZGUuXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbkZhY2FkZS5wcm90b3R5cGUuanNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJldCA9IGNsb25lKHRoaXMub2JqKTtcbiAgaWYgKHRoaXMudHlwZSkgcmV0LnR5cGUgPSB0aGlzLnR5cGUoKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBvcHRpb25zIG9mIGEgY2FsbCAoZm9ybWVybHkgY2FsbGVkIFwiY29udGV4dFwiKS4gSWYgeW91IHBhc3MgYW5cbiAqIGludGVncmF0aW9uIG5hbWUsIGl0IHdpbGwgZ2V0IHRoZSBvcHRpb25zIGZvciB0aGF0IHNwZWNpZmljIGludGVncmF0aW9uLCBvclxuICogdW5kZWZpbmVkIGlmIHRoZSBpbnRlZ3JhdGlvbiBpcyBub3QgZW5hYmxlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaW50ZWdyYXRpb24gKG9wdGlvbmFsKVxuICogQHJldHVybiB7T2JqZWN0IG9yIE51bGx9XG4gKi9cblxuRmFjYWRlLnByb3RvdHlwZS5jb250ZXh0ID1cbkZhY2FkZS5wcm90b3R5cGUub3B0aW9ucyA9IGZ1bmN0aW9uIChpbnRlZ3JhdGlvbikge1xuICB2YXIgb3B0aW9ucyA9IGNsb25lKHRoaXMub2JqLm9wdGlvbnMgfHwgdGhpcy5vYmouY29udGV4dCkgfHwge307XG4gIGlmICghaW50ZWdyYXRpb24pIHJldHVybiBjbG9uZShvcHRpb25zKTtcbiAgaWYgKCF0aGlzLmVuYWJsZWQoaW50ZWdyYXRpb24pKSByZXR1cm47XG4gIHZhciBpbnRlZ3JhdGlvbnMgPSB0aGlzLmludGVncmF0aW9ucygpO1xuICB2YXIgdmFsdWUgPSBpbnRlZ3JhdGlvbnNbaW50ZWdyYXRpb25dIHx8IG9iakNhc2UoaW50ZWdyYXRpb25zLCBpbnRlZ3JhdGlvbik7XG4gIGlmICgnYm9vbGVhbicgPT0gdHlwZW9mIHZhbHVlKSB2YWx1ZSA9IHt9O1xuICByZXR1cm4gdmFsdWUgfHwge307XG59O1xuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgYW4gaW50ZWdyYXRpb24gaXMgZW5hYmxlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaW50ZWdyYXRpb25cbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuRmFjYWRlLnByb3RvdHlwZS5lbmFibGVkID0gZnVuY3Rpb24gKGludGVncmF0aW9uKSB7XG4gIHZhciBhbGxFbmFibGVkID0gdGhpcy5wcm94eSgnb3B0aW9ucy5wcm92aWRlcnMuYWxsJyk7XG4gIGlmICh0eXBlb2YgYWxsRW5hYmxlZCAhPT0gJ2Jvb2xlYW4nKSBhbGxFbmFibGVkID0gdGhpcy5wcm94eSgnb3B0aW9ucy5hbGwnKTtcbiAgaWYgKHR5cGVvZiBhbGxFbmFibGVkICE9PSAnYm9vbGVhbicpIGFsbEVuYWJsZWQgPSB0aGlzLnByb3h5KCdpbnRlZ3JhdGlvbnMuYWxsJyk7XG4gIGlmICh0eXBlb2YgYWxsRW5hYmxlZCAhPT0gJ2Jvb2xlYW4nKSBhbGxFbmFibGVkID0gdHJ1ZTtcblxuICB2YXIgZW5hYmxlZCA9IGFsbEVuYWJsZWQgJiYgaXNFbmFibGVkKGludGVncmF0aW9uKTtcbiAgdmFyIG9wdGlvbnMgPSB0aGlzLmludGVncmF0aW9ucygpO1xuXG4gIC8vIElmIHRoZSBpbnRlZ3JhdGlvbiBpcyBleHBsaWNpdGx5IGVuYWJsZWQgb3IgZGlzYWJsZWQsIHVzZSB0aGF0XG4gIC8vIEZpcnN0LCBjaGVjayBvcHRpb25zLnByb3ZpZGVycyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgaWYgKG9wdGlvbnMucHJvdmlkZXJzICYmIG9wdGlvbnMucHJvdmlkZXJzLmhhc093blByb3BlcnR5KGludGVncmF0aW9uKSkge1xuICAgIGVuYWJsZWQgPSBvcHRpb25zLnByb3ZpZGVyc1tpbnRlZ3JhdGlvbl07XG4gIH1cblxuICAvLyBOZXh0LCBjaGVjayBmb3IgdGhlIGludGVncmF0aW9uJ3MgZXhpc3RlbmNlIGluICdvcHRpb25zJyB0byBlbmFibGUgaXQuXG4gIC8vIElmIHRoZSBzZXR0aW5ncyBhcmUgYSBib29sZWFuLCB1c2UgdGhhdCwgb3RoZXJ3aXNlIGl0IHNob3VsZCBiZSBlbmFibGVkLlxuICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShpbnRlZ3JhdGlvbikpIHtcbiAgICB2YXIgc2V0dGluZ3MgPSBvcHRpb25zW2ludGVncmF0aW9uXTtcbiAgICBpZiAodHlwZW9mIHNldHRpbmdzID09PSAnYm9vbGVhbicpIHtcbiAgICAgIGVuYWJsZWQgPSBzZXR0aW5ncztcbiAgICB9IGVsc2Uge1xuICAgICAgZW5hYmxlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGVuYWJsZWQgPyB0cnVlIDogZmFsc2U7XG59O1xuXG4vKipcbiAqIEdldCBhbGwgYGludGVncmF0aW9uYCBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpbnRlZ3JhdGlvblxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuRmFjYWRlLnByb3RvdHlwZS5pbnRlZ3JhdGlvbnMgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5vYmouaW50ZWdyYXRpb25zXG4gICAgfHwgdGhpcy5wcm94eSgnb3B0aW9ucy5wcm92aWRlcnMnKVxuICAgIHx8IHRoaXMub3B0aW9ucygpO1xufTtcblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIGlzIGFjdGl2ZS5cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkZhY2FkZS5wcm90b3R5cGUuYWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYWN0aXZlID0gdGhpcy5wcm94eSgnb3B0aW9ucy5hY3RpdmUnKTtcbiAgaWYgKGFjdGl2ZSA9PT0gbnVsbCB8fCBhY3RpdmUgPT09IHVuZGVmaW5lZCkgYWN0aXZlID0gdHJ1ZTtcbiAgcmV0dXJuIGFjdGl2ZTtcbn07XG5cbi8qKlxuICogR2V0IGBzZXNzaW9uSWQgLyBhbm9ueW1vdXNJZGAuXG4gKlxuICogQHJldHVybiB7TWl4ZWR9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkZhY2FkZS5wcm90b3R5cGUuc2Vzc2lvbklkID1cbkZhY2FkZS5wcm90b3R5cGUuYW5vbnltb3VzSWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5maWVsZCgnYW5vbnltb3VzSWQnKVxuICAgIHx8IHRoaXMuZmllbGQoJ3Nlc3Npb25JZCcpO1xufTtcblxuLyoqXG4gKiBHZXQgYGdyb3VwSWRgIGZyb20gYGNvbnRleHQuZ3JvdXBJZGAuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5GYWNhZGUucHJvdG90eXBlLmdyb3VwSWQgPSBGYWNhZGUucHJveHkoJ29wdGlvbnMuZ3JvdXBJZCcpO1xuXG4vKipcbiAqIEdldCB0aGUgY2FsbCdzIFwic3VwZXIgcHJvcGVydGllc1wiIHdoaWNoIGFyZSBqdXN0IHRyYWl0cyB0aGF0IGhhdmUgYmVlblxuICogcGFzc2VkIGluIGFzIGlmIGZyb20gYW4gaWRlbnRpZnkgY2FsbC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYWxpYXNlc1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbkZhY2FkZS5wcm90b3R5cGUudHJhaXRzID0gZnVuY3Rpb24gKGFsaWFzZXMpIHtcbiAgdmFyIHJldCA9IHRoaXMucHJveHkoJ29wdGlvbnMudHJhaXRzJykgfHwge307XG4gIHZhciBpZCA9IHRoaXMudXNlcklkKCk7XG4gIGFsaWFzZXMgPSBhbGlhc2VzIHx8IHt9O1xuXG4gIGlmIChpZCkgcmV0LmlkID0gaWQ7XG5cbiAgZm9yICh2YXIgYWxpYXMgaW4gYWxpYXNlcykge1xuICAgIHZhciB2YWx1ZSA9IG51bGwgPT0gdGhpc1thbGlhc11cbiAgICAgID8gdGhpcy5wcm94eSgnb3B0aW9ucy50cmFpdHMuJyArIGFsaWFzKVxuICAgICAgOiB0aGlzW2FsaWFzXSgpO1xuICAgIGlmIChudWxsID09IHZhbHVlKSBjb250aW51ZTtcbiAgICByZXRbYWxpYXNlc1thbGlhc11dID0gdmFsdWU7XG4gICAgZGVsZXRlIHJldFthbGlhc107XG4gIH1cblxuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBBZGQgYSBjb252ZW5pZW50IHdheSB0byBnZXQgdGhlIGxpYnJhcnkgbmFtZSBhbmQgdmVyc2lvblxuICovXG5cbkZhY2FkZS5wcm90b3R5cGUubGlicmFyeSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBsaWJyYXJ5ID0gdGhpcy5wcm94eSgnb3B0aW9ucy5saWJyYXJ5Jyk7XG4gIGlmICghbGlicmFyeSkgcmV0dXJuIHsgbmFtZTogJ3Vua25vd24nLCB2ZXJzaW9uOiBudWxsIH07XG4gIGlmICh0eXBlb2YgbGlicmFyeSA9PT0gJ3N0cmluZycpIHJldHVybiB7IG5hbWU6IGxpYnJhcnksIHZlcnNpb246IG51bGwgfTtcbiAgcmV0dXJuIGxpYnJhcnk7XG59O1xuXG4vKipcbiAqIFNldHVwIHNvbWUgYmFzaWMgcHJveGllcy5cbiAqL1xuXG5GYWNhZGUucHJvdG90eXBlLnVzZXJJZCA9IEZhY2FkZS5maWVsZCgndXNlcklkJyk7XG5GYWNhZGUucHJvdG90eXBlLmNoYW5uZWwgPSBGYWNhZGUuZmllbGQoJ2NoYW5uZWwnKTtcbkZhY2FkZS5wcm90b3R5cGUudGltZXN0YW1wID0gRmFjYWRlLmZpZWxkKCd0aW1lc3RhbXAnKTtcbkZhY2FkZS5wcm90b3R5cGUudXNlckFnZW50ID0gRmFjYWRlLnByb3h5KCdvcHRpb25zLnVzZXJBZ2VudCcpO1xuRmFjYWRlLnByb3RvdHlwZS5pcCA9IEZhY2FkZS5wcm94eSgnb3B0aW9ucy5pcCcpO1xuXG4vKipcbiAqIFJldHVybiB0aGUgY2xvbmVkIGFuZCB0cmF2ZXJzZWQgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtNaXhlZH0gb2JqXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqL1xuXG5mdW5jdGlvbiB0cmFuc2Zvcm0ob2JqKXtcbiAgdmFyIGNsb25lZCA9IGNsb25lKG9iaik7XG4gIHJldHVybiBjbG9uZWQ7XG59XG4iLCJcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG52YXIgaXNvZGF0ZSA9IHJlcXVpcmUoJ2lzb2RhdGUnKTtcbnZhciBlYWNoO1xuXG50cnkge1xuICBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xufSBjYXRjaCAoZXJyKSB7XG4gIGVhY2ggPSByZXF1aXJlKCdlYWNoLWNvbXBvbmVudCcpO1xufVxuXG4vKipcbiAqIEV4cG9zZSBgdHJhdmVyc2VgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdHJhdmVyc2U7XG5cbi8qKlxuICogVHJhdmVyc2UgYW4gb2JqZWN0IG9yIGFycmF5LCBhbmQgcmV0dXJuIGEgY2xvbmUgd2l0aCBhbGwgSVNPIHN0cmluZ3MgcGFyc2VkXG4gKiBpbnRvIERhdGUgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gdHJhdmVyc2UgKGlucHV0LCBzdHJpY3QpIHtcbiAgaWYgKHN0cmljdCA9PT0gdW5kZWZpbmVkKSBzdHJpY3QgPSB0cnVlO1xuXG4gIGlmIChpcy5vYmplY3QoaW5wdXQpKSByZXR1cm4gb2JqZWN0KGlucHV0LCBzdHJpY3QpO1xuICBpZiAoaXMuYXJyYXkoaW5wdXQpKSByZXR1cm4gYXJyYXkoaW5wdXQsIHN0cmljdCk7XG4gIHJldHVybiBpbnB1dDtcbn1cblxuLyoqXG4gKiBPYmplY3QgdHJhdmVyc2VyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RyaWN0XG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gb2JqZWN0IChvYmosIHN0cmljdCkge1xuICBlYWNoKG9iaiwgZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gICAgaWYgKGlzb2RhdGUuaXModmFsLCBzdHJpY3QpKSB7XG4gICAgICBvYmpba2V5XSA9IGlzb2RhdGUucGFyc2UodmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzLm9iamVjdCh2YWwpIHx8IGlzLmFycmF5KHZhbCkpIHtcbiAgICAgIHRyYXZlcnNlKHZhbCwgc3RyaWN0KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIEFycmF5IHRyYXZlcnNlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RyaWN0XG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiBhcnJheSAoYXJyLCBzdHJpY3QpIHtcbiAgZWFjaChhcnIsIGZ1bmN0aW9uICh2YWwsIHgpIHtcbiAgICBpZiAoaXMub2JqZWN0KHZhbCkpIHtcbiAgICAgIHRyYXZlcnNlKHZhbCwgc3RyaWN0KTtcbiAgICB9IGVsc2UgaWYgKGlzb2RhdGUuaXModmFsLCBzdHJpY3QpKSB7XG4gICAgICBhcnJbeF0gPSBpc29kYXRlLnBhcnNlKHZhbCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGFycjtcbn1cbiIsIlxudmFyIGlzRW1wdHkgPSByZXF1aXJlKCdpcy1lbXB0eScpO1xuXG50cnkge1xuICB2YXIgdHlwZU9mID0gcmVxdWlyZSgndHlwZScpO1xufSBjYXRjaCAoZSkge1xuICB2YXIgdHlwZU9mID0gcmVxdWlyZSgnY29tcG9uZW50LXR5cGUnKTtcbn1cblxuXG4vKipcbiAqIFR5cGVzLlxuICovXG5cbnZhciB0eXBlcyA9IFtcbiAgJ2FyZ3VtZW50cycsXG4gICdhcnJheScsXG4gICdib29sZWFuJyxcbiAgJ2RhdGUnLFxuICAnZWxlbWVudCcsXG4gICdmdW5jdGlvbicsXG4gICdudWxsJyxcbiAgJ251bWJlcicsXG4gICdvYmplY3QnLFxuICAncmVnZXhwJyxcbiAgJ3N0cmluZycsXG4gICd1bmRlZmluZWQnXG5dO1xuXG5cbi8qKlxuICogRXhwb3NlIHR5cGUgY2hlY2tlcnMuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZm9yICh2YXIgaSA9IDAsIHR5cGU7IHR5cGUgPSB0eXBlc1tpXTsgaSsrKSBleHBvcnRzW3R5cGVdID0gZ2VuZXJhdGUodHlwZSk7XG5cblxuLyoqXG4gKiBBZGQgYWxpYXMgZm9yIGBmdW5jdGlvbmAgZm9yIG9sZCBicm93c2Vycy5cbiAqL1xuXG5leHBvcnRzLmZuID0gZXhwb3J0c1snZnVuY3Rpb24nXTtcblxuXG4vKipcbiAqIEV4cG9zZSBgZW1wdHlgIGNoZWNrLlxuICovXG5cbmV4cG9ydHMuZW1wdHkgPSBpc0VtcHR5O1xuXG5cbi8qKlxuICogRXhwb3NlIGBuYW5gIGNoZWNrLlxuICovXG5cbmV4cG9ydHMubmFuID0gZnVuY3Rpb24gKHZhbCkge1xuICByZXR1cm4gZXhwb3J0cy5udW1iZXIodmFsKSAmJiB2YWwgIT0gdmFsO1xufTtcblxuXG4vKipcbiAqIEdlbmVyYXRlIGEgdHlwZSBjaGVja2VyLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBnZW5lcmF0ZSAodHlwZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGUgPT09IHR5cGVPZih2YWx1ZSk7XG4gIH07XG59IiwiXG4vKipcbiAqIE1hdGNoZXIsIHNsaWdodGx5IG1vZGlmaWVkIGZyb206XG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2Nzbm92ZXIvanMtaXNvODYwMS9ibG9iL2xheC9pc284NjAxLmpzXG4gKi9cblxudmFyIG1hdGNoZXIgPSAvXihcXGR7NH0pKD86LT8oXFxkezJ9KSg/Oi0/KFxcZHsyfSkpPyk/KD86KFsgVF0pKFxcZHsyfSk6PyhcXGR7Mn0pKD86Oj8oXFxkezJ9KSg/OlssXFwuXShcXGR7MSx9KSk/KT8oPzooWil8KFsrXFwtXSkoXFxkezJ9KSg/Ojo/KFxcZHsyfSkpPyk/KT8kLztcblxuXG4vKipcbiAqIENvbnZlcnQgYW4gSVNPIGRhdGUgc3RyaW5nIHRvIGEgZGF0ZS4gRmFsbGJhY2sgdG8gbmF0aXZlIGBEYXRlLnBhcnNlYC5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vY3Nub3Zlci9qcy1pc284NjAxL2Jsb2IvbGF4L2lzbzg2MDEuanNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaXNvXG4gKiBAcmV0dXJuIHtEYXRlfVxuICovXG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAoaXNvKSB7XG4gIHZhciBudW1lcmljS2V5cyA9IFsxLCA1LCA2LCA3LCAxMSwgMTJdO1xuICB2YXIgYXJyID0gbWF0Y2hlci5leGVjKGlzbyk7XG4gIHZhciBvZmZzZXQgPSAwO1xuXG4gIC8vIGZhbGxiYWNrIHRvIG5hdGl2ZSBwYXJzaW5nXG4gIGlmICghYXJyKSByZXR1cm4gbmV3IERhdGUoaXNvKTtcblxuICAvLyByZW1vdmUgdW5kZWZpbmVkIHZhbHVlc1xuICBmb3IgKHZhciBpID0gMCwgdmFsOyB2YWwgPSBudW1lcmljS2V5c1tpXTsgaSsrKSB7XG4gICAgYXJyW3ZhbF0gPSBwYXJzZUludChhcnJbdmFsXSwgMTApIHx8IDA7XG4gIH1cblxuICAvLyBhbGxvdyB1bmRlZmluZWQgZGF5cyBhbmQgbW9udGhzXG4gIGFyclsyXSA9IHBhcnNlSW50KGFyclsyXSwgMTApIHx8IDE7XG4gIGFyclszXSA9IHBhcnNlSW50KGFyclszXSwgMTApIHx8IDE7XG5cbiAgLy8gbW9udGggaXMgMC0xMVxuICBhcnJbMl0tLTtcblxuICAvLyBhbGxvdyBhYml0cmFyeSBzdWItc2Vjb25kIHByZWNpc2lvblxuICBhcnJbOF0gPSBhcnJbOF1cbiAgICA/IChhcnJbOF0gKyAnMDAnKS5zdWJzdHJpbmcoMCwgMylcbiAgICA6IDA7XG5cbiAgLy8gYXBwbHkgdGltZXpvbmUgaWYgb25lIGV4aXN0c1xuICBpZiAoYXJyWzRdID09ICcgJykge1xuICAgIG9mZnNldCA9IG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgfSBlbHNlIGlmIChhcnJbOV0gIT09ICdaJyAmJiBhcnJbMTBdKSB7XG4gICAgb2Zmc2V0ID0gYXJyWzExXSAqIDYwICsgYXJyWzEyXTtcbiAgICBpZiAoJysnID09IGFyclsxMF0pIG9mZnNldCA9IDAgLSBvZmZzZXQ7XG4gIH1cblxuICB2YXIgbWlsbGlzID0gRGF0ZS5VVEMoYXJyWzFdLCBhcnJbMl0sIGFyclszXSwgYXJyWzVdLCBhcnJbNl0gKyBvZmZzZXQsIGFycls3XSwgYXJyWzhdKTtcbiAgcmV0dXJuIG5ldyBEYXRlKG1pbGxpcyk7XG59O1xuXG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYSBgc3RyaW5nYCBpcyBhbiBJU08gZGF0ZSBzdHJpbmcuIGBzdHJpY3RgIG1vZGUgcmVxdWlyZXMgdGhhdFxuICogdGhlIGRhdGUgc3RyaW5nIGF0IGxlYXN0IGhhdmUgYSB5ZWFyLCBtb250aCBhbmQgZGF0ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHN0cmljdFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5leHBvcnRzLmlzID0gZnVuY3Rpb24gKHN0cmluZywgc3RyaWN0KSB7XG4gIGlmIChzdHJpY3QgJiYgZmFsc2UgPT09IC9eXFxkezR9LVxcZHsyfS1cXGR7Mn0vLnRlc3Qoc3RyaW5nKSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gbWF0Y2hlci50ZXN0KHN0cmluZyk7XG59OyIsIlxuLyoqXG4gKiBBIGZldyBpbnRlZ3JhdGlvbnMgYXJlIGRpc2FibGVkIGJ5IGRlZmF1bHQuIFRoZXkgbXVzdCBiZSBleHBsaWNpdGx5XG4gKiBlbmFibGVkIGJ5IHNldHRpbmcgb3B0aW9uc1tQcm92aWRlcl0gPSB0cnVlLlxuICovXG5cbnZhciBkaXNhYmxlZCA9IHtcbiAgU2FsZXNmb3JjZTogdHJ1ZVxufTtcblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGFuIGludGVncmF0aW9uIHNob3VsZCBiZSBlbmFibGVkIGJ5IGRlZmF1bHQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGludGVncmF0aW9uXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGludGVncmF0aW9uKSB7XG4gIHJldHVybiAhIGRpc2FibGVkW2ludGVncmF0aW9uXTtcbn07IiwiXG4vKipcbiAqIFRPRE86IHVzZSBjb21wb25lbnQgc3ltbGluaywgZXZlcnl3aGVyZSA/XG4gKi9cblxudHJ5IHtcbiAgZXhwb3J0cy5pbmhlcml0ID0gcmVxdWlyZSgnaW5oZXJpdCcpO1xuICBleHBvcnRzLmNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcbiAgZXhwb3J0cy50eXBlID0gcmVxdWlyZSgndHlwZScpO1xufSBjYXRjaCAoZSkge1xuICBleHBvcnRzLmluaGVyaXQgPSByZXF1aXJlKCdpbmhlcml0LWNvbXBvbmVudCcpO1xuICBleHBvcnRzLmNsb25lID0gcmVxdWlyZSgnY2xvbmUtY29tcG9uZW50Jyk7XG4gIGV4cG9ydHMudHlwZSA9IHJlcXVpcmUoJ3R5cGUtY29tcG9uZW50Jyk7XG59XG4iLCJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYSwgYil7XG4gIHZhciBmbiA9IGZ1bmN0aW9uKCl7fTtcbiAgZm4ucHJvdG90eXBlID0gYi5wcm90b3R5cGU7XG4gIGEucHJvdG90eXBlID0gbmV3IGZuO1xuICBhLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGE7XG59OyIsIi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgdHlwZTtcbnRyeSB7XG4gIHR5cGUgPSByZXF1aXJlKCdjb21wb25lbnQtdHlwZScpO1xufSBjYXRjaCAoXykge1xuICB0eXBlID0gcmVxdWlyZSgndHlwZScpO1xufVxuXG4vKipcbiAqIE1vZHVsZSBleHBvcnRzLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gY2xvbmU7XG5cbi8qKlxuICogQ2xvbmVzIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gYW55IG9iamVjdFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBjbG9uZShvYmope1xuICBzd2l0Y2ggKHR5cGUob2JqKSkge1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICB2YXIgY29weSA9IHt9O1xuICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBjb3B5W2tleV0gPSBjbG9uZShvYmpba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjb3B5O1xuXG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAgdmFyIGNvcHkgPSBuZXcgQXJyYXkob2JqLmxlbmd0aCk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY29weVtpXSA9IGNsb25lKG9ialtpXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29weTtcblxuICAgIGNhc2UgJ3JlZ2V4cCc6XG4gICAgICAvLyBmcm9tIG1pbGxlcm1lZGVpcm9zL2FtZC11dGlscyAtIE1JVFxuICAgICAgdmFyIGZsYWdzID0gJyc7XG4gICAgICBmbGFncyArPSBvYmoubXVsdGlsaW5lID8gJ20nIDogJyc7XG4gICAgICBmbGFncyArPSBvYmouZ2xvYmFsID8gJ2cnIDogJyc7XG4gICAgICBmbGFncyArPSBvYmouaWdub3JlQ2FzZSA/ICdpJyA6ICcnO1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAob2JqLnNvdXJjZSwgZmxhZ3MpO1xuXG4gICAgY2FzZSAnZGF0ZSc6XG4gICAgICByZXR1cm4gbmV3IERhdGUob2JqLmdldFRpbWUoKSk7XG5cbiAgICBkZWZhdWx0OiAvLyBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwg4oCmXG4gICAgICByZXR1cm4gb2JqO1xuICB9XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgZ2V0ID0gcmVxdWlyZSgnb2JqLWNhc2UnKTtcblxuLyoqXG4gKiBBZGQgYWRkcmVzcyBnZXR0ZXJzIHRvIGBwcm90b2AuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvdG9cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHByb3RvKXtcbiAgcHJvdG8uemlwID0gdHJhaXQoJ3Bvc3RhbENvZGUnLCAnemlwJyk7XG4gIHByb3RvLmNvdW50cnkgPSB0cmFpdCgnY291bnRyeScpO1xuICBwcm90by5zdHJlZXQgPSB0cmFpdCgnc3RyZWV0Jyk7XG4gIHByb3RvLnN0YXRlID0gdHJhaXQoJ3N0YXRlJyk7XG4gIHByb3RvLmNpdHkgPSB0cmFpdCgnY2l0eScpO1xuXG4gIGZ1bmN0aW9uIHRyYWl0KGEsIGIpe1xuICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgdmFyIHRyYWl0cyA9IHRoaXMudHJhaXRzKCk7XG4gICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BlcnRpZXMgPyB0aGlzLnByb3BlcnRpZXMoKSA6IHt9O1xuXG4gICAgICByZXR1cm4gZ2V0KHRyYWl0cywgJ2FkZHJlc3MuJyArIGEpXG4gICAgICAgIHx8IGdldCh0cmFpdHMsIGEpXG4gICAgICAgIHx8IChiID8gZ2V0KHRyYWl0cywgJ2FkZHJlc3MuJyArIGIpIDogbnVsbClcbiAgICAgICAgfHwgKGIgPyBnZXQodHJhaXRzLCBiKSA6IG51bGwpXG4gICAgICAgIHx8IGdldChwcm9wcywgJ2FkZHJlc3MuJyArIGEpXG4gICAgICAgIHx8IGdldChwcm9wcywgYSlcbiAgICAgICAgfHwgKGIgPyBnZXQocHJvcHMsICdhZGRyZXNzLicgKyBiKSA6IG51bGwpXG4gICAgICAgIHx8IChiID8gZ2V0KHByb3BzLCBiKSA6IG51bGwpO1xuICAgIH07XG4gIH1cbn07XG4iLCJcbnZhciBpZGVudGl0eSA9IGZ1bmN0aW9uKF8peyByZXR1cm4gXzsgfTtcblxuXG4vKipcbiAqIE1vZHVsZSBleHBvcnRzLCBleHBvcnRcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmZpbmQgPSBtdWx0aXBsZShmaW5kKTtcblxuXG4vKipcbiAqIEV4cG9ydCB0aGUgcmVwbGFjZW1lbnQgZnVuY3Rpb24sIHJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG4gKi9cblxubW9kdWxlLmV4cG9ydHMucmVwbGFjZSA9IGZ1bmN0aW9uIChvYmosIGtleSwgdmFsKSB7XG4gIG11bHRpcGxlKHJlcGxhY2UpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBvYmo7XG59O1xuXG5cbi8qKlxuICogRXhwb3J0IHRoZSBkZWxldGUgZnVuY3Rpb24sIHJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG4gKi9cblxubW9kdWxlLmV4cG9ydHMuZGVsID0gZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gIG11bHRpcGxlKGRlbCkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgcmV0dXJuIG9iajtcbn07XG5cblxuLyoqXG4gKiBDb21wb3NlIGFwcGx5aW5nIHRoZSBmdW5jdGlvbiB0byBhIG5lc3RlZCBrZXlcbiAqL1xuXG5mdW5jdGlvbiBtdWx0aXBsZSAoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvYmosIHBhdGgsIHZhbCkge1xuICAgIHBhdGggPSBub3JtYWxpemUocGF0aCk7XG5cbiAgICB2YXIga2V5O1xuICAgIHZhciBmaW5pc2hlZCA9IGZhbHNlO1xuXG4gICAgd2hpbGUgKCFmaW5pc2hlZCkgbG9vcCgpO1xuXG4gICAgZnVuY3Rpb24gbG9vcCgpIHtcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICB2YXIgbm9ybWFsaXplZEtleSA9IG5vcm1hbGl6ZShrZXkpO1xuICAgICAgICBpZiAoMCA9PT0gcGF0aC5pbmRleE9mKG5vcm1hbGl6ZWRLZXkpKSB7XG4gICAgICAgICAgdmFyIHRlbXAgPSBwYXRoLnN1YnN0cihub3JtYWxpemVkS2V5Lmxlbmd0aCk7XG4gICAgICAgICAgaWYgKHRlbXAuY2hhckF0KDApID09PSAnLicgfHwgdGVtcC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHBhdGggPSB0ZW1wLnN1YnN0cigxKTtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IG9ialtrZXldO1xuXG4gICAgICAgICAgICAvLyB3ZSdyZSBhdCB0aGUgZW5kIGFuZCB0aGVyZSBpcyBub3RoaW5nLlxuICAgICAgICAgICAgaWYgKG51bGwgPT0gY2hpbGQpIHtcbiAgICAgICAgICAgICAgZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHdlJ3JlIGF0IHRoZSBlbmQgYW5kIHRoZXJlIGlzIHNvbWV0aGluZy5cbiAgICAgICAgICAgIGlmICghcGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHN0ZXAgaW50byBjaGlsZFxuICAgICAgICAgICAgb2JqID0gY2hpbGQ7XG5cbiAgICAgICAgICAgIC8vIGJ1dCB3ZSdyZSBkb25lIGhlcmVcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAga2V5ID0gdW5kZWZpbmVkO1xuICAgICAgLy8gaWYgd2UgZm91bmQgbm8gbWF0Y2hpbmcgcHJvcGVydGllc1xuICAgICAgLy8gb24gdGhlIGN1cnJlbnQgb2JqZWN0LCB0aGVyZSdzIG5vIG1hdGNoLlxuICAgICAgZmluaXNoZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICgha2V5KSByZXR1cm47XG4gICAgaWYgKG51bGwgPT0gb2JqKSByZXR1cm4gb2JqO1xuXG4gICAgLy8gdGhlIGBvYmpgIGFuZCBga2V5YCBpcyBvbmUgYWJvdmUgdGhlIGxlYWYgb2JqZWN0IGFuZCBrZXksIHNvXG4gICAgLy8gc3RhcnQgb2JqZWN0OiB7IGE6IHsgJ2IuYyc6IDEwIH0gfVxuICAgIC8vIGVuZCBvYmplY3Q6IHsgJ2IuYyc6IDEwIH1cbiAgICAvLyBlbmQga2V5OiAnYi5jJ1xuICAgIC8vIHRoaXMgd2F5LCB5b3UgY2FuIGRvIGBvYmpba2V5XWAgYW5kIGdldCBgMTBgLlxuICAgIHJldHVybiBmbihvYmosIGtleSwgdmFsKTtcbiAgfTtcbn1cblxuXG4vKipcbiAqIEZpbmQgYW4gb2JqZWN0IGJ5IGl0cyBrZXlcbiAqXG4gKiBmaW5kKHsgZmlyc3RfbmFtZSA6ICdDYWx2aW4nIH0sICdmaXJzdE5hbWUnKVxuICovXG5cbmZ1bmN0aW9uIGZpbmQgKG9iaiwga2V5KSB7XG4gIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkgcmV0dXJuIG9ialtrZXldO1xufVxuXG5cbi8qKlxuICogRGVsZXRlIGEgdmFsdWUgZm9yIGEgZ2l2ZW4ga2V5XG4gKlxuICogZGVsKHsgYSA6ICdiJywgeCA6ICd5JyB9LCAnWCcgfSkgLT4geyBhIDogJ2InIH1cbiAqL1xuXG5mdW5jdGlvbiBkZWwgKG9iaiwga2V5KSB7XG4gIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkgZGVsZXRlIG9ialtrZXldO1xuICByZXR1cm4gb2JqO1xufVxuXG5cbi8qKlxuICogUmVwbGFjZSBhbiBvYmplY3RzIGV4aXN0aW5nIHZhbHVlIHdpdGggYSBuZXcgb25lXG4gKlxuICogcmVwbGFjZSh7IGEgOiAnYicgfSwgJ2EnLCAnYycpIC0+IHsgYSA6ICdjJyB9XG4gKi9cblxuZnVuY3Rpb24gcmVwbGFjZSAob2JqLCBrZXksIHZhbCkge1xuICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIG9ialtrZXldID0gdmFsO1xuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSBhIGBkb3Quc2VwYXJhdGVkLnBhdGhgLlxuICogXG4gKiBBLkhFTEwoISomIyghKU9fV09SICAgTEQuYmFyID0+IGFoZWxsb3dvcmxkYmFyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC9bXmEtekEtWjAtOVxcLl0rL2csICcnKS50b0xvd2VyQ2FzZSgpO1xufSIsIlxudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcbnZhciBpc29kYXRlID0gcmVxdWlyZSgnaXNvZGF0ZScpO1xudmFyIG1pbGxpc2Vjb25kcyA9IHJlcXVpcmUoJy4vbWlsbGlzZWNvbmRzJyk7XG52YXIgc2Vjb25kcyA9IHJlcXVpcmUoJy4vc2Vjb25kcycpO1xuXG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBKYXZhc2NyaXB0IERhdGUgb2JqZWN0LCBhbGxvd2luZyBhIHZhcmlldHkgb2YgZXh0cmEgaW5wdXQgdHlwZXNcbiAqIG92ZXIgdGhlIG5hdGl2ZSBEYXRlIGNvbnN0cnVjdG9yLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSB2YWxcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5ld0RhdGUgKHZhbCkge1xuICBpZiAoaXMuZGF0ZSh2YWwpKSByZXR1cm4gdmFsO1xuICBpZiAoaXMubnVtYmVyKHZhbCkpIHJldHVybiBuZXcgRGF0ZSh0b01zKHZhbCkpO1xuXG4gIC8vIGRhdGUgc3RyaW5nc1xuICBpZiAoaXNvZGF0ZS5pcyh2YWwpKSByZXR1cm4gaXNvZGF0ZS5wYXJzZSh2YWwpO1xuICBpZiAobWlsbGlzZWNvbmRzLmlzKHZhbCkpIHJldHVybiBtaWxsaXNlY29uZHMucGFyc2UodmFsKTtcbiAgaWYgKHNlY29uZHMuaXModmFsKSkgcmV0dXJuIHNlY29uZHMucGFyc2UodmFsKTtcblxuICAvLyBmYWxsYmFjayB0byBEYXRlLnBhcnNlXG4gIHJldHVybiBuZXcgRGF0ZSh2YWwpO1xufTtcblxuXG4vKipcbiAqIElmIHRoZSBudW1iZXIgcGFzc2VkIHZhbCBpcyBzZWNvbmRzIGZyb20gdGhlIGVwb2NoLCB0dXJuIGl0IGludG8gbWlsbGlzZWNvbmRzLlxuICogTWlsbGlzZWNvbmRzIHdvdWxkIGJlIGdyZWF0ZXIgdGhhbiAzMTU1NzYwMDAwMCAoRGVjZW1iZXIgMzEsIDE5NzApLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBudW1cbiAqL1xuXG5mdW5jdGlvbiB0b01zIChudW0pIHtcbiAgaWYgKG51bSA8IDMxNTU3NjAwMDAwKSByZXR1cm4gbnVtICogMTAwMDtcbiAgcmV0dXJuIG51bTtcbn0iLCJcbnZhciBpc0VtcHR5ID0gcmVxdWlyZSgnaXMtZW1wdHknKVxuICAsIHR5cGVPZiA9IHJlcXVpcmUoJ3R5cGUnKTtcblxuXG4vKipcbiAqIFR5cGVzLlxuICovXG5cbnZhciB0eXBlcyA9IFtcbiAgJ2FyZ3VtZW50cycsXG4gICdhcnJheScsXG4gICdib29sZWFuJyxcbiAgJ2RhdGUnLFxuICAnZWxlbWVudCcsXG4gICdmdW5jdGlvbicsXG4gICdudWxsJyxcbiAgJ251bWJlcicsXG4gICdvYmplY3QnLFxuICAncmVnZXhwJyxcbiAgJ3N0cmluZycsXG4gICd1bmRlZmluZWQnXG5dO1xuXG5cbi8qKlxuICogRXhwb3NlIHR5cGUgY2hlY2tlcnMuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZm9yICh2YXIgaSA9IDAsIHR5cGU7IHR5cGUgPSB0eXBlc1tpXTsgaSsrKSBleHBvcnRzW3R5cGVdID0gZ2VuZXJhdGUodHlwZSk7XG5cblxuLyoqXG4gKiBBZGQgYWxpYXMgZm9yIGBmdW5jdGlvbmAgZm9yIG9sZCBicm93c2Vycy5cbiAqL1xuXG5leHBvcnRzLmZuID0gZXhwb3J0c1snZnVuY3Rpb24nXTtcblxuXG4vKipcbiAqIEV4cG9zZSBgZW1wdHlgIGNoZWNrLlxuICovXG5cbmV4cG9ydHMuZW1wdHkgPSBpc0VtcHR5O1xuXG5cbi8qKlxuICogRXhwb3NlIGBuYW5gIGNoZWNrLlxuICovXG5cbmV4cG9ydHMubmFuID0gZnVuY3Rpb24gKHZhbCkge1xuICByZXR1cm4gZXhwb3J0cy5udW1iZXIodmFsKSAmJiB2YWwgIT0gdmFsO1xufTtcblxuXG4vKipcbiAqIEdlbmVyYXRlIGEgdHlwZSBjaGVja2VyLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBnZW5lcmF0ZSAodHlwZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGUgPT09IHR5cGVPZih2YWx1ZSk7XG4gIH07XG59IiwiXG4vKipcbiAqIE1hdGNoZXIuXG4gKi9cblxudmFyIG1hdGNoZXIgPSAvXFxkezEzfS87XG5cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGEgc3RyaW5nIGlzIGEgbWlsbGlzZWNvbmQgZGF0ZSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5leHBvcnRzLmlzID0gZnVuY3Rpb24gKHN0cmluZykge1xuICByZXR1cm4gbWF0Y2hlci50ZXN0KHN0cmluZyk7XG59O1xuXG5cbi8qKlxuICogQ29udmVydCBhIG1pbGxpc2Vjb25kIHN0cmluZyB0byBhIGRhdGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1pbGxpc1xuICogQHJldHVybiB7RGF0ZX1cbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKG1pbGxpcykge1xuICBtaWxsaXMgPSBwYXJzZUludChtaWxsaXMsIDEwKTtcbiAgcmV0dXJuIG5ldyBEYXRlKG1pbGxpcyk7XG59OyIsIlxuLyoqXG4gKiBNYXRjaGVyLlxuICovXG5cbnZhciBtYXRjaGVyID0gL1xcZHsxMH0vO1xuXG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIHN0cmluZyBpcyBhIHNlY29uZCBkYXRlIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmV4cG9ydHMuaXMgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gIHJldHVybiBtYXRjaGVyLnRlc3Qoc3RyaW5nKTtcbn07XG5cblxuLyoqXG4gKiBDb252ZXJ0IGEgc2Vjb25kIHN0cmluZyB0byBhIGRhdGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlY29uZHNcbiAqIEByZXR1cm4ge0RhdGV9XG4gKi9cblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uIChzZWNvbmRzKSB7XG4gIHZhciBtaWxsaXMgPSBwYXJzZUludChzZWNvbmRzLCAxMCkgKiAxMDAwO1xuICByZXR1cm4gbmV3IERhdGUobWlsbGlzKTtcbn07IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGluaGVyaXQgPSByZXF1aXJlKCcuL3V0aWxzJykuaW5oZXJpdDtcbnZhciBGYWNhZGUgPSByZXF1aXJlKCcuL2ZhY2FkZScpO1xuXG4vKipcbiAqIEV4cG9zZSBgQWxpYXNgIGZhY2FkZS5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFsaWFzO1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYEFsaWFzYCBmYWNhZGUgd2l0aCBhIGBkaWN0aW9uYXJ5YCBvZiBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRpY3Rpb25hcnlcbiAqICAgQHByb3BlcnR5IHtTdHJpbmd9IGZyb21cbiAqICAgQHByb3BlcnR5IHtTdHJpbmd9IHRvXG4gKiAgIEBwcm9wZXJ0eSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gQWxpYXMgKGRpY3Rpb25hcnkpIHtcbiAgRmFjYWRlLmNhbGwodGhpcywgZGljdGlvbmFyeSk7XG59XG5cbi8qKlxuICogSW5oZXJpdCBmcm9tIGBGYWNhZGVgLlxuICovXG5cbmluaGVyaXQoQWxpYXMsIEZhY2FkZSk7XG5cbi8qKlxuICogUmV0dXJuIHR5cGUgb2YgZmFjYWRlLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5BbGlhcy5wcm90b3R5cGUudHlwZSA9XG5BbGlhcy5wcm90b3R5cGUuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gJ2FsaWFzJztcbn07XG5cbi8qKlxuICogR2V0IGBwcmV2aW91c0lkYC5cbiAqXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQWxpYXMucHJvdG90eXBlLmZyb20gPVxuQWxpYXMucHJvdG90eXBlLnByZXZpb3VzSWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5maWVsZCgncHJldmlvdXNJZCcpXG4gICAgfHwgdGhpcy5maWVsZCgnZnJvbScpO1xufTtcblxuLyoqXG4gKiBHZXQgYHVzZXJJZGAuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5BbGlhcy5wcm90b3R5cGUudG8gPVxuQWxpYXMucHJvdG90eXBlLnVzZXJJZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmZpZWxkKCd1c2VySWQnKVxuICAgIHx8IHRoaXMuZmllbGQoJ3RvJyk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGluaGVyaXQgPSByZXF1aXJlKCcuL3V0aWxzJykuaW5oZXJpdDtcbnZhciBhZGRyZXNzID0gcmVxdWlyZSgnLi9hZGRyZXNzJyk7XG52YXIgaXNFbWFpbCA9IHJlcXVpcmUoJ2lzLWVtYWlsJyk7XG52YXIgbmV3RGF0ZSA9IHJlcXVpcmUoJ25ldy1kYXRlJyk7XG52YXIgRmFjYWRlID0gcmVxdWlyZSgnLi9mYWNhZGUnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEdyb3VwYCBmYWNhZGUuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBHcm91cDtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBHcm91cGAgZmFjYWRlIHdpdGggYSBgZGljdGlvbmFyeWAgb2YgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkaWN0aW9uYXJ5XG4gKiAgIEBwYXJhbSB7U3RyaW5nfSB1c2VySWRcbiAqICAgQHBhcmFtIHtTdHJpbmd9IGdyb3VwSWRcbiAqICAgQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAqICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBHcm91cCAoZGljdGlvbmFyeSkge1xuICBGYWNhZGUuY2FsbCh0aGlzLCBkaWN0aW9uYXJ5KTtcbn1cblxuLyoqXG4gKiBJbmhlcml0IGZyb20gYEZhY2FkZWBcbiAqL1xuXG5pbmhlcml0KEdyb3VwLCBGYWNhZGUpO1xuXG4vKipcbiAqIEdldCB0aGUgZmFjYWRlJ3MgYWN0aW9uLlxuICovXG5cbkdyb3VwLnByb3RvdHlwZS50eXBlID1cbkdyb3VwLnByb3RvdHlwZS5hY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAnZ3JvdXAnO1xufTtcblxuLyoqXG4gKiBTZXR1cCBzb21lIGJhc2ljIHByb3hpZXMuXG4gKi9cblxuR3JvdXAucHJvdG90eXBlLmdyb3VwSWQgPSBGYWNhZGUuZmllbGQoJ2dyb3VwSWQnKTtcblxuLyoqXG4gKiBHZXQgY3JlYXRlZCBvciBjcmVhdGVkQXQuXG4gKlxuICogQHJldHVybiB7RGF0ZX1cbiAqL1xuXG5Hcm91cC5wcm90b3R5cGUuY3JlYXRlZCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBjcmVhdGVkID0gdGhpcy5wcm94eSgndHJhaXRzLmNyZWF0ZWRBdCcpXG4gICAgfHwgdGhpcy5wcm94eSgndHJhaXRzLmNyZWF0ZWQnKVxuICAgIHx8IHRoaXMucHJveHkoJ3Byb3BlcnRpZXMuY3JlYXRlZEF0JylcbiAgICB8fCB0aGlzLnByb3h5KCdwcm9wZXJ0aWVzLmNyZWF0ZWQnKTtcblxuICBpZiAoY3JlYXRlZCkgcmV0dXJuIG5ld0RhdGUoY3JlYXRlZCk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZ3JvdXAncyBlbWFpbCwgZmFsbGluZyBiYWNrIHRvIHRoZSBncm91cCBJRCBpZiBpdCdzIGEgdmFsaWQgZW1haWwuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbkdyb3VwLnByb3RvdHlwZS5lbWFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGVtYWlsID0gdGhpcy5wcm94eSgndHJhaXRzLmVtYWlsJyk7XG4gIGlmIChlbWFpbCkgcmV0dXJuIGVtYWlsO1xuICB2YXIgZ3JvdXBJZCA9IHRoaXMuZ3JvdXBJZCgpO1xuICBpZiAoaXNFbWFpbChncm91cElkKSkgcmV0dXJuIGdyb3VwSWQ7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZ3JvdXAncyB0cmFpdHMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFsaWFzZXNcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5Hcm91cC5wcm90b3R5cGUudHJhaXRzID0gZnVuY3Rpb24gKGFsaWFzZXMpIHtcbiAgdmFyIHJldCA9IHRoaXMucHJvcGVydGllcygpO1xuICB2YXIgaWQgPSB0aGlzLmdyb3VwSWQoKTtcbiAgYWxpYXNlcyA9IGFsaWFzZXMgfHwge307XG5cbiAgaWYgKGlkKSByZXQuaWQgPSBpZDtcblxuICBmb3IgKHZhciBhbGlhcyBpbiBhbGlhc2VzKSB7XG4gICAgdmFyIHZhbHVlID0gbnVsbCA9PSB0aGlzW2FsaWFzXVxuICAgICAgPyB0aGlzLnByb3h5KCd0cmFpdHMuJyArIGFsaWFzKVxuICAgICAgOiB0aGlzW2FsaWFzXSgpO1xuICAgIGlmIChudWxsID09IHZhbHVlKSBjb250aW51ZTtcbiAgICByZXRbYWxpYXNlc1thbGlhc11dID0gdmFsdWU7XG4gICAgZGVsZXRlIHJldFthbGlhc107XG4gIH1cblxuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBTcGVjaWFsIHRyYWl0cy5cbiAqL1xuXG5Hcm91cC5wcm90b3R5cGUubmFtZSA9IEZhY2FkZS5wcm94eSgndHJhaXRzLm5hbWUnKTtcbkdyb3VwLnByb3RvdHlwZS5pbmR1c3RyeSA9IEZhY2FkZS5wcm94eSgndHJhaXRzLmluZHVzdHJ5Jyk7XG5Hcm91cC5wcm90b3R5cGUuZW1wbG95ZWVzID0gRmFjYWRlLnByb3h5KCd0cmFpdHMuZW1wbG95ZWVzJyk7XG5cbi8qKlxuICogR2V0IHRyYWl0cyBvciBwcm9wZXJ0aWVzLlxuICpcbiAqIFRPRE86IHJlbW92ZSBtZVxuICpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5Hcm91cC5wcm90b3R5cGUucHJvcGVydGllcyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmZpZWxkKCd0cmFpdHMnKVxuICAgIHx8IHRoaXMuZmllbGQoJ3Byb3BlcnRpZXMnKVxuICAgIHx8IHt9O1xufTtcbiIsIlxuLyoqXG4gKiBFeHBvc2UgYGlzRW1haWxgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gaXNFbWFpbDtcblxuXG4vKipcbiAqIEVtYWlsIGFkZHJlc3MgbWF0Y2hlci5cbiAqL1xuXG52YXIgbWF0Y2hlciA9IC8uK1xcQC4rXFwuLisvO1xuXG5cbi8qKlxuICogTG9vc2VseSB2YWxpZGF0ZSBhbiBlbWFpbCBhZGRyZXNzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNFbWFpbCAoc3RyaW5nKSB7XG4gIHJldHVybiBtYXRjaGVyLnRlc3Qoc3RyaW5nKTtcbn0iLCJcbnZhciBhZGRyZXNzID0gcmVxdWlyZSgnLi9hZGRyZXNzJyk7XG52YXIgRmFjYWRlID0gcmVxdWlyZSgnLi9mYWNhZGUnKTtcbnZhciBpc0VtYWlsID0gcmVxdWlyZSgnaXMtZW1haWwnKTtcbnZhciBuZXdEYXRlID0gcmVxdWlyZSgnbmV3LWRhdGUnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBnZXQgPSByZXF1aXJlKCdvYmotY2FzZScpO1xudmFyIHRyaW0gPSByZXF1aXJlKCd0cmltJyk7XG52YXIgaW5oZXJpdCA9IHV0aWxzLmluaGVyaXQ7XG52YXIgY2xvbmUgPSB1dGlscy5jbG9uZTtcbnZhciB0eXBlID0gdXRpbHMudHlwZTtcblxuLyoqXG4gKiBFeHBvc2UgYElkZW5maXR5YCBmYWNhZGUuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBJZGVudGlmeTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBJZGVudGlmeWAgZmFjYWRlIHdpdGggYSBgZGljdGlvbmFyeWAgb2YgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkaWN0aW9uYXJ5XG4gKiAgIEBwYXJhbSB7U3RyaW5nfSB1c2VySWRcbiAqICAgQHBhcmFtIHtTdHJpbmd9IHNlc3Npb25JZFxuICogICBAcGFyYW0ge09iamVjdH0gdHJhaXRzXG4gKiAgIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gSWRlbnRpZnkgKGRpY3Rpb25hcnkpIHtcbiAgRmFjYWRlLmNhbGwodGhpcywgZGljdGlvbmFyeSk7XG59XG5cbi8qKlxuICogSW5oZXJpdCBmcm9tIGBGYWNhZGVgLlxuICovXG5cbmluaGVyaXQoSWRlbnRpZnksIEZhY2FkZSk7XG5cbi8qKlxuICogR2V0IHRoZSBmYWNhZGUncyBhY3Rpb24uXG4gKi9cblxuSWRlbnRpZnkucHJvdG90eXBlLnR5cGUgPVxuSWRlbnRpZnkucHJvdG90eXBlLmFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICdpZGVudGlmeSc7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgdXNlcidzIHRyYWl0cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYWxpYXNlc1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbklkZW50aWZ5LnByb3RvdHlwZS50cmFpdHMgPSBmdW5jdGlvbiAoYWxpYXNlcykge1xuICB2YXIgcmV0ID0gdGhpcy5maWVsZCgndHJhaXRzJykgfHwge307XG4gIHZhciBpZCA9IHRoaXMudXNlcklkKCk7XG4gIGFsaWFzZXMgPSBhbGlhc2VzIHx8IHt9O1xuXG4gIGlmIChpZCkgcmV0LmlkID0gaWQ7XG5cbiAgZm9yICh2YXIgYWxpYXMgaW4gYWxpYXNlcykge1xuICAgIHZhciB2YWx1ZSA9IG51bGwgPT0gdGhpc1thbGlhc11cbiAgICAgID8gdGhpcy5wcm94eSgndHJhaXRzLicgKyBhbGlhcylcbiAgICAgIDogdGhpc1thbGlhc10oKTtcbiAgICBpZiAobnVsbCA9PSB2YWx1ZSkgY29udGludWU7XG4gICAgcmV0W2FsaWFzZXNbYWxpYXNdXSA9IHZhbHVlO1xuICAgIGlmIChhbGlhcyAhPT0gYWxpYXNlc1thbGlhc10pIGRlbGV0ZSByZXRbYWxpYXNdO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogR2V0IHRoZSB1c2VyJ3MgZW1haWwsIGZhbGxpbmcgYmFjayB0byB0aGVpciB1c2VyIElEIGlmIGl0J3MgYSB2YWxpZCBlbWFpbC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuSWRlbnRpZnkucHJvdG90eXBlLmVtYWlsID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZW1haWwgPSB0aGlzLnByb3h5KCd0cmFpdHMuZW1haWwnKTtcbiAgaWYgKGVtYWlsKSByZXR1cm4gZW1haWw7XG5cbiAgdmFyIHVzZXJJZCA9IHRoaXMudXNlcklkKCk7XG4gIGlmIChpc0VtYWlsKHVzZXJJZCkpIHJldHVybiB1c2VySWQ7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgdXNlcidzIGNyZWF0ZWQgZGF0ZSwgb3B0aW9uYWxseSBsb29raW5nIGZvciBgY3JlYXRlZEF0YCBzaW5jZSBsb3RzIG9mXG4gKiBwZW9wbGUgZG8gdGhhdCBpbnN0ZWFkLlxuICpcbiAqIEByZXR1cm4ge0RhdGUgb3IgVW5kZWZpbmVkfVxuICovXG5cbklkZW50aWZ5LnByb3RvdHlwZS5jcmVhdGVkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY3JlYXRlZCA9IHRoaXMucHJveHkoJ3RyYWl0cy5jcmVhdGVkJykgfHwgdGhpcy5wcm94eSgndHJhaXRzLmNyZWF0ZWRBdCcpO1xuICBpZiAoY3JlYXRlZCkgcmV0dXJuIG5ld0RhdGUoY3JlYXRlZCk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgY29tcGFueSBjcmVhdGVkIGRhdGUuXG4gKlxuICogQHJldHVybiB7RGF0ZSBvciB1bmRlZmluZWR9XG4gKi9cblxuSWRlbnRpZnkucHJvdG90eXBlLmNvbXBhbnlDcmVhdGVkID0gZnVuY3Rpb24oKXtcbiAgdmFyIGNyZWF0ZWQgPSB0aGlzLnByb3h5KCd0cmFpdHMuY29tcGFueS5jcmVhdGVkJylcbiAgICB8fCB0aGlzLnByb3h5KCd0cmFpdHMuY29tcGFueS5jcmVhdGVkQXQnKTtcblxuICBpZiAoY3JlYXRlZCkgcmV0dXJuIG5ld0RhdGUoY3JlYXRlZCk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgdXNlcidzIG5hbWUsIG9wdGlvbmFsbHkgY29tYmluaW5nIGEgZmlyc3QgYW5kIGxhc3QgbmFtZSBpZiB0aGF0J3MgYWxsXG4gKiB0aGF0IHdhcyBwcm92aWRlZC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmcgb3IgVW5kZWZpbmVkfVxuICovXG5cbklkZW50aWZ5LnByb3RvdHlwZS5uYW1lID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbmFtZSA9IHRoaXMucHJveHkoJ3RyYWl0cy5uYW1lJyk7XG4gIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHJldHVybiB0cmltKG5hbWUpO1xuXG4gIHZhciBmaXJzdE5hbWUgPSB0aGlzLmZpcnN0TmFtZSgpO1xuICB2YXIgbGFzdE5hbWUgPSB0aGlzLmxhc3ROYW1lKCk7XG4gIGlmIChmaXJzdE5hbWUgJiYgbGFzdE5hbWUpIHJldHVybiB0cmltKGZpcnN0TmFtZSArICcgJyArIGxhc3ROYW1lKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSB1c2VyJ3MgZmlyc3QgbmFtZSwgb3B0aW9uYWxseSBzcGxpdHRpbmcgaXQgb3V0IG9mIGEgc2luZ2xlIG5hbWUgaWZcbiAqIHRoYXQncyBhbGwgdGhhdCB3YXMgcHJvdmlkZWQuXG4gKlxuICogQHJldHVybiB7U3RyaW5nIG9yIFVuZGVmaW5lZH1cbiAqL1xuXG5JZGVudGlmeS5wcm90b3R5cGUuZmlyc3ROYW1lID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZmlyc3ROYW1lID0gdGhpcy5wcm94eSgndHJhaXRzLmZpcnN0TmFtZScpO1xuICBpZiAodHlwZW9mIGZpcnN0TmFtZSA9PT0gJ3N0cmluZycpIHJldHVybiB0cmltKGZpcnN0TmFtZSk7XG5cbiAgdmFyIG5hbWUgPSB0aGlzLnByb3h5KCd0cmFpdHMubmFtZScpO1xuICBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSByZXR1cm4gdHJpbShuYW1lKS5zcGxpdCgnICcpWzBdO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIHVzZXIncyBsYXN0IG5hbWUsIG9wdGlvbmFsbHkgc3BsaXR0aW5nIGl0IG91dCBvZiBhIHNpbmdsZSBuYW1lIGlmXG4gKiB0aGF0J3MgYWxsIHRoYXQgd2FzIHByb3ZpZGVkLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZyBvciBVbmRlZmluZWR9XG4gKi9cblxuSWRlbnRpZnkucHJvdG90eXBlLmxhc3ROYW1lID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGFzdE5hbWUgPSB0aGlzLnByb3h5KCd0cmFpdHMubGFzdE5hbWUnKTtcbiAgaWYgKHR5cGVvZiBsYXN0TmFtZSA9PT0gJ3N0cmluZycpIHJldHVybiB0cmltKGxhc3ROYW1lKTtcblxuICB2YXIgbmFtZSA9IHRoaXMucHJveHkoJ3RyYWl0cy5uYW1lJyk7XG4gIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHJldHVybjtcblxuICB2YXIgc3BhY2UgPSB0cmltKG5hbWUpLmluZGV4T2YoJyAnKTtcbiAgaWYgKHNwYWNlID09PSAtMSkgcmV0dXJuO1xuXG4gIHJldHVybiB0cmltKG5hbWUuc3Vic3RyKHNwYWNlICsgMSkpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIHVzZXIncyB1bmlxdWUgaWQuXG4gKlxuICogQHJldHVybiB7U3RyaW5nIG9yIHVuZGVmaW5lZH1cbiAqL1xuXG5JZGVudGlmeS5wcm90b3R5cGUudWlkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMudXNlcklkKClcbiAgICB8fCB0aGlzLnVzZXJuYW1lKClcbiAgICB8fCB0aGlzLmVtYWlsKCk7XG59O1xuXG4vKipcbiAqIEdldCBkZXNjcmlwdGlvbi5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuSWRlbnRpZnkucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMucHJveHkoJ3RyYWl0cy5kZXNjcmlwdGlvbicpXG4gICAgfHwgdGhpcy5wcm94eSgndHJhaXRzLmJhY2tncm91bmQnKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBhZ2UuXG4gKlxuICogSWYgdGhlIGFnZSBpcyBub3QgZXhwbGljaXRseSBzZXRcbiAqIHRoZSBtZXRob2Qgd2lsbCBjb21wdXRlIGl0IGZyb20gYC5iaXJ0aGRheSgpYFxuICogaWYgcG9zc2libGUuXG4gKlxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG5cbklkZW50aWZ5LnByb3RvdHlwZS5hZ2UgPSBmdW5jdGlvbigpe1xuICB2YXIgZGF0ZSA9IHRoaXMuYmlydGhkYXkoKTtcbiAgdmFyIGFnZSA9IGdldCh0aGlzLnRyYWl0cygpLCAnYWdlJyk7XG4gIGlmIChudWxsICE9IGFnZSkgcmV0dXJuIGFnZTtcbiAgaWYgKCdkYXRlJyAhPSB0eXBlKGRhdGUpKSByZXR1cm47XG4gIHZhciBub3cgPSBuZXcgRGF0ZTtcbiAgcmV0dXJuIG5vdy5nZXRGdWxsWWVhcigpIC0gZGF0ZS5nZXRGdWxsWWVhcigpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGF2YXRhci5cbiAqXG4gKiAucGhvdG9VcmwgbmVlZGVkIGJlY2F1c2UgaGVscC1zY291dFxuICogaW1wbGVtZW50YXRpb24gdXNlcyBgLmF2YXRhciB8fCAucGhvdG9VcmxgLlxuICpcbiAqIC5hdmF0YXJVcmwgbmVlZGVkIGJlY2F1c2UgdHJha2lvIHVzZXMgaXQuXG4gKlxuICogQHJldHVybiB7TWl4ZWR9XG4gKi9cblxuSWRlbnRpZnkucHJvdG90eXBlLmF2YXRhciA9IGZ1bmN0aW9uKCl7XG4gIHZhciB0cmFpdHMgPSB0aGlzLnRyYWl0cygpO1xuICByZXR1cm4gZ2V0KHRyYWl0cywgJ2F2YXRhcicpXG4gICAgfHwgZ2V0KHRyYWl0cywgJ3Bob3RvVXJsJylcbiAgICB8fCBnZXQodHJhaXRzLCAnYXZhdGFyVXJsJyk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgcG9zaXRpb24uXG4gKlxuICogLmpvYlRpdGxlIG5lZWRlZCBiZWNhdXNlIHNvbWUgaW50ZWdyYXRpb25zIHVzZSBpdC5cbiAqXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqL1xuXG5JZGVudGlmeS5wcm90b3R5cGUucG9zaXRpb24gPSBmdW5jdGlvbigpe1xuICB2YXIgdHJhaXRzID0gdGhpcy50cmFpdHMoKTtcbiAgcmV0dXJuIGdldCh0cmFpdHMsICdwb3NpdGlvbicpIHx8IGdldCh0cmFpdHMsICdqb2JUaXRsZScpO1xufTtcblxuLyoqXG4gKiBTZXR1cCBzbWUgYmFzaWMgXCJzcGVjaWFsXCIgdHJhaXQgcHJveGllcy5cbiAqL1xuXG5JZGVudGlmeS5wcm90b3R5cGUudXNlcm5hbWUgPSBGYWNhZGUucHJveHkoJ3RyYWl0cy51c2VybmFtZScpO1xuSWRlbnRpZnkucHJvdG90eXBlLndlYnNpdGUgPSBGYWNhZGUub25lKCd0cmFpdHMud2Vic2l0ZScpO1xuSWRlbnRpZnkucHJvdG90eXBlLndlYnNpdGVzID0gRmFjYWRlLm11bHRpKCd0cmFpdHMud2Vic2l0ZScpO1xuSWRlbnRpZnkucHJvdG90eXBlLnBob25lID0gRmFjYWRlLm9uZSgndHJhaXRzLnBob25lJyk7XG5JZGVudGlmeS5wcm90b3R5cGUucGhvbmVzID0gRmFjYWRlLm11bHRpKCd0cmFpdHMucGhvbmUnKTtcbklkZW50aWZ5LnByb3RvdHlwZS5hZGRyZXNzID0gRmFjYWRlLnByb3h5KCd0cmFpdHMuYWRkcmVzcycpO1xuSWRlbnRpZnkucHJvdG90eXBlLmdlbmRlciA9IEZhY2FkZS5wcm94eSgndHJhaXRzLmdlbmRlcicpO1xuSWRlbnRpZnkucHJvdG90eXBlLmJpcnRoZGF5ID0gRmFjYWRlLnByb3h5KCd0cmFpdHMuYmlydGhkYXknKTtcbiIsIlxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gdHJpbTtcblxuZnVuY3Rpb24gdHJpbShzdHIpe1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpO1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqfFxccyokL2csICcnKTtcbn1cblxuZXhwb3J0cy5sZWZ0ID0gZnVuY3Rpb24oc3RyKXtcbiAgaWYgKHN0ci50cmltTGVmdCkgcmV0dXJuIHN0ci50cmltTGVmdCgpO1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqLywgJycpO1xufTtcblxuZXhwb3J0cy5yaWdodCA9IGZ1bmN0aW9uKHN0cil7XG4gIGlmIChzdHIudHJpbVJpZ2h0KSByZXR1cm4gc3RyLnRyaW1SaWdodCgpO1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL1xccyokLywgJycpO1xufTtcbiIsIlxudmFyIGluaGVyaXQgPSByZXF1aXJlKCcuL3V0aWxzJykuaW5oZXJpdDtcbnZhciBjbG9uZSA9IHJlcXVpcmUoJy4vdXRpbHMnKS5jbG9uZTtcbnZhciB0eXBlID0gcmVxdWlyZSgnLi91dGlscycpLnR5cGU7XG52YXIgRmFjYWRlID0gcmVxdWlyZSgnLi9mYWNhZGUnKTtcbnZhciBJZGVudGlmeSA9IHJlcXVpcmUoJy4vaWRlbnRpZnknKTtcbnZhciBpc0VtYWlsID0gcmVxdWlyZSgnaXMtZW1haWwnKTtcbnZhciBnZXQgPSByZXF1aXJlKCdvYmotY2FzZScpO1xuXG4vKipcbiAqIEV4cG9zZSBgVHJhY2tgIGZhY2FkZS5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYWNrO1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYFRyYWNrYCBmYWNhZGUgd2l0aCBhIGBkaWN0aW9uYXJ5YCBvZiBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRpY3Rpb25hcnlcbiAqICAgQHByb3BlcnR5IHtTdHJpbmd9IGV2ZW50XG4gKiAgIEBwcm9wZXJ0eSB7U3RyaW5nfSB1c2VySWRcbiAqICAgQHByb3BlcnR5IHtTdHJpbmd9IHNlc3Npb25JZFxuICogICBAcHJvcGVydHkge09iamVjdH0gcHJvcGVydGllc1xuICogICBAcHJvcGVydHkge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIFRyYWNrIChkaWN0aW9uYXJ5KSB7XG4gIEZhY2FkZS5jYWxsKHRoaXMsIGRpY3Rpb25hcnkpO1xufVxuXG4vKipcbiAqIEluaGVyaXQgZnJvbSBgRmFjYWRlYC5cbiAqL1xuXG5pbmhlcml0KFRyYWNrLCBGYWNhZGUpO1xuXG4vKipcbiAqIFJldHVybiB0aGUgZmFjYWRlJ3MgYWN0aW9uLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5UcmFjay5wcm90b3R5cGUudHlwZSA9XG5UcmFjay5wcm90b3R5cGUuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gJ3RyYWNrJztcbn07XG5cbi8qKlxuICogU2V0dXAgc29tZSBiYXNpYyBwcm94aWVzLlxuICovXG5cblRyYWNrLnByb3RvdHlwZS5ldmVudCA9IEZhY2FkZS5maWVsZCgnZXZlbnQnKTtcblRyYWNrLnByb3RvdHlwZS52YWx1ZSA9IEZhY2FkZS5wcm94eSgncHJvcGVydGllcy52YWx1ZScpO1xuXG4vKipcbiAqIE1pc2NcbiAqL1xuXG5UcmFjay5wcm90b3R5cGUuY2F0ZWdvcnkgPSBGYWNhZGUucHJveHkoJ3Byb3BlcnRpZXMuY2F0ZWdvcnknKTtcblxuLyoqXG4gKiBFY29tbWVyY2VcbiAqL1xuXG5UcmFjay5wcm90b3R5cGUuaWQgPSBGYWNhZGUucHJveHkoJ3Byb3BlcnRpZXMuaWQnKTtcblRyYWNrLnByb3RvdHlwZS5za3UgPSBGYWNhZGUucHJveHkoJ3Byb3BlcnRpZXMuc2t1Jyk7XG5UcmFjay5wcm90b3R5cGUudGF4ID0gRmFjYWRlLnByb3h5KCdwcm9wZXJ0aWVzLnRheCcpO1xuVHJhY2sucHJvdG90eXBlLm5hbWUgPSBGYWNhZGUucHJveHkoJ3Byb3BlcnRpZXMubmFtZScpO1xuVHJhY2sucHJvdG90eXBlLnByaWNlID0gRmFjYWRlLnByb3h5KCdwcm9wZXJ0aWVzLnByaWNlJyk7XG5UcmFjay5wcm90b3R5cGUudG90YWwgPSBGYWNhZGUucHJveHkoJ3Byb3BlcnRpZXMudG90YWwnKTtcblRyYWNrLnByb3RvdHlwZS5jb3Vwb24gPSBGYWNhZGUucHJveHkoJ3Byb3BlcnRpZXMuY291cG9uJyk7XG5UcmFjay5wcm90b3R5cGUuc2hpcHBpbmcgPSBGYWNhZGUucHJveHkoJ3Byb3BlcnRpZXMuc2hpcHBpbmcnKTtcblRyYWNrLnByb3RvdHlwZS5kaXNjb3VudCA9IEZhY2FkZS5wcm94eSgncHJvcGVydGllcy5kaXNjb3VudCcpO1xuXG4vKipcbiAqIERlc2NyaXB0aW9uXG4gKi9cblxuVHJhY2sucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gRmFjYWRlLnByb3h5KCdwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uJyk7XG5cbi8qKlxuICogUGxhblxuICovXG5cblRyYWNrLnByb3RvdHlwZS5wbGFuID0gRmFjYWRlLnByb3h5KCdwcm9wZXJ0aWVzLnBsYW4nKTtcblxuLyoqXG4gKiBPcmRlciBpZC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblRyYWNrLnByb3RvdHlwZS5vcmRlcklkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMucHJveHkoJ3Byb3BlcnRpZXMuaWQnKVxuICAgIHx8IHRoaXMucHJveHkoJ3Byb3BlcnRpZXMub3JkZXJJZCcpO1xufTtcblxuLyoqXG4gKiBHZXQgc3VidG90YWwuXG4gKlxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG5cblRyYWNrLnByb3RvdHlwZS5zdWJ0b3RhbCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBzdWJ0b3RhbCA9IGdldCh0aGlzLnByb3BlcnRpZXMoKSwgJ3N1YnRvdGFsJyk7XG4gIHZhciB0b3RhbCA9IHRoaXMudG90YWwoKTtcbiAgdmFyIG47XG5cbiAgaWYgKHN1YnRvdGFsKSByZXR1cm4gc3VidG90YWw7XG4gIGlmICghdG90YWwpIHJldHVybiAwO1xuICBpZiAobiA9IHRoaXMudGF4KCkpIHRvdGFsIC09IG47XG4gIGlmIChuID0gdGhpcy5zaGlwcGluZygpKSB0b3RhbCAtPSBuO1xuICBpZiAobiA9IHRoaXMuZGlzY291bnQoKSkgdG90YWwgKz0gbjtcblxuICByZXR1cm4gdG90YWw7XG59O1xuXG4vKipcbiAqIEdldCBwcm9kdWN0cy5cbiAqXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5UcmFjay5wcm90b3R5cGUucHJvZHVjdHMgPSBmdW5jdGlvbigpe1xuICB2YXIgcHJvcHMgPSB0aGlzLnByb3BlcnRpZXMoKTtcbiAgdmFyIHByb2R1Y3RzID0gZ2V0KHByb3BzLCAncHJvZHVjdHMnKTtcbiAgcmV0dXJuICdhcnJheScgPT0gdHlwZShwcm9kdWN0cylcbiAgICA/IHByb2R1Y3RzXG4gICAgOiBbXTtcbn07XG5cbi8qKlxuICogR2V0IHF1YW50aXR5LlxuICpcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuXG5UcmFjay5wcm90b3R5cGUucXVhbnRpdHkgPSBmdW5jdGlvbigpe1xuICB2YXIgcHJvcHMgPSB0aGlzLm9iai5wcm9wZXJ0aWVzIHx8IHt9O1xuICByZXR1cm4gcHJvcHMucXVhbnRpdHkgfHwgMTtcbn07XG5cbi8qKlxuICogR2V0IGN1cnJlbmN5LlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5UcmFjay5wcm90b3R5cGUuY3VycmVuY3kgPSBmdW5jdGlvbigpe1xuICB2YXIgcHJvcHMgPSB0aGlzLm9iai5wcm9wZXJ0aWVzIHx8IHt9O1xuICByZXR1cm4gcHJvcHMuY3VycmVuY3kgfHwgJ1VTRCc7XG59O1xuXG4vKipcbiAqIEJBQ0tXQVJEUyBDT01QQVRJQklMSVRZOiBzaG91bGQgcHJvYmFibHkgcmUtZXhhbWluZSB3aGVyZSB0aGVzZSBjb21lIGZyb20uXG4gKi9cblxuVHJhY2sucHJvdG90eXBlLnJlZmVycmVyID0gRmFjYWRlLnByb3h5KCdwcm9wZXJ0aWVzLnJlZmVycmVyJyk7XG5UcmFjay5wcm90b3R5cGUucXVlcnkgPSBGYWNhZGUucHJveHkoJ29wdGlvbnMucXVlcnknKTtcblxuLyoqXG4gKiBHZXQgdGhlIGNhbGwncyBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbGlhc2VzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuVHJhY2sucHJvdG90eXBlLnByb3BlcnRpZXMgPSBmdW5jdGlvbiAoYWxpYXNlcykge1xuICB2YXIgcmV0ID0gdGhpcy5maWVsZCgncHJvcGVydGllcycpIHx8IHt9O1xuICBhbGlhc2VzID0gYWxpYXNlcyB8fCB7fTtcblxuICBmb3IgKHZhciBhbGlhcyBpbiBhbGlhc2VzKSB7XG4gICAgdmFyIHZhbHVlID0gbnVsbCA9PSB0aGlzW2FsaWFzXVxuICAgICAgPyB0aGlzLnByb3h5KCdwcm9wZXJ0aWVzLicgKyBhbGlhcylcbiAgICAgIDogdGhpc1thbGlhc10oKTtcbiAgICBpZiAobnVsbCA9PSB2YWx1ZSkgY29udGludWU7XG4gICAgcmV0W2FsaWFzZXNbYWxpYXNdXSA9IHZhbHVlO1xuICAgIGRlbGV0ZSByZXRbYWxpYXNdO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBjYWxsJ3MgdXNlcm5hbWUuXG4gKlxuICogQHJldHVybiB7U3RyaW5nIG9yIFVuZGVmaW5lZH1cbiAqL1xuXG5UcmFjay5wcm90b3R5cGUudXNlcm5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLnByb3h5KCd0cmFpdHMudXNlcm5hbWUnKSB8fFxuICAgICAgICAgdGhpcy5wcm94eSgncHJvcGVydGllcy51c2VybmFtZScpIHx8XG4gICAgICAgICB0aGlzLnVzZXJJZCgpIHx8XG4gICAgICAgICB0aGlzLnNlc3Npb25JZCgpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGNhbGwncyBlbWFpbCwgdXNpbmcgYW4gdGhlIHVzZXIgSUQgaWYgaXQncyBhIHZhbGlkIGVtYWlsLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZyBvciBVbmRlZmluZWR9XG4gKi9cblxuVHJhY2sucHJvdG90eXBlLmVtYWlsID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZW1haWwgPSB0aGlzLnByb3h5KCd0cmFpdHMuZW1haWwnKTtcbiAgZW1haWwgPSBlbWFpbCB8fCB0aGlzLnByb3h5KCdwcm9wZXJ0aWVzLmVtYWlsJyk7XG4gIGlmIChlbWFpbCkgcmV0dXJuIGVtYWlsO1xuXG4gIHZhciB1c2VySWQgPSB0aGlzLnVzZXJJZCgpO1xuICBpZiAoaXNFbWFpbCh1c2VySWQpKSByZXR1cm4gdXNlcklkO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGNhbGwncyByZXZlbnVlLCBwYXJzaW5nIGl0IGZyb20gYSBzdHJpbmcgd2l0aCBhbiBvcHRpb25hbCBsZWFkaW5nXG4gKiBkb2xsYXIgc2lnbi5cbiAqXG4gKiBGb3IgcHJvZHVjdHMvc2VydmljZXMgdGhhdCBkb24ndCBoYXZlIHNoaXBwaW5nIGFuZCBhcmUgbm90IGRpcmVjdGx5IHRheGVkLFxuICogdGhleSBvbmx5IGNhcmUgYWJvdXQgdHJhY2tpbmcgYHJldmVudWVgLiBUaGVzZSBhcmUgdGhpbmdzIGxpa2VcbiAqIFNhYVMgY29tcGFuaWVzLCB3aG8gc2VsbCBtb250aGx5IHN1YnNjcmlwdGlvbnMuIFRoZSBzdWJzY3JpcHRpb25zIGFyZW4ndFxuICogdGF4ZWQgZGlyZWN0bHksIGFuZCBzaW5jZSBpdCdzIGEgZGlnaXRhbCBwcm9kdWN0LCBpdCBoYXMgbm8gc2hpcHBpbmcuXG4gKlxuICogVGhlIG9ubHkgY2FzZSB3aGVyZSB0aGVyZSdzIGEgZGlmZmVyZW5jZSBiZXR3ZWVuIGByZXZlbnVlYCBhbmQgYHRvdGFsYFxuICogKGluIHRoZSBjb250ZXh0IG9mIGFuYWx5dGljcykgaXMgb24gZWNvbW1lcmNlIHBsYXRmb3Jtcywgd2hlcmUgdGhleSB3YW50XG4gKiB0aGUgYHJldmVudWVgIGZ1bmN0aW9uIHRvIGFjdHVhbGx5IHJldHVybiB0aGUgYHRvdGFsYCAod2hpY2ggaW5jbHVkZXNcbiAqIHRheCBhbmQgc2hpcHBpbmcsIHRvdGFsID0gc3VidG90YWwgKyB0YXggKyBzaGlwcGluZykuIFRoaXMgaXMgcHJvYmFibHlcbiAqIGJlY2F1c2Ugb24gdGhlaXIgYmFja2VuZCB0aGV5IGFzc3VtZSB0YXggYW5kIHNoaXBwaW5nIGhhcyBiZWVuIGFwcGxpZWQgdG9cbiAqIHRoZSB2YWx1ZSwgYW5kIHNvIGNhbiBnZXQgdGhlIHJldmVudWUgb24gdGhlaXIgb3duLlxuICpcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuXG5UcmFjay5wcm90b3R5cGUucmV2ZW51ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJldmVudWUgPSB0aGlzLnByb3h5KCdwcm9wZXJ0aWVzLnJldmVudWUnKTtcbiAgdmFyIGV2ZW50ID0gdGhpcy5ldmVudCgpO1xuXG4gIC8vIGl0J3MgYWx3YXlzIHJldmVudWUsIHVubGVzcyBpdCdzIGNhbGxlZCBkdXJpbmcgYW4gb3JkZXIgY29tcGxldGlvbi5cbiAgaWYgKCFyZXZlbnVlICYmIGV2ZW50ICYmIGV2ZW50Lm1hdGNoKC9jb21wbGV0ZWQgP29yZGVyL2kpKSB7XG4gICAgcmV2ZW51ZSA9IHRoaXMucHJveHkoJ3Byb3BlcnRpZXMudG90YWwnKTtcbiAgfVxuXG4gIHJldHVybiBjdXJyZW5jeShyZXZlbnVlKTtcbn07XG5cbi8qKlxuICogR2V0IGNlbnRzLlxuICpcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuXG5UcmFjay5wcm90b3R5cGUuY2VudHMgPSBmdW5jdGlvbigpe1xuICB2YXIgcmV2ZW51ZSA9IHRoaXMucmV2ZW51ZSgpO1xuICByZXR1cm4gJ251bWJlcicgIT0gdHlwZW9mIHJldmVudWVcbiAgICA/IHRoaXMudmFsdWUoKSB8fCAwXG4gICAgOiByZXZlbnVlICogMTAwO1xufTtcblxuLyoqXG4gKiBBIHV0aWxpdHkgdG8gdHVybiB0aGUgcGllY2VzIG9mIGEgdHJhY2sgY2FsbCBpbnRvIGFuIGlkZW50aWZ5LiBVc2VkIGZvclxuICogaW50ZWdyYXRpb25zIHdpdGggc3VwZXIgcHJvcGVydGllcyBvciByYXRlIGxpbWl0cy5cbiAqXG4gKiBUT0RPOiByZW1vdmUgbWUuXG4gKlxuICogQHJldHVybiB7RmFjYWRlfVxuICovXG5cblRyYWNrLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGpzb24gPSB0aGlzLmpzb24oKTtcbiAganNvbi50cmFpdHMgPSB0aGlzLnRyYWl0cygpO1xuICByZXR1cm4gbmV3IElkZW50aWZ5KGpzb24pO1xufTtcblxuLyoqXG4gKiBHZXQgZmxvYXQgZnJvbSBjdXJyZW5jeSB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSB2YWxcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuXG5mdW5jdGlvbiBjdXJyZW5jeSh2YWwpIHtcbiAgaWYgKCF2YWwpIHJldHVybjtcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSByZXR1cm4gdmFsO1xuICBpZiAodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHJldHVybjtcblxuICB2YWwgPSB2YWwucmVwbGFjZSgvXFwkL2csICcnKTtcbiAgdmFsID0gcGFyc2VGbG9hdCh2YWwpO1xuXG4gIGlmICghaXNOYU4odmFsKSkgcmV0dXJuIHZhbDtcbn1cbiIsIlxudmFyIGluaGVyaXQgPSByZXF1aXJlKCcuL3V0aWxzJykuaW5oZXJpdDtcbnZhciBGYWNhZGUgPSByZXF1aXJlKCcuL2ZhY2FkZScpO1xudmFyIFRyYWNrID0gcmVxdWlyZSgnLi90cmFjaycpO1xuXG4vKipcbiAqIEV4cG9zZSBgUGFnZWAgZmFjYWRlXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBQYWdlO1xuXG4vKipcbiAqIEluaXRpYWxpemUgbmV3IGBQYWdlYCBmYWNhZGUgd2l0aCBgZGljdGlvbmFyeWAuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRpY3Rpb25hcnlcbiAqICAgQHBhcmFtIHtTdHJpbmd9IGNhdGVnb3J5XG4gKiAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiAgIEBwYXJhbSB7T2JqZWN0fSB0cmFpdHNcbiAqICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBQYWdlKGRpY3Rpb25hcnkpe1xuICBGYWNhZGUuY2FsbCh0aGlzLCBkaWN0aW9uYXJ5KTtcbn1cblxuLyoqXG4gKiBJbmhlcml0IGZyb20gYEZhY2FkZWBcbiAqL1xuXG5pbmhlcml0KFBhZ2UsIEZhY2FkZSk7XG5cbi8qKlxuICogR2V0IHRoZSBmYWNhZGUncyBhY3Rpb24uXG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cblBhZ2UucHJvdG90eXBlLnR5cGUgPVxuUGFnZS5wcm90b3R5cGUuYWN0aW9uID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICdwYWdlJztcbn07XG5cbi8qKlxuICogRmllbGRzXG4gKi9cblxuUGFnZS5wcm90b3R5cGUuY2F0ZWdvcnkgPSBGYWNhZGUuZmllbGQoJ2NhdGVnb3J5Jyk7XG5QYWdlLnByb3RvdHlwZS5uYW1lID0gRmFjYWRlLmZpZWxkKCduYW1lJyk7XG5cbi8qKlxuICogUHJveGllcy5cbiAqL1xuXG5QYWdlLnByb3RvdHlwZS50aXRsZSA9IEZhY2FkZS5wcm94eSgncHJvcGVydGllcy50aXRsZScpO1xuUGFnZS5wcm90b3R5cGUucGF0aCA9IEZhY2FkZS5wcm94eSgncHJvcGVydGllcy5wYXRoJyk7XG5QYWdlLnByb3RvdHlwZS51cmwgPSBGYWNhZGUucHJveHkoJ3Byb3BlcnRpZXMudXJsJyk7XG5cbi8qKlxuICogUmVmZXJyZXIuXG4gKi9cblxuUGFnZS5wcm90b3R5cGUucmVmZXJyZXIgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5wcm94eSgncHJvcGVydGllcy5yZWZlcnJlcicpXG4gICAgfHwgdGhpcy5wcm94eSgnY29udGV4dC5yZWZlcnJlci51cmwnKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBwYWdlIHByb3BlcnRpZXMgbWl4aW5nIGBjYXRlZ29yeWAgYW5kIGBuYW1lYC5cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuUGFnZS5wcm90b3R5cGUucHJvcGVydGllcyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBwcm9wcyA9IHRoaXMuZmllbGQoJ3Byb3BlcnRpZXMnKSB8fCB7fTtcbiAgdmFyIGNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yeSgpO1xuICB2YXIgbmFtZSA9IHRoaXMubmFtZSgpO1xuICBpZiAoY2F0ZWdvcnkpIHByb3BzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gIGlmIChuYW1lKSBwcm9wcy5uYW1lID0gbmFtZTtcbiAgcmV0dXJuIHByb3BzO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIHBhZ2UgZnVsbE5hbWUuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cblBhZ2UucHJvdG90eXBlLmZ1bGxOYW1lID0gZnVuY3Rpb24oKXtcbiAgdmFyIGNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yeSgpO1xuICB2YXIgbmFtZSA9IHRoaXMubmFtZSgpO1xuICByZXR1cm4gbmFtZSAmJiBjYXRlZ29yeVxuICAgID8gY2F0ZWdvcnkgKyAnICcgKyBuYW1lXG4gICAgOiBuYW1lO1xufTtcblxuLyoqXG4gKiBHZXQgZXZlbnQgd2l0aCBgbmFtZWAuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cblBhZ2UucHJvdG90eXBlLmV2ZW50ID0gZnVuY3Rpb24obmFtZSl7XG4gIHJldHVybiBuYW1lXG4gICAgPyAnVmlld2VkICcgKyBuYW1lICsgJyBQYWdlJ1xuICAgIDogJ0xvYWRlZCBhIFBhZ2UnO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0IHRoaXMgUGFnZSB0byBhIFRyYWNrIGZhY2FkZSB3aXRoIGBuYW1lYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7VHJhY2t9XG4gKi9cblxuUGFnZS5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbihuYW1lKXtcbiAgdmFyIHByb3BzID0gdGhpcy5wcm9wZXJ0aWVzKCk7XG4gIHJldHVybiBuZXcgVHJhY2soe1xuICAgIGV2ZW50OiB0aGlzLmV2ZW50KG5hbWUpLFxuICAgIHRpbWVzdGFtcDogdGhpcy50aW1lc3RhbXAoKSxcbiAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQoKSxcbiAgICBwcm9wZXJ0aWVzOiBwcm9wc1xuICB9KTtcbn07XG4iLCJcbnZhciBpbmhlcml0ID0gcmVxdWlyZSgnLi91dGlscycpLmluaGVyaXQ7XG52YXIgUGFnZSA9IHJlcXVpcmUoJy4vcGFnZScpO1xudmFyIFRyYWNrID0gcmVxdWlyZSgnLi90cmFjaycpO1xuXG4vKipcbiAqIEV4cG9zZSBgU2NyZWVuYCBmYWNhZGVcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNjcmVlbjtcblxuLyoqXG4gKiBJbml0aWFsaXplIG5ldyBgU2NyZWVuYCBmYWNhZGUgd2l0aCBgZGljdGlvbmFyeWAuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRpY3Rpb25hcnlcbiAqICAgQHBhcmFtIHtTdHJpbmd9IGNhdGVnb3J5XG4gKiAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiAgIEBwYXJhbSB7T2JqZWN0fSB0cmFpdHNcbiAqICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBTY3JlZW4oZGljdGlvbmFyeSl7XG4gIFBhZ2UuY2FsbCh0aGlzLCBkaWN0aW9uYXJ5KTtcbn1cblxuLyoqXG4gKiBJbmhlcml0IGZyb20gYFBhZ2VgXG4gKi9cblxuaW5oZXJpdChTY3JlZW4sIFBhZ2UpO1xuXG4vKipcbiAqIEdldCB0aGUgZmFjYWRlJ3MgYWN0aW9uLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuU2NyZWVuLnByb3RvdHlwZS50eXBlID1cblNjcmVlbi5wcm90b3R5cGUuYWN0aW9uID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICdzY3JlZW4nO1xufTtcblxuLyoqXG4gKiBHZXQgZXZlbnQgd2l0aCBgbmFtZWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuU2NyZWVuLnByb3RvdHlwZS5ldmVudCA9IGZ1bmN0aW9uKG5hbWUpe1xuICByZXR1cm4gbmFtZVxuICAgID8gJ1ZpZXdlZCAnICsgbmFtZSArICcgU2NyZWVuJ1xuICAgIDogJ0xvYWRlZCBhIFNjcmVlbic7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgdGhpcyBTY3JlZW4uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1RyYWNrfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5TY3JlZW4ucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24obmFtZSl7XG4gIHZhciBwcm9wcyA9IHRoaXMucHJvcGVydGllcygpO1xuICByZXR1cm4gbmV3IFRyYWNrKHtcbiAgICBldmVudDogdGhpcy5ldmVudChuYW1lKSxcbiAgICB0aW1lc3RhbXA6IHRoaXMudGltZXN0YW1wKCksXG4gICAgY29udGV4dDogdGhpcy5jb250ZXh0KCksXG4gICAgcHJvcGVydGllczogcHJvcHNcbiAgfSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIHN0cmluZ2lmeSA9IHJlcXVpcmUoJ3F1ZXJ5c3RyaW5nJykuc3RyaW5naWZ5O1xudmFyIHN1YiA9IHJlcXVpcmUoJ3N1YnN0aXR1dGUnKTtcblxuLyoqXG4gKiBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIHBpeGVsIGxvYWRlci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocGF0aCl7XG4gIHJldHVybiBmdW5jdGlvbihxdWVyeSwgb2JqLCBmbil7XG4gICAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIG9iaikgZm4gPSBvYmosIG9iaiA9IHt9O1xuICAgIG9iaiA9IG9iaiB8fCB7fTtcbiAgICBmbiA9IGZuIHx8IGZ1bmN0aW9uKCl7fTtcbiAgICB2YXIgdXJsID0gc3ViKHBhdGgsIG9iaik7XG4gICAgdmFyIGltZyA9IG5ldyBJbWFnZTtcbiAgICBpbWcub25lcnJvciA9IGVycm9yKGZuLCAnZmFpbGVkIHRvIGxvYWQgcGl4ZWwnLCBpbWcpO1xuICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpeyBmbigpOyB9O1xuICAgIHF1ZXJ5ID0gc3RyaW5naWZ5KHF1ZXJ5KTtcbiAgICBpZiAocXVlcnkpIHF1ZXJ5ID0gJz8nICsgcXVlcnk7XG4gICAgaW1nLnNyYyA9IHVybCArIHF1ZXJ5O1xuICAgIGltZy53aWR0aCA9IDE7XG4gICAgaW1nLmhlaWdodCA9IDE7XG4gICAgcmV0dXJuIGltZztcbiAgfTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGFuIGVycm9yIGhhbmRsZXIuXG4gKlxuICogQHBhcmFtIHtGdWNudGlvbn0gZm5cbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWdcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZXJyb3IoZm4sIG1lc3NhZ2UsIGltZyl7XG4gIHJldHVybiBmdW5jdGlvbihlKXtcbiAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICBlcnIuZXZlbnQgPSBlO1xuICAgIGVyci5zb3VyY2UgPSBpbWc7XG4gICAgZm4oZXJyKTtcbiAgfTtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBlbmNvZGUgPSBlbmNvZGVVUklDb21wb25lbnQ7XG52YXIgZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50O1xudmFyIHRyaW0gPSByZXF1aXJlKCd0cmltJyk7XG52YXIgdHlwZSA9IHJlcXVpcmUoJ3R5cGUnKTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gcXVlcnkgYHN0cmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24oc3RyKXtcbiAgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBzdHIpIHJldHVybiB7fTtcblxuICBzdHIgPSB0cmltKHN0cik7XG4gIGlmICgnJyA9PSBzdHIpIHJldHVybiB7fTtcbiAgaWYgKCc/JyA9PSBzdHIuY2hhckF0KDApKSBzdHIgPSBzdHIuc2xpY2UoMSk7XG5cbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgcGFpcnMgPSBzdHIuc3BsaXQoJyYnKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwYXJ0cyA9IHBhaXJzW2ldLnNwbGl0KCc9Jyk7XG4gICAgdmFyIGtleSA9IGRlY29kZShwYXJ0c1swXSk7XG4gICAgdmFyIG07XG5cbiAgICBpZiAobSA9IC8oXFx3KylcXFsoXFxkKylcXF0vLmV4ZWMoa2V5KSkge1xuICAgICAgb2JqW21bMV1dID0gb2JqW21bMV1dIHx8IFtdO1xuICAgICAgb2JqW21bMV1dW21bMl1dID0gZGVjb2RlKHBhcnRzWzFdKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIG9ialtwYXJ0c1swXV0gPSBudWxsID09IHBhcnRzWzFdXG4gICAgICA/ICcnXG4gICAgICA6IGRlY29kZShwYXJ0c1sxXSk7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcblxuLyoqXG4gKiBTdHJpbmdpZnkgdGhlIGdpdmVuIGBvYmpgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5zdHJpbmdpZnkgPSBmdW5jdGlvbihvYmope1xuICBpZiAoIW9iaikgcmV0dXJuICcnO1xuICB2YXIgcGFpcnMgPSBbXTtcblxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG5cbiAgICBpZiAoJ2FycmF5JyA9PSB0eXBlKHZhbHVlKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7ICsraSkge1xuICAgICAgICBwYWlycy5wdXNoKGVuY29kZShrZXkgKyAnWycgKyBpICsgJ10nKSArICc9JyArIGVuY29kZSh2YWx1ZVtpXSkpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcGFpcnMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZShvYmpba2V5XSkpO1xuICB9XG5cbiAgcmV0dXJuIHBhaXJzLmpvaW4oJyYnKTtcbn07XG4iLCJcbi8qKlxuICogRXhwb3NlIGBzdWJzdGl0dXRlYFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gc3Vic3RpdHV0ZTtcblxuLyoqXG4gKiBUeXBlLlxuICovXG5cbnZhciB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBTdWJzdGl0dXRlIGA6cHJvcGAgd2l0aCB0aGUgZ2l2ZW4gYG9iamAgaW4gYHN0cmBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge09iamVjdCBvciBBcnJheX0gb2JqXG4gKiBAcGFyYW0ge1JlZ0V4cH0gZXhwclxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBzdWJzdGl0dXRlKHN0ciwgb2JqLCBleHByKXtcbiAgaWYgKCFvYmopIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIGFuIG9iamVjdCcpO1xuICBleHByID0gZXhwciB8fCAvOihcXHcrKS9nO1xuICByZXR1cm4gc3RyLnJlcGxhY2UoZXhwciwgZnVuY3Rpb24oXywgcHJvcCl7XG4gICAgc3dpdGNoICh0eXBlLmNhbGwob2JqKSkge1xuICAgICAgY2FzZSAnW29iamVjdCBPYmplY3RdJzpcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gb2JqW3Byb3BdID8gb2JqW3Byb3BdIDogXztcbiAgICAgIGNhc2UgJ1tvYmplY3QgQXJyYXldJzpcbiAgICAgICAgdmFyIHZhbCA9IG9iai5zaGlmdCgpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB2YWwgPyB2YWwgOiBfO1xuICAgIH1cbiAgfSk7XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0aWNrID0gcmVxdWlyZSgnbmV4dC10aWNrJyk7XG5cbi8qKlxuICogRXhwb3NlIGBCdWdIZXJkYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQnVnSGVyZCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0J1Z0hlcmQnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnQnVnSGVyZENvbmZpZycpXG4gIC5nbG9iYWwoJ19idWdIZXJkJylcbiAgLm9wdGlvbignYXBpS2V5JywgJycpXG4gIC5vcHRpb24oJ3Nob3dGZWVkYmFja1RhYicsIHRydWUpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy93d3cuYnVnaGVyZC5jb20vc2lkZWJhcnYyLmpzP2FwaWtleT17eyBhcGlLZXkgfX1cIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9zdXBwb3J0LmJ1Z2hlcmQuY29tL2hvbWVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkJ1Z0hlcmQucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93LkJ1Z0hlcmRDb25maWcgPSB7IGZlZWRiYWNrOiB7IGhpZGU6ICF0aGlzLm9wdGlvbnMuc2hvd0ZlZWRiYWNrVGFiIH19O1xuICB2YXIgcmVhZHkgPSB0aGlzLnJlYWR5O1xuICB0aGlzLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB0aWNrKHJlYWR5KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkJ1Z0hlcmQucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISB3aW5kb3cuX2J1Z0hlcmQ7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJ2V4dGVuZCcpO1xudmFyIG9uRXJyb3IgPSByZXF1aXJlKCdvbi1lcnJvcicpO1xuXG4vKipcbiAqIFVNRCA/XG4gKi9cblxudmFyIHVtZCA9ICdmdW5jdGlvbicgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kO1xuXG4vKipcbiAqIFNvdXJjZS5cbiAqL1xuXG52YXIgc3JjID0gJy8vZDJ3eThmN2E5dXJzbm0uY2xvdWRmcm9udC5uZXQvYnVnc25hZy0yLm1pbi5qcyc7XG5cbi8qKlxuICogRXhwb3NlIGBCdWdzbmFnYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQnVnc25hZyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0J1Z3NuYWcnKVxuICAuZ2xvYmFsKCdCdWdzbmFnJylcbiAgLm9wdGlvbignYXBpS2V5JywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiJyArIHNyYyArICdcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vYnVnc25hZy5jb20vZG9jcy9ub3RpZmllcnMvanNcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkJ1Z3NuYWcucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIGlmICh1bWQpIHtcbiAgICB3aW5kb3cucmVxdWlyZShbc3JjXSwgZnVuY3Rpb24oYnVnc25hZyl7XG4gICAgICBidWdzbmFnLmFwaUtleSA9IHNlbGYub3B0aW9ucy5hcGlLZXk7XG4gICAgICB3aW5kb3cuQnVnc25hZyA9IGJ1Z3NuYWc7XG4gICAgICBzZWxmLnJlYWR5KCk7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgd2luZG93LkJ1Z3NuYWcuYXBpS2V5ID0gc2VsZi5vcHRpb25zLmFwaUtleTtcbiAgICBzZWxmLnJlYWR5KCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5CdWdzbmFnLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMub2JqZWN0KHdpbmRvdy5CdWdzbmFnKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5CdWdzbmFnLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgd2luZG93LkJ1Z3NuYWcubWV0YURhdGEgPSB3aW5kb3cuQnVnc25hZy5tZXRhRGF0YSB8fCB7fTtcbiAgZXh0ZW5kKHdpbmRvdy5CdWdzbmFnLm1ldGFEYXRhLCBpZGVudGlmeS50cmFpdHMoKSk7XG59O1xuIiwiXG4vKipcbiAqIEV4cG9zZSBgb25FcnJvcmAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBvbkVycm9yO1xuXG5cbi8qKlxuICogQ2FsbGJhY2tzLlxuICovXG5cbnZhciBjYWxsYmFja3MgPSBbXTtcblxuXG4vKipcbiAqIFByZXNlcnZlIGV4aXN0aW5nIGhhbmRsZXIuXG4gKi9cblxuaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIHdpbmRvdy5vbmVycm9yKSBjYWxsYmFja3MucHVzaCh3aW5kb3cub25lcnJvcik7XG5cblxuLyoqXG4gKiBCaW5kIHRvIGB3aW5kb3cub25lcnJvcmAuXG4gKi9cblxud2luZG93Lm9uZXJyb3IgPSBoYW5kbGVyO1xuXG5cbi8qKlxuICogRXJyb3IgaGFuZGxlci5cbiAqL1xuXG5mdW5jdGlvbiBoYW5kbGVyICgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGZuOyBmbiA9IGNhbGxiYWNrc1tpXTsgaSsrKSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5cbi8qKlxuICogQ2FsbCBhIGBmbmAgb24gYHdpbmRvdy5vbmVycm9yYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbmZ1bmN0aW9uIG9uRXJyb3IgKGZuKSB7XG4gIGNhbGxiYWNrcy5wdXNoKGZuKTtcbiAgaWYgKHdpbmRvdy5vbmVycm9yICE9IGhhbmRsZXIpIHtcbiAgICBjYWxsYmFja3MucHVzaCh3aW5kb3cub25lcnJvcik7XG4gICAgd2luZG93Lm9uZXJyb3IgPSBoYW5kbGVyO1xuICB9XG59IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCdkZWZhdWx0cycpO1xudmFyIG9uQm9keSA9IHJlcXVpcmUoJ29uLWJvZHknKTtcblxuLyoqXG4gKiBFeHBvc2UgYENoYXJ0YmVhdGAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIENoYXJ0YmVhdCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0NoYXJ0YmVhdCcpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfc2ZfYXN5bmNfY29uZmlnJylcbiAgLmdsb2JhbCgnX3NmX2VuZHB0JylcbiAgLmdsb2JhbCgncFNVUEVSRkxZJylcbiAgLm9wdGlvbignZG9tYWluJywgJycpXG4gIC5vcHRpb24oJ3VpZCcsIG51bGwpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9zdGF0aWMuY2hhcnRiZWF0LmNvbS9qcy9jaGFydGJlYXQuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9jaGFydGJlYXQuY29tL2RvY3MvY29uZmlndXJhdGlvbl92YXJpYWJsZXMvXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5DaGFydGJlYXQucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHdpbmRvdy5fc2ZfYXN5bmNfY29uZmlnID0gd2luZG93Ll9zZl9hc3luY19jb25maWcgfHwge307XG4gIHdpbmRvdy5fc2ZfYXN5bmNfY29uZmlnLnVzZUNhbm9uaWNhbCA9IHRydWU7XG4gIGRlZmF1bHRzKHdpbmRvdy5fc2ZfYXN5bmNfY29uZmlnLCB0aGlzLm9wdGlvbnMpO1xuXG4gIG9uQm9keShmdW5jdGlvbigpe1xuICAgIHdpbmRvdy5fc2ZfZW5kcHQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAvLyBOb3RlOiBDaGFydGJlYXQgZGVwZW5kcyBvbiBkb2N1bWVudC5ib2R5IGV4aXN0aW5nIHNvIHRoZSBzY3JpcHQgZG9lc1xuICAgIC8vIG5vdCBsb2FkIHVudGlsIHRoYXQgaXMgY29uZmlybWVkLiBPdGhlcndpc2UgaXQgbWF5IHRyaWdnZXIgZXJyb3JzLlxuICAgIHNlbGYubG9hZChzZWxmLnJlYWR5KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkNoYXJ0YmVhdC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhIHdpbmRvdy5wU1VQRVJGTFk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogaHR0cDovL2NoYXJ0YmVhdC5jb20vZG9jcy9oYW5kbGluZ192aXJ0dWFsX3BhZ2VfY2hhbmdlcy9cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5DaGFydGJlYXQucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHByb3BzID0gcGFnZS5wcm9wZXJ0aWVzKCk7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuICB3aW5kb3cucFNVUEVSRkxZLnZpcnR1YWxQYWdlKHByb3BzLnBhdGgsIG5hbWUgfHwgcHJvcHMudGl0bGUpO1xufTtcbiIsIi8qKlxuICogRXhwb3NlIGBkZWZhdWx0c2AuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZGVmYXVsdHM7XG5cbmZ1bmN0aW9uIGRlZmF1bHRzIChkZXN0LCBkZWZhdWx0cykge1xuICBmb3IgKHZhciBwcm9wIGluIGRlZmF1bHRzKSB7XG4gICAgaWYgKCEgKHByb3AgaW4gZGVzdCkpIHtcbiAgICAgIGRlc3RbcHJvcF0gPSBkZWZhdWx0c1twcm9wXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGVzdDtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19jYnEnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xuXG4vKipcbiAqIEhPUFxuICovXG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFN1cHBvcnRlZCBldmVudHNcbiAqL1xuXG52YXIgc3VwcG9ydGVkID0ge1xuICBhY3RpdmF0aW9uOiB0cnVlLFxuICBjaGFuZ2VQbGFuOiB0cnVlLFxuICByZWdpc3RlcjogdHJ1ZSxcbiAgcmVmdW5kOiB0cnVlLFxuICBjaGFyZ2U6IHRydWUsXG4gIGNhbmNlbDogdHJ1ZSxcbiAgbG9naW46IHRydWVcbn07XG5cbi8qKlxuICogRXhwb3NlIGBDaHVybkJlZWAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIENodXJuQmVlID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQ2h1cm5CZWUnKVxuICAuZ2xvYmFsKCdfY2JxJylcbiAgLmdsb2JhbCgnQ2h1cm5CZWUnKVxuICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2FwaS5jaHVybmJlZS5jb20vY2IuanNcIj4nKVxuICAubWFwcGluZygnZXZlbnRzJyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL2NodXJuYmVlLmNvbS9kb2NzXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5DaHVybkJlZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICBwdXNoKCdfc2V0QXBpS2V5JywgdGhpcy5vcHRpb25zLmFwaUtleSk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuQ2h1cm5CZWUucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISB3aW5kb3cuQ2h1cm5CZWU7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IGV2ZW50XG4gKi9cblxuQ2h1cm5CZWUucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgZXZlbnQgPSB0cmFjay5ldmVudCgpO1xuICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHMoZXZlbnQpO1xuICBldmVudHMucHVzaChldmVudCk7XG4gIGVhY2goZXZlbnRzLCBmdW5jdGlvbihldmVudCl7XG4gICAgaWYgKHRydWUgIT0gc3VwcG9ydGVkW2V2ZW50XSkgcmV0dXJuO1xuICAgIHB1c2goZXZlbnQsIHRyYWNrLnByb3BlcnRpZXMoeyByZXZlbnVlOiAnYW1vdW50JyB9KSk7XG4gIH0pO1xufTtcbiIsIlxuLyoqXG4gKiBFeHBvc2UgYGdlbmVyYXRlYC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdlbmVyYXRlO1xuXG5cbi8qKlxuICogR2VuZXJhdGUgYSBnbG9iYWwgcXVldWUgcHVzaGluZyBtZXRob2Qgd2l0aCBgbmFtZWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiAgIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gd3JhcFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gZ2VuZXJhdGUgKG5hbWUsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICB3aW5kb3dbbmFtZV0gfHwgKHdpbmRvd1tuYW1lXSA9IFtdKTtcbiAgICBvcHRpb25zLndyYXAgPT09IGZhbHNlXG4gICAgICA/IHdpbmRvd1tuYW1lXS5wdXNoLmFwcGx5KHdpbmRvd1tuYW1lXSwgYXJncylcbiAgICAgIDogd2luZG93W25hbWVdLnB1c2goYXJncyk7XG4gIH07XG59IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGRhdGUgPSByZXF1aXJlKCdsb2FkLWRhdGUnKTtcbnZhciBkb21pZnkgPSByZXF1aXJlKCdkb21pZnknKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xudmFyIHVzZUh0dHBzID0gcmVxdWlyZSgndXNlLWh0dHBzJyk7XG52YXIgb25Cb2R5ID0gcmVxdWlyZSgnb24tYm9keScpO1xuXG4vKipcbiAqIEV4cG9zZSBgQ2xpY2tUYWxlYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQ2xpY2tUYWxlID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQ2xpY2tUYWxlJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ1dSSW5pdFRpbWUnKVxuICAuZ2xvYmFsKCdDbGlja1RhbGUnKVxuICAuZ2xvYmFsKCdDbGlja1RhbGVTZXRVSUQnKVxuICAuZ2xvYmFsKCdDbGlja1RhbGVGaWVsZCcpXG4gIC5nbG9iYWwoJ0NsaWNrVGFsZUV2ZW50JylcbiAgLm9wdGlvbignaHR0cENkblVybCcsICdodHRwOi8vcy5jbGlja3RhbGUubmV0L1dSZTAuanMnKVxuICAub3B0aW9uKCdodHRwc0NkblVybCcsICcnKVxuICAub3B0aW9uKCdwcm9qZWN0SWQnLCAnJylcbiAgLm9wdGlvbigncmVjb3JkaW5nUmF0aW8nLCAwLjAxKVxuICAub3B0aW9uKCdwYXJ0aXRpb25JZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cInt7c3JjfX1cIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly93aWtpLmNsaWNrdGFsZS5jb20vQXJ0aWNsZS9KYXZhU2NyaXB0X0FQSVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuQ2xpY2tUYWxlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgd2luZG93LldSSW5pdFRpbWUgPSBkYXRlLmdldFRpbWUoKTtcblxuICBvbkJvZHkoZnVuY3Rpb24oYm9keSl7XG4gICAgYm9keS5hcHBlbmRDaGlsZChkb21pZnkoJzxkaXYgaWQ9XCJDbGlja1RhbGVEaXZcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+JykpO1xuICB9KTtcblxuICB2YXIgaHR0cCA9IHRoaXMub3B0aW9ucy5odHRwQ2RuVXJsO1xuICB2YXIgaHR0cHMgPSB0aGlzLm9wdGlvbnMuaHR0cHNDZG5Vcmw7XG4gIGlmICh1c2VIdHRwcygpICYmICFodHRwcykgcmV0dXJuIHRoaXMuZGVidWcoJ2h0dHBzIG9wdGlvbiByZXF1aXJlZCcpO1xuICB2YXIgc3JjID0gdXNlSHR0cHMoKSA/IGh0dHBzIDogaHR0cDtcblxuICB0aGlzLmxvYWQoeyBzcmM6IHNyYyB9LCBmdW5jdGlvbigpe1xuICAgIHdpbmRvdy5DbGlja1RhbGUoXG4gICAgICBzZWxmLm9wdGlvbnMucHJvamVjdElkLFxuICAgICAgc2VsZi5vcHRpb25zLnJlY29yZGluZ1JhdGlvLFxuICAgICAgc2VsZi5vcHRpb25zLnBhcnRpdGlvbklkXG4gICAgKTtcbiAgICBzZWxmLnJlYWR5KCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5DbGlja1RhbGUucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpcy5mbih3aW5kb3cuQ2xpY2tUYWxlKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogaHR0cDovL3dpa2kuY2xpY2t0YWxlLmNvbS9BcnRpY2xlL0NsaWNrVGFsZVRhZyNDbGlja1RhbGVTZXRVSURcbiAqIGh0dHA6Ly93aWtpLmNsaWNrdGFsZS5jb20vQXJ0aWNsZS9DbGlja1RhbGVUYWcjQ2xpY2tUYWxlRmllbGRcbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkNsaWNrVGFsZS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuICB3aW5kb3cuQ2xpY2tUYWxlU2V0VUlEKGlkKTtcbiAgZWFjaChpZGVudGlmeS50cmFpdHMoKSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgd2luZG93LkNsaWNrVGFsZUZpZWxkKGtleSwgdmFsdWUpO1xuICB9KTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cDovL3dpa2kuY2xpY2t0YWxlLmNvbS9BcnRpY2xlL0NsaWNrVGFsZVRhZyNDbGlja1RhbGVFdmVudFxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuQ2xpY2tUYWxlLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgd2luZG93LkNsaWNrVGFsZUV2ZW50KHRyYWNrLmV2ZW50KCkpO1xufTtcbiIsIlxuXG4vKlxuICogTG9hZCBkYXRlLlxuICpcbiAqIEZvciByZWZlcmVuY2U6IGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL3dlYnBlcmZvcm1hbmNlL2Jhc2ljcy9cbiAqL1xuXG52YXIgdGltZSA9IG5ldyBEYXRlKClcbiAgLCBwZXJmID0gd2luZG93LnBlcmZvcm1hbmNlO1xuXG5pZiAocGVyZiAmJiBwZXJmLnRpbWluZyAmJiBwZXJmLnRpbWluZy5yZXNwb25zZUVuZCkge1xuICB0aW1lID0gbmV3IERhdGUocGVyZi50aW1pbmcucmVzcG9uc2VFbmQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRpbWU7IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIElkZW50aWZ5ID0gcmVxdWlyZSgnZmFjYWRlJykuSWRlbnRpZnk7XG52YXIgZXh0ZW5kID0gcmVxdWlyZSgnZXh0ZW5kJyk7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBDbGlja3lgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBDbGlja3kgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdDbGlja3knKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnY2xpY2t5JylcbiAgLmdsb2JhbCgnY2xpY2t5X3NpdGVfaWRzJylcbiAgLmdsb2JhbCgnY2xpY2t5X2N1c3RvbScpXG4gIC5vcHRpb24oJ3NpdGVJZCcsIG51bGwpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9zdGF0aWMuZ2V0Y2xpY2t5LmNvbS9qc1wiPjwvc2NyaXB0PicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL2NsaWNreS5jb20vaGVscC9jdXN0b21pemF0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5DbGlja3kucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG4gIHdpbmRvdy5jbGlja3lfc2l0ZV9pZHMgPSB3aW5kb3cuY2xpY2t5X3NpdGVfaWRzIHx8IFt0aGlzLm9wdGlvbnMuc2l0ZUlkXTtcbiAgdGhpcy5pZGVudGlmeShuZXcgSWRlbnRpZnkoe1xuICAgIHVzZXJJZDogdXNlci5pZCgpLFxuICAgIHRyYWl0czogdXNlci50cmFpdHMoKVxuICB9KSk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuQ2xpY2t5LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMub2JqZWN0KHdpbmRvdy5jbGlja3kpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHA6Ly9jbGlja3kuY29tL2hlbHAvY3VzdG9taXphdGlvbiMvaGVscC9jdXN0b20vbWFudWFsXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuQ2xpY2t5LnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBwcm9wZXJ0aWVzID0gcGFnZS5wcm9wZXJ0aWVzKCk7XG4gIHZhciBjYXRlZ29yeSA9IHBhZ2UuY2F0ZWdvcnkoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG4gIHdpbmRvdy5jbGlja3kubG9nKHByb3BlcnRpZXMucGF0aCwgbmFtZSB8fCBwcm9wZXJ0aWVzLnRpdGxlKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWQgKG9wdGlvbmFsKVxuICovXG5cbkNsaWNreS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHdpbmRvdy5jbGlja3lfY3VzdG9tID0gd2luZG93LmNsaWNreV9jdXN0b20gfHwge307XG4gIHdpbmRvdy5jbGlja3lfY3VzdG9tLnNlc3Npb24gPSB3aW5kb3cuY2xpY2t5X2N1c3RvbS5zZXNzaW9uIHx8IHt9O1xuICBleHRlbmQod2luZG93LmNsaWNreV9jdXN0b20uc2Vzc2lvbiwgaWRlbnRpZnkudHJhaXRzKCkpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwOi8vY2xpY2t5LmNvbS9oZWxwL2N1c3RvbWl6YXRpb24jL2hlbHAvY3VzdG9tL21hbnVhbFxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IGV2ZW50XG4gKi9cblxuQ2xpY2t5LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgd2luZG93LmNsaWNreS5nb2FsKHRyYWNrLmV2ZW50KCksIHRyYWNrLnJldmVudWUoKSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdXNlSHR0cHMgPSByZXF1aXJlKCd1c2UtaHR0cHMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYENvbXNjb3JlYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQ29tc2NvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdjb21TY29yZScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfY29tc2NvcmUnKVxuICAuZ2xvYmFsKCdDT01TQ09SRScpXG4gIC5vcHRpb24oJ2MxJywgJzInKVxuICAub3B0aW9uKCdjMicsICcnKVxuICAudGFnKCdodHRwJywgJzxzY3JpcHQgc3JjPVwiaHR0cDovL2Iuc2NvcmVjYXJkcmVzZWFyY2guY29tL2JlYWNvbi5qc1wiPicpXG4gIC50YWcoJ2h0dHBzJywgJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9zYi5zY29yZWNhcmRyZXNlYXJjaC5jb20vYmVhY29uLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkNvbXNjb3JlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fY29tc2NvcmUgPSB3aW5kb3cuX2NvbXNjb3JlIHx8IFt0aGlzLm9wdGlvbnNdO1xuICB2YXIgbmFtZSA9IHVzZUh0dHBzKCkgPyAnaHR0cHMnIDogJ2h0dHAnO1xuICB0aGlzLmxvYWQobmFtZSwgdGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkNvbXNjb3JlLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LkNPTVNDT1JFO1xufTtcblxuLyoqXG4gKiBQYWdlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Db21zY29yZS5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuQ09NU0NPUkUuYmVhY29uKHRoaXMub3B0aW9ucyk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG5cbi8qKlxuICogRXhwb3NlIGBDcmF6eUVnZ2AgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIENyYXp5RWdnID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQ3JhenkgRWdnJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ0NFMicpXG4gIC5vcHRpb24oJ2FjY291bnROdW1iZXInLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2RubjUwNnlyYmFncmcuY2xvdWRmcm9udC5uZXQvcGFnZXMvc2NyaXB0cy97eyBwYXRoIH19LmpzP3t7IGNhY2hlIH19XCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkNyYXp5RWdnLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBudW1iZXIgPSB0aGlzLm9wdGlvbnMuYWNjb3VudE51bWJlcjtcbiAgdmFyIHBhdGggPSBudW1iZXIuc2xpY2UoMCw0KSArICcvJyArIG51bWJlci5zbGljZSg0KTtcbiAgdmFyIGNhY2hlID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDM2MDAwMDApO1xuICB0aGlzLmxvYWQoeyBwYXRoOiBwYXRoLCBjYWNoZTogY2FjaGUgfSwgdGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkNyYXp5RWdnLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LkNFMjtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19jdXJlYml0cScpO1xudmFyIElkZW50aWZ5ID0gcmVxdWlyZSgnZmFjYWRlJykuSWRlbnRpZnk7XG52YXIgdGhyb3R0bGUgPSByZXF1aXJlKCd0aHJvdHRsZScpO1xudmFyIFRyYWNrID0gcmVxdWlyZSgnZmFjYWRlJykuVHJhY2s7XG52YXIgaXNvID0gcmVxdWlyZSgndG8taXNvLXN0cmluZycpO1xudmFyIGNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xudmFyIGJpbmQgPSByZXF1aXJlKCdiaW5kJyk7XG5cbi8qKlxuICogRXhwb3NlIGBDdXJlYml0YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQ3VyZWJpdCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0N1cmViaXQnKVxuICAuZ2xvYmFsKCdfY3VyZWJpdHEnKVxuICAuZ2xvYmFsKCdjdXJlYml0JylcbiAgLm9wdGlvbignc2l0ZUlkJywgJycpXG4gIC5vcHRpb24oJ2lmcmFtZVdpZHRoJywgJzEwMCUnKVxuICAub3B0aW9uKCdpZnJhbWVIZWlnaHQnLCAnNDgwJylcbiAgLm9wdGlvbignaWZyYW1lQm9yZGVyJywgMClcbiAgLm9wdGlvbignaWZyYW1lSWQnLCAnY3VyZWJpdF9pbnRlZ3JhdGlvbicpXG4gIC5vcHRpb24oJ3Jlc3BvbnNpdmUnLCB0cnVlKVxuICAub3B0aW9uKCdkZXZpY2UnLCAnJylcbiAgLm9wdGlvbignaW5zZXJ0SW50b0lkJywgJycpXG4gIC5vcHRpb24oJ2NhbXBhaWducycsIHt9KVxuICAub3B0aW9uKCdzZXJ2ZXInLCAnaHR0cHM6Ly93d3cuY3VyZWJpdC5jb20nKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vZDJqanp3ODFocWJ1cXYuY2xvdWRmcm9udC5uZXQvaW50ZWdyYXRpb24vY3VyZWJpdC0xLjAubWluLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkN1cmViaXQucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgcHVzaCgnaW5pdCcsIHsgc2l0ZV9pZDogdGhpcy5vcHRpb25zLnNpdGVJZCwgc2VydmVyOiB0aGlzLm9wdGlvbnMuc2VydmVyIH0pO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG5cbiAgLy8gdGhyb3R0bGUgdGhlIGNhbGwgdG8gYHBhZ2VgIHNpbmNlIGN1cmViaXQgbmVlZHMgdG8gYXBwZW5kIGFuIGlmcmFtZVxuICB0aGlzLnBhZ2UgPSB0aHJvdHRsZShiaW5kKHRoaXMsIHRoaXMucGFnZSksIDI1MCk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkN1cmViaXQucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhIXdpbmRvdy5jdXJlYml0O1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIENhbGwgdGhlIGByZWdpc3Rlcl9hZmZpbGlhdGVgIG1ldGhvZCBvZiB0aGUgQ3VyZWJpdCBBUEkgdGhhdCB3aWxsIGxvYWQgYVxuICogY3VzdG9tIGlmcmFtZSBvbnRvIHRoZSBwYWdlLCBvbmx5IGlmIHRoaXMgcGFnZSdzIHBhdGggaXMgbWFya2VkIGFzIGFcbiAqIGNhbXBhaWduLlxuICpcbiAqIGh0dHA6Ly93d3cuY3VyZWJpdC5jb20vZG9jcy9hZmZpbGlhdGUvcmVnaXN0cmF0aW9uXG4gKlxuICogVGhpcyBpcyB0aHJvdHRsZWQgdG8gcHJldmVudCBhY2NpZGVudGFsbHkgZHJhd2luZyB0aGUgaWZyYW1lIG11bHRpcGxlIHRpbWVzLFxuICogZnJvbSBtdWx0aXBsZSBgLnBhZ2UoKWAgY2FsbHMuIFRoZSBgMjUwYCBpcyBmcm9tIHRoZSBjdXJlYml0IHNjcmlwdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5DdXJlYml0LnByb3RvdHlwZS5pbmplY3RJbnRvSWQgPSBmdW5jdGlvbih1cmwsIGlkLCBmbil7XG4gIHZhciBzZXJ2ZXIgPSB0aGlzLm9wdGlvbnMuc2VydmVyO1xuICB3aGVuKGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgfSwgZnVuY3Rpb24oKXtcbiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgc2NyaXB0LnNyYyA9IHVybDtcbiAgICB2YXIgcGFyZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIG9ubG9hZChzY3JpcHQsIGZuKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENhbXBhaWduIHRhZ3MuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuQ3VyZWJpdC5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgdmFyIGNhbXBhaWducyA9IHRoaXMub3B0aW9ucy5jYW1wYWlnbnM7XG4gIHZhciBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICBpZiAoIWNhbXBhaWduc1twYXRoXSkgcmV0dXJuO1xuXG4gIHZhciB0YWdzID0gKGNhbXBhaWduc1twYXRoXSB8fCAnJykuc3BsaXQoJywnKTtcbiAgaWYgKCF0YWdzLmxlbmd0aCkgcmV0dXJuO1xuXG4gIHZhciBzZXR0aW5ncyA9IHtcbiAgICByZXNwb25zaXZlOiB0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZSxcbiAgICBkZXZpY2U6IHRoaXMub3B0aW9ucy5kZXZpY2UsXG4gICAgY2FtcGFpZ25fdGFnczogdGFncyxcbiAgICBpZnJhbWU6IHtcbiAgICAgIHdpZHRoOiB0aGlzLm9wdGlvbnMuaWZyYW1lV2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMub3B0aW9ucy5pZnJhbWVIZWlnaHQsXG4gICAgICBpZDogdGhpcy5vcHRpb25zLmlmcmFtZUlkLFxuICAgICAgZnJhbWVib3JkZXI6IHRoaXMub3B0aW9ucy5pZnJhbWVCb3JkZXIsXG4gICAgICBjb250YWluZXI6IHRoaXMub3B0aW9ucy5pbnNlcnRJbnRvSWRcbiAgICB9XG4gIH07XG5cbiAgdmFyIGlkZW50aWZ5ID0gbmV3IElkZW50aWZ5KHtcbiAgICB1c2VySWQ6IHVzZXIuaWQoKSxcbiAgICB0cmFpdHM6IHVzZXIudHJhaXRzKClcbiAgfSk7XG5cbiAgLy8gaWYgd2UgaGF2ZSBhbiBlbWFpbCwgYWRkIGFueSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlclxuICBpZiAoaWRlbnRpZnkuZW1haWwoKSkge1xuICAgIHNldHRpbmdzLmFmZmlsaWF0ZV9tZW1iZXIgPSB7XG4gICAgICBlbWFpbDogaWRlbnRpZnkuZW1haWwoKSxcbiAgICAgIGZpcnN0X25hbWU6IGlkZW50aWZ5LmZpcnN0TmFtZSgpLFxuICAgICAgbGFzdF9uYW1lOiBpZGVudGlmeS5sYXN0TmFtZSgpLFxuICAgICAgY3VzdG9tZXJfaWQ6IGlkZW50aWZ5LnVzZXJJZCgpXG4gICAgfTtcbiAgfVxuXG4gIHB1c2goJ3JlZ2lzdGVyX2FmZmlsaWF0ZScsIHNldHRpbmdzKTtcbn07XG5cbi8qKlxuICogQ29tcGxldGVkIG9yZGVyLlxuICpcbiAqIEZpcmUgdGhlIEN1cmViaXQgYHJlZ2lzdGVyX3B1cmNoYXNlYCB3aXRoIHRoZSBvcmRlciBkZXRhaWxzIGFuZCBpdGVtcy5cbiAqXG4gKiBodHRwczovL3d3dy5jdXJlYml0LmNvbS9kb2NzL2Vjb21tZXJjZS9jdXN0b21cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkN1cmViaXQucHJvdG90eXBlLmNvbXBsZXRlZE9yZGVyID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgdmFyIG9yZGVySWQgPSB0cmFjay5vcmRlcklkKCk7XG4gIHZhciBwcm9kdWN0cyA9IHRyYWNrLnByb2R1Y3RzKCk7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgdmFyIGl0ZW1zID0gW107XG4gIHZhciBpZGVudGlmeSA9IG5ldyBJZGVudGlmeSh7XG4gICAgdHJhaXRzOiB1c2VyLnRyYWl0cygpLFxuICAgIHVzZXJJZDogdXNlci5pZCgpXG4gIH0pO1xuXG4gIGVhY2gocHJvZHVjdHMsIGZ1bmN0aW9uKHByb2R1Y3Qpe1xuICAgIHZhciB0cmFjayA9IG5ldyBUcmFjayh7IHByb3BlcnRpZXM6IHByb2R1Y3QgfSk7XG4gICAgaXRlbXMucHVzaCh7XG4gICAgICBwcm9kdWN0X2lkOiB0cmFjay5pZCgpIHx8IHRyYWNrLnNrdSgpLFxuICAgICAgcXVhbnRpdHk6IHRyYWNrLnF1YW50aXR5KCksXG4gICAgICBpbWFnZV91cmw6IHByb2R1Y3QuaW1hZ2UsXG4gICAgICBwcmljZTogdHJhY2sucHJpY2UoKSxcbiAgICAgIHRpdGxlOiB0cmFjay5uYW1lKCksXG4gICAgICB1cmw6IHByb2R1Y3QudXJsLFxuICAgIH0pO1xuICB9KTtcblxuICBwdXNoKCdyZWdpc3Rlcl9wdXJjaGFzZScsIHtcbiAgICBvcmRlcl9kYXRlOiBpc28ocHJvcHMuZGF0ZSB8fCBuZXcgRGF0ZSgpKSxcbiAgICBvcmRlcl9udW1iZXI6IG9yZGVySWQsXG4gICAgY291cG9uX2NvZGU6IHRyYWNrLmNvdXBvbigpLFxuICAgIHN1YnRvdGFsOiB0cmFjay50b3RhbCgpLFxuICAgIGN1c3RvbWVyX2lkOiBpZGVudGlmeS51c2VySWQoKSxcbiAgICBmaXJzdF9uYW1lOiBpZGVudGlmeS5maXJzdE5hbWUoKSxcbiAgICBsYXN0X25hbWU6IGlkZW50aWZ5Lmxhc3ROYW1lKCksXG4gICAgZW1haWw6IGlkZW50aWZ5LmVtYWlsKCksXG4gICAgaXRlbXM6IGl0ZW1zXG4gIH0pO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZXhwb3J0cy5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlO1xuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgZnVuY3Rpb24gdGhhdCwgd2hlbiBpbnZva2VkLCBpbnZva2VzIGBmdW5jYCBhdCBtb3N0IG9uZSB0aW1lIHBlclxuICogYHdhaXRgIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBgRnVuY3Rpb25gIGluc3RhbmNlIHRvIHdyYXAuXG4gKiBAcGFyYW0ge051bWJlcn0gd2FpdCBUaGUgbWluaW11bSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgbXVzdCBlbGFwc2UgaW4gYmV0d2VlbiBgZnVuY2AgaW52b2thdGlvbnMuXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBuZXcgZnVuY3Rpb24gdGhhdCB3cmFwcyB0aGUgYGZ1bmNgIGZ1bmN0aW9uIHBhc3NlZCBpbi5cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gdGhyb3R0bGUgKGZ1bmMsIHdhaXQpIHtcbiAgdmFyIHJ0bjsgLy8gcmV0dXJuIHZhbHVlXG4gIHZhciBsYXN0ID0gMDsgLy8gbGFzdCBpbnZva2F0aW9uIHRpbWVzdGFtcFxuICByZXR1cm4gZnVuY3Rpb24gdGhyb3R0bGVkICgpIHtcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdmFyIGRlbHRhID0gbm93IC0gbGFzdDtcbiAgICBpZiAoZGVsdGEgPj0gd2FpdCkge1xuICAgICAgcnRuID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgbGFzdCA9IG5vdztcbiAgICB9XG4gICAgcmV0dXJuIHJ0bjtcbiAgfTtcbn1cbiIsIlxuLyoqXG4gKiBFeHBvc2UgYHRvSXNvU3RyaW5nYC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRvSXNvU3RyaW5nO1xuXG5cbi8qKlxuICogVHVybiBhIGBkYXRlYCBpbnRvIGFuIElTTyBzdHJpbmcuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZS90b0lTT1N0cmluZ1xuICpcbiAqIEBwYXJhbSB7RGF0ZX0gZGF0ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHRvSXNvU3RyaW5nIChkYXRlKSB7XG4gIHJldHVybiBkYXRlLmdldFVUQ0Z1bGxZZWFyKClcbiAgICArICctJyArIHBhZChkYXRlLmdldFVUQ01vbnRoKCkgKyAxKVxuICAgICsgJy0nICsgcGFkKGRhdGUuZ2V0VVRDRGF0ZSgpKVxuICAgICsgJ1QnICsgcGFkKGRhdGUuZ2V0VVRDSG91cnMoKSlcbiAgICArICc6JyArIHBhZChkYXRlLmdldFVUQ01pbnV0ZXMoKSlcbiAgICArICc6JyArIHBhZChkYXRlLmdldFVUQ1NlY29uZHMoKSlcbiAgICArICcuJyArIFN0cmluZygoZGF0ZS5nZXRVVENNaWxsaXNlY29uZHMoKS8xMDAwKS50b0ZpeGVkKDMpKS5zbGljZSgyLCA1KVxuICAgICsgJ1onO1xufVxuXG5cbi8qKlxuICogUGFkIGEgYG51bWJlcmAgd2l0aCBhIHRlbidzIHBsYWNlIHplcm8uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHBhZCAobnVtYmVyKSB7XG4gIHZhciBuID0gbnVtYmVyLnRvU3RyaW5nKCk7XG4gIHJldHVybiBuLmxlbmd0aCA9PT0gMSA/ICcwJyArIG4gOiBuO1xufSIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciB0eXBlO1xuXG50cnkge1xuICB0eXBlID0gcmVxdWlyZSgndHlwZScpO1xufSBjYXRjaChlKXtcbiAgdHlwZSA9IHJlcXVpcmUoJ3R5cGUtY29tcG9uZW50Jyk7XG59XG5cbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBjbG9uZTtcblxuLyoqXG4gKiBDbG9uZXMgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSBhbnkgb2JqZWN0XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGNsb25lKG9iail7XG4gIHN3aXRjaCAodHlwZShvYmopKSB7XG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHZhciBjb3B5ID0ge307XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGNvcHlba2V5XSA9IGNsb25lKG9ialtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNvcHk7XG5cbiAgICBjYXNlICdhcnJheSc6XG4gICAgICB2YXIgY29weSA9IG5ldyBBcnJheShvYmoubGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjb3B5W2ldID0gY2xvbmUob2JqW2ldKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb3B5O1xuXG4gICAgY2FzZSAncmVnZXhwJzpcbiAgICAgIC8vIGZyb20gbWlsbGVybWVkZWlyb3MvYW1kLXV0aWxzIC0gTUlUXG4gICAgICB2YXIgZmxhZ3MgPSAnJztcbiAgICAgIGZsYWdzICs9IG9iai5tdWx0aWxpbmUgPyAnbScgOiAnJztcbiAgICAgIGZsYWdzICs9IG9iai5nbG9iYWwgPyAnZycgOiAnJztcbiAgICAgIGZsYWdzICs9IG9iai5pZ25vcmVDYXNlID8gJ2knIDogJyc7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChvYmouc291cmNlLCBmbGFncyk7XG5cbiAgICBjYXNlICdkYXRlJzpcbiAgICAgIHJldHVybiBuZXcgRGF0ZShvYmouZ2V0VGltZSgpKTtcblxuICAgIGRlZmF1bHQ6IC8vIHN0cmluZywgbnVtYmVyLCBib29sZWFuLCDigKZcbiAgICAgIHJldHVybiBvYmo7XG4gIH1cbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBhbGlhcyA9IHJlcXVpcmUoJ2FsaWFzJyk7XG52YXIgY29udmVydERhdGVzID0gcmVxdWlyZSgnY29udmVydC1kYXRlcycpO1xudmFyIElkZW50aWZ5ID0gcmVxdWlyZSgnZmFjYWRlJykuSWRlbnRpZnk7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcblxuLyoqXG4gKiBFeHBvc2UgYEN1c3RvbWVyaW9gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBDdXN0b21lcmlvID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQ3VzdG9tZXIuaW8nKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2NpbycpXG4gIC5vcHRpb24oJ3NpdGVJZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IGlkPVwiY2lvLXRyYWNrZXJcIiBzcmM9XCJodHRwczovL2Fzc2V0cy5jdXN0b21lci5pby9hc3NldHMvdHJhY2suanNcIiBkYXRhLXNpdGUtaWQ9XCJ7eyBzaXRlSWQgfX1cIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9jdXN0b21lci5pby9kb2NzL2FwaS9qYXZhc2NyaXB0Lmh0bWxcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkN1c3RvbWVyaW8ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9jaW8gPSB3aW5kb3cuX2NpbyB8fCBbXTtcbiAgKGZ1bmN0aW9uKCl7dmFyIGEsYixjOyBhID0gZnVuY3Rpb24oZil7cmV0dXJuIGZ1bmN0aW9uKCl7d2luZG93Ll9jaW8ucHVzaChbZl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpOyB9OyB9OyBiID0gWydpZGVudGlmeScsICd0cmFjayddOyBmb3IgKGMgPSAwOyBjIDwgYi5sZW5ndGg7IGMrKykge3dpbmRvdy5fY2lvW2JbY11dID0gYShiW2NdKTsgfSB9KSgpO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkN1c3RvbWVyaW8ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAoISEgd2luZG93Ll9jaW8pICYmICh3aW5kb3cuX2Npby5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIGh0dHA6Ly9jdXN0b21lci5pby9kb2NzL2FwaS9qYXZhc2NyaXB0Lmh0bWwjc2VjdGlvbi1JZGVudGlmeV9jdXN0b21lcnNcbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkN1c3RvbWVyaW8ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICBpZiAoIWlkZW50aWZ5LnVzZXJJZCgpKSByZXR1cm4gdGhpcy5kZWJ1ZygndXNlciBpZCByZXF1aXJlZCcpO1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKHsgY3JlYXRlZDogJ2NyZWF0ZWRfYXQnIH0pO1xuICB0cmFpdHMgPSBjb252ZXJ0RGF0ZXModHJhaXRzLCBjb252ZXJ0RGF0ZSk7XG4gIHdpbmRvdy5fY2lvLmlkZW50aWZ5KHRyYWl0cyk7XG59O1xuXG4vKipcbiAqIEdyb3VwLlxuICpcbiAqIEBwYXJhbSB7R3JvdXB9IGdyb3VwXG4gKi9cblxuQ3VzdG9tZXJpby5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbihncm91cCl7XG4gIHZhciB0cmFpdHMgPSBncm91cC50cmFpdHMoKTtcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG5cbiAgdHJhaXRzID0gYWxpYXModHJhaXRzLCBmdW5jdGlvbih0cmFpdCl7XG4gICAgcmV0dXJuICdHcm91cCAnICsgdHJhaXQ7XG4gIH0pO1xuXG4gIHRoaXMuaWRlbnRpZnkobmV3IElkZW50aWZ5KHtcbiAgICB1c2VySWQ6IHVzZXIuaWQoKSxcbiAgICB0cmFpdHM6IHRyYWl0c1xuICB9KSk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIGh0dHA6Ly9jdXN0b21lci5pby9kb2NzL2FwaS9qYXZhc2NyaXB0Lmh0bWwjc2VjdGlvbi1UcmFja19hX2N1c3RvbV9ldmVudFxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuQ3VzdG9tZXJpby5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9wZXJ0aWVzID0gdHJhY2sucHJvcGVydGllcygpO1xuICBwcm9wZXJ0aWVzID0gY29udmVydERhdGVzKHByb3BlcnRpZXMsIGNvbnZlcnREYXRlKTtcbiAgd2luZG93Ll9jaW8udHJhY2sodHJhY2suZXZlbnQoKSwgcHJvcGVydGllcyk7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgYSBkYXRlIHRvIHRoZSBmb3JtYXQgQ3VzdG9tZXIuaW8gc3VwcG9ydHMuXG4gKlxuICogQHBhcmFtIHtEYXRlfSBkYXRlXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gY29udmVydERhdGUoZGF0ZSl7XG4gIHJldHVybiBNYXRoLmZsb29yKGRhdGUuZ2V0VGltZSgpIC8gMTAwMCk7XG59XG4iLCJcbnZhciB0eXBlID0gcmVxdWlyZSgndHlwZScpO1xuXG50cnkge1xuICB2YXIgY2xvbmUgPSByZXF1aXJlKCdjbG9uZScpO1xufSBjYXRjaCAoZSkge1xuICB2YXIgY2xvbmUgPSByZXF1aXJlKCdjbG9uZS1jb21wb25lbnQnKTtcbn1cblxuXG4vKipcbiAqIEV4cG9zZSBgYWxpYXNgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gYWxpYXM7XG5cblxuLyoqXG4gKiBBbGlhcyBhbiBgb2JqZWN0YC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge01peGVkfSBtZXRob2RcbiAqL1xuXG5mdW5jdGlvbiBhbGlhcyAob2JqLCBtZXRob2QpIHtcbiAgc3dpdGNoICh0eXBlKG1ldGhvZCkpIHtcbiAgICBjYXNlICdvYmplY3QnOiByZXR1cm4gYWxpYXNCeURpY3Rpb25hcnkoY2xvbmUob2JqKSwgbWV0aG9kKTtcbiAgICBjYXNlICdmdW5jdGlvbic6IHJldHVybiBhbGlhc0J5RnVuY3Rpb24oY2xvbmUob2JqKSwgbWV0aG9kKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQ29udmVydCB0aGUga2V5cyBpbiBhbiBgb2JqYCB1c2luZyBhIGRpY3Rpb25hcnkgb2YgYGFsaWFzZXNgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbGlhc2VzXG4gKi9cblxuZnVuY3Rpb24gYWxpYXNCeURpY3Rpb25hcnkgKG9iaiwgYWxpYXNlcykge1xuICBmb3IgKHZhciBrZXkgaW4gYWxpYXNlcykge1xuICAgIGlmICh1bmRlZmluZWQgPT09IG9ialtrZXldKSBjb250aW51ZTtcbiAgICBvYmpbYWxpYXNlc1trZXldXSA9IG9ialtrZXldO1xuICAgIGRlbGV0ZSBvYmpba2V5XTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG5cbi8qKlxuICogQ29udmVydCB0aGUga2V5cyBpbiBhbiBgb2JqYCB1c2luZyBhIGBjb252ZXJ0YCBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb252ZXJ0XG4gKi9cblxuZnVuY3Rpb24gYWxpYXNCeUZ1bmN0aW9uIChvYmosIGNvbnZlcnQpIHtcbiAgLy8gaGF2ZSB0byBjcmVhdGUgYW5vdGhlciBvYmplY3Qgc28gdGhhdCBpZTggd29uJ3QgaW5maW5pdGUgbG9vcCBvbiBrZXlzXG4gIHZhciBvdXRwdXQgPSB7fTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikgb3V0cHV0W2NvbnZlcnQoa2V5KV0gPSBvYmpba2V5XTtcbiAgcmV0dXJuIG91dHB1dDtcbn0iLCJcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG5cbnRyeSB7XG4gIHZhciBjbG9uZSA9IHJlcXVpcmUoJ2Nsb25lJyk7XG59IGNhdGNoIChlKSB7XG4gIHZhciBjbG9uZSA9IHJlcXVpcmUoJ2Nsb25lLWNvbXBvbmVudCcpO1xufVxuXG5cbi8qKlxuICogRXhwb3NlIGBjb252ZXJ0RGF0ZXNgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gY29udmVydERhdGVzO1xuXG5cbi8qKlxuICogUmVjdXJzaXZlbHkgY29udmVydCBhbiBgb2JqYCdzIGRhdGVzIHRvIG5ldyB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gY29udmVydFxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGNvbnZlcnREYXRlcyAob2JqLCBjb252ZXJ0KSB7XG4gIG9iaiA9IGNsb25lKG9iaik7XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICB2YXIgdmFsID0gb2JqW2tleV07XG4gICAgaWYgKGlzLmRhdGUodmFsKSkgb2JqW2tleV0gPSBjb252ZXJ0KHZhbCk7XG4gICAgaWYgKGlzLm9iamVjdCh2YWwpKSBvYmpba2V5XSA9IGNvbnZlcnREYXRlcyh2YWwsIGNvbnZlcnQpO1xuICB9XG4gIHJldHVybiBvYmo7XG59IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGFsaWFzID0gcmVxdWlyZSgnYWxpYXMnKTtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcbnZhciBsb2FkID0gcmVxdWlyZSgnbG9hZC1zY3JpcHQnKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19kY3EnKTtcblxuLyoqXG4gKiBFeHBvc2UgYERyaXBgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBEcmlwID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignRHJpcCcpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdkYycpXG4gIC5nbG9iYWwoJ19kY3EnKVxuICAuZ2xvYmFsKCdfZGNzJylcbiAgLm9wdGlvbignYWNjb3VudCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vdGFnLmdldGRyaXAuY29tL3t7IGFjY291bnQgfX0uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuRHJpcC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuX2RjcSA9IHdpbmRvdy5fZGNxIHx8IFtdO1xuICB3aW5kb3cuX2RjcyA9IHdpbmRvdy5fZGNzIHx8IHt9O1xuICB3aW5kb3cuX2Rjcy5hY2NvdW50ID0gdGhpcy5vcHRpb25zLmFjY291bnQ7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuRHJpcC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGlzLm9iamVjdCh3aW5kb3cuZGMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkRyaXAucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHZhciBjZW50cyA9IHRyYWNrLmNlbnRzKCk7XG4gIGlmIChjZW50cykgcHJvcHMudmFsdWUgPSBjZW50cztcbiAgZGVsZXRlIHByb3BzLnJldmVudWU7XG4gIHB1c2goJ3RyYWNrJywgdHJhY2suZXZlbnQoKSwgcHJvcHMpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkRyaXAucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24gKGlkZW50aWZ5KSB7XG4gIHB1c2goJ2lkZW50aWZ5JywgaWRlbnRpZnkudHJhaXRzKCkpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBleHRlbmQgPSByZXF1aXJlKCdleHRlbmQnKTtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIG9uRXJyb3IgPSByZXF1aXJlKCdvbi1lcnJvcicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX2VycnMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEVycm9yY2VwdGlvbmAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEVycm9yY2VwdGlvbiA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0Vycm9yY2VwdGlvbicpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfZXJycycpXG4gIC5vcHRpb24oJ3Byb2plY3RJZCcsICcnKVxuICAub3B0aW9uKCdtZXRhJywgdHJ1ZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2JlYWNvbi5lcnJvcmNlcHRpb24uY29tL3t7IHByb2plY3RJZCB9fS5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2FtcGxpdHVkZS9FcnJvcmNlcHRpb24tSmF2YXNjcmlwdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuRXJyb3JjZXB0aW9uLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fZXJycyA9IHdpbmRvdy5fZXJycyB8fCBbdGhpcy5vcHRpb25zLnByb2plY3RJZF07XG4gIG9uRXJyb3IocHVzaCk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuRXJyb3JjZXB0aW9uLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5fZXJycyAmJiB3aW5kb3cuX2VycnMucHVzaCAhPT0gQXJyYXkucHJvdG90eXBlLnB1c2gpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBodHRwOi8vYmxvZy5lcnJvcmNlcHRpb24uY29tLzIwMTIvMTEvY2FwdHVyZS1jdXN0b20tZGF0YS13aXRoLXlvdXItZXJyb3JzLmh0bWxcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaWRlbnRpZnlcbiAqL1xuXG5FcnJvcmNlcHRpb24ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICBpZiAoIXRoaXMub3B0aW9ucy5tZXRhKSByZXR1cm47XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoKTtcbiAgd2luZG93Ll9lcnJzID0gd2luZG93Ll9lcnJzIHx8IFtdO1xuICB3aW5kb3cuX2VycnMubWV0YSA9IHdpbmRvdy5fZXJycy5tZXRhIHx8IHt9O1xuICBleHRlbmQod2luZG93Ll9lcnJzLm1ldGEsIHRyYWl0cyk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19hYXEnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEV2ZXJnYWdlYCBpbnRlZ3JhdGlvbi5pbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgRXZlcmdhZ2UgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdFdmVyZ2FnZScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfYWFxJylcbiAgLm9wdGlvbignYWNjb3VudCcsICcnKVxuICAub3B0aW9uKCdkYXRhc2V0JywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9jZG4uZXZlcmdhZ2UuY29tL2JlYWNvbi97eyBhY2NvdW50IH19L3t7IGRhdGFzZXQgfX0vc2NyaXB0cy9ldmVyZ2FnZS5taW4uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuRXZlcmdhZ2UucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIGFjY291bnQgPSB0aGlzLm9wdGlvbnMuYWNjb3VudDtcbiAgdmFyIGRhdGFzZXQgPSB0aGlzLm9wdGlvbnMuZGF0YXNldDtcblxuICB3aW5kb3cuX2FhcSA9IHdpbmRvdy5fYWFxIHx8IFtdO1xuICBwdXNoKCdzZXRFdmVyZ2FnZUFjY291bnQnLCBhY2NvdW50KTtcbiAgcHVzaCgnc2V0RGF0YXNldCcsIGRhdGFzZXQpO1xuICBwdXNoKCdzZXRVc2VTaXRlQ29uZmlnJywgdHJ1ZSk7XG5cbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5FdmVyZ2FnZS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX2FhcSAmJiB3aW5kb3cuX2FhcS5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuRXZlcmdhZ2UucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHByb3BzID0gcGFnZS5wcm9wZXJ0aWVzKCk7XG4gIHZhciBuYW1lID0gcGFnZS5uYW1lKCk7XG4gIGlmIChuYW1lKSBwdXNoKCduYW1lUGFnZScsIG5hbWUpO1xuXG4gIGVhY2gocHJvcHMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuICAgIHB1c2goJ3NldEN1c3RvbUZpZWxkJywga2V5LCB2YWx1ZSwgJ3BhZ2UnKTtcbiAgfSk7XG5cbiAgd2luZG93LkV2ZXJnYWdlLmluaXQodHJ1ZSk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuRXZlcmdhZ2UucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgaWYgKCFpZCkgcmV0dXJuO1xuXG4gIHB1c2goJ3NldFVzZXInLCBpZCk7XG5cbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cyh7XG4gICAgZW1haWw6ICd1c2VyRW1haWwnLFxuICAgIG5hbWU6ICd1c2VyTmFtZSdcbiAgfSk7XG5cbiAgZWFjaCh0cmFpdHMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuICAgIHB1c2goJ3NldFVzZXJGaWVsZCcsIGtleSwgdmFsdWUsICdwYWdlJyk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBHcm91cC5cbiAqXG4gKiBAcGFyYW0ge0dyb3VwfSBncm91cFxuICovXG5cbkV2ZXJnYWdlLnByb3RvdHlwZS5ncm91cCA9IGZ1bmN0aW9uKGdyb3VwKXtcbiAgdmFyIHByb3BzID0gZ3JvdXAudHJhaXRzKCk7XG4gIHZhciBpZCA9IGdyb3VwLmdyb3VwSWQoKTtcbiAgaWYgKCFpZCkgcmV0dXJuO1xuXG4gIHB1c2goJ3NldENvbXBhbnknLCBpZCk7XG4gIGVhY2gocHJvcHMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuICAgIHB1c2goJ3NldEFjY291bnRGaWVsZCcsIGtleSwgdmFsdWUsICdwYWdlJyk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkV2ZXJnYWdlLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgcHVzaCgndHJhY2tBY3Rpb24nLCB0cmFjay5ldmVudCgpLCB0cmFjay5wcm9wZXJ0aWVzKCkpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX2ZicScpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbi8qKlxuICogSE9QXG4gKi9cblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogRXhwb3NlIGBGYWNlYm9va2BcbiAqL1xuXG52YXIgRmFjZWJvb2sgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdGYWNlYm9vayBDb252ZXJzaW9uIFRyYWNraW5nJylcbiAgLmdsb2JhbCgnX2ZicScpXG4gIC5vcHRpb24oJ2N1cnJlbmN5JywgJ1VTRCcpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9jb25uZWN0LmZhY2Vib29rLm5ldC9lbl9VUy9mYmRzLmpzXCI+JylcbiAgLm1hcHBpbmcoJ2V2ZW50cycpO1xuXG4vKipcbiAqIEluaXRpYWxpemUgRmFjZWJvb2sgQ29udmVyc2lvbiBUcmFja2luZ1xuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9hZHMtZm9yLXdlYnNpdGVzL2NvbnZlcnNpb24tcGl4ZWwtY29kZS1taWdyYXRpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkZhY2Vib29rLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fZmJxID0gd2luZG93Ll9mYnEgfHwgW107XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbiAgd2luZG93Ll9mYnEubG9hZGVkID0gdHJ1ZTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuRmFjZWJvb2sucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9mYnEgJiYgd2luZG93Ll9mYnEubG9hZGVkKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS9kb2NzL3JlZmVyZW5jZS9hZHMtYXBpL2N1c3RvbS1hdWRpZW5jZS13ZWJzaXRlLWZhcS8jZmJwaXhlbFxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuRmFjZWJvb2sucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgZXZlbnQgPSB0cmFjay5ldmVudCgpO1xuICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHMoZXZlbnQpO1xuICB2YXIgcmV2ZW51ZSA9IHRyYWNrLnJldmVudWUoKSB8fCAwO1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgZWFjaChldmVudHMsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICBwdXNoKCd0cmFjaycsIGV2ZW50LCB7XG4gICAgICB2YWx1ZTogU3RyaW5nKHJldmVudWUudG9GaXhlZCgyKSksXG4gICAgICBjdXJyZW5jeTogc2VsZi5vcHRpb25zLmN1cnJlbmN5XG4gICAgfSk7XG4gIH0pO1xuXG4gIGlmICghZXZlbnRzLmxlbmd0aCkge1xuICAgIHZhciBkYXRhID0gdHJhY2sucHJvcGVydGllcygpO1xuICAgIHB1c2goJ3RyYWNrJywgZXZlbnQsIGRhdGEpO1xuICB9XG59O1xuIiwiXHJcbi8qKlxyXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxyXG4gKi9cclxuXHJcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19meG0nKTtcclxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XHJcbnZhciBUcmFjayA9IHJlcXVpcmUoJ2ZhY2FkZScpLlRyYWNrO1xyXG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcclxuXHJcbi8qKlxyXG4gKiBFeHBvc2UgYEZveE1ldHJpY3NgIGludGVncmF0aW9uLlxyXG4gKi9cclxuXHJcbnZhciBGb3hNZXRyaWNzID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignRm94TWV0cmljcycpXHJcbiAgLmFzc3VtZXNQYWdldmlldygpXHJcbiAgLmdsb2JhbCgnX2Z4bScpXHJcbiAgLm9wdGlvbignYXBwSWQnLCAnJylcclxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vZDM1dGNhN3ZtZWZrcmMuY2xvdWRmcm9udC5uZXQvc2NyaXB0cy97eyBhcHBJZCB9fS5qc1wiPicpO1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUuXHJcbiAqXHJcbiAqIGh0dHA6Ly9mb3htZXRyaWNzLmNvbS9kb2N1bWVudGF0aW9uL2FwaWphdmFzY3JpcHRcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcclxuICovXHJcblxyXG5Gb3hNZXRyaWNzLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XHJcbiAgd2luZG93Ll9meG0gPSB3aW5kb3cuX2Z4bSB8fCBbXTtcclxuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XHJcbn07XHJcblxyXG4vKipcclxuICogTG9hZGVkP1xyXG4gKlxyXG4gKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gKi9cclxuXHJcbkZveE1ldHJpY3MucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XHJcbiAgcmV0dXJuICEhICh3aW5kb3cuX2Z4bSAmJiB3aW5kb3cuX2Z4bS5hcHBJZCk7XHJcbn07XHJcblxyXG4vKipcclxuICogUGFnZS5cclxuICpcclxuICogQHBhcmFtIHtQYWdlfSBwYWdlXHJcbiAqL1xyXG5cclxuRm94TWV0cmljcy5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xyXG4gIHZhciBwcm9wZXJ0aWVzID0gcGFnZS5wcm94eSgncHJvcGVydGllcycpO1xyXG4gIHZhciBjYXRlZ29yeSA9IHBhZ2UuY2F0ZWdvcnkoKTtcclxuICB2YXIgbmFtZSA9IHBhZ2UubmFtZSgpO1xyXG4gIHRoaXMuX2NhdGVnb3J5ID0gY2F0ZWdvcnk7IC8vIHN0b3JlIGZvciBsYXRlclxyXG5cclxuICBwdXNoKFxyXG4gICAgJ19meG0ucGFnZXMudmlldycsXHJcbiAgICBwcm9wZXJ0aWVzLnRpdGxlLCAgIC8vIHRpdGxlXHJcbiAgICBuYW1lLCAgICAgICAgICAgICAgIC8vIG5hbWVcclxuICAgIGNhdGVnb3J5LCAgICAgICAgICAgLy8gY2F0ZWdvcnlcclxuICAgIHByb3BlcnRpZXMudXJsLCAgICAgLy8gdXJsXHJcbiAgICBwcm9wZXJ0aWVzLnJlZmVycmVyIC8vIHJlZmVycmVyXHJcbiAgKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBJZGVudGlmeS5cclxuICpcclxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcclxuICovXHJcblxyXG5Gb3hNZXRyaWNzLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcclxuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcclxuXHJcbiAgaWYgKCFpZCkgcmV0dXJuO1xyXG5cclxuICBwdXNoKFxyXG4gICAgJ19meG0udmlzaXRvci5wcm9maWxlJyxcclxuICAgIGlkLCAgICAgICAgICAgICAgICAgICAgLy8gdXNlciBpZFxyXG4gICAgaWRlbnRpZnkuZmlyc3ROYW1lKCksIC8vIGZpcnN0IG5hbWVcclxuICAgIGlkZW50aWZ5Lmxhc3ROYW1lKCksICAvLyBsYXN0IG5hbWVcclxuICAgIGlkZW50aWZ5LmVtYWlsKCksICAgICAvLyBlbWFpbFxyXG4gICAgaWRlbnRpZnkuYWRkcmVzcygpLCAgIC8vIGFkZHJlc3NcclxuICAgIHVuZGVmaW5lZCwgICAgICAgICAgICAvLyBzb2NpYWxcclxuICAgIHVuZGVmaW5lZCwgICAgICAgICAgICAvLyBwYXJ0bmVyc1xyXG4gICAgaWRlbnRpZnkudHJhaXRzKCkgICAgIC8vIGF0dHJpYnV0ZXNcclxuICApO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRyYWNrLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xyXG4gKi9cclxuXHJcbkZveE1ldHJpY3MucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xyXG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcclxuICB2YXIgY2F0ZWdvcnkgPSB0aGlzLl9jYXRlZ29yeSB8fCBwcm9wcy5jYXRlZ29yeTtcclxuICBwdXNoKHRyYWNrLmV2ZW50KCksIGNhdGVnb3J5LCBwcm9wcyk7XHJcbn07XHJcblxyXG4vKipcclxuICogVmlld2VkIHByb2R1Y3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXHJcbiAqIEBhcGkgcHJpdmF0ZVxyXG4gKi9cclxuXHJcbkZveE1ldHJpY3MucHJvdG90eXBlLnZpZXdlZFByb2R1Y3QgPSBmdW5jdGlvbih0cmFjayl7XHJcbiAgZWNvbW1lcmNlKCdwcm9kdWN0dmlldycsIHRyYWNrKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZW1vdmVkIHByb2R1Y3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXHJcbiAqIEBhcGkgcHJpdmF0ZVxyXG4gKi9cclxuXHJcbkZveE1ldHJpY3MucHJvdG90eXBlLnJlbW92ZWRQcm9kdWN0ID0gZnVuY3Rpb24odHJhY2spe1xyXG4gIGVjb21tZXJjZSgncmVtb3ZlY2FydGl0ZW0nLCB0cmFjayk7XHJcbn07XHJcblxyXG4vKipcclxuICogQWRkZWQgcHJvZHVjdC5cclxuICpcclxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcclxuICogQGFwaSBwcml2YXRlXHJcbiAqL1xyXG5cclxuRm94TWV0cmljcy5wcm90b3R5cGUuYWRkZWRQcm9kdWN0ID0gZnVuY3Rpb24odHJhY2spe1xyXG4gIGVjb21tZXJjZSgnY2FydGl0ZW0nLCB0cmFjayk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ29tcGxldGVkIE9yZGVyLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xyXG4gKiBAYXBpIHByaXZhdGVcclxuICovXHJcblxyXG5Gb3hNZXRyaWNzLnByb3RvdHlwZS5jb21wbGV0ZWRPcmRlciA9IGZ1bmN0aW9uKHRyYWNrKXtcclxuICB2YXIgb3JkZXJJZCA9IHRyYWNrLm9yZGVySWQoKTtcclxuXHJcbiAgLy8gdHJhbnNhY3Rpb25cclxuICBwdXNoKFxyXG4gICAgJ19meG0uZWNvbW1lcmNlLm9yZGVyJyxcclxuICAgIG9yZGVySWQsXHJcbiAgICB0cmFjay5zdWJ0b3RhbCgpLFxyXG4gICAgdHJhY2suc2hpcHBpbmcoKSxcclxuICAgIHRyYWNrLnRheCgpLFxyXG4gICAgdHJhY2suY2l0eSgpLFxyXG4gICAgdHJhY2suc3RhdGUoKSxcclxuICAgIHRyYWNrLnppcCgpLFxyXG4gICAgdHJhY2sucXVhbnRpdHkoKVxyXG4gICk7XHJcblxyXG4gIC8vIGl0ZW1zXHJcbiAgZWFjaCh0cmFjay5wcm9kdWN0cygpLCBmdW5jdGlvbihwcm9kdWN0KXtcclxuICAgIHZhciB0cmFjayA9IG5ldyBUcmFjayh7IHByb3BlcnRpZXM6IHByb2R1Y3QgfSk7XHJcbiAgICBlY29tbWVyY2UoJ3B1cmNoYXNlaXRlbScsIHRyYWNrLCBbXHJcbiAgICAgIHRyYWNrLnF1YW50aXR5KCksXHJcbiAgICAgIHRyYWNrLnByaWNlKCksXHJcbiAgICAgIG9yZGVySWRcclxuICAgIF0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRyYWNrIGVjb21tZXJjZSBgZXZlbnRgIHdpdGggYHRyYWNrYFxyXG4gKiB3aXRoIG9wdGlvbmFsIGBhcnJgIHRvIGFwcGVuZC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxyXG4gKiBAYXBpIHByaXZhdGVcclxuICovXHJcblxyXG5mdW5jdGlvbiBlY29tbWVyY2UoZXZlbnQsIHRyYWNrLCBhcnIpe1xyXG4gIHB1c2guYXBwbHkobnVsbCwgW1xyXG4gICAgJ19meG0uZWNvbW1lcmNlLicgKyBldmVudCxcclxuICAgIHRyYWNrLmlkKCkgfHwgdHJhY2suc2t1KCksXHJcbiAgICB0cmFjay5uYW1lKCksXHJcbiAgICB0cmFjay5jYXRlZ29yeSgpXHJcbiAgXS5jb25jYXQoYXJyIHx8IFtdKSk7XHJcbn1cclxuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJ2JpbmQnKTtcbnZhciB3aGVuID0gcmVxdWlyZSgnd2hlbicpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEZyb250bGVhZmAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEZyb250bGVhZiA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0Zyb250bGVhZicpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfZmwnKVxuICAuZ2xvYmFsKCdfZmxCYXNlVXJsJylcbiAgLm9wdGlvbignYmFzZVVybCcsICdodHRwczovL2FwaS5mcm9udGxlYWYuY29tJylcbiAgLm9wdGlvbigndG9rZW4nLCAnJylcbiAgLm9wdGlvbignc3RyZWFtJywgJycpXG4gIC5vcHRpb24oJ3RyYWNrTmFtZWRQYWdlcycsIGZhbHNlKVxuICAub3B0aW9uKCd0cmFja0NhdGVnb3JpemVkUGFnZXMnLCBmYWxzZSlcbiAgLnRhZygnPHNjcmlwdCBpZD1cIl9mbFwiIHNyYz1cInt7IGJhc2VVcmwgfX0vbGliL3RyYWNrZXIuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9kb2NzLmZyb250bGVhZi5jb20vIy90ZWNobmljYWwtaW1wbGVtZW50YXRpb24vdHJhY2tpbmctY3VzdG9tZXJzL3RyYWNraW5nLWJlYWNvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuRnJvbnRsZWFmLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fZmwgPSB3aW5kb3cuX2ZsIHx8IFtdO1xuICB3aW5kb3cuX2ZsQmFzZVVybCA9IHdpbmRvdy5fZmxCYXNlVXJsIHx8IHRoaXMub3B0aW9ucy5iYXNlVXJsO1xuICB0aGlzLl9wdXNoKCdzZXRBcGlUb2tlbicsIHRoaXMub3B0aW9ucy50b2tlbik7XG4gIHRoaXMuX3B1c2goJ3NldFN0cmVhbScsIHRoaXMub3B0aW9ucy5zdHJlYW0pO1xuICB2YXIgbG9hZGVkID0gYmluZCh0aGlzLCB0aGlzLmxvYWRlZCk7XG4gIHZhciByZWFkeSA9IHRoaXMucmVhZHk7XG4gIHRoaXMubG9hZCh7IGJhc2VVcmw6IHdpbmRvdy5fZmxCYXNlVXJsIH0sIHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Gcm9udGxlYWYucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpcy5hcnJheSh3aW5kb3cuX2ZsKSAmJiB3aW5kb3cuX2ZsLnJlYWR5ID09PSB0cnVlO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkZyb250bGVhZi5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB1c2VySWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgaWYgKHVzZXJJZCkge1xuICAgIHRoaXMuX3B1c2goJ3NldFVzZXInLCB7XG4gICAgICBpZDogdXNlcklkLFxuICAgICAgbmFtZTogaWRlbnRpZnkubmFtZSgpIHx8IGlkZW50aWZ5LnVzZXJuYW1lKCksXG4gICAgICBkYXRhOiBjbGVhbihpZGVudGlmeS50cmFpdHMoKSlcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBHcm91cC5cbiAqXG4gKiBAcGFyYW0ge0dyb3VwfSBncm91cFxuICovXG5cbkZyb250bGVhZi5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbihncm91cCl7XG4gIHZhciBncm91cElkID0gZ3JvdXAuZ3JvdXBJZCgpO1xuICBpZiAoZ3JvdXBJZCkge1xuICAgIHRoaXMuX3B1c2goJ3NldEFjY291bnQnLCB7XG4gICAgICBpZDogZ3JvdXBJZCxcbiAgICAgIG5hbWU6IGdyb3VwLnByb3h5KCd0cmFpdHMubmFtZScpLFxuICAgICAgZGF0YTogY2xlYW4oZ3JvdXAudHJhaXRzKCkpXG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5Gcm9udGxlYWYucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcbiAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgLy8gY2F0ZWdvcml6ZWQgcGFnZXNcbiAgaWYgKGNhdGVnb3J5ICYmIG9wdHMudHJhY2tDYXRlZ29yaXplZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKGNhdGVnb3J5KSk7XG4gIH1cblxuICAvLyBuYW1lZCBwYWdlc1xuICBpZiAobmFtZSAmJiBvcHRzLnRyYWNrTmFtZWRQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjayhuYW1lKSk7XG4gIH1cbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5Gcm9udGxlYWYucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgZXZlbnQgPSB0cmFjay5ldmVudCgpO1xuICB0aGlzLl9wdXNoKCdldmVudCcsIGV2ZW50LCBjbGVhbih0cmFjay5wcm9wZXJ0aWVzKCkpKTtcbn07XG5cbi8qKlxuICogUHVzaCBhIGNvbW1hbmQgb250byB0aGUgZ2xvYmFsIEZyb250bGVhZiBxdWV1ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY29tbWFuZFxuICogQHJldHVybiB7T2JqZWN0fSBhcmdzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5Gcm9udGxlYWYucHJvdG90eXBlLl9wdXNoID0gZnVuY3Rpb24oY29tbWFuZCl7XG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB3aW5kb3cuX2ZsLnB1c2goZnVuY3Rpb24odCl7IHRbY29tbWFuZF0uYXBwbHkoY29tbWFuZCwgYXJncyk7IH0pO1xufTtcblxuLyoqXG4gKiBDbGVhbiBhbGwgbmVzdGVkIG9iamVjdHMgYW5kIGFycmF5cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBjbGVhbihvYmope1xuICB2YXIgcmV0ID0ge307XG5cbiAgLy8gUmVtb3ZlIHRyYWl0cy9wcm9wZXJ0aWVzIHRoYXQgYXJlIGFscmVhZHkgcmVwcmVzZW50ZWRcbiAgLy8gb3V0c2lkZSBvZiB0aGUgZGF0YSBjb250YWluZXJcbiAgdmFyIGV4Y2x1ZGVLZXlzID0gW1wiaWRcIixcIm5hbWVcIixcImZpcnN0TmFtZVwiLFwibGFzdE5hbWVcIl07XG4gIHZhciBsZW4gPSBleGNsdWRlS2V5cy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjbGVhcihvYmosIGV4Y2x1ZGVLZXlzW2ldKTtcbiAgfVxuXG4gIC8vIEZsYXR0ZW4gbmVzdGVkIGhpZXJhcmNoeSwgcHJlc2VydmluZyBhcnJheXNcbiAgb2JqID0gZmxhdHRlbihvYmopO1xuXG4gIC8vIERpc2NhcmQgbnVsbHMsIHJlcHJlc2VudCBhcnJheXMgYXMgY29tbWEtc2VwYXJhdGVkIHN0cmluZ3NcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIHZhciB2YWwgPSBvYmpba2V5XTtcbiAgICBpZiAobnVsbCA9PSB2YWwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChpcy5hcnJheSh2YWwpKSB7XG4gICAgICByZXRba2V5XSA9IHZhbC50b1N0cmluZygpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcmV0W2tleV0gPSB2YWw7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIFJlbW92ZSBhIHByb3BlcnR5IGZyb20gYW4gb2JqZWN0IGlmIHNldC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBjbGVhcihvYmosIGtleSl7XG4gIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgIGRlbGV0ZSBvYmpba2V5XTtcbiAgfVxufVxuXG4vKipcbiAqIEZsYXR0ZW4gYSBuZXN0ZWQgb2JqZWN0IGludG8gYSBzaW5nbGUgbGV2ZWwgc3BhY2UtZGVsaW1pdGVkXG4gKiBoaWVyYXJjaHkuXG4gKlxuICogQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2h1Z2hzay9mbGF0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZVxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZmxhdHRlbihzb3VyY2Upe1xuICB2YXIgb3V0cHV0ID0ge307XG5cbiAgZnVuY3Rpb24gc3RlcChvYmplY3QsIHByZXYpe1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIHZhciB2YWx1ZSA9IG9iamVjdFtrZXldO1xuICAgICAgdmFyIG5ld0tleSA9IHByZXYgPyBwcmV2ICsgJyAnICsga2V5IDoga2V5O1xuXG4gICAgICBpZiAoIWlzLmFycmF5KHZhbHVlKSAmJiBpcy5vYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBzdGVwKHZhbHVlLCBuZXdLZXkpO1xuICAgICAgfVxuXG4gICAgICBvdXRwdXRbbmV3S2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIHN0ZXAoc291cmNlKTtcblxuICByZXR1cm4gb3V0cHV0O1xufVxuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG5cbi8qKlxuICogRXhwb3NlIGBGdWxsU3RvcnlgIGludGVncmF0aW9uLlxuICpcbiAqIGh0dHBzOi8vd3d3LmZ1bGxzdG9yeS5jb20vZG9jcy9kZXZlbG9wZXJcbiAqL1xuXG52YXIgRnVsbFN0b3J5ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignRnVsbFN0b3J5JylcbiAgLm9wdGlvbignb3JnJywgJycpXG4gIC5vcHRpb24oJ2RlYnVnJywgZmFsc2UpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly93d3cuZnVsbHN0b3J5LmNvbS9zL2ZzLmpzXCI+PC9zY3JpcHQ+JylcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICovXG5cbkZ1bGxTdG9yeS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIHdpbmRvd1snX2ZzX2RlYnVnJ10gPSB0aGlzLm9wdGlvbnMuZGVidWc7XG4gIHdpbmRvd1snX2ZzX2hvc3QnXSA9ICd3d3cuZnVsbHN0b3J5LmNvbSc7XG4gIHdpbmRvd1snX2ZzX29yZyddID0gdGhpcy5vcHRpb25zLm9yZztcbiAgKGZ1bmN0aW9uKG0sbixlLHQsbCxvLGcseSl7XG4gICAgZz1tW2VdPWZ1bmN0aW9uKGEsYil7Zy5xP2cucS5wdXNoKFthLGJdKTpnLl9hcGkoYSxiKTt9O2cucT1bXTtcbiAgICBnLmlkZW50aWZ5PWZ1bmN0aW9uKGksdil7ZyhsLHt1aWQ6aX0pO2lmKHYpZyhsLHYpfTtnLnNldFVzZXJWYXJzPWZ1bmN0aW9uKHYpe0ZTKGwsdil9O1xuICAgIGcuc2V0U2Vzc2lvblZhcnM9ZnVuY3Rpb24odil7RlMoJ3Nlc3Npb24nLHYpfTtnLnNldFBhZ2VWYXJzPWZ1bmN0aW9uKHYpe0ZTKCdwYWdlJyx2KX07XG4gIH0pKHdpbmRvdyxkb2N1bWVudCwnRlMnLCdzY3JpcHQnLCd1c2VyJyk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuRnVsbFN0b3J5LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LkZTO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkZ1bGxTdG9yeS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKCk7XG4gIHRyYWl0cy5kaXNwbGF5TmFtZSA9IGlkZW50aWZ5Lm5hbWUoKTtcbiAgdHJhaXRzLmVtYWlsID0gaWRlbnRpZnkuZW1haWwoKTtcbiAgaWYgKCFpZCkgcmV0dXJuOyAvLyBpZCBpcyByZXF1aXJlZFxuICBpZiAoIXRyYWl0cykgcmV0dXJuIHdpbmRvdy5GUy5pZGVudGlmeShpZCk7XG4gIHdpbmRvdy5GUy5pZGVudGlmeShpZCwgdHJhaXRzKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19nYXVnZXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEdhdWdlc2AgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEdhdWdlcyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0dhdWdlcycpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfZ2F1Z2VzJylcbiAgLm9wdGlvbignc2l0ZUlkJywgJycpXG4gIC50YWcoJzxzY3JpcHQgaWQ9XCJnYXVnZXMtdHJhY2tlclwiIHNyYz1cIi8vc2VjdXJlLmdhdWcuZXMvdHJhY2suanNcIiBkYXRhLXNpdGUtaWQ9XCJ7eyBzaXRlSWQgfX1cIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplIEdhdWdlcy5cbiAqXG4gKiBodHRwOi8vZ2V0LmdhdWcuZXMvZG9jdW1lbnRhdGlvbi90cmFja2luZy9cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkdhdWdlcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuX2dhdWdlcyA9IHdpbmRvdy5fZ2F1Z2VzIHx8IFtdO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkdhdWdlcy5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX2dhdWdlcyAmJiB3aW5kb3cuX2dhdWdlcy5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuR2F1Z2VzLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHB1c2goJ3RyYWNrJyk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgb25Cb2R5ID0gcmVxdWlyZSgnb24tYm9keScpO1xuXG4vKipcbiAqIEV4cG9zZSBgR2V0U2F0aXNmYWN0aW9uYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgR2V0U2F0aXNmYWN0aW9uID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignR2V0IFNhdGlzZmFjdGlvbicpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdHU0ZOJylcbiAgLm9wdGlvbignd2lkZ2V0SWQnLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCJodHRwczovL2xvYWRlci5lbmdhZ2UuZ3Nmbi51cy9sb2FkZXIuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vY29uc29sZS5nZXRzYXRpc2ZhY3Rpb24uY29tL3N0YXJ0LzEwMTAyMj9zaWdudXA9dHJ1ZSNlbmdhZ2VcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkdldFNhdGlzZmFjdGlvbi5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB3aWRnZXQgPSB0aGlzLm9wdGlvbnMud2lkZ2V0SWQ7XG4gIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdmFyIGlkID0gZGl2LmlkID0gJ2dldHNhdC13aWRnZXQtJyArIHdpZGdldDtcbiAgb25Cb2R5KGZ1bmN0aW9uKGJvZHkpeyBib2R5LmFwcGVuZENoaWxkKGRpdik7IH0pO1xuXG4gIC8vIHVzdWFsbHkgdGhlIHNuaXBwZXQgaXMgc3luYywgc28gd2FpdCBmb3IgaXQgYmVmb3JlIGluaXRpYWxpemluZyB0aGUgdGFiXG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIHdpbmRvdy5HU0ZOLmxvYWRXaWRnZXQod2lkZ2V0LCB7IGNvbnRhaW5lcklkOiBpZCB9KTtcbiAgICBzZWxmLnJlYWR5KCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5HZXRTYXRpc2ZhY3Rpb24ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISB3aW5kb3cuR1NGTjtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19nYXEnKTtcbnZhciBsZW5ndGggPSByZXF1aXJlKCdvYmplY3QnKS5sZW5ndGg7XG52YXIgY2Fub25pY2FsID0gcmVxdWlyZSgnY2Fub25pY2FsJyk7XG52YXIgdXNlSHR0cHMgPSByZXF1aXJlKCd1c2UtaHR0cHMnKTtcbnZhciBUcmFjayA9IHJlcXVpcmUoJ2ZhY2FkZScpLlRyYWNrO1xudmFyIGNhbGxiYWNrID0gcmVxdWlyZSgnY2FsbGJhY2snKTtcbnZhciBsb2FkID0gcmVxdWlyZSgnbG9hZC1zY3JpcHQnKTtcbnZhciBrZXlzID0gcmVxdWlyZSgnb2JqZWN0Jykua2V5cztcbnZhciBzZWxlY3QgPSByZXF1aXJlKCdzZWxlY3QnKTtcbnZhciBkb3QgPSByZXF1aXJlKCdvYmotY2FzZScpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG52YXIgdHlwZSA9IHJlcXVpcmUoJ3R5cGUnKTtcbnZhciB1cmwgPSByZXF1aXJlKCd1cmwnKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG52YXIgZ3JvdXA7XG52YXIgdXNlcjtcblxuLyoqXG4gKiBFeHBvc2UgcGx1Z2luLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGZ1bmN0aW9uKGFuYWx5dGljcyl7XG4gIGFuYWx5dGljcy5hZGRJbnRlZ3JhdGlvbihHQSk7XG4gIGdyb3VwID0gYW5hbHl0aWNzLmdyb3VwKCk7XG4gIHVzZXIgPSBhbmFseXRpY3MudXNlcigpO1xufTtcblxuLyoqXG4gKiBFeHBvc2UgYEdBYCBpbnRlZ3JhdGlvbi5cbiAqXG4gKiBodHRwOi8vc3VwcG9ydC5nb29nbGUuY29tL2FuYWx5dGljcy9iaW4vYW5zd2VyLnB5P2hsPWVuJmFuc3dlcj0yNTU4ODY3XG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ2Fqcy9tZXRob2RzL2dhSlNBcGlCYXNpY0NvbmZpZ3VyYXRpb24jX2dhdC5HQV9UcmFja2VyXy5fc2V0U2l0ZVNwZWVkU2FtcGxlUmF0ZVxuICovXG5cbnZhciBHQSA9IGV4cG9ydHMuSW50ZWdyYXRpb24gPSBpbnRlZ3JhdGlvbignR29vZ2xlIEFuYWx5dGljcycpXG4gIC5yZWFkeU9uTG9hZCgpXG4gIC5nbG9iYWwoJ2dhJylcbiAgLmdsb2JhbCgnZ2FwbHVnaW5zJylcbiAgLmdsb2JhbCgnX2dhcScpXG4gIC5nbG9iYWwoJ0dvb2dsZUFuYWx5dGljc09iamVjdCcpXG4gIC5vcHRpb24oJ2Fub255bWl6ZUlwJywgZmFsc2UpXG4gIC5vcHRpb24oJ2NsYXNzaWMnLCBmYWxzZSlcbiAgLm9wdGlvbignZG9tYWluJywgJ2F1dG8nKVxuICAub3B0aW9uKCdkb3VibGVDbGljaycsIGZhbHNlKVxuICAub3B0aW9uKCdlbmhhbmNlZEVjb21tZXJjZScsIGZhbHNlKVxuICAub3B0aW9uKCdlbmhhbmNlZExpbmtBdHRyaWJ1dGlvbicsIGZhbHNlKVxuICAub3B0aW9uKCdub25JbnRlcmFjdGlvbicsIGZhbHNlKVxuICAub3B0aW9uKCdpZ25vcmVkUmVmZXJyZXJzJywgbnVsbClcbiAgLm9wdGlvbignaW5jbHVkZVNlYXJjaCcsIGZhbHNlKVxuICAub3B0aW9uKCdzaXRlU3BlZWRTYW1wbGVSYXRlJywgMSlcbiAgLm9wdGlvbigndHJhY2tpbmdJZCcsICcnKVxuICAub3B0aW9uKCd0cmFja05hbWVkUGFnZXMnLCB0cnVlKVxuICAub3B0aW9uKCd0cmFja0NhdGVnb3JpemVkUGFnZXMnLCB0cnVlKVxuICAub3B0aW9uKCdzZW5kVXNlcklkJywgZmFsc2UpXG4gIC5vcHRpb24oJ21ldHJpY3MnLCB7fSlcbiAgLm9wdGlvbignZGltZW5zaW9ucycsIHt9KVxuICAudGFnKCdsaWJyYXJ5JywgJzxzY3JpcHQgc3JjPVwiLy93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20vYW5hbHl0aWNzLmpzXCI+JylcbiAgLnRhZygnZG91YmxlIGNsaWNrJywgJzxzY3JpcHQgc3JjPVwiLy9zdGF0cy5nLmRvdWJsZWNsaWNrLm5ldC9kYy5qc1wiPicpXG4gIC50YWcoJ2h0dHAnLCAnPHNjcmlwdCBzcmM9XCJodHRwOi8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL2dhLmpzXCI+JylcbiAgLnRhZygnaHR0cHMnLCAnPHNjcmlwdCBzcmM9XCJodHRwczovL3NzbC5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qc1wiPicpO1xuXG4vKipcbiAqIE9uIGBjb25zdHJ1Y3RgIHN3YXAgYW55IGNvbmZpZy1iYXNlZCBtZXRob2RzIHRvIHRoZSBwcm9wZXIgaW1wbGVtZW50YXRpb24uXG4gKi9cblxuR0Eub24oJ2NvbnN0cnVjdCcsIGZ1bmN0aW9uKGludGVncmF0aW9uKXtcbiAgaWYgKGludGVncmF0aW9uLm9wdGlvbnMuY2xhc3NpYykge1xuICAgIGludGVncmF0aW9uLmluaXRpYWxpemUgPSBpbnRlZ3JhdGlvbi5pbml0aWFsaXplQ2xhc3NpYztcbiAgICBpbnRlZ3JhdGlvbi5sb2FkZWQgPSBpbnRlZ3JhdGlvbi5sb2FkZWRDbGFzc2ljO1xuICAgIGludGVncmF0aW9uLnBhZ2UgPSBpbnRlZ3JhdGlvbi5wYWdlQ2xhc3NpYztcbiAgICBpbnRlZ3JhdGlvbi50cmFjayA9IGludGVncmF0aW9uLnRyYWNrQ2xhc3NpYztcbiAgICBpbnRlZ3JhdGlvbi5jb21wbGV0ZWRPcmRlciA9IGludGVncmF0aW9uLmNvbXBsZXRlZE9yZGVyQ2xhc3NpYztcblxuICB9IGVsc2UgaWYgKGludGVncmF0aW9uLm9wdGlvbnMuZW5oYW5jZWRFY29tbWVyY2UpIHtcbiAgICBpbnRlZ3JhdGlvbi52aWV3ZWRQcm9kdWN0ID0gaW50ZWdyYXRpb24udmlld2VkUHJvZHVjdEVuaGFuY2VkO1xuICAgIGludGVncmF0aW9uLmNsaWNrZWRQcm9kdWN0ID0gaW50ZWdyYXRpb24uY2xpY2tlZFByb2R1Y3RFbmhhbmNlZDtcbiAgICBpbnRlZ3JhdGlvbi52aWV3ZWRQcm9kdWN0RGV0YWlscyA9IGludGVncmF0aW9uLnZpZXdlZFByb2R1Y3REZXRhaWxzRW5oYW5jZWQ7XG4gICAgaW50ZWdyYXRpb24uYWRkZWRQcm9kdWN0ID0gaW50ZWdyYXRpb24uYWRkZWRQcm9kdWN0RW5oYW5jZWQ7XG4gICAgaW50ZWdyYXRpb24ucmVtb3ZlZFByb2R1Y3QgPSBpbnRlZ3JhdGlvbi5yZW1vdmVkUHJvZHVjdEVuaGFuY2VkO1xuICAgIGludGVncmF0aW9uLnN0YXJ0ZWRPcmRlciA9IGludGVncmF0aW9uLnN0YXJ0ZWRPcmRlckVuaGFuY2VkO1xuICAgIGludGVncmF0aW9uLnZpZXdlZENoZWNrb3V0U3RlcCA9IGludGVncmF0aW9uLnZpZXdlZENoZWNrb3V0U3RlcEVuaGFuY2VkO1xuICAgIGludGVncmF0aW9uLmNvbXBsZXRlZENoZWNrb3V0U3RlcCA9IGludGVncmF0aW9uLmNvbXBsZXRlZENoZWNrb3V0U3RlcEVuaGFuY2VkO1xuICAgIGludGVncmF0aW9uLnVwZGF0ZWRPcmRlciA9IGludGVncmF0aW9uLnVwZGF0ZWRPcmRlckVuaGFuY2VkO1xuICAgIGludGVncmF0aW9uLmNvbXBsZXRlZE9yZGVyID0gaW50ZWdyYXRpb24uY29tcGxldGVkT3JkZXJFbmhhbmNlZDtcbiAgICBpbnRlZ3JhdGlvbi5yZWZ1bmRlZE9yZGVyID0gaW50ZWdyYXRpb24ucmVmdW5kZWRPcmRlckVuaGFuY2VkO1xuICAgIGludGVncmF0aW9uLnZpZXdlZFByb21vdGlvbiA9IGludGVncmF0aW9uLnZpZXdlZFByb21vdGlvbkVuaGFuY2VkO1xuICAgIGludGVncmF0aW9uLmNsaWNrZWRQcm9tb3Rpb24gPSBpbnRlZ3JhdGlvbi5jbGlja2VkUHJvbW90aW9uRW5oYW5jZWQ7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2FkdmFuY2VkXG4gKi9cblxuR0EucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcblxuICAvLyBzZXR1cCB0aGUgdHJhY2tlciBnbG9iYWxzXG4gIHdpbmRvdy5Hb29nbGVBbmFseXRpY3NPYmplY3QgPSAnZ2EnO1xuICB3aW5kb3cuZ2EgPSB3aW5kb3cuZ2EgfHwgZnVuY3Rpb24oKXtcbiAgICB3aW5kb3cuZ2EucSA9IHdpbmRvdy5nYS5xIHx8IFtdO1xuICAgIHdpbmRvdy5nYS5xLnB1c2goYXJndW1lbnRzKTtcbiAgfTtcbiAgd2luZG93LmdhLmwgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICBpZih3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT0gJ2xvY2FsaG9zdCcpIG9wdHMuZG9tYWluID0gJ25vbmUnO1xuXG4gIHdpbmRvdy5nYSgnY3JlYXRlJywgb3B0cy50cmFja2luZ0lkLCB7XG4gICAgY29va2llRG9tYWluOiBvcHRzLmRvbWFpbiB8fCBHQS5wcm90b3R5cGUuZGVmYXVsdHMuZG9tYWluLCAvLyB0byBwcm90ZWN0IGFnYWluc3QgZW1wdHkgc3RyaW5nXG4gICAgc2l0ZVNwZWVkU2FtcGxlUmF0ZTogb3B0cy5zaXRlU3BlZWRTYW1wbGVSYXRlLFxuICAgIGFsbG93TGlua2VyOiB0cnVlXG4gIH0pO1xuXG4gIC8vIGRpc3BsYXkgYWR2ZXJ0aXNpbmdcbiAgaWYgKG9wdHMuZG91YmxlQ2xpY2spIHtcbiAgICB3aW5kb3cuZ2EoJ3JlcXVpcmUnLCAnZGlzcGxheWZlYXR1cmVzJyk7XG4gIH1cblxuICAvLyBzZW5kIGdsb2JhbCBpZFxuICBpZiAob3B0cy5zZW5kVXNlcklkICYmIHVzZXIuaWQoKSkge1xuICAgIHdpbmRvdy5nYSgnc2V0JywgJ3VzZXJJZCcsIHVzZXIuaWQoKSk7XG4gIH1cblxuICAvLyBhbm9ueW1pemUgYWZ0ZXIgaW5pdGlhbGl6aW5nLCBvdGhlcndpc2UgYSB3YXJuaW5nIGlzIHNob3duXG4gIC8vIGluIGdvb2dsZSBhbmFseXRpY3MgZGVidWdnZXJcbiAgaWYgKG9wdHMuYW5vbnltaXplSXApIHdpbmRvdy5nYSgnc2V0JywgJ2Fub255bWl6ZUlwJywgdHJ1ZSk7XG5cbiAgLy8gY3VzdG9tIGRpbWVuc2lvbnMgJiBtZXRyaWNzXG4gIHZhciBjdXN0b20gPSBtZXRyaWNzKHVzZXIudHJhaXRzKCksIG9wdHMpO1xuICBpZiAobGVuZ3RoKGN1c3RvbSkpIHdpbmRvdy5nYSgnc2V0JywgY3VzdG9tKTtcblxuICB0aGlzLmxvYWQoJ2xpYnJhcnknLCB0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuR0EucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISB3aW5kb3cuZ2FwbHVnaW5zO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9wYWdlc1xuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbkdBLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBjYXRlZ29yeSA9IHBhZ2UuY2F0ZWdvcnkoKTtcbiAgdmFyIHByb3BzID0gcGFnZS5wcm9wZXJ0aWVzKCk7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuICB2YXIgcGFnZXZpZXcgPSB7fTtcbiAgdmFyIHRyYWNrO1xuXG4gIHRoaXMuX2NhdGVnb3J5ID0gY2F0ZWdvcnk7IC8vIHN0b3JlIGZvciBsYXRlclxuXG4gIC8vIHNlbmRcbiAgd2luZG93LmdhKCdzZW5kJywgJ3BhZ2V2aWV3Jywge1xuICAgIHBhZ2U6IHBhdGgocHJvcHMsIHRoaXMub3B0aW9ucyksXG4gICAgdGl0bGU6IG5hbWUgfHwgcHJvcHMudGl0bGUsXG4gICAgbG9jYXRpb246IHByb3BzLnVybFxuICB9KTtcblxuICAvLyBjYXRlZ29yaXplZCBwYWdlc1xuICBpZiAoY2F0ZWdvcnkgJiYgdGhpcy5vcHRpb25zLnRyYWNrQ2F0ZWdvcml6ZWRQYWdlcykge1xuICAgIHRyYWNrID0gcGFnZS50cmFjayhjYXRlZ29yeSk7XG4gICAgdGhpcy50cmFjayh0cmFjaywgeyBub25JbnRlcmFjdGlvbjogMSB9KTtcbiAgfVxuXG4gIC8vIG5hbWVkIHBhZ2VzXG4gIGlmIChuYW1lICYmIHRoaXMub3B0aW9ucy50cmFja05hbWVkUGFnZXMpIHtcbiAgICB0cmFjayA9IHBhZ2UudHJhY2sobmFtZSk7XG4gICAgdGhpcy50cmFjayh0cmFjaywgeyBub25JbnRlcmFjdGlvbjogMSB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZXZlbnRzXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZmllbGQtcmVmZXJlbmNlXG4gKlxuICogQHBhcmFtIHtUcmFja30gZXZlbnRcbiAqL1xuXG5HQS5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjaywgb3B0aW9ucyl7XG4gIHZhciBvcHRzID0gb3B0aW9ucyB8fCB0cmFjay5vcHRpb25zKHRoaXMubmFtZSk7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgIGV2ZW50QWN0aW9uOiB0cmFjay5ldmVudCgpLFxuICAgIGV2ZW50Q2F0ZWdvcnk6IHByb3BzLmNhdGVnb3J5IHx8IHRoaXMuX2NhdGVnb3J5IHx8ICdBbGwnLFxuICAgIGV2ZW50TGFiZWw6IHByb3BzLmxhYmVsLFxuICAgIGV2ZW50VmFsdWU6IGZvcm1hdFZhbHVlKHByb3BzLnZhbHVlIHx8IHRyYWNrLnJldmVudWUoKSksXG4gICAgbm9uSW50ZXJhY3Rpb246ICEhKHByb3BzLm5vbkludGVyYWN0aW9uIHx8IG9wdHMubm9uSW50ZXJhY3Rpb24pXG4gIH0pO1xufTtcblxuLyoqXG4gKiBDb21wbGV0ZWQgb3JkZXIuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2Vjb21tZXJjZVxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2Vjb21tZXJjZSNtdWx0aWN1cnJlbmN5XG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbkdBLnByb3RvdHlwZS5jb21wbGV0ZWRPcmRlciA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHRvdGFsID0gdHJhY2sudG90YWwoKSB8fCB0cmFjay5yZXZlbnVlKCkgfHwgMDtcbiAgdmFyIG9yZGVySWQgPSB0cmFjay5vcmRlcklkKCk7XG4gIHZhciBwcm9kdWN0cyA9IHRyYWNrLnByb2R1Y3RzKCk7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcblxuICAvLyBvcmRlcklkIGlzIHJlcXVpcmVkLlxuICBpZiAoIW9yZGVySWQpIHJldHVybjtcblxuICAvLyByZXF1aXJlIGVjb21tZXJjZVxuICBpZiAoIXRoaXMuZWNvbW1lcmNlKSB7XG4gICAgd2luZG93LmdhKCdyZXF1aXJlJywgJ2Vjb21tZXJjZScpO1xuICAgIHRoaXMuZWNvbW1lcmNlID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIGFkZCB0cmFuc2FjdGlvblxuICB3aW5kb3cuZ2EoJ2Vjb21tZXJjZTphZGRUcmFuc2FjdGlvbicsIHtcbiAgICBhZmZpbGlhdGlvbjogcHJvcHMuYWZmaWxpYXRpb24sXG4gICAgc2hpcHBpbmc6IHRyYWNrLnNoaXBwaW5nKCksXG4gICAgcmV2ZW51ZTogdG90YWwsXG4gICAgdGF4OiB0cmFjay50YXgoKSxcbiAgICBpZDogb3JkZXJJZCxcbiAgICBjdXJyZW5jeTogdHJhY2suY3VycmVuY3koKVxuICB9KTtcblxuICAvLyBhZGQgcHJvZHVjdHNcbiAgZWFjaChwcm9kdWN0cywgZnVuY3Rpb24ocHJvZHVjdCl7XG4gICAgdmFyIHRyYWNrID0gbmV3IFRyYWNrKHsgcHJvcGVydGllczogcHJvZHVjdCB9KTtcbiAgICB3aW5kb3cuZ2EoJ2Vjb21tZXJjZTphZGRJdGVtJywge1xuICAgICAgY2F0ZWdvcnk6IHRyYWNrLmNhdGVnb3J5KCksXG4gICAgICBxdWFudGl0eTogdHJhY2sucXVhbnRpdHkoKSxcbiAgICAgIHByaWNlOiB0cmFjay5wcmljZSgpLFxuICAgICAgbmFtZTogdHJhY2submFtZSgpLFxuICAgICAgc2t1OiB0cmFjay5za3UoKSxcbiAgICAgIGlkOiBvcmRlcklkLFxuICAgICAgY3VycmVuY3k6IHRyYWNrLmN1cnJlbmN5KClcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gc2VuZFxuICB3aW5kb3cuZ2EoJ2Vjb21tZXJjZTpzZW5kJyk7XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUgKGNsYXNzaWMpLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9nYWpzL21ldGhvZHMvZ2FKU0FwaUJhc2ljQ29uZmlndXJhdGlvblxuICovXG5cbkdBLnByb3RvdHlwZS5pbml0aWFsaXplQ2xhc3NpYyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICB2YXIgYW5vbnltaXplID0gb3B0cy5hbm9ueW1pemVJcDtcbiAgdmFyIGRiID0gb3B0cy5kb3VibGVDbGljaztcbiAgdmFyIGRvbWFpbiA9IG9wdHMuZG9tYWluO1xuICB2YXIgZW5oYW5jZWQgPSBvcHRzLmVuaGFuY2VkTGlua0F0dHJpYnV0aW9uO1xuICB2YXIgaWdub3JlID0gb3B0cy5pZ25vcmVkUmVmZXJyZXJzO1xuICB2YXIgc2FtcGxlID0gb3B0cy5zaXRlU3BlZWRTYW1wbGVSYXRlO1xuXG4gIHdpbmRvdy5fZ2FxID0gd2luZG93Ll9nYXEgfHwgW107XG4gIHB1c2goJ19zZXRBY2NvdW50Jywgb3B0cy50cmFja2luZ0lkKTtcbiAgcHVzaCgnX3NldEFsbG93TGlua2VyJywgdHJ1ZSk7XG5cbiAgaWYgKGFub255bWl6ZSkgcHVzaCgnX2dhdC5fYW5vbnltaXplSXAnKTtcbiAgaWYgKGRvbWFpbikgcHVzaCgnX3NldERvbWFpbk5hbWUnLCBkb21haW4pO1xuICBpZiAoc2FtcGxlKSBwdXNoKCdfc2V0U2l0ZVNwZWVkU2FtcGxlUmF0ZScsIHNhbXBsZSk7XG5cbiAgaWYgKGVuaGFuY2VkKSB7XG4gICAgdmFyIHByb3RvY29sID0gJ2h0dHBzOicgPT09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID8gJ2h0dHBzOicgOiAnaHR0cDonO1xuICAgIHZhciBwbHVnaW5VcmwgPSBwcm90b2NvbCArICcvL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9wbHVnaW5zL2dhL2lucGFnZV9saW5raWQuanMnO1xuICAgIHB1c2goJ19yZXF1aXJlJywgJ2lucGFnZV9saW5raWQnLCBwbHVnaW5VcmwpO1xuICB9XG5cbiAgaWYgKGlnbm9yZSkge1xuICAgIGlmICghaXMuYXJyYXkoaWdub3JlKSkgaWdub3JlID0gW2lnbm9yZV07XG4gICAgZWFjaChpZ25vcmUsIGZ1bmN0aW9uIChkb21haW4pIHtcbiAgICAgIHB1c2goJ19hZGRJZ25vcmVkUmVmJywgZG9tYWluKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmICh0aGlzLm9wdGlvbnMuZG91YmxlQ2xpY2spIHtcbiAgICB0aGlzLmxvYWQoJ2RvdWJsZSBjbGljaycsIHRoaXMucmVhZHkpO1xuICB9IGVsc2Uge1xuICAgIHZhciBuYW1lID0gdXNlSHR0cHMoKSA/ICdodHRwcycgOiAnaHR0cCc7XG4gICAgdGhpcy5sb2FkKG5hbWUsIHRoaXMucmVhZHkpO1xuICB9XG59O1xuXG4vKipcbiAqIExvYWRlZD8gKGNsYXNzaWMpXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5HQS5wcm90b3R5cGUubG9hZGVkQ2xhc3NpYyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9nYXEgJiYgd2luZG93Ll9nYXEucHVzaCAhPT0gQXJyYXkucHJvdG90eXBlLnB1c2gpO1xufTtcblxuLyoqXG4gKiBQYWdlIChjbGFzc2ljKS5cbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ2Fqcy9tZXRob2RzL2dhSlNBcGlCYXNpY0NvbmZpZ3VyYXRpb25cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5HQS5wcm90b3R5cGUucGFnZUNsYXNzaWMgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIG9wdHMgPSBwYWdlLm9wdGlvbnModGhpcy5uYW1lKTtcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xuICB2YXIgcHJvcHMgPSBwYWdlLnByb3BlcnRpZXMoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG4gIHZhciB0cmFjaztcblxuICBwdXNoKCdfdHJhY2tQYWdldmlldycsIHBhdGgocHJvcHMsIHRoaXMub3B0aW9ucykpO1xuXG4gIC8vIGNhdGVnb3JpemVkIHBhZ2VzXG4gIGlmIChjYXRlZ29yeSAmJiB0aGlzLm9wdGlvbnMudHJhY2tDYXRlZ29yaXplZFBhZ2VzKSB7XG4gICAgdHJhY2sgPSBwYWdlLnRyYWNrKGNhdGVnb3J5KTtcbiAgICB0aGlzLnRyYWNrKHRyYWNrLCB7IG5vbkludGVyYWN0aW9uOiAxIH0pO1xuICB9XG5cbiAgLy8gbmFtZWQgcGFnZXNcbiAgaWYgKG5hbWUgJiYgdGhpcy5vcHRpb25zLnRyYWNrTmFtZWRQYWdlcykge1xuICAgIHRyYWNrID0gcGFnZS50cmFjayhuYW1lKTtcbiAgICB0aGlzLnRyYWNrKHRyYWNrLCB7IG5vbkludGVyYWN0aW9uOiAxIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIFRyYWNrIChjbGFzc2ljKS5cbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ2Fqcy9tZXRob2RzL2dhSlNBcGlFdmVudFRyYWNraW5nXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5HQS5wcm90b3R5cGUudHJhY2tDbGFzc2ljID0gZnVuY3Rpb24odHJhY2ssIG9wdGlvbnMpe1xuICB2YXIgb3B0cyA9IG9wdGlvbnMgfHwgdHJhY2sub3B0aW9ucyh0aGlzLm5hbWUpO1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHZhciByZXZlbnVlID0gdHJhY2sucmV2ZW51ZSgpO1xuICB2YXIgZXZlbnQgPSB0cmFjay5ldmVudCgpO1xuICB2YXIgY2F0ZWdvcnkgPSB0aGlzLl9jYXRlZ29yeSB8fCBwcm9wcy5jYXRlZ29yeSB8fCAnQWxsJztcbiAgdmFyIGxhYmVsID0gcHJvcHMubGFiZWw7XG4gIHZhciB2YWx1ZSA9IGZvcm1hdFZhbHVlKHJldmVudWUgfHwgcHJvcHMudmFsdWUpO1xuICB2YXIgbm9uSW50ZXJhY3Rpb24gPSAhIShwcm9wcy5ub25JbnRlcmFjdGlvbiB8fCBvcHRzLm5vbkludGVyYWN0aW9uKTtcbiAgcHVzaCgnX3RyYWNrRXZlbnQnLCBjYXRlZ29yeSwgZXZlbnQsIGxhYmVsLCB2YWx1ZSwgbm9uSW50ZXJhY3Rpb24pO1xufTtcblxuLyoqXG4gKiBDb21wbGV0ZWQgb3JkZXIuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2dhanMvZ2FUcmFja2luZ0Vjb21tZXJjZVxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2dhanMvZ2FUcmFja2luZ0Vjb21tZXJjZSNsb2NhbGN1cnJlbmNpZXNcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuR0EucHJvdG90eXBlLmNvbXBsZXRlZE9yZGVyQ2xhc3NpYyA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHRvdGFsID0gdHJhY2sudG90YWwoKSB8fCB0cmFjay5yZXZlbnVlKCkgfHwgMDtcbiAgdmFyIG9yZGVySWQgPSB0cmFjay5vcmRlcklkKCk7XG4gIHZhciBwcm9kdWN0cyA9IHRyYWNrLnByb2R1Y3RzKCkgfHwgW107XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgdmFyIGN1cnJlbmN5ID0gdHJhY2suY3VycmVuY3koKTtcblxuICAvLyByZXF1aXJlZFxuICBpZiAoIW9yZGVySWQpIHJldHVybjtcblxuICAvLyBhZGQgdHJhbnNhY3Rpb25cbiAgcHVzaCgnX2FkZFRyYW5zJ1xuICAgICwgb3JkZXJJZFxuICAgICwgcHJvcHMuYWZmaWxpYXRpb25cbiAgICAsIHRvdGFsXG4gICAgLCB0cmFjay50YXgoKVxuICAgICwgdHJhY2suc2hpcHBpbmcoKVxuICAgICwgdHJhY2suY2l0eSgpXG4gICAgLCB0cmFjay5zdGF0ZSgpXG4gICAgLCB0cmFjay5jb3VudHJ5KCkpO1xuXG4gIC8vIGFkZCBpdGVtc1xuICBlYWNoKHByb2R1Y3RzLCBmdW5jdGlvbihwcm9kdWN0KXtcbiAgICB2YXIgdHJhY2sgPSBuZXcgVHJhY2soeyBwcm9wZXJ0aWVzOiBwcm9kdWN0IH0pO1xuICAgIHB1c2goJ19hZGRJdGVtJ1xuICAgICAgLCBvcmRlcklkXG4gICAgICAsIHRyYWNrLnNrdSgpXG4gICAgICAsIHRyYWNrLm5hbWUoKVxuICAgICAgLCB0cmFjay5jYXRlZ29yeSgpXG4gICAgICAsIHRyYWNrLnByaWNlKClcbiAgICAgICwgdHJhY2sucXVhbnRpdHkoKSk7XG4gIH0pO1xuXG4gIC8vIHNlbmRcbiAgcHVzaCgnX3NldCcsICdjdXJyZW5jeUNvZGUnLCBjdXJyZW5jeSk7XG4gIHB1c2goJ190cmFja1RyYW5zJyk7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgcGF0aCBiYXNlZCBvbiBgcHJvcGVydGllc2AgYW5kIGBvcHRpb25zYC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBwYXRoKHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgaWYgKCFwcm9wZXJ0aWVzKSByZXR1cm47XG4gIHZhciBzdHIgPSBwcm9wZXJ0aWVzLnBhdGg7XG4gIGlmIChvcHRpb25zLmluY2x1ZGVTZWFyY2ggJiYgcHJvcGVydGllcy5zZWFyY2gpIHN0ciArPSBwcm9wZXJ0aWVzLnNlYXJjaDtcbiAgcmV0dXJuIHN0cjtcbn1cblxuLyoqXG4gKiBGb3JtYXQgdGhlIHZhbHVlIHByb3BlcnR5IHRvIEdvb2dsZSdzIGxpa2luZy5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlIHx8IHZhbHVlIDwgMCkgcmV0dXJuIDA7XG4gIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBNYXAgZ29vZ2xlJ3MgY3VzdG9tIGRpbWVuc2lvbnMgJiBtZXRyaWNzIHdpdGggYG9iamAuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgIG1ldHJpY3MoeyByZXZlbnVlOiAxLjkgfSwgeyB7IG1ldHJpY3MgOiB7IHJldmVudWU6ICdtZXRyaWM4JyB9IH0pO1xuICogICAgICAvLyA9PiB7IG1ldHJpYzg6IDEuOSB9XG4gKlxuICogICAgICBtZXRyaWNzKHsgcmV2ZW51ZTogMS45IH0sIHt9KTtcbiAqICAgICAgLy8gPT4ge31cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICogQHJldHVybiB7T2JqZWN0fG51bGx9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBtZXRyaWNzKG9iaiwgZGF0YSl7XG4gIHZhciBkaW1lbnNpb25zID0gZGF0YS5kaW1lbnNpb25zO1xuICB2YXIgbWV0cmljcyA9IGRhdGEubWV0cmljcztcbiAgdmFyIG5hbWVzID0ga2V5cyhtZXRyaWNzKS5jb25jYXQoa2V5cyhkaW1lbnNpb25zKSk7XG4gIHZhciByZXQgPSB7fTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIG5hbWUgPSBuYW1lc1tpXTtcbiAgICB2YXIga2V5ID0gbWV0cmljc1tuYW1lXSB8fCBkaW1lbnNpb25zW25hbWVdO1xuICAgIHZhciB2YWx1ZSA9IGRvdChvYmosIG5hbWUpIHx8IG9ialtuYW1lXTtcbiAgICBpZiAobnVsbCA9PSB2YWx1ZSkgY29udGludWU7XG4gICAgcmV0W2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogTG9hZHMgZWMuanMgKHVubGVzcyBhbHJlYWR5IGxvYWRlZClcbiAqL1xuXG5HQS5wcm90b3R5cGUubG9hZEVuaGFuY2VkRWNvbW1lcmNlID0gZnVuY3Rpb24odHJhY2spe1xuICBpZiAoIXRoaXMuZW5oYW5jZWRFY29tbWVyY2VMb2FkZWQpIHtcbiAgICB3aW5kb3cuZ2EoJ3JlcXVpcmUnLCAnZWMnKTtcbiAgICB0aGlzLmVuaGFuY2VkRWNvbW1lcmNlTG9hZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIEVuc3VyZSB3ZSBzZXQgY3VycmVuY3kgZm9yIGV2ZXJ5IGhpdFxuICB3aW5kb3cuZ2EoJ3NldCcsICcmY3UnLCB0cmFjay5jdXJyZW5jeSgpKTtcbn07XG5cbi8qKlxuICogUHVzaGVzIGFuIGV2ZW50IGFuZCBhbGwgcHJldmlvdXNseSBzZXQgRUUgZGF0YSB0byBHQS5cbiAqL1xuXG5HQS5wcm90b3R5cGUucHVzaEVuaGFuY2VkRWNvbW1lcmNlID0gZnVuY3Rpb24odHJhY2spe1xuICAvLyBTZW5kIGEgY3VzdG9tIG5vbi1pbnRlcmFjdGlvbiBldmVudCB0byBlbnN1cmUgYWxsIEVFIGRhdGEgaXMgcHVzaGVkLlxuICAvLyBXaXRob3V0IGRvaW5nIHRoaXMgd2UnZCBuZWVkIHRvIHJlcXVpcmUgcGFnZSBkaXNwbGF5IGFmdGVyIHNldHRpbmcgRUUgZGF0YS5cbiAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnRW5oYW5jZWRFY29tbWVyY2UnLCAnUHVzaCcsIHsnbm9uSW50ZXJhY3Rpb24nOiAxfSk7XG59O1xuXG4vKipcbiAqIFN0YXJ0ZWQgb3JkZXIgLSBFbmhhbmNlZCBFY29tbWVyY2VcbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI2NoZWNrb3V0LXN0ZXBzXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5HQS5wcm90b3R5cGUuc3RhcnRlZE9yZGVyRW5oYW5jZWQgPSBmdW5jdGlvbih0cmFjaykge1xuICAvLyBzYW1lIGFzIHZpZXdlZCBjaGVja291dCBzdGVwICMxXG4gIHRoaXMudmlld2VkQ2hlY2tvdXRTdGVwKHRyYWNrKTtcbn07XG5cbi8qKlxuICogVXBkYXRlZCBvcmRlciAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjY2hlY2tvdXQtc3RlcHNcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkdBLnByb3RvdHlwZS51cGRhdGVkT3JkZXJFbmhhbmNlZCA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgLy8gU2FtZSBldmVudCBhcyBzdGFydGVkIG9yZGVyIC0gd2lsbCBvdmVycmlkZVxuICB0aGlzLnN0YXJ0ZWRPcmRlckVuaGFuY2VkKHRyYWNrKTtcbn07XG5cbi8qKlxuICogVmlld2VkIGNoZWNrb3V0IHN0ZXAgLSBFbmhhbmNlZCBFY29tbWVyY2VcbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI2NoZWNrb3V0LXN0ZXBzXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5HQS5wcm90b3R5cGUudmlld2VkQ2hlY2tvdXRTdGVwRW5oYW5jZWQgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9kdWN0cyA9IHRyYWNrLnByb2R1Y3RzKCk7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgdmFyIG9wdGlvbnMgPSBleHRyYWN0Q2hlY2tvdXRPcHRpb25zKHByb3BzKTtcblxuICB0aGlzLmxvYWRFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG5cbiAgZWFjaChwcm9kdWN0cywgZnVuY3Rpb24ocHJvZHVjdCl7XG4gICAgdmFyIHRyYWNrID0gbmV3IFRyYWNrKHsgcHJvcGVydGllczogcHJvZHVjdCB9KTtcbiAgICBlbmhhbmNlZEVjb21tZXJjZVRyYWNrUHJvZHVjdCh0cmFjayk7XG4gIH0pO1xuXG4gIHdpbmRvdy5nYSgnZWM6c2V0QWN0aW9uJywnY2hlY2tvdXQnLCB7XG4gICAgJ3N0ZXAnOiBwcm9wcy5zdGVwIHx8IDEsXG4gICAgJ29wdGlvbic6IG9wdGlvbnMgfHwgdW5kZWZpbmVkLFxuICB9KTtcblxuICB0aGlzLnB1c2hFbmhhbmNlZEVjb21tZXJjZSgpO1xufTtcblxuLyoqXG4gKiBDb21wbGV0ZWQgY2hlY2tvdXQgc3RlcCAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjY2hlY2tvdXQtb3B0aW9uc1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR0EucHJvdG90eXBlLmNvbXBsZXRlZENoZWNrb3V0U3RlcEVuaGFuY2VkID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHZhciBvcHRpb25zID0gZXh0cmFjdENoZWNrb3V0T3B0aW9ucyhwcm9wcyk7XG5cbiAgLy8gT25seSBzZW5kIGFuIGV2ZW50IGlmIHdlIGhhdmUgc3RlcCBhbmQgb3B0aW9ucyB0byB1cGRhdGVcbiAgaWYgKCFwcm9wcy5zdGVwIHx8ICFvcHRpb25zKSByZXR1cm47XG5cbiAgdGhpcy5sb2FkRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xuXG4gIHdpbmRvdy5nYSgnZWM6c2V0QWN0aW9uJywgJ2NoZWNrb3V0X29wdGlvbicsIHtcbiAgICBzdGVwOiBwcm9wcy5zdGVwIHx8IDEsXG4gICAgb3B0aW9uOiBvcHRpb25zLFxuICB9KTtcblxuICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnQ2hlY2tvdXQnLCAnT3B0aW9uJyk7XG59O1xuXG4vKipcbiAqIENvbXBsZXRlZCBvcmRlciAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjbWVhc3VyaW5nLXRyYW5zYWN0aW9uc1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR0EucHJvdG90eXBlLmNvbXBsZXRlZE9yZGVyRW5oYW5jZWQgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciB0b3RhbCA9IHRyYWNrLnRvdGFsKCkgfHwgdHJhY2sucmV2ZW51ZSgpIHx8IDA7XG4gIHZhciBvcmRlcklkID0gdHJhY2sub3JkZXJJZCgpO1xuICB2YXIgcHJvZHVjdHMgPSB0cmFjay5wcm9kdWN0cygpO1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG5cbiAgLy8gb3JkZXJJZCBpcyByZXF1aXJlZC5cbiAgaWYgKCFvcmRlcklkKSByZXR1cm47XG5cbiAgdGhpcy5sb2FkRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xuXG4gIGVhY2gocHJvZHVjdHMsIGZ1bmN0aW9uKHByb2R1Y3Qpe1xuICAgIHZhciB0cmFjayA9IG5ldyBUcmFjayh7IHByb3BlcnRpZXM6IHByb2R1Y3QgfSk7XG4gICAgZW5oYW5jZWRFY29tbWVyY2VUcmFja1Byb2R1Y3QodHJhY2spO1xuICB9KTtcblxuICB3aW5kb3cuZ2EoJ2VjOnNldEFjdGlvbicsICdwdXJjaGFzZScsIHtcbiAgICBpZDogb3JkZXJJZCxcbiAgICBhZmZpbGlhdGlvbjogcHJvcHMuYWZmaWxpYXRpb24sXG4gICAgcmV2ZW51ZTogdG90YWwsXG4gICAgdGF4OiB0cmFjay50YXgoKSxcbiAgICBzaGlwcGluZzogdHJhY2suc2hpcHBpbmcoKSxcbiAgICBjb3Vwb246IHRyYWNrLmNvdXBvbigpLFxuICB9KTtcblxuICB0aGlzLnB1c2hFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG59O1xuXG4vKipcbiAqIFJlZnVuZGVkIG9yZGVyIC0gRW5oYW5jZWQgRWNvbW1lcmNlXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2VuaGFuY2VkLWVjb21tZXJjZSNtZWFzdXJpbmctcmVmdW5kc1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR0EucHJvdG90eXBlLnJlZnVuZGVkT3JkZXJFbmhhbmNlZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XG4gIHZhciBvcmRlcklkID0gdHJhY2sub3JkZXJJZCgpO1xuICB2YXIgcHJvZHVjdHMgPSB0cmFjay5wcm9kdWN0cygpO1xuXG4gIC8vIG9yZGVySWQgaXMgcmVxdWlyZWQuXG4gIGlmICghb3JkZXJJZCkgcmV0dXJuO1xuXG4gIHRoaXMubG9hZEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcblxuICAvLyBXaXRob3V0IGFueSBwcm9kdWN0cyBpdCdzIGEgZnVsbCByZWZ1bmRcbiAgZWFjaChwcm9kdWN0cywgZnVuY3Rpb24ocHJvZHVjdCl7XG4gICAgdmFyIHRyYWNrID0gbmV3IFRyYWNrKHsgcHJvcGVydGllczogcHJvZHVjdCB9KTtcbiAgICB3aW5kb3cuZ2EoJ2VjOmFkZFByb2R1Y3QnLCB7XG4gICAgICBpZDogdHJhY2suaWQoKSB8fCB0cmFjay5za3UoKSxcbiAgICAgIHF1YW50aXR5OiB0cmFjay5xdWFudGl0eSgpLFxuICAgIH0pO1xuICB9KTtcblxuICB3aW5kb3cuZ2EoJ2VjOnNldEFjdGlvbicsICdyZWZ1bmQnLCB7XG4gICAgaWQ6IG9yZGVySWQsXG4gIH0pO1xuXG4gIHRoaXMucHVzaEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcbn07XG5cbi8qKlxuICogQWRkZWQgcHJvZHVjdCAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjYWRkLXJlbW92ZS1jYXJ0XG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5HQS5wcm90b3R5cGUuYWRkZWRQcm9kdWN0RW5oYW5jZWQgPSBmdW5jdGlvbih0cmFjaykge1xuICB0aGlzLmxvYWRFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG4gIGVuaGFuY2VkRWNvbW1lcmNlUHJvZHVjdEFjdGlvbih0cmFjaywgJ2FkZCcpO1xuICB0aGlzLnB1c2hFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG59O1xuXG4vKipcbiAqIFJlbW92ZWQgcHJvZHVjdCAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjYWRkLXJlbW92ZS1jYXJ0XG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5HQS5wcm90b3R5cGUucmVtb3ZlZFByb2R1Y3RFbmhhbmNlZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XG4gIHRoaXMubG9hZEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcbiAgZW5oYW5jZWRFY29tbWVyY2VQcm9kdWN0QWN0aW9uKHRyYWNrLCAncmVtb3ZlJyk7XG4gIHRoaXMucHVzaEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcbn07XG5cbi8qKlxuICogVmlld2VkIHByb2R1Y3QgZGV0YWlscyAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjcHJvZHVjdC1kZXRhaWwtdmlld1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR0EucHJvdG90eXBlLnZpZXdlZFByb2R1Y3REZXRhaWxzRW5oYW5jZWQgPSBmdW5jdGlvbih0cmFjaykge1xuICB0aGlzLmxvYWRFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG4gIGVuaGFuY2VkRWNvbW1lcmNlUHJvZHVjdEFjdGlvbih0cmFjaywgJ2RldGFpbCcpO1xuICB0aGlzLnB1c2hFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG59O1xuXG4vKipcbiAqIFZpZXdlZCBwcm9kdWN0IC0gRW5oYW5jZWQgRWNvbW1lcmNlXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2VuaGFuY2VkLWVjb21tZXJjZSNtZWFzdXJpbmctaW1wcmVzc2lvbnNcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkdBLnByb3RvdHlwZS52aWV3ZWRQcm9kdWN0RW5oYW5jZWQgPSBmdW5jdGlvbih0cmFjaykge1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG5cbiAgdGhpcy5sb2FkRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xuICBnYSgnZWM6YWRkSW1wcmVzc2lvbicsIHtcbiAgICBpZDogdHJhY2suaWQoKSB8fCB0cmFjay5za3UoKSxcbiAgICBuYW1lOiB0cmFjay5uYW1lKCksXG4gICAgY2F0ZWdvcnk6IHRyYWNrLmNhdGVnb3J5KCksXG4gICAgYnJhbmQ6IHByb3BzLmJyYW5kLFxuICAgIHZhcmlhbnQ6IHByb3BzLnZhcmlhbnQsXG4gICAgbGlzdDogcHJvcHMubGlzdCxcbiAgICBwb3NpdGlvbjogcHJvcHMucG9zaXRpb24sXG4gIH0pO1xuICB0aGlzLnB1c2hFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG59O1xuXG4vKipcbiAqIENsaWNrZWQgcHJvZHVjdCAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjbWVhc3VyaW5nLWFjdGlvbnNcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkdBLnByb3RvdHlwZS5jbGlja2VkUHJvZHVjdEVuaGFuY2VkID0gZnVuY3Rpb24odHJhY2spIHtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuXG4gIHRoaXMubG9hZEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcbiAgZW5oYW5jZWRFY29tbWVyY2VQcm9kdWN0QWN0aW9uKHRyYWNrLCAnY2xpY2snLCB7XG4gICAgbGlzdDogcHJvcHMubGlzdFxuICB9KTtcbiAgdGhpcy5wdXNoRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xufTtcblxuLyoqXG4gKiBWaWV3ZWQgcHJvbW90aW9uIC0gRW5oYW5jZWQgRWNvbW1lcmNlXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2VuaGFuY2VkLWVjb21tZXJjZSNtZWFzdXJpbmctcHJvbW8taW1wcmVzc2lvbnNcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkdBLnByb3RvdHlwZS52aWV3ZWRQcm9tb3Rpb25FbmhhbmNlZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcblxuICB0aGlzLmxvYWRFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG4gIHdpbmRvdy5nYSgnZWM6YWRkUHJvbW8nLCB7XG4gICAgaWQ6IHRyYWNrLmlkKCksXG4gICAgbmFtZTogdHJhY2submFtZSgpLFxuICAgIGNyZWF0aXZlOiBwcm9wcy5jcmVhdGl2ZSxcbiAgICBwb3NpdGlvbjogcHJvcHMucG9zaXRpb24sXG4gIH0pO1xuICB0aGlzLnB1c2hFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG59O1xuXG4vKipcbiAqIENsaWNrZWQgcHJvbW90aW9uIC0gRW5oYW5jZWQgRWNvbW1lcmNlXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2VuaGFuY2VkLWVjb21tZXJjZSNtZWFzdXJpbmctcHJvbW8tY2xpY2tzXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5HQS5wcm90b3R5cGUuY2xpY2tlZFByb21vdGlvbkVuaGFuY2VkID0gZnVuY3Rpb24odHJhY2spIHtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuXG4gIHRoaXMubG9hZEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcbiAgd2luZG93LmdhKCdlYzphZGRQcm9tbycsIHtcbiAgICBpZDogdHJhY2suaWQoKSxcbiAgICBuYW1lOiB0cmFjay5uYW1lKCksXG4gICAgY3JlYXRpdmU6IHByb3BzLmNyZWF0aXZlLFxuICAgIHBvc2l0aW9uOiBwcm9wcy5wb3NpdGlvbixcbiAgfSk7XG4gIGdhKCdlYzpzZXRBY3Rpb24nLCAncHJvbW9fY2xpY2snLCB7fSk7XG4gIHRoaXMucHVzaEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcbn07XG5cbi8qKlxuICogRW5oYW5jZWQgZWNvbW1lcmNlIHRyYWNrIHByb2R1Y3QuXG4gKlxuICogU2ltcGxlIGhlbHBlciBzbyB0aGF0IHdlIGRvbid0IHJlcGVhdCBgZWM6YWRkUHJvZHVjdGAgZXZlcnl3aGVyZS5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbmZ1bmN0aW9uIGVuaGFuY2VkRWNvbW1lcmNlVHJhY2tQcm9kdWN0KHRyYWNrKSB7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcblxuICB3aW5kb3cuZ2EoJ2VjOmFkZFByb2R1Y3QnLCB7XG4gICAgaWQ6IHRyYWNrLmlkKCkgfHwgdHJhY2suc2t1KCksXG4gICAgbmFtZTogdHJhY2submFtZSgpLFxuICAgIGNhdGVnb3J5OiB0cmFjay5jYXRlZ29yeSgpLFxuICAgIHF1YW50aXR5OiB0cmFjay5xdWFudGl0eSgpLFxuICAgIHByaWNlOiB0cmFjay5wcmljZSgpLFxuICAgIGJyYW5kOiBwcm9wcy5icmFuZCxcbiAgICB2YXJpYW50OiBwcm9wcy52YXJpYW50LFxuICB9KTtcbn1cblxuLyoqXG4gKiBTZXQgYGFjdGlvbmAgb24gYHRyYWNrYCB3aXRoIGBkYXRhYC5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAqL1xuXG5mdW5jdGlvbiBlbmhhbmNlZEVjb21tZXJjZVByb2R1Y3RBY3Rpb24odHJhY2ssIGFjdGlvbiwgZGF0YSkge1xuICBlbmhhbmNlZEVjb21tZXJjZVRyYWNrUHJvZHVjdCh0cmFjayk7XG4gIHdpbmRvdy5nYSgnZWM6c2V0QWN0aW9uJywgYWN0aW9uLCBkYXRhIHx8IHt9KTtcbn1cblxuLyoqXG4gKiBFeHRyYWN0cyBjaGVja291dCBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHJldHVybiB7TnVsbHxTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZXh0cmFjdENoZWNrb3V0T3B0aW9ucyhwcm9wcykge1xuICB2YXIgb3B0aW9ucyA9IFtcbiAgICBwcm9wcy5wYXltZW50TWV0aG9kLFxuICAgIHByb3BzLnNoaXBwaW5nTWV0aG9kXG4gIF07XG5cbiAgLy8gUmVtb3ZlIGFsbCBudWxscywgZW1wdHkgc3RyaW5ncywgemVyb2VzLCBhbmQgam9pbiB3aXRoIGNvbW1hcy5cbiAgdmFyIHZhbGlkID0gc2VsZWN0KG9wdGlvbnMsIGZ1bmN0aW9uKGUpe3JldHVybiBlOyB9KTtcbiAgcmV0dXJuIHZhbGlkLmxlbmd0aCA+IDAgPyB2YWxpZC5qb2luKCcsICcpIDogbnVsbDtcbn1cbiIsIlxuLyoqXG4gKiBIT1AgcmVmLlxuICovXG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFJldHVybiBvd24ga2V5cyBpbiBgb2JqYC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5rZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ob2JqKXtcbiAgdmFyIGtleXMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChoYXMuY2FsbChvYmosIGtleSkpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4ga2V5cztcbn07XG5cbi8qKlxuICogUmV0dXJuIG93biB2YWx1ZXMgaW4gYG9iamAuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMudmFsdWVzID0gZnVuY3Rpb24ob2JqKXtcbiAgdmFyIHZhbHMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChoYXMuY2FsbChvYmosIGtleSkpIHtcbiAgICAgIHZhbHMucHVzaChvYmpba2V5XSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWxzO1xufTtcblxuLyoqXG4gKiBNZXJnZSBgYmAgaW50byBgYWAuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFcbiAqIEBwYXJhbSB7T2JqZWN0fSBiXG4gKiBAcmV0dXJuIHtPYmplY3R9IGFcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5tZXJnZSA9IGZ1bmN0aW9uKGEsIGIpe1xuICBmb3IgKHZhciBrZXkgaW4gYikge1xuICAgIGlmIChoYXMuY2FsbChiLCBrZXkpKSB7XG4gICAgICBhW2tleV0gPSBiW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiBhO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gbGVuZ3RoIG9mIGBvYmpgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5sZW5ndGggPSBmdW5jdGlvbihvYmope1xuICByZXR1cm4gZXhwb3J0cy5rZXlzKG9iaikubGVuZ3RoO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBgb2JqYCBpcyBlbXB0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmlzRW1wdHkgPSBmdW5jdGlvbihvYmope1xuICByZXR1cm4gMCA9PSBleHBvcnRzLmxlbmd0aChvYmopO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNhbm9uaWNhbCAoKSB7XG4gIHZhciB0YWdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2xpbmsnKTtcbiAgZm9yICh2YXIgaSA9IDAsIHRhZzsgdGFnID0gdGFnc1tpXTsgaSsrKSB7XG4gICAgaWYgKCdjYW5vbmljYWwnID09IHRhZy5nZXRBdHRyaWJ1dGUoJ3JlbCcpKSByZXR1cm4gdGFnLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICB9XG59OyIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciB0b0Z1bmN0aW9uID0gcmVxdWlyZSgndG8tZnVuY3Rpb24nKTtcblxuLyoqXG4gKiBGaWx0ZXIgdGhlIGdpdmVuIGBhcnJgIHdpdGggY2FsbGJhY2sgYGZuKHZhbCwgaSlgLFxuICogd2hlbiBhIHRydXRoeSB2YWx1ZSBpcyByZXR1cm4gdGhlbiBgdmFsYCBpcyBpbmNsdWRlZFxuICogaW4gdGhlIGFycmF5IHJldHVybmVkLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFyciwgZm4pe1xuICB2YXIgcmV0ID0gW107XG4gIGZuID0gdG9GdW5jdGlvbihmbik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKGZuKGFycltpXSwgaSkpIHtcbiAgICAgIHJldC5wdXNoKGFycltpXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXQ7XG59O1xuIiwiXG52YXIgQ2FzZSA9IHJlcXVpcmUoJ2Nhc2UnKTtcbnZhciBpZGVudGl0eSA9IGZ1bmN0aW9uKF8peyByZXR1cm4gXzsgfTtcblxuXG4vKipcbiAqIENhc2VzXG4gKi9cblxudmFyIGNhc2VzID0gW1xuICBpZGVudGl0eSxcbiAgQ2FzZS51cHBlcixcbiAgQ2FzZS5sb3dlcixcbiAgQ2FzZS5zbmFrZSxcbiAgQ2FzZS5wYXNjYWwsXG4gIENhc2UuY2FtZWwsXG4gIENhc2UuY29uc3RhbnQsXG4gIENhc2UudGl0bGUsXG4gIENhc2UuY2FwaXRhbCxcbiAgQ2FzZS5zZW50ZW5jZVxuXTtcblxuXG4vKipcbiAqIE1vZHVsZSBleHBvcnRzLCBleHBvcnRcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmZpbmQgPSBtdWx0aXBsZShmaW5kKTtcblxuXG4vKipcbiAqIEV4cG9ydCB0aGUgcmVwbGFjZW1lbnQgZnVuY3Rpb24sIHJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG4gKi9cblxubW9kdWxlLmV4cG9ydHMucmVwbGFjZSA9IGZ1bmN0aW9uIChvYmosIGtleSwgdmFsKSB7XG4gIG11bHRpcGxlKHJlcGxhY2UpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBvYmo7XG59O1xuXG5cbi8qKlxuICogRXhwb3J0IHRoZSBkZWxldGUgZnVuY3Rpb24sIHJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG4gKi9cblxubW9kdWxlLmV4cG9ydHMuZGVsID0gZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gIG11bHRpcGxlKGRlbCkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgcmV0dXJuIG9iajtcbn07XG5cblxuLyoqXG4gKiBDb21wb3NlIGFwcGx5aW5nIHRoZSBmdW5jdGlvbiB0byBhIG5lc3RlZCBrZXlcbiAqL1xuXG5mdW5jdGlvbiBtdWx0aXBsZSAoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvYmosIGtleSwgdmFsKSB7XG4gICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoJy4nKTtcbiAgICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIHdoaWxlIChrZXlzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGtleSA9IGtleXMuc2hpZnQoKTtcbiAgICAgIG9iaiA9IGZpbmQob2JqLCBrZXkpO1xuXG4gICAgICBpZiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgfVxuXG4gICAga2V5ID0ga2V5cy5zaGlmdCgpO1xuICAgIHJldHVybiBmbihvYmosIGtleSwgdmFsKTtcbiAgfTtcbn1cblxuXG4vKipcbiAqIEZpbmQgYW4gb2JqZWN0IGJ5IGl0cyBrZXlcbiAqXG4gKiBmaW5kKHsgZmlyc3RfbmFtZSA6ICdDYWx2aW4nIH0sICdmaXJzdE5hbWUnKVxuICovXG5cbmZ1bmN0aW9uIGZpbmQgKG9iaiwga2V5KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FzZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgY2FzZWQgPSBjYXNlc1tpXShrZXkpO1xuICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoY2FzZWQpKSByZXR1cm4gb2JqW2Nhc2VkXTtcbiAgfVxufVxuXG5cbi8qKlxuICogRGVsZXRlIGEgdmFsdWUgZm9yIGEgZ2l2ZW4ga2V5XG4gKlxuICogZGVsKHsgYSA6ICdiJywgeCA6ICd5JyB9LCAnWCcgfSkgLT4geyBhIDogJ2InIH1cbiAqL1xuXG5mdW5jdGlvbiBkZWwgKG9iaiwga2V5KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FzZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgY2FzZWQgPSBjYXNlc1tpXShrZXkpO1xuICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoY2FzZWQpKSBkZWxldGUgb2JqW2Nhc2VkXTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG5cbi8qKlxuICogUmVwbGFjZSBhbiBvYmplY3RzIGV4aXN0aW5nIHZhbHVlIHdpdGggYSBuZXcgb25lXG4gKlxuICogcmVwbGFjZSh7IGEgOiAnYicgfSwgJ2EnLCAnYycpIC0+IHsgYSA6ICdjJyB9XG4gKi9cblxuZnVuY3Rpb24gcmVwbGFjZSAob2JqLCBrZXksIHZhbCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNhc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGNhc2VkID0gY2FzZXNbaV0oa2V5KTtcbiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGNhc2VkKSkgb2JqW2Nhc2VkXSA9IHZhbDtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuIiwiXG52YXIgY2FzZXMgPSByZXF1aXJlKCcuL2Nhc2VzJyk7XG5cblxuLyoqXG4gKiBFeHBvc2UgYGRldGVybWluZUNhc2VgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGRldGVybWluZUNhc2U7XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgdGhlIGNhc2Ugb2YgYSBgc3RyaW5nYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBkZXRlcm1pbmVDYXNlIChzdHJpbmcpIHtcbiAgZm9yICh2YXIga2V5IGluIGNhc2VzKSB7XG4gICAgaWYgKGtleSA9PSAnbm9uZScpIGNvbnRpbnVlO1xuICAgIHZhciBjb252ZXJ0ID0gY2FzZXNba2V5XTtcbiAgICBpZiAoY29udmVydChzdHJpbmcpID09IHN0cmluZykgcmV0dXJuIGtleTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIERlZmluZSBhIGNhc2UgYnkgYG5hbWVgIHdpdGggYSBgY29udmVydGAgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb252ZXJ0XG4gKi9cblxuZXhwb3J0cy5hZGQgPSBmdW5jdGlvbiAobmFtZSwgY29udmVydCkge1xuICBleHBvcnRzW25hbWVdID0gY2FzZXNbbmFtZV0gPSBjb252ZXJ0O1xufTtcblxuXG4vKipcbiAqIEFkZCBhbGwgdGhlIGBjYXNlc2AuXG4gKi9cblxuZm9yICh2YXIga2V5IGluIGNhc2VzKSB7XG4gIGV4cG9ydHMuYWRkKGtleSwgY2FzZXNba2V5XSk7XG59IiwiXG52YXIgY2FtZWwgPSByZXF1aXJlKCd0by1jYW1lbC1jYXNlJylcbiAgLCBjYXBpdGFsID0gcmVxdWlyZSgndG8tY2FwaXRhbC1jYXNlJylcbiAgLCBjb25zdGFudCA9IHJlcXVpcmUoJ3RvLWNvbnN0YW50LWNhc2UnKVxuICAsIGRvdCA9IHJlcXVpcmUoJ3RvLWRvdC1jYXNlJylcbiAgLCBub25lID0gcmVxdWlyZSgndG8tbm8tY2FzZScpXG4gICwgcGFzY2FsID0gcmVxdWlyZSgndG8tcGFzY2FsLWNhc2UnKVxuICAsIHNlbnRlbmNlID0gcmVxdWlyZSgndG8tc2VudGVuY2UtY2FzZScpXG4gICwgc2x1ZyA9IHJlcXVpcmUoJ3RvLXNsdWctY2FzZScpXG4gICwgc25ha2UgPSByZXF1aXJlKCd0by1zbmFrZS1jYXNlJylcbiAgLCBzcGFjZSA9IHJlcXVpcmUoJ3RvLXNwYWNlLWNhc2UnKVxuICAsIHRpdGxlID0gcmVxdWlyZSgndG8tdGl0bGUtY2FzZScpO1xuXG5cbi8qKlxuICogQ2FtZWwuXG4gKi9cblxuZXhwb3J0cy5jYW1lbCA9IGNhbWVsO1xuXG5cbi8qKlxuICogUGFzY2FsLlxuICovXG5cbmV4cG9ydHMucGFzY2FsID0gcGFzY2FsO1xuXG5cbi8qKlxuICogRG90LiBTaG91bGQgcHJlY2VkZSBsb3dlcmNhc2UuXG4gKi9cblxuZXhwb3J0cy5kb3QgPSBkb3Q7XG5cblxuLyoqXG4gKiBTbHVnLiBTaG91bGQgcHJlY2VkZSBsb3dlcmNhc2UuXG4gKi9cblxuZXhwb3J0cy5zbHVnID0gc2x1ZztcblxuXG4vKipcbiAqIFNuYWtlLiBTaG91bGQgcHJlY2VkZSBsb3dlcmNhc2UuXG4gKi9cblxuZXhwb3J0cy5zbmFrZSA9IHNuYWtlO1xuXG5cbi8qKlxuICogU3BhY2UuIFNob3VsZCBwcmVjZWRlIGxvd2VyY2FzZS5cbiAqL1xuXG5leHBvcnRzLnNwYWNlID0gc3BhY2U7XG5cblxuLyoqXG4gKiBDb25zdGFudC4gU2hvdWxkIHByZWNlZGUgdXBwZXJjYXNlLlxuICovXG5cbmV4cG9ydHMuY29uc3RhbnQgPSBjb25zdGFudDtcblxuXG4vKipcbiAqIENhcGl0YWwuIFNob3VsZCBwcmVjZWRlIHNlbnRlbmNlIGFuZCB0aXRsZS5cbiAqL1xuXG5leHBvcnRzLmNhcGl0YWwgPSBjYXBpdGFsO1xuXG5cbi8qKlxuICogVGl0bGUuXG4gKi9cblxuZXhwb3J0cy50aXRsZSA9IHRpdGxlO1xuXG5cbi8qKlxuICogU2VudGVuY2UuXG4gKi9cblxuZXhwb3J0cy5zZW50ZW5jZSA9IHNlbnRlbmNlO1xuXG5cbi8qKlxuICogQ29udmVydCBhIGBzdHJpbmdgIHRvIGxvd2VyIGNhc2UgZnJvbSBjYW1lbCwgc2x1ZywgZXRjLiBEaWZmZXJlbnQgdGhhdCB0aGVcbiAqIHVzdWFsIGB0b0xvd2VyQ2FzZWAgaW4gdGhhdCBpdCB3aWxsIHRyeSB0byBicmVhayBhcGFydCB0aGUgaW5wdXQgZmlyc3QuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmV4cG9ydHMubG93ZXIgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gIHJldHVybiBub25lKHN0cmluZykudG9Mb3dlckNhc2UoKTtcbn07XG5cblxuLyoqXG4gKiBDb252ZXJ0IGEgYHN0cmluZ2AgdG8gdXBwZXIgY2FzZSBmcm9tIGNhbWVsLCBzbHVnLCBldGMuIERpZmZlcmVudCB0aGF0IHRoZVxuICogdXN1YWwgYHRvVXBwZXJDYXNlYCBpbiB0aGF0IGl0IHdpbGwgdHJ5IHRvIGJyZWFrIGFwYXJ0IHRoZSBpbnB1dCBmaXJzdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZXhwb3J0cy51cHBlciA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgcmV0dXJuIG5vbmUoc3RyaW5nKS50b1VwcGVyQ2FzZSgpO1xufTtcblxuXG4vKipcbiAqIEludmVydCBlYWNoIGNoYXJhY3RlciBpbiBhIGBzdHJpbmdgIGZyb20gdXBwZXIgdG8gbG93ZXIgYW5kIHZpY2UgdmVyc2EuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGNoYXI7IGNoYXIgPSBzdHJpbmdbaV07IGkrKykge1xuICAgIGlmICghL1thLXpdL2kudGVzdChjaGFyKSkgY29udGludWU7XG4gICAgdmFyIHVwcGVyID0gY2hhci50b1VwcGVyQ2FzZSgpO1xuICAgIHZhciBsb3dlciA9IGNoYXIudG9Mb3dlckNhc2UoKTtcbiAgICBzdHJpbmdbaV0gPSBjaGFyID09IHVwcGVyID8gbG93ZXIgOiB1cHBlcjtcbiAgfVxuICByZXR1cm4gc3RyaW5nO1xufTtcblxuXG4vKipcbiAqIE5vbmUuXG4gKi9cblxuZXhwb3J0cy5ub25lID0gbm9uZTsiLCJcbnZhciB0b1NwYWNlID0gcmVxdWlyZSgndG8tc3BhY2UtY2FzZScpO1xuXG5cbi8qKlxuICogRXhwb3NlIGB0b0NhbWVsQ2FzZWAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b0NhbWVsQ2FzZTtcblxuXG4vKipcbiAqIENvbnZlcnQgYSBgc3RyaW5nYCB0byBjYW1lbCBjYXNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5cbmZ1bmN0aW9uIHRvQ2FtZWxDYXNlIChzdHJpbmcpIHtcbiAgcmV0dXJuIHRvU3BhY2Uoc3RyaW5nKS5yZXBsYWNlKC9cXHMoXFx3KS9nLCBmdW5jdGlvbiAobWF0Y2hlcywgbGV0dGVyKSB7XG4gICAgcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xuICB9KTtcbn0iLCJcbnZhciBjbGVhbiA9IHJlcXVpcmUoJ3RvLW5vLWNhc2UnKTtcblxuXG4vKipcbiAqIEV4cG9zZSBgdG9TcGFjZUNhc2VgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdG9TcGFjZUNhc2U7XG5cblxuLyoqXG4gKiBDb252ZXJ0IGEgYHN0cmluZ2AgdG8gc3BhY2UgY2FzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuXG5mdW5jdGlvbiB0b1NwYWNlQ2FzZSAoc3RyaW5nKSB7XG4gIHJldHVybiBjbGVhbihzdHJpbmcpLnJlcGxhY2UoL1tcXFdfXSsoLnwkKS9nLCBmdW5jdGlvbiAobWF0Y2hlcywgbWF0Y2gpIHtcbiAgICByZXR1cm4gbWF0Y2ggPyAnICcgKyBtYXRjaCA6ICcnO1xuICB9KTtcbn0iLCJcbnZhciBjbGVhbiA9IHJlcXVpcmUoJ3RvLW5vLWNhc2UnKTtcblxuXG4vKipcbiAqIEV4cG9zZSBgdG9DYXBpdGFsQ2FzZWAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b0NhcGl0YWxDYXNlO1xuXG5cbi8qKlxuICogQ29udmVydCBhIGBzdHJpbmdgIHRvIGNhcGl0YWwgY2FzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuXG5mdW5jdGlvbiB0b0NhcGl0YWxDYXNlIChzdHJpbmcpIHtcbiAgcmV0dXJuIGNsZWFuKHN0cmluZykucmVwbGFjZSgvKF58XFxzKShcXHcpL2csIGZ1bmN0aW9uIChtYXRjaGVzLCBwcmV2aW91cywgbGV0dGVyKSB7XG4gICAgcmV0dXJuIHByZXZpb3VzICsgbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG4gIH0pO1xufSIsIlxudmFyIHNuYWtlID0gcmVxdWlyZSgndG8tc25ha2UtY2FzZScpO1xuXG5cbi8qKlxuICogRXhwb3NlIGB0b0NvbnN0YW50Q2FzZWAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b0NvbnN0YW50Q2FzZTtcblxuXG4vKipcbiAqIENvbnZlcnQgYSBgc3RyaW5nYCB0byBjb25zdGFudCBjYXNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5cbmZ1bmN0aW9uIHRvQ29uc3RhbnRDYXNlIChzdHJpbmcpIHtcbiAgcmV0dXJuIHNuYWtlKHN0cmluZykudG9VcHBlckNhc2UoKTtcbn0iLCJ2YXIgdG9TcGFjZSA9IHJlcXVpcmUoJ3RvLXNwYWNlLWNhc2UnKTtcblxuXG4vKipcbiAqIEV4cG9zZSBgdG9TbmFrZUNhc2VgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdG9TbmFrZUNhc2U7XG5cblxuLyoqXG4gKiBDb252ZXJ0IGEgYHN0cmluZ2AgdG8gc25ha2UgY2FzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuXG5mdW5jdGlvbiB0b1NuYWtlQ2FzZSAoc3RyaW5nKSB7XG4gIHJldHVybiB0b1NwYWNlKHN0cmluZykucmVwbGFjZSgvXFxzL2csICdfJyk7XG59XG4iLCJcbnZhciB0b1NwYWNlID0gcmVxdWlyZSgndG8tc3BhY2UtY2FzZScpO1xuXG5cbi8qKlxuICogRXhwb3NlIGB0b0RvdENhc2VgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdG9Eb3RDYXNlO1xuXG5cbi8qKlxuICogQ29udmVydCBhIGBzdHJpbmdgIHRvIHNsdWcgY2FzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuXG5mdW5jdGlvbiB0b0RvdENhc2UgKHN0cmluZykge1xuICByZXR1cm4gdG9TcGFjZShzdHJpbmcpLnJlcGxhY2UoL1xccy9nLCAnLicpO1xufSIsIlxudmFyIHRvU3BhY2UgPSByZXF1aXJlKCd0by1zcGFjZS1jYXNlJyk7XG5cblxuLyoqXG4gKiBFeHBvc2UgYHRvUGFzY2FsQ2FzZWAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b1Bhc2NhbENhc2U7XG5cblxuLyoqXG4gKiBDb252ZXJ0IGEgYHN0cmluZ2AgdG8gcGFzY2FsIGNhc2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cblxuZnVuY3Rpb24gdG9QYXNjYWxDYXNlIChzdHJpbmcpIHtcbiAgcmV0dXJuIHRvU3BhY2Uoc3RyaW5nKS5yZXBsYWNlKC8oPzpefFxccykoXFx3KS9nLCBmdW5jdGlvbiAobWF0Y2hlcywgbGV0dGVyKSB7XG4gICAgcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xuICB9KTtcbn0iLCJcbnZhciBjbGVhbiA9IHJlcXVpcmUoJ3RvLW5vLWNhc2UnKTtcblxuXG4vKipcbiAqIEV4cG9zZSBgdG9TZW50ZW5jZUNhc2VgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdG9TZW50ZW5jZUNhc2U7XG5cblxuLyoqXG4gKiBDb252ZXJ0IGEgYHN0cmluZ2AgdG8gY2FtZWwgY2FzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuXG5mdW5jdGlvbiB0b1NlbnRlbmNlQ2FzZSAoc3RyaW5nKSB7XG4gIHJldHVybiBjbGVhbihzdHJpbmcpLnJlcGxhY2UoL1thLXpdL2ksIGZ1bmN0aW9uIChsZXR0ZXIpIHtcbiAgICByZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG4gIH0pO1xufSIsIlxudmFyIHRvU3BhY2UgPSByZXF1aXJlKCd0by1zcGFjZS1jYXNlJyk7XG5cblxuLyoqXG4gKiBFeHBvc2UgYHRvU2x1Z0Nhc2VgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdG9TbHVnQ2FzZTtcblxuXG4vKipcbiAqIENvbnZlcnQgYSBgc3RyaW5nYCB0byBzbHVnIGNhc2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cblxuZnVuY3Rpb24gdG9TbHVnQ2FzZSAoc3RyaW5nKSB7XG4gIHJldHVybiB0b1NwYWNlKHN0cmluZykucmVwbGFjZSgvXFxzL2csICctJyk7XG59IiwiXG52YXIgY2FwaXRhbCA9IHJlcXVpcmUoJ3RvLWNhcGl0YWwtY2FzZScpXG4gICwgZXNjYXBlID0gcmVxdWlyZSgnZXNjYXBlLXJlZ2V4cCcpXG4gICwgbWFwID0gcmVxdWlyZSgnbWFwJylcbiAgLCBtaW5vcnMgPSByZXF1aXJlKCd0aXRsZS1jYXNlLW1pbm9ycycpO1xuXG5cbi8qKlxuICogRXhwb3NlIGB0b1RpdGxlQ2FzZWAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b1RpdGxlQ2FzZTtcblxuXG4vKipcbiAqIE1pbm9ycy5cbiAqL1xuXG52YXIgZXNjYXBlZCA9IG1hcChtaW5vcnMsIGVzY2FwZSk7XG52YXIgbWlub3JNYXRjaGVyID0gbmV3IFJlZ0V4cCgnW15eXVxcXFxiKCcgKyBlc2NhcGVkLmpvaW4oJ3wnKSArICcpXFxcXGInLCAnaWcnKTtcbnZhciBjb2xvbk1hdGNoZXIgPSAvOlxccyooXFx3KS9nO1xuXG5cbi8qKlxuICogQ29udmVydCBhIGBzdHJpbmdgIHRvIGNhbWVsIGNhc2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cblxuZnVuY3Rpb24gdG9UaXRsZUNhc2UgKHN0cmluZykge1xuICByZXR1cm4gY2FwaXRhbChzdHJpbmcpXG4gICAgLnJlcGxhY2UobWlub3JNYXRjaGVyLCBmdW5jdGlvbiAobWlub3IpIHtcbiAgICAgIHJldHVybiBtaW5vci50b0xvd2VyQ2FzZSgpO1xuICAgIH0pXG4gICAgLnJlcGxhY2UoY29sb25NYXRjaGVyLCBmdW5jdGlvbiAobGV0dGVyKSB7XG4gICAgICByZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG4gICAgfSk7XG59IiwiXG4vKipcbiAqIEVzY2FwZSByZWdleHAgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIGBzdHJgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzdHIpe1xuICByZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSgvKFsuKis/PV4hOiR7fSgpfFtcXF1cXC9cXFxcXSkvZywgJ1xcXFwkMScpO1xufTsiLCJcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xuXG5cbi8qKlxuICogTWFwIGFuIGFycmF5IG9yIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRvclxuICogQHJldHVybiB7TWl4ZWR9XG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtYXAgKG9iaiwgaXRlcmF0b3IpIHtcbiAgdmFyIGFyciA9IFtdO1xuICBlYWNoKG9iaiwgZnVuY3Rpb24gKG8pIHtcbiAgICBhcnIucHVzaChpdGVyYXRvci5hcHBseShudWxsLCBhcmd1bWVudHMpKTtcbiAgfSk7XG4gIHJldHVybiBhcnI7XG59OyIsIlxubW9kdWxlLmV4cG9ydHMgPSBbXG4gICdhJyxcbiAgJ2FuJyxcbiAgJ2FuZCcsXG4gICdhcycsXG4gICdhdCcsXG4gICdidXQnLFxuICAnYnknLFxuICAnZW4nLFxuICAnZm9yJyxcbiAgJ2Zyb20nLFxuICAnaG93JyxcbiAgJ2lmJyxcbiAgJ2luJyxcbiAgJ25laXRoZXInLFxuICAnbm9yJyxcbiAgJ29mJyxcbiAgJ29uJyxcbiAgJ29ubHknLFxuICAnb250bycsXG4gICdvdXQnLFxuICAnb3InLFxuICAncGVyJyxcbiAgJ3NvJyxcbiAgJ3RoYW4nLFxuICAndGhhdCcsXG4gICd0aGUnLFxuICAndG8nLFxuICAndW50aWwnLFxuICAndXAnLFxuICAndXBvbicsXG4gICd2JyxcbiAgJ3YuJyxcbiAgJ3ZlcnN1cycsXG4gICd2cycsXG4gICd2cy4nLFxuICAndmlhJyxcbiAgJ3doZW4nLFxuICAnd2l0aCcsXG4gICd3aXRob3V0JyxcbiAgJ3lldCdcbl07IiwiXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBgdXJsYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbih1cmwpe1xuICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgYS5ocmVmID0gdXJsO1xuICByZXR1cm4ge1xuICAgIGhyZWY6IGEuaHJlZixcbiAgICBob3N0OiBhLmhvc3QsXG4gICAgcG9ydDogYS5wb3J0LFxuICAgIGhhc2g6IGEuaGFzaCxcbiAgICBob3N0bmFtZTogYS5ob3N0bmFtZSxcbiAgICBwYXRobmFtZTogYS5wYXRobmFtZSxcbiAgICBwcm90b2NvbDogYS5wcm90b2NvbCxcbiAgICBzZWFyY2g6IGEuc2VhcmNoLFxuICAgIHF1ZXJ5OiBhLnNlYXJjaC5zbGljZSgxKVxuICB9XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGB1cmxgIGlzIGFic29sdXRlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuaXNBYnNvbHV0ZSA9IGZ1bmN0aW9uKHVybCl7XG4gIGlmICgwID09IHVybC5pbmRleE9mKCcvLycpKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKH51cmwuaW5kZXhPZignOi8vJykpIHJldHVybiB0cnVlO1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGB1cmxgIGlzIHJlbGF0aXZlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuaXNSZWxhdGl2ZSA9IGZ1bmN0aW9uKHVybCl7XG4gIHJldHVybiAhIGV4cG9ydHMuaXNBYnNvbHV0ZSh1cmwpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBgdXJsYCBpcyBjcm9zcyBkb21haW4uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5pc0Nyb3NzRG9tYWluID0gZnVuY3Rpb24odXJsKXtcbiAgdXJsID0gZXhwb3J0cy5wYXJzZSh1cmwpO1xuICByZXR1cm4gdXJsLmhvc3RuYW1lICE9IGxvY2F0aW9uLmhvc3RuYW1lXG4gICAgfHwgdXJsLnBvcnQgIT0gbG9jYXRpb24ucG9ydFxuICAgIHx8IHVybC5wcm90b2NvbCAhPSBsb2NhdGlvbi5wcm90b2NvbDtcbn07IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnZGF0YUxheWVyJywgeyB3cmFwOiBmYWxzZSB9KTtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xuXG4vKipcbiAqIEV4cG9zZSBgR1RNYC5cbiAqL1xuXG52YXIgR1RNID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignR29vZ2xlIFRhZyBNYW5hZ2VyJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ2RhdGFMYXllcicpXG4gIC5nbG9iYWwoJ2dvb2dsZV90YWdfbWFuYWdlcicpXG4gIC5vcHRpb24oJ2NvbnRhaW5lcklkJywgJycpXG4gIC5vcHRpb24oJ3RyYWNrTmFtZWRQYWdlcycsIHRydWUpXG4gIC5vcHRpb24oJ3RyYWNrQ2F0ZWdvcml6ZWRQYWdlcycsIHRydWUpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RtLmpzP2lkPXt7IGNvbnRhaW5lcklkIH19Jmw9ZGF0YUxheWVyXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS90YWctbWFuYWdlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuR1RNLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKXtcbiAgcHVzaCh7ICdndG0uc3RhcnQnOiArbmV3IERhdGUsIGV2ZW50OiAnZ3RtLmpzJyB9KTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5HVE0ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93LmRhdGFMYXllciAmJiBbXS5wdXNoICE9IHdpbmRvdy5kYXRhTGF5ZXIucHVzaCk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkdUTS5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgY2F0ZWdvcnkgPSBwYWdlLmNhdGVnb3J5KCk7XG4gIHZhciBwcm9wcyA9IHBhZ2UucHJvcGVydGllcygpO1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcbiAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gIHZhciB0cmFjaztcblxuICAvLyBhbGxcbiAgaWYgKG9wdHMudHJhY2tBbGxQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjaygpKTtcbiAgfVxuXG4gIC8vIGNhdGVnb3JpemVkXG4gIGlmIChjYXRlZ29yeSAmJiBvcHRzLnRyYWNrQ2F0ZWdvcml6ZWRQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjayhjYXRlZ29yeSkpO1xuICB9XG5cbiAgLy8gbmFtZWRcbiAgaWYgKG5hbWUgJiYgb3B0cy50cmFja05hbWVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2sobmFtZSkpO1xuICB9XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3RhZy1tYW5hZ2VyL2Rldmd1aWRlI2V2ZW50c1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkdUTS5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgcHJvcHMuZXZlbnQgPSB0cmFjay5ldmVudCgpO1xuICBwdXNoKHByb3BzKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBJZGVudGlmeSA9IHJlcXVpcmUoJ2ZhY2FkZScpLklkZW50aWZ5O1xudmFyIFRyYWNrID0gcmVxdWlyZSgnZmFjYWRlJykuVHJhY2s7XG52YXIgY2FsbGJhY2sgPSByZXF1aXJlKCdjYWxsYmFjaycpO1xudmFyIGxvYWQgPSByZXF1aXJlKCdsb2FkLXNjcmlwdCcpO1xudmFyIG9uQm9keSA9IHJlcXVpcmUoJ29uLWJvZHknKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xuXG4vKipcbiAqIEV4cG9zZSBgR29TcXVhcmVkYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgR29TcXVhcmVkID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignR29TcXVhcmVkJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19ncycpXG4gIC5vcHRpb24oJ3NpdGVUb2tlbicsICcnKVxuICAub3B0aW9uKCdhbm9ueW1pemVJUCcsIGZhbHNlKVxuICAub3B0aW9uKCdjb29raWVEb21haW4nLCBudWxsKVxuICAub3B0aW9uKCd1c2VDb29raWVzJywgdHJ1ZSlcbiAgLm9wdGlvbigndHJhY2tIYXNoJywgZmFsc2UpXG4gIC5vcHRpb24oJ3RyYWNrTG9jYWwnLCBmYWxzZSlcbiAgLm9wdGlvbigndHJhY2tQYXJhbXMnLCB0cnVlKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vZDFsNnAyc2M5NjQ1aGMuY2xvdWRmcm9udC5uZXQvdHJhY2tlci5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cHM6Ly93d3cuZ29zcXVhcmVkLmNvbS9kZXZlbG9wZXIvdHJhY2tlclxuICogT3B0aW9uczogaHR0cHM6Ly93d3cuZ29zcXVhcmVkLmNvbS9kZXZlbG9wZXIvdHJhY2tlci9jb25maWd1cmF0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Hb1NxdWFyZWQucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG4gIHB1c2gob3B0aW9ucy5zaXRlVG9rZW4pO1xuXG4gIGVhY2gob3B0aW9ucywgZnVuY3Rpb24obmFtZSwgdmFsdWUpe1xuICAgIGlmICgnc2l0ZVRva2VuJyA9PSBuYW1lKSByZXR1cm47XG4gICAgaWYgKG51bGwgPT0gdmFsdWUpIHJldHVybjtcbiAgICBwdXNoKCdzZXQnLCBuYW1lLCB2YWx1ZSk7XG4gIH0pO1xuXG4gIHNlbGYuaWRlbnRpZnkobmV3IElkZW50aWZ5KHtcbiAgICB0cmFpdHM6IHVzZXIudHJhaXRzKCksXG4gICAgdXNlcklkOiB1c2VyLmlkKClcbiAgfSkpO1xuXG4gIHNlbGYubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkPyAoY2hlY2tzIGlmIHRoZSB0cmFja2VyIHZlcnNpb24gaXMgc2V0KVxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuR29TcXVhcmVkLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5fZ3MgJiYgd2luZG93Ll9ncy52KTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBodHRwczovL3d3dy5nb3NxdWFyZWQuY29tL2RldmVsb3Blci90cmFja2VyL3BhZ2V2aWV3c1xuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbkdvU3F1YXJlZC5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgcHJvcHMgPSBwYWdlLnByb3BlcnRpZXMoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG4gIHB1c2goJ3RyYWNrJywgcHJvcHMucGF0aCwgbmFtZSB8fCBwcm9wcy50aXRsZSlcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogaHR0cHM6Ly93d3cuZ29zcXVhcmVkLmNvbS9kZXZlbG9wZXIvdHJhY2tlci90YWdnaW5nXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5Hb1NxdWFyZWQucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKHsgdXNlcklkOiAndXNlcklEJyB9KTtcbiAgdmFyIHVzZXJuYW1lID0gaWRlbnRpZnkudXNlcm5hbWUoKTtcbiAgdmFyIGVtYWlsID0gaWRlbnRpZnkuZW1haWwoKTtcbiAgdmFyIGlkID0gaWRlbnRpZnkudXNlcklkKCk7XG4gIGlmIChpZCkgcHVzaCgnc2V0JywgJ3Zpc2l0b3JJRCcsIGlkKTtcbiAgdmFyIG5hbWUgPSAgZW1haWwgfHwgdXNlcm5hbWUgfHwgaWQ7XG4gIGlmIChuYW1lKSBwdXNoKCdzZXQnLCAndmlzaXRvck5hbWUnLCBuYW1lKTtcbiAgcHVzaCgnc2V0JywgJ3Zpc2l0b3InLCB0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwczovL3d3dy5nb3NxdWFyZWQuY29tL2RldmVsb3Blci90cmFja2VyL2V2ZW50c1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR29TcXVhcmVkLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgcHVzaCgnZXZlbnQnLCB0cmFjay5ldmVudCgpLCB0cmFjay5wcm9wZXJ0aWVzKCkpO1xufTtcblxuLyoqXG4gKiBDaGVja2VkIG91dC5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuR29TcXVhcmVkLnByb3RvdHlwZS5jb21wbGV0ZWRPcmRlciA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb2R1Y3RzID0gdHJhY2sucHJvZHVjdHMoKTtcbiAgdmFyIGl0ZW1zID0gW107XG5cbiAgZWFjaChwcm9kdWN0cywgZnVuY3Rpb24ocHJvZHVjdCl7XG4gICAgdmFyIHRyYWNrID0gbmV3IFRyYWNrKHsgcHJvcGVydGllczogcHJvZHVjdCB9KTtcbiAgICBpdGVtcy5wdXNoKHtcbiAgICAgIGNhdGVnb3J5OiB0cmFjay5jYXRlZ29yeSgpLFxuICAgICAgcXVhbnRpdHk6IHRyYWNrLnF1YW50aXR5KCksXG4gICAgICBwcmljZTogdHJhY2sucHJpY2UoKSxcbiAgICAgIG5hbWU6IHRyYWNrLm5hbWUoKSxcbiAgICB9KTtcbiAgfSlcblxuICBwdXNoKCd0cmFuc2FjdGlvbicsIHRyYWNrLm9yZGVySWQoKSwge1xuICAgIHJldmVudWU6IHRyYWNrLnRvdGFsKCksXG4gICAgdHJhY2s6IHRydWVcbiAgfSwgaXRlbXMpO1xufTtcblxuLyoqXG4gKiBQdXNoIHRvIGBfZ3MucWAuXG4gKlxuICogQHBhcmFtIHsuLi59IGFyZ3NcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHB1c2goKXtcbiAgdmFyIF9ncyA9IHdpbmRvdy5fZ3MgPSB3aW5kb3cuX2dzIHx8IGZ1bmN0aW9uKCl7XG4gICAgKF9ncy5xID0gX2dzLnEgfHwgW10pLnB1c2goYXJndW1lbnRzKTtcbiAgfTtcbiAgX2dzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBhbGlhcyA9IHJlcXVpcmUoJ2FsaWFzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBIZWFwYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgSGVhcCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0hlYXAnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnaGVhcCcpXG4gIC5nbG9iYWwoJ19oZWFwaWQnKVxuICAub3B0aW9uKCdhcHBJZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vZDM2bHZ1Y2c5a3pvdXMuY2xvdWRmcm9udC5uZXRcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vaGVhcGFuYWx5dGljcy5jb20vZG9jcyNpbnN0YWxsV2ViXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5IZWFwLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5oZWFwPXdpbmRvdy5oZWFwfHxbXTt3aW5kb3cuaGVhcC5sb2FkPWZ1bmN0aW9uKGEpe3dpbmRvdy5faGVhcGlkPWE7dmFyIGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7d2luZG93LmhlYXAucHVzaChbYV0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpO307fSxlPVtcImlkZW50aWZ5XCIsXCJ0cmFja1wiXTtmb3IgKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspd2luZG93LmhlYXBbZVtmXV09ZChlW2ZdKTt9O1xuICB3aW5kb3cuaGVhcC5sb2FkKHRoaXMub3B0aW9ucy5hcHBJZCk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuSGVhcC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICh3aW5kb3cuaGVhcCAmJiB3aW5kb3cuaGVhcC5hcHBpZCk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIGh0dHBzOi8vaGVhcGFuYWx5dGljcy5jb20vZG9jcyNpZGVudGlmeVxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuSGVhcC5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoKTtcbiAgdmFyIHVzZXJuYW1lID0gaWRlbnRpZnkudXNlcm5hbWUoKTtcbiAgdmFyIGlkID0gaWRlbnRpZnkudXNlcklkKCk7XG4gIHZhciBoYW5kbGUgPSB1c2VybmFtZSB8fCBpZDtcbiAgaWYgKGhhbmRsZSkgdHJhaXRzLmhhbmRsZSA9IGhhbmRsZTtcbiAgZGVsZXRlIHRyYWl0cy51c2VybmFtZTtcbiAgd2luZG93LmhlYXAuaWRlbnRpZnkodHJhaXRzKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cHM6Ly9oZWFwYW5hbHl0aWNzLmNvbS9kb2NzI3RyYWNrXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5IZWFwLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgd2luZG93LmhlYXAudHJhY2sodHJhY2suZXZlbnQoKSwgdHJhY2sucHJvcGVydGllcygpKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcblxuLyoqXG4gKiBFeHBvc2UgYGhlbGxvYmFyLmNvbWAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEhlbGxvYmFyID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignSGVsbG8gQmFyJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19oYnEnKVxuICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL3MzLmFtYXpvbmF3cy5jb20vc2NyaXB0cy5oZWxsb2Jhci5jb20ve3sgYXBpS2V5IH19LmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL3MzLmFtYXpvbmF3cy5jb20vc2NyaXB0cy5oZWxsb2Jhci5jb20vYmI5MDA2NjVhMzA5MGE3OWVlMWRiOThjM2FmMjFlYTE3NGJiYzA5Zi5qc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuSGVsbG9iYXIucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9oYnEgPSB3aW5kb3cuX2hicSB8fCBbXTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5IZWxsb2Jhci5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX2hicSAmJiB3aW5kb3cuX2hicS5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgSGl0VGFpbGAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEhpdFRhaWwgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdIaXRUYWlsJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ2h0aycpXG4gIC5vcHRpb24oJ3NpdGVJZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8ve3sgc2l0ZUlkIH19LmhpdHRhaWwuY29tL21sdC5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5IaXRUYWlsLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuSGl0VGFpbC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGlzLmZuKHdpbmRvdy5odGspO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX2hzcScpO1xudmFyIGNvbnZlcnQgPSByZXF1aXJlKCdjb252ZXJ0LWRhdGVzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBIdWJTcG90YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgSHViU3BvdCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0h1YlNwb3QnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2hzcScpXG4gIC5vcHRpb24oJ3BvcnRhbElkJywgbnVsbClcbiAgLnRhZygnPHNjcmlwdCBpZD1cImhzLWFuYWx5dGljc1wiIHNyYz1cImh0dHBzOi8vanMuaHMtYW5hbHl0aWNzLm5ldC9hbmFseXRpY3Mve3sgY2FjaGUgfX0ve3sgcG9ydGFsSWQgfX0uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuSHViU3BvdC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuX2hzcSA9IFtdO1xuICB2YXIgY2FjaGUgPSBNYXRoLmNlaWwobmV3IERhdGUoKSAvIDMwMDAwMCkgKiAzMDAwMDA7XG4gIHRoaXMubG9hZCh7IGNhY2hlOiBjYWNoZSB9LCB0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuSHViU3BvdC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX2hzcSAmJiB3aW5kb3cuX2hzcS5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNhdGVnb3J5IChvcHRpb25hbClcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIChvcHRpb25hbClcbiAqL1xuXG5IdWJTcG90LnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHB1c2goJ190cmFja1BhZ2V2aWV3Jyk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuSHViU3BvdC5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIGlmICghaWRlbnRpZnkuZW1haWwoKSkgcmV0dXJuO1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKCk7XG4gIHRyYWl0cyA9IGNvbnZlcnREYXRlcyh0cmFpdHMpO1xuICBwdXNoKCdpZGVudGlmeScsIHRyYWl0cyk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuSHViU3BvdC5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgcHJvcHMgPSBjb252ZXJ0RGF0ZXMocHJvcHMpO1xuICBwdXNoKCd0cmFja0V2ZW50JywgdHJhY2suZXZlbnQoKSwgcHJvcHMpO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0IGFsbCB0aGUgZGF0ZXMgaW4gdGhlIEh1YlNwb3QgcHJvcGVydGllcyB0byBtaWxsaXNlY29uZCB0aW1lc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzXG4gKi9cblxuZnVuY3Rpb24gY29udmVydERhdGVzKHByb3BlcnRpZXMpe1xuICByZXR1cm4gY29udmVydChwcm9wZXJ0aWVzLCBmdW5jdGlvbihkYXRlKXsgcmV0dXJuIGRhdGUuZ2V0VGltZSgpOyB9KTtcbn1cbiIsIlxyXG4vKipcclxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cclxuICovXHJcblxyXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcclxudmFyIGFsaWFzID0gcmVxdWlyZSgnYWxpYXMnKTtcclxuXHJcbi8qKlxyXG4gKiBFeHBvc2UgYEltcHJvdmVseWAgaW50ZWdyYXRpb24uXHJcbiAqL1xyXG5cclxudmFyIEltcHJvdmVseSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0ltcHJvdmVseScpXHJcbiAgLmFzc3VtZXNQYWdldmlldygpXHJcbiAgLmdsb2JhbCgnX2ltcHJvdmVseScpXHJcbiAgLmdsb2JhbCgnaW1wcm92ZWx5JylcclxuICAub3B0aW9uKCdkb21haW4nLCAnJylcclxuICAub3B0aW9uKCdwcm9qZWN0SWQnLCBudWxsKVxyXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy97eyBkb21haW4gfX0uaWxqbXAuY29tL2ltcHJvdmVseS5qc1wiPicpO1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUuXHJcbiAqXHJcbiAqIGh0dHA6Ly93d3cuaW1wcm92ZWx5LmNvbS9kb2NzL2xhbmRpbmctcGFnZS1jb2RlXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXHJcbiAqL1xyXG5cclxuSW1wcm92ZWx5LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XHJcbiAgd2luZG93Ll9pbXByb3ZlbHkgPSBbXTtcclxuICB3aW5kb3cuaW1wcm92ZWx5ID0geyBpbml0OiBmdW5jdGlvbihlLCB0KXsgd2luZG93Ll9pbXByb3ZlbHkucHVzaChbXCJpbml0XCIsIGUsIHRdKTsgfSwgZ29hbDogZnVuY3Rpb24oZSl7IHdpbmRvdy5faW1wcm92ZWx5LnB1c2goW1wiZ29hbFwiLCBlXSk7IH0sIGxhYmVsOiBmdW5jdGlvbihlKXsgd2luZG93Ll9pbXByb3ZlbHkucHVzaChbXCJsYWJlbFwiLCBlXSk7IH19O1xyXG5cclxuICB2YXIgZG9tYWluID0gdGhpcy5vcHRpb25zLmRvbWFpbjtcclxuICB2YXIgaWQgPSB0aGlzLm9wdGlvbnMucHJvamVjdElkO1xyXG4gIHdpbmRvdy5pbXByb3ZlbHkuaW5pdChkb21haW4sIGlkKTtcclxuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XHJcbn07XHJcblxyXG4vKipcclxuICogTG9hZGVkP1xyXG4gKlxyXG4gKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gKi9cclxuXHJcbkltcHJvdmVseS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcclxuICByZXR1cm4gISEgKHdpbmRvdy5pbXByb3ZlbHkgJiYgd2luZG93LmltcHJvdmVseS5pZGVudGlmeSk7XHJcbn07XHJcblxyXG4vKipcclxuICogSWRlbnRpZnkuXHJcbiAqXHJcbiAqIGh0dHA6Ly93d3cuaW1wcm92ZWx5LmNvbS9kb2NzL2xhYmVsaW5nLXZpc2l0b3JzXHJcbiAqXHJcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XHJcbiAqL1xyXG5cclxuSW1wcm92ZWx5LnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcclxuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcclxuICBpZiAoaWQpIHdpbmRvdy5pbXByb3ZlbHkubGFiZWwoaWQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRyYWNrLlxyXG4gKlxyXG4gKiBodHRwOi8vd3d3LmltcHJvdmVseS5jb20vZG9jcy9jb252ZXJzaW9uLWNvZGVcclxuICpcclxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcclxuICovXHJcblxyXG5JbXByb3ZlbHkucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xyXG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoeyByZXZlbnVlOiAnYW1vdW50JyB9KTtcclxuICBwcm9wcy50eXBlID0gdHJhY2suZXZlbnQoKTtcclxuICB3aW5kb3cuaW1wcm92ZWx5LmdvYWwocHJvcHMpO1xyXG59O1xyXG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19pdmEnKTtcbnZhciBUcmFjayA9IHJlcXVpcmUoJ2ZhY2FkZScpLlRyYWNrO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEhPUC5cbiAqL1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBFeHBvc2UgYEluc2lkZVZhdWx0YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgSW5zaWRlVmF1bHQgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdJbnNpZGVWYXVsdCcpXG4gIC5nbG9iYWwoJ19pdmEnKVxuICAub3B0aW9uKCdjbGllbnRJZCcsICcnKVxuICAub3B0aW9uKCdkb21haW4nLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2FuYWx5dGljcy5zdGF0aWNpdi5jb20vaXZhLmpzXCI+JylcbiAgLm1hcHBpbmcoJ2V2ZW50cycpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHBhZ2VcbiAqL1xuXG5JbnNpZGVWYXVsdC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgZG9tYWluID0gdGhpcy5vcHRpb25zLmRvbWFpbjtcbiAgd2luZG93Ll9pdmEgPSB3aW5kb3cuX2l2YSB8fCBbXTtcbiAgcHVzaCgnc2V0Q2xpZW50SWQnLCB0aGlzLm9wdGlvbnMuY2xpZW50SWQpO1xuICB2YXIgdXNlcklkID0gdGhpcy5hbmFseXRpY3MudXNlcigpLmlkKCk7XG4gIGlmICh1c2VySWQpIHB1c2goJ3NldFVzZXJJZCcsIHVzZXJJZCk7XG4gIGlmIChkb21haW4pIHB1c2goJ3NldERvbWFpbicsIGRvbWFpbik7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuSW5zaWRlVmF1bHQucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9pdmEgJiYgd2luZG93Ll9pdmEucHVzaCAhPT0gQXJyYXkucHJvdG90eXBlLnB1c2gpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkluc2lkZVZhdWx0LnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgcHVzaCgnc2V0VXNlcklkJywgaWRlbnRpZnkudXNlcklkKCkpO1xufTtcblxuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuSW5zaWRlVmF1bHQucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgLy8gdGhleSB3YW50IGV2ZXJ5IGxhbmRpbmcgcGFnZSB0byBzZW5kIGEgXCJjbGlja1wiIGV2ZW50LlxuICBwdXNoKCd0cmFja0V2ZW50JywgJ2NsaWNrJyk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIFRyYWNrcyBldmVyeXRoaW5nIGV4Y2VwdCAnc2FsZScgZXZlbnRzLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuSW5zaWRlVmF1bHQucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzKHRyYWNrLmV2ZW50KCkpO1xuICB2YXIgdmFsdWUgPSB0cmFjay5yZXZlbnVlKCkgfHwgdHJhY2sudmFsdWUoKSB8fCAwO1xuICB2YXIgZXZlbnRJZCA9IHRyYWNrLm9yZGVySWQoKSB8fCB1c2VyLmlkKCkgfHwgJyc7XG4gIGVhY2goZXZlbnRzLCBmdW5jdGlvbihldmVudCl7XG4gICAgLy8gJ3NhbGUnIGlzIGEgc3BlY2lhbCBldmVudCB0aGF0IHdpbGwgYmUgcm91dGVkIHRvIGEgdGFibGUgdGhhdCBpcyBkZXByZWNhdGVkIG9uIEluc2lkZVZhdWx0J3MgZW5kLlxuICAgIC8vIFRoZXkgZG9uJ3Qgd2FudCBhIGdlbmVyaWMgJ3NhbGUnIGV2ZW50IHRvIGdvIHRvIHRoZWlyIGRlcHJlY2F0ZWQgdGFibGUuXG4gICAgaWYgKGV2ZW50ICE9ICdzYWxlJykge1xuICAgICAgcHVzaCgndHJhY2tFdmVudCcsIGV2ZW50LCB2YWx1ZSwgZXZlbnRJZCk7XG4gICAgfVxuICB9KTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19faW5zcCcpO1xudmFyIGFsaWFzID0gcmVxdWlyZSgnYWxpYXMnKTtcbnZhciBjbG9uZSA9IHJlcXVpcmUoJ2Nsb25lJyk7XG5cbi8qKlxuICogRXhwb3NlIGBJbnNwZWN0bGV0YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgSW5zcGVjdGxldCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0luc3BlY3RsZXQnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX19pbnNwJylcbiAgLmdsb2JhbCgnX19pbnNwXycpXG4gIC5vcHRpb24oJ3dpZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vY2RuLmluc3BlY3RsZXQuY29tL2luc3BlY3RsZXQuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vd3d3Lmluc3BlY3RsZXQuY29tL2Rhc2hib2FyZC9lbWJlZGNvZGUvMTQ5MjQ2MTc1OS9pbml0aWFsXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5JbnNwZWN0bGV0LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHB1c2goJ3dpZCcsIHRoaXMub3B0aW9ucy53aWQpO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkluc3BlY3RsZXQucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9faW5zcF8gJiYgd2luZG93Ll9faW5zcCk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIGh0dHA6Ly93d3cuaW5zcGVjdGxldC5jb20vZG9jcyN0YWdnaW5nXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5JbnNwZWN0bGV0LnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uIChpZGVudGlmeSkge1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKHsgaWQ6ICd1c2VyaWQnIH0pO1xuICBwdXNoKCd0YWdTZXNzaW9uJywgdHJhaXRzKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cDovL3d3dy5pbnNwZWN0bGV0LmNvbS9kb2NzL3RhZ3NcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkluc3BlY3RsZXQucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICBwdXNoKCd0YWdTZXNzaW9uJywgdHJhY2suZXZlbnQoKSk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogaHR0cDovL3d3dy5pbnNwZWN0bGV0LmNvbS9kb2NzL3RhZ3NcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkluc3BlY3RsZXQucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbigpe1xuICBwdXNoKCd2aXJ0dWFsUGFnZScpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGNvbnZlcnREYXRlcyA9IHJlcXVpcmUoJ2NvbnZlcnQtZGF0ZXMnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJ2RlZmF1bHRzJyk7XG52YXIgaXNFbWFpbCA9IHJlcXVpcmUoJ2lzLWVtYWlsJyk7XG52YXIgbG9hZCA9IHJlcXVpcmUoJ2xvYWQtc2NyaXB0Jyk7XG52YXIgZW1wdHkgPSByZXF1aXJlKCdpcy1lbXB0eScpO1xudmFyIGFsaWFzID0gcmVxdWlyZSgnYWxpYXMnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xudmFyIHdoZW4gPSByZXF1aXJlKCd3aGVuJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgSW50ZXJjb21gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBJbnRlcmNvbSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0ludGVyY29tJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ0ludGVyY29tJylcbiAgLm9wdGlvbignYWN0aXZhdG9yJywgJyNJbnRlcmNvbURlZmF1bHRXaWRnZXQnKVxuICAub3B0aW9uKCdhcHBJZCcsICcnKVxuICAub3B0aW9uKCdpbmJveCcsIGZhbHNlKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cImh0dHBzOi8vc3RhdGljLmludGVyY29tY2RuLmNvbS9pbnRlcmNvbS52MS5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL2RvY3MuaW50ZXJjb20uaW8vXG4gKiBodHRwOi8vZG9jcy5pbnRlcmNvbS5pby8jSW50ZXJjb21KU1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuSW50ZXJjb20ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB3aGVuKGZ1bmN0aW9uKCl7IHJldHVybiBzZWxmLmxvYWRlZCgpOyB9LCBzZWxmLnJlYWR5KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkludGVyY29tLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMuZm4od2luZG93LkludGVyY29tKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5JbnRlcmNvbS5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuSW50ZXJjb20oJ3VwZGF0ZScpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBodHRwOi8vZG9jcy5pbnRlcmNvbS5pby8jSW50ZXJjb21KU1xuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuSW50ZXJjb20ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKHsgdXNlcklkOiAndXNlcl9pZCcgfSk7XG4gIHZhciBhY3RpdmF0b3IgPSB0aGlzLm9wdGlvbnMuYWN0aXZhdG9yO1xuICB2YXIgb3B0cyA9IGlkZW50aWZ5Lm9wdGlvbnModGhpcy5uYW1lKTtcbiAgdmFyIGNvbXBhbnlDcmVhdGVkID0gaWRlbnRpZnkuY29tcGFueUNyZWF0ZWQoKTtcbiAgdmFyIGNyZWF0ZWQgPSBpZGVudGlmeS5jcmVhdGVkKCk7XG4gIHZhciBlbWFpbCA9IGlkZW50aWZ5LmVtYWlsKCk7XG4gIHZhciBuYW1lID0gaWRlbnRpZnkubmFtZSgpO1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgdmFyIGdyb3VwID0gdGhpcy5hbmFseXRpY3MuZ3JvdXAoKTtcblxuICBpZiAoIWlkICYmICF0cmFpdHMuZW1haWwpIHJldHVybjsgLy8gb25lIGlzIHJlcXVpcmVkXG5cbiAgdHJhaXRzLmFwcF9pZCA9IHRoaXMub3B0aW9ucy5hcHBJZDtcblxuICAvLyBpbnRlcmNvbSByZXF1aXJlcyBgY29tcGFueWAgdG8gYmUgYW4gb2JqZWN0LiBkZWZhdWx0IGl0IHdpdGggZ3JvdXAgdHJhaXRzXG4gIC8vIHNvIHRoYXQgd2UgZ3VhcmFudGVlIGFuIGBpZGAgaXMgdGhlcmUsIHNpbmNlIHRoZXkgcmVxdWlyZSBpdFxuICBpZiAobnVsbCAhPSB0cmFpdHMuY29tcGFueSAmJiAhaXMub2JqZWN0KHRyYWl0cy5jb21wYW55KSkgZGVsZXRlIHRyYWl0cy5jb21wYW55O1xuICBpZiAodHJhaXRzLmNvbXBhbnkpIGRlZmF1bHRzKHRyYWl0cy5jb21wYW55LCBncm91cC50cmFpdHMoKSk7XG5cbiAgLy8gbmFtZVxuICBpZiAobmFtZSkgdHJhaXRzLm5hbWUgPSBuYW1lO1xuXG4gIC8vIGhhbmRsZSBkYXRlc1xuICBpZiAodHJhaXRzLmNvbXBhbnkgJiYgY29tcGFueUNyZWF0ZWQpIHRyYWl0cy5jb21wYW55LmNyZWF0ZWQgPSBjb21wYW55Q3JlYXRlZDtcbiAgaWYgKGNyZWF0ZWQpIHRyYWl0cy5jcmVhdGVkID0gY3JlYXRlZDtcblxuICAvLyBjb252ZXJ0IGRhdGVzXG4gIHRyYWl0cyA9IGNvbnZlcnREYXRlcyh0cmFpdHMsIGZvcm1hdERhdGUpO1xuICB0cmFpdHMgPSBhbGlhcyh0cmFpdHMsIHsgY3JlYXRlZDogJ2NyZWF0ZWRfYXQnfSk7XG4gIGlmICh0cmFpdHMuY29tcGFueSkgdHJhaXRzLmNvbXBhbnkgPSBhbGlhcyh0cmFpdHMuY29tcGFueSwgeyBjcmVhdGVkOiAnY3JlYXRlZF9hdCcgfSk7XG5cbiAgLy8gaGFuZGxlIG9wdGlvbnNcbiAgaWYgKG9wdHMuaW5jcmVtZW50cykgdHJhaXRzLmluY3JlbWVudHMgPSBvcHRzLmluY3JlbWVudHM7XG4gIGlmIChvcHRzLnVzZXJIYXNoKSB0cmFpdHMudXNlcl9oYXNoID0gb3B0cy51c2VySGFzaDtcbiAgaWYgKG9wdHMudXNlcl9oYXNoKSB0cmFpdHMudXNlcl9oYXNoID0gb3B0cy51c2VyX2hhc2g7XG5cbiAgLy8gSW50ZXJjb20sIHdpbGwgZm9yY2UgdGhlIHdpZGdldCB0byBhcHBlYXJcbiAgLy8gaWYgdGhlIHNlbGVjdG9yIGlzICNJbnRlcmNvbURlZmF1bHRXaWRnZXRcbiAgLy8gc28gbm8gbmVlZCB0byBjaGVjayBpbmJveCwganVzdCBuZWVkIHRvIGNoZWNrXG4gIC8vIHRoYXQgdGhlIHNlbGVjdG9yIGlzbid0ICNJbnRlcmNvbURlZmF1bHRXaWRnZXQuXG4gIGlmICgnI0ludGVyY29tRGVmYXVsdFdpZGdldCcgIT0gYWN0aXZhdG9yKSB7XG4gICAgdHJhaXRzLndpZGdldCA9IHsgYWN0aXZhdG9yOiBhY3RpdmF0b3IgfTtcbiAgfVxuXG4gIHZhciBtZXRob2QgPSB0aGlzLl9pZCAhPT0gaWQgPyAnYm9vdCc6ICd1cGRhdGUnO1xuICB0aGlzLl9pZCA9IGlkOyAvLyBjYWNoZSBmb3IgbmV4dCB0aW1lXG5cbiAgd2luZG93LkludGVyY29tKG1ldGhvZCwgdHJhaXRzKTtcbn07XG5cbi8qKlxuICogR3JvdXAuXG4gKlxuICogQHBhcmFtIHtHcm91cH0gZ3JvdXBcbiAqL1xuXG5JbnRlcmNvbS5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbihncm91cCl7XG4gIHZhciBwcm9wcyA9IGdyb3VwLnByb3BlcnRpZXMoKTtcbiAgdmFyIGlkID0gZ3JvdXAuZ3JvdXBJZCgpO1xuICBpZiAoaWQpIHByb3BzLmlkID0gaWQ7XG4gIHdpbmRvdy5JbnRlcmNvbSgndXBkYXRlJywgeyBjb21wYW55OiBwcm9wcyB9KTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5JbnRlcmNvbS5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHdpbmRvdy5JbnRlcmNvbSgndHJhY2tFdmVudCcsIHRyYWNrLmV2ZW50KCksIHRyYWNrLnByb3BlcnRpZXMoKSk7XG59O1xuXG4vKipcbiAqIEZvcm1hdCBhIGRhdGUgdG8gSW50ZXJjb20ncyBsaWtpbmcuXG4gKlxuICogQHBhcmFtIHtEYXRlfSBkYXRlXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKGRhdGUgLyAxMDAwKTtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEtlZW4gSU9gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBLZWVuID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignS2VlbiBJTycpXG4gIC5nbG9iYWwoJ0tlZW4nKVxuICAub3B0aW9uKCdwcm9qZWN0SWQnLCAnJylcbiAgLm9wdGlvbigncmVhZEtleScsICcnKVxuICAub3B0aW9uKCd3cml0ZUtleScsICcnKVxuICAub3B0aW9uKCdpcEFkZG9uJywgZmFsc2UpXG4gIC5vcHRpb24oJ3VhQWRkb24nLCBmYWxzZSlcbiAgLm9wdGlvbigndXJsQWRkb24nLCBmYWxzZSlcbiAgLm9wdGlvbigncmVmZXJyZXJBZGRvbicsIGZhbHNlKVxuICAub3B0aW9uKCd0cmFja05hbWVkUGFnZXMnLCB0cnVlKVxuICAub3B0aW9uKCd0cmFja0FsbFBhZ2VzJywgZmFsc2UpXG4gIC5vcHRpb24oJ3RyYWNrQ2F0ZWdvcml6ZWRQYWdlcycsIHRydWUpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9kMjZiMzk1Znd6dTVmei5jbG91ZGZyb250Lm5ldC8zLjAuNy97eyBsaWIgfX0ubWluLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL2tlZW4uaW8vZG9jcy9cbiAqL1xuXG5LZWVuLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKXtcbiAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICFmdW5jdGlvbihhLGIpe2lmKHZvaWQgMD09PWJbYV0pe2JbXCJfXCIrYV09e30sYlthXT1mdW5jdGlvbihjKXtiW1wiX1wiK2FdLmNsaWVudHM9YltcIl9cIithXS5jbGllbnRzfHx7fSxiW1wiX1wiK2FdLmNsaWVudHNbYy5wcm9qZWN0SWRdPXRoaXMsdGhpcy5fY29uZmlnPWN9LGJbYV0ucmVhZHk9ZnVuY3Rpb24oYyl7YltcIl9cIithXS5yZWFkeT1iW1wiX1wiK2FdLnJlYWR5fHxbXSxiW1wiX1wiK2FdLnJlYWR5LnB1c2goYyl9O2Zvcih2YXIgYz1bXCJhZGRFdmVudFwiLFwic2V0R2xvYmFsUHJvcGVydGllc1wiLFwidHJhY2tFeHRlcm5hbExpbmtcIixcIm9uXCJdLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW1wiX1wiK2FdPXRoaXNbXCJfXCIrYV18fFtdLHRoaXNbXCJfXCIrYV0ucHVzaChhcmd1bWVudHMpLHRoaXN9fTtiW2FdLnByb3RvdHlwZVtlXT1mKGUpfX19KFwiS2VlblwiLHdpbmRvdyk7XG4gIHRoaXMuY2xpZW50ID0gbmV3IHdpbmRvdy5LZWVuKHtcbiAgICBwcm9qZWN0SWQ6IG9wdGlvbnMucHJvamVjdElkLFxuICAgIHdyaXRlS2V5OiBvcHRpb25zLndyaXRlS2V5LFxuICAgIHJlYWRLZXk6IG9wdGlvbnMucmVhZEtleVxuICB9KTtcblxuICAvLyBpZiB5b3UgaGF2ZSBhIHJlYWQta2V5LCB0aGVuIGxvYWQgdGhlIGZ1bGwga2VlbiBsaWJyYXJ5XG4gIHZhciBsaWIgPSB0aGlzLm9wdGlvbnMucmVhZEtleSA/ICdrZWVuJyA6ICdrZWVuLXRyYWNrZXInO1xuICB0aGlzLmxvYWQoeyBsaWI6IGxpYiB9LCB0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuS2Vlbi5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhKHdpbmRvdy5LZWVuICYmIHdpbmRvdy5LZWVuLnByb3RvdHlwZS5jb25maWd1cmUpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbktlZW4ucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xuICB2YXIgcHJvcHMgPSBwYWdlLnByb3BlcnRpZXMoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG4gIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuXG4gIC8vIGFsbCBwYWdlc1xuICBpZiAob3B0cy50cmFja0FsbFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKCkpO1xuICB9XG5cbiAgLy8gbmFtZWQgcGFnZXNcbiAgaWYgKG5hbWUgJiYgb3B0cy50cmFja05hbWVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2sobmFtZSkpO1xuICB9XG5cbiAgLy8gY2F0ZWdvcml6ZWQgcGFnZXNcbiAgaWYgKGNhdGVnb3J5ICYmIG9wdHMudHJhY2tDYXRlZ29yaXplZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKGNhdGVnb3J5KSk7XG4gIH1cbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogVE9ETzogbWlncmF0ZSBmcm9tIG9sZCBgdXNlcklkYCB0byBzaW1wbGVyIGBpZGBcbiAqIGh0dHBzOi8va2Vlbi5pby9kb2NzL2RhdGEtY29sbGVjdGlvbi9kYXRhLWVucmljaG1lbnQvI2FkZC1vbnNcbiAqXG4gKiBTZXQgdXAgdGhlIEtlZW4gYWRkb25zIG9iamVjdC4gVGhlc2UgbXVzdCBiZSBzcGVjaWZpY2FsbHlcbiAqIGVuYWJsZWQgYnkgdGhlIHNldHRpbmdzIGluIG9yZGVyIHRvIGluY2x1ZGUgdGhlIHBsdWdpbnMsIG9yIGVsc2VcbiAqIEtlZW4gd2lsbCByZWplY3QgdGhlIHJlcXVlc3QuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5LZWVuLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgdmFyIHVzZXIgPSB7fTtcbiAgaWYgKGlkKSB1c2VyLnVzZXJJZCA9IGlkO1xuICBpZiAodHJhaXRzKSB1c2VyLnRyYWl0cyA9IHRyYWl0cztcbiAgdmFyIHByb3BzID0geyB1c2VyOiB1c2VyIH07XG4gIHRoaXMuYWRkb25zKHByb3BzLCBpZGVudGlmeSk7XG4gIHRoaXMuY2xpZW50LnNldEdsb2JhbFByb3BlcnRpZXMoZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gY2xvbmUocHJvcHMpO1xuICB9KTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5LZWVuLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICB0aGlzLmFkZG9ucyhwcm9wcywgdHJhY2spO1xuICB0aGlzLmNsaWVudC5hZGRFdmVudCh0cmFjay5ldmVudCgpLCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIEF0dGFjaCBhZGRvbnMgdG8gYG9iamAgd2l0aCBgbXNnYC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge0ZhY2FkZX0gbXNnXG4gKi9cblxuS2Vlbi5wcm90b3R5cGUuYWRkb25zID0gZnVuY3Rpb24ob2JqLCBtc2cpe1xuICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgdmFyIGFkZG9ucyA9IFtdO1xuXG4gIGlmIChvcHRpb25zLmlwQWRkb24pIHtcbiAgICBhZGRvbnMucHVzaCh7XG4gICAgICBuYW1lOiAna2VlbjppcF90b19nZW8nLFxuICAgICAgaW5wdXQ6IHsgaXA6ICdpcF9hZGRyZXNzJyB9LFxuICAgICAgb3V0cHV0OiAnaXBfZ2VvX2luZm8nXG4gICAgfSk7XG4gICAgb2JqLmlwX2FkZHJlc3MgPSAnJHtrZWVuLmlwfSc7XG4gIH1cblxuICBpZiAob3B0aW9ucy51YUFkZG9uKSB7XG4gICAgYWRkb25zLnB1c2goe1xuICAgICAgbmFtZTogJ2tlZW46dWFfcGFyc2VyJyxcbiAgICAgIGlucHV0OiB7IHVhX3N0cmluZzogJ3VzZXJfYWdlbnQnIH0sXG4gICAgICBvdXRwdXQ6ICdwYXJzZWRfdXNlcl9hZ2VudCdcbiAgICB9KTtcbiAgICBvYmoudXNlcl9hZ2VudCA9ICcke2tlZW4udXNlcl9hZ2VudH0nO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMudXJsQWRkb24pIHtcbiAgICBhZGRvbnMucHVzaCh7XG4gICAgICBuYW1lOiAna2Vlbjp1cmxfcGFyc2VyJyxcbiAgICAgIGlucHV0OiB7IHVybDogJ3BhZ2VfdXJsJyB9LFxuICAgICAgb3V0cHV0OiAncGFyc2VkX3BhZ2VfdXJsJ1xuICAgIH0pO1xuICAgIG9iai5wYWdlX3VybCA9IGRvY3VtZW50LmxvY2F0aW9uLmhyZWY7XG4gIH1cblxuICBpZiAob3B0aW9ucy5yZWZlcnJlckFkZG9uKSB7XG4gICAgYWRkb25zLnB1c2goe1xuICAgICAgbmFtZTogJ2tlZW46cmVmZXJyZXJfcGFyc2VyJyxcbiAgICAgIGlucHV0OiB7XG4gICAgICAgIHJlZmVycmVyX3VybDogJ3JlZmVycmVyX3VybCcsXG4gICAgICAgIHBhZ2VfdXJsOiAncGFnZV91cmwnXG4gICAgICB9LFxuICAgICAgb3V0cHV0OiAncmVmZXJyZXJfaW5mbydcbiAgICB9KTtcbiAgICBvYmoucmVmZXJyZXJfdXJsID0gZG9jdW1lbnQucmVmZXJyZXI7XG4gICAgb2JqLnBhZ2VfdXJsID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZjtcbiAgfVxuXG4gIG9iai5rZWVuID0ge1xuICAgIHRpbWVzdGFtcDogbXNnLnRpbWVzdGFtcCgpLFxuICAgIGFkZG9uczogYWRkb25zXG4gIH07XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgaW5kZXhvZiA9IHJlcXVpcmUoJ2luZGV4b2YnKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBLZW5zaG9vYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgS2Vuc2hvbyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0tlbnNob28nKVxuICAuZ2xvYmFsKCdrX3RyYWNrZXZlbnQnKVxuICAub3B0aW9uKCdjaWQnLCAnJylcbiAgLm9wdGlvbignc3ViZG9tYWluJywgJycpXG4gIC5vcHRpb24oJ2V2ZW50cycsIFtdKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8ve3sgc3ViZG9tYWluIH19LnhnNGtlbi5jb20vbWVkaWEvZ2V0cHgucGhwP2NpZD17eyBjaWQgfX1cIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIFNlZSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qdXN0aW5ib3lsZS83ODc1ODMyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5LZW5zaG9vLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkPyAoY2hlY2tzIGlmIHRoZSB0cmFja2luZyBmdW5jdGlvbiBpcyBzZXQpXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5LZW5zaG9vLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMuZm4od2luZG93LmtfdHJhY2tldmVudCk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIE9ubHkgdHJhY2tzIGV2ZW50cyBpZiB0aGV5IGFyZSBsaXN0ZWQgaW4gdGhlIGV2ZW50cyBhcnJheSBvcHRpb24uXG4gKiBXZSd2ZSBhc2tlZCBmb3IgZG9jcyBhIGZldyB0aW1lcyBidXQgbm8gZ28gOi9cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vam9yZ2Vnb3JrYS90aGVfdHJhY2tlci9ibG9iL21hc3Rlci9saWIvdGhlX3RyYWNrZXIvdHJhY2tlcnMva2Vuc2hvby5yYlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IGV2ZW50XG4gKi9cblxuS2Vuc2hvby5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBldmVudHMgPSB0aGlzLm9wdGlvbnMuZXZlbnRzO1xuICB2YXIgdHJhaXRzID0gdHJhY2sudHJhaXRzKCk7XG4gIHZhciBldmVudCA9IHRyYWNrLmV2ZW50KCk7XG4gIHZhciByZXZlbnVlID0gdHJhY2sucmV2ZW51ZSgpIHx8IDA7XG4gIGlmICghfmluZGV4b2YoZXZlbnRzLCBldmVudCkpIHJldHVybjtcblxuICB2YXIgcGFyYW1zID0gW1xuICAgICdpZD0nICsgdGhpcy5vcHRpb25zLmNpZCxcbiAgICAndHlwZT1jb252JyxcbiAgICAndmFsPScgKyByZXZlbnVlLFxuICAgICdvcmRlcklkPScgKyB0cmFjay5vcmRlcklkKCksXG4gICAgJ3Byb21vQ29kZT0nICsgdHJhY2suY291cG9uKCksXG4gICAgJ3ZhbHVlQ3VycmVuY3k9JyArIHRyYWNrLmN1cnJlbmN5KCksXG5cbiAgICAvLyBMaXZlIHRyYWNraW5nIGZpZWxkcy4gSWdub3JlZCBmb3Igbm93ICh1bnRpbCB3ZSBnZXQgZG9jdW1lbnRhdGlvbikuXG4gICAgJ0dDSUQ9JyxcbiAgICAna3c9JyxcbiAgICAncHJvZHVjdD0nXG4gIF07XG5cbiAgd2luZG93LmtfdHJhY2tldmVudChwYXJhbXMsIHRoaXMub3B0aW9ucy5zdWJkb21haW4pO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX2ttcScpO1xudmFyIFRyYWNrID0gcmVxdWlyZSgnZmFjYWRlJykuVHJhY2s7XG52YXIgYWxpYXMgPSByZXF1aXJlKCdhbGlhcycpO1xudmFyIEJhdGNoID0gcmVxdWlyZSgnYmF0Y2gnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEtJU1NtZXRyaWNzYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgS0lTU21ldHJpY3MgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdLSVNTbWV0cmljcycpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfa21xJylcbiAgLmdsb2JhbCgnS00nKVxuICAuZ2xvYmFsKCdfa21pbCcpXG4gIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAub3B0aW9uKCd0cmFja05hbWVkUGFnZXMnLCB0cnVlKVxuICAub3B0aW9uKCd0cmFja0NhdGVnb3JpemVkUGFnZXMnLCB0cnVlKVxuICAub3B0aW9uKCdwcmVmaXhQcm9wZXJ0aWVzJywgdHJ1ZSlcbiAgLnRhZygndXNlbGVzcycsICc8c2NyaXB0IHNyYz1cIi8vaS5raXNzbWV0cmljcy5jb20vaS5qc1wiPicpXG4gIC50YWcoJ2xpYnJhcnknLCAnPHNjcmlwdCBzcmM9XCIvL2RvdWcxaXphZXJ3dDMuY2xvdWRmcm9udC5uZXQve3sgYXBpS2V5IH19LjEuanNcIj4nKTtcblxuLyoqXG4gKiBDaGVjayBpZiBicm93c2VyIGlzIG1vYmlsZSwgZm9yIGtpc3NtZXRyaWNzLlxuICpcbiAqIGh0dHA6Ly9zdXBwb3J0Lmtpc3NtZXRyaWNzLmNvbS9ob3ctdG9zL2Jyb3dzZXItZGV0ZWN0aW9uLmh0bWwjbW9iaWxlLXZzLW5vbi1tb2JpbGVcbiAqL1xuXG5leHBvcnRzLmlzTW9iaWxlID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKVxuICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9CbGFja0JlcnJ5L2kpXG4gIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZXxpUG9kL2kpXG4gIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSlcbiAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvT3BlcmEgTWluaS9pKVxuICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9JRU1vYmlsZS9pKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9zdXBwb3J0Lmtpc3NtZXRyaWNzLmNvbS9hcGlzL2phdmFzY3JpcHRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbktJU1NtZXRyaWNzLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgd2luZG93Ll9rbXEgPSBbXTtcbiAgaWYgKGV4cG9ydHMuaXNNb2JpbGUpIHB1c2goJ3NldCcsIHsgJ01vYmlsZSBTZXNzaW9uJzogJ1llcycgfSk7XG5cbiAgdmFyIGJhdGNoID0gbmV3IEJhdGNoKCk7XG4gIGJhdGNoLnB1c2goZnVuY3Rpb24oZG9uZSl7IHNlbGYubG9hZCgndXNlbGVzcycsIGRvbmUpOyB9KSAvLyA6KVxuICBiYXRjaC5wdXNoKGZ1bmN0aW9uKGRvbmUpeyBzZWxmLmxvYWQoJ2xpYnJhcnknLCBkb25lKTsgfSlcbiAgYmF0Y2guZW5kKGZ1bmN0aW9uKCl7XG4gICAgc2VsZi50cmFja1BhZ2UocGFnZSk7XG4gICAgc2VsZi5yZWFkeSgpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuS0lTU21ldHJpY3MucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpcy5vYmplY3Qod2luZG93LktNKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5LSVNTbWV0cmljcy5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICBpZiAoIXdpbmRvdy5LTV9TS0lQX1BBR0VfVklFVykgd2luZG93LktNLnBhZ2VWaWV3KCk7XG4gIHRoaXMudHJhY2tQYWdlKHBhZ2UpO1xufTtcblxuLyoqXG4gKiBUcmFjayBwYWdlLlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbktJU1NtZXRyaWNzLnByb3RvdHlwZS50cmFja1BhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcbiAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgLy8gbmFtZWQgcGFnZXNcbiAgaWYgKG5hbWUgJiYgb3B0cy50cmFja05hbWVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2sobmFtZSkpO1xuICB9XG5cbiAgLy8gY2F0ZWdvcml6ZWQgcGFnZXNcbiAgaWYgKGNhdGVnb3J5ICYmIG9wdHMudHJhY2tDYXRlZ29yaXplZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKGNhdGVnb3J5KSk7XG4gIH1cbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5LSVNTbWV0cmljcy5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoKTtcbiAgdmFyIGlkID0gaWRlbnRpZnkudXNlcklkKCk7XG4gIGlmIChpZCkgcHVzaCgnaWRlbnRpZnknLCBpZCk7XG4gIGlmICh0cmFpdHMpIHB1c2goJ3NldCcsIHRyYWl0cyk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuS0lTU21ldHJpY3MucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgbWFwcGluZyA9IHsgcmV2ZW51ZTogJ0JpbGxpbmcgQW1vdW50JyB9O1xuICB2YXIgZXZlbnQgPSB0cmFjay5ldmVudCgpO1xuICB2YXIgcHJvcGVydGllcyA9IHRyYWNrLnByb3BlcnRpZXMobWFwcGluZyk7XG4gIGlmICh0aGlzLm9wdGlvbnMucHJlZml4UHJvcGVydGllcykgcHJvcGVydGllcyA9IHByZWZpeChldmVudCwgcHJvcGVydGllcyk7XG4gIHB1c2goJ3JlY29yZCcsIGV2ZW50LCBwcm9wZXJ0aWVzKTtcbn07XG5cbi8qKlxuICogQWxpYXMuXG4gKlxuICogQHBhcmFtIHtBbGlhc30gdG9cbiAqL1xuXG5LSVNTbWV0cmljcy5wcm90b3R5cGUuYWxpYXMgPSBmdW5jdGlvbihhbGlhcyl7XG4gIHB1c2goJ2FsaWFzJywgYWxpYXMudG8oKSwgYWxpYXMuZnJvbSgpKTtcbn07XG5cbi8qKlxuICogQ29tcGxldGVkIG9yZGVyLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5LSVNTbWV0cmljcy5wcm90b3R5cGUuY29tcGxldGVkT3JkZXIgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9kdWN0cyA9IHRyYWNrLnByb2R1Y3RzKCk7XG4gIHZhciBldmVudCA9IHRyYWNrLmV2ZW50KCk7XG5cbiAgLy8gdHJhbnNhY3Rpb25cbiAgcHVzaCgncmVjb3JkJywgZXZlbnQsIHByZWZpeChldmVudCwgdHJhY2sucHJvcGVydGllcygpKSk7XG5cbiAgLy8gaXRlbXNcbiAgd2luZG93Ll9rbXEucHVzaChmdW5jdGlvbigpe1xuICAgIHZhciBrbSA9IHdpbmRvdy5LTTtcbiAgICBlYWNoKHByb2R1Y3RzLCBmdW5jdGlvbihwcm9kdWN0LCBpKXtcbiAgICAgIHZhciB0ZW1wID0gbmV3IFRyYWNrKHsgZXZlbnQ6IGV2ZW50LCBwcm9wZXJ0aWVzOiBwcm9kdWN0IH0pO1xuICAgICAgdmFyIGl0ZW0gPSBwcmVmaXgoZXZlbnQsIHByb2R1Y3QpO1xuICAgICAgaXRlbS5fdCA9IGttLnRzKCkgKyBpO1xuICAgICAgaXRlbS5fZCA9IDE7XG4gICAgICBrbS5zZXQoaXRlbSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBQcmVmaXggcHJvcGVydGllcyB3aXRoIHRoZSBldmVudCBuYW1lLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAqIEByZXR1cm4ge09iamVjdH0gcHJlZml4ZWRcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHByZWZpeChldmVudCwgcHJvcGVydGllcyl7XG4gIHZhciBwcmVmaXhlZCA9IHt9O1xuICBlYWNoKHByb3BlcnRpZXMsIGZ1bmN0aW9uKGtleSwgdmFsKXtcbiAgICBpZiAoa2V5ID09PSAnQmlsbGluZyBBbW91bnQnKSB7XG4gICAgICBwcmVmaXhlZFtrZXldID0gdmFsO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmVmaXhlZFtldmVudCArICcgLSAnICsga2V5XSA9IHZhbDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcHJlZml4ZWQ7XG59XG4iLCIvKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudHJ5IHtcbiAgdmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbn0gY2F0Y2ggKGVycikge1xuICB2YXIgRW1pdHRlciA9IHJlcXVpcmUoJ2VtaXR0ZXInKTtcbn1cblxuLyoqXG4gKiBOb29wLlxuICovXG5cbmZ1bmN0aW9uIG5vb3AoKXt9XG5cbi8qKlxuICogRXhwb3NlIGBCYXRjaGAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBCYXRjaDtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgQmF0Y2guXG4gKi9cblxuZnVuY3Rpb24gQmF0Y2goKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCYXRjaCkpIHJldHVybiBuZXcgQmF0Y2g7XG4gIHRoaXMuZm5zID0gW107XG4gIHRoaXMuY29uY3VycmVuY3koSW5maW5pdHkpO1xuICB0aGlzLnRocm93cyh0cnVlKTtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIHRoaXMucHVzaChhcmd1bWVudHNbaV0pO1xuICB9XG59XG5cbi8qKlxuICogSW5oZXJpdCBmcm9tIGBFdmVudEVtaXR0ZXIucHJvdG90eXBlYC5cbiAqL1xuXG5pZiAoRXZlbnRFbWl0dGVyKSB7XG4gIEJhdGNoLnByb3RvdHlwZS5fX3Byb3RvX18gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlO1xufSBlbHNlIHtcbiAgRW1pdHRlcihCYXRjaC5wcm90b3R5cGUpO1xufVxuXG4vKipcbiAqIFNldCBjb25jdXJyZW5jeSB0byBgbmAuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEByZXR1cm4ge0JhdGNofVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5CYXRjaC5wcm90b3R5cGUuY29uY3VycmVuY3kgPSBmdW5jdGlvbihuKXtcbiAgdGhpcy5uID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFF1ZXVlIGEgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0JhdGNofVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5CYXRjaC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGZuKXtcbiAgdGhpcy5mbnMucHVzaChmbik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgd2V0aGVyIEJhdGNoIHdpbGwgb3Igd2lsbCBub3QgdGhyb3cgdXAuXG4gKlxuICogQHBhcmFtICB7Qm9vbGVhbn0gdGhyb3dzXG4gKiBAcmV0dXJuIHtCYXRjaH1cbiAqIEBhcGkgcHVibGljXG4gKi9cbkJhdGNoLnByb3RvdHlwZS50aHJvd3MgPSBmdW5jdGlvbih0aHJvd3MpIHtcbiAgdGhpcy5lID0gISF0aHJvd3M7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBFeGVjdXRlIGFsbCBxdWV1ZWQgZnVuY3Rpb25zIGluIHBhcmFsbGVsLFxuICogZXhlY3V0aW5nIGBjYihlcnIsIHJlc3VsdHMpYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHJldHVybiB7QmF0Y2h9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkJhdGNoLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihjYil7XG4gIHZhciBzZWxmID0gdGhpc1xuICAgICwgdG90YWwgPSB0aGlzLmZucy5sZW5ndGhcbiAgICAsIHBlbmRpbmcgPSB0b3RhbFxuICAgICwgcmVzdWx0cyA9IFtdXG4gICAgLCBlcnJvcnMgPSBbXVxuICAgICwgY2IgPSBjYiB8fCBub29wXG4gICAgLCBmbnMgPSB0aGlzLmZuc1xuICAgICwgbWF4ID0gdGhpcy5uXG4gICAgLCB0aHJvd3MgPSB0aGlzLmVcbiAgICAsIGluZGV4ID0gMFxuICAgICwgZG9uZTtcblxuICAvLyBlbXB0eVxuICBpZiAoIWZucy5sZW5ndGgpIHJldHVybiBjYihudWxsLCByZXN1bHRzKTtcblxuICAvLyBwcm9jZXNzXG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgdmFyIGkgPSBpbmRleCsrO1xuICAgIHZhciBmbiA9IGZuc1tpXTtcbiAgICBpZiAoIWZuKSByZXR1cm47XG4gICAgdmFyIHN0YXJ0ID0gbmV3IERhdGU7XG5cbiAgICB0cnkge1xuICAgICAgZm4oY2FsbGJhY2spO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxsYmFjayhlcnIsIHJlcyl7XG4gICAgICBpZiAoZG9uZSkgcmV0dXJuO1xuICAgICAgaWYgKGVyciAmJiB0aHJvd3MpIHJldHVybiBkb25lID0gdHJ1ZSwgY2IoZXJyKTtcbiAgICAgIHZhciBjb21wbGV0ZSA9IHRvdGFsIC0gcGVuZGluZyArIDE7XG4gICAgICB2YXIgZW5kID0gbmV3IERhdGU7XG5cbiAgICAgIHJlc3VsdHNbaV0gPSByZXM7XG4gICAgICBlcnJvcnNbaV0gPSBlcnI7XG5cbiAgICAgIHNlbGYuZW1pdCgncHJvZ3Jlc3MnLCB7XG4gICAgICAgIGluZGV4OiBpLFxuICAgICAgICB2YWx1ZTogcmVzLFxuICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICBwZW5kaW5nOiBwZW5kaW5nLFxuICAgICAgICB0b3RhbDogdG90YWwsXG4gICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZSxcbiAgICAgICAgcGVyY2VudDogY29tcGxldGUgLyB0b3RhbCAqIDEwMCB8IDAsXG4gICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgZW5kOiBlbmQsXG4gICAgICAgIGR1cmF0aW9uOiBlbmQgLSBzdGFydFxuICAgICAgfSk7XG5cbiAgICAgIGlmICgtLXBlbmRpbmcpIG5leHQoKVxuICAgICAgZWxzZSBpZighdGhyb3dzKSBjYihlcnJvcnMsIHJlc3VsdHMpO1xuICAgICAgZWxzZSBjYihudWxsLCByZXN1bHRzKTtcbiAgICB9XG4gIH1cblxuICAvLyBjb25jdXJyZW5jeVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGZucy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChpID09IG1heCkgYnJlYWs7XG4gICAgbmV4dCgpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuIiwiXG4vKipcbiAqIEV4cG9zZSBgRW1pdHRlcmAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBFbWl0dGVyO1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYEVtaXR0ZXJgLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gRW1pdHRlcihvYmopIHtcbiAgaWYgKG9iaikgcmV0dXJuIG1peGluKG9iaik7XG59O1xuXG4vKipcbiAqIE1peGluIHRoZSBlbWl0dGVyIHByb3BlcnRpZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbWl4aW4ob2JqKSB7XG4gIGZvciAodmFyIGtleSBpbiBFbWl0dGVyLnByb3RvdHlwZSkge1xuICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RW1pdHRlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUub24gPVxuRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcbiAgKHRoaXMuX2NhbGxiYWNrc1tldmVudF0gPSB0aGlzLl9jYWxsYmFja3NbZXZlbnRdIHx8IFtdKVxuICAgIC5wdXNoKGZuKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxuICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24oZXZlbnQsIGZuKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG5cbiAgZnVuY3Rpb24gb24oKSB7XG4gICAgc2VsZi5vZmYoZXZlbnQsIG9uKTtcbiAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgb24uZm4gPSBmbjtcbiAgdGhpcy5vbihldmVudCwgb24pO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLm9mZiA9XG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcblxuICAvLyBhbGxcbiAgaWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1tldmVudF07XG4gIGlmICghY2FsbGJhY2tzKSByZXR1cm4gdGhpcztcblxuICAvLyByZW1vdmUgYWxsIGhhbmRsZXJzXG4gIGlmICgxID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXG4gIHZhciBjYjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICBjYiA9IGNhbGxiYWNrc1tpXTtcbiAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuICAgICAgY2FsbGJhY2tzLnNwbGljZShpLCAxKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRW1pdCBgZXZlbnRgIHdpdGggdGhlIGdpdmVuIGFyZ3MuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge01peGVkfSAuLi5cbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xuICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxuICAgICwgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtcblxuICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmV0dXJuIGFycmF5IG9mIGNhbGxiYWNrcyBmb3IgYGV2ZW50YC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcbiAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrc1tldmVudF0gfHwgW107XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIHRoaXMgZW1pdHRlciBoYXMgYGV2ZW50YCBoYW5kbGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgcmV0dXJuICEhIHRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfbGVhcm5xJyk7XG52YXIgdGljayA9IHJlcXVpcmUoJ25leHQtdGljaycpO1xudmFyIGFsaWFzID0gcmVxdWlyZSgnYWxpYXMnKTtcblxuLyoqXG4gKiBUcmFpdCBhbGlhc2VzLlxuICovXG5cbnZhciBhbGlhc2VzID0ge1xuICBpZDogJyRpZCcsXG4gIGVtYWlsOiAnJGVtYWlsJyxcbiAgZmlyc3ROYW1lOiAnJGZpcnN0X25hbWUnLFxuICBsYXN0TmFtZTogJyRsYXN0X25hbWUnLFxuICBwaG9uZTogJyRwaG9uZV9udW1iZXInLFxuICB0aXRsZTogJyR0aXRsZSdcbn07XG5cbi8qKlxuICogRXhwb3NlIGBLbGF2aXlvYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgS2xhdml5byA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0tsYXZpeW8nKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2xlYXJucScpXG4gIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vYS5rbGF2aXlvLmNvbS9tZWRpYS9qcy9sZWFybm1hcmtsZXQuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vd3d3LmtsYXZpeW8uY29tL2RvY3MvZ2V0dGluZy1zdGFydGVkXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5LbGF2aXlvLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgcHVzaCgnYWNjb3VudCcsIHRoaXMub3B0aW9ucy5hcGlLZXkpO1xuICB0aGlzLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB0aWNrKHNlbGYucmVhZHkpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuS2xhdml5by5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX2xlYXJucSAmJiB3aW5kb3cuX2xlYXJucS5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuS2xhdml5by5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoYWxpYXNlcyk7XG4gIGlmICghdHJhaXRzLiRpZCAmJiAhdHJhaXRzLiRlbWFpbCkgcmV0dXJuO1xuICBwdXNoKCdpZGVudGlmeScsIHRyYWl0cyk7XG59O1xuXG4vKipcbiAqIEdyb3VwLlxuICpcbiAqIEBwYXJhbSB7R3JvdXB9IGdyb3VwXG4gKi9cblxuS2xhdml5by5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbihncm91cCl7XG4gIHZhciBwcm9wcyA9IGdyb3VwLnByb3BlcnRpZXMoKTtcbiAgaWYgKCFwcm9wcy5uYW1lKSByZXR1cm47XG4gIHB1c2goJ2lkZW50aWZ5JywgeyAkb3JnYW5pemF0aW9uOiBwcm9wcy5uYW1lIH0pO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbktsYXZpeW8ucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICBwdXNoKCd0cmFjaycsIHRyYWNrLmV2ZW50KCksIHRyYWNrLnByb3BlcnRpZXMoe1xuICAgIHJldmVudWU6ICckdmFsdWUnXG4gIH0pKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcblxuLyoqXG4gKiBFeHBvc2UgYExlYWRMYW5kZXJgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBMZWFkTGFuZGVyID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignTGVhZExhbmRlcicpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdsbGFjdGlkJylcbiAgLmdsb2JhbCgndHJhY2thbHl6ZXInKVxuICAub3B0aW9uKCdhY2NvdW50SWQnLCBudWxsKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cImh0dHA6Ly90Ni50cmFja2FseXplci5jb20vdHJhY2thbHl6ZS1ub2RvYy5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5MZWFkTGFuZGVyLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5sbGFjdGlkID0gdGhpcy5vcHRpb25zLmFjY291bnRJZDtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5MZWFkTGFuZGVyLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LnRyYWNrYWx5emVyO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xudmFyIElkZW50aWZ5ID0gcmVxdWlyZSgnZmFjYWRlJykuSWRlbnRpZnk7XG52YXIgd2hlbiA9IHJlcXVpcmUoJ3doZW4nKTtcblxuLyoqXG4gKiBFeHBvc2UgYExpdmVDaGF0YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgTGl2ZUNoYXQgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdMaXZlQ2hhdCcpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfX2xjJylcbiAgLmdsb2JhbCgnX19sY19pbml0ZWQnKVxuICAuZ2xvYmFsKCdMQ19BUEknKVxuICAuZ2xvYmFsKCdMQ19JbnZpdGUnKVxuICAub3B0aW9uKCdncm91cCcsIDApXG4gIC5vcHRpb24oJ2xpY2Vuc2UnLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2Nkbi5saXZlY2hhdGluYy5jb20vdHJhY2tpbmcuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly93d3cubGl2ZWNoYXRpbmMuY29tL2FwaS9qYXZhc2NyaXB0LWFwaVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuTGl2ZUNoYXQucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgdmFyIGlkZW50aWZ5ID0gbmV3IElkZW50aWZ5KHtcbiAgICB1c2VySWQ6IHVzZXIuaWQoKSxcbiAgICB0cmFpdHM6IHVzZXIudHJhaXRzKClcbiAgfSk7XG5cbiAgd2luZG93Ll9fbGMgPSBjbG9uZSh0aGlzLm9wdGlvbnMpO1xuICB3aW5kb3cuX19sYy52aXNpdG9yID0ge1xuICAgIG5hbWU6IGlkZW50aWZ5Lm5hbWUoKSxcbiAgICBlbWFpbDogaWRlbnRpZnkuZW1haWwoKVxuICB9O1xuXG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIHdoZW4oZnVuY3Rpb24oKXsgcmV0dXJuIHNlbGYubG9hZGVkKCk7IH0sIHNlbGYucmVhZHkpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuTGl2ZUNoYXQucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISh3aW5kb3cuTENfQVBJICYmIHdpbmRvdy5MQ19JbnZpdGUpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkxpdmVDaGF0LnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cyh7IHVzZXJJZDogJ1VzZXIgSUQnIH0pO1xuICB3aW5kb3cuTENfQVBJLnNldF9jdXN0b21fdmFyaWFibGVzKGNvbnZlcnQodHJhaXRzKSk7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgYSB0cmFpdHMgb2JqZWN0IGludG8gdGhlIGZvcm1hdCBMaXZlQ2hhdCByZXF1aXJlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdHJhaXRzXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiBjb252ZXJ0KHRyYWl0cyl7XG4gIHZhciBhcnIgPSBbXTtcbiAgZWFjaCh0cmFpdHMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuICAgIGFyci5wdXNoKHsgbmFtZToga2V5LCB2YWx1ZTogdmFsdWUgfSk7XG4gIH0pO1xuICByZXR1cm4gYXJyO1xufVxuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgSWRlbnRpZnkgPSByZXF1aXJlKCdmYWNhZGUnKS5JZGVudGlmeTtcbnZhciB1c2VIdHRwcyA9IHJlcXVpcmUoJ3VzZS1odHRwcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgTHVja3lPcmFuZ2VgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBMdWNreU9yYW5nZSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0x1Y2t5IE9yYW5nZScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfbG9xJylcbiAgLmdsb2JhbCgnX193dHdfd2F0Y2hlcl9hZGRlZCcpXG4gIC5nbG9iYWwoJ19fd3R3X2x1Y2t5X3NpdGVfaWQnKVxuICAuZ2xvYmFsKCdfX3d0d19sdWNreV9pc19zZWdtZW50X2lvJylcbiAgLmdsb2JhbCgnX193dHdfY3VzdG9tX3VzZXJfZGF0YScpXG4gIC5vcHRpb24oJ3NpdGVJZCcsIG51bGwpXG4gIC50YWcoJ2h0dHAnLCAnPHNjcmlwdCBzcmM9XCJodHRwOi8vd3d3Lmx1Y2t5b3JhbmdlLmNvbS93LmpzP3t7IGNhY2hlIH19XCI+JylcbiAgLnRhZygnaHR0cHMnLCAnPHNjcmlwdCBzcmM9XCJodHRwczovL3NzbC5sdWNreW9yYW5nZS5jb20vdy5qcz97eyBjYWNoZSB9fVwiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5MdWNreU9yYW5nZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgd2luZG93Ll9sb3EgfHwgKHdpbmRvdy5fbG9xID0gW10pO1xuICB3aW5kb3cuX193dHdfbHVja3lfc2l0ZV9pZCA9IHRoaXMub3B0aW9ucy5zaXRlSWQ7XG4gIHRoaXMuaWRlbnRpZnkobmV3IElkZW50aWZ5KHtcbiAgICB0cmFpdHM6IHVzZXIudHJhaXRzKCksXG4gICAgdXNlcklkOiB1c2VyLmlkKClcbiAgfSkpO1xuICB2YXIgY2FjaGUgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gNjAwMDApO1xuICB2YXIgbmFtZSA9IHVzZUh0dHBzKCkgPyAnaHR0cHMnIDogJ2h0dHAnO1xuICB0aGlzLmxvYWQobmFtZSwgeyBjYWNoZTogY2FjaGUgfSwgdGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkx1Y2t5T3JhbmdlLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93Ll9fd3R3X3dhdGNoZXJfYWRkZWQ7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuTHVja3lPcmFuZ2UucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKCk7XG4gIHZhciBlbWFpbCA9IGlkZW50aWZ5LmVtYWlsKCk7XG4gIHZhciBuYW1lID0gaWRlbnRpZnkubmFtZSgpO1xuICBpZiAobmFtZSkgdHJhaXRzLm5hbWUgPSBuYW1lO1xuICBpZiAoZW1haWwpIHRyYWl0cy5lbWFpbCA9IGVtYWlsO1xuICB3aW5kb3cuX193dHdfY3VzdG9tX3VzZXJfZGF0YSA9IHRyYWl0cztcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBhbGlhcyA9IHJlcXVpcmUoJ2FsaWFzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBMeXRpY3NgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBMeXRpY3MgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdMeXRpY3MnKVxuICAuZ2xvYmFsKCdqc3RhZycpXG4gIC5vcHRpb24oJ2NpZCcsICcnKVxuICAub3B0aW9uKCdjb29raWUnLCAnc2VlcmlkJylcbiAgLm9wdGlvbignZGVsYXknLCAyMDAwKVxuICAub3B0aW9uKCdzZXNzaW9uVGltZW91dCcsIDE4MDApXG4gIC5vcHRpb24oJ3VybCcsICcvL2MubHl0aWNzLmlvJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2MubHl0aWNzLmlvL3N0YXRpYy9pby5taW4uanNcIj4nKTtcblxuLyoqXG4gKiBPcHRpb25zIGFsaWFzZXMuXG4gKi9cblxudmFyIGFsaWFzZXMgPSB7XG4gIHNlc3Npb25UaW1lb3V0OiAnc2Vzc2Vjcydcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vYWRtaW4ubHl0aWNzLmlvL2RvYyNqc3RhZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuTHl0aWNzLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBvcHRpb25zID0gYWxpYXModGhpcy5vcHRpb25zLCBhbGlhc2VzKTtcbiAgd2luZG93LmpzdGFnID0gKGZ1bmN0aW9uKCl7dmFyIHQgPSB7IF9xOiBbXSwgX2M6IG9wdGlvbnMsIHRzOiAobmV3IERhdGUoKSkuZ2V0VGltZSgpIH07IHQuc2VuZCA9IGZ1bmN0aW9uKCl7dGhpcy5fcS5wdXNoKFsncmVhZHknLCAnc2VuZCcsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyldKTsgcmV0dXJuIHRoaXM7IH07IHJldHVybiB0OyB9KSgpO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkx5dGljcy5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuanN0YWcgJiYgd2luZG93LmpzdGFnLmJpbmQpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbkx5dGljcy5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuanN0YWcuc2VuZChwYWdlLnByb3BlcnRpZXMoKSk7XG59O1xuXG4vKipcbiAqIElkZW5maXR5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuTHl0aWNzLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cyh7IHVzZXJJZDogJ191aWQnIH0pO1xuICB3aW5kb3cuanN0YWcuc2VuZCh0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIChvcHRpb25hbClcbiAqL1xuXG5MeXRpY3MucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHByb3BzLl9lID0gdHJhY2suZXZlbnQoKTtcbiAgd2luZG93LmpzdGFnLnNlbmQocHJvcHMpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBhbGlhcyA9IHJlcXVpcmUoJ2FsaWFzJyk7XG52YXIgY2xvbmUgPSByZXF1aXJlKCdjbG9uZScpO1xudmFyIGRhdGVzID0gcmVxdWlyZSgnY29udmVydC1kYXRlcycpO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xudmFyIGlzbyA9IHJlcXVpcmUoJ3RvLWlzby1zdHJpbmcnKTtcbnZhciBpbmRleG9mID0gcmVxdWlyZSgnaW5kZXhvZicpO1xudmFyIGRlbCA9IHJlcXVpcmUoJ29iai1jYXNlJykuZGVsO1xudmFyIHNvbWUgPSByZXF1aXJlKCdzb21lJyk7XG5cbi8qKlxuICogRXhwb3NlIGBNaXhwYW5lbGAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIE1peHBhbmVsID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignTWl4cGFuZWwnKVxuICAuZ2xvYmFsKCdtaXhwYW5lbCcpXG4gIC5vcHRpb24oJ2luY3JlbWVudHMnLCBbXSlcbiAgLm9wdGlvbignY29va2llTmFtZScsICcnKVxuICAub3B0aW9uKCduYW1lVGFnJywgdHJ1ZSlcbiAgLm9wdGlvbigncGFnZXZpZXcnLCBmYWxzZSlcbiAgLm9wdGlvbigncGVvcGxlJywgZmFsc2UpXG4gIC5vcHRpb24oJ3Rva2VuJywgJycpXG4gIC5vcHRpb24oJ3RyYWNrQWxsUGFnZXMnLCBmYWxzZSlcbiAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSlcbiAgLm9wdGlvbigndHJhY2tDYXRlZ29yaXplZFBhZ2VzJywgdHJ1ZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2Nkbi5teHBubC5jb20vbGlicy9taXhwYW5lbC0yLjIubWluLmpzXCI+Jyk7XG5cbi8qKlxuICogT3B0aW9ucyBhbGlhc2VzLlxuICovXG5cbnZhciBvcHRpb25zQWxpYXNlcyA9IHtcbiAgY29va2llTmFtZTogJ2Nvb2tpZV9uYW1lJ1xufTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vbWl4cGFuZWwuY29tL2hlbHAvcmVmZXJlbmNlL2phdmFzY3JpcHQjaW5zdGFsbGluZ1xuICogaHR0cHM6Ly9taXhwYW5lbC5jb20vaGVscC9yZWZlcmVuY2UvamF2YXNjcmlwdC1mdWxsLWFwaS1yZWZlcmVuY2UjbWl4cGFuZWwuaW5pdFxuICovXG5cbk1peHBhbmVsLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKXtcbiAgKGZ1bmN0aW9uKGMsIGEpe3dpbmRvdy5taXhwYW5lbCA9IGE7IHZhciBiLCBkLCBoLCBlOyBhLl9pID0gW107IGEuaW5pdCA9IGZ1bmN0aW9uKGIsIGMsIGYpe2Z1bmN0aW9uIGQoYSwgYil7dmFyIGMgPSBiLnNwbGl0KCcuJyk7IDIgPT0gYy5sZW5ndGggJiYgKGEgPSBhW2NbMF1dLCBiID0gY1sxXSk7IGFbYl0gPSBmdW5jdGlvbigpe2EucHVzaChbYl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpKTsgfTsgfSB2YXIgZyA9IGE7ICd1bmRlZmluZWQnICE9PSB0eXBlb2YgZiA/IGcgPSBhW2ZdID0gW10gOiBmID0gJ21peHBhbmVsJzsgZy5wZW9wbGUgPSBnLnBlb3BsZSB8fCBbXTsgaCA9IFsnZGlzYWJsZScsICd0cmFjaycsICd0cmFja19wYWdldmlldycsICd0cmFja19saW5rcycsICd0cmFja19mb3JtcycsICdyZWdpc3RlcicsICdyZWdpc3Rlcl9vbmNlJywgJ3VucmVnaXN0ZXInLCAnaWRlbnRpZnknLCAnYWxpYXMnLCAnbmFtZV90YWcnLCAnc2V0X2NvbmZpZycsICdwZW9wbGUuc2V0JywgJ3Blb3BsZS5pbmNyZW1lbnQnLCAncGVvcGxlLnRyYWNrX2NoYXJnZScsICdwZW9wbGUuYXBwZW5kJ107IGZvciAoZSA9IDA7IGUgPCBoLmxlbmd0aDsgZSsrKSBkKGcsIGhbZV0pOyBhLl9pLnB1c2goW2IsIGMsIGZdKTsgfTsgYS5fX1NWID0gMS4yOyB9KShkb2N1bWVudCwgd2luZG93Lm1peHBhbmVsIHx8IFtdKTtcbiAgdGhpcy5vcHRpb25zLmluY3JlbWVudHMgPSBsb3dlcmNhc2UodGhpcy5vcHRpb25zLmluY3JlbWVudHMpO1xuICB2YXIgb3B0aW9ucyA9IGFsaWFzKHRoaXMub3B0aW9ucywgb3B0aW9uc0FsaWFzZXMpO1xuICB3aW5kb3cubWl4cGFuZWwuaW5pdChvcHRpb25zLnRva2VuLCBvcHRpb25zKTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5NaXhwYW5lbC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cubWl4cGFuZWwgJiYgd2luZG93Lm1peHBhbmVsLmNvbmZpZyk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogaHR0cHM6Ly9taXhwYW5lbC5jb20vaGVscC9yZWZlcmVuY2UvamF2YXNjcmlwdC1mdWxsLWFwaS1yZWZlcmVuY2UjbWl4cGFuZWwudHJhY2tfcGFnZXZpZXdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2F0ZWdvcnkgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICovXG5cbk1peHBhbmVsLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBjYXRlZ29yeSA9IHBhZ2UuY2F0ZWdvcnkoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG4gIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuXG4gIC8vIGFsbCBwYWdlc1xuICBpZiAob3B0cy50cmFja0FsbFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKCkpO1xuICB9XG5cbiAgLy8gY2F0ZWdvcml6ZWQgcGFnZXNcbiAgaWYgKGNhdGVnb3J5ICYmIG9wdHMudHJhY2tDYXRlZ29yaXplZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKGNhdGVnb3J5KSk7XG4gIH1cblxuICAvLyBuYW1lZCBwYWdlc1xuICBpZiAobmFtZSAmJiBvcHRzLnRyYWNrTmFtZWRQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjayhuYW1lKSk7XG4gIH1cbn07XG5cbi8qKlxuICogVHJhaXQgYWxpYXNlcy5cbiAqL1xuXG52YXIgdHJhaXRBbGlhc2VzID0ge1xuICBjcmVhdGVkOiAnJGNyZWF0ZWQnLFxuICBlbWFpbDogJyRlbWFpbCcsXG4gIGZpcnN0TmFtZTogJyRmaXJzdF9uYW1lJyxcbiAgbGFzdE5hbWU6ICckbGFzdF9uYW1lJyxcbiAgbGFzdFNlZW46ICckbGFzdF9zZWVuJyxcbiAgbmFtZTogJyRuYW1lJyxcbiAgdXNlcm5hbWU6ICckdXNlcm5hbWUnLFxuICBwaG9uZTogJyRwaG9uZSdcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogaHR0cHM6Ly9taXhwYW5lbC5jb20vaGVscC9yZWZlcmVuY2UvamF2YXNjcmlwdCNzdXBlci1wcm9wZXJ0aWVzXG4gKiBodHRwczovL21peHBhbmVsLmNvbS9oZWxwL3JlZmVyZW5jZS9qYXZhc2NyaXB0I3VzZXItaWRlbnRpdHlcbiAqIGh0dHBzOi8vbWl4cGFuZWwuY29tL2hlbHAvcmVmZXJlbmNlL2phdmFzY3JpcHQjc3RvcmluZy11c2VyLXByb2ZpbGVzXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5NaXhwYW5lbC5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB1c2VybmFtZSA9IGlkZW50aWZ5LnVzZXJuYW1lKCk7XG4gIHZhciBlbWFpbCA9IGlkZW50aWZ5LmVtYWlsKCk7XG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuXG4gIC8vIGlkXG4gIGlmIChpZCkgd2luZG93Lm1peHBhbmVsLmlkZW50aWZ5KGlkKTtcblxuICAvLyBuYW1lIHRhZ1xuICB2YXIgbmFtZXRhZyA9IGVtYWlsIHx8IHVzZXJuYW1lIHx8IGlkO1xuICBpZiAobmFtZXRhZykgd2luZG93Lm1peHBhbmVsLm5hbWVfdGFnKG5hbWV0YWcpO1xuXG4gIC8vIHRyYWl0c1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKHRyYWl0QWxpYXNlcyk7XG4gIGlmICh0cmFpdHMuJGNyZWF0ZWQpIGRlbCh0cmFpdHMsICdjcmVhdGVkQXQnKTtcbiAgd2luZG93Lm1peHBhbmVsLnJlZ2lzdGVyKGRhdGVzKHRyYWl0cywgaXNvKSk7XG4gIGlmICh0aGlzLm9wdGlvbnMucGVvcGxlKSB3aW5kb3cubWl4cGFuZWwucGVvcGxlLnNldCh0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwczovL21peHBhbmVsLmNvbS9oZWxwL3JlZmVyZW5jZS9qYXZhc2NyaXB0I3NlbmRpbmctZXZlbnRzXG4gKiBodHRwczovL21peHBhbmVsLmNvbS9oZWxwL3JlZmVyZW5jZS9qYXZhc2NyaXB0I3RyYWNraW5nLXJldmVudWVcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbk1peHBhbmVsLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIGluY3JlbWVudHMgPSB0aGlzLm9wdGlvbnMuaW5jcmVtZW50cztcbiAgdmFyIGluY3JlbWVudCA9IHRyYWNrLmV2ZW50KCkudG9Mb3dlckNhc2UoKTtcbiAgdmFyIHBlb3BsZSA9IHRoaXMub3B0aW9ucy5wZW9wbGU7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgdmFyIHJldmVudWUgPSB0cmFjay5yZXZlbnVlKCk7XG5cbiAgLy8gZGVsZXRlIG1peHBhbmVsJ3MgcmVzZXJ2ZWQgcHJvcGVydGllcywgc28gdGhleSBkb24ndCBjb25mbGljdFxuICBkZWxldGUgcHJvcHMuZGlzdGluY3RfaWQ7XG4gIGRlbGV0ZSBwcm9wcy5pcDtcbiAgZGVsZXRlIHByb3BzLm1wX25hbWVfdGFnO1xuICBkZWxldGUgcHJvcHMubXBfbm90ZTtcbiAgZGVsZXRlIHByb3BzLnRva2VuO1xuXG4gIC8vIGNvbnZlcnQgYXJyYXlzIG9mIG9iamVjdHMgdG8gbGVuZ3RoLCBzaW5jZSBtaXhwYW5lbCBkb2Vzbid0IHN1cHBvcnQgb2JqZWN0IGFycmF5c1xuICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcbiAgICB2YXIgdmFsID0gcHJvcHNba2V5XTtcbiAgICBpZiAoaXMuYXJyYXkodmFsKSAmJiBzb21lKHZhbCwgaXMub2JqZWN0KSkgcHJvcHNba2V5XSA9IHZhbC5sZW5ndGg7XG4gIH1cblxuICAvLyBpbmNyZW1lbnQgcHJvcGVydGllcyBpbiBtaXhwYW5lbCBwZW9wbGVcbiAgaWYgKHBlb3BsZSAmJiB+aW5kZXhvZihpbmNyZW1lbnRzLCBpbmNyZW1lbnQpKSB7XG4gICAgd2luZG93Lm1peHBhbmVsLnBlb3BsZS5pbmNyZW1lbnQodHJhY2suZXZlbnQoKSk7XG4gICAgd2luZG93Lm1peHBhbmVsLnBlb3BsZS5zZXQoJ0xhc3QgJyArIHRyYWNrLmV2ZW50KCksIG5ldyBEYXRlKTtcbiAgfVxuXG4gIC8vIHRyYWNrIHRoZSBldmVudFxuICBwcm9wcyA9IGRhdGVzKHByb3BzLCBpc28pO1xuICB3aW5kb3cubWl4cGFuZWwudHJhY2sodHJhY2suZXZlbnQoKSwgcHJvcHMpO1xuXG4gIC8vIHRyYWNrIHJldmVudWUgc3BlY2lmaWNhbGx5XG4gIGlmIChyZXZlbnVlICYmIHBlb3BsZSkge1xuICAgIHdpbmRvdy5taXhwYW5lbC5wZW9wbGUudHJhY2tfY2hhcmdlKHJldmVudWUpO1xuICB9XG59O1xuXG4vKipcbiAqIEFsaWFzLlxuICpcbiAqIGh0dHBzOi8vbWl4cGFuZWwuY29tL2hlbHAvcmVmZXJlbmNlL2phdmFzY3JpcHQjdXNlci1pZGVudGl0eVxuICogaHR0cHM6Ly9taXhwYW5lbC5jb20vaGVscC9yZWZlcmVuY2UvamF2YXNjcmlwdC1mdWxsLWFwaS1yZWZlcmVuY2UjbWl4cGFuZWwuYWxpYXNcbiAqXG4gKiBAcGFyYW0ge0FsaWFzfSBhbGlhc1xuICovXG5cbk1peHBhbmVsLnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uKGFsaWFzKXtcbiAgdmFyIG1wID0gd2luZG93Lm1peHBhbmVsO1xuICB2YXIgdG8gPSBhbGlhcy50bygpO1xuICBpZiAobXAuZ2V0X2Rpc3RpbmN0X2lkICYmIG1wLmdldF9kaXN0aW5jdF9pZCgpID09PSB0bykgcmV0dXJuO1xuICAvLyBIQUNLOiBpbnRlcm5hbCBtaXhwYW5lbCBBUEkgdG8gZW5zdXJlIHdlIGRvbid0IG92ZXJ3cml0ZVxuICBpZiAobXAuZ2V0X3Byb3BlcnR5ICYmIG1wLmdldF9wcm9wZXJ0eSgnJHBlb3BsZV9kaXN0aW5jdF9pZCcpID09PSB0bykgcmV0dXJuO1xuICAvLyBhbHRob3VnaCB1bmRvY3VtZW50ZWQsIG1peHBhbmVsIHRha2VzIGFuIG9wdGlvbmFsIG9yaWdpbmFsIGlkXG4gIG1wLmFsaWFzKHRvLCBhbGlhcy5mcm9tKCkpO1xufTtcblxuLyoqXG4gKiBMb3dlcmNhc2UgdGhlIGdpdmVuIGBhcnJgLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb3dlcmNhc2UoYXJyKXtcbiAgdmFyIHJldCA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgIHJldFtpXSA9IFN0cmluZyhhcnJbaV0pLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuIiwiXG4vKipcbiAqIHNvbWVcbiAqL1xuXG52YXIgc29tZSA9IFtdLnNvbWU7XG5cbi8qKlxuICogdGVzdCB3aGV0aGVyIHNvbWUgZWxlbWVudHMgaW5cbiAqIHRoZSBhcnJheSBwYXNzIHRoZSB0ZXN0IGltcGxlbWVudGVkXG4gKiBieSBgZm5gLlxuICpcbiAqIGV4YW1wbGU6XG4gKlxuICogICAgICAgICAgc29tZShbMSwgJ2ZvbycsICdiYXInXSwgZnVuY3Rpb24gKGVsLCBpKSB7XG4gKiAgICAgICAgICAgIHJldHVybiAnc3RyaW5nJyA9PSB0eXBlb2YgZWw7XG4gKiAgICAgICAgICB9KTtcbiAqICAgICAgICAgIC8vID4gdHJ1ZVxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge2Jvb2x9XG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJyLCBmbikge1xuICBpZiAoc29tZSkgcmV0dXJuIHNvbWUuY2FsbChhcnIsIGZuKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgaWYgKGZuKGFycltpXSwgaSkpIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnYmluZCcpO1xudmFyIHdoZW4gPSByZXF1aXJlKCd3aGVuJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgTW9qbmBcbiAqL1xuXG52YXIgTW9qbiA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ01vam4nKVxuICAub3B0aW9uKCdjdXN0b21lckNvZGUnLCAnJylcbiAgLmdsb2JhbCgnX21vam5UcmFjaycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly90cmFjay5pZHRhcmdldGluZy5jb20ve3sgY3VzdG9tZXJDb2RlIH19L3RyYWNrLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbk1vam4ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICB3aW5kb3cuX21vam5UcmFjayA9IHdpbmRvdy5fbW9qblRyYWNrIHx8IFtdO1xuICB3aW5kb3cuX21vam5UcmFjay5wdXNoKHsgY2lkOiB0aGlzLm9wdGlvbnMuY3VzdG9tZXJDb2RlIH0pO1xuICB2YXIgbG9hZGVkID0gYmluZCh0aGlzLCB0aGlzLmxvYWRlZCk7XG4gIHZhciByZWFkeSA9IHRoaXMucmVhZHk7XG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIHdoZW4obG9hZGVkLCByZWFkeSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Nb2puLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMub2JqZWN0KHdpbmRvdy5fbW9qblRyYWNrKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5Nb2puLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIGVtYWlsID0gaWRlbnRpZnkuZW1haWwoKTtcbiAgaWYgKCFlbWFpbCkgcmV0dXJuO1xuICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gIGltZy5zcmMgPSAnLy9tYXRjaGVyLmlkdGFyZ2V0aW5nLmNvbS9hbmFseXRpY3MuZ2lmP2NpZD0nICsgdGhpcy5vcHRpb25zLmN1c3RvbWVyQ29kZSArICcmX21qbmN0aWQ9JytlbWFpbDtcbiAgaW1nLndpZHRoID0gMTtcbiAgaW1nLmhlaWdodCA9IDE7XG4gIHJldHVybiBpbWc7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IGV2ZW50XG4gKi9cblxuTW9qbi5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9wZXJ0aWVzID0gdHJhY2sucHJvcGVydGllcygpO1xuICB2YXIgcmV2ZW51ZSA9IHByb3BlcnRpZXMucmV2ZW51ZTtcbiAgdmFyIGN1cnJlbmN5ID0gcHJvcGVydGllcy5jdXJyZW5jeSB8fCAnJztcbiAgdmFyIGNvbnYgPSBjdXJyZW5jeSArIHJldmVudWU7XG4gIGlmICghcmV2ZW51ZSkgcmV0dXJuO1xuICB3aW5kb3cuX21vam5UcmFjay5wdXNoKHsgY29udjogY29udiB9KTtcbiAgcmV0dXJuIGNvbnY7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX21mcScpO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcblxuLyoqXG4gKiBFeHBvc2UgYE1vdXNlZmxvd2AuXG4gKi9cblxudmFyIE1vdXNlZmxvdyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ01vdXNlZmxvdycpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdtb3VzZWZsb3cnKVxuICAuZ2xvYmFsKCdfbWZxJylcbiAgLm9wdGlvbignYXBpS2V5JywgJycpXG4gIC5vcHRpb24oJ21vdXNlZmxvd0h0bWxEZWxheScsIDApXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9jZG4ubW91c2VmbG93LmNvbS9wcm9qZWN0cy97eyBhcGlLZXkgfX0uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0YWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Nb3VzZWZsb3cucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Lm1vdXNlZmxvd0h0bWxEZWxheSA9IHRoaXMub3B0aW9ucy5tb3VzZWZsb3dIdG1sRGVsYXk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuTW91c2VmbG93LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93Lm1vdXNlZmxvdztcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBodHRwOi8vbW91c2VmbG93LnplbmRlc2suY29tL2VudHJpZXMvMjI1Mjg4MTctU2luZ2xlLXBhZ2Utd2Vic2l0ZXNcbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5Nb3VzZWZsb3cucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgaWYgKCF3aW5kb3cubW91c2VmbG93KSByZXR1cm47XG4gIGlmICgnZnVuY3Rpb24nICE9IHR5cGVvZiBtb3VzZWZsb3cubmV3UGFnZVZpZXcpIHJldHVybjtcbiAgbW91c2VmbG93Lm5ld1BhZ2VWaWV3KCk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIGh0dHA6Ly9tb3VzZWZsb3cuemVuZGVzay5jb20vZW50cmllcy8yNDY0MzYwMy1DdXN0b20tVmFyaWFibGVzLVRhZ2dpbmdcbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbk1vdXNlZmxvdy5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHNldChpZGVudGlmeS50cmFpdHMoKSk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIGh0dHA6Ly9tb3VzZWZsb3cuemVuZGVzay5jb20vZW50cmllcy8yNDY0MzYwMy1DdXN0b20tVmFyaWFibGVzLVRhZ2dpbmdcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbk1vdXNlZmxvdy5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgcHJvcHMuZXZlbnQgPSB0cmFjay5ldmVudCgpO1xuICBzZXQocHJvcHMpO1xufTtcblxuLyoqXG4gKiBQdXNoIGVhY2gga2V5IGFuZCB2YWx1ZSBpbiB0aGUgZ2l2ZW4gYG9iamAgb250byB0aGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbmZ1bmN0aW9uIHNldChvYmope1xuICBlYWNoKG9iaiwgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgcHVzaCgnc2V0VmFyaWFibGUnLCBrZXksIHZhbHVlKTtcbiAgfSk7XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB1c2VIdHRwcyA9IHJlcXVpcmUoJ3VzZS1odHRwcycpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgTW91c2VTdGF0c2AgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIE1vdXNlU3RhdHMgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdNb3VzZVN0YXRzJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ21zYWEnKVxuICAuZ2xvYmFsKCdNb3VzZVN0YXRzVmlzaXRvclBsYXliYWNrcycpXG4gIC5vcHRpb24oJ2FjY291bnROdW1iZXInLCAnJylcbiAgLnRhZygnaHR0cCcsICc8c2NyaXB0IHNyYz1cImh0dHA6Ly93d3cyLm1vdXNlc3RhdHMuY29tL2pzL3t7IHBhdGggfX0uanM/e3sgY2FjaGUgfX1cIj4nKVxuICAudGFnKCdodHRwcycsICc8c2NyaXB0IHNyYz1cImh0dHBzOi8vc3NsLm1vdXNlc3RhdHMuY29tL2pzL3t7IHBhdGggfX0uanM/e3sgY2FjaGUgfX1cIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly93d3cubW91c2VzdGF0cy5jb20vZG9jcy9wYWdlcy9hbGxwYWdlc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuTW91c2VTdGF0cy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgbnVtYmVyID0gdGhpcy5vcHRpb25zLmFjY291bnROdW1iZXI7XG4gIHZhciBwYXRoID0gbnVtYmVyLnNsaWNlKDAsMSkgKyAnLycgKyBudW1iZXIuc2xpY2UoMSwyKSArICcvJyArIG51bWJlcjtcbiAgdmFyIGNhY2hlID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDYwMDAwKTtcbiAgdmFyIG5hbWUgPSB1c2VIdHRwcygpID8gJ2h0dHBzJyA6ICdodHRwJztcbiAgdGhpcy5sb2FkKG5hbWUsIHsgcGF0aDogcGF0aCwgY2FjaGU6IGNhY2hlIH0sIHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Nb3VzZVN0YXRzLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMuYXJyYXkod2luZG93Lk1vdXNlU3RhdHNWaXNpdG9yUGxheWJhY2tzKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogaHR0cDovL3d3dy5tb3VzZXN0YXRzLmNvbS9kb2NzL3dpa2kvNy9ob3ctdG8tYWRkLWN1c3RvbS1kYXRhLXRvLXZpc2l0b3ItcGxheWJhY2tzXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5Nb3VzZVN0YXRzLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgZWFjaChpZGVudGlmeS50cmFpdHMoKSwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICB3aW5kb3cuTW91c2VTdGF0c1Zpc2l0b3JQbGF5YmFja3MuY3VzdG9tVmFyaWFibGUoa2V5LCB2YWx1ZSk7XG4gIH0pO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX19ubHMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYE5hdmlseXRpY3NgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBOYXZpbHl0aWNzID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignTmF2aWx5dGljcycpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfX25scycpXG4gIC5vcHRpb24oJ21lbWJlcklkJywgJycpXG4gIC5vcHRpb24oJ3Byb2plY3RJZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vd3d3Lm5hdmlseXRpY3MuY29tL25scy5qcz9taWQ9e3sgbWVtYmVySWQgfX0mcGlkPXt7IHByb2plY3RJZCB9fVwiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cHM6Ly93d3cubmF2aWx5dGljcy5jb20vbWVtYmVyL2NvZGVfc2V0dGluZ3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbk5hdmlseXRpY3MucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9fbmxzID0gd2luZG93Ll9fbmxzIHx8IFtdO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbk5hdmlseXRpY3MucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9fbmxzICYmIFtdLnB1c2ggIT0gd2luZG93Ll9fbmxzLnB1c2gpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwczovL3d3dy5uYXZpbHl0aWNzLmNvbS9kb2NzI3RhZ3NcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbk5hdmlseXRpY3MucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICBwdXNoKCd0YWdSZWNvcmRpbmcnLCB0cmFjay5ldmVudCgpKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBodHRwcyA9IHJlcXVpcmUoJ3VzZS1odHRwcycpO1xudmFyIHRpY2sgPSByZXF1aXJlKCduZXh0LXRpY2snKTtcblxuLyoqXG4gKiBFeHBvc2UgYE9sYXJrYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgT2xhcmsgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdPbGFyaycpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdvbGFyaycpXG4gIC5vcHRpb24oJ2lkZW50aWZ5JywgdHJ1ZSlcbiAgLm9wdGlvbigncGFnZScsIHRydWUpXG4gIC5vcHRpb24oJ3NpdGVJZCcsICcnKVxuICAub3B0aW9uKCdncm91cElkJywgJycpXG4gIC5vcHRpb24oJ3RyYWNrJywgZmFsc2UpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL3d3dy5vbGFyay5jb20vZG9jdW1lbnRhdGlvblxuICogaHR0cHM6Ly93d3cub2xhcmsuY29tL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC9hcGkuY2hhdC5zZXRPcGVyYXRvckdyb3VwXG4gKlxuICogQHBhcmFtIHtGYWNhZGV9IHBhZ2VcbiAqL1xuXG5PbGFyay5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIHRpY2soc2VsZi5yZWFkeSk7XG4gIH0pO1xuXG4gIC8vIGFzc2lnbiBjaGF0IHRvIGEgc3BlY2lmaWMgc2l0ZVxuICB2YXIgZ3JvdXBJZCA9IHRoaXMub3B0aW9ucy5ncm91cElkO1xuICBpZiAoZ3JvdXBJZCkgYXBpKCdjaGF0LnNldE9wZXJhdG9yR3JvdXAnLCB7IGdyb3VwOiBncm91cElkIH0pO1xuXG4gIC8vIGtlZXAgdHJhY2sgb2YgdGhlIHdpZGdldCdzIG9wZW4gc3RhdGVcbiAgYXBpKCdib3gub25FeHBhbmQnLCBmdW5jdGlvbigpeyBzZWxmLl9vcGVuID0gdHJ1ZTsgfSk7XG4gIGFwaSgnYm94Lm9uU2hyaW5rJywgZnVuY3Rpb24oKXsgc2VsZi5fb3BlbiA9IGZhbHNlOyB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuT2xhcmsucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISB3aW5kb3cub2xhcms7XG59O1xuXG4vKipcbiAqIExvYWQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqL1xuXG5PbGFyay5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKGNhbGxiYWNrKXtcbiAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29sYXJrJyk7XG4gIHdpbmRvdy5vbGFya3x8KGZ1bmN0aW9uKGMpe3ZhciBmPXdpbmRvdyxkPWRvY3VtZW50LGw9aHR0cHMoKT9cImh0dHBzOlwiOlwiaHR0cDpcIix6PWMubmFtZSxyPVwibG9hZFwiO3ZhciBudD1mdW5jdGlvbigpe2Zbel09ZnVuY3Rpb24oKXsoYS5zPWEuc3x8W10pLnB1c2goYXJndW1lbnRzKX07dmFyIGE9Zlt6XS5fPXt9LHE9Yy5tZXRob2RzLmxlbmd0aDt3aGlsZSAocS0tKSB7KGZ1bmN0aW9uKG4pe2Zbel1bbl09ZnVuY3Rpb24oKXtmW3pdKFwiY2FsbFwiLG4sYXJndW1lbnRzKX19KShjLm1ldGhvZHNbcV0pfWEubD1jLmxvYWRlcjthLmk9bnQ7YS5wPXsgMDorbmV3IERhdGUoKSB9O2EuUD1mdW5jdGlvbih1KXthLnBbdV09bmV3IERhdGUoKS1hLnBbMF19O2Z1bmN0aW9uIHMoKXthLlAocik7Zlt6XShyKX1mLmFkZEV2ZW50TGlzdGVuZXI/Zi5hZGRFdmVudExpc3RlbmVyKHIscyxmYWxzZSk6Zi5hdHRhY2hFdmVudChcIm9uXCIrcixzKTt2YXIgbGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBwKGhkKXtoZD1cImhlYWRcIjtyZXR1cm4gW1wiPFwiLGhkLFwiPjwvXCIsaGQsXCI+PFwiLGksJyBvbmwnICsgJ29hZD1cInZhciBkPScsZyxcIjtkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uXCIsaixcIihkLlwiLGgsXCIoJ3NjcmlwdCcpKS5cIixrLFwiPSdcIixsLFwiLy9cIixhLmwsXCInXCIsJ1wiJyxcIj48L1wiLGksXCI+XCJdLmpvaW4oXCJcIil9dmFyIGk9XCJib2R5XCIsbT1kW2ldO2lmICghbSkge3JldHVybiBzZXRUaW1lb3V0KGxkLDEwMCl9YS5QKDEpO3ZhciBqPVwiYXBwZW5kQ2hpbGRcIixoPVwiY3JlYXRlRWxlbWVudFwiLGs9XCJzcmNcIixuPWRbaF0oXCJkaXZcIiksdj1uW2pdKGRbaF0oeikpLGI9ZFtoXShcImlmcmFtZVwiKSxnPVwiZG9jdW1lbnRcIixlPVwiZG9tYWluXCIsbztuLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7bS5pbnNlcnRCZWZvcmUobixtLmZpcnN0Q2hpbGQpLmlkPXo7Yi5mcmFtZUJvcmRlcj1cIjBcIjtiLmlkPXorXCItbG9hZGVyXCI7aWYgKC9NU0lFWyBdKzYvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtiLnNyYz1cImphdmFzY3JpcHQ6ZmFsc2VcIn1iLmFsbG93VHJhbnNwYXJlbmN5PVwidHJ1ZVwiO3Zbal0oYik7dHJ5IHtiLmNvbnRlbnRXaW5kb3dbZ10ub3BlbigpfWNhdGNoICh3KSB7Y1tlXT1kW2VdO289XCJqYXZhc2NyaXB0OnZhciBkPVwiK2crXCIub3BlbigpO2QuZG9tYWluPSdcIitkLmRvbWFpbitcIic7XCI7YltrXT1vK1widm9pZCgwKTtcIn10cnkge3ZhciB0PWIuY29udGVudFdpbmRvd1tnXTt0LndyaXRlKHAoKSk7dC5jbG9zZSgpfWNhdGNoICh4KSB7YltrXT1vKydkLndyaXRlKFwiJytwKCkucmVwbGFjZSgvXCIvZyxTdHJpbmcuZnJvbUNoYXJDb2RlKDkyKSsnXCInKSsnXCIpO2QuY2xvc2UoKTsnfWEuUCgyKX07bGQoKX07bnQoKX0pKHsgbG9hZGVyOiBcInN0YXRpYy5vbGFyay5jb20vanNjbGllbnQvbG9hZGVyMC5qc1wiLCBuYW1lOlwib2xhcmtcIiwgbWV0aG9kczpbXCJjb25maWd1cmVcIixcImV4dGVuZFwiLFwiZGVjbGFyZVwiLFwiaWRlbnRpZnlcIl0gfSk7XG4gIHdpbmRvdy5vbGFyay5pZGVudGlmeSh0aGlzLm9wdGlvbnMuc2l0ZUlkKTtcbiAgY2FsbGJhY2soKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge0ZhY2FkZX0gcGFnZVxuICovXG5cbk9sYXJrLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIGlmICghdGhpcy5vcHRpb25zLnBhZ2UpIHJldHVybjtcbiAgdmFyIHByb3BzID0gcGFnZS5wcm9wZXJ0aWVzKCk7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuICBpZiAoIW5hbWUgJiYgIXByb3BzLnVybCkgcmV0dXJuO1xuXG4gIG5hbWUgPSBuYW1lID8gbmFtZSArICcgcGFnZScgOiBwcm9wcy51cmw7XG4gIHRoaXMubm90aWZ5KCdsb29raW5nIGF0ICcgKyBuYW1lKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtGYWNhZGV9IGlkZW50aWZ5XG4gKi9cblxuT2xhcmsucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICBpZiAoIXRoaXMub3B0aW9ucy5pZGVudGlmeSkgcmV0dXJuO1xuXG4gIHZhciB1c2VybmFtZSA9IGlkZW50aWZ5LnVzZXJuYW1lKCk7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoKTtcbiAgdmFyIGlkID0gaWRlbnRpZnkudXNlcklkKCk7XG4gIHZhciBlbWFpbCA9IGlkZW50aWZ5LmVtYWlsKCk7XG4gIHZhciBwaG9uZSA9IGlkZW50aWZ5LnBob25lKCk7XG4gIHZhciBuYW1lID0gaWRlbnRpZnkubmFtZSgpIHx8IGlkZW50aWZ5LmZpcnN0TmFtZSgpO1xuXG4gIGlmICh0cmFpdHMpIGFwaSgndmlzaXRvci51cGRhdGVDdXN0b21GaWVsZHMnLCB0cmFpdHMpO1xuICBpZiAoZW1haWwpIGFwaSgndmlzaXRvci51cGRhdGVFbWFpbEFkZHJlc3MnLCB7IGVtYWlsQWRkcmVzczogZW1haWwgfSk7XG4gIGlmIChwaG9uZSkgYXBpKCd2aXNpdG9yLnVwZGF0ZVBob25lTnVtYmVyJywgeyBwaG9uZU51bWJlcjogcGhvbmUgfSk7XG4gIGlmIChuYW1lKSBhcGkoJ3Zpc2l0b3IudXBkYXRlRnVsbE5hbWUnLCB7IGZ1bGxOYW1lOiBuYW1lIH0pO1xuXG4gIC8vIGZpZ3VyZSBvdXQgYmVzdCBuaWNrbmFtZVxuICB2YXIgbmlja25hbWUgPSBuYW1lIHx8IGVtYWlsIHx8IHVzZXJuYW1lIHx8IGlkO1xuICBpZiAobmFtZSAmJiBlbWFpbCkgbmlja25hbWUgKz0gJyAoJyArIGVtYWlsICsgJyknO1xuICBpZiAobmlja25hbWUpIGFwaSgnY2hhdC51cGRhdGVWaXNpdG9yTmlja25hbWUnLCB7IHNuaXBwZXQ6IG5pY2tuYW1lIH0pO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge0ZhY2FkZX0gdHJhY2tcbiAqL1xuXG5PbGFyay5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIGlmICghdGhpcy5vcHRpb25zLnRyYWNrKSByZXR1cm47XG4gIHRoaXMubm90aWZ5KCd2aXNpdG9yIHRyaWdnZXJlZCBcIicgKyB0cmFjay5ldmVudCgpICsgJ1wiJyk7XG59O1xuXG4vKipcbiAqIFNlbmQgYSBub3RpZmljYXRpb24gYG1lc3NhZ2VgIHRvIHRoZSBvcGVyYXRvciwgb25seSB3aGVuIGEgY2hhdCBpcyBhY3RpdmUgYW5kXG4gKiB3aGVuIHRoZSBjaGF0IGlzIG9wZW4uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAqL1xuXG5PbGFyay5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24obWVzc2FnZSl7XG4gIGlmICghdGhpcy5fb3BlbikgcmV0dXJuO1xuXG4gIC8vIGxvd2VyY2FzZSBzaW5jZSBvbGFyayBkb2VzXG4gIG1lc3NhZ2UgPSBtZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG5cbiAgYXBpKCd2aXNpdG9yLmdldERldGFpbHMnLCBmdW5jdGlvbihkYXRhKXtcbiAgICBpZiAoIWRhdGEgfHwgIWRhdGEuaXNDb252ZXJzaW5nKSByZXR1cm47XG4gICAgYXBpKCdjaGF0LnNlbmROb3RpZmljYXRpb25Ub09wZXJhdG9yJywgeyBib2R5OiBtZXNzYWdlIH0pO1xuICB9KTtcbn07XG5cbi8qKlxuICogSGVscGVyIGZvciBPbGFyayBBUEkgY2FsbHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKi9cblxuZnVuY3Rpb24gYXBpKGFjdGlvbiwgdmFsdWUpIHtcbiAgd2luZG93Lm9sYXJrKCdhcGkuJyArIGFjdGlvbiwgdmFsdWUpO1xufVxuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdvcHRpbWl6ZWx5Jyk7XG52YXIgY2FsbGJhY2sgPSByZXF1aXJlKCdjYWxsYmFjaycpO1xudmFyIHRpY2sgPSByZXF1aXJlKCduZXh0LXRpY2snKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnYmluZCcpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbi8qKlxuICogRXhwb3NlIGBPcHRpbWl6ZWx5YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgT3B0aW1pemVseSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ09wdGltaXplbHknKVxuICAub3B0aW9uKCd2YXJpYXRpb25zJywgdHJ1ZSlcbiAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSlcbiAgLm9wdGlvbigndHJhY2tDYXRlZ29yaXplZFBhZ2VzJywgdHJ1ZSk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL3d3dy5vcHRpbWl6ZWx5LmNvbS9kb2NzL2FwaSNmdW5jdGlvbi1jYWxsc1xuICovXG5cbk9wdGltaXplbHkucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5vcHRpb25zLnZhcmlhdGlvbnMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGljayhmdW5jdGlvbigpe1xuICAgICAgc2VsZi5yZXBsYXkoKTtcbiAgICB9KTtcbiAgfVxuICB0aGlzLnJlYWR5KCk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIGh0dHBzOi8vd3d3Lm9wdGltaXplbHkuY29tL2RvY3MvYXBpI3RyYWNrLWV2ZW50XG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5PcHRpbWl6ZWx5LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICBpZiAocHJvcHMucmV2ZW51ZSkgcHJvcHMucmV2ZW51ZSAqPSAxMDA7XG4gIHB1c2goJ3RyYWNrRXZlbnQnLCB0cmFjay5ldmVudCgpLCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogaHR0cHM6Ly93d3cub3B0aW1pemVseS5jb20vZG9jcy9hcGkjdHJhY2stZXZlbnRcbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5PcHRpbWl6ZWx5LnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBjYXRlZ29yeSA9IHBhZ2UuY2F0ZWdvcnkoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG4gIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuXG4gIC8vIGNhdGVnb3JpemVkIHBhZ2VzXG4gIGlmIChjYXRlZ29yeSAmJiBvcHRzLnRyYWNrQ2F0ZWdvcml6ZWRQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjayhjYXRlZ29yeSkpO1xuICB9XG5cbiAgLy8gbmFtZWQgcGFnZXNcbiAgaWYgKG5hbWUgJiYgb3B0cy50cmFja05hbWVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2sobmFtZSkpO1xuICB9XG59O1xuXG4vKipcbiAqIFJlcGxheSBleHBlcmltZW50IGRhdGEgYXMgdHJhaXRzIHRvIG90aGVyIGVuYWJsZWQgcHJvdmlkZXJzLlxuICpcbiAqIGh0dHBzOi8vd3d3Lm9wdGltaXplbHkuY29tL2RvY3MvYXBpI2RhdGEtb2JqZWN0XG4gKi9cblxuT3B0aW1pemVseS5wcm90b3R5cGUucmVwbGF5ID0gZnVuY3Rpb24oKXtcbiAgaWYgKCF3aW5kb3cub3B0aW1pemVseSkgcmV0dXJuOyAvLyBpbiBjYXNlIHRoZSBzbmlwcGV0IGlzbnQgb24gdGhlIHBhZ2VcblxuICB2YXIgZGF0YSA9IHdpbmRvdy5vcHRpbWl6ZWx5LmRhdGE7XG4gIGlmICghZGF0YSkgcmV0dXJuO1xuXG4gIHZhciBleHBlcmltZW50cyA9IGRhdGEuZXhwZXJpbWVudHM7XG4gIHZhciBtYXAgPSBkYXRhLnN0YXRlLnZhcmlhdGlvbk5hbWVzTWFwO1xuICB2YXIgdHJhaXRzID0ge307XG5cbiAgZWFjaChtYXAsIGZ1bmN0aW9uKGV4cGVyaW1lbnRJZCwgdmFyaWF0aW9uKXtcbiAgICB2YXIgZXhwZXJpbWVudCA9IGV4cGVyaW1lbnRzW2V4cGVyaW1lbnRJZF0ubmFtZTtcbiAgICB0cmFpdHNbJ0V4cGVyaW1lbnQ6ICcgKyBleHBlcmltZW50XSA9IHZhcmlhdGlvbjtcbiAgfSk7XG5cbiAgdGhpcy5hbmFseXRpY3MuaWRlbnRpZnkodHJhaXRzKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19wcScpO1xuXG4vKipcbiAqIEV4cG9zZSBgUGVyZmVjdEF1ZGllbmNlYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgUGVyZmVjdEF1ZGllbmNlID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignUGVyZmVjdCBBdWRpZW5jZScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfcHEnKVxuICAub3B0aW9uKCdzaXRlSWQnLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL3RhZy5wZXJmZWN0YXVkaWVuY2UuY29tL3NlcnZlL3t7IHNpdGVJZCB9fS5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL3N1cHBvcnQucGVyZmVjdGF1ZGllbmNlLmNvbS9rbm93bGVkZ2ViYXNlL2FydGljbGVzLzIxMjQ5MC12aXNpdG9yLXRyYWNraW5nLWFwaVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuUGVyZmVjdEF1ZGllbmNlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fcHEgPSB3aW5kb3cuX3BxIHx8IFtdO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cblBlcmZlY3RBdWRpZW5jZS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX3BxICYmIHdpbmRvdy5fcHEucHVzaCk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIGh0dHA6Ly9zdXBwb3J0LnBlcmZlY3RhdWRpZW5jZS5jb20va25vd2xlZGdlYmFzZS9hcnRpY2xlcy8yMTI0OTAtdmlzaXRvci10cmFja2luZy1hcGlcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSBldmVudFxuICovXG5cblBlcmZlY3RBdWRpZW5jZS5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHB1c2goJ3RyYWNrJywgdHJhY2suZXZlbnQoKSk7XG59O1xuXG5cbi8qKlxuICogVmlld2VkIFByb2R1Y3QuXG4gKlxuICogaHR0cDovL3N1cHBvcnQucGVyZmVjdGF1ZGllbmNlLmNvbS9rbm93bGVkZ2ViYXNlL2FydGljbGVzLzIxMjQ5MC12aXNpdG9yLXRyYWNraW5nLWFwaVxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IGV2ZW50XG4gKi9cblxuUGVyZmVjdEF1ZGllbmNlLnByb3RvdHlwZS52aWV3ZWRQcm9kdWN0ID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcHJvZHVjdCA9IHRyYWNrLnNrdSgpO1xuICBwdXNoKCd0cmFjaycsIHRyYWNrLmV2ZW50KCkpO1xuICBwdXNoKCd0cmFja1Byb2R1Y3QnLCBwcm9kdWN0KTtcbn07XG5cbi8qKlxuICogQ29tcGxldGVkIFB1cmNoYXNlLlxuICpcbiAqIGh0dHA6Ly9zdXBwb3J0LnBlcmZlY3RhdWRpZW5jZS5jb20va25vd2xlZGdlYmFzZS9hcnRpY2xlcy8yMTI0OTAtdmlzaXRvci10cmFja2luZy1hcGlcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSBldmVudFxuICovXG5cblBlcmZlY3RBdWRpZW5jZS5wcm90b3R5cGUuY29tcGxldGVkT3JkZXIgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciB0b3RhbCA9IHRyYWNrLnRvdGFsKCkgfHwgdHJhY2sucmV2ZW51ZSgpO1xuICB2YXIgb3JkZXJJZCA9IHRyYWNrLm9yZGVySWQoKTtcbiAgdmFyIHByb3BzID0ge307XG4gIGlmICh0b3RhbCkgcHJvcHMucmV2ZW51ZSA9IHRvdGFsO1xuICBpZiAob3JkZXJJZCkgcHJvcHMub3JkZXJJZCA9IG9yZGVySWQ7XG4gIHB1c2goJ3RyYWNrJywgdHJhY2suZXZlbnQoKSwgcHJvcHMpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX3BydW0nKTtcbnZhciBkYXRlID0gcmVxdWlyZSgnbG9hZC1kYXRlJyk7XG5cbi8qKlxuICogRXhwb3NlIGBQaW5nZG9tYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgUGluZ2RvbSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ1Bpbmdkb20nKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX3BydW0nKVxuICAuZ2xvYmFsKCdQUlVNX0VQSVNPREVTJylcbiAgLm9wdGlvbignaWQnLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL3J1bS1zdGF0aWMucGluZ2RvbS5uZXQvcHJ1bS5taW4uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuUGluZ2RvbS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuX3BydW0gPSB3aW5kb3cuX3BydW0gfHwgW107XG4gIHB1c2goJ2lkJywgdGhpcy5vcHRpb25zLmlkKTtcbiAgcHVzaCgnbWFyaycsICdmaXJzdGJ5dGUnLCBkYXRlLmdldFRpbWUoKSk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5QaW5nZG9tLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5fcHJ1bSAmJiB3aW5kb3cuX3BydW0ucHVzaCAhPT0gQXJyYXkucHJvdG90eXBlLnB1c2gpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX3BhcScpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbi8qKlxuICogRXhwb3NlIGBQaXdpa2AgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIFBpd2lrID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignUGl3aWsnKVxuICAuZ2xvYmFsKCdfcGFxJylcbiAgLm9wdGlvbigndXJsJywgbnVsbClcbiAgLm9wdGlvbignc2l0ZUlkJywgJycpXG4gIC5tYXBwaW5nKCdnb2FscycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwie3sgdXJsIH19L3Bpd2lrLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vcGl3aWsub3JnL2RvY3MvamF2YXNjcmlwdC10cmFja2luZy8jdG9jLWFzeW5jaHJvbm91cy10cmFja2luZ1xuICovXG5cblBpd2lrLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKXtcbiAgd2luZG93Ll9wYXEgPSB3aW5kb3cuX3BhcSB8fCBbXTtcbiAgcHVzaCgnc2V0U2l0ZUlkJywgdGhpcy5vcHRpb25zLnNpdGVJZCk7XG4gIHB1c2goJ3NldFRyYWNrZXJVcmwnLCB0aGlzLm9wdGlvbnMudXJsICsgJy9waXdpay5waHAnKTtcbiAgcHVzaCgnZW5hYmxlTGlua1RyYWNraW5nJyk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgUGl3aWsgaXMgbG9hZGVkXG4gKi9cblxuUGl3aWsucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9wYXEgJiYgd2luZG93Ll9wYXEucHVzaCAhPSBbXS5wdXNoKTtcbn07XG5cbi8qKlxuICogUGFnZVxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cblBpd2lrLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHB1c2goJ3RyYWNrUGFnZVZpZXcnKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5QaXdpay5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBnb2FscyA9IHRoaXMuZ29hbHModHJhY2suZXZlbnQoKSk7XG4gIHZhciByZXZlbnVlID0gdHJhY2sucmV2ZW51ZSgpIHx8IDA7XG4gIGVhY2goZ29hbHMsIGZ1bmN0aW9uKGdvYWwpe1xuICAgIHB1c2goJ3RyYWNrR29hbCcsIGdvYWwsIHJldmVudWUpO1xuICB9KTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBjb252ZXJ0RGF0ZXMgPSByZXF1aXJlKCdjb252ZXJ0LWRhdGVzJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfbG5xJyk7XG52YXIgYWxpYXMgPSByZXF1aXJlKCdhbGlhcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgUHJlYWN0YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgUHJlYWN0ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignUHJlYWN0JylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19sbnEnKVxuICAub3B0aW9uKCdwcm9qZWN0Q29kZScsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vZDJiYnZsNmRxNDhmYTYuY2xvdWRmcm9udC5uZXQvanMvbG4tMi40Lm1pbi5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL3d3dy5wcmVhY3QuaW8vYXBpL2phdmFzY3JpcHRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cblByZWFjdC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuX2xucSA9IHdpbmRvdy5fbG5xIHx8IFtdO1xuICBwdXNoKCdfc2V0Q29kZScsIHRoaXMub3B0aW9ucy5wcm9qZWN0Q29kZSk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuUHJlYWN0LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5fbG5xICYmIHdpbmRvdy5fbG5xLnB1c2ggIT09IEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5QcmVhY3QucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICBpZiAoIWlkZW50aWZ5LnVzZXJJZCgpKSByZXR1cm47XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoeyBjcmVhdGVkOiAnY3JlYXRlZF9hdCcgfSk7XG4gIHRyYWl0cyA9IGNvbnZlcnREYXRlcyh0cmFpdHMsIGNvbnZlcnREYXRlKTtcbiAgcHVzaCgnX3NldFBlcnNvbkRhdGEnLCB7XG4gICAgbmFtZTogaWRlbnRpZnkubmFtZSgpLFxuICAgIGVtYWlsOiBpZGVudGlmeS5lbWFpbCgpLFxuICAgIHVpZDogaWRlbnRpZnkudXNlcklkKCksXG4gICAgcHJvcGVydGllczogdHJhaXRzXG4gIH0pO1xufTtcblxuLyoqXG4gKiBHcm91cC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIChvcHRpb25hbClcbiAqL1xuXG5QcmVhY3QucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24oZ3JvdXApe1xuICBpZiAoIWdyb3VwLmdyb3VwSWQoKSkgcmV0dXJuO1xuICBwdXNoKCdfc2V0QWNjb3VudCcsIGdyb3VwLnRyYWl0cygpKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5QcmVhY3QucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHZhciByZXZlbnVlID0gdHJhY2sucmV2ZW51ZSgpO1xuICB2YXIgZXZlbnQgPSB0cmFjay5ldmVudCgpO1xuICB2YXIgc3BlY2lhbCA9IHsgbmFtZTogZXZlbnQgfTtcblxuICBpZiAocmV2ZW51ZSkge1xuICAgIHNwZWNpYWwucmV2ZW51ZSA9IHJldmVudWUgKiAxMDA7XG4gICAgZGVsZXRlIHByb3BzLnJldmVudWU7XG4gIH1cblxuICBpZiAocHJvcHMubm90ZSkge1xuICAgIHNwZWNpYWwubm90ZSA9IHByb3BzLm5vdGU7XG4gICAgZGVsZXRlIHByb3BzLm5vdGU7XG4gIH1cblxuICBwdXNoKCdfbG9nRXZlbnQnLCBzcGVjaWFsLCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgYSBgZGF0ZWAgdG8gYSBmb3JtYXQgUHJlYWN0IHN1cHBvcnRzLlxuICpcbiAqIEBwYXJhbSB7RGF0ZX0gZGF0ZVxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG5cbmZ1bmN0aW9uIGNvbnZlcnREYXRlKGRhdGUpe1xuICByZXR1cm4gTWF0aC5mbG9vcihkYXRlIC8gMTAwMCk7XG59XG4iLCJ2YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcblxudmFyIFB1YmxldCA9IGV4cG9ydHMuUHVibGV0ID0gaW50ZWdyYXRpb24oJ1B1YmxldCBBbmFseXRpY3MnKVxuICAuZ2xvYmFsKCdfcHVibGV0JylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5yZWFkeU9uSW5pdGlhbGl6ZSgpO1xuXG5QdWJsZXQucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24gKGV2ZW50LCBwcm9wZXJ0aWVzKSB7XG4gIGNvbnNvbGUubG9nKCd0cmFja2luZyBwdWJsZXQnKTtcbiAgd2luZG93Ll9wdWJsZXQucHVzaChbJ3RyYWNrJywgZXZlbnQsIHByb3BlcnRpZXNdKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19raXEnKTtcbnZhciBGYWNhZGUgPSByZXF1aXJlKCdmYWNhZGUnKTtcbnZhciBJZGVudGlmeSA9IEZhY2FkZS5JZGVudGlmeTtcbnZhciBiaW5kID0gcmVxdWlyZSgnYmluZCcpO1xudmFyIHdoZW4gPSByZXF1aXJlKCd3aGVuJyk7XG5cbi8qKlxuICogRXhwb3NlIGBRdWFsYXJvb2AgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIFF1YWxhcm9vID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignUXVhbGFyb28nKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2tpcScpXG4gIC5vcHRpb24oJ2N1c3RvbWVySWQnLCAnJylcbiAgLm9wdGlvbignc2l0ZVRva2VuJywgJycpXG4gIC5vcHRpb24oJ3RyYWNrJywgZmFsc2UpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9zMy5hbWF6b25hd3MuY29tL2tpLmpzL3t7IGN1c3RvbWVySWQgfX0ve3sgc2l0ZVRva2VuIH19LmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cblF1YWxhcm9vLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fa2lxID0gd2luZG93Ll9raXEgfHwgW107XG4gIHZhciBsb2FkZWQgPSBiaW5kKHRoaXMsIHRoaXMubG9hZGVkKTtcbiAgdmFyIHJlYWR5ID0gdGhpcy5yZWFkeTtcbiAgdGhpcy5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgd2hlbihsb2FkZWQsIHJlYWR5KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cblF1YWxhcm9vLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5fa2lxICYmIHdpbmRvdy5fa2lxLnB1c2ggIT09IEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogaHR0cDovL2hlbHAucXVhbGFyb28uY29tL2N1c3RvbWVyL3BvcnRhbC9hcnRpY2xlcy83MzEwODUtaWRlbnRpZnktc3VydmV5LW51ZGdlLXRha2Vyc1xuICogaHR0cDovL2hlbHAucXVhbGFyb28uY29tL2N1c3RvbWVyL3BvcnRhbC9hcnRpY2xlcy83MzEwOTEtc2V0LWFkZGl0aW9uYWwtdXNlci1wcm9wZXJ0aWVzXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5RdWFsYXJvby5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoKTtcbiAgdmFyIGlkID0gaWRlbnRpZnkudXNlcklkKCk7XG4gIHZhciBlbWFpbCA9IGlkZW50aWZ5LmVtYWlsKCk7XG4gIGlmIChlbWFpbCkgaWQgPSBlbWFpbDtcbiAgaWYgKGlkKSBwdXNoKCdpZGVudGlmeScsIGlkKTtcbiAgaWYgKHRyYWl0cykgcHVzaCgnc2V0JywgdHJhaXRzKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAob3B0aW9uYWwpXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAob3B0aW9uYWwpXG4gKi9cblxuUXVhbGFyb28ucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICBpZiAoIXRoaXMub3B0aW9ucy50cmFjaykgcmV0dXJuO1xuICB2YXIgZXZlbnQgPSB0cmFjay5ldmVudCgpO1xuICB2YXIgdHJhaXRzID0ge307XG4gIHRyYWl0c1snVHJpZ2dlcmVkOiAnICsgZXZlbnRdID0gdHJ1ZTtcbiAgdGhpcy5pZGVudGlmeShuZXcgSWRlbnRpZnkoeyB0cmFpdHM6IHRyYWl0cyB9KSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX3FldmVudHMnLCB7IHdyYXA6IGZhbHNlIH0pO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdXNlSHR0cHMgPSByZXF1aXJlKCd1c2UtaHR0cHMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYFF1YW50Y2FzdGAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIFF1YW50Y2FzdCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ1F1YW50Y2FzdCcpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfcWV2ZW50cycpXG4gIC5nbG9iYWwoJ19fcWMnKVxuICAub3B0aW9uKCdwQ29kZScsIG51bGwpXG4gIC5vcHRpb24oJ2FkdmVydGlzZScsIGZhbHNlKVxuICAudGFnKCdodHRwJywgJzxzY3JpcHQgc3JjPVwiaHR0cDovL2VkZ2UucXVhbnRzZXJ2ZS5jb20vcXVhbnQuanNcIj4nKVxuICAudGFnKCdodHRwcycsICc8c2NyaXB0IHNyYz1cImh0dHBzOi8vc2VjdXJlLnF1YW50c2VydmUuY29tL3F1YW50LmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL3d3dy5xdWFudGNhc3QuY29tL2xlYXJuaW5nLWNlbnRlci9ndWlkZXMvdXNpbmctdGhlLXF1YW50Y2FzdC1hc3luY2hyb25vdXMtdGFnL1xuICogaHR0cHM6Ly93d3cucXVhbnRjYXN0LmNvbS9oZWxwL2Nyb3NzLXBsYXRmb3JtLWF1ZGllbmNlLW1lYXN1cmVtZW50LWd1aWRlL1xuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cblF1YW50Y2FzdC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuX3FldmVudHMgPSB3aW5kb3cuX3FldmVudHMgfHwgW107XG5cbiAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gIHZhciBzZXR0aW5ncyA9IHsgcWFjY3Q6IG9wdHMucENvZGUgfTtcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG4gIGlmICh1c2VyLmlkKCkpIHNldHRpbmdzLnVpZCA9IHVzZXIuaWQoKTtcblxuICBpZiAocGFnZSkge1xuICAgIHNldHRpbmdzLmxhYmVscyA9IHRoaXMubGFiZWxzKCdwYWdlJywgcGFnZS5jYXRlZ29yeSgpLCBwYWdlLm5hbWUoKSk7XG4gIH1cblxuICBwdXNoKHNldHRpbmdzKTtcblxuICB2YXIgbmFtZSA9IHVzZUh0dHBzKCkgPyAnaHR0cHMnIDogJ2h0dHAnO1xuICB0aGlzLmxvYWQobmFtZSwgdGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cblF1YW50Y2FzdC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhIHdpbmRvdy5fX3FjO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHBzOi8vY2xvdWR1cC5jb20vY0JSUkZBZnE2bWZcbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5RdWFudGNhc3QucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xuICB2YXIgbmFtZSA9IHBhZ2UubmFtZSgpO1xuICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgZXZlbnQ6ICdyZWZyZXNoJyxcbiAgICBsYWJlbHM6IHRoaXMubGFiZWxzKCdwYWdlJywgY2F0ZWdvcnksIG5hbWUpLFxuICAgIHFhY2N0OiB0aGlzLm9wdGlvbnMucENvZGUsXG4gIH07XG4gIHZhciB1c2VyID0gdGhpcy5hbmFseXRpY3MudXNlcigpO1xuICBpZiAodXNlci5pZCgpKSBzZXR0aW5ncy51aWQgPSB1c2VyLmlkKCk7XG4gIHB1c2goc2V0dGluZ3MpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBodHRwczovL3d3dy5xdWFudGNhc3QuY29tL2hlbHAvY3Jvc3MtcGxhdGZvcm0tYXVkaWVuY2UtbWVhc3VyZW1lbnQtZ3VpZGUvXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlkIChvcHRpb25hbClcbiAqL1xuXG5RdWFudGNhc3QucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICAvLyBlZGl0IHRoZSBpbml0aWFsIHF1YW50Y2FzdCBzZXR0aW5nc1xuICAvLyBUT0RPOiBjb3VsZCBiZSBkb25lIGluIGEgY2xlYW5lciB3YXlcbiAgdmFyIGlkID0gaWRlbnRpZnkudXNlcklkKCk7XG4gIGlmIChpZCkge1xuICAgIHdpbmRvdy5fcWV2ZW50c1swXSA9IHdpbmRvdy5fcWV2ZW50c1swXSB8fCB7fTtcbiAgICB3aW5kb3cuX3FldmVudHNbMF0udWlkID0gaWQ7XG4gIH1cbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cHM6Ly9jbG91ZHVwLmNvbS9jQlJSRkFmcTZtZlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuUXVhbnRjYXN0LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIG5hbWUgPSB0cmFjay5ldmVudCgpO1xuICB2YXIgcmV2ZW51ZSA9IHRyYWNrLnJldmVudWUoKTtcbiAgdmFyIHNldHRpbmdzID0ge1xuICAgIGV2ZW50OiAnY2xpY2snLFxuICAgIGxhYmVsczogdGhpcy5sYWJlbHMoJ2V2ZW50JywgbmFtZSksXG4gICAgcWFjY3Q6IHRoaXMub3B0aW9ucy5wQ29kZVxuICB9O1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgaWYgKG51bGwgIT0gcmV2ZW51ZSkgc2V0dGluZ3MucmV2ZW51ZSA9IChyZXZlbnVlKycnKTsgLy8gY29udmVydCB0byBzdHJpbmdcbiAgaWYgKHVzZXIuaWQoKSkgc2V0dGluZ3MudWlkID0gdXNlci5pZCgpO1xuICBwdXNoKHNldHRpbmdzKTtcbn07XG5cbi8qKlxuICogQ29tcGxldGVkIE9yZGVyLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5RdWFudGNhc3QucHJvdG90eXBlLmNvbXBsZXRlZE9yZGVyID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgbmFtZSA9IHRyYWNrLmV2ZW50KCk7XG4gIHZhciByZXZlbnVlID0gdHJhY2sudG90YWwoKTtcbiAgdmFyIGxhYmVscyA9IHRoaXMubGFiZWxzKCdldmVudCcsIG5hbWUpO1xuICB2YXIgY2F0ZWdvcnkgPSB0cmFjay5jYXRlZ29yeSgpO1xuXG4gIGlmICh0aGlzLm9wdGlvbnMuYWR2ZXJ0aXNlICYmIGNhdGVnb3J5KSB7XG4gICAgbGFiZWxzICs9ICcsJyArIHRoaXMubGFiZWxzKCdwY2F0JywgY2F0ZWdvcnkpO1xuICB9XG5cbiAgdmFyIHNldHRpbmdzID0ge1xuICAgIGV2ZW50OiAncmVmcmVzaCcsIC8vIHRoZSBleGFtcGxlIFF1YW50Y2FzdCBzZW50IGhhcyBjb21wbGV0ZWQgb3JkZXIgc2VuZCByZWZyZXNoIG5vdCBjbGlja1xuICAgIGxhYmVsczogbGFiZWxzLFxuICAgIHJldmVudWU6IChyZXZlbnVlKycnKSwgLy8gY29udmVydCB0byBzdHJpbmdcbiAgICBvcmRlcmlkOiB0cmFjay5vcmRlcklkKCksXG4gICAgcWFjY3Q6IHRoaXMub3B0aW9ucy5wQ29kZVxuICB9O1xuICBwdXNoKHNldHRpbmdzKTtcbn07XG5cbi8qKlxuICogR2VuZXJhdGUgcXVhbnRjYXN0IGxhYmVscy5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgIG9wdGlvbnMuYWR2ZXJ0aXNlID0gZmFsc2U7XG4gKiAgICBsYWJlbHMoJ2V2ZW50JywgJ215IGV2ZW50Jyk7XG4gKiAgICAvLyA9PiBcImV2ZW50Lm15IGV2ZW50XCJcbiAqXG4gKiAgICBvcHRpb25zLmFkdmVydGlzZSA9IHRydWU7XG4gKiAgICBsYWJlbHMoJ2V2ZW50JywgJ215IGV2ZW50Jyk7XG4gKiAgICAvLyA9PiBcIl9mcC5ldmVudC5teSBldmVudFwiXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSAuLi5cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblF1YW50Y2FzdC5wcm90b3R5cGUubGFiZWxzID0gZnVuY3Rpb24odHlwZSl7XG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB2YXIgYWR2ZXJ0aXNlID0gdGhpcy5vcHRpb25zLmFkdmVydGlzZTtcbiAgdmFyIHJldCA9IFtdO1xuXG4gIGlmIChhZHZlcnRpc2UgJiYgJ3BhZ2UnID09IHR5cGUpIHR5cGUgPSAnZXZlbnQnO1xuICBpZiAoYWR2ZXJ0aXNlKSB0eXBlID0gJ19mcC4nICsgdHlwZTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobnVsbCA9PSBhcmdzW2ldKSBjb250aW51ZTtcbiAgICB2YXIgdmFsdWUgPSBTdHJpbmcoYXJnc1tpXSk7XG4gICAgcmV0LnB1c2godmFsdWUucmVwbGFjZSgvLC9nLCAnOycpKTtcbiAgfVxuXG4gIHJldCA9IGFkdmVydGlzZSA/IHJldC5qb2luKCcgJykgOiByZXQuam9pbignLicpO1xuICByZXR1cm4gW3R5cGUsIHJldF0uam9pbignLicpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJ2V4dGVuZCcpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYFJvbGxiYXJgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBSb2xsYmFySW50ZWdyYXRpb24gPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdSb2xsYmFyJylcbiAgLmdsb2JhbCgnUm9sbGJhcicpXG4gIC5vcHRpb24oJ2lkZW50aWZ5JywgdHJ1ZSlcbiAgLm9wdGlvbignYWNjZXNzVG9rZW4nLCAnJylcbiAgLm9wdGlvbignZW52aXJvbm1lbnQnLCAndW5rbm93bicpXG4gIC5vcHRpb24oJ2NhcHR1cmVVbmNhdWdodCcsIHRydWUpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Sb2xsYmFySW50ZWdyYXRpb24ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIF9yb2xsYmFyQ29uZmlnID0gdGhpcy5jb25maWcgPSB7XG4gICAgYWNjZXNzVG9rZW46IHRoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbixcbiAgICBjYXB0dXJlVW5jYXVnaHQ6IHRoaXMub3B0aW9ucy5jYXB0dXJlVW5jYXVnaHQsXG4gICAgcGF5bG9hZDoge1xuICAgICAgZW52aXJvbm1lbnQ6IHRoaXMub3B0aW9ucy5lbnZpcm9ubWVudFxuICAgIH1cbiAgfTtcblxuICAoZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXt0aGlzLnNoaW1JZD0rK2csdGhpcy5ub3RpZmllcj1udWxsLHRoaXMucGFyZW50U2hpbT1iLHRoaXMubG9nZ2VyPWZ1bmN0aW9uKCl7fSxhLmNvbnNvbGUmJnZvaWQgMCA9PT0gYS5jb25zb2xlLnNoaW1JZCYmKHRoaXMubG9nZ2VyPWEuY29uc29sZS5sb2cpfWZ1bmN0aW9uIGMoYixjLGQpeyFkWzRdJiZhLl9yb2xsYmFyV3JhcHBlZEVycm9yJiYoZFs0XT1hLl9yb2xsYmFyV3JhcHBlZEVycm9yLGEuX3JvbGxiYXJXcmFwcGVkRXJyb3I9bnVsbCksYi51bmNhdWdodEVycm9yLmFwcGx5KGIsZCksYyYmYy5hcHBseShhLGQpfWZ1bmN0aW9uIGQoYyl7dmFyIGQ9YjtyZXR1cm4gZihmdW5jdGlvbigpe2lmICh0aGlzLm5vdGlmaWVyKXJldHVybiB0aGlzLm5vdGlmaWVyW2NdLmFwcGx5KHRoaXMubm90aWZpZXIsYXJndW1lbnRzKTt2YXIgYj10aGlzLGU9XCJzY29wZVwiPT09YztlJiYoYj1uZXcgZCh0aGlzKSk7dmFyIGY9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApLGc9eyBzaGltOmIsIG1ldGhvZDpjLCBhcmdzOmYsIHRzOm5ldyBEYXRlIH07cmV0dXJuIGEuX3JvbGxiYXJTaGltUXVldWUucHVzaChnKSxlP2I6dm9pZCAwfSl9ZnVuY3Rpb24gZShhLGIpe2lmIChiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KFwiYWRkRXZlbnRMaXN0ZW5lclwiKSl7dmFyIGM9Yi5hZGRFdmVudExpc3RlbmVyO2IuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGQsZSl7Yy5jYWxsKHRoaXMsYixhLndyYXAoZCksZSl9O3ZhciBkPWIucmVtb3ZlRXZlbnRMaXN0ZW5lcjtiLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMpe2QuY2FsbCh0aGlzLGEsYi5fd3JhcHBlZHx8YixjKX19fWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYj1ifHx0aGlzLmxvZ2dlcixmdW5jdGlvbigpe3RyeSB7cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSBjYXRjaCAoYykge2IoXCJSb2xsYmFyIGludGVybmFsIGVycm9yOlwiLGMpfX19dmFyIGc9MDtiLmluaXQ9ZnVuY3Rpb24oYSxkKXt2YXIgZz1kLmdsb2JhbEFsaWFzfHxcIlJvbGxiYXJcIjtpZiAoXCJvYmplY3RcIj09dHlwZW9mIGFbZ10pcmV0dXJuIGFbZ107YS5fcm9sbGJhclNoaW1RdWV1ZT1bXSxhLl9yb2xsYmFyV3JhcHBlZEVycm9yPW51bGwsZD1kfHx7fTt2YXIgaD1uZXcgYjtyZXR1cm4gZihmdW5jdGlvbigpe2lmIChoLmNvbmZpZ3VyZShkKSxkLmNhcHR1cmVVbmNhdWdodCl7dmFyIGI9YS5vbmVycm9yO2Eub25lcnJvcj1mdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtjKGgsYixhKX07dmFyIGYsaSxqPVtcIkV2ZW50VGFyZ2V0XCIsXCJXaW5kb3dcIixcIk5vZGVcIixcIkFwcGxpY2F0aW9uQ2FjaGVcIixcIkF1ZGlvVHJhY2tMaXN0XCIsXCJDaGFubmVsTWVyZ2VyTm9kZVwiLFwiQ3J5cHRvT3BlcmF0aW9uXCIsXCJFdmVudFNvdXJjZVwiLFwiRmlsZVJlYWRlclwiLFwiSFRNTFVua25vd25FbGVtZW50XCIsXCJJREJEYXRhYmFzZVwiLFwiSURCUmVxdWVzdFwiLFwiSURCVHJhbnNhY3Rpb25cIixcIktleU9wZXJhdGlvblwiLFwiTWVkaWFDb250cm9sbGVyXCIsXCJNZXNzYWdlUG9ydFwiLFwiTW9kYWxXaW5kb3dcIixcIk5vdGlmaWNhdGlvblwiLFwiU1ZHRWxlbWVudEluc3RhbmNlXCIsXCJTY3JlZW5cIixcIlRleHRUcmFja1wiLFwiVGV4dFRyYWNrQ3VlXCIsXCJUZXh0VHJhY2tMaXN0XCIsXCJXZWJTb2NrZXRcIixcIldlYlNvY2tldFdvcmtlclwiLFwiV29ya2VyXCIsXCJYTUxIdHRwUmVxdWVzdFwiLFwiWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldFwiLFwiWE1MSHR0cFJlcXVlc3RVcGxvYWRcIl07Zm9yIChmPTA7ZjxqLmxlbmd0aDsrK2YpaT1qW2ZdLGFbaV0mJmFbaV0ucHJvdG90eXBlJiZlKGgsYVtpXS5wcm90b3R5cGUpfXJldHVybiBhW2ddPWgsaH0saC5sb2dnZXIpKCl9LGIucHJvdG90eXBlLmxvYWRGdWxsPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGc9ZihmdW5jdGlvbigpe3ZhciBhPWIuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxlPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIilbMF07YS5zcmM9ZC5yb2xsYmFySnNVcmwsYS5hc3luYz0hYyxhLm9ubG9hZD1oLGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSxlKX0sdGhpcy5sb2dnZXIpLGg9ZihmdW5jdGlvbigpe3ZhciBiO2lmICh2b2lkIDA9PT1hLl9yb2xsYmFyUGF5bG9hZFF1ZXVlKXt2YXIgYyxkLGYsZztmb3IgKGI9bmV3IEVycm9yKFwicm9sbGJhci5qcyBkaWQgbm90IGxvYWRcIik7Yz1hLl9yb2xsYmFyU2hpbVF1ZXVlLnNoaWZ0KCk7KWZvciAoZj1jLmFyZ3MsZz0wO2c8Zi5sZW5ndGg7KytnKWlmIChkPWZbZ10sXCJmdW5jdGlvblwiPT10eXBlb2YgZCl7ZChiKTticmVha319ZSYmZShiKX0sdGhpcy5sb2dnZXIpO2YoZnVuY3Rpb24oKXtjP2coKTphLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGcsITEpOmEuYXR0YWNoRXZlbnQoXCJvbmxvYWRcIixnKX0sdGhpcy5sb2dnZXIpKCl9LGIucHJvdG90eXBlLndyYXA9ZnVuY3Rpb24oYil7aWYgKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGIpcmV0dXJuIGI7aWYgKGIuX2lzV3JhcClyZXR1cm4gYjtpZiAoIWIuX3dyYXBwZWQpe2IuX3dyYXBwZWQ9ZnVuY3Rpb24oKXt0cnkge3JldHVybiBiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0gY2F0Y2ggKGMpIHt0aHJvdyBhLl9yb2xsYmFyV3JhcHBlZEVycm9yPWMsY319LGIuX3dyYXBwZWQuX2lzV3JhcD0hMDtmb3IgKHZhciBjIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShjKSYmKGIuX3dyYXBwZWRbY109YltjXSl9cmV0dXJuIGIuX3dyYXBwZWR9O2ZvciAodmFyIGg9XCJsb2csZGVidWcsaW5mbyx3YXJuLHdhcm5pbmcsZXJyb3IsY3JpdGljYWwsZ2xvYmFsLGNvbmZpZ3VyZSxzY29wZSx1bmNhdWdodEVycm9yXCIuc3BsaXQoXCIsXCIpLGk9MDtpPGgubGVuZ3RoOysraSliLnByb3RvdHlwZVtoW2ldXT1kKGhbaV0pO3ZhciBqPVwiLy9kMzdndnJ2YzB3dDRzMS5jbG91ZGZyb250Lm5ldC9qcy92MS4wL3JvbGxiYXIubWluLmpzXCI7X3JvbGxiYXJDb25maWcucm9sbGJhckpzVXJsPV9yb2xsYmFyQ29uZmlnLnJvbGxiYXJKc1VybHx8aixiLmluaXQoYSxfcm9sbGJhckNvbmZpZyl9KSh3aW5kb3csZG9jdW1lbnQpO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cblJvbGxiYXJJbnRlZ3JhdGlvbi5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGlzLm9iamVjdCh3aW5kb3cuUm9sbGJhcikgJiYgbnVsbCA9PSB3aW5kb3cuUm9sbGJhci5zaGltSWQ7XG59O1xuXG4vKipcbiAqIExvYWQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqL1xuXG5Sb2xsYmFySW50ZWdyYXRpb24ucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbihjYWxsYmFjayl7XG4gIHdpbmRvdy5Sb2xsYmFyLmxvYWRGdWxsKHdpbmRvdywgZG9jdW1lbnQsIHRydWUsIHRoaXMuY29uZmlnLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblJvbGxiYXJJbnRlZ3JhdGlvbi5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIC8vIGRvIHN0dWZmIHdpdGggYGlkYCBvciBgdHJhaXRzYFxuICBpZiAoIXRoaXMub3B0aW9ucy5pZGVudGlmeSkgcmV0dXJuO1xuXG4gIC8vIERvbid0IGFsbG93IGlkZW50aWZ5IHdpdGhvdXQgYSB1c2VyIGlkXG4gIHZhciB1aWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgaWYgKHVpZCA9PT0gbnVsbCB8fCB1aWQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXG4gIHZhciByb2xsYmFyID0gd2luZG93LlJvbGxiYXI7XG4gIHZhciBwZXJzb24gPSB7IGlkOiB1aWQgfTtcbiAgZXh0ZW5kKHBlcnNvbiwgaWRlbnRpZnkudHJhaXRzKCkpO1xuICByb2xsYmFyLmNvbmZpZ3VyZSh7IHBheWxvYWQ6IHsgcGVyc29uOiBwZXJzb24gfX0pO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xuXG4vKipcbiAqIEV4cG9zZSBgU2FhU3F1YXRjaGAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIFNhYVNxdWF0Y2ggPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdTYWFTcXVhdGNoJylcbiAgLm9wdGlvbigndGVuYW50QWxpYXMnLCAnJylcbiAgLmdsb2JhbCgnX3NxaCcpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9kMnJjcDlhazE1MmtlMS5jbG91ZGZyb250Lm5ldC9hc3NldHMvamF2YXNjcmlwdHMvc3F1YXRjaC5taW4uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cblNhYVNxdWF0Y2gucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9zcWggPSB3aW5kb3cuX3NxaCB8fCBbXTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5TYWFTcXVhdGNoLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gd2luZG93Ll9zcWggJiYgd2luZG93Ll9zcWgucHVzaCAhPSBbXS5wdXNoO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0ZhY2FkZX0gaWRlbnRpZnlcbiAqL1xuXG5TYWFTcXVhdGNoLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHNxaCA9IHdpbmRvdy5fc3FoO1xuICB2YXIgYWNjb3VudElkID0gaWRlbnRpZnkucHJveHkoJ3RyYWl0cy5hY2NvdW50SWQnKTtcbiAgdmFyIGltYWdlID0gaWRlbnRpZnkucHJveHkoJ3RyYWl0cy5yZWZlcnJhbEltYWdlJyk7XG4gIHZhciBvcHRzID0gaWRlbnRpZnkub3B0aW9ucyh0aGlzLm5hbWUpO1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgdmFyIGVtYWlsID0gaWRlbnRpZnkuZW1haWwoKTtcblxuICBpZiAoIShpZCB8fCBlbWFpbCkpIHJldHVybjtcbiAgaWYgKHRoaXMuY2FsbGVkKSByZXR1cm47XG5cbiAgdmFyIGluaXQgPSB7XG4gICAgdGVuYW50X2FsaWFzOiB0aGlzLm9wdGlvbnMudGVuYW50QWxpYXMsXG4gICAgZmlyc3RfbmFtZTogaWRlbnRpZnkuZmlyc3ROYW1lKCksXG4gICAgbGFzdF9uYW1lOiBpZGVudGlmeS5sYXN0TmFtZSgpLFxuICAgIHVzZXJfaW1hZ2U6IGlkZW50aWZ5LmF2YXRhcigpLFxuICAgIGVtYWlsOiBlbWFpbCxcbiAgICB1c2VyX2lkOiBpZCxcbiAgfTtcblxuICBpZiAoYWNjb3VudElkKSBpbml0LmFjY291bnRfaWQgPSBhY2NvdW50SWQ7XG4gIGlmIChvcHRzLmNoZWNrc3VtKSBpbml0LmNoZWNrc3VtID0gb3B0cy5jaGVja3N1bTtcbiAgaWYgKGltYWdlKSBpbml0LmZiX3NoYXJlX2ltYWdlID0gaW1hZ2U7XG5cbiAgc3FoLnB1c2goWydpbml0JywgaW5pdF0pO1xuICB0aGlzLmNhbGxlZCA9IHRydWU7XG4gIHRoaXMubG9hZCgpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYFNlbnRyeWAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIFNlbnRyeSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ1NlbnRyeScpXG4gIC5nbG9iYWwoJ1JhdmVuJylcbiAgLm9wdGlvbignY29uZmlnJywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9jZG4ucmF2ZW5qcy5jb20vMS4xLjEwL25hdGl2ZS9yYXZlbi5taW4uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9yYXZlbi1qcy5yZWFkdGhlZG9jcy5vcmcvZW4vbGF0ZXN0L2NvbmZpZy9pbmRleC5odG1sXG4gKi9cblxuU2VudHJ5LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKXtcbiAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWc7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgLy8gZm9yIG5vdywgcmF2ZW4gYmFzaWNhbGx5IHJlcXVpcmVzIGBpbnN0YWxsYCB0byBiZSBjYWxsZWRcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3JhdmVuLWpzL2Jsb2IvbWFzdGVyL3NyYy9yYXZlbi5qcyNMMTEzXG4gICAgd2luZG93LlJhdmVuLmNvbmZpZyhjb25maWcpLmluc3RhbGwoKTtcbiAgICBzZWxmLnJlYWR5KCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5TZW50cnkucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpcy5vYmplY3Qod2luZG93LlJhdmVuKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5TZW50cnkucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB3aW5kb3cuUmF2ZW4uc2V0VXNlcihpZGVudGlmeS50cmFpdHMoKSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgU25hcEVuZ2FnZWAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIFNuYXBFbmdhZ2UgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdTbmFwRW5nYWdlJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ1NuYXBBQnVnJylcbiAgLm9wdGlvbignYXBpS2V5JywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9jb21tb25kYXRhc3RvcmFnZS5nb29nbGVhcGlzLmNvbS9jb2RlLnNuYXBlbmdhZ2UuY29tL2pzL3t7IGFwaUtleSB9fS5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL2hlbHAuc25hcGVuZ2FnZS5jb20vaW5zdGFsbGF0aW9uLWd1aWRlLWdldHRpbmctc3RhcnRlZC1pbi1hLXNuYXAvXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5TbmFwRW5nYWdlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuU25hcEVuZ2FnZS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGlzLm9iamVjdCh3aW5kb3cuU25hcEFCdWcpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cblNuYXBFbmdhZ2UucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgZW1haWwgPSBpZGVudGlmeS5lbWFpbCgpO1xuICBpZiAoIWVtYWlsKSByZXR1cm47XG4gIHdpbmRvdy5TbmFwQUJ1Zy5zZXRVc2VyRW1haWwoZW1haWwpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGJpbmQgPSByZXF1aXJlKCdiaW5kJyk7XG52YXIgd2hlbiA9IHJlcXVpcmUoJ3doZW4nKTtcblxuLyoqXG4gKiBFeHBvc2UgYFNwaW5uYWtyYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgU3Bpbm5ha3IgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdTcGlubmFrcicpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfc3Bpbm5ha3Jfc2l0ZV9pZCcpXG4gIC5nbG9iYWwoJ19zcGlubmFrcicpXG4gIC5vcHRpb24oJ3NpdGVJZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vZDNvanp5aGJvbHZvaTUuY2xvdWRmcm9udC5uZXQvanMvc28uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuU3Bpbm5ha3IucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9zcGlubmFrcl9zaXRlX2lkID0gdGhpcy5vcHRpb25zLnNpdGVJZDtcbiAgdmFyIGxvYWRlZCA9IGJpbmQodGhpcywgdGhpcy5sb2FkZWQpO1xuICB2YXIgcmVhZHkgPSB0aGlzLnJlYWR5O1xuICB0aGlzLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB3aGVuKGxvYWRlZCwgcmVhZHkpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuU3Bpbm5ha3IucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISB3aW5kb3cuX3NwaW5uYWtyO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHNsdWcgPSByZXF1aXJlKCdzbHVnJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfdHNxJyk7XG5cbi8qKlxuICogRXhwb3NlIGBUYXBzdHJlYW1gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBUYXBzdHJlYW0gPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdUYXBzdHJlYW0nKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX3RzcScpXG4gIC5vcHRpb24oJ2FjY291bnROYW1lJywgJycpXG4gIC5vcHRpb24oJ3RyYWNrQWxsUGFnZXMnLCB0cnVlKVxuICAub3B0aW9uKCd0cmFja05hbWVkUGFnZXMnLCB0cnVlKVxuICAub3B0aW9uKCd0cmFja0NhdGVnb3JpemVkUGFnZXMnLCB0cnVlKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vY2RuLnRhcHN0cmVhbS5jb20vc3RhdGljL2pzL3RhcHN0cmVhbS5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5UYXBzdHJlYW0ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll90c3EgPSB3aW5kb3cuX3RzcSB8fCBbXTtcbiAgcHVzaCgnc2V0QWNjb3VudE5hbWUnLCB0aGlzLm9wdGlvbnMuYWNjb3VudE5hbWUpO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cblRhcHN0cmVhbS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX3RzcSAmJiB3aW5kb3cuX3RzcS5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuVGFwc3RyZWFtLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBjYXRlZ29yeSA9IHBhZ2UuY2F0ZWdvcnkoKTtcbiAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuXG4gIC8vIGFsbCBwYWdlc1xuICBpZiAob3B0cy50cmFja0FsbFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKCkpO1xuICB9XG5cbiAgLy8gbmFtZWQgcGFnZXNcbiAgaWYgKG5hbWUgJiYgb3B0cy50cmFja05hbWVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2sobmFtZSkpO1xuICB9XG5cbiAgLy8gY2F0ZWdvcml6ZWQgcGFnZXNcbiAgaWYgKGNhdGVnb3J5ICYmIG9wdHMudHJhY2tDYXRlZ29yaXplZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKGNhdGVnb3J5KSk7XG4gIH1cbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5UYXBzdHJlYW0ucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHB1c2goJ2ZpcmVIaXQnLCBzbHVnKHRyYWNrLmV2ZW50KCkpLCBbcHJvcHMudXJsXSk7IC8vIG5lZWRzIGV2ZW50cyBhcyBzbHVnc1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGFsaWFzID0gcmVxdWlyZSgnYWxpYXMnKTtcbnZhciBjbG9uZSA9IHJlcXVpcmUoJ2Nsb25lJyk7XG5cbi8qKlxuICogRXhwb3NlIGBUcmFraW9gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBUcmFraW8gPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCd0cmFrLmlvJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ3RyYWsnKVxuICAub3B0aW9uKCd0b2tlbicsICcnKVxuICAub3B0aW9uKCd0cmFja05hbWVkUGFnZXMnLCB0cnVlKVxuICAub3B0aW9uKCd0cmFja0NhdGVnb3JpemVkUGFnZXMnLCB0cnVlKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vZDI5cDY0Nzc5eDQzem8uY2xvdWRmcm9udC5uZXQvdjEvdHJhay5pby5taW4uanNcIj4nKTtcblxuLyoqXG4gKiBPcHRpb25zIGFsaWFzZXMuXG4gKi9cblxudmFyIG9wdGlvbnNBbGlhc2VzID0ge1xuICBpbml0aWFsUGFnZXZpZXc6ICdhdXRvX3RyYWNrX3BhZ2Vfdmlldydcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL2RvY3MudHJhay5pb1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuVHJha2lvLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICB3aW5kb3cudHJhayA9IHdpbmRvdy50cmFrIHx8IFtdO1xuICB3aW5kb3cudHJhay5pbyA9IHdpbmRvdy50cmFrLmlvIHx8IHt9O1xuICB3aW5kb3cudHJhay5wdXNoID0gd2luZG93LnRyYWsucHVzaCB8fCBmdW5jdGlvbigpe307XG4gIHdpbmRvdy50cmFrLmlvLmxvYWQgPSB3aW5kb3cudHJhay5pby5sb2FkIHx8IGZ1bmN0aW9uKGUpe3ZhciByID0gZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7d2luZG93LnRyYWsucHVzaChbZV0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpOyB9OyB9ICxpPVtcImluaXRpYWxpemVcIixcImlkZW50aWZ5XCIsXCJ0cmFja1wiLFwiYWxpYXNcIixcImNoYW5uZWxcIixcInNvdXJjZVwiLFwiaG9zdFwiLFwicHJvdG9jb2xcIixcInBhZ2Vfdmlld1wiXTsgZm9yICh2YXIgcz0wO3M8aS5sZW5ndGg7cysrKSB3aW5kb3cudHJhay5pb1tpW3NdXT1yKGlbc10pOyB3aW5kb3cudHJhay5pby5pbml0aWFsaXplLmFwcGx5KHdpbmRvdy50cmFrLmlvLGFyZ3VtZW50cyk7IH07XG4gIHdpbmRvdy50cmFrLmlvLmxvYWQob3B0aW9ucy50b2tlbiwgYWxpYXMob3B0aW9ucywgb3B0aW9uc0FsaWFzZXMpKTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5UcmFraW8ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93LnRyYWsgJiYgd2luZG93LnRyYWsubG9hZGVkKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5UcmFraW8ucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xuICB2YXIgcHJvcHMgPSBwYWdlLnByb3BlcnRpZXMoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG5cbiAgd2luZG93LnRyYWsuaW8ucGFnZV92aWV3KHByb3BzLnBhdGgsIG5hbWUgfHwgcHJvcHMudGl0bGUpO1xuXG4gIC8vIG5hbWVkIHBhZ2VzXG4gIGlmIChuYW1lICYmIHRoaXMub3B0aW9ucy50cmFja05hbWVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2sobmFtZSkpO1xuICB9XG5cbiAgLy8gY2F0ZWdvcml6ZWQgcGFnZXNcbiAgaWYgKGNhdGVnb3J5ICYmIHRoaXMub3B0aW9ucy50cmFja0NhdGVnb3JpemVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2soY2F0ZWdvcnkpKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUcmFpdCBhbGlhc2VzLlxuICpcbiAqIGh0dHA6Ly9kb2NzLnRyYWsuaW8vcHJvcGVydGllcy5odG1sI3NwZWNpYWxcbiAqL1xuXG52YXIgdHJhaXRBbGlhc2VzID0ge1xuICBhdmF0YXI6ICdhdmF0YXJfdXJsJyxcbiAgZmlyc3ROYW1lOiAnZmlyc3RfbmFtZScsXG4gIGxhc3ROYW1lOiAnbGFzdF9uYW1lJ1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cblRyYWtpby5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHModHJhaXRBbGlhc2VzKTtcbiAgdmFyIGlkID0gaWRlbnRpZnkudXNlcklkKCk7XG5cbiAgaWYgKGlkKSB7XG4gICAgd2luZG93LnRyYWsuaW8uaWRlbnRpZnkoaWQsIHRyYWl0cyk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LnRyYWsuaW8uaWRlbnRpZnkodHJhaXRzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHcm91cC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaWQgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICpcbiAqIFRPRE86IGFkZCBncm91cFxuICogVE9ETzogYWRkIGB0cmFpdC5jb21wYW55L29yZ2FuaXphdGlvbmAgZnJvbSB0cmFrLmlvIGRvY3MgaHR0cDovL2RvY3MudHJhay5pby9wcm9wZXJ0aWVzLmh0bWwjc3BlY2lhbFxuICovXG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5UcmFraW8ucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB3aW5kb3cudHJhay5pby50cmFjayh0cmFjay5ldmVudCgpLCB0cmFjay5wcm9wZXJ0aWVzKCkpO1xufTtcblxuLyoqXG4gKiBBbGlhcy5cbiAqXG4gKiBAcGFyYW0ge0FsaWFzfSBhbGlhc1xuICovXG5cblRyYWtpby5wcm90b3R5cGUuYWxpYXMgPSBmdW5jdGlvbihhbGlhcyl7XG4gIGlmICghd2luZG93LnRyYWsuaW8uZGlzdGluY3RfaWQpIHJldHVybjtcbiAgdmFyIGZyb20gPSBhbGlhcy5mcm9tKCk7XG4gIHZhciB0byA9IGFsaWFzLnRvKCk7XG5cbiAgaWYgKHRvID09PSB3aW5kb3cudHJhay5pby5kaXN0aW5jdF9pZCgpKSByZXR1cm47XG5cbiAgaWYgKGZyb20pIHtcbiAgICB3aW5kb3cudHJhay5pby5hbGlhcyhmcm9tLCB0byk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LnRyYWsuaW8uYWxpYXModG8pO1xuICB9XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcblxuLyoqXG4gKiBIT1AuXG4gKi9cblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogRXhwb3NlIGBUd2l0dGVyQWRzYC5cbiAqL1xuXG52YXIgVHdpdHRlckFkcyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ1R3aXR0ZXIgQWRzJylcbiAgLm9wdGlvbigncGFnZScsICcnKVxuICAudGFnKCc8aW1nIHNyYz1cIi8vYW5hbHl0aWNzLnR3aXR0ZXIuY29tL2kvYWRzY3Q/dHhuX2lkPXt7IHBpeGVsSWQgfX0mcF9pZD1Ud2l0dGVyXCIvPicpXG4gIC5tYXBwaW5nKCdldmVudHMnKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuVHdpdHRlckFkcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucmVhZHkoKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5Ud2l0dGVyQWRzLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIGlmICh0aGlzLm9wdGlvbnMucGFnZSkge1xuICAgIHRoaXMubG9hZCh7IHBpeGVsSWQ6IHRoaXMub3B0aW9ucy5wYWdlIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuVHdpdHRlckFkcy5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBldmVudHMgPSB0aGlzLmV2ZW50cyh0cmFjay5ldmVudCgpKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBlYWNoKGV2ZW50cywgZnVuY3Rpb24ocGl4ZWxJZCl7XG4gICAgc2VsZi5sb2FkKHsgcGl4ZWxJZDogcGl4ZWxJZCB9KTtcbiAgfSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdVc2VyVm9pY2UnKTtcbnZhciBjb252ZXJ0RGF0ZXMgPSByZXF1aXJlKCdjb252ZXJ0LWRhdGVzJyk7XG52YXIgdW5peCA9IHJlcXVpcmUoJ3RvLXVuaXgtdGltZXN0YW1wJyk7XG52YXIgYWxpYXMgPSByZXF1aXJlKCdhbGlhcycpO1xudmFyIGNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcblxuLyoqXG4gKiBFeHBvc2UgYFVzZXJWb2ljZWAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIFVzZXJWb2ljZSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ1VzZXJWb2ljZScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdVc2VyVm9pY2UnKVxuICAuZ2xvYmFsKCdzaG93Q2xhc3NpY1dpZGdldCcpXG4gIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAub3B0aW9uKCdjbGFzc2ljJywgZmFsc2UpXG4gIC5vcHRpb24oJ2ZvcnVtSWQnLCBudWxsKVxuICAub3B0aW9uKCdzaG93V2lkZ2V0JywgdHJ1ZSlcbiAgLm9wdGlvbignbW9kZScsICdjb250YWN0JylcbiAgLm9wdGlvbignYWNjZW50Q29sb3InLCAnIzQ0OGRkNicpXG4gIC5vcHRpb24oJ3NtYXJ0dm90ZScsIHRydWUpXG4gIC5vcHRpb24oJ3RyaWdnZXInLCBudWxsKVxuICAub3B0aW9uKCd0cmlnZ2VyUG9zaXRpb24nLCAnYm90dG9tLXJpZ2h0JylcbiAgLm9wdGlvbigndHJpZ2dlckNvbG9yJywgJyNmZmZmZmYnKVxuICAub3B0aW9uKCd0cmlnZ2VyQmFja2dyb3VuZENvbG9yJywgJ3JnYmEoNDYsIDQ5LCA1MSwgMC42KScpXG4gIC8vIEJBQ0tXQVJEUyBDT01QQVRJQklMSVRZOiBjbGFzc2ljIG9wdGlvbnNcbiAgLm9wdGlvbignY2xhc3NpY01vZGUnLCAnZnVsbCcpXG4gIC5vcHRpb24oJ3ByaW1hcnlDb2xvcicsICcjY2M2ZDAwJylcbiAgLm9wdGlvbignbGlua0NvbG9yJywgJyMwMDdkYmYnKVxuICAub3B0aW9uKCdkZWZhdWx0TW9kZScsICdzdXBwb3J0JylcbiAgLm9wdGlvbigndGFiTGFiZWwnLCAnRmVlZGJhY2sgJiBTdXBwb3J0JylcbiAgLm9wdGlvbigndGFiQ29sb3InLCAnI2NjNmQwMCcpXG4gIC5vcHRpb24oJ3RhYlBvc2l0aW9uJywgJ21pZGRsZS1yaWdodCcpXG4gIC5vcHRpb24oJ3RhYkludmVydGVkJywgZmFsc2UpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy93aWRnZXQudXNlcnZvaWNlLmNvbS97eyBhcGlLZXkgfX0uanNcIj4nKTtcblxuLyoqXG4gKiBXaGVuIGluIFwiY2xhc3NpY1wiIG1vZGUsIG9uIGBjb25zdHJ1Y3RgIHN3YXAgYWxsIG9mIHRoZSBtZXRob2QgdG8gcG9pbnQgdG9cbiAqIHRoZWlyIGNsYXNzaWMgY291bnRlcnBhcnRzLlxuICovXG5cblVzZXJWb2ljZS5vbignY29uc3RydWN0JywgZnVuY3Rpb24oaW50ZWdyYXRpb24pe1xuICBpZiAoIWludGVncmF0aW9uLm9wdGlvbnMuY2xhc3NpYykgcmV0dXJuO1xuICBpbnRlZ3JhdGlvbi5ncm91cCA9IHVuZGVmaW5lZDtcbiAgaW50ZWdyYXRpb24uaWRlbnRpZnkgPSBpbnRlZ3JhdGlvbi5pZGVudGlmeUNsYXNzaWM7XG4gIGludGVncmF0aW9uLmluaXRpYWxpemUgPSBpbnRlZ3JhdGlvbi5pbml0aWFsaXplQ2xhc3NpYztcbn0pO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Vc2VyVm9pY2UucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gIHZhciBvcHRzID0gZm9ybWF0T3B0aW9ucyhvcHRpb25zKTtcbiAgcHVzaCgnc2V0Jywgb3B0cyk7XG4gIHB1c2goJ2F1dG9wcm9tcHQnLCB7fSk7XG4gIGlmIChvcHRpb25zLnNob3dXaWRnZXQpIHtcbiAgICBvcHRpb25zLnRyaWdnZXJcbiAgICAgID8gcHVzaCgnYWRkVHJpZ2dlcicsIG9wdGlvbnMudHJpZ2dlciwgb3B0cylcbiAgICAgIDogcHVzaCgnYWRkVHJpZ2dlcicsIG9wdHMpO1xuICB9XG5cbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Vc2VyVm9pY2UucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93LlVzZXJWb2ljZSAmJiB3aW5kb3cuVXNlclZvaWNlLnB1c2ggIT09IEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5Vc2VyVm9pY2UucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKHsgY3JlYXRlZDogJ2NyZWF0ZWRfYXQnIH0pO1xuICB0cmFpdHMgPSBjb252ZXJ0RGF0ZXModHJhaXRzLCB1bml4KTtcbiAgcHVzaCgnaWRlbnRpZnknLCB0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBHcm91cC5cbiAqXG4gKiBAcGFyYW0ge0dyb3VwfSBncm91cFxuICovXG5cblVzZXJWb2ljZS5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbihncm91cCl7XG4gIHZhciB0cmFpdHMgPSBncm91cC50cmFpdHMoeyBjcmVhdGVkOiAnY3JlYXRlZF9hdCcgfSk7XG4gIHRyYWl0cyA9IGNvbnZlcnREYXRlcyh0cmFpdHMsIHVuaXgpO1xuICBwdXNoKCdpZGVudGlmeScsIHsgYWNjb3VudDogdHJhaXRzIH0pO1xufTtcblxuLyoqXG4gKiBJbml0aWFsaXplIChjbGFzc2ljKS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVhZHlcbiAqL1xuXG5Vc2VyVm9pY2UucHJvdG90eXBlLmluaXRpYWxpemVDbGFzc2ljID0gZnVuY3Rpb24oKXtcbiAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gIHdpbmRvdy5zaG93Q2xhc3NpY1dpZGdldCA9IHNob3dDbGFzc2ljV2lkZ2V0OyAvLyBwYXJ0IG9mIHB1YmxpYyBhcGlcbiAgaWYgKG9wdGlvbnMuc2hvd1dpZGdldCkgc2hvd0NsYXNzaWNXaWRnZXQoJ3Nob3dUYWInLCBmb3JtYXRDbGFzc2ljT3B0aW9ucyhvcHRpb25zKSk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkgKGNsYXNzaWMpLlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuVXNlclZvaWNlLnByb3RvdHlwZS5pZGVudGlmeUNsYXNzaWMgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHB1c2goJ3NldEN1c3RvbUZpZWxkcycsIGlkZW50aWZ5LnRyYWl0cygpKTtcbn07XG5cbi8qKlxuICogRm9ybWF0IHRoZSBvcHRpb25zIGZvciBVc2VyVm9pY2UuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRPcHRpb25zKG9wdGlvbnMpe1xuICByZXR1cm4gYWxpYXMob3B0aW9ucywge1xuICAgIGZvcnVtSWQ6ICdmb3J1bV9pZCcsXG4gICAgYWNjZW50Q29sb3I6ICdhY2NlbnRfY29sb3InLFxuICAgIHNtYXJ0dm90ZTogJ3NtYXJ0dm90ZV9lbmFibGVkJyxcbiAgICB0cmlnZ2VyQ29sb3I6ICd0cmlnZ2VyX2NvbG9yJyxcbiAgICB0cmlnZ2VyQmFja2dyb3VuZENvbG9yOiAndHJpZ2dlcl9iYWNrZ3JvdW5kX2NvbG9yJyxcbiAgICB0cmlnZ2VyUG9zaXRpb246ICd0cmlnZ2VyX3Bvc2l0aW9uJ1xuICB9KTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgdGhlIGNsYXNzaWMgb3B0aW9ucyBmb3IgVXNlclZvaWNlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0Q2xhc3NpY09wdGlvbnMob3B0aW9ucyl7XG4gIHJldHVybiBhbGlhcyhvcHRpb25zLCB7XG4gICAgZm9ydW1JZDogJ2ZvcnVtX2lkJyxcbiAgICBjbGFzc2ljTW9kZTogJ21vZGUnLFxuICAgIHByaW1hcnlDb2xvcjogJ3ByaW1hcnlfY29sb3InLFxuICAgIHRhYlBvc2l0aW9uOiAndGFiX3Bvc2l0aW9uJyxcbiAgICB0YWJDb2xvcjogJ3RhYl9jb2xvcicsXG4gICAgbGlua0NvbG9yOiAnbGlua19jb2xvcicsXG4gICAgZGVmYXVsdE1vZGU6ICdkZWZhdWx0X21vZGUnLFxuICAgIHRhYkxhYmVsOiAndGFiX2xhYmVsJyxcbiAgICB0YWJJbnZlcnRlZDogJ3RhYl9pbnZlcnRlZCdcbiAgfSk7XG59XG5cbi8qKlxuICogU2hvdyB0aGUgY2xhc3NpYyB2ZXJzaW9uIG9mIHRoZSBVc2VyVm9pY2Ugd2lkZ2V0LiBUaGlzIG1ldGhvZCBpcyB1c3VhbGx5IHBhcnRcbiAqIG9mIFVzZXJWb2ljZSBjbGFzc2ljJ3MgcHVibGljIEFQSS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAoJ3Nob3dUYWInIG9yICdzaG93TGlnaHRib3gnKVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICovXG5cbmZ1bmN0aW9uIHNob3dDbGFzc2ljV2lkZ2V0KHR5cGUsIG9wdGlvbnMpe1xuICB0eXBlID0gdHlwZSB8fCAnc2hvd0xpZ2h0Ym94JztcbiAgcHVzaCh0eXBlLCAnY2xhc3NpY193aWRnZXQnLCBvcHRpb25zKTtcbn1cbiIsIlxuLyoqXG4gKiBFeHBvc2UgYHRvVW5peFRpbWVzdGFtcGAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b1VuaXhUaW1lc3RhbXA7XG5cblxuLyoqXG4gKiBDb252ZXJ0IGEgYGRhdGVgIGludG8gYSBVbml4IHRpbWVzdGFtcC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV9XG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gdG9Vbml4VGltZXN0YW1wIChkYXRlKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKGRhdGUuZ2V0VGltZSgpIC8gMTAwMCk7XG59IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfdmVyb3EnKTtcbnZhciBjb29raWUgPSByZXF1aXJlKCdjb21wb25lbnQvY29va2llJyk7XG5cbi8qKlxuICogRXhwb3NlIGBWZXJvYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgVmVybyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ1Zlcm8nKVxuICAuZ2xvYmFsKCdfdmVyb3EnKVxuICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2QzcXhlZjRycDcwZWxtLmNsb3VkZnJvbnQubmV0L20uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXR2ZXJvL3Zlcm8tYXBpL2Jsb2IvbWFzdGVyL3NlY3Rpb25zL2pzLm1kXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5WZXJvLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIC8vIGNsZWFyIGRlZmF1bHQgY29va2llIHNvIHZlcm8gcGFyc2VzIGNvcnJlY3RseS5cbiAgLy8gdGhpcyBpcyBmb3IgdGhlIHRlc3RzLlxuICAvLyBiYXNpY2FsbHksIHRoZXkgaGF2ZSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJylcbiAgLy8gd2hpY2ggdGhlbiBzYXZlcyB0aGVpciBcImNvbW1hbmRfc3RvcmVcIiwgd2hpY2ggaXMgYW4gYXJyYXkuXG4gIC8vIHNvIHdlIGp1c3Qgd2FudCB0byBjcmVhdGUgdGhhdCBpbml0aWFsbHkgc28gd2UgY2FuIHJlbG9hZCB0aGUgdGVzdHMuXG4gIGlmICghY29va2llKCdfX3Zlcm9jNCcpKSBjb29raWUoJ19fdmVyb2M0JywgJ1tdJyk7XG4gIHB1c2goJ2luaXQnLCB7IGFwaV9rZXk6IHRoaXMub3B0aW9ucy5hcGlLZXkgfSk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuVmVyby5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX3Zlcm9xICYmIHdpbmRvdy5fdmVyb3EucHVzaCAhPT0gQXJyYXkucHJvdG90eXBlLnB1c2gpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHBzOi8vd3d3LmdldHZlcm8uY29tL2tub3dsZWRnZS1iYXNlIy9xdWVzdGlvbnMvNzE3NjgtRG9lcy1WZXJvLXRyYWNrLXBhZ2V2aWV3c1xuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cblZlcm8ucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgcHVzaCgndHJhY2tQYWdldmlldycpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ2V0dmVyby92ZXJvLWFwaS9ibG9iL21hc3Rlci9zZWN0aW9ucy9qcy5tZCN1c2VyLWlkZW50aWZpY2F0aW9uXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5WZXJvLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICB2YXIgZW1haWwgPSBpZGVudGlmeS5lbWFpbCgpO1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgaWYgKCFpZCB8fCAhZW1haWwpIHJldHVybjsgLy8gYm90aCByZXF1aXJlZFxuICBwdXNoKCd1c2VyJywgdHJhaXRzKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dldHZlcm8vdmVyby1hcGkvYmxvYi9tYXN0ZXIvc2VjdGlvbnMvanMubWQjdHJhY2tpbmctZXZlbnRzXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5WZXJvLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgcHVzaCgndHJhY2snLCB0cmFjay5ldmVudCgpLCB0cmFjay5wcm9wZXJ0aWVzKCkpO1xufTtcbiIsIi8qKlxuICogRW5jb2RlLlxuICovXG5cbnZhciBlbmNvZGUgPSBlbmNvZGVVUklDb21wb25lbnQ7XG5cbi8qKlxuICogRGVjb2RlLlxuICovXG5cbnZhciBkZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7XG5cbi8qKlxuICogU2V0IG9yIGdldCBjb29raWUgYG5hbWVgIHdpdGggYHZhbHVlYCBhbmQgYG9wdGlvbnNgIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7TWl4ZWR9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIG9wdGlvbnMpe1xuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDM6XG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuIHNldChuYW1lLCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgY2FzZSAxOlxuICAgICAgcmV0dXJuIGdldChuYW1lKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGFsbCgpO1xuICB9XG59O1xuXG4vKipcbiAqIFNldCBjb29raWUgYG5hbWVgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHNldChuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHN0ciA9IGVuY29kZShuYW1lKSArICc9JyArIGVuY29kZSh2YWx1ZSk7XG5cbiAgaWYgKG51bGwgPT0gdmFsdWUpIG9wdGlvbnMubWF4YWdlID0gLTE7XG5cbiAgaWYgKG9wdGlvbnMubWF4YWdlKSB7XG4gICAgb3B0aW9ucy5leHBpcmVzID0gbmV3IERhdGUoK25ldyBEYXRlICsgb3B0aW9ucy5tYXhhZ2UpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMucGF0aCkgc3RyICs9ICc7IHBhdGg9JyArIG9wdGlvbnMucGF0aDtcbiAgaWYgKG9wdGlvbnMuZG9tYWluKSBzdHIgKz0gJzsgZG9tYWluPScgKyBvcHRpb25zLmRvbWFpbjtcbiAgaWYgKG9wdGlvbnMuZXhwaXJlcykgc3RyICs9ICc7IGV4cGlyZXM9JyArIG9wdGlvbnMuZXhwaXJlcy50b0dNVFN0cmluZygpO1xuICBpZiAob3B0aW9ucy5zZWN1cmUpIHN0ciArPSAnOyBzZWN1cmUnO1xuXG4gIGRvY3VtZW50LmNvb2tpZSA9IHN0cjtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYWxsIGNvb2tpZXMuXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gYWxsKCkge1xuICByZXR1cm4gcGFyc2UoZG9jdW1lbnQuY29va2llKTtcbn1cblxuLyoqXG4gKiBHZXQgY29va2llIGBuYW1lYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZ2V0KG5hbWUpIHtcbiAgcmV0dXJuIGFsbCgpW25hbWVdO1xufVxuXG4vKipcbiAqIFBhcnNlIGNvb2tpZSBgc3RyYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgcGFpcnMgPSBzdHIuc3BsaXQoLyAqOyAqLyk7XG4gIHZhciBwYWlyO1xuICBpZiAoJycgPT0gcGFpcnNbMF0pIHJldHVybiBvYmo7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGFpcnMubGVuZ3RoOyArK2kpIHtcbiAgICBwYWlyID0gcGFpcnNbaV0uc3BsaXQoJz0nKTtcbiAgICBvYmpbZGVjb2RlKHBhaXJbMF0pXSA9IGRlY29kZShwYWlyWzFdKTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGljayA9IHJlcXVpcmUoJ25leHQtdGljaycpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbi8qKlxuICogRXhwb3NlIGBWV09gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBWV08gPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdWaXN1YWwgV2Vic2l0ZSBPcHRpbWl6ZXInKVxuICAub3B0aW9uKCdyZXBsYXknLCB0cnVlKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly92Mi52aXN1YWx3ZWJzaXRlb3B0aW1pemVyLmNvbS90b29scy9nZXRfdHJhY2tpbmdfY29kZS5waHBcbiAqL1xuXG5WV08ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5vcHRpb25zLnJlcGxheSkgdGhpcy5yZXBsYXkoKTtcbiAgdGhpcy5yZWFkeSgpO1xufTtcblxuLyoqXG4gKiBSZXBsYXkgdGhlIGV4cGVyaW1lbnRzIHRoZSB1c2VyIGhhcyBzZWVuIGFzIHRyYWl0cyB0byBhbGwgb3RoZXIgaW50ZWdyYXRpb25zLlxuICogV2FpdCBmb3IgdGhlIG5leHQgdGljayB0byByZXBsYXkgc28gdGhhdCB0aGUgYGFuYWx5dGljc2Agb2JqZWN0IGFuZCBhbGwgb2ZcbiAqIHRoZSBpbnRlZ3JhdGlvbnMgYXJlIGZ1bGx5IGluaXRpYWxpemVkLlxuICovXG5cblZXTy5wcm90b3R5cGUucmVwbGF5ID0gZnVuY3Rpb24oKXtcbiAgdmFyIGFuYWx5dGljcyA9IHRoaXMuYW5hbHl0aWNzO1xuICB0aWNrKGZ1bmN0aW9uKCl7XG4gICAgZXhwZXJpbWVudHMoZnVuY3Rpb24oZXJyLCB0cmFpdHMpe1xuICAgICAgaWYgKHRyYWl0cykgYW5hbHl0aWNzLmlkZW50aWZ5KHRyYWl0cyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBHZXQgZGljdGlvbmFyeSBvZiBleHBlcmltZW50IGtleXMgYW5kIHZhcmlhdGlvbnMuXG4gKlxuICogaHR0cDovL3Zpc3VhbHdlYnNpdGVvcHRpbWl6ZXIuY29tL2tub3dsZWRnZS9pbnRlZ3JhdGlvbi1vZi12d28td2l0aC1raXNzbWV0cmljcy9cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGV4cGVyaW1lbnRzKGZuKXtcbiAgZW5xdWV1ZShmdW5jdGlvbigpe1xuICAgIHZhciBkYXRhID0ge307XG4gICAgdmFyIGlkcyA9IHdpbmRvdy5fdndvX2V4cF9pZHM7XG4gICAgaWYgKCFpZHMpIHJldHVybiBmbigpO1xuICAgIGVhY2goaWRzLCBmdW5jdGlvbihpZCl7XG4gICAgICB2YXIgbmFtZSA9IHZhcmlhdGlvbihpZCk7XG4gICAgICBpZiAobmFtZSkgZGF0YVsnRXhwZXJpbWVudDogJyArIGlkXSA9IG5hbWU7XG4gICAgfSk7XG4gICAgZm4obnVsbCwgZGF0YSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEFkZCBhIGBmbmAgdG8gdGhlIFZXTyBxdWV1ZSwgY3JlYXRpbmcgb25lIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBlbnF1ZXVlKGZuKXtcbiAgd2luZG93Ll92aXNfb3B0X3F1ZXVlID0gd2luZG93Ll92aXNfb3B0X3F1ZXVlIHx8IFtdO1xuICB3aW5kb3cuX3Zpc19vcHRfcXVldWUucHVzaChmbik7XG59XG5cbi8qKlxuICogR2V0IHRoZSBjaG9zZW4gdmFyaWF0aW9uJ3MgbmFtZSBmcm9tIGFuIGV4cGVyaW1lbnQgYGlkYC5cbiAqXG4gKiBodHRwOi8vdmlzdWFsd2Vic2l0ZW9wdGltaXplci5jb20va25vd2xlZGdlL2ludGVncmF0aW9uLW9mLXZ3by13aXRoLWtpc3NtZXRyaWNzL1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHZhcmlhdGlvbihpZCl7XG4gIHZhciBleHBlcmltZW50cyA9IHdpbmRvdy5fdndvX2V4cDtcbiAgaWYgKCFleHBlcmltZW50cykgcmV0dXJuIG51bGw7XG4gIHZhciBleHBlcmltZW50ID0gZXhwZXJpbWVudHNbaWRdO1xuICB2YXIgdmFyaWF0aW9uSWQgPSBleHBlcmltZW50LmNvbWJpbmF0aW9uX2Nob3NlbjtcbiAgcmV0dXJuIHZhcmlhdGlvbklkID8gZXhwZXJpbWVudC5jb21iX25bdmFyaWF0aW9uSWRdIDogbnVsbDtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHVzZUh0dHBzID0gcmVxdWlyZSgndXNlLWh0dHBzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBXZWJFbmdhZ2VgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBXZWJFbmdhZ2UgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdXZWJFbmdhZ2UnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX3dlcScpXG4gIC5nbG9iYWwoJ3dlYmVuZ2FnZScpXG4gIC5vcHRpb24oJ3dpZGdldFZlcnNpb24nLCAnNC4wJylcbiAgLm9wdGlvbignbGljZW5zZUNvZGUnLCAnJylcbiAgLnRhZygnaHR0cCcsICc8c2NyaXB0IHNyYz1cImh0dHA6Ly9jZG4ud2lkZ2V0cy53ZWJlbmdhZ2UuY29tL2pzL3dpZGdldC93ZWJlbmdhZ2UtbWluLXYtNC4wLmpzXCI+JylcbiAgLnRhZygnaHR0cHMnLCAnPHNjcmlwdCBzcmM9XCJodHRwczovL3NzbC53aWRnZXRzLndlYmVuZ2FnZS5jb20vanMvd2lkZ2V0L3dlYmVuZ2FnZS1taW4tdi00LjAuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuV2ViRW5nYWdlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBfd2VxID0gd2luZG93Ll93ZXEgPSB3aW5kb3cuX3dlcSB8fCB7fTtcbiAgX3dlcVsnd2ViZW5nYWdlLmxpY2Vuc2VDb2RlJ10gPSB0aGlzLm9wdGlvbnMubGljZW5zZUNvZGU7XG4gIF93ZXFbJ3dlYmVuZ2FnZS53aWRnZXRWZXJzaW9uJ10gPSB0aGlzLm9wdGlvbnMud2lkZ2V0VmVyc2lvbjtcbiAgdmFyIG5hbWUgPSB1c2VIdHRwcygpID8gJ2h0dHBzJyA6ICdodHRwJztcbiAgdGhpcy5sb2FkKG5hbWUsIHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5XZWJFbmdhZ2UucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISB3aW5kb3cud2ViZW5nYWdlO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHNuYWtlID0gcmVxdWlyZSgndG8tc25ha2UtY2FzZScpO1xudmFyIGlzRW1haWwgPSByZXF1aXJlKCdpcy1lbWFpbCcpO1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJ2V4dGVuZCcpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG52YXIgdHlwZSA9IHJlcXVpcmUoJ3R5cGUnKTtcblxuLyoqXG4gKiBFeHBvc2UgYFdvb3ByYWAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIFdvb3ByYSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ1dvb3ByYScpXG4gIC5nbG9iYWwoJ3dvb3ByYScpXG4gIC5vcHRpb24oJ2RvbWFpbicsICcnKVxuICAub3B0aW9uKCdjb29raWVOYW1lJywgJ3dvb1RyYWNrZXInKVxuICAub3B0aW9uKCdjb29raWVEb21haW4nLCBudWxsKVxuICAub3B0aW9uKCdjb29raWVQYXRoJywgJy8nKVxuICAub3B0aW9uKCdwaW5nJywgdHJ1ZSlcbiAgLm9wdGlvbigncGluZ0ludGVydmFsJywgMTIwMDApXG4gIC5vcHRpb24oJ2lkbGVUaW1lb3V0JywgMzAwMDAwKVxuICAub3B0aW9uKCdkb3dubG9hZFRyYWNraW5nJywgdHJ1ZSlcbiAgLm9wdGlvbignb3V0Z29pbmdUcmFja2luZycsIHRydWUpXG4gIC5vcHRpb24oJ291dGdvaW5nSWdub3JlU3ViZG9tYWluJywgdHJ1ZSlcbiAgLm9wdGlvbignZG93bmxvYWRQYXVzZScsIDIwMClcbiAgLm9wdGlvbignb3V0Z29pbmdQYXVzZScsIDQwMClcbiAgLm9wdGlvbignaWdub3JlUXVlcnlVcmwnLCB0cnVlKVxuICAub3B0aW9uKCdoaWRlQ2FtcGFpZ24nLCBmYWxzZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL3N0YXRpYy53b29wcmEuY29tL2pzL3cuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly93d3cud29vcHJhLmNvbS9kb2NzL3NldHVwL2phdmFzY3JpcHQtdHJhY2tpbmcvXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Xb29wcmEucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgKGZ1bmN0aW9uICgpIHt2YXIgaSwgcywgeiwgdyA9IHdpbmRvdywgZCA9IGRvY3VtZW50LCBhID0gYXJndW1lbnRzLCBxID0gJ3NjcmlwdCcsIGYgPSBbJ2NvbmZpZycsICd0cmFjaycsICdpZGVudGlmeScsICd2aXNpdCcsICdwdXNoJywgJ2NhbGwnXSwgYyA9IGZ1bmN0aW9uICgpIHt2YXIgaSwgc2VsZiA9IHRoaXM7IHNlbGYuX2UgPSBbXTsgZm9yIChpID0gMDsgaSA8IGYubGVuZ3RoOyBpKyspIHsoZnVuY3Rpb24gKGYpIHtzZWxmW2ZdID0gZnVuY3Rpb24gKCkge3NlbGYuX2UucHVzaChbZl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpKTsgcmV0dXJuIHNlbGY7IH07IH0pKGZbaV0pOyB9IH07IHcuX3cgPSB3Ll93IHx8IHt9OyBmb3IgKGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykgeyB3Ll93W2FbaV1dID0gd1thW2ldXSA9IHdbYVtpXV0gfHwgbmV3IGMoKTsgfSB9KSgnd29vcHJhJyk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbiAgZWFjaCh0aGlzLm9wdGlvbnMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuICAgIGtleSA9IHNuYWtlKGtleSk7XG4gICAgaWYgKG51bGwgPT0gdmFsdWUpIHJldHVybjtcbiAgICBpZiAoJycgPT09IHZhbHVlKSByZXR1cm47XG4gICAgd2luZG93Lndvb3ByYS5jb25maWcoa2V5LCB2YWx1ZSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Xb29wcmEucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Lndvb3ByYSAmJiB3aW5kb3cud29vcHJhLmxvYWRlZCk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNhdGVnb3J5IChvcHRpb25hbClcbiAqL1xuXG5Xb29wcmEucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHByb3BzID0gcGFnZS5wcm9wZXJ0aWVzKCk7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuICBpZiAobmFtZSkgcHJvcHMudGl0bGUgPSBuYW1lO1xuICB3aW5kb3cud29vcHJhLnRyYWNrKCdwdicsIHByb3BzKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5Xb29wcmEucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKCk7XG4gIGlmIChpZGVudGlmeS5uYW1lKCkpIHRyYWl0cy5uYW1lID0gaWRlbnRpZnkubmFtZSgpO1xuICB3aW5kb3cud29vcHJhLmlkZW50aWZ5KHRyYWl0cykucHVzaCgpOyAvLyBgcHVzaGAgc2VuZHMgaXQgb2ZmIGFzeW5jXG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuV29vcHJhLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgd2luZG93Lndvb3ByYS50cmFjayh0cmFjay5ldmVudCgpLCB0cmFjay5wcm9wZXJ0aWVzKCkpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRpY2sgPSByZXF1aXJlKCduZXh0LXRpY2snKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnYmluZCcpO1xudmFyIHdoZW4gPSByZXF1aXJlKCd3aGVuJyk7XG5cbi8qKlxuICogRXhwb3NlIGBZYW5kZXhgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBZYW5kZXggPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdZYW5kZXggTWV0cmljYScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCd5YW5kZXhfbWV0cmlrYV9jYWxsYmFja3MnKVxuICAuZ2xvYmFsKCdZYScpXG4gIC5vcHRpb24oJ2NvdW50ZXJJZCcsIG51bGwpXG4gIC5vcHRpb24oJ2NsaWNrbWFwJywgZmFsc2UpXG4gIC5vcHRpb24oJ3dlYnZpc29yJywgZmFsc2UpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9tYy55YW5kZXgucnUvbWV0cmlrYS93YXRjaC5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL2FwaS55YW5kZXguY29tL21ldHJpa2EvXG4gKiBodHRwczovL21ldHJpY2EueWFuZGV4LmNvbS8yMjUyMjM1MT9zdGVwPTIjdGFiPWNvZGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbllhbmRleC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgaWQgPSB0aGlzLm9wdGlvbnMuY291bnRlcklkO1xuICB2YXIgY2xpY2ttYXAgPSB0aGlzLm9wdGlvbnMuY2xpY2ttYXA7XG4gIHZhciB3ZWJ2aXNvciA9IHRoaXMub3B0aW9ucy53ZWJ2aXNvcjtcblxuICBwdXNoKGZ1bmN0aW9uKCl7XG4gICAgd2luZG93Wyd5YUNvdW50ZXInICsgaWRdID0gbmV3IHdpbmRvdy5ZYS5NZXRyaWthKHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIGNsaWNrbWFwOiBjbGlja21hcCxcbiAgICAgIHdlYnZpc29yOiB3ZWJ2aXNvclxuICAgIH0pO1xuICB9KTtcblxuICB2YXIgbG9hZGVkID0gYmluZCh0aGlzLCB0aGlzLmxvYWRlZCk7XG4gIHZhciByZWFkeSA9IHRoaXMucmVhZHk7XG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIHdoZW4obG9hZGVkLCBmdW5jdGlvbigpe1xuICAgICAgdGljayhyZWFkeSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5ZYW5kZXgucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93LllhICYmIHdpbmRvdy5ZYS5NZXRyaWthKTtcbn07XG5cbi8qKlxuICogUHVzaCBhIG5ldyBjYWxsYmFjayBvbiB0aGUgZ2xvYmFsIFlhbmRleCBxdWV1ZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICovXG5cbmZ1bmN0aW9uIHB1c2goY2FsbGJhY2spe1xuICB3aW5kb3cueWFuZGV4X21ldHJpa2FfY2FsbGJhY2tzID0gd2luZG93LnlhbmRleF9tZXRyaWthX2NhbGxiYWNrcyB8fCBbXTtcbiAgd2luZG93LnlhbmRleF9tZXRyaWthX2NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBjbGVhckFqYXggPSByZXF1aXJlKCdjbGVhci1hamF4Jyk7XG52YXIgY2xlYXJUaW1lb3V0cyA9IHJlcXVpcmUoJ2NsZWFyLXRpbWVvdXRzJyk7XG52YXIgY2xlYXJJbnRlcnZhbHMgPSByZXF1aXJlKCdjbGVhci1pbnRlcnZhbHMnKTtcbnZhciBjbGVhckxpc3RlbmVycyA9IHJlcXVpcmUoJ2NsZWFyLWxpc3RlbmVycycpO1xudmFyIGNsZWFyR2xvYmFscyA9IHJlcXVpcmUoJ2NsZWFyLWdsb2JhbHMnKTtcbnZhciBjbGVhckltYWdlcyA9IHJlcXVpcmUoJ2NsZWFyLWltYWdlcycpO1xudmFyIGNsZWFyU2NyaXB0cyA9IHJlcXVpcmUoJ2NsZWFyLXNjcmlwdHMnKTtcbnZhciBjbGVhckNvb2tpZXMgPSByZXF1aXJlKCdjbGVhci1jb29raWVzJyk7XG5cbi8qKlxuICogUmVzZXQgaW5pdGlhbCBzdGF0ZS5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtcbiAgY2xlYXJBamF4KCk7XG4gIGNsZWFyVGltZW91dHMoKTtcbiAgY2xlYXJJbnRlcnZhbHMoKTtcbiAgY2xlYXJMaXN0ZW5lcnMoKTtcbiAgY2xlYXJHbG9iYWxzKCk7XG4gIGNsZWFySW1hZ2VzKCk7XG4gIGNsZWFyU2NyaXB0cygpO1xuICBjbGVhckNvb2tpZXMoKTtcbn07IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbi8qKlxuICogT3JpZ2luYWwgc2VuZCBtZXRob2QuXG4gKi9cblxudmFyIHNlbmQgPSBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuc2VuZDtcblxuLyoqXG4gKiBSZXF1ZXN0cyBtYWRlLlxuICovXG5cbnZhciByZXF1ZXN0cyA9IFtdO1xuXG4vKipcbiAqIENsZWFyIGFsbCBhY3RpdmUgQUpBWCByZXF1ZXN0cy5cbiAqIFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpe1xuICBlYWNoKHJlcXVlc3RzLCBmdW5jdGlvbihyZXF1ZXN0KXtcbiAgICB0cnkge1xuICAgICAgcmVxdWVzdC5vbmxvYWQgPSBub29wO1xuICAgICAgcmVxdWVzdC5vbmVycm9yID0gbm9vcDtcbiAgICAgIHJlcXVlc3Qub25hYm9ydCA9IG5vb3A7XG4gICAgICByZXF1ZXN0LmFib3J0KCk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfSk7XG4gIHJlcXVlc3RzLmxlbmd0aCA9IFtdO1xufTtcblxuLyoqXG4gKiBDYXB0dXJlIEFKQVggcmVxdWVzdHMuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmJpbmQgPSBmdW5jdGlvbigpe1xuICBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKCl7XG4gICAgcmVxdWVzdHMucHVzaCh0aGlzKTtcbiAgICByZXR1cm4gc2VuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufTtcblxuLyoqXG4gKiBSZXNldCBgWE1MSHR0cFJlcXVlc3RgIGJhY2sgdG8gbm9ybWFsLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy51bmJpbmQgPSBmdW5jdGlvbigpe1xuICBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuc2VuZCA9IHNlbmQ7XG59O1xuXG4vKipcbiAqIEF1dG9tYXRpY2FsbHkgYmluZC5cbiAqL1xuXG5leHBvcnRzLmJpbmQoKTtcblxuLyoqXG4gKiBOb29wLlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIG5vb3AoKXt9IiwiXG4vKipcbiAqIFByZXZpb3VzXG4gKi9cblxudmFyIHByZXYgPSAwO1xuXG4vKipcbiAqIE5vb3BcbiAqL1xuXG52YXIgbm9vcCA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcblxuLyoqXG4gKiBDbGVhciBhbGwgdGltZW91dHNcbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtcbiAgdmFyIHRtcCwgaTtcbiAgdG1wID0gaSA9IHNldFRpbWVvdXQobm9vcCk7XG4gIHdoaWxlIChwcmV2IDwgaSkgY2xlYXJUaW1lb3V0KGktLSk7XG4gIHByZXYgPSB0bXA7XG59O1xuIiwiXG4vKipcbiAqIFByZXZcbiAqL1xuXG52YXIgcHJldiA9IDA7XG5cbi8qKlxuICogTm9vcFxuICovXG5cbnZhciBub29wID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuXG4vKipcbiAqIENsZWFyIGFsbCBpbnRlcnZhbHMuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7XG4gIHZhciB0bXAsIGk7XG4gIHRtcCA9IGkgPSBzZXRJbnRlcnZhbChub29wKTtcbiAgd2hpbGUgKHByZXYgPCBpKSBjbGVhckludGVydmFsKGktLSk7XG4gIHByZXYgPSB0bXA7XG59O1xuIiwiXG4vKipcbiAqIFdpbmRvdyBldmVudCBsaXN0ZW5lcnMuXG4gKi9cblxudmFyIGxpc3RlbmVycyA9IFtdO1xuXG4vKipcbiAqIE9yaWdpbmFsIHdpbmRvdyBmdW5jdGlvbnMuXG4gKi9cblxudmFyIG9uID0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPyAnYWRkRXZlbnRMaXN0ZW5lcicgOiAnYXR0YWNoRXZlbnQnO1xudmFyIG9mZiA9IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyID8gJ3JlbW92ZUV2ZW50TGlzdGVuZXInIDogJ2RldGFjaEV2ZW50JztcbnZhciBvbkZuID0gd2luZG93W29uXTtcbnZhciBvZmZGbiA9IHdpbmRvd1tvZmZdO1xuXG4vKipcbiAqIENsZWFyIGV2ZW50IGxpc3RlbmVycy5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBpID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHdpbmRvd1tvbl0uYXBwbHlcbiAgICAgID8gd2luZG93W29uXS5hcHBseSh3aW5kb3csIGxpc3RlbmVyc1tpXSlcbiAgICAgIDogd2luZG93W29uXShsaXN0ZW5lcnNbaV1bMF0sIGxpc3RlbmVyc1tpXVsxXSk7IC8vIElFXG4gIH1cbiAgbGlzdGVuZXJzLmxlbmd0aCA9IDA7XG59O1xuXG4vKipcbiAqIFdyYXAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgYW5kIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyXG4gKiB0byBiZSBhYmxlIHRvIGNsZWFudXAgYWxsIGV2ZW50IGxpc3RlbmVycyBmb3IgdGVzdGluZy5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuYmluZCA9IGZ1bmN0aW9uKCl7XG4gIHdpbmRvd1tvbl0gPSBmdW5jdGlvbigpe1xuICAgIGxpc3RlbmVycy5wdXNoKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIG9uRm4uYXBwbHlcbiAgICAgID8gb25Gbi5hcHBseSh3aW5kb3csIGFyZ3VtZW50cylcbiAgICAgIDogb25Gbihhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSk7IC8vIElFXG4gIH07XG5cbiAgd2luZG93W29mZl0gPSBmdW5jdGlvbihuYW1lLCBsaXN0ZW5lciwgdXNlQ2FwdHVyZSl7XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZiAobmFtZSAhPT0gbGlzdGVuZXJzW2ldWzBdKSBjb250aW51ZTtcbiAgICAgIGlmIChsaXN0ZW5lciAhPT0gbGlzdGVuZXJzW2ldWzFdKSBjb250aW51ZTtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMiAmJiB1c2VDYXB0dXJlICE9PSBsaXN0ZW5lcnNbaV1bMl0pIGNvbnRpbnVlO1xuICAgICAgbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gb2ZmRm4uYXBwbHlcbiAgICAgID8gb2ZmRm4uYXBwbHkod2luZG93LCBhcmd1bWVudHMpXG4gICAgICA6IG9mZkZuKGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdKTsgLy8gSUVcbiAgfTtcbn07XG5cblxuLyoqXG4gKiBSZXNldCB3aW5kb3cgYmFjayB0byBub3JtYWwuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnVuYmluZCA9IGZ1bmN0aW9uKCl7XG4gIGxpc3RlbmVycy5sZW5ndGggPSAwO1xuICB3aW5kb3dbb25dID0gb25GbjtcbiAgd2luZG93W29mZl0gPSBvZmZGbjtcbn07XG5cbi8qKlxuICogQXV0b21hdGljYWxseSBvdmVycmlkZS5cbiAqL1xuXG5leHBvcnRzLmJpbmQoKTsiLCJcbi8qKlxuICogT2JqZWN0cyB3ZSB3YW50IHRvIGtlZXAgdHJhY2sgb2YgaW5pdGlhbCBwcm9wZXJ0aWVzIGZvci5cbiAqL1xuXG52YXIgZ2xvYmFscyA9IHtcbiAgJ3dpbmRvdyc6IHt9LFxuICAnZG9jdW1lbnQnOiB7fSxcbiAgJ1hNTEh0dHBSZXF1ZXN0Jzoge31cbn07XG5cbi8qKlxuICogQ2FwdHVyZSBpbml0aWFsIHN0YXRlIG9mIGB3aW5kb3dgLlxuICpcbiAqIE5vdGUsIGB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcmAgaXMgb3ZlcnJpdHRlbiBhbHJlYWR5LFxuICogZnJvbSBgY2xlYXJMaXN0ZW5lcnNgLiBCdXQgdGhpcyBpcyBkZXNpcmVkIGJlaGF2aW9yLlxuICovXG5cbmdsb2JhbHMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgPSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbmdsb2JhbHMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcjtcbmdsb2JhbHMud2luZG93LnNldFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dDtcbmdsb2JhbHMud2luZG93LnNldEludGVydmFsID0gd2luZG93LnNldEludGVydmFsO1xuZ2xvYmFscy53aW5kb3cub25lcnJvciA9IG51bGw7XG5nbG9iYWxzLndpbmRvdy5vbmxvYWQgPSBudWxsO1xuXG4vKipcbiAqIENhcHR1cmUgaW5pdGlhbCBzdGF0ZSBvZiBgZG9jdW1lbnRgLlxuICovXG5cbmdsb2JhbHMuZG9jdW1lbnQud3JpdGUgPSBkb2N1bWVudC53cml0ZTtcbmdsb2JhbHMuZG9jdW1lbnQuYXBwZW5kQ2hpbGQgPSBkb2N1bWVudC5hcHBlbmRDaGlsZDtcbmdsb2JhbHMuZG9jdW1lbnQucmVtb3ZlQ2hpbGQgPSBkb2N1bWVudC5yZW1vdmVDaGlsZDtcblxuLyoqXG4gKiBDYXB0dXJlIHRoZSBpbml0aWFsIHN0YXRlIG9mIGBYTUxIdHRwUmVxdWVzdGAuXG4gKi9cblxuaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiBYTUxIdHRwUmVxdWVzdCkge1xuICBnbG9iYWxzLlhNTEh0dHBSZXF1ZXN0Lm9wZW4gPSBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3Blbjtcbn1cblxuLyoqXG4gKiBSZXNldCBpbml0aWFsIHN0YXRlLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpe1xuICBjb3B5KGdsb2JhbHMud2luZG93LCB3aW5kb3cpO1xuICBjb3B5KGdsb2JhbHMuWE1MSHR0cFJlcXVlc3QsIFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSk7XG4gIGNvcHkoZ2xvYmFscy5kb2N1bWVudCwgZG9jdW1lbnQpO1xufTtcblxuLyoqXG4gKiBSZXNldCBwcm9wZXJ0aWVzIG9uIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBjb3B5KHNvdXJjZSwgdGFyZ2V0KXtcbiAgZm9yICh2YXIgbmFtZSBpbiBzb3VyY2UpIHtcbiAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICB0YXJnZXRbbmFtZV0gPSBzb3VyY2VbbmFtZV07XG4gICAgfVxuICB9XG59IiwiXG4vKipcbiAqIENyZWF0ZWQgaW1hZ2VzLlxuICovXG5cbnZhciBpbWFnZXMgPSBbXTtcblxuLyoqXG4gKiBLZWVwIHRyYWNrIG9mIG9yaWdpbmFsIGBJbWFnZWAuXG4gKi9cblxudmFyIE9yaWdpbmFsID0gd2luZG93LkltYWdlO1xuXG4vKipcbiAqIEltYWdlIG92ZXJyaWRlIHRoYXQga2VlcHMgdHJhY2sgb2YgaW1hZ2VzLlxuICpcbiAqIENhcmVmdWwgdGhvdWdoLCBgaW1nIGluc3RhbmNlIE92ZXJyaWRlYCBpc24ndCB0cnVlLlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIE92ZXJyaWRlKCkge1xuICB2YXIgaW1nID0gbmV3IE9yaWdpbmFsO1xuICBpbWFnZXMucHVzaChpbWcpO1xuICByZXR1cm4gaW1nO1xufVxuXG4vKipcbiAqIENsZWFyIGBvbmxvYWRgIGZvciBlYWNoIGltYWdlLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtcbiAgdmFyIG5vb3AgPSBmdW5jdGlvbigpe307XG4gIGZvciAodmFyIGkgPSAwLCBuID0gaW1hZ2VzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIGltYWdlc1tpXS5vbmxvYWQgPSBub29wO1xuICB9XG4gIGltYWdlcy5sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBPdmVycmlkZSBgd2luZG93LkltYWdlYCB0byBrZWVwIHRyYWNrIG9mIGltYWdlcyxcbiAqIHNvIHdlIGNhbiBjbGVhciBgb25sb2FkYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuYmluZCA9IGZ1bmN0aW9uKCl7XG4gIHdpbmRvdy5JbWFnZSA9IE92ZXJyaWRlO1xufTtcblxuLyoqXG4gKiBTZXQgYHdpbmRvdy5JbWFnZWAgYmFjayB0byBub3JtYWwuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnVuYmluZCA9IGZ1bmN0aW9uKCl7XG4gIHdpbmRvdy5JbWFnZSA9IE9yaWdpbmFsO1xuICBpbWFnZXMubGVuZ3RoID0gMDtcbn07XG5cbi8qKlxuICogQXV0b21hdGljYWxseSBvdmVycmlkZS5cbiAqL1xuXG5leHBvcnRzLmJpbmQoKTsiLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW5kZXhPZiA9IHJlcXVpcmUoJ2luZGV4b2YnKTtcbnZhciBxdWVyeSA9IHJlcXVpcmUoJ3F1ZXJ5Jyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcblxuLyoqXG4gKiBJbml0aWFsIHNjcmlwdHMuXG4gKi9cblxudmFyIGluaXRpYWxTY3JpcHRzID0gW107XG5cbi8qKlxuICogUmVtb3ZlIGFsbCBzY3JpcHRzIG5vdCBpbml0aWFsbHkgcHJlc2VudC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbbWF0Y2hdIE9ubHkgcmVtb3ZlIG9uZXMgdGhhdCByZXR1cm4gdHJ1ZVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtYXRjaCl7XG4gIG1hdGNoID0gbWF0Y2ggfHwgc2F1Y2VsYWJzO1xuICB2YXIgZmluYWxTY3JpcHRzID0gcXVlcnkuYWxsKCdzY3JpcHQnKTtcbiAgZWFjaChmaW5hbFNjcmlwdHMsIGZ1bmN0aW9uKHNjcmlwdCl7XG4gICAgaWYgKC0xICE9IGluZGV4T2YoaW5pdGlhbFNjcmlwdHMsIHNjcmlwdCkpIHJldHVybjtcbiAgICBpZiAoIXNjcmlwdC5wYXJlbnROb2RlKSByZXR1cm47XG4gICAgaWYgKCFtYXRjaChzY3JpcHQpKSByZXR1cm47XG4gICAgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENhcHR1cmUgaW5pdGlhbCBzY3JpcHRzLCB0aGUgb25lcyBub3QgdG8gcmVtb3ZlLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5iaW5kID0gZnVuY3Rpb24oc2NyaXB0cyl7XG4gIGluaXRpYWxTY3JpcHRzID0gc2NyaXB0cyB8fCBxdWVyeS5hbGwoJ3NjcmlwdCcpO1xufTtcblxuLyoqXG4gKiBEZWZhdWx0IG1hdGNoaW5nIGZ1bmN0aW9uLCBpZ25vcmVzIHNhdWNlbGFicyBqc29ucCBzY3JpcHRzLlxuICpcbiAqIEBwYXJhbSB7U2NyaXB0fSBzY3JpcHRcbiAqIEBhcGkgcHJpdmF0ZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBzYXVjZWxhYnMoc2NyaXB0KSB7XG4gIHJldHVybiAhc2NyaXB0LnNyYy5tYXRjaCgvbG9jYWx0dW5uZWxcXC5tZVxcL3NhdWNlbGFicy8pO1xufTtcblxuLyoqXG4gKiBBdXRvbWF0aWNhbGx5IGJpbmQuXG4gKi9cblxuZXhwb3J0cy5iaW5kKCk7IiwiZnVuY3Rpb24gb25lKHNlbGVjdG9yLCBlbCkge1xuICByZXR1cm4gZWwucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59XG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBlbCl7XG4gIGVsID0gZWwgfHwgZG9jdW1lbnQ7XG4gIHJldHVybiBvbmUoc2VsZWN0b3IsIGVsKTtcbn07XG5cbmV4cG9ydHMuYWxsID0gZnVuY3Rpb24oc2VsZWN0b3IsIGVsKXtcbiAgZWwgPSBlbCB8fCBkb2N1bWVudDtcbiAgcmV0dXJuIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xufTtcblxuZXhwb3J0cy5lbmdpbmUgPSBmdW5jdGlvbihvYmope1xuICBpZiAoIW9iai5vbmUpIHRocm93IG5ldyBFcnJvcignLm9uZSBjYWxsYmFjayByZXF1aXJlZCcpO1xuICBpZiAoIW9iai5hbGwpIHRocm93IG5ldyBFcnJvcignLmFsbCBjYWxsYmFjayByZXF1aXJlZCcpO1xuICBvbmUgPSBvYmoub25lO1xuICBleHBvcnRzLmFsbCA9IG9iai5hbGw7XG4gIHJldHVybiBleHBvcnRzO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBjb29raWUgPSByZXF1aXJlKCdjb29raWUnKTtcblxuLyoqXG4gKiBDbGVhciBjb29raWVzLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtcbiAgdmFyIGNvb2tpZXMgPSBjb29raWUoKTtcbiAgZm9yICh2YXIgbmFtZSBpbiBjb29raWVzKSB7XG4gICAgY29va2llKG5hbWUsICcnLCB7IHBhdGg6ICcvJyB9KTtcbiAgfVxufTsiLCJcbi8qKlxuICogRE9OJ1QgRURJVCBUSElTIEZJTEUuIEl0J3MgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQhXG4gKi9cblxucmVxdWlyZSgnLi4vbGliL2Fkcm9sbC90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvYWR3b3Jkcy90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvYWxleGEvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2FtcGxpdHVkZS90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvYXBwY3Vlcy90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvYXdlc20vdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2F3ZXNvbWF0aWMvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2JpbmctYWRzL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9icm9udG8vdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2J1Z2hlcmQvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2J1Z3NuYWcvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2NoYXJ0YmVhdC90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvY2h1cm5iZWUvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2NsaWNrdGFsZS90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvY2xpY2t5L3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9jb21zY29yZS90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvY3JhenktZWdnL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9jdXJlYml0L3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9jdXN0b21lcmlvL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9kcmlwL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9lcnJvcmNlcHRpb24vdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2V2ZXJnYWdlL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9mYWNlYm9vay1jb252ZXJzaW9uLXRyYWNraW5nL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9mb3htZXRyaWNzL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9mcm9udGxlYWYvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2Z1bGxzdG9yeS90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvZ2F1Z2VzL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9nZXQtc2F0aXNmYWN0aW9uL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9nb29nbGUtYW5hbHl0aWNzL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9nb29nbGUtdGFnLW1hbmFnZXIvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2dvc3F1YXJlZC90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvaGVhcC90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvaGVsbG9iYXIvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2hpdHRhaWwvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2h1YnNwb3QvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2ltcHJvdmVseS90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvaW5zaWRldmF1bHQvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2luc3BlY3RsZXQvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2ludGVyY29tL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9rZWVuLWlvL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9rZW5zaG9vL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9raXNzbWV0cmljcy90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIva2xhdml5by90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvbGVhZGxhbmRlci90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvbGl2ZWNoYXQvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL2x1Y2t5LW9yYW5nZS90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvbHl0aWNzL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9taXhwYW5lbC90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvbW9qbi90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvbW91c2VmbG93L3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9tb3VzZXN0YXRzL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9uYXZpbHl0aWNzL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9vbGFyay90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvb3B0aW1pemVseS90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvcGVyZmVjdC1hdWRpZW5jZS90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvcGluZ2RvbS90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvcGl3aWsvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL3ByZWFjdC90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvcXVhbGFyb28vdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL3F1YW50Y2FzdC90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvcm9sbGJhci90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvc2Fhc3F1YXRjaC90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvc2VudHJ5L3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9zbmFwZW5nYWdlL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi9zcGlubmFrci90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvdGFwc3RyZWFtL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi90cmFraW8vdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL3R3aXR0ZXItYWRzL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi91c2Vydm9pY2UvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL3Zlcm8vdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL3Zpc3VhbC13ZWJzaXRlLW9wdGltaXplci90ZXN0LmpzJyk7XG5yZXF1aXJlKCcuLi9saWIvd2ViZW5nYWdlL3Rlc3QuanMnKTtcbnJlcXVpcmUoJy4uL2xpYi93b29wcmEvdGVzdC5qcycpO1xucmVxdWlyZSgnLi4vbGliL3lhbmRleC1tZXRyaWNhL3Rlc3QuanMnKTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnQWRSb2xsJywgZnVuY3Rpb24oKXtcbiAgdmFyIEFkUm9sbCA9IHBsdWdpbjtcbiAgdmFyIGFkcm9sbDtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgYWR2SWQ6ICdMWUZSQ1VJUFBaQ0NUT0JHUkg3RzMyJyxcbiAgICBwaXhJZDogJ1Y3VExYTDVXV0JBNU5PVTVNT0pRVzQnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgYWRyb2xsID0gbmV3IEFkUm9sbChvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoYWRyb2xsKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBhZHJvbGwucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKEFkUm9sbCwgaW50ZWdyYXRpb24oJ0FkUm9sbCcpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ19fYWRyb2xsX2xvYWRlZCcpXG4gICAgICAuZ2xvYmFsKCdhZHJvbGxfYWR2X2lkJylcbiAgICAgIC5nbG9iYWwoJ2Fkcm9sbF9waXhfaWQnKVxuICAgICAgLmdsb2JhbCgnYWRyb2xsX2N1c3RvbV9kYXRhJylcbiAgICAgIC5vcHRpb24oJ2FkdklkJywgJycpXG4gICAgICAub3B0aW9uKCdwaXhJZCcsICcnKVxuICAgICAgLm1hcHBpbmcoJ2V2ZW50cycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihhZHJvbGwsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFkcm9sbC5yZXNldCgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0aGUgYWRyb2xsIHZhcmlhYmxlcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5lcXVhbCh3aW5kb3cuYWRyb2xsX2Fkdl9pZCwgb3B0aW9ucy5hZHZJZCk7XG4gICAgICAgIGFuYWx5dGljcy5lcXVhbCh3aW5kb3cuYWRyb2xsX3BpeF9pZCwgb3B0aW9ucy5waXhJZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZXQgd2luZG93Ll9fYWRyb2xsX2xvYWRlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Ll9fYWRyb2xsX2xvYWRlZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChhZHJvbGwubG9hZCk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJ3dpdGggdXNlcicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudXNlcigpLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIG5vdCBzZXQgYSB1c2VyIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93LmFkcm9sbF9jdXN0b21fZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGFkcm9sbCwgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fX2Fkcm9sbCwgJ3JlY29yZF91c2VyJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBwYWdlIHZpZXcgd2l0aCBmdWxsTmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9fYWRyb2xsLnJlY29yZF91c2VyLCB7XG4gICAgICAgICAgYWRyb2xsX3NlZ21lbnRzOiAndmlld2VkX2NhdGVnb3J5X25hbWVfcGFnZSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayB1bm5hbWVkL2NhdGVnb3JpemVkIHBhZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fX2Fkcm9sbC5yZWNvcmRfdXNlciwge1xuICAgICAgICAgIGFkcm9sbF9zZWdtZW50czogJ2xvYWRlZF9hX3BhZ2UnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgdW5uYW1lZCBwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX19hZHJvbGwucmVjb3JkX3VzZXIsIHtcbiAgICAgICAgICBhZHJvbGxfc2VnbWVudHM6ICd2aWV3ZWRfbmFtZV9wYWdlJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIHVuY2F0ZWdvcml6ZWQgcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9fYWRyb2xsLnJlY29yZF91c2VyLCB7XG4gICAgICAgICAgYWRyb2xsX3NlZ21lbnRzOiAndmlld2VkX25hbWVfcGFnZSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX19hZHJvbGwsICdyZWNvcmRfdXNlcicpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc25ha2UgY2FzZSBldmVudCBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdFdmVudCBBJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9fYWRyb2xsLnJlY29yZF91c2VyLCB7XG4gICAgICAgICAgYWRyb2xsX3NlZ21lbnRzOiAnZXZlbnRfYSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJ2V2ZW50IG5vdCBpbiBldmVudHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgZXZlbnRzIHdpdGggb25seSBhZHJvbGxfc2VnbWVudHMnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7fSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX19hZHJvbGwucmVjb3JkX3VzZXIsIHtcbiAgICAgICAgICAgIGFkcm9sbF9zZWdtZW50czogJ2V2ZW50J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgZXZlbnRzIHdpdGhvdXQgcmV2ZW51ZSBhbmQgb3JkZXIgaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHJldmVudWU6IDMuOTkgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX19hZHJvbGwucmVjb3JkX3VzZXIsIHtcbiAgICAgICAgICAgIGFkcm9sbF9zZWdtZW50czogJ2V2ZW50J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHBhc3MgdXNlciBpZCBpbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnVzZXIoKS5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyByZXZlbnVlOiAzLjk5IH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9fYWRyb2xsLnJlY29yZF91c2VyLCB7XG4gICAgICAgICAgICBhZHJvbGxfc2VnbWVudHM6ICdldmVudCcsXG4gICAgICAgICAgICB1c2VyX2lkOiAnaWQnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCdldmVudCBpbiBldmVudHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYWRyb2xsLm9wdGlvbnMuZXZlbnRzID0geyBldmVudDogJ3NlZ21lbnQnIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcGFzcyBpbiByZXZlbnVlIGFuZCBvcmRlciBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgdG90YWw6IDEuOTksIG9yZGVySWQ6IDEgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX19hZHJvbGwucmVjb3JkX3VzZXIsIHtcbiAgICAgICAgICAgIGFkcm9sbF9zZWdtZW50czogJ3NlZ21lbnQnLFxuICAgICAgICAgICAgYWRyb2xsX2NvbnZlcnNpb25fdmFsdWVfaW5fZG9sbGFyczogMS45OSxcbiAgICAgICAgICAgIG9yZGVyX2lkOiAxXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcGFzcyAucmV2ZW51ZSBhcyBjb252ZXJzaW9uIHZhbHVlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyByZXZlbnVlOiAyLjk5IH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9fYWRyb2xsLnJlY29yZF91c2VyLCB7XG4gICAgICAgICAgICBhZHJvbGxfc2VnbWVudHM6ICdzZWdtZW50JyxcbiAgICAgICAgICAgIGFkcm9sbF9jb252ZXJzaW9uX3ZhbHVlX2luX2RvbGxhcnM6IDIuOTksXG4gICAgICAgICAgICBvcmRlcl9pZDogMFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGluY2x1ZGUgdGhlIHVzZXJfaWQgd2hlbiBhdmFpbGFibGUnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy51c2VyKCkuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgcmV2ZW51ZTogMy45OSB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fX2Fkcm9sbC5yZWNvcmRfdXNlciwge1xuICAgICAgICAgICAgYWRyb2xsX3NlZ21lbnRzOiAnc2VnbWVudCcsXG4gICAgICAgICAgICBhZHJvbGxfY29udmVyc2lvbl92YWx1ZV9pbl9kb2xsYXJzOiAzLjk5LFxuICAgICAgICAgICAgb3JkZXJfaWQ6IDAsXG4gICAgICAgICAgICB1c2VyX2lkOiAnaWQnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc3VwcG9ydCBhcnJheSBldmVudHMnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFkcm9sbC5vcHRpb25zLmV2ZW50cyA9IFt7IGtleTogJ2V2ZW50JywgdmFsdWU6ICdwaXhlbCcgfV07XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgdG90YWw6IDIuOTksIG9yZGVySWQ6IDIgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX19hZHJvbGwucmVjb3JkX3VzZXIsIHtcbiAgICAgICAgICAgIGFkcm9sbF9zZWdtZW50czogJ3BpeGVsJyxcbiAgICAgICAgICAgIGFkcm9sbF9jb252ZXJzaW9uX3ZhbHVlX2luX2RvbGxhcnM6IDIuOTksXG4gICAgICAgICAgICBvcmRlcl9pZDogMlxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHRyYWNrIG11bHRpcGxlIGV2ZW50cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYWRyb2xsLm9wdGlvbnMuZXZlbnRzID0gW3sga2V5OiAnZXZlbnQnLCB2YWx1ZTogJ29uZScgfV07XG4gICAgICAgICAgYWRyb2xsLm9wdGlvbnMuZXZlbnRzLnB1c2goeyBrZXk6ICdldmVudCcsIHZhbHVlOiAndHdvJyB9KTtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyB0b3RhbDogMi45OSwgb3JkZXJJZDogMiB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkVHdpY2Uod2luZG93Ll9fYWRyb2xsLnJlY29yZF91c2VyKTtcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG4vKipcbiAqIEFuYWx5dGljcy5qc1xuICpcbiAqIChDKSAyMDEzIFNlZ21lbnQuaW8gSW5jLlxuICovXG5cbnZhciBJbnRlZ3JhdGlvbnMgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb25zJyk7XG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnLi9hbmFseXRpY3MnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xuXG5cbi8qKlxuICogRXhwb3NlIHRoZSBgYW5hbHl0aWNzYCBzaW5nbGV0b24uXG4gKi9cblxudmFyIGFuYWx5dGljcyA9IG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IG5ldyBBbmFseXRpY3MoKTtcblxuLyoqXG4gKiBFeHBvc2UgcmVxdWlyZVxuICovXG5cbmFuYWx5dGljcy5yZXF1aXJlID0gcmVxdWlyZTtcblxuLyoqXG4gKiBFeHBvc2UgYFZFUlNJT05gLlxuICovXG5cbmV4cG9ydHMuVkVSU0lPTiA9IHJlcXVpcmUoJy4vdmVyc2lvbicpO1xuXG4vKipcbiAqIEFkZCBpbnRlZ3JhdGlvbnMuXG4gKi9cblxuZWFjaChJbnRlZ3JhdGlvbnMsIGZ1bmN0aW9uIChuYW1lLCBJbnRlZ3JhdGlvbikge1xuICBhbmFseXRpY3MudXNlKEludGVncmF0aW9uKTtcbn0pO1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG52YXIgcGx1Z2lucyA9IHJlcXVpcmUoJy4vaW50ZWdyYXRpb25zLmpzJyk7XG5cbi8qKlxuICogRXhwb3NlIHRoZSBpbnRlZ3JhdGlvbnMsIHVzaW5nIHRoZWlyIG93biBgbmFtZWAgZnJvbSB0aGVpciBgcHJvdG90eXBlYC5cbiAqL1xuXG5lYWNoKHBsdWdpbnMsIGZ1bmN0aW9uKHBsdWdpbil7XG4gIHZhciBuYW1lID0gKHBsdWdpbi5JbnRlZ3JhdGlvbiB8fCBwbHVnaW4pLnByb3RvdHlwZS5uYW1lO1xuICBleHBvcnRzW25hbWVdID0gcGx1Z2luO1xufSk7XG5cblxuIiwiXG4vKipcbiAqIERPTidUIEVESVQgVEhJUyBGSUxFLiBJdCdzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gW1xuICByZXF1aXJlKCcuL2xpYi9hZHJvbGwnKSxcbiAgcmVxdWlyZSgnLi9saWIvYWR3b3JkcycpLFxuICByZXF1aXJlKCcuL2xpYi9hbGV4YScpLFxuICByZXF1aXJlKCcuL2xpYi9hbXBsaXR1ZGUnKSxcbiAgcmVxdWlyZSgnLi9saWIvYXBwY3VlcycpLFxuICByZXF1aXJlKCcuL2xpYi9hd2VzbScpLFxuICByZXF1aXJlKCcuL2xpYi9hd2Vzb21hdGljJyksXG4gIHJlcXVpcmUoJy4vbGliL2JpbmctYWRzJyksXG4gIHJlcXVpcmUoJy4vbGliL2Jyb250bycpLFxuICByZXF1aXJlKCcuL2xpYi9idWdoZXJkJyksXG4gIHJlcXVpcmUoJy4vbGliL2J1Z3NuYWcnKSxcbiAgcmVxdWlyZSgnLi9saWIvY2hhcnRiZWF0JyksXG4gIHJlcXVpcmUoJy4vbGliL2NodXJuYmVlJyksXG4gIHJlcXVpcmUoJy4vbGliL2NsaWNrdGFsZScpLFxuICByZXF1aXJlKCcuL2xpYi9jbGlja3knKSxcbiAgcmVxdWlyZSgnLi9saWIvY29tc2NvcmUnKSxcbiAgcmVxdWlyZSgnLi9saWIvY3JhenktZWdnJyksXG4gIHJlcXVpcmUoJy4vbGliL2N1cmViaXQnKSxcbiAgcmVxdWlyZSgnLi9saWIvY3VzdG9tZXJpbycpLFxuICByZXF1aXJlKCcuL2xpYi9kcmlwJyksXG4gIHJlcXVpcmUoJy4vbGliL2Vycm9yY2VwdGlvbicpLFxuICByZXF1aXJlKCcuL2xpYi9ldmVyZ2FnZScpLFxuICByZXF1aXJlKCcuL2xpYi9mYWNlYm9vay1jb252ZXJzaW9uLXRyYWNraW5nJyksXG4gIHJlcXVpcmUoJy4vbGliL2ZveG1ldHJpY3MnKSxcbiAgcmVxdWlyZSgnLi9saWIvZnJvbnRsZWFmJyksXG4gIHJlcXVpcmUoJy4vbGliL2Z1bGxzdG9yeScpLFxuICByZXF1aXJlKCcuL2xpYi9nYXVnZXMnKSxcbiAgcmVxdWlyZSgnLi9saWIvZ2V0LXNhdGlzZmFjdGlvbicpLFxuICByZXF1aXJlKCcuL2xpYi9nb29nbGUtYW5hbHl0aWNzJyksXG4gIHJlcXVpcmUoJy4vbGliL2dvb2dsZS10YWctbWFuYWdlcicpLFxuICByZXF1aXJlKCcuL2xpYi9nb3NxdWFyZWQnKSxcbiAgcmVxdWlyZSgnLi9saWIvaGVhcCcpLFxuICByZXF1aXJlKCcuL2xpYi9oZWxsb2JhcicpLFxuICByZXF1aXJlKCcuL2xpYi9oaXR0YWlsJyksXG4gIHJlcXVpcmUoJy4vbGliL2h1YnNwb3QnKSxcbiAgcmVxdWlyZSgnLi9saWIvaW1wcm92ZWx5JyksXG4gIHJlcXVpcmUoJy4vbGliL2luc2lkZXZhdWx0JyksXG4gIHJlcXVpcmUoJy4vbGliL2luc3BlY3RsZXQnKSxcbiAgcmVxdWlyZSgnLi9saWIvaW50ZXJjb20nKSxcbiAgcmVxdWlyZSgnLi9saWIva2Vlbi1pbycpLFxuICByZXF1aXJlKCcuL2xpYi9rZW5zaG9vJyksXG4gIHJlcXVpcmUoJy4vbGliL2tpc3NtZXRyaWNzJyksXG4gIHJlcXVpcmUoJy4vbGliL2tsYXZpeW8nKSxcbiAgcmVxdWlyZSgnLi9saWIvbGVhZGxhbmRlcicpLFxuICByZXF1aXJlKCcuL2xpYi9saXZlY2hhdCcpLFxuICByZXF1aXJlKCcuL2xpYi9sdWNreS1vcmFuZ2UnKSxcbiAgcmVxdWlyZSgnLi9saWIvbHl0aWNzJyksXG4gIHJlcXVpcmUoJy4vbGliL21peHBhbmVsJyksXG4gIHJlcXVpcmUoJy4vbGliL21vam4nKSxcbiAgcmVxdWlyZSgnLi9saWIvbW91c2VmbG93JyksXG4gIHJlcXVpcmUoJy4vbGliL21vdXNlc3RhdHMnKSxcbiAgcmVxdWlyZSgnLi9saWIvbmF2aWx5dGljcycpLFxuICByZXF1aXJlKCcuL2xpYi9vbGFyaycpLFxuICByZXF1aXJlKCcuL2xpYi9vcHRpbWl6ZWx5JyksXG4gIHJlcXVpcmUoJy4vbGliL3BlcmZlY3QtYXVkaWVuY2UnKSxcbiAgcmVxdWlyZSgnLi9saWIvcGluZ2RvbScpLFxuICByZXF1aXJlKCcuL2xpYi9waXdpaycpLFxuICByZXF1aXJlKCcuL2xpYi9wcmVhY3QnKSxcbiAgcmVxdWlyZSgnLi9saWIvcXVhbGFyb28nKSxcbiAgcmVxdWlyZSgnLi9saWIvcXVhbnRjYXN0JyksXG4gIHJlcXVpcmUoJy4vbGliL3JvbGxiYXInKSxcbiAgcmVxdWlyZSgnLi9saWIvc2Fhc3F1YXRjaCcpLFxuICByZXF1aXJlKCcuL2xpYi9zZW50cnknKSxcbiAgcmVxdWlyZSgnLi9saWIvc25hcGVuZ2FnZScpLFxuICByZXF1aXJlKCcuL2xpYi9zcGlubmFrcicpLFxuICByZXF1aXJlKCcuL2xpYi90YXBzdHJlYW0nKSxcbiAgcmVxdWlyZSgnLi9saWIvdHJha2lvJyksXG4gIHJlcXVpcmUoJy4vbGliL3R3aXR0ZXItYWRzJyksXG4gIHJlcXVpcmUoJy4vbGliL3VzZXJ2b2ljZScpLFxuICByZXF1aXJlKCcuL2xpYi92ZXJvJyksXG4gIHJlcXVpcmUoJy4vbGliL3Zpc3VhbC13ZWJzaXRlLW9wdGltaXplcicpLFxuICByZXF1aXJlKCcuL2xpYi93ZWJlbmdhZ2UnKSxcbiAgcmVxdWlyZSgnLi9saWIvd29vcHJhJyksXG4gIHJlcXVpcmUoJy4vbGliL3lhbmRleC1tZXRyaWNhJylcbl07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBzbmFrZSA9IHJlcXVpcmUoJ3RvLXNuYWtlLWNhc2UnKTtcbnZhciB1c2VIdHRwcyA9IHJlcXVpcmUoJ3VzZS1odHRwcycpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEhPUFxuICovXG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEV4cG9zZSBgQWRSb2xsYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQWRSb2xsID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQWRSb2xsJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19fYWRyb2xsX2xvYWRlZCcpXG4gIC5nbG9iYWwoJ2Fkcm9sbF9hZHZfaWQnKVxuICAuZ2xvYmFsKCdhZHJvbGxfcGl4X2lkJylcbiAgLmdsb2JhbCgnYWRyb2xsX2N1c3RvbV9kYXRhJylcbiAgLm9wdGlvbignYWR2SWQnLCAnJylcbiAgLm9wdGlvbigncGl4SWQnLCAnJylcbiAgLnRhZygnaHR0cCcsICc8c2NyaXB0IHNyYz1cImh0dHA6Ly9hLmFkcm9sbC5jb20vai9yb3VuZHRyaXAuanNcIj4nKVxuICAudGFnKCdodHRwcycsICc8c2NyaXB0IHNyYz1cImh0dHBzOi8vcy5hZHJvbGwuY29tL2ovcm91bmR0cmlwLmpzXCI+JylcbiAgLm1hcHBpbmcoJ2V2ZW50cycpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL3N1cHBvcnQuYWRyb2xsLmNvbS9nZXR0aW5nLXN0YXJ0ZWQtaW4tNC1lYXN5LXN0ZXBzLyNzdGVwLW9uZVxuICogaHR0cDovL3N1cHBvcnQuYWRyb2xsLmNvbS9lbmhhbmNlZC1jb252ZXJzaW9uLXRyYWNraW5nL1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuQWRSb2xsLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5hZHJvbGxfYWR2X2lkID0gdGhpcy5vcHRpb25zLmFkdklkO1xuICB3aW5kb3cuYWRyb2xsX3BpeF9pZCA9IHRoaXMub3B0aW9ucy5waXhJZDtcbiAgd2luZG93Ll9fYWRyb2xsX2xvYWRlZCA9IHRydWU7XG4gIHZhciBuYW1lID0gdXNlSHR0cHMoKSA/ICdodHRwcycgOiAnaHR0cCc7XG4gIHRoaXMubG9hZChuYW1lLCB0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuQWRSb2xsLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gd2luZG93Ll9fYWRyb2xsO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHA6Ly9zdXBwb3J0LmFkcm9sbC5jb20vc2VnbWVudGluZy1jbGlja3MvXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuQWRSb2xsLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuICB0aGlzLnRyYWNrKHBhZ2UudHJhY2sobmFtZSkpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkFkUm9sbC5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBldmVudCA9IHRyYWNrLmV2ZW50KCk7XG4gIHZhciB1c2VyID0gdGhpcy5hbmFseXRpY3MudXNlcigpO1xuICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHMoZXZlbnQpO1xuICB2YXIgdG90YWwgPSB0cmFjay5yZXZlbnVlKCkgfHwgdHJhY2sudG90YWwoKSB8fCAwO1xuICB2YXIgb3JkZXJJZCA9IHRyYWNrLm9yZGVySWQoKSB8fCAwO1xuXG4gIGVhY2goZXZlbnRzLCBmdW5jdGlvbihldmVudCl7XG4gICAgdmFyIGRhdGEgPSB7fTtcbiAgICBpZiAodXNlci5pZCgpKSBkYXRhLnVzZXJfaWQgPSB1c2VyLmlkKCk7XG4gICAgZGF0YS5hZHJvbGxfY29udmVyc2lvbl92YWx1ZV9pbl9kb2xsYXJzID0gdG90YWw7XG4gICAgZGF0YS5vcmRlcl9pZCA9IG9yZGVySWQ7XG4gICAgLy8gdGhlIGFkcm9sbCBpbnRlcmZhY2Ugb25seSBhbGxvd3MgZm9yXG4gICAgLy8gc2VnbWVudCBuYW1lcyB3aGljaCBhcmUgc25ha2UgY2FzZWQuXG4gICAgZGF0YS5hZHJvbGxfc2VnbWVudHMgPSBzbmFrZShldmVudCk7XG4gICAgd2luZG93Ll9fYWRyb2xsLnJlY29yZF91c2VyKGRhdGEpO1xuICB9KTtcblxuICAvLyBubyBldmVudHMgZm91bmRcbiAgaWYgKCFldmVudHMubGVuZ3RoKSB7XG4gICAgdmFyIGRhdGEgPSB7fTtcbiAgICBpZiAodXNlci5pZCgpKSBkYXRhLnVzZXJfaWQgPSB1c2VyLmlkKCk7XG4gICAgZGF0YS5hZHJvbGxfc2VnbWVudHMgPSBzbmFrZShldmVudCk7XG4gICAgd2luZG93Ll9fYWRyb2xsLnJlY29yZF91c2VyKGRhdGEpO1xuICB9XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgZG9taWZ5ID0gcmVxdWlyZSgnZG9taWZ5Jyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcblxuLyoqXG4gKiBIT1BcbiAqL1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBFeHBvc2UgYEFkV29yZHNgLlxuICovXG5cbnZhciBBZFdvcmRzID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQWRXb3JkcycpXG4gIC5vcHRpb24oJ2NvbnZlcnNpb25JZCcsICcnKVxuICAub3B0aW9uKCdyZW1hcmtldGluZycsIGZhbHNlKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vd3d3Lmdvb2dsZWFkc2VydmljZXMuY29tL3BhZ2VhZC9jb252ZXJzaW9uX2FzeW5jLmpzXCI+JylcbiAgLm1hcHBpbmcoJ2V2ZW50cycpO1xuXG4vKipcbiAqIExvYWQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuQWRXb3Jkcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkLlxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkFkV29yZHMucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISBkb2N1bWVudC5ib2R5O1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHBzOi8vc3VwcG9ydC5nb29nbGUuY29tL2Fkd29yZHMvYW5zd2VyLzMxMTE5MjAjc3RhbmRhcmRfcGFyYW1ldGVyc1xuICogaHR0cHM6Ly9zdXBwb3J0Lmdvb2dsZS5jb20vYWR3b3Jkcy9hbnN3ZXIvMzEwMzM1N1xuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYWR3b3Jkcy1yZW1hcmtldGluZy10YWcvYXN5bmNocm9ub3VzL1xuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYWR3b3Jkcy1yZW1hcmtldGluZy10YWcvcGFyYW1ldGVyc1xuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbkFkV29yZHMucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHJlbWFya2V0aW5nID0gISF0aGlzLm9wdGlvbnMucmVtYXJrZXRpbmc7XG4gIHZhciBpZCA9IHRoaXMub3B0aW9ucy5jb252ZXJzaW9uSWQ7XG4gIHZhciBwcm9wcyA9IHt9O1xuICB3aW5kb3cuZ29vZ2xlX3RyYWNrQ29udmVyc2lvbih7XG4gICAgZ29vZ2xlX2NvbnZlcnNpb25faWQ6IGlkLFxuICAgIGdvb2dsZV9jdXN0b21fcGFyYW1zOiBwcm9wcyxcbiAgICBnb29nbGVfcmVtYXJrZXRpbmdfb25seTogcmVtYXJrZXRpbmdcbiAgfSk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkFkV29yZHMucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgaWQgPSB0aGlzLm9wdGlvbnMuY29udmVyc2lvbklkO1xuICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHModHJhY2suZXZlbnQoKSk7XG4gIHZhciByZXZlbnVlID0gdHJhY2sucmV2ZW51ZSgpIHx8IDA7XG4gIGVhY2goZXZlbnRzLCBmdW5jdGlvbihsYWJlbCl7XG4gICAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICAgIHdpbmRvdy5nb29nbGVfdHJhY2tDb252ZXJzaW9uKHtcbiAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2lkOiBpZCxcbiAgICAgIC8vIFRPRE9cbiAgICAgIC8vIGdvb2dsZV9jdXN0b21fcGFyYW1zOiBwcm9wcyxcbiAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2xhbmd1YWdlOiAnZW4nLFxuICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fZm9ybWF0OiAnMycsXG4gICAgICBnb29nbGVfY29udmVyc2lvbl9jb2xvcjogJ2ZmZmZmZicsXG4gICAgICBnb29nbGVfY29udmVyc2lvbl9sYWJlbDogbGFiZWwsXG4gICAgICBnb29nbGVfY29udmVyc2lvbl92YWx1ZTogcmV2ZW51ZSxcbiAgICAgIGdvb2dsZV9yZW1hcmtldGluZ19vbmx5OiBmYWxzZVxuICAgIH0pO1xuICB9KTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcblxuLyoqXG4gKiBFeHBvc2UgQWxleGEgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEFsZXhhID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQWxleGEnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2F0cmtfb3B0cycpXG4gIC5vcHRpb24oJ2FjY291bnQnLCBudWxsKVxuICAub3B0aW9uKCdkb21haW4nLCAnJylcbiAgLm9wdGlvbignZHluYW1pYycsIHRydWUpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9kMzFxYnYxY3RoY2Vjcy5jbG91ZGZyb250Lm5ldC9hdHJrLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkFsZXhhLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgd2luZG93Ll9hdHJrX29wdHMgPSB7XG4gICAgYXRya19hY2N0OiB0aGlzLm9wdGlvbnMuYWNjb3VudCxcbiAgICBkb21haW46IHRoaXMub3B0aW9ucy5kb21haW4sXG4gICAgZHluYW1pYzogdGhpcy5vcHRpb25zLmR5bmFtaWNcbiAgfTtcbiAgdGhpcy5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgd2luZG93LmF0cmsoKTtcbiAgICBzZWxmLnJlYWR5KCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5BbGV4YS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhIHdpbmRvdy5hdHJrO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xuXG4vKipcbiAqIEV4cG9zZSBgQW1wbGl0dWRlYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQW1wbGl0dWRlID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQW1wbGl0dWRlJylcbiAgLmdsb2JhbCgnYW1wbGl0dWRlJylcbiAgLm9wdGlvbignYXBpS2V5JywgJycpXG4gIC5vcHRpb24oJ3RyYWNrQWxsUGFnZXMnLCBmYWxzZSlcbiAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSlcbiAgLm9wdGlvbigndHJhY2tDYXRlZ29yaXplZFBhZ2VzJywgdHJ1ZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCJodHRwczovL2QyNG4xNWhuYndodWhuLmNsb3VkZnJvbnQubmV0L2xpYnMvYW1wbGl0dWRlLTEuMy1taW4uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbXBsaXR1ZGUvQW1wbGl0dWRlLUphdmFzY3JpcHRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkFtcGxpdHVkZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICAoZnVuY3Rpb24oaCxhKXt2YXIgZj1oLmFtcGxpdHVkZXx8e307Zi5fcT1bXTtmdW5jdGlvbiBlKGkpe2ZbaV09ZnVuY3Rpb24oKXtmLl9xLnB1c2goW2ldLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpKX19dmFyIGM9W1wiaW5pdFwiLFwibG9nRXZlbnRcIixcInNldFVzZXJJZFwiLFwic2V0VXNlclByb3BlcnRpZXNcIixcInNldFZlcnNpb25OYW1lXCIsXCJzZXREb21haW5cIixcInNldEdsb2JhbFVzZXJQcm9wZXJ0aWVzXCJdO2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXtlKGNbZF0pfWguYW1wbGl0dWRlPWZ9KSh3aW5kb3csZG9jdW1lbnQpO1xuICB3aW5kb3cuYW1wbGl0dWRlLmluaXQodGhpcy5vcHRpb25zLmFwaUtleSk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuQW1wbGl0dWRlLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5hbXBsaXR1ZGUgJiYgd2luZG93LmFtcGxpdHVkZS5vcHRpb25zKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5BbXBsaXR1ZGUucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHByb3BlcnRpZXMgPSBwYWdlLnByb3BlcnRpZXMoKTtcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcbiAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgLy8gYWxsIHBhZ2VzXG4gIGlmIChvcHRzLnRyYWNrQWxsUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2soKSk7XG4gIH1cblxuICAvLyBjYXRlZ29yaXplZCBwYWdlc1xuICBpZiAoY2F0ZWdvcnkgJiYgb3B0cy50cmFja0NhdGVnb3JpemVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2soY2F0ZWdvcnkpKTtcbiAgfVxuXG4gIC8vIG5hbWVkIHBhZ2VzXG4gIGlmIChuYW1lICYmIG9wdHMudHJhY2tOYW1lZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKG5hbWUpKTtcbiAgfVxufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0ZhY2FkZX0gaWRlbnRpZnlcbiAqL1xuXG5BbXBsaXR1ZGUucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICBpZiAoaWQpIHdpbmRvdy5hbXBsaXR1ZGUuc2V0VXNlcklkKGlkKTtcbiAgaWYgKHRyYWl0cykgd2luZG93LmFtcGxpdHVkZS5zZXRHbG9iYWxVc2VyUHJvcGVydGllcyh0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSBldmVudFxuICovXG5cbkFtcGxpdHVkZS5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgdmFyIGV2ZW50ID0gdHJhY2suZXZlbnQoKTtcbiAgd2luZG93LmFtcGxpdHVkZS5sb2dFdmVudChldmVudCwgcHJvcHMpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGxvYWQgPSByZXF1aXJlKCdsb2FkLXNjcmlwdCcpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgcGx1Z2luLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGZ1bmN0aW9uIChhbmFseXRpY3MpIHtcbiAgYW5hbHl0aWNzLmFkZEludGVncmF0aW9uKEFwcGN1ZXMpO1xufTtcblxuLyoqXG4gKiBFeHBvc2UgYEFwcGN1ZXNgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBBcHBjdWVzID0gZXhwb3J0cy5JbnRlZ3JhdGlvbiA9IGludGVncmF0aW9uKCdBcHBjdWVzJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ0FwcGN1ZXMnKVxuICAuZ2xvYmFsKCdBcHBjdWVzSWRlbnRpdHknKVxuICAub3B0aW9uKCdhcHBjdWVzSWQnLCAnJylcbiAgLm9wdGlvbigndXNlcklkJywgJycpXG4gIC5vcHRpb24oJ3VzZXJFbWFpbCcsICcnKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9hcHBjdWVzLmNvbS9kb2NzL1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fVxuICovXG5cbkFwcGN1ZXMucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICB0aGlzLmxvYWQoZnVuY3Rpb24oKSB7XG4gICAgd2luZG93LkFwcGN1ZXMuaW5pdCgpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuQXBwY3Vlcy5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGlzLm9iamVjdCh3aW5kb3cuQXBwY3Vlcyk7XG59O1xuXG4vKipcbiAqIExvYWQgdGhlIEFwcGN1ZXMgbGlicmFyeS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICovXG5cbkFwcGN1ZXMucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbihjYWxsYmFjayl7XG4gIHZhciBzY3JpcHQgPSBsb2FkKCcvL2QyZHViZnE5N3MwMmV1LmNsb3VkZnJvbnQubmV0L2FwcGN1ZXMtYnVuZGxlLm1pbi5qcycsIGNhbGxiYWNrKTtcbiAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnZGF0YS1hcHBjdWVzLWlkJywgdGhpcy5vcHRpb25zLmFwcGN1ZXNJZCk7XG4gIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdXNlci1pZCcsIHRoaXMub3B0aW9ucy51c2VySWQpO1xuICBzY3JpcHQuc2V0QXR0cmlidXRlKCdkYXRhLXVzZXItZW1haWwnLCB0aGlzLm9wdGlvbnMudXNlckVtYWlsKTtcbn07XG5cblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBodHRwOi8vYXBwY3Vlcy5jb20vZG9jcyNpZGVudGlmeVxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuQXBwY3Vlcy5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHdpbmRvdy5BcHBjdWVzLmlkZW50aWZ5KGlkZW50aWZ5LnRyYWl0cygpKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xuXG4vKipcbiAqIEV4cG9zZSBgQXdlc21gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBBd2VzbSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ2F3ZS5zbScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdBV0VTTScpXG4gIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vd2lkZ2V0cy5hd2Uuc20vdjMvd2lkZ2V0cy5qcz9rZXk9e3sgYXBpS2V5IH19JmFzeW5jPXRydWVcIj4nKVxuICAubWFwcGluZygnZXZlbnRzJyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vZGV2ZWxvcGVycy5hd2Uuc20vZ3VpZGVzL2phdmFzY3JpcHQvXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Bd2VzbS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuQVdFU00gPSB7IGFwaV9rZXk6IHRoaXMub3B0aW9ucy5hcGlLZXkgfTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Bd2VzbS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuQVdFU00gJiYgd2luZG93LkFXRVNNLl9leGlzdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkF3ZXNtLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG4gIHZhciBnb2FscyA9IHRoaXMuZXZlbnRzKHRyYWNrLmV2ZW50KCkpO1xuICBlYWNoKGdvYWxzLCBmdW5jdGlvbihnb2FsKXtcbiAgICB3aW5kb3cuQVdFU00uY29udmVydChnb2FsLCB0cmFjay5jZW50cygpLCBudWxsLCB1c2VyLmlkKCkpO1xuICB9KTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG52YXIgbm9vcCA9IGZ1bmN0aW9uKCl7fTtcbnZhciBvbkJvZHkgPSByZXF1aXJlKCdvbi1ib2R5Jyk7XG5cbi8qKlxuICogRXhwb3NlIGBBd2Vzb21hdGljYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQXdlc29tYXRpYyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0F3ZXNvbWF0aWMnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnQXdlc29tYXRpYycpXG4gIC5nbG9iYWwoJ0F3ZXNvbWF0aWNTZXR0aW5ncycpXG4gIC5nbG9iYWwoJ0F3c21TZXR1cCcpXG4gIC5nbG9iYWwoJ0F3c21UbXAnKVxuICAub3B0aW9uKCdhcHBJZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cImh0dHBzOi8vMWM4MTdiN2ExNWI2OTQxMzM3YzAtZGZmOWI1ZjRhZGI3YmEyODI1OTYzMWU5OWMzZjM2OTEuc3NsLmNmMi5yYWNrY2RuLmNvbS9nZW4vZW1iZWQuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuQXdlc29tYXRpYy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB1c2VyID0gdGhpcy5hbmFseXRpY3MudXNlcigpO1xuICB2YXIgaWQgPSB1c2VyLmlkKCk7XG4gIHZhciBvcHRpb25zID0gdXNlci50cmFpdHMoKTtcblxuICBvcHRpb25zLmFwcElkID0gdGhpcy5vcHRpb25zLmFwcElkO1xuICBpZiAoaWQpIG9wdGlvbnMudXNlcl9pZCA9IGlkO1xuXG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIHdpbmRvdy5Bd2Vzb21hdGljLmluaXRpYWxpemUob3B0aW9ucywgZnVuY3Rpb24oKXtcbiAgICAgIHNlbGYucmVhZHkoKTsgLy8gbmVlZCB0byB3YWl0IGZvciBpbml0aWFsaXplIHRvIGNhbGxiYWNrXG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Bd2Vzb21hdGljLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMub2JqZWN0KHdpbmRvdy5Bd2Vzb21hdGljKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBvbmJvZHkgPSByZXF1aXJlKCdvbi1ib2R5Jyk7XG52YXIgZG9taWZ5ID0gcmVxdWlyZSgnZG9taWZ5Jyk7XG52YXIgZXh0ZW5kID0gcmVxdWlyZSgnZXh0ZW5kJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJ2JpbmQnKTtcbnZhciB3aGVuID0gcmVxdWlyZSgnd2hlbicpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbi8qKlxuICogSE9QLlxuICovXG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIE5vb3AuXG4gKi9cblxudmFyIG5vb3AgPSBmdW5jdGlvbigpe307XG5cbi8qKlxuICogRXhwb3NlIGBCaW5nYC5cbiAqXG4gKiBodHRwczovL2JpbmdhZHMubWljcm9zb2Z0LmNvbS9jYW1wYWlnbi9zaWdudXBcbiAqL1xuXG52YXIgQmluZyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0JpbmcgQWRzJylcbiAgLm9wdGlvbignc2l0ZUlkJywgJycpXG4gIC5vcHRpb24oJ2RvbWFpbklkJywgJycpXG4gIC50YWcoJzxzY3JpcHQgaWQ9XCJtc3RhZ190b3BzXCIgc3JjPVwiLy9mbGV4Lm1zbi5jb20vbXN0YWcvc2l0ZS97eyBzaXRlSWQgfX0vbXN0YWcuanNcIj4nKVxuICAubWFwcGluZygnZXZlbnRzJyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvYmluZy1hZHMtY2FtcGFpZ24tbWFuYWdlbWVudC1jYW1wYWlnbi1hbmFseXRpY3Mtc2NyaXB0cy5hc3B4XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5CaW5nLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIGlmICghd2luZG93Lm1zdGFnKSB7XG4gICAgd2luZG93Lm1zdGFnID0ge1xuICAgICAgbG9hZFRhZzogbm9vcCxcbiAgICAgIHRpbWU6IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCksXG4gICAgICAvLyB0aGV5IHVzZSBkb2N1bWVudC53cml0ZSwgd2hpY2ggZG9lc24ndCB3b3JrIHdoZW4gbG9hZGVkIGFzeW5jLlxuICAgICAgLy8gdGhleSBwcm92aWRlIGEgd2F5IHRvIG92ZXJyaWRlIGl0LlxuICAgICAgLy8gdGhlIGZpcnN0IHRpbWUgaXQgaXMgY2FsbGVkLCBsb2FkIHRoZSBzY3JpcHQsXG4gICAgICAvLyBhbmQgb25seSB3aGVuIHRoYXQgc2NyaXB0IGlzIGRvbmUsIGlzIFwibG9hZGluZ1wiIGRvbmUuXG4gICAgICBfd3JpdGU6IHdyaXRlVG9BcHBlbmRcbiAgICB9O1xuICB9O1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIG9uYm9keShmdW5jdGlvbigpe1xuICAgIHNlbGYubG9hZChmdW5jdGlvbigpe1xuICAgICAgdmFyIGxvYWRlZCA9IGJpbmQoc2VsZiwgc2VsZi5sb2FkZWQpO1xuXG4gICAgICAvLyBwb2xsIHVudGlsIHRoaXMubG9hZGVkKCkgaXMgdHJ1ZS5cbiAgICAgIC8vIGhhdmUgdG8gZG8gYSB3ZWlyZCBoYWNrIGxpa2UgdGhpcyBiZWNhdXNlXG4gICAgICAvLyB0aGUgZmlyc3Qgc2NyaXB0IGxvYWRzIGEgc2Vjb25kIHNjcmlwdCxcbiAgICAgIC8vIGFuZCBvbmx5IGFmdGVyIHRoZSBzZWNvbmQgc2NyaXB0IGlzIGl0IGFjdHVhbGx5IGxvYWRlZC5cbiAgICAgIHdoZW4obG9hZGVkLCBzZWxmLnJlYWR5KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkJpbmcucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Lm1zdGFnICYmIHdpbmRvdy5tc3RhZy5sb2FkVGFnICE9PSBub29wKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5CaW5nLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzKHRyYWNrLmV2ZW50KCkpO1xuICB2YXIgcmV2ZW51ZSA9IHRyYWNrLnJldmVudWUoKSB8fCAwO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGVhY2goZXZlbnRzLCBmdW5jdGlvbihnb2FsKXtcbiAgICB3aW5kb3cubXN0YWcubG9hZFRhZygnYW5hbHl0aWNzJywge1xuICAgICAgZG9tYWluSWQ6IHNlbGYub3B0aW9ucy5kb21haW5JZCxcbiAgICAgIHJldmVudWU6IHJldmVudWUsXG4gICAgICBkZWR1cDogJzEnLFxuICAgICAgdHlwZTogJzEnLFxuICAgICAgYWN0aW9uaWQ6IGdvYWxcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgYGRvY3VtZW50LndyaXRlYCB0byBgZG9jdW1lbnQuYXBwZW5kQ2hpbGRgLlxuICpcbiAqIFRPRE86IG1ha2UgaW50byBhIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cblxuZnVuY3Rpb24gd3JpdGVUb0FwcGVuZChzdHIpIHtcbiAgdmFyIGZpcnN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICB2YXIgZWwgPSBkb21pZnkoc3RyKTtcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NvbXBvbmVudC9kb21pZnkvaXNzdWVzLzE0XG4gIGlmICgnc2NyaXB0JyA9PSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgJiYgZWwuZ2V0QXR0cmlidXRlKCdzcmMnKSkge1xuICAgIHZhciB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICB0bXAuc3JjID0gZWwuZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgICB0bXAuYXN5bmMgPSB0cnVlO1xuICAgIGVsID0gdG1wO1xuICB9XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xufVxuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgSWRlbnRpZnkgPSByZXF1aXJlKCdmYWNhZGUnKS5JZGVudGlmeTtcbnZhciBUcmFjayA9IHJlcXVpcmUoJ2ZhY2FkZScpLlRyYWNrO1xudmFyIHBpeGVsID0gcmVxdWlyZSgnbG9hZC1waXhlbCcpKCdodHRwOi8vYXBwLmJyb250by5jb20vcHVibGljLycpO1xudmFyIHFzID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xuXG4vKipcbiAqIEV4cG9zZSBgQnJvbnRvYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQnJvbnRvID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQnJvbnRvJylcbiAgLmdsb2JhbCgnX19idGEnKVxuICAub3B0aW9uKCdzaXRlSWQnLCAnJylcbiAgLm9wdGlvbignaG9zdCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vcC5ibTIzLmNvbS9idGEuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9hcHAuYnJvbnRvLmNvbS9tYWlsL2hlbHAvaGVscF92aWV3Lz9rPW1haWw6aG9tZTphcGlfdHJhY2tpbmc6dHJhY2tpbmdfZGF0YV9zdG9yZV9qcyNhZGRpbmdqYXZhc2NyaXB0Y29udmVyc2lvbnRyYWNraW5ndG95b3Vyc2l0ZVxuICogaHR0cDovL2Jyb250by5jb20vcHJvZHVjdC1ibG9nL2ZlYXR1cmVzL3VzaW5nLWNvbnZlcnNpb24tdHJhY2tpbmctcHJpdmF0ZS1kb21haW4jLlV0X1ZrMlQ4S3FCXG4gKiBodHRwOi8vYnJvbnRvLmNvbS9wcm9kdWN0LWJsb2cvZmVhdHVyZXMvamF2YXNjcmlwdC1jb252ZXJzaW9uLXRyYWNraW5nLXNldHVwLWFuZC1yZXBvcnRpbmcjLlV0X1ZobVQ4S3FCXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Ccm9udG8ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgcGFyYW1zID0gcXMucGFyc2Uod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gIGlmICghcGFyYW1zLl9idGFfdGlkICYmICFwYXJhbXMuX2J0YV9jKSB7XG4gICAgdGhpcy5kZWJ1ZygnbWlzc2luZyB0cmFja2luZyBVUkwgcGFyYW1ldGVycyBgX2J0YV90aWRgIGFuZCBgX2J0YV9jYC4nKTtcbiAgfVxuICB0aGlzLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB2YXIgb3B0cyA9IHNlbGYub3B0aW9ucztcbiAgICBzZWxmLmJ0YSA9IG5ldyB3aW5kb3cuX19idGEob3B0cy5zaXRlSWQpO1xuICAgIGlmIChvcHRzLmhvc3QpIHNlbGYuYnRhLnNldEhvc3Qob3B0cy5ob3N0KTtcbiAgICBzZWxmLnJlYWR5KCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Ccm9udG8ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmJ0YTtcbn07XG5cbi8qKlxuICogQ29tcGxldGVkIG9yZGVyLlxuICpcbiAqIFRoZSBjb29raWUgaXMgdXNlZCB0byBsaW5rIHRoZSBvcmRlciBiZWluZyBwcm9jZXNzZWQgYmFjayB0byB0aGUgZGVsaXZlcnksXG4gKiBtZXNzYWdlLCBhbmQgY29udGFjdCB3aGljaCBtYWtlcyBpdCBhIGNvbnZlcnNpb24uXG4gKiBQYXNzaW5nIGluIGp1c3QgdGhlIGVtYWlsIGVuc3VyZXMgdGhhdCB0aGUgb3JkZXIgaXRzZWxmXG4gKiBnZXRzIGxpbmtlZCB0byB0aGUgY29udGFjdCByZWNvcmQgaW4gQnJvbnRvIGV2ZW4gaWYgdGhlIHVzZXJcbiAqIGRvZXMgbm90IGhhdmUgYSB0cmFja2luZyBjb29raWUuXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbkJyb250by5wcm90b3R5cGUuY29tcGxldGVkT3JkZXIgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciB1c2VyID0gdGhpcy5hbmFseXRpY3MudXNlcigpO1xuICB2YXIgcHJvZHVjdHMgPSB0cmFjay5wcm9kdWN0cygpO1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHZhciBpdGVtcyA9IFtdO1xuICB2YXIgaWRlbnRpZnkgPSBuZXcgSWRlbnRpZnkoe1xuICAgIHVzZXJJZDogdXNlci5pZCgpLFxuICAgIHRyYWl0czogdXNlci50cmFpdHMoKVxuICB9KTtcbiAgdmFyIGVtYWlsID0gaWRlbnRpZnkuZW1haWwoKTtcblxuICAvLyBpdGVtc1xuICBlYWNoKHByb2R1Y3RzLCBmdW5jdGlvbihwcm9kdWN0KXtcbiAgICB2YXIgdHJhY2sgPSBuZXcgVHJhY2soeyBwcm9wZXJ0aWVzOiBwcm9kdWN0IH0pO1xuICAgIGl0ZW1zLnB1c2goe1xuICAgICAgaXRlbV9pZDogdHJhY2suaWQoKSB8fCB0cmFjay5za3UoKSxcbiAgICAgIGRlc2M6IHByb2R1Y3QuZGVzY3JpcHRpb24gfHwgdHJhY2submFtZSgpLFxuICAgICAgcXVhbnRpdHk6IHRyYWNrLnF1YW50aXR5KCksXG4gICAgICBhbW91bnQ6IHRyYWNrLnByaWNlKCksXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIGFkZCBjb252ZXJzaW9uXG4gIHRoaXMuYnRhLmFkZE9yZGVyKHtcbiAgICBvcmRlcl9pZDogdHJhY2sub3JkZXJJZCgpLFxuICAgIGVtYWlsOiBlbWFpbCxcbiAgICAvLyB0aGV5IHJlY29tbWVuZCBub3QgcHV0dGluZyBpbiBhIGRhdGVcbiAgICAvLyBiZWNhdXNlIGl0IG5lZWRzIHRvIGJlIGZvcm1hdHRlZCBjb3JyZWN0bHlcbiAgICAvLyBZWVlZLU1NLUREVEhIOk1NOlNTXG4gICAgaXRlbXM6IGl0ZW1zXG4gIH0pO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRpY2sgPSByZXF1aXJlKCduZXh0LXRpY2snKTtcblxuLyoqXG4gKiBFeHBvc2UgYEJ1Z0hlcmRgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBCdWdIZXJkID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQnVnSGVyZCcpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdCdWdIZXJkQ29uZmlnJylcbiAgLmdsb2JhbCgnX2J1Z0hlcmQnKVxuICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgLm9wdGlvbignc2hvd0ZlZWRiYWNrVGFiJywgdHJ1ZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL3d3dy5idWdoZXJkLmNvbS9zaWRlYmFydjIuanM/YXBpa2V5PXt7IGFwaUtleSB9fVwiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL3N1cHBvcnQuYnVnaGVyZC5jb20vaG9tZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuQnVnSGVyZC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuQnVnSGVyZENvbmZpZyA9IHsgZmVlZGJhY2s6IHsgaGlkZTogIXRoaXMub3B0aW9ucy5zaG93RmVlZGJhY2tUYWIgfX07XG4gIHZhciByZWFkeSA9IHRoaXMucmVhZHk7XG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIHRpY2socmVhZHkpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuQnVnSGVyZC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhIHdpbmRvdy5fYnVnSGVyZDtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG52YXIgZXh0ZW5kID0gcmVxdWlyZSgnZXh0ZW5kJyk7XG52YXIgb25FcnJvciA9IHJlcXVpcmUoJ29uLWVycm9yJyk7XG5cbi8qKlxuICogVU1EID9cbiAqL1xuXG52YXIgdW1kID0gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQ7XG5cbi8qKlxuICogU291cmNlLlxuICovXG5cbnZhciBzcmMgPSAnLy9kMnd5OGY3YTl1cnNubS5jbG91ZGZyb250Lm5ldC9idWdzbmFnLTIubWluLmpzJztcblxuLyoqXG4gKiBFeHBvc2UgYEJ1Z3NuYWdgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBCdWdzbmFnID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQnVnc25hZycpXG4gIC5nbG9iYWwoJ0J1Z3NuYWcnKVxuICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCInICsgc3JjICsgJ1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cHM6Ly9idWdzbmFnLmNvbS9kb2NzL25vdGlmaWVycy9qc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuQnVnc25hZy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgaWYgKHVtZCkge1xuICAgIHdpbmRvdy5yZXF1aXJlKFtzcmNdLCBmdW5jdGlvbihidWdzbmFnKXtcbiAgICAgIGJ1Z3NuYWcuYXBpS2V5ID0gc2VsZi5vcHRpb25zLmFwaUtleTtcbiAgICAgIHdpbmRvdy5CdWdzbmFnID0gYnVnc25hZztcbiAgICAgIHNlbGYucmVhZHkoKTtcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB3aW5kb3cuQnVnc25hZy5hcGlLZXkgPSBzZWxmLm9wdGlvbnMuYXBpS2V5O1xuICAgIHNlbGYucmVhZHkoKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkJ1Z3NuYWcucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpcy5vYmplY3Qod2luZG93LkJ1Z3NuYWcpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkJ1Z3NuYWcucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB3aW5kb3cuQnVnc25hZy5tZXRhRGF0YSA9IHdpbmRvdy5CdWdzbmFnLm1ldGFEYXRhIHx8IHt9O1xuICBleHRlbmQod2luZG93LkJ1Z3NuYWcubWV0YURhdGEsIGlkZW50aWZ5LnRyYWl0cygpKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJ2RlZmF1bHRzJyk7XG52YXIgb25Cb2R5ID0gcmVxdWlyZSgnb24tYm9keScpO1xuXG4vKipcbiAqIEV4cG9zZSBgQ2hhcnRiZWF0YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQ2hhcnRiZWF0ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQ2hhcnRiZWF0JylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19zZl9hc3luY19jb25maWcnKVxuICAuZ2xvYmFsKCdfc2ZfZW5kcHQnKVxuICAuZ2xvYmFsKCdwU1VQRVJGTFknKVxuICAub3B0aW9uKCdkb21haW4nLCAnJylcbiAgLm9wdGlvbigndWlkJywgbnVsbClcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL3N0YXRpYy5jaGFydGJlYXQuY29tL2pzL2NoYXJ0YmVhdC5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL2NoYXJ0YmVhdC5jb20vZG9jcy9jb25maWd1cmF0aW9uX3ZhcmlhYmxlcy9cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkNoYXJ0YmVhdC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgd2luZG93Ll9zZl9hc3luY19jb25maWcgPSB3aW5kb3cuX3NmX2FzeW5jX2NvbmZpZyB8fCB7fTtcbiAgd2luZG93Ll9zZl9hc3luY19jb25maWcudXNlQ2Fub25pY2FsID0gdHJ1ZTtcbiAgZGVmYXVsdHMod2luZG93Ll9zZl9hc3luY19jb25maWcsIHRoaXMub3B0aW9ucyk7XG5cbiAgb25Cb2R5KGZ1bmN0aW9uKCl7XG4gICAgd2luZG93Ll9zZl9lbmRwdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIC8vIE5vdGU6IENoYXJ0YmVhdCBkZXBlbmRzIG9uIGRvY3VtZW50LmJvZHkgZXhpc3Rpbmcgc28gdGhlIHNjcmlwdCBkb2VzXG4gICAgLy8gbm90IGxvYWQgdW50aWwgdGhhdCBpcyBjb25maXJtZWQuIE90aGVyd2lzZSBpdCBtYXkgdHJpZ2dlciBlcnJvcnMuXG4gICAgc2VsZi5sb2FkKHNlbGYucmVhZHkpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuQ2hhcnRiZWF0LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LnBTVVBFUkZMWTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBodHRwOi8vY2hhcnRiZWF0LmNvbS9kb2NzL2hhbmRsaW5nX3ZpcnR1YWxfcGFnZV9jaGFuZ2VzL1xuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbkNoYXJ0YmVhdC5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgcHJvcHMgPSBwYWdlLnByb3BlcnRpZXMoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG4gIHdpbmRvdy5wU1VQRVJGTFkudmlydHVhbFBhZ2UocHJvcHMucGF0aCwgbmFtZSB8fCBwcm9wcy50aXRsZSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfY2JxJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcblxuLyoqXG4gKiBIT1BcbiAqL1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBTdXBwb3J0ZWQgZXZlbnRzXG4gKi9cblxudmFyIHN1cHBvcnRlZCA9IHtcbiAgYWN0aXZhdGlvbjogdHJ1ZSxcbiAgY2hhbmdlUGxhbjogdHJ1ZSxcbiAgcmVnaXN0ZXI6IHRydWUsXG4gIHJlZnVuZDogdHJ1ZSxcbiAgY2hhcmdlOiB0cnVlLFxuICBjYW5jZWw6IHRydWUsXG4gIGxvZ2luOiB0cnVlXG59O1xuXG4vKipcbiAqIEV4cG9zZSBgQ2h1cm5CZWVgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBDaHVybkJlZSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0NodXJuQmVlJylcbiAgLmdsb2JhbCgnX2NicScpXG4gIC5nbG9iYWwoJ0NodXJuQmVlJylcbiAgLm9wdGlvbignYXBpS2V5JywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9hcGkuY2h1cm5iZWUuY29tL2NiLmpzXCI+JylcbiAgLm1hcHBpbmcoJ2V2ZW50cycpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cHM6Ly9jaHVybmJlZS5jb20vZG9jc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuQ2h1cm5CZWUucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgcHVzaCgnX3NldEFwaUtleScsIHRoaXMub3B0aW9ucy5hcGlLZXkpO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkNodXJuQmVlLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LkNodXJuQmVlO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSBldmVudFxuICovXG5cbkNodXJuQmVlLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIGV2ZW50ID0gdHJhY2suZXZlbnQoKTtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzKGV2ZW50KTtcbiAgZXZlbnRzLnB1c2goZXZlbnQpO1xuICBlYWNoKGV2ZW50cywgZnVuY3Rpb24oZXZlbnQpe1xuICAgIGlmICh0cnVlICE9IHN1cHBvcnRlZFtldmVudF0pIHJldHVybjtcbiAgICBwdXNoKGV2ZW50LCB0cmFjay5wcm9wZXJ0aWVzKHsgcmV2ZW51ZTogJ2Ftb3VudCcgfSkpO1xuICB9KTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgZGF0ZSA9IHJlcXVpcmUoJ2xvYWQtZGF0ZScpO1xudmFyIGRvbWlmeSA9IHJlcXVpcmUoJ2RvbWlmeScpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG52YXIgdXNlSHR0cHMgPSByZXF1aXJlKCd1c2UtaHR0cHMnKTtcbnZhciBvbkJvZHkgPSByZXF1aXJlKCdvbi1ib2R5Jyk7XG5cbi8qKlxuICogRXhwb3NlIGBDbGlja1RhbGVgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBDbGlja1RhbGUgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdDbGlja1RhbGUnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnV1JJbml0VGltZScpXG4gIC5nbG9iYWwoJ0NsaWNrVGFsZScpXG4gIC5nbG9iYWwoJ0NsaWNrVGFsZVNldFVJRCcpXG4gIC5nbG9iYWwoJ0NsaWNrVGFsZUZpZWxkJylcbiAgLmdsb2JhbCgnQ2xpY2tUYWxlRXZlbnQnKVxuICAub3B0aW9uKCdodHRwQ2RuVXJsJywgJ2h0dHA6Ly9zLmNsaWNrdGFsZS5uZXQvV1JlMC5qcycpXG4gIC5vcHRpb24oJ2h0dHBzQ2RuVXJsJywgJycpXG4gIC5vcHRpb24oJ3Byb2plY3RJZCcsICcnKVxuICAub3B0aW9uKCdyZWNvcmRpbmdSYXRpbycsIDAuMDEpXG4gIC5vcHRpb24oJ3BhcnRpdGlvbklkJywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwie3tzcmN9fVwiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL3dpa2kuY2xpY2t0YWxlLmNvbS9BcnRpY2xlL0phdmFTY3JpcHRfQVBJXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5DbGlja1RhbGUucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB3aW5kb3cuV1JJbml0VGltZSA9IGRhdGUuZ2V0VGltZSgpO1xuXG4gIG9uQm9keShmdW5jdGlvbihib2R5KXtcbiAgICBib2R5LmFwcGVuZENoaWxkKGRvbWlmeSgnPGRpdiBpZD1cIkNsaWNrVGFsZURpdlwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj4nKSk7XG4gIH0pO1xuXG4gIHZhciBodHRwID0gdGhpcy5vcHRpb25zLmh0dHBDZG5Vcmw7XG4gIHZhciBodHRwcyA9IHRoaXMub3B0aW9ucy5odHRwc0NkblVybDtcbiAgaWYgKHVzZUh0dHBzKCkgJiYgIWh0dHBzKSByZXR1cm4gdGhpcy5kZWJ1ZygnaHR0cHMgb3B0aW9uIHJlcXVpcmVkJyk7XG4gIHZhciBzcmMgPSB1c2VIdHRwcygpID8gaHR0cHMgOiBodHRwO1xuXG4gIHRoaXMubG9hZCh7IHNyYzogc3JjIH0sIGZ1bmN0aW9uKCl7XG4gICAgd2luZG93LkNsaWNrVGFsZShcbiAgICAgIHNlbGYub3B0aW9ucy5wcm9qZWN0SWQsXG4gICAgICBzZWxmLm9wdGlvbnMucmVjb3JkaW5nUmF0aW8sXG4gICAgICBzZWxmLm9wdGlvbnMucGFydGl0aW9uSWRcbiAgICApO1xuICAgIHNlbGYucmVhZHkoKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkNsaWNrVGFsZS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGlzLmZuKHdpbmRvdy5DbGlja1RhbGUpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBodHRwOi8vd2lraS5jbGlja3RhbGUuY29tL0FydGljbGUvQ2xpY2tUYWxlVGFnI0NsaWNrVGFsZVNldFVJRFxuICogaHR0cDovL3dpa2kuY2xpY2t0YWxlLmNvbS9BcnRpY2xlL0NsaWNrVGFsZVRhZyNDbGlja1RhbGVGaWVsZFxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuQ2xpY2tUYWxlLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIGlkID0gaWRlbnRpZnkudXNlcklkKCk7XG4gIHdpbmRvdy5DbGlja1RhbGVTZXRVSUQoaWQpO1xuICBlYWNoKGlkZW50aWZ5LnRyYWl0cygpLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgICB3aW5kb3cuQ2xpY2tUYWxlRmllbGQoa2V5LCB2YWx1ZSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwOi8vd2lraS5jbGlja3RhbGUuY29tL0FydGljbGUvQ2xpY2tUYWxlVGFnI0NsaWNrVGFsZUV2ZW50XG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5DbGlja1RhbGUucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB3aW5kb3cuQ2xpY2tUYWxlRXZlbnQodHJhY2suZXZlbnQoKSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIElkZW50aWZ5ID0gcmVxdWlyZSgnZmFjYWRlJykuSWRlbnRpZnk7XG52YXIgZXh0ZW5kID0gcmVxdWlyZSgnZXh0ZW5kJyk7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBDbGlja3lgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBDbGlja3kgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdDbGlja3knKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnY2xpY2t5JylcbiAgLmdsb2JhbCgnY2xpY2t5X3NpdGVfaWRzJylcbiAgLmdsb2JhbCgnY2xpY2t5X2N1c3RvbScpXG4gIC5vcHRpb24oJ3NpdGVJZCcsIG51bGwpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9zdGF0aWMuZ2V0Y2xpY2t5LmNvbS9qc1wiPjwvc2NyaXB0PicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL2NsaWNreS5jb20vaGVscC9jdXN0b21pemF0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5DbGlja3kucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG4gIHdpbmRvdy5jbGlja3lfc2l0ZV9pZHMgPSB3aW5kb3cuY2xpY2t5X3NpdGVfaWRzIHx8IFt0aGlzLm9wdGlvbnMuc2l0ZUlkXTtcbiAgdGhpcy5pZGVudGlmeShuZXcgSWRlbnRpZnkoe1xuICAgIHVzZXJJZDogdXNlci5pZCgpLFxuICAgIHRyYWl0czogdXNlci50cmFpdHMoKVxuICB9KSk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuQ2xpY2t5LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMub2JqZWN0KHdpbmRvdy5jbGlja3kpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHA6Ly9jbGlja3kuY29tL2hlbHAvY3VzdG9taXphdGlvbiMvaGVscC9jdXN0b20vbWFudWFsXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuQ2xpY2t5LnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBwcm9wZXJ0aWVzID0gcGFnZS5wcm9wZXJ0aWVzKCk7XG4gIHZhciBjYXRlZ29yeSA9IHBhZ2UuY2F0ZWdvcnkoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG4gIHdpbmRvdy5jbGlja3kubG9nKHByb3BlcnRpZXMucGF0aCwgbmFtZSB8fCBwcm9wZXJ0aWVzLnRpdGxlKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWQgKG9wdGlvbmFsKVxuICovXG5cbkNsaWNreS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHdpbmRvdy5jbGlja3lfY3VzdG9tID0gd2luZG93LmNsaWNreV9jdXN0b20gfHwge307XG4gIHdpbmRvdy5jbGlja3lfY3VzdG9tLnNlc3Npb24gPSB3aW5kb3cuY2xpY2t5X2N1c3RvbS5zZXNzaW9uIHx8IHt9O1xuICBleHRlbmQod2luZG93LmNsaWNreV9jdXN0b20uc2Vzc2lvbiwgaWRlbnRpZnkudHJhaXRzKCkpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwOi8vY2xpY2t5LmNvbS9oZWxwL2N1c3RvbWl6YXRpb24jL2hlbHAvY3VzdG9tL21hbnVhbFxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IGV2ZW50XG4gKi9cblxuQ2xpY2t5LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgd2luZG93LmNsaWNreS5nb2FsKHRyYWNrLmV2ZW50KCksIHRyYWNrLnJldmVudWUoKSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdXNlSHR0cHMgPSByZXF1aXJlKCd1c2UtaHR0cHMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYENvbXNjb3JlYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQ29tc2NvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdjb21TY29yZScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfY29tc2NvcmUnKVxuICAuZ2xvYmFsKCdDT01TQ09SRScpXG4gIC5vcHRpb24oJ2MxJywgJzInKVxuICAub3B0aW9uKCdjMicsICcnKVxuICAudGFnKCdodHRwJywgJzxzY3JpcHQgc3JjPVwiaHR0cDovL2Iuc2NvcmVjYXJkcmVzZWFyY2guY29tL2JlYWNvbi5qc1wiPicpXG4gIC50YWcoJ2h0dHBzJywgJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9zYi5zY29yZWNhcmRyZXNlYXJjaC5jb20vYmVhY29uLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkNvbXNjb3JlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fY29tc2NvcmUgPSB3aW5kb3cuX2NvbXNjb3JlIHx8IFt0aGlzLm9wdGlvbnNdO1xuICB2YXIgbmFtZSA9IHVzZUh0dHBzKCkgPyAnaHR0cHMnIDogJ2h0dHAnO1xuICB0aGlzLmxvYWQobmFtZSwgdGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkNvbXNjb3JlLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LkNPTVNDT1JFO1xufTtcblxuLyoqXG4gKiBQYWdlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Db21zY29yZS5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuQ09NU0NPUkUuYmVhY29uKHRoaXMub3B0aW9ucyk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG5cbi8qKlxuICogRXhwb3NlIGBDcmF6eUVnZ2AgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIENyYXp5RWdnID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQ3JhenkgRWdnJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ0NFMicpXG4gIC5vcHRpb24oJ2FjY291bnROdW1iZXInLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2RubjUwNnlyYmFncmcuY2xvdWRmcm9udC5uZXQvcGFnZXMvc2NyaXB0cy97eyBwYXRoIH19LmpzP3t7IGNhY2hlIH19XCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkNyYXp5RWdnLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBudW1iZXIgPSB0aGlzLm9wdGlvbnMuYWNjb3VudE51bWJlcjtcbiAgdmFyIHBhdGggPSBudW1iZXIuc2xpY2UoMCw0KSArICcvJyArIG51bWJlci5zbGljZSg0KTtcbiAgdmFyIGNhY2hlID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDM2MDAwMDApO1xuICB0aGlzLmxvYWQoeyBwYXRoOiBwYXRoLCBjYWNoZTogY2FjaGUgfSwgdGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkNyYXp5RWdnLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LkNFMjtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19jdXJlYml0cScpO1xudmFyIElkZW50aWZ5ID0gcmVxdWlyZSgnZmFjYWRlJykuSWRlbnRpZnk7XG52YXIgdGhyb3R0bGUgPSByZXF1aXJlKCd0aHJvdHRsZScpO1xudmFyIFRyYWNrID0gcmVxdWlyZSgnZmFjYWRlJykuVHJhY2s7XG52YXIgaXNvID0gcmVxdWlyZSgndG8taXNvLXN0cmluZycpO1xudmFyIGNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xudmFyIGJpbmQgPSByZXF1aXJlKCdiaW5kJyk7XG5cbi8qKlxuICogRXhwb3NlIGBDdXJlYml0YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgQ3VyZWJpdCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0N1cmViaXQnKVxuICAuZ2xvYmFsKCdfY3VyZWJpdHEnKVxuICAuZ2xvYmFsKCdjdXJlYml0JylcbiAgLm9wdGlvbignc2l0ZUlkJywgJycpXG4gIC5vcHRpb24oJ2lmcmFtZVdpZHRoJywgJzEwMCUnKVxuICAub3B0aW9uKCdpZnJhbWVIZWlnaHQnLCAnNDgwJylcbiAgLm9wdGlvbignaWZyYW1lQm9yZGVyJywgMClcbiAgLm9wdGlvbignaWZyYW1lSWQnLCAnY3VyZWJpdF9pbnRlZ3JhdGlvbicpXG4gIC5vcHRpb24oJ3Jlc3BvbnNpdmUnLCB0cnVlKVxuICAub3B0aW9uKCdkZXZpY2UnLCAnJylcbiAgLm9wdGlvbignaW5zZXJ0SW50b0lkJywgJycpXG4gIC5vcHRpb24oJ2NhbXBhaWducycsIHt9KVxuICAub3B0aW9uKCdzZXJ2ZXInLCAnaHR0cHM6Ly93d3cuY3VyZWJpdC5jb20nKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vZDJqanp3ODFocWJ1cXYuY2xvdWRmcm9udC5uZXQvaW50ZWdyYXRpb24vY3VyZWJpdC0xLjAubWluLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkN1cmViaXQucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgcHVzaCgnaW5pdCcsIHsgc2l0ZV9pZDogdGhpcy5vcHRpb25zLnNpdGVJZCwgc2VydmVyOiB0aGlzLm9wdGlvbnMuc2VydmVyIH0pO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG5cbiAgLy8gdGhyb3R0bGUgdGhlIGNhbGwgdG8gYHBhZ2VgIHNpbmNlIGN1cmViaXQgbmVlZHMgdG8gYXBwZW5kIGFuIGlmcmFtZVxuICB0aGlzLnBhZ2UgPSB0aHJvdHRsZShiaW5kKHRoaXMsIHRoaXMucGFnZSksIDI1MCk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkN1cmViaXQucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhIXdpbmRvdy5jdXJlYml0O1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIENhbGwgdGhlIGByZWdpc3Rlcl9hZmZpbGlhdGVgIG1ldGhvZCBvZiB0aGUgQ3VyZWJpdCBBUEkgdGhhdCB3aWxsIGxvYWQgYVxuICogY3VzdG9tIGlmcmFtZSBvbnRvIHRoZSBwYWdlLCBvbmx5IGlmIHRoaXMgcGFnZSdzIHBhdGggaXMgbWFya2VkIGFzIGFcbiAqIGNhbXBhaWduLlxuICpcbiAqIGh0dHA6Ly93d3cuY3VyZWJpdC5jb20vZG9jcy9hZmZpbGlhdGUvcmVnaXN0cmF0aW9uXG4gKlxuICogVGhpcyBpcyB0aHJvdHRsZWQgdG8gcHJldmVudCBhY2NpZGVudGFsbHkgZHJhd2luZyB0aGUgaWZyYW1lIG11bHRpcGxlIHRpbWVzLFxuICogZnJvbSBtdWx0aXBsZSBgLnBhZ2UoKWAgY2FsbHMuIFRoZSBgMjUwYCBpcyBmcm9tIHRoZSBjdXJlYml0IHNjcmlwdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5DdXJlYml0LnByb3RvdHlwZS5pbmplY3RJbnRvSWQgPSBmdW5jdGlvbih1cmwsIGlkLCBmbil7XG4gIHZhciBzZXJ2ZXIgPSB0aGlzLm9wdGlvbnMuc2VydmVyO1xuICB3aGVuKGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgfSwgZnVuY3Rpb24oKXtcbiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgc2NyaXB0LnNyYyA9IHVybDtcbiAgICB2YXIgcGFyZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIG9ubG9hZChzY3JpcHQsIGZuKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENhbXBhaWduIHRhZ3MuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuQ3VyZWJpdC5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgdmFyIGNhbXBhaWducyA9IHRoaXMub3B0aW9ucy5jYW1wYWlnbnM7XG4gIHZhciBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICBpZiAoIWNhbXBhaWduc1twYXRoXSkgcmV0dXJuO1xuXG4gIHZhciB0YWdzID0gKGNhbXBhaWduc1twYXRoXSB8fCAnJykuc3BsaXQoJywnKTtcbiAgaWYgKCF0YWdzLmxlbmd0aCkgcmV0dXJuO1xuXG4gIHZhciBzZXR0aW5ncyA9IHtcbiAgICByZXNwb25zaXZlOiB0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZSxcbiAgICBkZXZpY2U6IHRoaXMub3B0aW9ucy5kZXZpY2UsXG4gICAgY2FtcGFpZ25fdGFnczogdGFncyxcbiAgICBpZnJhbWU6IHtcbiAgICAgIHdpZHRoOiB0aGlzLm9wdGlvbnMuaWZyYW1lV2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMub3B0aW9ucy5pZnJhbWVIZWlnaHQsXG4gICAgICBpZDogdGhpcy5vcHRpb25zLmlmcmFtZUlkLFxuICAgICAgZnJhbWVib3JkZXI6IHRoaXMub3B0aW9ucy5pZnJhbWVCb3JkZXIsXG4gICAgICBjb250YWluZXI6IHRoaXMub3B0aW9ucy5pbnNlcnRJbnRvSWRcbiAgICB9XG4gIH07XG5cbiAgdmFyIGlkZW50aWZ5ID0gbmV3IElkZW50aWZ5KHtcbiAgICB1c2VySWQ6IHVzZXIuaWQoKSxcbiAgICB0cmFpdHM6IHVzZXIudHJhaXRzKClcbiAgfSk7XG5cbiAgLy8gaWYgd2UgaGF2ZSBhbiBlbWFpbCwgYWRkIGFueSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlclxuICBpZiAoaWRlbnRpZnkuZW1haWwoKSkge1xuICAgIHNldHRpbmdzLmFmZmlsaWF0ZV9tZW1iZXIgPSB7XG4gICAgICBlbWFpbDogaWRlbnRpZnkuZW1haWwoKSxcbiAgICAgIGZpcnN0X25hbWU6IGlkZW50aWZ5LmZpcnN0TmFtZSgpLFxuICAgICAgbGFzdF9uYW1lOiBpZGVudGlmeS5sYXN0TmFtZSgpLFxuICAgICAgY3VzdG9tZXJfaWQ6IGlkZW50aWZ5LnVzZXJJZCgpXG4gICAgfTtcbiAgfVxuXG4gIHB1c2goJ3JlZ2lzdGVyX2FmZmlsaWF0ZScsIHNldHRpbmdzKTtcbn07XG5cbi8qKlxuICogQ29tcGxldGVkIG9yZGVyLlxuICpcbiAqIEZpcmUgdGhlIEN1cmViaXQgYHJlZ2lzdGVyX3B1cmNoYXNlYCB3aXRoIHRoZSBvcmRlciBkZXRhaWxzIGFuZCBpdGVtcy5cbiAqXG4gKiBodHRwczovL3d3dy5jdXJlYml0LmNvbS9kb2NzL2Vjb21tZXJjZS9jdXN0b21cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkN1cmViaXQucHJvdG90eXBlLmNvbXBsZXRlZE9yZGVyID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgdmFyIG9yZGVySWQgPSB0cmFjay5vcmRlcklkKCk7XG4gIHZhciBwcm9kdWN0cyA9IHRyYWNrLnByb2R1Y3RzKCk7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgdmFyIGl0ZW1zID0gW107XG4gIHZhciBpZGVudGlmeSA9IG5ldyBJZGVudGlmeSh7XG4gICAgdHJhaXRzOiB1c2VyLnRyYWl0cygpLFxuICAgIHVzZXJJZDogdXNlci5pZCgpXG4gIH0pO1xuXG4gIGVhY2gocHJvZHVjdHMsIGZ1bmN0aW9uKHByb2R1Y3Qpe1xuICAgIHZhciB0cmFjayA9IG5ldyBUcmFjayh7IHByb3BlcnRpZXM6IHByb2R1Y3QgfSk7XG4gICAgaXRlbXMucHVzaCh7XG4gICAgICBwcm9kdWN0X2lkOiB0cmFjay5pZCgpIHx8IHRyYWNrLnNrdSgpLFxuICAgICAgcXVhbnRpdHk6IHRyYWNrLnF1YW50aXR5KCksXG4gICAgICBpbWFnZV91cmw6IHByb2R1Y3QuaW1hZ2UsXG4gICAgICBwcmljZTogdHJhY2sucHJpY2UoKSxcbiAgICAgIHRpdGxlOiB0cmFjay5uYW1lKCksXG4gICAgICB1cmw6IHByb2R1Y3QudXJsLFxuICAgIH0pO1xuICB9KTtcblxuICBwdXNoKCdyZWdpc3Rlcl9wdXJjaGFzZScsIHtcbiAgICBvcmRlcl9kYXRlOiBpc28ocHJvcHMuZGF0ZSB8fCBuZXcgRGF0ZSgpKSxcbiAgICBvcmRlcl9udW1iZXI6IG9yZGVySWQsXG4gICAgY291cG9uX2NvZGU6IHRyYWNrLmNvdXBvbigpLFxuICAgIHN1YnRvdGFsOiB0cmFjay50b3RhbCgpLFxuICAgIGN1c3RvbWVyX2lkOiBpZGVudGlmeS51c2VySWQoKSxcbiAgICBmaXJzdF9uYW1lOiBpZGVudGlmeS5maXJzdE5hbWUoKSxcbiAgICBsYXN0X25hbWU6IGlkZW50aWZ5Lmxhc3ROYW1lKCksXG4gICAgZW1haWw6IGlkZW50aWZ5LmVtYWlsKCksXG4gICAgaXRlbXM6IGl0ZW1zXG4gIH0pO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBhbGlhcyA9IHJlcXVpcmUoJ2FsaWFzJyk7XG52YXIgY29udmVydERhdGVzID0gcmVxdWlyZSgnY29udmVydC1kYXRlcycpO1xudmFyIElkZW50aWZ5ID0gcmVxdWlyZSgnZmFjYWRlJykuSWRlbnRpZnk7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcblxuLyoqXG4gKiBFeHBvc2UgYEN1c3RvbWVyaW9gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBDdXN0b21lcmlvID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignQ3VzdG9tZXIuaW8nKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2NpbycpXG4gIC5vcHRpb24oJ3NpdGVJZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IGlkPVwiY2lvLXRyYWNrZXJcIiBzcmM9XCJodHRwczovL2Fzc2V0cy5jdXN0b21lci5pby9hc3NldHMvdHJhY2suanNcIiBkYXRhLXNpdGUtaWQ9XCJ7eyBzaXRlSWQgfX1cIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9jdXN0b21lci5pby9kb2NzL2FwaS9qYXZhc2NyaXB0Lmh0bWxcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkN1c3RvbWVyaW8ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9jaW8gPSB3aW5kb3cuX2NpbyB8fCBbXTtcbiAgKGZ1bmN0aW9uKCl7dmFyIGEsYixjOyBhID0gZnVuY3Rpb24oZil7cmV0dXJuIGZ1bmN0aW9uKCl7d2luZG93Ll9jaW8ucHVzaChbZl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpOyB9OyB9OyBiID0gWydpZGVudGlmeScsICd0cmFjayddOyBmb3IgKGMgPSAwOyBjIDwgYi5sZW5ndGg7IGMrKykge3dpbmRvdy5fY2lvW2JbY11dID0gYShiW2NdKTsgfSB9KSgpO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkN1c3RvbWVyaW8ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAoISEgd2luZG93Ll9jaW8pICYmICh3aW5kb3cuX2Npby5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIGh0dHA6Ly9jdXN0b21lci5pby9kb2NzL2FwaS9qYXZhc2NyaXB0Lmh0bWwjc2VjdGlvbi1JZGVudGlmeV9jdXN0b21lcnNcbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkN1c3RvbWVyaW8ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICBpZiAoIWlkZW50aWZ5LnVzZXJJZCgpKSByZXR1cm4gdGhpcy5kZWJ1ZygndXNlciBpZCByZXF1aXJlZCcpO1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKHsgY3JlYXRlZDogJ2NyZWF0ZWRfYXQnIH0pO1xuICB0cmFpdHMgPSBjb252ZXJ0RGF0ZXModHJhaXRzLCBjb252ZXJ0RGF0ZSk7XG4gIHdpbmRvdy5fY2lvLmlkZW50aWZ5KHRyYWl0cyk7XG59O1xuXG4vKipcbiAqIEdyb3VwLlxuICpcbiAqIEBwYXJhbSB7R3JvdXB9IGdyb3VwXG4gKi9cblxuQ3VzdG9tZXJpby5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbihncm91cCl7XG4gIHZhciB0cmFpdHMgPSBncm91cC50cmFpdHMoKTtcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG5cbiAgdHJhaXRzID0gYWxpYXModHJhaXRzLCBmdW5jdGlvbih0cmFpdCl7XG4gICAgcmV0dXJuICdHcm91cCAnICsgdHJhaXQ7XG4gIH0pO1xuXG4gIHRoaXMuaWRlbnRpZnkobmV3IElkZW50aWZ5KHtcbiAgICB1c2VySWQ6IHVzZXIuaWQoKSxcbiAgICB0cmFpdHM6IHRyYWl0c1xuICB9KSk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIGh0dHA6Ly9jdXN0b21lci5pby9kb2NzL2FwaS9qYXZhc2NyaXB0Lmh0bWwjc2VjdGlvbi1UcmFja19hX2N1c3RvbV9ldmVudFxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuQ3VzdG9tZXJpby5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9wZXJ0aWVzID0gdHJhY2sucHJvcGVydGllcygpO1xuICBwcm9wZXJ0aWVzID0gY29udmVydERhdGVzKHByb3BlcnRpZXMsIGNvbnZlcnREYXRlKTtcbiAgd2luZG93Ll9jaW8udHJhY2sodHJhY2suZXZlbnQoKSwgcHJvcGVydGllcyk7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgYSBkYXRlIHRvIHRoZSBmb3JtYXQgQ3VzdG9tZXIuaW8gc3VwcG9ydHMuXG4gKlxuICogQHBhcmFtIHtEYXRlfSBkYXRlXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gY29udmVydERhdGUoZGF0ZSl7XG4gIHJldHVybiBNYXRoLmZsb29yKGRhdGUuZ2V0VGltZSgpIC8gMTAwMCk7XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgYWxpYXMgPSByZXF1aXJlKCdhbGlhcycpO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xudmFyIGxvYWQgPSByZXF1aXJlKCdsb2FkLXNjcmlwdCcpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX2RjcScpO1xuXG4vKipcbiAqIEV4cG9zZSBgRHJpcGAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIERyaXAgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdEcmlwJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ2RjJylcbiAgLmdsb2JhbCgnX2RjcScpXG4gIC5nbG9iYWwoJ19kY3MnKVxuICAub3B0aW9uKCdhY2NvdW50JywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy90YWcuZ2V0ZHJpcC5jb20ve3sgYWNjb3VudCB9fS5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5EcmlwLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fZGNxID0gd2luZG93Ll9kY3EgfHwgW107XG4gIHdpbmRvdy5fZGNzID0gd2luZG93Ll9kY3MgfHwge307XG4gIHdpbmRvdy5fZGNzLmFjY291bnQgPSB0aGlzLm9wdGlvbnMuYWNjb3VudDtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5EcmlwLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMub2JqZWN0KHdpbmRvdy5kYyk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuRHJpcC5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgdmFyIGNlbnRzID0gdHJhY2suY2VudHMoKTtcbiAgaWYgKGNlbnRzKSBwcm9wcy52YWx1ZSA9IGNlbnRzO1xuICBkZWxldGUgcHJvcHMucmV2ZW51ZTtcbiAgcHVzaCgndHJhY2snLCB0cmFjay5ldmVudCgpLCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuRHJpcC5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAoaWRlbnRpZnkpIHtcbiAgcHVzaCgnaWRlbnRpZnknLCBpZGVudGlmeS50cmFpdHMoKSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGV4dGVuZCA9IHJlcXVpcmUoJ2V4dGVuZCcpO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgb25FcnJvciA9IHJlcXVpcmUoJ29uLWVycm9yJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfZXJycycpO1xuXG4vKipcbiAqIEV4cG9zZSBgRXJyb3JjZXB0aW9uYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgRXJyb3JjZXB0aW9uID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignRXJyb3JjZXB0aW9uJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19lcnJzJylcbiAgLm9wdGlvbigncHJvamVjdElkJywgJycpXG4gIC5vcHRpb24oJ21ldGEnLCB0cnVlKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vYmVhY29uLmVycm9yY2VwdGlvbi5jb20ve3sgcHJvamVjdElkIH19LmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW1wbGl0dWRlL0Vycm9yY2VwdGlvbi1KYXZhc2NyaXB0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5FcnJvcmNlcHRpb24ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9lcnJzID0gd2luZG93Ll9lcnJzIHx8IFt0aGlzLm9wdGlvbnMucHJvamVjdElkXTtcbiAgb25FcnJvcihwdXNoKTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5FcnJvcmNlcHRpb24ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9lcnJzICYmIHdpbmRvdy5fZXJycy5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIGh0dHA6Ly9ibG9nLmVycm9yY2VwdGlvbi5jb20vMjAxMi8xMS9jYXB0dXJlLWN1c3RvbS1kYXRhLXdpdGgteW91ci1lcnJvcnMuaHRtbFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBpZGVudGlmeVxuICovXG5cbkVycm9yY2VwdGlvbi5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIGlmICghdGhpcy5vcHRpb25zLm1ldGEpIHJldHVybjtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICB3aW5kb3cuX2VycnMgPSB3aW5kb3cuX2VycnMgfHwgW107XG4gIHdpbmRvdy5fZXJycy5tZXRhID0gd2luZG93Ll9lcnJzLm1ldGEgfHwge307XG4gIGV4dGVuZCh3aW5kb3cuX2VycnMubWV0YSwgdHJhaXRzKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX2FhcScpO1xuXG4vKipcbiAqIEV4cG9zZSBgRXZlcmdhZ2VgIGludGVncmF0aW9uLmludGVncmF0aW9uLlxuICovXG5cbnZhciBFdmVyZ2FnZSA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0V2ZXJnYWdlJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19hYXEnKVxuICAub3B0aW9uKCdhY2NvdW50JywgJycpXG4gIC5vcHRpb24oJ2RhdGFzZXQnLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2Nkbi5ldmVyZ2FnZS5jb20vYmVhY29uL3t7IGFjY291bnQgfX0ve3sgZGF0YXNldCB9fS9zY3JpcHRzL2V2ZXJnYWdlLm1pbi5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5FdmVyZ2FnZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgYWNjb3VudCA9IHRoaXMub3B0aW9ucy5hY2NvdW50O1xuICB2YXIgZGF0YXNldCA9IHRoaXMub3B0aW9ucy5kYXRhc2V0O1xuXG4gIHdpbmRvdy5fYWFxID0gd2luZG93Ll9hYXEgfHwgW107XG4gIHB1c2goJ3NldEV2ZXJnYWdlQWNjb3VudCcsIGFjY291bnQpO1xuICBwdXNoKCdzZXREYXRhc2V0JywgZGF0YXNldCk7XG4gIHB1c2goJ3NldFVzZVNpdGVDb25maWcnLCB0cnVlKTtcblxuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkV2ZXJnYWdlLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5fYWFxICYmIHdpbmRvdy5fYWFxLnB1c2ggIT09IEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5FdmVyZ2FnZS5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgcHJvcHMgPSBwYWdlLnByb3BlcnRpZXMoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLm5hbWUoKTtcbiAgaWYgKG5hbWUpIHB1c2goJ25hbWVQYWdlJywgbmFtZSk7XG5cbiAgZWFjaChwcm9wcywgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgcHVzaCgnc2V0Q3VzdG9tRmllbGQnLCBrZXksIHZhbHVlLCAncGFnZScpO1xuICB9KTtcblxuICB3aW5kb3cuRXZlcmdhZ2UuaW5pdCh0cnVlKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5FdmVyZ2FnZS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuICBpZiAoIWlkKSByZXR1cm47XG5cbiAgcHVzaCgnc2V0VXNlcicsIGlkKTtcblxuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKHtcbiAgICBlbWFpbDogJ3VzZXJFbWFpbCcsXG4gICAgbmFtZTogJ3VzZXJOYW1lJ1xuICB9KTtcblxuICBlYWNoKHRyYWl0cywgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgcHVzaCgnc2V0VXNlckZpZWxkJywga2V5LCB2YWx1ZSwgJ3BhZ2UnKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEdyb3VwLlxuICpcbiAqIEBwYXJhbSB7R3JvdXB9IGdyb3VwXG4gKi9cblxuRXZlcmdhZ2UucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24oZ3JvdXApe1xuICB2YXIgcHJvcHMgPSBncm91cC50cmFpdHMoKTtcbiAgdmFyIGlkID0gZ3JvdXAuZ3JvdXBJZCgpO1xuICBpZiAoIWlkKSByZXR1cm47XG5cbiAgcHVzaCgnc2V0Q29tcGFueScsIGlkKTtcbiAgZWFjaChwcm9wcywgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgcHVzaCgnc2V0QWNjb3VudEZpZWxkJywga2V5LCB2YWx1ZSwgJ3BhZ2UnKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuRXZlcmdhZ2UucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICBwdXNoKCd0cmFja0FjdGlvbicsIHRyYWNrLmV2ZW50KCksIHRyYWNrLnByb3BlcnRpZXMoKSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfZmJxJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcblxuLyoqXG4gKiBIT1BcbiAqL1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBFeHBvc2UgYEZhY2Vib29rYFxuICovXG5cbnZhciBGYWNlYm9vayA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0ZhY2Vib29rIENvbnZlcnNpb24gVHJhY2tpbmcnKVxuICAuZ2xvYmFsKCdfZmJxJylcbiAgLm9wdGlvbignY3VycmVuY3knLCAnVVNEJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2Nvbm5lY3QuZmFjZWJvb2submV0L2VuX1VTL2ZiZHMuanNcIj4nKVxuICAubWFwcGluZygnZXZlbnRzJyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBGYWNlYm9vayBDb252ZXJzaW9uIFRyYWNraW5nXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS9kb2NzL2Fkcy1mb3Itd2Vic2l0ZXMvY29udmVyc2lvbi1waXhlbC1jb2RlLW1pZ3JhdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuRmFjZWJvb2sucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9mYnEgPSB3aW5kb3cuX2ZicSB8fCBbXTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xuICB3aW5kb3cuX2ZicS5sb2FkZWQgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5GYWNlYm9vay5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX2ZicSAmJiB3aW5kb3cuX2ZicS5sb2FkZWQpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL2RvY3MvcmVmZXJlbmNlL2Fkcy1hcGkvY3VzdG9tLWF1ZGllbmNlLXdlYnNpdGUtZmFxLyNmYnBpeGVsXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5GYWNlYm9vay5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBldmVudCA9IHRyYWNrLmV2ZW50KCk7XG4gIHZhciBldmVudHMgPSB0aGlzLmV2ZW50cyhldmVudCk7XG4gIHZhciByZXZlbnVlID0gdHJhY2sucmV2ZW51ZSgpIHx8IDA7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICBlYWNoKGV2ZW50cywgZnVuY3Rpb24oZXZlbnQpe1xuICAgIHB1c2goJ3RyYWNrJywgZXZlbnQsIHtcbiAgICAgIHZhbHVlOiBTdHJpbmcocmV2ZW51ZS50b0ZpeGVkKDIpKSxcbiAgICAgIGN1cnJlbmN5OiBzZWxmLm9wdGlvbnMuY3VycmVuY3lcbiAgICB9KTtcbiAgfSk7XG5cbiAgaWYgKCFldmVudHMubGVuZ3RoKSB7XG4gICAgdmFyIGRhdGEgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gICAgcHVzaCgndHJhY2snLCBldmVudCwgZGF0YSk7XG4gIH1cbn07XG4iLCJcclxuLyoqXHJcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXHJcbiAqL1xyXG5cclxudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX2Z4bScpO1xyXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcclxudmFyIFRyYWNrID0gcmVxdWlyZSgnZmFjYWRlJykuVHJhY2s7XHJcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xyXG5cclxuLyoqXHJcbiAqIEV4cG9zZSBgRm94TWV0cmljc2AgaW50ZWdyYXRpb24uXHJcbiAqL1xyXG5cclxudmFyIEZveE1ldHJpY3MgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdGb3hNZXRyaWNzJylcclxuICAuYXNzdW1lc1BhZ2V2aWV3KClcclxuICAuZ2xvYmFsKCdfZnhtJylcclxuICAub3B0aW9uKCdhcHBJZCcsICcnKVxyXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9kMzV0Y2E3dm1lZmtyYy5jbG91ZGZyb250Lm5ldC9zY3JpcHRzL3t7IGFwcElkIH19LmpzXCI+Jyk7XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZS5cclxuICpcclxuICogaHR0cDovL2ZveG1ldHJpY3MuY29tL2RvY3VtZW50YXRpb24vYXBpamF2YXNjcmlwdFxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxyXG4gKi9cclxuXHJcbkZveE1ldHJpY3MucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcclxuICB3aW5kb3cuX2Z4bSA9IHdpbmRvdy5fZnhtIHx8IFtdO1xyXG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBMb2FkZWQ/XHJcbiAqXHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAqL1xyXG5cclxuRm94TWV0cmljcy5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcclxuICByZXR1cm4gISEgKHdpbmRvdy5fZnhtICYmIHdpbmRvdy5fZnhtLmFwcElkKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBQYWdlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcclxuICovXHJcblxyXG5Gb3hNZXRyaWNzLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XHJcbiAgdmFyIHByb3BlcnRpZXMgPSBwYWdlLnByb3h5KCdwcm9wZXJ0aWVzJyk7XHJcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xyXG4gIHZhciBuYW1lID0gcGFnZS5uYW1lKCk7XHJcbiAgdGhpcy5fY2F0ZWdvcnkgPSBjYXRlZ29yeTsgLy8gc3RvcmUgZm9yIGxhdGVyXHJcblxyXG4gIHB1c2goXHJcbiAgICAnX2Z4bS5wYWdlcy52aWV3JyxcclxuICAgIHByb3BlcnRpZXMudGl0bGUsICAgLy8gdGl0bGVcclxuICAgIG5hbWUsICAgICAgICAgICAgICAgLy8gbmFtZVxyXG4gICAgY2F0ZWdvcnksICAgICAgICAgICAvLyBjYXRlZ29yeVxyXG4gICAgcHJvcGVydGllcy51cmwsICAgICAvLyB1cmxcclxuICAgIHByb3BlcnRpZXMucmVmZXJyZXIgLy8gcmVmZXJyZXJcclxuICApO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIElkZW50aWZ5LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxyXG4gKi9cclxuXHJcbkZveE1ldHJpY3MucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xyXG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xyXG5cclxuICBpZiAoIWlkKSByZXR1cm47XHJcblxyXG4gIHB1c2goXHJcbiAgICAnX2Z4bS52aXNpdG9yLnByb2ZpbGUnLFxyXG4gICAgaWQsICAgICAgICAgICAgICAgICAgICAvLyB1c2VyIGlkXHJcbiAgICBpZGVudGlmeS5maXJzdE5hbWUoKSwgLy8gZmlyc3QgbmFtZVxyXG4gICAgaWRlbnRpZnkubGFzdE5hbWUoKSwgIC8vIGxhc3QgbmFtZVxyXG4gICAgaWRlbnRpZnkuZW1haWwoKSwgICAgIC8vIGVtYWlsXHJcbiAgICBpZGVudGlmeS5hZGRyZXNzKCksICAgLy8gYWRkcmVzc1xyXG4gICAgdW5kZWZpbmVkLCAgICAgICAgICAgIC8vIHNvY2lhbFxyXG4gICAgdW5kZWZpbmVkLCAgICAgICAgICAgIC8vIHBhcnRuZXJzXHJcbiAgICBpZGVudGlmeS50cmFpdHMoKSAgICAgLy8gYXR0cmlidXRlc1xyXG4gICk7XHJcbn07XHJcblxyXG4vKipcclxuICogVHJhY2suXHJcbiAqXHJcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXHJcbiAqL1xyXG5cclxuRm94TWV0cmljcy5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XHJcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xyXG4gIHZhciBjYXRlZ29yeSA9IHRoaXMuX2NhdGVnb3J5IHx8IHByb3BzLmNhdGVnb3J5O1xyXG4gIHB1c2godHJhY2suZXZlbnQoKSwgY2F0ZWdvcnksIHByb3BzKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBWaWV3ZWQgcHJvZHVjdC5cclxuICpcclxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcclxuICogQGFwaSBwcml2YXRlXHJcbiAqL1xyXG5cclxuRm94TWV0cmljcy5wcm90b3R5cGUudmlld2VkUHJvZHVjdCA9IGZ1bmN0aW9uKHRyYWNrKXtcclxuICBlY29tbWVyY2UoJ3Byb2R1Y3R2aWV3JywgdHJhY2spO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZWQgcHJvZHVjdC5cclxuICpcclxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcclxuICogQGFwaSBwcml2YXRlXHJcbiAqL1xyXG5cclxuRm94TWV0cmljcy5wcm90b3R5cGUucmVtb3ZlZFByb2R1Y3QgPSBmdW5jdGlvbih0cmFjayl7XHJcbiAgZWNvbW1lcmNlKCdyZW1vdmVjYXJ0aXRlbScsIHRyYWNrKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGRlZCBwcm9kdWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xyXG4gKiBAYXBpIHByaXZhdGVcclxuICovXHJcblxyXG5Gb3hNZXRyaWNzLnByb3RvdHlwZS5hZGRlZFByb2R1Y3QgPSBmdW5jdGlvbih0cmFjayl7XHJcbiAgZWNvbW1lcmNlKCdjYXJ0aXRlbScsIHRyYWNrKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb21wbGV0ZWQgT3JkZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXHJcbiAqIEBhcGkgcHJpdmF0ZVxyXG4gKi9cclxuXHJcbkZveE1ldHJpY3MucHJvdG90eXBlLmNvbXBsZXRlZE9yZGVyID0gZnVuY3Rpb24odHJhY2spe1xyXG4gIHZhciBvcmRlcklkID0gdHJhY2sub3JkZXJJZCgpO1xyXG5cclxuICAvLyB0cmFuc2FjdGlvblxyXG4gIHB1c2goXHJcbiAgICAnX2Z4bS5lY29tbWVyY2Uub3JkZXInLFxyXG4gICAgb3JkZXJJZCxcclxuICAgIHRyYWNrLnN1YnRvdGFsKCksXHJcbiAgICB0cmFjay5zaGlwcGluZygpLFxyXG4gICAgdHJhY2sudGF4KCksXHJcbiAgICB0cmFjay5jaXR5KCksXHJcbiAgICB0cmFjay5zdGF0ZSgpLFxyXG4gICAgdHJhY2suemlwKCksXHJcbiAgICB0cmFjay5xdWFudGl0eSgpXHJcbiAgKTtcclxuXHJcbiAgLy8gaXRlbXNcclxuICBlYWNoKHRyYWNrLnByb2R1Y3RzKCksIGZ1bmN0aW9uKHByb2R1Y3Qpe1xyXG4gICAgdmFyIHRyYWNrID0gbmV3IFRyYWNrKHsgcHJvcGVydGllczogcHJvZHVjdCB9KTtcclxuICAgIGVjb21tZXJjZSgncHVyY2hhc2VpdGVtJywgdHJhY2ssIFtcclxuICAgICAgdHJhY2sucXVhbnRpdHkoKSxcclxuICAgICAgdHJhY2sucHJpY2UoKSxcclxuICAgICAgb3JkZXJJZFxyXG4gICAgXSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogVHJhY2sgZWNvbW1lcmNlIGBldmVudGAgd2l0aCBgdHJhY2tgXHJcbiAqIHdpdGggb3B0aW9uYWwgYGFycmAgdG8gYXBwZW5kLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcclxuICogQHBhcmFtIHtBcnJheX0gYXJyXHJcbiAqIEBhcGkgcHJpdmF0ZVxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIGVjb21tZXJjZShldmVudCwgdHJhY2ssIGFycil7XHJcbiAgcHVzaC5hcHBseShudWxsLCBbXHJcbiAgICAnX2Z4bS5lY29tbWVyY2UuJyArIGV2ZW50LFxyXG4gICAgdHJhY2suaWQoKSB8fCB0cmFjay5za3UoKSxcclxuICAgIHRyYWNrLm5hbWUoKSxcclxuICAgIHRyYWNrLmNhdGVnb3J5KClcclxuICBdLmNvbmNhdChhcnIgfHwgW10pKTtcclxufVxyXG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnYmluZCcpO1xudmFyIHdoZW4gPSByZXF1aXJlKCd3aGVuJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgRnJvbnRsZWFmYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgRnJvbnRsZWFmID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignRnJvbnRsZWFmJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19mbCcpXG4gIC5nbG9iYWwoJ19mbEJhc2VVcmwnKVxuICAub3B0aW9uKCdiYXNlVXJsJywgJ2h0dHBzOi8vYXBpLmZyb250bGVhZi5jb20nKVxuICAub3B0aW9uKCd0b2tlbicsICcnKVxuICAub3B0aW9uKCdzdHJlYW0nLCAnJylcbiAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgZmFsc2UpXG4gIC5vcHRpb24oJ3RyYWNrQ2F0ZWdvcml6ZWRQYWdlcycsIGZhbHNlKVxuICAudGFnKCc8c2NyaXB0IGlkPVwiX2ZsXCIgc3JjPVwie3sgYmFzZVVybCB9fS9saWIvdHJhY2tlci5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL2RvY3MuZnJvbnRsZWFmLmNvbS8jL3RlY2huaWNhbC1pbXBsZW1lbnRhdGlvbi90cmFja2luZy1jdXN0b21lcnMvdHJhY2tpbmctYmVhY29uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Gcm9udGxlYWYucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9mbCA9IHdpbmRvdy5fZmwgfHwgW107XG4gIHdpbmRvdy5fZmxCYXNlVXJsID0gd2luZG93Ll9mbEJhc2VVcmwgfHwgdGhpcy5vcHRpb25zLmJhc2VVcmw7XG4gIHRoaXMuX3B1c2goJ3NldEFwaVRva2VuJywgdGhpcy5vcHRpb25zLnRva2VuKTtcbiAgdGhpcy5fcHVzaCgnc2V0U3RyZWFtJywgdGhpcy5vcHRpb25zLnN0cmVhbSk7XG4gIHZhciBsb2FkZWQgPSBiaW5kKHRoaXMsIHRoaXMubG9hZGVkKTtcbiAgdmFyIHJlYWR5ID0gdGhpcy5yZWFkeTtcbiAgdGhpcy5sb2FkKHsgYmFzZVVybDogd2luZG93Ll9mbEJhc2VVcmwgfSwgdGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkZyb250bGVhZi5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGlzLmFycmF5KHdpbmRvdy5fZmwpICYmIHdpbmRvdy5fZmwucmVhZHkgPT09IHRydWU7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuRnJvbnRsZWFmLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHVzZXJJZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuICBpZiAodXNlcklkKSB7XG4gICAgdGhpcy5fcHVzaCgnc2V0VXNlcicsIHtcbiAgICAgIGlkOiB1c2VySWQsXG4gICAgICBuYW1lOiBpZGVudGlmeS5uYW1lKCkgfHwgaWRlbnRpZnkudXNlcm5hbWUoKSxcbiAgICAgIGRhdGE6IGNsZWFuKGlkZW50aWZ5LnRyYWl0cygpKVxuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIEdyb3VwLlxuICpcbiAqIEBwYXJhbSB7R3JvdXB9IGdyb3VwXG4gKi9cblxuRnJvbnRsZWFmLnByb3RvdHlwZS5ncm91cCA9IGZ1bmN0aW9uKGdyb3VwKXtcbiAgdmFyIGdyb3VwSWQgPSBncm91cC5ncm91cElkKCk7XG4gIGlmIChncm91cElkKSB7XG4gICAgdGhpcy5fcHVzaCgnc2V0QWNjb3VudCcsIHtcbiAgICAgIGlkOiBncm91cElkLFxuICAgICAgbmFtZTogZ3JvdXAucHJveHkoJ3RyYWl0cy5uYW1lJyksXG4gICAgICBkYXRhOiBjbGVhbihncm91cC50cmFpdHMoKSlcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbkZyb250bGVhZi5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgY2F0ZWdvcnkgPSBwYWdlLmNhdGVnb3J5KCk7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcblxuICAvLyBjYXRlZ29yaXplZCBwYWdlc1xuICBpZiAoY2F0ZWdvcnkgJiYgb3B0cy50cmFja0NhdGVnb3JpemVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2soY2F0ZWdvcnkpKTtcbiAgfVxuXG4gIC8vIG5hbWVkIHBhZ2VzXG4gIGlmIChuYW1lICYmIG9wdHMudHJhY2tOYW1lZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKG5hbWUpKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkZyb250bGVhZi5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBldmVudCA9IHRyYWNrLmV2ZW50KCk7XG4gIHRoaXMuX3B1c2goJ2V2ZW50JywgZXZlbnQsIGNsZWFuKHRyYWNrLnByb3BlcnRpZXMoKSkpO1xufTtcblxuLyoqXG4gKiBQdXNoIGEgY29tbWFuZCBvbnRvIHRoZSBnbG9iYWwgRnJvbnRsZWFmIHF1ZXVlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjb21tYW5kXG4gKiBAcmV0dXJuIHtPYmplY3R9IGFyZ3NcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbkZyb250bGVhZi5wcm90b3R5cGUuX3B1c2ggPSBmdW5jdGlvbihjb21tYW5kKXtcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIHdpbmRvdy5fZmwucHVzaChmdW5jdGlvbih0KXsgdFtjb21tYW5kXS5hcHBseShjb21tYW5kLCBhcmdzKTsgfSk7XG59O1xuXG4vKipcbiAqIENsZWFuIGFsbCBuZXN0ZWQgb2JqZWN0cyBhbmQgYXJyYXlzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGNsZWFuKG9iail7XG4gIHZhciByZXQgPSB7fTtcblxuICAvLyBSZW1vdmUgdHJhaXRzL3Byb3BlcnRpZXMgdGhhdCBhcmUgYWxyZWFkeSByZXByZXNlbnRlZFxuICAvLyBvdXRzaWRlIG9mIHRoZSBkYXRhIGNvbnRhaW5lclxuICB2YXIgZXhjbHVkZUtleXMgPSBbXCJpZFwiLFwibmFtZVwiLFwiZmlyc3ROYW1lXCIsXCJsYXN0TmFtZVwiXTtcbiAgdmFyIGxlbiA9IGV4Y2x1ZGVLZXlzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNsZWFyKG9iaiwgZXhjbHVkZUtleXNbaV0pO1xuICB9XG5cbiAgLy8gRmxhdHRlbiBuZXN0ZWQgaGllcmFyY2h5LCBwcmVzZXJ2aW5nIGFycmF5c1xuICBvYmogPSBmbGF0dGVuKG9iaik7XG5cbiAgLy8gRGlzY2FyZCBudWxscywgcmVwcmVzZW50IGFycmF5cyBhcyBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nc1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgdmFyIHZhbCA9IG9ialtrZXldO1xuICAgIGlmIChudWxsID09IHZhbCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGlzLmFycmF5KHZhbCkpIHtcbiAgICAgIHJldFtrZXldID0gdmFsLnRvU3RyaW5nKCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICByZXRba2V5XSA9IHZhbDtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogUmVtb3ZlIGEgcHJvcGVydHkgZnJvbSBhbiBvYmplY3QgaWYgc2V0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGNsZWFyKG9iaiwga2V5KXtcbiAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgZGVsZXRlIG9ialtrZXldO1xuICB9XG59XG5cbi8qKlxuICogRmxhdHRlbiBhIG5lc3RlZCBvYmplY3QgaW50byBhIHNpbmdsZSBsZXZlbCBzcGFjZS1kZWxpbWl0ZWRcbiAqIGhpZXJhcmNoeS5cbiAqXG4gKiBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vaHVnaHNrL2ZsYXRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbGF0dGVuKHNvdXJjZSl7XG4gIHZhciBvdXRwdXQgPSB7fTtcblxuICBmdW5jdGlvbiBzdGVwKG9iamVjdCwgcHJldil7XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAgdmFyIHZhbHVlID0gb2JqZWN0W2tleV07XG4gICAgICB2YXIgbmV3S2V5ID0gcHJldiA/IHByZXYgKyAnICcgKyBrZXkgOiBrZXk7XG5cbiAgICAgIGlmICghaXMuYXJyYXkodmFsdWUpICYmIGlzLm9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHN0ZXAodmFsdWUsIG5ld0tleSk7XG4gICAgICB9XG5cbiAgICAgIG91dHB1dFtuZXdLZXldID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgc3RlcChzb3VyY2UpO1xuXG4gIHJldHVybiBvdXRwdXQ7XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcblxuLyoqXG4gKiBFeHBvc2UgYEZ1bGxTdG9yeWAgaW50ZWdyYXRpb24uXG4gKlxuICogaHR0cHM6Ly93d3cuZnVsbHN0b3J5LmNvbS9kb2NzL2RldmVsb3BlclxuICovXG5cbnZhciBGdWxsU3RvcnkgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdGdWxsU3RvcnknKVxuICAub3B0aW9uKCdvcmcnLCAnJylcbiAgLm9wdGlvbignZGVidWcnLCBmYWxzZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCJodHRwczovL3d3dy5mdWxsc3RvcnkuY29tL3MvZnMuanNcIj48L3NjcmlwdD4nKVxuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKi9cblxuRnVsbFN0b3J5LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB3aW5kb3dbJ19mc19kZWJ1ZyddID0gdGhpcy5vcHRpb25zLmRlYnVnO1xuICB3aW5kb3dbJ19mc19ob3N0J10gPSAnd3d3LmZ1bGxzdG9yeS5jb20nO1xuICB3aW5kb3dbJ19mc19vcmcnXSA9IHRoaXMub3B0aW9ucy5vcmc7XG5cbiAgKGZ1bmN0aW9uKG0sbixlLHQsbCxvLGcseSl7XG4gICAgZz1tW2VdPWZ1bmN0aW9uKGEsYil7Zy5xP2cucS5wdXNoKFthLGJdKTpnLl9hcGkoYSxiKTt9O2cucT1bXTtcbiAgICBnLmlkZW50aWZ5PWZ1bmN0aW9uKGksdil7ZyhsLHt1aWQ6aX0pO2lmKHYpZyhsLHYpfTtnLnNldFVzZXJWYXJzPWZ1bmN0aW9uKHYpe0ZTKGwsdil9O1xuICAgIGcuc2V0U2Vzc2lvblZhcnM9ZnVuY3Rpb24odil7RlMoJ3Nlc3Npb24nLHYpfTtnLnNldFBhZ2VWYXJzPWZ1bmN0aW9uKHYpe0ZTKCdwYWdlJyx2KX07IFxuICAgIHNlbGYucmVhZHkoKTtcbiAgICBzZWxmLmxvYWQoKTtcbiAgfSkod2luZG93LGRvY3VtZW50LCdGUycsJ3NjcmlwdCcsJ3VzZXInKTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuRnVsbFN0b3J5LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LkZTO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkZ1bGxTdG9yeS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKCk7XG4gIHRyYWl0cy5kaXNwbGF5TmFtZSA9IGlkZW50aWZ5Lm5hbWUoKTtcbiAgdHJhaXRzLmVtYWlsID0gaWRlbnRpZnkuZW1haWwoKTtcbiAgaWYgKCFpZCkgcmV0dXJuOyAvLyBpZCBpcyByZXF1aXJlZFxuICB3aW5kb3cuRlMuaWRlbnRpZnkoaWQsIHRyYWl0cyk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfZ2F1Z2VzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBHYXVnZXNgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBHYXVnZXMgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdHYXVnZXMnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2dhdWdlcycpXG4gIC5vcHRpb24oJ3NpdGVJZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IGlkPVwiZ2F1Z2VzLXRyYWNrZXJcIiBzcmM9XCIvL3NlY3VyZS5nYXVnLmVzL3RyYWNrLmpzXCIgZGF0YS1zaXRlLWlkPVwie3sgc2l0ZUlkIH19XCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBHYXVnZXMuXG4gKlxuICogaHR0cDovL2dldC5nYXVnLmVzL2RvY3VtZW50YXRpb24vdHJhY2tpbmcvXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5HYXVnZXMucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9nYXVnZXMgPSB3aW5kb3cuX2dhdWdlcyB8fCBbXTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5HYXVnZXMucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9nYXVnZXMgJiYgd2luZG93Ll9nYXVnZXMucHVzaCAhPT0gQXJyYXkucHJvdG90eXBlLnB1c2gpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbkdhdWdlcy5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICBwdXNoKCd0cmFjaycpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIG9uQm9keSA9IHJlcXVpcmUoJ29uLWJvZHknKTtcblxuLyoqXG4gKiBFeHBvc2UgYEdldFNhdGlzZmFjdGlvbmAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEdldFNhdGlzZmFjdGlvbiA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0dldCBTYXRpc2ZhY3Rpb24nKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnR1NGTicpXG4gIC5vcHRpb24oJ3dpZGdldElkJywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9sb2FkZXIuZW5nYWdlLmdzZm4udXMvbG9hZGVyLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL2NvbnNvbGUuZ2V0c2F0aXNmYWN0aW9uLmNvbS9zdGFydC8xMDEwMjI/c2lnbnVwPXRydWUjZW5nYWdlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5HZXRTYXRpc2ZhY3Rpb24ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgd2lkZ2V0ID0gdGhpcy5vcHRpb25zLndpZGdldElkO1xuICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHZhciBpZCA9IGRpdi5pZCA9ICdnZXRzYXQtd2lkZ2V0LScgKyB3aWRnZXQ7XG4gIG9uQm9keShmdW5jdGlvbihib2R5KXsgYm9keS5hcHBlbmRDaGlsZChkaXYpOyB9KTtcblxuICAvLyB1c3VhbGx5IHRoZSBzbmlwcGV0IGlzIHN5bmMsIHNvIHdhaXQgZm9yIGl0IGJlZm9yZSBpbml0aWFsaXppbmcgdGhlIHRhYlxuICB0aGlzLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB3aW5kb3cuR1NGTi5sb2FkV2lkZ2V0KHdpZGdldCwgeyBjb250YWluZXJJZDogaWQgfSk7XG4gICAgc2VsZi5yZWFkeSgpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuR2V0U2F0aXNmYWN0aW9uLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LkdTRk47XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfZ2FxJyk7XG52YXIgbGVuZ3RoID0gcmVxdWlyZSgnb2JqZWN0JykubGVuZ3RoO1xudmFyIGNhbm9uaWNhbCA9IHJlcXVpcmUoJ2Nhbm9uaWNhbCcpO1xudmFyIHVzZUh0dHBzID0gcmVxdWlyZSgndXNlLWh0dHBzJyk7XG52YXIgVHJhY2sgPSByZXF1aXJlKCdmYWNhZGUnKS5UcmFjaztcbnZhciBjYWxsYmFjayA9IHJlcXVpcmUoJ2NhbGxiYWNrJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCdkZWZhdWx0cycpO1xudmFyIGxvYWQgPSByZXF1aXJlKCdsb2FkLXNjcmlwdCcpO1xudmFyIGtleXMgPSByZXF1aXJlKCdvYmplY3QnKS5rZXlzO1xudmFyIHNlbGVjdCA9IHJlcXVpcmUoJ3NlbGVjdCcpO1xudmFyIGRvdCA9IHJlcXVpcmUoJ29iai1jYXNlJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcbnZhciB0eXBlID0gcmVxdWlyZSgndHlwZScpO1xudmFyIHVybCA9IHJlcXVpcmUoJ3VybCcpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcbnZhciBncm91cDtcbnZhciB1c2VyO1xuXG4vKipcbiAqIEV4cG9zZSBwbHVnaW4uXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzID0gZnVuY3Rpb24oYW5hbHl0aWNzKXtcbiAgYW5hbHl0aWNzLmFkZEludGVncmF0aW9uKEdBKTtcbiAgZ3JvdXAgPSBhbmFseXRpY3MuZ3JvdXAoKTtcbiAgdXNlciA9IGFuYWx5dGljcy51c2VyKCk7XG59O1xuXG4vKipcbiAqIEV4cG9zZSBgR0FgIGludGVncmF0aW9uLlxuICpcbiAqIGh0dHA6Ly9zdXBwb3J0Lmdvb2dsZS5jb20vYW5hbHl0aWNzL2Jpbi9hbnN3ZXIucHk/aGw9ZW4mYW5zd2VyPTI1NTg4NjdcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9nYWpzL21ldGhvZHMvZ2FKU0FwaUJhc2ljQ29uZmlndXJhdGlvbiNfZ2F0LkdBX1RyYWNrZXJfLl9zZXRTaXRlU3BlZWRTYW1wbGVSYXRlXG4gKi9cblxudmFyIEdBID0gZXhwb3J0cy5JbnRlZ3JhdGlvbiA9IGludGVncmF0aW9uKCdHb29nbGUgQW5hbHl0aWNzJylcbiAgLnJlYWR5T25Mb2FkKClcbiAgLmdsb2JhbCgnZ2EnKVxuICAuZ2xvYmFsKCdnYXBsdWdpbnMnKVxuICAuZ2xvYmFsKCdfZ2FxJylcbiAgLmdsb2JhbCgnR29vZ2xlQW5hbHl0aWNzT2JqZWN0JylcbiAgLm9wdGlvbignYW5vbnltaXplSXAnLCBmYWxzZSlcbiAgLm9wdGlvbignY2xhc3NpYycsIGZhbHNlKVxuICAub3B0aW9uKCdkb21haW4nLCAnYXV0bycpXG4gIC5vcHRpb24oJ2RvdWJsZUNsaWNrJywgZmFsc2UpXG4gIC5vcHRpb24oJ2VuaGFuY2VkRWNvbW1lcmNlJywgZmFsc2UpXG4gIC5vcHRpb24oJ2VuaGFuY2VkTGlua0F0dHJpYnV0aW9uJywgZmFsc2UpXG4gIC5vcHRpb24oJ25vbkludGVyYWN0aW9uJywgZmFsc2UpXG4gIC5vcHRpb24oJ2lnbm9yZWRSZWZlcnJlcnMnLCBudWxsKVxuICAub3B0aW9uKCdpbmNsdWRlU2VhcmNoJywgZmFsc2UpXG4gIC5vcHRpb24oJ3NpdGVTcGVlZFNhbXBsZVJhdGUnLCAxKVxuICAub3B0aW9uKCd0cmFja2luZ0lkJywgJycpXG4gIC5vcHRpb24oJ3RyYWNrTmFtZWRQYWdlcycsIHRydWUpXG4gIC5vcHRpb24oJ3RyYWNrQ2F0ZWdvcml6ZWRQYWdlcycsIHRydWUpXG4gIC5vcHRpb24oJ3NlbmRVc2VySWQnLCBmYWxzZSlcbiAgLm9wdGlvbignbWV0cmljcycsIHt9KVxuICAub3B0aW9uKCdkaW1lbnNpb25zJywge30pXG4gIC50YWcoJ2xpYnJhcnknLCAnPHNjcmlwdCBzcmM9XCIvL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9hbmFseXRpY3MuanNcIj4nKVxuICAudGFnKCdkb3VibGUgY2xpY2snLCAnPHNjcmlwdCBzcmM9XCIvL3N0YXRzLmcuZG91YmxlY2xpY2submV0L2RjLmpzXCI+JylcbiAgLnRhZygnaHR0cCcsICc8c2NyaXB0IHNyYz1cImh0dHA6Ly93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanNcIj4nKVxuICAudGFnKCdodHRwcycsICc8c2NyaXB0IHNyYz1cImh0dHBzOi8vc3NsLmdvb2dsZS1hbmFseXRpY3MuY29tL2dhLmpzXCI+Jyk7XG5cbi8qKlxuICogT24gYGNvbnN0cnVjdGAgc3dhcCBhbnkgY29uZmlnLWJhc2VkIG1ldGhvZHMgdG8gdGhlIHByb3BlciBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuXG5HQS5vbignY29uc3RydWN0JywgZnVuY3Rpb24oaW50ZWdyYXRpb24pe1xuICBpZiAoaW50ZWdyYXRpb24ub3B0aW9ucy5jbGFzc2ljKSB7XG4gICAgaW50ZWdyYXRpb24uaW5pdGlhbGl6ZSA9IGludGVncmF0aW9uLmluaXRpYWxpemVDbGFzc2ljO1xuICAgIGludGVncmF0aW9uLmxvYWRlZCA9IGludGVncmF0aW9uLmxvYWRlZENsYXNzaWM7XG4gICAgaW50ZWdyYXRpb24ucGFnZSA9IGludGVncmF0aW9uLnBhZ2VDbGFzc2ljO1xuICAgIGludGVncmF0aW9uLnRyYWNrID0gaW50ZWdyYXRpb24udHJhY2tDbGFzc2ljO1xuICAgIGludGVncmF0aW9uLmNvbXBsZXRlZE9yZGVyID0gaW50ZWdyYXRpb24uY29tcGxldGVkT3JkZXJDbGFzc2ljO1xuXG4gIH0gZWxzZSBpZiAoaW50ZWdyYXRpb24ub3B0aW9ucy5lbmhhbmNlZEVjb21tZXJjZSkge1xuICAgIGludGVncmF0aW9uLnZpZXdlZFByb2R1Y3QgPSBpbnRlZ3JhdGlvbi52aWV3ZWRQcm9kdWN0RW5oYW5jZWQ7XG4gICAgaW50ZWdyYXRpb24uY2xpY2tlZFByb2R1Y3QgPSBpbnRlZ3JhdGlvbi5jbGlja2VkUHJvZHVjdEVuaGFuY2VkO1xuICAgIGludGVncmF0aW9uLnZpZXdlZFByb2R1Y3REZXRhaWxzID0gaW50ZWdyYXRpb24udmlld2VkUHJvZHVjdERldGFpbHNFbmhhbmNlZDtcbiAgICBpbnRlZ3JhdGlvbi5hZGRlZFByb2R1Y3QgPSBpbnRlZ3JhdGlvbi5hZGRlZFByb2R1Y3RFbmhhbmNlZDtcbiAgICBpbnRlZ3JhdGlvbi5yZW1vdmVkUHJvZHVjdCA9IGludGVncmF0aW9uLnJlbW92ZWRQcm9kdWN0RW5oYW5jZWQ7XG4gICAgaW50ZWdyYXRpb24uc3RhcnRlZE9yZGVyID0gaW50ZWdyYXRpb24uc3RhcnRlZE9yZGVyRW5oYW5jZWQ7XG4gICAgaW50ZWdyYXRpb24udmlld2VkQ2hlY2tvdXRTdGVwID0gaW50ZWdyYXRpb24udmlld2VkQ2hlY2tvdXRTdGVwRW5oYW5jZWQ7XG4gICAgaW50ZWdyYXRpb24uY29tcGxldGVkQ2hlY2tvdXRTdGVwID0gaW50ZWdyYXRpb24uY29tcGxldGVkQ2hlY2tvdXRTdGVwRW5oYW5jZWQ7XG4gICAgaW50ZWdyYXRpb24udXBkYXRlZE9yZGVyID0gaW50ZWdyYXRpb24udXBkYXRlZE9yZGVyRW5oYW5jZWQ7XG4gICAgaW50ZWdyYXRpb24uY29tcGxldGVkT3JkZXIgPSBpbnRlZ3JhdGlvbi5jb21wbGV0ZWRPcmRlckVuaGFuY2VkO1xuICAgIGludGVncmF0aW9uLnJlZnVuZGVkT3JkZXIgPSBpbnRlZ3JhdGlvbi5yZWZ1bmRlZE9yZGVyRW5oYW5jZWQ7XG4gICAgaW50ZWdyYXRpb24udmlld2VkUHJvbW90aW9uID0gaW50ZWdyYXRpb24udmlld2VkUHJvbW90aW9uRW5oYW5jZWQ7XG4gICAgaW50ZWdyYXRpb24uY2xpY2tlZFByb21vdGlvbiA9IGludGVncmF0aW9uLmNsaWNrZWRQcm9tb3Rpb25FbmhhbmNlZDtcbiAgfVxufSk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvYWR2YW5jZWRcbiAqL1xuXG5HQS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuXG4gIC8vIHNldHVwIHRoZSB0cmFja2VyIGdsb2JhbHNcbiAgd2luZG93Lkdvb2dsZUFuYWx5dGljc09iamVjdCA9ICdnYSc7XG4gIHdpbmRvdy5nYSA9IHdpbmRvdy5nYSB8fCBmdW5jdGlvbigpe1xuICAgIHdpbmRvdy5nYS5xID0gd2luZG93LmdhLnEgfHwgW107XG4gICAgd2luZG93LmdhLnEucHVzaChhcmd1bWVudHMpO1xuICB9O1xuICB3aW5kb3cuZ2EubCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gIGlmKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PSAnbG9jYWxob3N0Jykgb3B0cy5kb21haW4gPSAnbm9uZSc7XG5cbiAgd2luZG93LmdhKCdjcmVhdGUnLCBvcHRzLnRyYWNraW5nSWQsIHtcbiAgICBjb29raWVEb21haW46IG9wdHMuZG9tYWluIHx8IEdBLnByb3RvdHlwZS5kZWZhdWx0cy5kb21haW4sIC8vIHRvIHByb3RlY3QgYWdhaW5zdCBlbXB0eSBzdHJpbmdcbiAgICBzaXRlU3BlZWRTYW1wbGVSYXRlOiBvcHRzLnNpdGVTcGVlZFNhbXBsZVJhdGUsXG4gICAgYWxsb3dMaW5rZXI6IHRydWVcbiAgfSk7XG5cbiAgLy8gZGlzcGxheSBhZHZlcnRpc2luZ1xuICBpZiAob3B0cy5kb3VibGVDbGljaykge1xuICAgIHdpbmRvdy5nYSgncmVxdWlyZScsICdkaXNwbGF5ZmVhdHVyZXMnKTtcbiAgfVxuXG4gIC8vIHNlbmQgZ2xvYmFsIGlkXG4gIGlmIChvcHRzLnNlbmRVc2VySWQgJiYgdXNlci5pZCgpKSB7XG4gICAgd2luZG93LmdhKCdzZXQnLCAndXNlcklkJywgdXNlci5pZCgpKTtcbiAgfVxuXG4gIC8vIGFub255bWl6ZSBhZnRlciBpbml0aWFsaXppbmcsIG90aGVyd2lzZSBhIHdhcm5pbmcgaXMgc2hvd25cbiAgLy8gaW4gZ29vZ2xlIGFuYWx5dGljcyBkZWJ1Z2dlclxuICBpZiAob3B0cy5hbm9ueW1pemVJcCkgd2luZG93LmdhKCdzZXQnLCAnYW5vbnltaXplSXAnLCB0cnVlKTtcblxuICAvLyBjdXN0b20gZGltZW5zaW9ucyAmIG1ldHJpY3NcbiAgdmFyIGN1c3RvbSA9IG1ldHJpY3ModXNlci50cmFpdHMoKSwgb3B0cyk7XG4gIGlmIChsZW5ndGgoY3VzdG9tKSkgd2luZG93LmdhKCdzZXQnLCBjdXN0b20pO1xuXG4gIHRoaXMubG9hZCgnbGlicmFyeScsIHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5HQS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhIHdpbmRvdy5nYXBsdWdpbnM7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL3BhZ2VzXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuR0EucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xuICB2YXIgcHJvcHMgPSBwYWdlLnByb3BlcnRpZXMoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG4gIHZhciBwYWdldmlldyA9IHt9O1xuICB2YXIgdHJhY2s7XG5cbiAgdGhpcy5fY2F0ZWdvcnkgPSBjYXRlZ29yeTsgLy8gc3RvcmUgZm9yIGxhdGVyXG5cbiAgLy8gc2VuZFxuICB3aW5kb3cuZ2EoJ3NlbmQnLCAncGFnZXZpZXcnLCB7XG4gICAgcGFnZTogcGF0aChwcm9wcywgdGhpcy5vcHRpb25zKSxcbiAgICB0aXRsZTogbmFtZSB8fCBwcm9wcy50aXRsZSxcbiAgICBsb2NhdGlvbjogcHJvcHMudXJsXG4gIH0pO1xuXG4gIC8vIGNhdGVnb3JpemVkIHBhZ2VzXG4gIGlmIChjYXRlZ29yeSAmJiB0aGlzLm9wdGlvbnMudHJhY2tDYXRlZ29yaXplZFBhZ2VzKSB7XG4gICAgdHJhY2sgPSBwYWdlLnRyYWNrKGNhdGVnb3J5KTtcbiAgICB0aGlzLnRyYWNrKHRyYWNrLCB7IG5vbkludGVyYWN0aW9uOiAxIH0pO1xuICB9XG5cbiAgLy8gbmFtZWQgcGFnZXNcbiAgaWYgKG5hbWUgJiYgdGhpcy5vcHRpb25zLnRyYWNrTmFtZWRQYWdlcykge1xuICAgIHRyYWNrID0gcGFnZS50cmFjayhuYW1lKTtcbiAgICB0aGlzLnRyYWNrKHRyYWNrLCB7IG5vbkludGVyYWN0aW9uOiAxIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9ldmVudHNcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9maWVsZC1yZWZlcmVuY2VcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSBldmVudFxuICovXG5cbkdBLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrLCBvcHRpb25zKXtcbiAgdmFyIGNvbnRleHRPcHRzID0gdHJhY2sub3B0aW9ucyh0aGlzLm5hbWUpO1xuICB2YXIgaW50ZXJmYWNlT3B0cyA9IHRoaXMub3B0aW9uczsgICAgXG4gIHZhciBvcHRzID0gZGVmYXVsdHMob3B0aW9ucyB8fCB7fSwgY29udGV4dE9wdHMpO1xuICBvcHRzID0gZGVmYXVsdHMob3B0cywgaW50ZXJmYWNlT3B0cyk7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgXG4gIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICBldmVudEFjdGlvbjogdHJhY2suZXZlbnQoKSxcbiAgICBldmVudENhdGVnb3J5OiBwcm9wcy5jYXRlZ29yeSB8fCB0aGlzLl9jYXRlZ29yeSB8fCAnQWxsJyxcbiAgICBldmVudExhYmVsOiBwcm9wcy5sYWJlbCxcbiAgICBldmVudFZhbHVlOiBmb3JtYXRWYWx1ZShwcm9wcy52YWx1ZSB8fCB0cmFjay5yZXZlbnVlKCkpLFxuICAgIG5vbkludGVyYWN0aW9uOiAhIShwcm9wcy5ub25JbnRlcmFjdGlvbiB8fCBvcHRzLm5vbkludGVyYWN0aW9uKVxuICB9KTtcbn07XG5cbi8qKlxuICogQ29tcGxldGVkIG9yZGVyLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lY29tbWVyY2VcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lY29tbWVyY2UjbXVsdGljdXJyZW5jeVxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5HQS5wcm90b3R5cGUuY29tcGxldGVkT3JkZXIgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciB0b3RhbCA9IHRyYWNrLnRvdGFsKCkgfHwgdHJhY2sucmV2ZW51ZSgpIHx8IDA7XG4gIHZhciBvcmRlcklkID0gdHJhY2sub3JkZXJJZCgpO1xuICB2YXIgcHJvZHVjdHMgPSB0cmFjay5wcm9kdWN0cygpO1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG5cbiAgLy8gb3JkZXJJZCBpcyByZXF1aXJlZC5cbiAgaWYgKCFvcmRlcklkKSByZXR1cm47XG5cbiAgLy8gcmVxdWlyZSBlY29tbWVyY2VcbiAgaWYgKCF0aGlzLmVjb21tZXJjZSkge1xuICAgIHdpbmRvdy5nYSgncmVxdWlyZScsICdlY29tbWVyY2UnKTtcbiAgICB0aGlzLmVjb21tZXJjZSA9IHRydWU7XG4gIH1cblxuICAvLyBhZGQgdHJhbnNhY3Rpb25cbiAgd2luZG93LmdhKCdlY29tbWVyY2U6YWRkVHJhbnNhY3Rpb24nLCB7XG4gICAgYWZmaWxpYXRpb246IHByb3BzLmFmZmlsaWF0aW9uLFxuICAgIHNoaXBwaW5nOiB0cmFjay5zaGlwcGluZygpLFxuICAgIHJldmVudWU6IHRvdGFsLFxuICAgIHRheDogdHJhY2sudGF4KCksXG4gICAgaWQ6IG9yZGVySWQsXG4gICAgY3VycmVuY3k6IHRyYWNrLmN1cnJlbmN5KClcbiAgfSk7XG5cbiAgLy8gYWRkIHByb2R1Y3RzXG4gIGVhY2gocHJvZHVjdHMsIGZ1bmN0aW9uKHByb2R1Y3Qpe1xuICAgIHZhciB0cmFjayA9IG5ldyBUcmFjayh7IHByb3BlcnRpZXM6IHByb2R1Y3QgfSk7XG4gICAgd2luZG93LmdhKCdlY29tbWVyY2U6YWRkSXRlbScsIHtcbiAgICAgIGNhdGVnb3J5OiB0cmFjay5jYXRlZ29yeSgpLFxuICAgICAgcXVhbnRpdHk6IHRyYWNrLnF1YW50aXR5KCksXG4gICAgICBwcmljZTogdHJhY2sucHJpY2UoKSxcbiAgICAgIG5hbWU6IHRyYWNrLm5hbWUoKSxcbiAgICAgIHNrdTogdHJhY2suc2t1KCksXG4gICAgICBpZDogb3JkZXJJZCxcbiAgICAgIGN1cnJlbmN5OiB0cmFjay5jdXJyZW5jeSgpXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHNlbmRcbiAgd2luZG93LmdhKCdlY29tbWVyY2U6c2VuZCcpO1xufTtcblxuLyoqXG4gKiBJbml0aWFsaXplIChjbGFzc2ljKS5cbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ2Fqcy9tZXRob2RzL2dhSlNBcGlCYXNpY0NvbmZpZ3VyYXRpb25cbiAqL1xuXG5HQS5wcm90b3R5cGUuaW5pdGlhbGl6ZUNsYXNzaWMgPSBmdW5jdGlvbigpe1xuICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgdmFyIGFub255bWl6ZSA9IG9wdHMuYW5vbnltaXplSXA7XG4gIHZhciBkYiA9IG9wdHMuZG91YmxlQ2xpY2s7XG4gIHZhciBkb21haW4gPSBvcHRzLmRvbWFpbjtcbiAgdmFyIGVuaGFuY2VkID0gb3B0cy5lbmhhbmNlZExpbmtBdHRyaWJ1dGlvbjtcbiAgdmFyIGlnbm9yZSA9IG9wdHMuaWdub3JlZFJlZmVycmVycztcbiAgdmFyIHNhbXBsZSA9IG9wdHMuc2l0ZVNwZWVkU2FtcGxlUmF0ZTtcblxuICB3aW5kb3cuX2dhcSA9IHdpbmRvdy5fZ2FxIHx8IFtdO1xuICBwdXNoKCdfc2V0QWNjb3VudCcsIG9wdHMudHJhY2tpbmdJZCk7XG4gIHB1c2goJ19zZXRBbGxvd0xpbmtlcicsIHRydWUpO1xuXG4gIGlmIChhbm9ueW1pemUpIHB1c2goJ19nYXQuX2Fub255bWl6ZUlwJyk7XG4gIGlmIChkb21haW4pIHB1c2goJ19zZXREb21haW5OYW1lJywgZG9tYWluKTtcbiAgaWYgKHNhbXBsZSkgcHVzaCgnX3NldFNpdGVTcGVlZFNhbXBsZVJhdGUnLCBzYW1wbGUpO1xuXG4gIGlmIChlbmhhbmNlZCkge1xuICAgIHZhciBwcm90b2NvbCA9ICdodHRwczonID09PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczonIDogJ2h0dHA6JztcbiAgICB2YXIgcGx1Z2luVXJsID0gcHJvdG9jb2wgKyAnLy93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20vcGx1Z2lucy9nYS9pbnBhZ2VfbGlua2lkLmpzJztcbiAgICBwdXNoKCdfcmVxdWlyZScsICdpbnBhZ2VfbGlua2lkJywgcGx1Z2luVXJsKTtcbiAgfVxuXG4gIGlmIChpZ25vcmUpIHtcbiAgICBpZiAoIWlzLmFycmF5KGlnbm9yZSkpIGlnbm9yZSA9IFtpZ25vcmVdO1xuICAgIGVhY2goaWdub3JlLCBmdW5jdGlvbiAoZG9tYWluKSB7XG4gICAgICBwdXNoKCdfYWRkSWdub3JlZFJlZicsIGRvbWFpbik7XG4gICAgfSk7XG4gIH1cblxuICBpZiAodGhpcy5vcHRpb25zLmRvdWJsZUNsaWNrKSB7XG4gICAgdGhpcy5sb2FkKCdkb3VibGUgY2xpY2snLCB0aGlzLnJlYWR5KTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbmFtZSA9IHVzZUh0dHBzKCkgPyAnaHR0cHMnIDogJ2h0dHAnO1xuICAgIHRoaXMubG9hZChuYW1lLCB0aGlzLnJlYWR5KTtcbiAgfVxufTtcblxuLyoqXG4gKiBMb2FkZWQ/IChjbGFzc2ljKVxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuR0EucHJvdG90eXBlLmxvYWRlZENsYXNzaWMgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5fZ2FxICYmIHdpbmRvdy5fZ2FxLnB1c2ggIT09IEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbn07XG5cbi8qKlxuICogUGFnZSAoY2xhc3NpYykuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2dhanMvbWV0aG9kcy9nYUpTQXBpQmFzaWNDb25maWd1cmF0aW9uXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuR0EucHJvdG90eXBlLnBhZ2VDbGFzc2ljID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBvcHRzID0gcGFnZS5vcHRpb25zKHRoaXMubmFtZSk7XG4gIHZhciBjYXRlZ29yeSA9IHBhZ2UuY2F0ZWdvcnkoKTtcbiAgdmFyIHByb3BzID0gcGFnZS5wcm9wZXJ0aWVzKCk7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuICB2YXIgdHJhY2s7XG5cbiAgcHVzaCgnX3RyYWNrUGFnZXZpZXcnLCBwYXRoKHByb3BzLCB0aGlzLm9wdGlvbnMpKTtcblxuICAvLyBjYXRlZ29yaXplZCBwYWdlc1xuICBpZiAoY2F0ZWdvcnkgJiYgdGhpcy5vcHRpb25zLnRyYWNrQ2F0ZWdvcml6ZWRQYWdlcykge1xuICAgIHRyYWNrID0gcGFnZS50cmFjayhjYXRlZ29yeSk7XG4gICAgdGhpcy50cmFjayh0cmFjaywgeyBub25JbnRlcmFjdGlvbjogMSB9KTtcbiAgfVxuXG4gIC8vIG5hbWVkIHBhZ2VzXG4gIGlmIChuYW1lICYmIHRoaXMub3B0aW9ucy50cmFja05hbWVkUGFnZXMpIHtcbiAgICB0cmFjayA9IHBhZ2UudHJhY2sobmFtZSk7XG4gICAgdGhpcy50cmFjayh0cmFjaywgeyBub25JbnRlcmFjdGlvbjogMSB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBUcmFjayAoY2xhc3NpYykuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2dhanMvbWV0aG9kcy9nYUpTQXBpRXZlbnRUcmFja2luZ1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR0EucHJvdG90eXBlLnRyYWNrQ2xhc3NpYyA9IGZ1bmN0aW9uKHRyYWNrLCBvcHRpb25zKXtcbiAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHRyYWNrLm9wdGlvbnModGhpcy5uYW1lKTtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICB2YXIgcmV2ZW51ZSA9IHRyYWNrLnJldmVudWUoKTtcbiAgdmFyIGV2ZW50ID0gdHJhY2suZXZlbnQoKTtcbiAgdmFyIGNhdGVnb3J5ID0gdGhpcy5fY2F0ZWdvcnkgfHwgcHJvcHMuY2F0ZWdvcnkgfHwgJ0FsbCc7XG4gIHZhciBsYWJlbCA9IHByb3BzLmxhYmVsO1xuICB2YXIgdmFsdWUgPSBmb3JtYXRWYWx1ZShyZXZlbnVlIHx8IHByb3BzLnZhbHVlKTtcbiAgdmFyIG5vbkludGVyYWN0aW9uID0gISEocHJvcHMubm9uSW50ZXJhY3Rpb24gfHwgb3B0cy5ub25JbnRlcmFjdGlvbik7XG4gIHB1c2goJ190cmFja0V2ZW50JywgY2F0ZWdvcnksIGV2ZW50LCBsYWJlbCwgdmFsdWUsIG5vbkludGVyYWN0aW9uKTtcbn07XG5cbi8qKlxuICogQ29tcGxldGVkIG9yZGVyLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9nYWpzL2dhVHJhY2tpbmdFY29tbWVyY2VcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9nYWpzL2dhVHJhY2tpbmdFY29tbWVyY2UjbG9jYWxjdXJyZW5jaWVzXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbkdBLnByb3RvdHlwZS5jb21wbGV0ZWRPcmRlckNsYXNzaWMgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciB0b3RhbCA9IHRyYWNrLnRvdGFsKCkgfHwgdHJhY2sucmV2ZW51ZSgpIHx8IDA7XG4gIHZhciBvcmRlcklkID0gdHJhY2sub3JkZXJJZCgpO1xuICB2YXIgcHJvZHVjdHMgPSB0cmFjay5wcm9kdWN0cygpIHx8IFtdO1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHZhciBjdXJyZW5jeSA9IHRyYWNrLmN1cnJlbmN5KCk7XG5cbiAgLy8gcmVxdWlyZWRcbiAgaWYgKCFvcmRlcklkKSByZXR1cm47XG5cbiAgLy8gYWRkIHRyYW5zYWN0aW9uXG4gIHB1c2goJ19hZGRUcmFucydcbiAgICAsIG9yZGVySWRcbiAgICAsIHByb3BzLmFmZmlsaWF0aW9uXG4gICAgLCB0b3RhbFxuICAgICwgdHJhY2sudGF4KClcbiAgICAsIHRyYWNrLnNoaXBwaW5nKClcbiAgICAsIHRyYWNrLmNpdHkoKVxuICAgICwgdHJhY2suc3RhdGUoKVxuICAgICwgdHJhY2suY291bnRyeSgpKTtcblxuICAvLyBhZGQgaXRlbXNcbiAgZWFjaChwcm9kdWN0cywgZnVuY3Rpb24ocHJvZHVjdCl7XG4gICAgdmFyIHRyYWNrID0gbmV3IFRyYWNrKHsgcHJvcGVydGllczogcHJvZHVjdCB9KTtcbiAgICBwdXNoKCdfYWRkSXRlbSdcbiAgICAgICwgb3JkZXJJZFxuICAgICAgLCB0cmFjay5za3UoKVxuICAgICAgLCB0cmFjay5uYW1lKClcbiAgICAgICwgdHJhY2suY2F0ZWdvcnkoKVxuICAgICAgLCB0cmFjay5wcmljZSgpXG4gICAgICAsIHRyYWNrLnF1YW50aXR5KCkpO1xuICB9KTtcblxuICAvLyBzZW5kXG4gIHB1c2goJ19zZXQnLCAnY3VycmVuY3lDb2RlJywgY3VycmVuY3kpO1xuICBwdXNoKCdfdHJhY2tUcmFucycpO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIHBhdGggYmFzZWQgb24gYHByb3BlcnRpZXNgIGFuZCBgb3B0aW9uc2AuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gcGF0aChwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gIGlmICghcHJvcGVydGllcykgcmV0dXJuO1xuICB2YXIgc3RyID0gcHJvcGVydGllcy5wYXRoO1xuICBpZiAob3B0aW9ucy5pbmNsdWRlU2VhcmNoICYmIHByb3BlcnRpZXMuc2VhcmNoKSBzdHIgKz0gcHJvcGVydGllcy5zZWFyY2g7XG4gIHJldHVybiBzdHI7XG59XG5cbi8qKlxuICogRm9ybWF0IHRoZSB2YWx1ZSBwcm9wZXJ0eSB0byBHb29nbGUncyBsaWtpbmcuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSB8fCB2YWx1ZSA8IDApIHJldHVybiAwO1xuICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSk7XG59XG5cbi8qKlxuICogTWFwIGdvb2dsZSdzIGN1c3RvbSBkaW1lbnNpb25zICYgbWV0cmljcyB3aXRoIGBvYmpgLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgICBtZXRyaWNzKHsgcmV2ZW51ZTogMS45IH0sIHsgeyBtZXRyaWNzIDogeyByZXZlbnVlOiAnbWV0cmljOCcgfSB9KTtcbiAqICAgICAgLy8gPT4geyBtZXRyaWM4OiAxLjkgfVxuICpcbiAqICAgICAgbWV0cmljcyh7IHJldmVudWU6IDEuOSB9LCB7fSk7XG4gKiAgICAgIC8vID0+IHt9XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAqIEByZXR1cm4ge09iamVjdHxudWxsfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbWV0cmljcyhvYmosIGRhdGEpe1xuICB2YXIgZGltZW5zaW9ucyA9IGRhdGEuZGltZW5zaW9ucztcbiAgdmFyIG1ldHJpY3MgPSBkYXRhLm1ldHJpY3M7XG4gIHZhciBuYW1lcyA9IGtleXMobWV0cmljcykuY29uY2F0KGtleXMoZGltZW5zaW9ucykpO1xuICB2YXIgcmV0ID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7ICsraSkge1xuICAgIHZhciBuYW1lID0gbmFtZXNbaV07XG4gICAgdmFyIGtleSA9IG1ldHJpY3NbbmFtZV0gfHwgZGltZW5zaW9uc1tuYW1lXTtcbiAgICB2YXIgdmFsdWUgPSBkb3Qob2JqLCBuYW1lKSB8fCBvYmpbbmFtZV07XG4gICAgaWYgKG51bGwgPT0gdmFsdWUpIGNvbnRpbnVlO1xuICAgIHJldFtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIExvYWRzIGVjLmpzICh1bmxlc3MgYWxyZWFkeSBsb2FkZWQpXG4gKi9cblxuR0EucHJvdG90eXBlLmxvYWRFbmhhbmNlZEVjb21tZXJjZSA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgaWYgKCF0aGlzLmVuaGFuY2VkRWNvbW1lcmNlTG9hZGVkKSB7XG4gICAgd2luZG93LmdhKCdyZXF1aXJlJywgJ2VjJyk7XG4gICAgdGhpcy5lbmhhbmNlZEVjb21tZXJjZUxvYWRlZCA9IHRydWU7XG4gIH1cblxuICAvLyBFbnN1cmUgd2Ugc2V0IGN1cnJlbmN5IGZvciBldmVyeSBoaXRcbiAgd2luZG93LmdhKCdzZXQnLCAnJmN1JywgdHJhY2suY3VycmVuY3koKSk7XG59O1xuXG4vKipcbiAqIFB1c2hlcyBhbiBldmVudCBhbmQgYWxsIHByZXZpb3VzbHkgc2V0IEVFIGRhdGEgdG8gR0EuXG4gKi9cblxuR0EucHJvdG90eXBlLnB1c2hFbmhhbmNlZEVjb21tZXJjZSA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgLy8gU2VuZCBhIGN1c3RvbSBub24taW50ZXJhY3Rpb24gZXZlbnQgdG8gZW5zdXJlIGFsbCBFRSBkYXRhIGlzIHB1c2hlZC5cbiAgLy8gV2l0aG91dCBkb2luZyB0aGlzIHdlJ2QgbmVlZCB0byByZXF1aXJlIHBhZ2UgZGlzcGxheSBhZnRlciBzZXR0aW5nIEVFIGRhdGEuXG4gIGdhKCdzZW5kJywgJ2V2ZW50JywgJ0VuaGFuY2VkRWNvbW1lcmNlJywgJ1B1c2gnLCB7J25vbkludGVyYWN0aW9uJzogMX0pO1xufTtcblxuLyoqXG4gKiBTdGFydGVkIG9yZGVyIC0gRW5oYW5jZWQgRWNvbW1lcmNlXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2VuaGFuY2VkLWVjb21tZXJjZSNjaGVja291dC1zdGVwc1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR0EucHJvdG90eXBlLnN0YXJ0ZWRPcmRlckVuaGFuY2VkID0gZnVuY3Rpb24odHJhY2spIHtcbiAgLy8gc2FtZSBhcyB2aWV3ZWQgY2hlY2tvdXQgc3RlcCAjMVxuICB0aGlzLnZpZXdlZENoZWNrb3V0U3RlcCh0cmFjayk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZWQgb3JkZXIgLSBFbmhhbmNlZCBFY29tbWVyY2VcbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI2NoZWNrb3V0LXN0ZXBzXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5HQS5wcm90b3R5cGUudXBkYXRlZE9yZGVyRW5oYW5jZWQgPSBmdW5jdGlvbih0cmFjayl7XG4gIC8vIFNhbWUgZXZlbnQgYXMgc3RhcnRlZCBvcmRlciAtIHdpbGwgb3ZlcnJpZGVcbiAgdGhpcy5zdGFydGVkT3JkZXJFbmhhbmNlZCh0cmFjayk7XG59O1xuXG4vKipcbiAqIFZpZXdlZCBjaGVja291dCBzdGVwIC0gRW5oYW5jZWQgRWNvbW1lcmNlXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2VuaGFuY2VkLWVjb21tZXJjZSNjaGVja291dC1zdGVwc1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR0EucHJvdG90eXBlLnZpZXdlZENoZWNrb3V0U3RlcEVuaGFuY2VkID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcHJvZHVjdHMgPSB0cmFjay5wcm9kdWN0cygpO1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHZhciBvcHRpb25zID0gZXh0cmFjdENoZWNrb3V0T3B0aW9ucyhwcm9wcyk7XG5cbiAgdGhpcy5sb2FkRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xuXG4gIGVhY2gocHJvZHVjdHMsIGZ1bmN0aW9uKHByb2R1Y3Qpe1xuICAgIHZhciB0cmFjayA9IG5ldyBUcmFjayh7IHByb3BlcnRpZXM6IHByb2R1Y3QgfSk7XG4gICAgZW5oYW5jZWRFY29tbWVyY2VUcmFja1Byb2R1Y3QodHJhY2spO1xuICB9KTtcblxuICB3aW5kb3cuZ2EoJ2VjOnNldEFjdGlvbicsJ2NoZWNrb3V0Jywge1xuICAgICdzdGVwJzogcHJvcHMuc3RlcCB8fCAxLFxuICAgICdvcHRpb24nOiBvcHRpb25zIHx8IHVuZGVmaW5lZCxcbiAgfSk7XG5cbiAgdGhpcy5wdXNoRW5oYW5jZWRFY29tbWVyY2UoKTtcbn07XG5cbi8qKlxuICogQ29tcGxldGVkIGNoZWNrb3V0IHN0ZXAgLSBFbmhhbmNlZCBFY29tbWVyY2VcbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI2NoZWNrb3V0LW9wdGlvbnNcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkdBLnByb3RvdHlwZS5jb21wbGV0ZWRDaGVja291dFN0ZXBFbmhhbmNlZCA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICB2YXIgb3B0aW9ucyA9IGV4dHJhY3RDaGVja291dE9wdGlvbnMocHJvcHMpO1xuXG4gIC8vIE9ubHkgc2VuZCBhbiBldmVudCBpZiB3ZSBoYXZlIHN0ZXAgYW5kIG9wdGlvbnMgdG8gdXBkYXRlXG4gIGlmICghcHJvcHMuc3RlcCB8fCAhb3B0aW9ucykgcmV0dXJuO1xuXG4gIHRoaXMubG9hZEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcblxuICB3aW5kb3cuZ2EoJ2VjOnNldEFjdGlvbicsICdjaGVja291dF9vcHRpb24nLCB7XG4gICAgc3RlcDogcHJvcHMuc3RlcCB8fCAxLFxuICAgIG9wdGlvbjogb3B0aW9ucyxcbiAgfSk7XG5cbiAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgJ0NoZWNrb3V0JywgJ09wdGlvbicpO1xufTtcblxuLyoqXG4gKiBDb21wbGV0ZWQgb3JkZXIgLSBFbmhhbmNlZCBFY29tbWVyY2VcbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI21lYXN1cmluZy10cmFuc2FjdGlvbnNcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkdBLnByb3RvdHlwZS5jb21wbGV0ZWRPcmRlckVuaGFuY2VkID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgdG90YWwgPSB0cmFjay50b3RhbCgpIHx8IHRyYWNrLnJldmVudWUoKSB8fCAwO1xuICB2YXIgb3JkZXJJZCA9IHRyYWNrLm9yZGVySWQoKTtcbiAgdmFyIHByb2R1Y3RzID0gdHJhY2sucHJvZHVjdHMoKTtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuXG4gIC8vIG9yZGVySWQgaXMgcmVxdWlyZWQuXG4gIGlmICghb3JkZXJJZCkgcmV0dXJuO1xuXG4gIHRoaXMubG9hZEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcblxuICBlYWNoKHByb2R1Y3RzLCBmdW5jdGlvbihwcm9kdWN0KXtcbiAgICB2YXIgdHJhY2sgPSBuZXcgVHJhY2soeyBwcm9wZXJ0aWVzOiBwcm9kdWN0IH0pO1xuICAgIGVuaGFuY2VkRWNvbW1lcmNlVHJhY2tQcm9kdWN0KHRyYWNrKTtcbiAgfSk7XG5cbiAgd2luZG93LmdhKCdlYzpzZXRBY3Rpb24nLCAncHVyY2hhc2UnLCB7XG4gICAgaWQ6IG9yZGVySWQsXG4gICAgYWZmaWxpYXRpb246IHByb3BzLmFmZmlsaWF0aW9uLFxuICAgIHJldmVudWU6IHRvdGFsLFxuICAgIHRheDogdHJhY2sudGF4KCksXG4gICAgc2hpcHBpbmc6IHRyYWNrLnNoaXBwaW5nKCksXG4gICAgY291cG9uOiB0cmFjay5jb3Vwb24oKSxcbiAgfSk7XG5cbiAgdGhpcy5wdXNoRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xufTtcblxuLyoqXG4gKiBSZWZ1bmRlZCBvcmRlciAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjbWVhc3VyaW5nLXJlZnVuZHNcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkdBLnByb3RvdHlwZS5yZWZ1bmRlZE9yZGVyRW5oYW5jZWQgPSBmdW5jdGlvbih0cmFjaykge1xuICB2YXIgb3JkZXJJZCA9IHRyYWNrLm9yZGVySWQoKTtcbiAgdmFyIHByb2R1Y3RzID0gdHJhY2sucHJvZHVjdHMoKTtcblxuICAvLyBvcmRlcklkIGlzIHJlcXVpcmVkLlxuICBpZiAoIW9yZGVySWQpIHJldHVybjtcblxuICB0aGlzLmxvYWRFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG5cbiAgLy8gV2l0aG91dCBhbnkgcHJvZHVjdHMgaXQncyBhIGZ1bGwgcmVmdW5kXG4gIGVhY2gocHJvZHVjdHMsIGZ1bmN0aW9uKHByb2R1Y3Qpe1xuICAgIHZhciB0cmFjayA9IG5ldyBUcmFjayh7IHByb3BlcnRpZXM6IHByb2R1Y3QgfSk7XG4gICAgd2luZG93LmdhKCdlYzphZGRQcm9kdWN0Jywge1xuICAgICAgaWQ6IHRyYWNrLmlkKCkgfHwgdHJhY2suc2t1KCksXG4gICAgICBxdWFudGl0eTogdHJhY2sucXVhbnRpdHkoKSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgd2luZG93LmdhKCdlYzpzZXRBY3Rpb24nLCAncmVmdW5kJywge1xuICAgIGlkOiBvcmRlcklkLFxuICB9KTtcblxuICB0aGlzLnB1c2hFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG59O1xuXG4vKipcbiAqIEFkZGVkIHByb2R1Y3QgLSBFbmhhbmNlZCBFY29tbWVyY2VcbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI2FkZC1yZW1vdmUtY2FydFxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR0EucHJvdG90eXBlLmFkZGVkUHJvZHVjdEVuaGFuY2VkID0gZnVuY3Rpb24odHJhY2spIHtcbiAgdGhpcy5sb2FkRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xuICBlbmhhbmNlZEVjb21tZXJjZVByb2R1Y3RBY3Rpb24odHJhY2ssICdhZGQnKTtcbiAgdGhpcy5wdXNoRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xufTtcblxuLyoqXG4gKiBSZW1vdmVkIHByb2R1Y3QgLSBFbmhhbmNlZCBFY29tbWVyY2VcbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI2FkZC1yZW1vdmUtY2FydFxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR0EucHJvdG90eXBlLnJlbW92ZWRQcm9kdWN0RW5oYW5jZWQgPSBmdW5jdGlvbih0cmFjaykge1xuICB0aGlzLmxvYWRFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG4gIGVuaGFuY2VkRWNvbW1lcmNlUHJvZHVjdEFjdGlvbih0cmFjaywgJ3JlbW92ZScpO1xuICB0aGlzLnB1c2hFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG59O1xuXG4vKipcbiAqIFZpZXdlZCBwcm9kdWN0IGRldGFpbHMgLSBFbmhhbmNlZCBFY29tbWVyY2VcbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI3Byb2R1Y3QtZGV0YWlsLXZpZXdcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkdBLnByb3RvdHlwZS52aWV3ZWRQcm9kdWN0RGV0YWlsc0VuaGFuY2VkID0gZnVuY3Rpb24odHJhY2spIHtcbiAgdGhpcy5sb2FkRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xuICBlbmhhbmNlZEVjb21tZXJjZVByb2R1Y3RBY3Rpb24odHJhY2ssICdkZXRhaWwnKTtcbiAgdGhpcy5wdXNoRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xufTtcblxuLyoqXG4gKiBWaWV3ZWQgcHJvZHVjdCAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjbWVhc3VyaW5nLWltcHJlc3Npb25zXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5HQS5wcm90b3R5cGUudmlld2VkUHJvZHVjdEVuaGFuY2VkID0gZnVuY3Rpb24odHJhY2spIHtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuXG4gIHRoaXMubG9hZEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcbiAgZ2EoJ2VjOmFkZEltcHJlc3Npb24nLCB7XG4gICAgaWQ6IHRyYWNrLmlkKCkgfHwgdHJhY2suc2t1KCksXG4gICAgbmFtZTogdHJhY2submFtZSgpLFxuICAgIGNhdGVnb3J5OiB0cmFjay5jYXRlZ29yeSgpLFxuICAgIGJyYW5kOiBwcm9wcy5icmFuZCxcbiAgICB2YXJpYW50OiBwcm9wcy52YXJpYW50LFxuICAgIGxpc3Q6IHByb3BzLmxpc3QsXG4gICAgcG9zaXRpb246IHByb3BzLnBvc2l0aW9uLFxuICB9KTtcbiAgdGhpcy5wdXNoRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xufTtcblxuLyoqXG4gKiBDbGlja2VkIHByb2R1Y3QgLSBFbmhhbmNlZCBFY29tbWVyY2VcbiAqXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI21lYXN1cmluZy1hY3Rpb25zXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5HQS5wcm90b3R5cGUuY2xpY2tlZFByb2R1Y3RFbmhhbmNlZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcblxuICB0aGlzLmxvYWRFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG4gIGVuaGFuY2VkRWNvbW1lcmNlUHJvZHVjdEFjdGlvbih0cmFjaywgJ2NsaWNrJywge1xuICAgIGxpc3Q6IHByb3BzLmxpc3RcbiAgfSk7XG4gIHRoaXMucHVzaEVuaGFuY2VkRWNvbW1lcmNlKHRyYWNrKTtcbn07XG5cbi8qKlxuICogVmlld2VkIHByb21vdGlvbiAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjbWVhc3VyaW5nLXByb21vLWltcHJlc3Npb25zXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5HQS5wcm90b3R5cGUudmlld2VkUHJvbW90aW9uRW5oYW5jZWQgPSBmdW5jdGlvbih0cmFjaykge1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG5cbiAgdGhpcy5sb2FkRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xuICB3aW5kb3cuZ2EoJ2VjOmFkZFByb21vJywge1xuICAgIGlkOiB0cmFjay5pZCgpLFxuICAgIG5hbWU6IHRyYWNrLm5hbWUoKSxcbiAgICBjcmVhdGl2ZTogcHJvcHMuY3JlYXRpdmUsXG4gICAgcG9zaXRpb246IHByb3BzLnBvc2l0aW9uLFxuICB9KTtcbiAgdGhpcy5wdXNoRW5oYW5jZWRFY29tbWVyY2UodHJhY2spO1xufTtcblxuLyoqXG4gKiBDbGlja2VkIHByb21vdGlvbiAtIEVuaGFuY2VkIEVjb21tZXJjZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjbWVhc3VyaW5nLXByb21vLWNsaWNrc1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuR0EucHJvdG90eXBlLmNsaWNrZWRQcm9tb3Rpb25FbmhhbmNlZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcblxuICB0aGlzLmxvYWRFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG4gIHdpbmRvdy5nYSgnZWM6YWRkUHJvbW8nLCB7XG4gICAgaWQ6IHRyYWNrLmlkKCksXG4gICAgbmFtZTogdHJhY2submFtZSgpLFxuICAgIGNyZWF0aXZlOiBwcm9wcy5jcmVhdGl2ZSxcbiAgICBwb3NpdGlvbjogcHJvcHMucG9zaXRpb24sXG4gIH0pO1xuICBnYSgnZWM6c2V0QWN0aW9uJywgJ3Byb21vX2NsaWNrJywge30pO1xuICB0aGlzLnB1c2hFbmhhbmNlZEVjb21tZXJjZSh0cmFjayk7XG59O1xuXG4vKipcbiAqIEVuaGFuY2VkIGVjb21tZXJjZSB0cmFjayBwcm9kdWN0LlxuICpcbiAqIFNpbXBsZSBoZWxwZXIgc28gdGhhdCB3ZSBkb24ndCByZXBlYXQgYGVjOmFkZFByb2R1Y3RgIGV2ZXJ5d2hlcmUuXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5mdW5jdGlvbiBlbmhhbmNlZEVjb21tZXJjZVRyYWNrUHJvZHVjdCh0cmFjaykge1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG5cbiAgd2luZG93LmdhKCdlYzphZGRQcm9kdWN0Jywge1xuICAgIGlkOiB0cmFjay5pZCgpIHx8IHRyYWNrLnNrdSgpLFxuICAgIG5hbWU6IHRyYWNrLm5hbWUoKSxcbiAgICBjYXRlZ29yeTogdHJhY2suY2F0ZWdvcnkoKSxcbiAgICBxdWFudGl0eTogdHJhY2sucXVhbnRpdHkoKSxcbiAgICBwcmljZTogdHJhY2sucHJpY2UoKSxcbiAgICBicmFuZDogcHJvcHMuYnJhbmQsXG4gICAgdmFyaWFudDogcHJvcHMudmFyaWFudCxcbiAgfSk7XG59XG5cbi8qKlxuICogU2V0IGBhY3Rpb25gIG9uIGB0cmFja2Agd2l0aCBgZGF0YWAuXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gKi9cblxuZnVuY3Rpb24gZW5oYW5jZWRFY29tbWVyY2VQcm9kdWN0QWN0aW9uKHRyYWNrLCBhY3Rpb24sIGRhdGEpIHtcbiAgZW5oYW5jZWRFY29tbWVyY2VUcmFja1Byb2R1Y3QodHJhY2spO1xuICB3aW5kb3cuZ2EoJ2VjOnNldEFjdGlvbicsIGFjdGlvbiwgZGF0YSB8fCB7fSk7XG59XG5cbi8qKlxuICogRXh0cmFjdHMgY2hlY2tvdXQgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAqIEByZXR1cm4ge051bGx8U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RDaGVja291dE9wdGlvbnMocHJvcHMpIHtcbiAgdmFyIG9wdGlvbnMgPSBbXG4gICAgcHJvcHMucGF5bWVudE1ldGhvZCxcbiAgICBwcm9wcy5zaGlwcGluZ01ldGhvZFxuICBdO1xuXG4gIC8vIFJlbW92ZSBhbGwgbnVsbHMsIGVtcHR5IHN0cmluZ3MsIHplcm9lcywgYW5kIGpvaW4gd2l0aCBjb21tYXMuXG4gIHZhciB2YWxpZCA9IHNlbGVjdChvcHRpb25zLCBmdW5jdGlvbihlKXtyZXR1cm4gZTsgfSk7XG4gIHJldHVybiB2YWxpZC5sZW5ndGggPiAwID8gdmFsaWQuam9pbignLCAnKSA6IG51bGw7XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdkYXRhTGF5ZXInLCB7IHdyYXA6IGZhbHNlIH0pO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG5cbi8qKlxuICogRXhwb3NlIGBHVE1gLlxuICovXG5cbnZhciBHVE0gPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdHb29nbGUgVGFnIE1hbmFnZXInKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnZGF0YUxheWVyJylcbiAgLmdsb2JhbCgnZ29vZ2xlX3RhZ19tYW5hZ2VyJylcbiAgLm9wdGlvbignY29udGFpbmVySWQnLCAnJylcbiAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSlcbiAgLm9wdGlvbigndHJhY2tDYXRlZ29yaXplZFBhZ2VzJywgdHJ1ZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndG0uanM/aWQ9e3sgY29udGFpbmVySWQgfX0mbD1kYXRhTGF5ZXJcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3RhZy1tYW5hZ2VyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5HVE0ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICBwdXNoKHsgJ2d0bS5zdGFydCc6ICtuZXcgRGF0ZSwgZXZlbnQ6ICdndG0uanMnIH0pO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkdUTS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuZGF0YUxheWVyICYmIFtdLnB1c2ggIT0gd2luZG93LmRhdGFMYXllci5wdXNoKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuR1RNLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBjYXRlZ29yeSA9IHBhZ2UuY2F0ZWdvcnkoKTtcbiAgdmFyIHByb3BzID0gcGFnZS5wcm9wZXJ0aWVzKCk7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgdmFyIHRyYWNrO1xuXG4gIC8vIGFsbFxuICBpZiAob3B0cy50cmFja0FsbFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKCkpO1xuICB9XG5cbiAgLy8gY2F0ZWdvcml6ZWRcbiAgaWYgKGNhdGVnb3J5ICYmIG9wdHMudHJhY2tDYXRlZ29yaXplZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKGNhdGVnb3J5KSk7XG4gIH1cblxuICAvLyBuYW1lZFxuICBpZiAobmFtZSAmJiBvcHRzLnRyYWNrTmFtZWRQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjayhuYW1lKSk7XG4gIH1cbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vdGFnLW1hbmFnZXIvZGV2Z3VpZGUjZXZlbnRzXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuR1RNLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICBwcm9wcy5ldmVudCA9IHRyYWNrLmV2ZW50KCk7XG4gIHB1c2gocHJvcHMpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIElkZW50aWZ5ID0gcmVxdWlyZSgnZmFjYWRlJykuSWRlbnRpZnk7XG52YXIgVHJhY2sgPSByZXF1aXJlKCdmYWNhZGUnKS5UcmFjaztcbnZhciBjYWxsYmFjayA9IHJlcXVpcmUoJ2NhbGxiYWNrJyk7XG52YXIgbG9hZCA9IHJlcXVpcmUoJ2xvYWQtc2NyaXB0Jyk7XG52YXIgb25Cb2R5ID0gcmVxdWlyZSgnb24tYm9keScpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbi8qKlxuICogRXhwb3NlIGBHb1NxdWFyZWRgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBHb1NxdWFyZWQgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdHb1NxdWFyZWQnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2dzJylcbiAgLm9wdGlvbignc2l0ZVRva2VuJywgJycpXG4gIC5vcHRpb24oJ2Fub255bWl6ZUlQJywgZmFsc2UpXG4gIC5vcHRpb24oJ2Nvb2tpZURvbWFpbicsIG51bGwpXG4gIC5vcHRpb24oJ3VzZUNvb2tpZXMnLCB0cnVlKVxuICAub3B0aW9uKCd0cmFja0hhc2gnLCBmYWxzZSlcbiAgLm9wdGlvbigndHJhY2tMb2NhbCcsIGZhbHNlKVxuICAub3B0aW9uKCd0cmFja1BhcmFtcycsIHRydWUpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9kMWw2cDJzYzk2NDVoYy5jbG91ZGZyb250Lm5ldC90cmFja2VyLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL3d3dy5nb3NxdWFyZWQuY29tL2RldmVsb3Blci90cmFja2VyXG4gKiBPcHRpb25zOiBodHRwczovL3d3dy5nb3NxdWFyZWQuY29tL2RldmVsb3Blci90cmFja2VyL2NvbmZpZ3VyYXRpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkdvU3F1YXJlZC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgcHVzaChvcHRpb25zLnNpdGVUb2tlbik7XG5cbiAgZWFjaChvcHRpb25zLCBmdW5jdGlvbihuYW1lLCB2YWx1ZSl7XG4gICAgaWYgKCdzaXRlVG9rZW4nID09IG5hbWUpIHJldHVybjtcbiAgICBpZiAobnVsbCA9PSB2YWx1ZSkgcmV0dXJuO1xuICAgIHB1c2goJ3NldCcsIG5hbWUsIHZhbHVlKTtcbiAgfSk7XG5cbiAgc2VsZi5pZGVudGlmeShuZXcgSWRlbnRpZnkoe1xuICAgIHRyYWl0czogdXNlci50cmFpdHMoKSxcbiAgICB1c2VySWQ6IHVzZXIuaWQoKVxuICB9KSk7XG5cbiAgc2VsZi5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/IChjaGVja3MgaWYgdGhlIHRyYWNrZXIgdmVyc2lvbiBpcyBzZXQpXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Hb1NxdWFyZWQucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9ncyAmJiB3aW5kb3cuX2dzLnYpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHBzOi8vd3d3Lmdvc3F1YXJlZC5jb20vZGV2ZWxvcGVyL3RyYWNrZXIvcGFnZXZpZXdzXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuR29TcXVhcmVkLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBwcm9wcyA9IHBhZ2UucHJvcGVydGllcygpO1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcbiAgcHVzaCgndHJhY2snLCBwcm9wcy5wYXRoLCBuYW1lIHx8IHByb3BzLnRpdGxlKVxufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBodHRwczovL3d3dy5nb3NxdWFyZWQuY29tL2RldmVsb3Blci90cmFja2VyL3RhZ2dpbmdcbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkdvU3F1YXJlZC5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoeyB1c2VySWQ6ICd1c2VySUQnIH0pO1xuICB2YXIgdXNlcm5hbWUgPSBpZGVudGlmeS51c2VybmFtZSgpO1xuICB2YXIgZW1haWwgPSBpZGVudGlmeS5lbWFpbCgpO1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgaWYgKGlkKSBwdXNoKCdzZXQnLCAndmlzaXRvcklEJywgaWQpO1xuICB2YXIgbmFtZSA9ICBlbWFpbCB8fCB1c2VybmFtZSB8fCBpZDtcbiAgaWYgKG5hbWUpIHB1c2goJ3NldCcsICd2aXNpdG9yTmFtZScsIG5hbWUpO1xuICBwdXNoKCdzZXQnLCAndmlzaXRvcicsIHRyYWl0cyk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIGh0dHBzOi8vd3d3Lmdvc3F1YXJlZC5jb20vZGV2ZWxvcGVyL3RyYWNrZXIvZXZlbnRzXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5Hb1NxdWFyZWQucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICBwdXNoKCdldmVudCcsIHRyYWNrLmV2ZW50KCksIHRyYWNrLnByb3BlcnRpZXMoKSk7XG59O1xuXG4vKipcbiAqIENoZWNrZWQgb3V0LlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5Hb1NxdWFyZWQucHJvdG90eXBlLmNvbXBsZXRlZE9yZGVyID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcHJvZHVjdHMgPSB0cmFjay5wcm9kdWN0cygpO1xuICB2YXIgaXRlbXMgPSBbXTtcblxuICBlYWNoKHByb2R1Y3RzLCBmdW5jdGlvbihwcm9kdWN0KXtcbiAgICB2YXIgdHJhY2sgPSBuZXcgVHJhY2soeyBwcm9wZXJ0aWVzOiBwcm9kdWN0IH0pO1xuICAgIGl0ZW1zLnB1c2goe1xuICAgICAgY2F0ZWdvcnk6IHRyYWNrLmNhdGVnb3J5KCksXG4gICAgICBxdWFudGl0eTogdHJhY2sucXVhbnRpdHkoKSxcbiAgICAgIHByaWNlOiB0cmFjay5wcmljZSgpLFxuICAgICAgbmFtZTogdHJhY2submFtZSgpLFxuICAgIH0pO1xuICB9KVxuXG4gIHB1c2goJ3RyYW5zYWN0aW9uJywgdHJhY2sub3JkZXJJZCgpLCB7XG4gICAgcmV2ZW51ZTogdHJhY2sudG90YWwoKSxcbiAgICB0cmFjazogdHJ1ZVxuICB9LCBpdGVtcyk7XG59O1xuXG4vKipcbiAqIFB1c2ggdG8gYF9ncy5xYC5cbiAqXG4gKiBAcGFyYW0gey4uLn0gYXJnc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcHVzaCgpe1xuICB2YXIgX2dzID0gd2luZG93Ll9ncyA9IHdpbmRvdy5fZ3MgfHwgZnVuY3Rpb24oKXtcbiAgICAoX2dzLnEgPSBfZ3MucSB8fCBbXSkucHVzaChhcmd1bWVudHMpO1xuICB9O1xuICBfZ3MuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGFsaWFzID0gcmVxdWlyZSgnYWxpYXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEhlYXBgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBIZWFwID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignSGVhcCcpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdoZWFwJylcbiAgLmdsb2JhbCgnX2hlYXBpZCcpXG4gIC5vcHRpb24oJ2FwcElkJywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9kMzZsdnVjZzlrem91cy5jbG91ZGZyb250Lm5ldFwiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cHM6Ly9oZWFwYW5hbHl0aWNzLmNvbS9kb2NzI2luc3RhbGxXZWJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkhlYXAucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93LmhlYXA9d2luZG93LmhlYXB8fFtdO3dpbmRvdy5oZWFwLmxvYWQ9ZnVuY3Rpb24oYSl7d2luZG93Ll9oZWFwaWQ9YTt2YXIgZD1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt3aW5kb3cuaGVhcC5wdXNoKFthXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKSk7fTt9LGU9W1wiaWRlbnRpZnlcIixcInRyYWNrXCJdO2ZvciAodmFyIGY9MDtmPGUubGVuZ3RoO2YrKyl3aW5kb3cuaGVhcFtlW2ZdXT1kKGVbZl0pO307XG4gIHdpbmRvdy5oZWFwLmxvYWQodGhpcy5vcHRpb25zLmFwcElkKTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5IZWFwLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gKHdpbmRvdy5oZWFwICYmIHdpbmRvdy5oZWFwLmFwcGlkKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogaHR0cHM6Ly9oZWFwYW5hbHl0aWNzLmNvbS9kb2NzI2lkZW50aWZ5XG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5IZWFwLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICB2YXIgdXNlcm5hbWUgPSBpZGVudGlmeS51c2VybmFtZSgpO1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgdmFyIGhhbmRsZSA9IHVzZXJuYW1lIHx8IGlkO1xuICBpZiAoaGFuZGxlKSB0cmFpdHMuaGFuZGxlID0gaGFuZGxlO1xuICBkZWxldGUgdHJhaXRzLnVzZXJuYW1lO1xuICB3aW5kb3cuaGVhcC5pZGVudGlmeSh0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwczovL2hlYXBhbmFseXRpY3MuY29tL2RvY3MjdHJhY2tcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkhlYXAucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB3aW5kb3cuaGVhcC50cmFjayh0cmFjay5ldmVudCgpLCB0cmFjay5wcm9wZXJ0aWVzKCkpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xuXG4vKipcbiAqIEV4cG9zZSBgaGVsbG9iYXIuY29tYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgSGVsbG9iYXIgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdIZWxsbyBCYXInKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2hicScpXG4gIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vczMuYW1hem9uYXdzLmNvbS9zY3JpcHRzLmhlbGxvYmFyLmNvbS97eyBhcGlLZXkgfX0uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9zY3JpcHRzLmhlbGxvYmFyLmNvbS9iYjkwMDY2NWEzMDkwYTc5ZWUxZGI5OGMzYWYyMWVhMTc0YmJjMDlmLmpzXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5IZWxsb2Jhci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuX2hicSA9IHdpbmRvdy5faGJxIHx8IFtdO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkhlbGxvYmFyLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5faGJxICYmIHdpbmRvdy5faGJxLnB1c2ggIT09IEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBIaXRUYWlsYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgSGl0VGFpbCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0hpdFRhaWwnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnaHRrJylcbiAgLm9wdGlvbignc2l0ZUlkJywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy97eyBzaXRlSWQgfX0uaGl0dGFpbC5jb20vbWx0LmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkhpdFRhaWwucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5IaXRUYWlsLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMuZm4od2luZG93Lmh0ayk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfaHNxJyk7XG52YXIgY29udmVydCA9IHJlcXVpcmUoJ2NvbnZlcnQtZGF0ZXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEh1YlNwb3RgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBIdWJTcG90ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignSHViU3BvdCcpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfaHNxJylcbiAgLm9wdGlvbigncG9ydGFsSWQnLCBudWxsKVxuICAudGFnKCc8c2NyaXB0IGlkPVwiaHMtYW5hbHl0aWNzXCIgc3JjPVwiaHR0cHM6Ly9qcy5ocy1hbmFseXRpY3MubmV0L2FuYWx5dGljcy97eyBjYWNoZSB9fS97eyBwb3J0YWxJZCB9fS5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5IdWJTcG90LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5faHNxID0gW107XG4gIHZhciBjYWNoZSA9IE1hdGguY2VpbChuZXcgRGF0ZSgpIC8gMzAwMDAwKSAqIDMwMDAwMDtcbiAgdGhpcy5sb2FkKHsgY2FjaGU6IGNhY2hlIH0sIHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5IdWJTcG90LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5faHNxICYmIHdpbmRvdy5faHNxLnB1c2ggIT09IEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2F0ZWdvcnkgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICovXG5cbkh1YlNwb3QucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgcHVzaCgnX3RyYWNrUGFnZXZpZXcnKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5IdWJTcG90LnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgaWYgKCFpZGVudGlmeS5lbWFpbCgpKSByZXR1cm47XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoKTtcbiAgdHJhaXRzID0gY29udmVydERhdGVzKHRyYWl0cyk7XG4gIHB1c2goJ2lkZW50aWZ5JywgdHJhaXRzKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5IdWJTcG90LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICBwcm9wcyA9IGNvbnZlcnREYXRlcyhwcm9wcyk7XG4gIHB1c2goJ3RyYWNrRXZlbnQnLCB0cmFjay5ldmVudCgpLCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgYWxsIHRoZSBkYXRlcyBpbiB0aGUgSHViU3BvdCBwcm9wZXJ0aWVzIHRvIG1pbGxpc2Vjb25kIHRpbWVzXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAqL1xuXG5mdW5jdGlvbiBjb252ZXJ0RGF0ZXMocHJvcGVydGllcyl7XG4gIHJldHVybiBjb252ZXJ0KHByb3BlcnRpZXMsIGZ1bmN0aW9uKGRhdGUpeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCk7IH0pO1xufVxuIiwiXHJcbi8qKlxyXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxyXG4gKi9cclxuXHJcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xyXG52YXIgYWxpYXMgPSByZXF1aXJlKCdhbGlhcycpO1xyXG5cclxuLyoqXHJcbiAqIEV4cG9zZSBgSW1wcm92ZWx5YCBpbnRlZ3JhdGlvbi5cclxuICovXHJcblxyXG52YXIgSW1wcm92ZWx5ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignSW1wcm92ZWx5JylcclxuICAuYXNzdW1lc1BhZ2V2aWV3KClcclxuICAuZ2xvYmFsKCdfaW1wcm92ZWx5JylcclxuICAuZ2xvYmFsKCdpbXByb3ZlbHknKVxyXG4gIC5vcHRpb24oJ2RvbWFpbicsICcnKVxyXG4gIC5vcHRpb24oJ3Byb2plY3RJZCcsIG51bGwpXHJcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL3t7IGRvbWFpbiB9fS5pbGptcC5jb20vaW1wcm92ZWx5LmpzXCI+Jyk7XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZS5cclxuICpcclxuICogaHR0cDovL3d3dy5pbXByb3ZlbHkuY29tL2RvY3MvbGFuZGluZy1wYWdlLWNvZGVcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcclxuICovXHJcblxyXG5JbXByb3ZlbHkucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcclxuICB3aW5kb3cuX2ltcHJvdmVseSA9IFtdO1xyXG4gIHdpbmRvdy5pbXByb3ZlbHkgPSB7IGluaXQ6IGZ1bmN0aW9uKGUsIHQpeyB3aW5kb3cuX2ltcHJvdmVseS5wdXNoKFtcImluaXRcIiwgZSwgdF0pOyB9LCBnb2FsOiBmdW5jdGlvbihlKXsgd2luZG93Ll9pbXByb3ZlbHkucHVzaChbXCJnb2FsXCIsIGVdKTsgfSwgbGFiZWw6IGZ1bmN0aW9uKGUpeyB3aW5kb3cuX2ltcHJvdmVseS5wdXNoKFtcImxhYmVsXCIsIGVdKTsgfX07XHJcblxyXG4gIHZhciBkb21haW4gPSB0aGlzLm9wdGlvbnMuZG9tYWluO1xyXG4gIHZhciBpZCA9IHRoaXMub3B0aW9ucy5wcm9qZWN0SWQ7XHJcbiAgd2luZG93LmltcHJvdmVseS5pbml0KGRvbWFpbiwgaWQpO1xyXG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBMb2FkZWQ/XHJcbiAqXHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAqL1xyXG5cclxuSW1wcm92ZWx5LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xyXG4gIHJldHVybiAhISAod2luZG93LmltcHJvdmVseSAmJiB3aW5kb3cuaW1wcm92ZWx5LmlkZW50aWZ5KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBJZGVudGlmeS5cclxuICpcclxuICogaHR0cDovL3d3dy5pbXByb3ZlbHkuY29tL2RvY3MvbGFiZWxpbmctdmlzaXRvcnNcclxuICpcclxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcclxuICovXHJcblxyXG5JbXByb3ZlbHkucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xyXG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xyXG4gIGlmIChpZCkgd2luZG93LmltcHJvdmVseS5sYWJlbChpZCk7XHJcbn07XHJcblxyXG4vKipcclxuICogVHJhY2suXHJcbiAqXHJcbiAqIGh0dHA6Ly93d3cuaW1wcm92ZWx5LmNvbS9kb2NzL2NvbnZlcnNpb24tY29kZVxyXG4gKlxyXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xyXG4gKi9cclxuXHJcbkltcHJvdmVseS5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XHJcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcyh7IHJldmVudWU6ICdhbW91bnQnIH0pO1xyXG4gIHByb3BzLnR5cGUgPSB0cmFjay5ldmVudCgpO1xyXG4gIHdpbmRvdy5pbXByb3ZlbHkuZ29hbChwcm9wcyk7XHJcbn07XHJcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX2l2YScpO1xudmFyIFRyYWNrID0gcmVxdWlyZSgnZmFjYWRlJykuVHJhY2s7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG5cbi8qKlxuICogSE9QLlxuICovXG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEV4cG9zZSBgSW5zaWRlVmF1bHRgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBJbnNpZGVWYXVsdCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0luc2lkZVZhdWx0JylcbiAgLmdsb2JhbCgnX2l2YScpXG4gIC5vcHRpb24oJ2NsaWVudElkJywgJycpXG4gIC5vcHRpb24oJ2RvbWFpbicsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vYW5hbHl0aWNzLnN0YXRpY2l2LmNvbS9pdmEuanNcIj4nKVxuICAubWFwcGluZygnZXZlbnRzJyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0gcGFnZVxuICovXG5cbkluc2lkZVZhdWx0LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBkb21haW4gPSB0aGlzLm9wdGlvbnMuZG9tYWluO1xuICB3aW5kb3cuX2l2YSA9IHdpbmRvdy5faXZhIHx8IFtdO1xuICBwdXNoKCdzZXRDbGllbnRJZCcsIHRoaXMub3B0aW9ucy5jbGllbnRJZCk7XG4gIHZhciB1c2VySWQgPSB0aGlzLmFuYWx5dGljcy51c2VyKCkuaWQoKTtcbiAgaWYgKHVzZXJJZCkgcHVzaCgnc2V0VXNlcklkJywgdXNlcklkKTtcbiAgaWYgKGRvbWFpbikgcHVzaCgnc2V0RG9tYWluJywgZG9tYWluKTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5JbnNpZGVWYXVsdC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX2l2YSAmJiB3aW5kb3cuX2l2YS5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuSW5zaWRlVmF1bHQucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICBwdXNoKCdzZXRVc2VySWQnLCBpZGVudGlmeS51c2VySWQoKSk7XG59O1xuXG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5JbnNpZGVWYXVsdC5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICAvLyB0aGV5IHdhbnQgZXZlcnkgbGFuZGluZyBwYWdlIHRvIHNlbmQgYSBcImNsaWNrXCIgZXZlbnQuXG4gIHB1c2goJ3RyYWNrRXZlbnQnLCAnY2xpY2snKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogVHJhY2tzIGV2ZXJ5dGhpbmcgZXhjZXB0ICdzYWxlJyBldmVudHMuXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5JbnNpZGVWYXVsdC5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciB1c2VyID0gdGhpcy5hbmFseXRpY3MudXNlcigpO1xuICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHModHJhY2suZXZlbnQoKSk7XG4gIHZhciB2YWx1ZSA9IHRyYWNrLnJldmVudWUoKSB8fCB0cmFjay52YWx1ZSgpIHx8IDA7XG4gIHZhciBldmVudElkID0gdHJhY2sub3JkZXJJZCgpIHx8IHVzZXIuaWQoKSB8fCAnJztcbiAgZWFjaChldmVudHMsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAvLyAnc2FsZScgaXMgYSBzcGVjaWFsIGV2ZW50IHRoYXQgd2lsbCBiZSByb3V0ZWQgdG8gYSB0YWJsZSB0aGF0IGlzIGRlcHJlY2F0ZWQgb24gSW5zaWRlVmF1bHQncyBlbmQuXG4gICAgLy8gVGhleSBkb24ndCB3YW50IGEgZ2VuZXJpYyAnc2FsZScgZXZlbnQgdG8gZ28gdG8gdGhlaXIgZGVwcmVjYXRlZCB0YWJsZS5cbiAgICBpZiAoZXZlbnQgIT0gJ3NhbGUnKSB7XG4gICAgICBwdXNoKCd0cmFja0V2ZW50JywgZXZlbnQsIHZhbHVlLCBldmVudElkKTtcbiAgICB9XG4gIH0pO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX19pbnNwJyk7XG52YXIgYWxpYXMgPSByZXF1aXJlKCdhbGlhcycpO1xudmFyIGNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEluc3BlY3RsZXRgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBJbnNwZWN0bGV0ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignSW5zcGVjdGxldCcpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfX2luc3AnKVxuICAuZ2xvYmFsKCdfX2luc3BfJylcbiAgLm9wdGlvbignd2lkJywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9jZG4uaW5zcGVjdGxldC5jb20vaW5zcGVjdGxldC5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cHM6Ly93d3cuaW5zcGVjdGxldC5jb20vZGFzaGJvYXJkL2VtYmVkY29kZS8xNDkyNDYxNzU5L2luaXRpYWxcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkluc3BlY3RsZXQucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgcHVzaCgnd2lkJywgdGhpcy5vcHRpb25zLndpZCk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuSW5zcGVjdGxldC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX19pbnNwXyAmJiB3aW5kb3cuX19pbnNwKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogaHR0cDovL3d3dy5pbnNwZWN0bGV0LmNvbS9kb2NzI3RhZ2dpbmdcbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkluc3BlY3RsZXQucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24gKGlkZW50aWZ5KSB7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoeyBpZDogJ3VzZXJpZCcgfSk7XG4gIHB1c2goJ3RhZ1Nlc3Npb24nLCB0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwOi8vd3d3Lmluc3BlY3RsZXQuY29tL2RvY3MvdGFnc1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuSW5zcGVjdGxldC5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHB1c2goJ3RhZ1Nlc3Npb24nLCB0cmFjay5ldmVudCgpKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBodHRwOi8vd3d3Lmluc3BlY3RsZXQuY29tL2RvY3MvdGFnc1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuSW5zcGVjdGxldC5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKCl7XG4gIHB1c2goJ3ZpcnR1YWxQYWdlJyk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgY29udmVydERhdGVzID0gcmVxdWlyZSgnY29udmVydC1kYXRlcycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnZGVmYXVsdHMnKTtcbnZhciBpc0VtYWlsID0gcmVxdWlyZSgnaXMtZW1haWwnKTtcbnZhciBsb2FkID0gcmVxdWlyZSgnbG9hZC1zY3JpcHQnKTtcbnZhciBlbXB0eSA9IHJlcXVpcmUoJ2lzLWVtcHR5Jyk7XG52YXIgYWxpYXMgPSByZXF1aXJlKCdhbGlhcycpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG52YXIgd2hlbiA9IHJlcXVpcmUoJ3doZW4nKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBJbnRlcmNvbWAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEludGVyY29tID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignSW50ZXJjb20nKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnSW50ZXJjb20nKVxuICAub3B0aW9uKCdhY3RpdmF0b3InLCAnI0ludGVyY29tRGVmYXVsdFdpZGdldCcpXG4gIC5vcHRpb24oJ2FwcElkJywgJycpXG4gIC5vcHRpb24oJ2luYm94JywgZmFsc2UpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9zdGF0aWMuaW50ZXJjb21jZG4uY29tL2ludGVyY29tLnYxLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vZG9jcy5pbnRlcmNvbS5pby9cbiAqIGh0dHA6Ly9kb2NzLmludGVyY29tLmlvLyNJbnRlcmNvbUpTXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5JbnRlcmNvbS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIHdoZW4oZnVuY3Rpb24oKXsgcmV0dXJuIHNlbGYubG9hZGVkKCk7IH0sIHNlbGYucmVhZHkpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuSW50ZXJjb20ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpcy5mbih3aW5kb3cuSW50ZXJjb20pO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbkludGVyY29tLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5JbnRlcmNvbSgndXBkYXRlJyk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIGh0dHA6Ly9kb2NzLmludGVyY29tLmlvLyNJbnRlcmNvbUpTXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5JbnRlcmNvbS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoeyB1c2VySWQ6ICd1c2VyX2lkJyB9KTtcbiAgdmFyIGFjdGl2YXRvciA9IHRoaXMub3B0aW9ucy5hY3RpdmF0b3I7XG4gIHZhciBvcHRzID0gaWRlbnRpZnkub3B0aW9ucyh0aGlzLm5hbWUpO1xuICB2YXIgY29tcGFueUNyZWF0ZWQgPSBpZGVudGlmeS5jb21wYW55Q3JlYXRlZCgpO1xuICB2YXIgY3JlYXRlZCA9IGlkZW50aWZ5LmNyZWF0ZWQoKTtcbiAgdmFyIGVtYWlsID0gaWRlbnRpZnkuZW1haWwoKTtcbiAgdmFyIG5hbWUgPSBpZGVudGlmeS5uYW1lKCk7XG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuICB2YXIgZ3JvdXAgPSB0aGlzLmFuYWx5dGljcy5ncm91cCgpO1xuXG4gIGlmICghaWQgJiYgIXRyYWl0cy5lbWFpbCkgcmV0dXJuOyAvLyBvbmUgaXMgcmVxdWlyZWRcblxuICB0cmFpdHMuYXBwX2lkID0gdGhpcy5vcHRpb25zLmFwcElkO1xuXG4gIC8vIGludGVyY29tIHJlcXVpcmVzIGBjb21wYW55YCB0byBiZSBhbiBvYmplY3QuIGRlZmF1bHQgaXQgd2l0aCBncm91cCB0cmFpdHNcbiAgLy8gc28gdGhhdCB3ZSBndWFyYW50ZWUgYW4gYGlkYCBpcyB0aGVyZSwgc2luY2UgdGhleSByZXF1aXJlIGl0XG4gIGlmIChudWxsICE9IHRyYWl0cy5jb21wYW55ICYmICFpcy5vYmplY3QodHJhaXRzLmNvbXBhbnkpKSBkZWxldGUgdHJhaXRzLmNvbXBhbnk7XG4gIGlmICh0cmFpdHMuY29tcGFueSkgZGVmYXVsdHModHJhaXRzLmNvbXBhbnksIGdyb3VwLnRyYWl0cygpKTtcblxuICAvLyBuYW1lXG4gIGlmIChuYW1lKSB0cmFpdHMubmFtZSA9IG5hbWU7XG5cbiAgLy8gaGFuZGxlIGRhdGVzXG4gIGlmICh0cmFpdHMuY29tcGFueSAmJiBjb21wYW55Q3JlYXRlZCkgdHJhaXRzLmNvbXBhbnkuY3JlYXRlZCA9IGNvbXBhbnlDcmVhdGVkO1xuICBpZiAoY3JlYXRlZCkgdHJhaXRzLmNyZWF0ZWQgPSBjcmVhdGVkO1xuXG4gIC8vIGNvbnZlcnQgZGF0ZXNcbiAgdHJhaXRzID0gY29udmVydERhdGVzKHRyYWl0cywgZm9ybWF0RGF0ZSk7XG4gIHRyYWl0cyA9IGFsaWFzKHRyYWl0cywgeyBjcmVhdGVkOiAnY3JlYXRlZF9hdCd9KTtcbiAgaWYgKHRyYWl0cy5jb21wYW55KSB0cmFpdHMuY29tcGFueSA9IGFsaWFzKHRyYWl0cy5jb21wYW55LCB7IGNyZWF0ZWQ6ICdjcmVhdGVkX2F0JyB9KTtcblxuICAvLyBoYW5kbGUgb3B0aW9uc1xuICBpZiAob3B0cy5pbmNyZW1lbnRzKSB0cmFpdHMuaW5jcmVtZW50cyA9IG9wdHMuaW5jcmVtZW50cztcbiAgaWYgKG9wdHMudXNlckhhc2gpIHRyYWl0cy51c2VyX2hhc2ggPSBvcHRzLnVzZXJIYXNoO1xuICBpZiAob3B0cy51c2VyX2hhc2gpIHRyYWl0cy51c2VyX2hhc2ggPSBvcHRzLnVzZXJfaGFzaDtcblxuICAvLyBJbnRlcmNvbSwgd2lsbCBmb3JjZSB0aGUgd2lkZ2V0IHRvIGFwcGVhclxuICAvLyBpZiB0aGUgc2VsZWN0b3IgaXMgI0ludGVyY29tRGVmYXVsdFdpZGdldFxuICAvLyBzbyBubyBuZWVkIHRvIGNoZWNrIGluYm94LCBqdXN0IG5lZWQgdG8gY2hlY2tcbiAgLy8gdGhhdCB0aGUgc2VsZWN0b3IgaXNuJ3QgI0ludGVyY29tRGVmYXVsdFdpZGdldC5cbiAgaWYgKCcjSW50ZXJjb21EZWZhdWx0V2lkZ2V0JyAhPSBhY3RpdmF0b3IpIHtcbiAgICB0cmFpdHMud2lkZ2V0ID0geyBhY3RpdmF0b3I6IGFjdGl2YXRvciB9O1xuICB9XG5cbiAgdmFyIG1ldGhvZCA9IHRoaXMuX2lkICE9PSBpZCA/ICdib290JzogJ3VwZGF0ZSc7XG4gIHRoaXMuX2lkID0gaWQ7IC8vIGNhY2hlIGZvciBuZXh0IHRpbWVcblxuICB3aW5kb3cuSW50ZXJjb20obWV0aG9kLCB0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBHcm91cC5cbiAqXG4gKiBAcGFyYW0ge0dyb3VwfSBncm91cFxuICovXG5cbkludGVyY29tLnByb3RvdHlwZS5ncm91cCA9IGZ1bmN0aW9uKGdyb3VwKXtcbiAgdmFyIHByb3BzID0gZ3JvdXAucHJvcGVydGllcygpO1xuICB2YXIgaWQgPSBncm91cC5ncm91cElkKCk7XG4gIGlmIChpZCkgcHJvcHMuaWQgPSBpZDtcbiAgd2luZG93LkludGVyY29tKCd1cGRhdGUnLCB7IGNvbXBhbnk6IHByb3BzIH0pO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbkludGVyY29tLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgd2luZG93LkludGVyY29tKCd0cmFja0V2ZW50JywgdHJhY2suZXZlbnQoKSwgdHJhY2sucHJvcGVydGllcygpKTtcbn07XG5cbi8qKlxuICogRm9ybWF0IGEgZGF0ZSB0byBJbnRlcmNvbSdzIGxpa2luZy5cbiAqXG4gKiBAcGFyYW0ge0RhdGV9IGRhdGVcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoZGF0ZSAvIDEwMDApO1xufVxuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgY2xvbmUgPSByZXF1aXJlKCdjbG9uZScpO1xuXG4vKipcbiAqIEV4cG9zZSBgS2VlbiBJT2AgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEtlZW4gPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdLZWVuIElPJylcbiAgLmdsb2JhbCgnS2VlbicpXG4gIC5vcHRpb24oJ3Byb2plY3RJZCcsICcnKVxuICAub3B0aW9uKCdyZWFkS2V5JywgJycpXG4gIC5vcHRpb24oJ3dyaXRlS2V5JywgJycpXG4gIC5vcHRpb24oJ2lwQWRkb24nLCBmYWxzZSlcbiAgLm9wdGlvbigndWFBZGRvbicsIGZhbHNlKVxuICAub3B0aW9uKCd1cmxBZGRvbicsIGZhbHNlKVxuICAub3B0aW9uKCdyZWZlcnJlckFkZG9uJywgZmFsc2UpXG4gIC5vcHRpb24oJ3RyYWNrTmFtZWRQYWdlcycsIHRydWUpXG4gIC5vcHRpb24oJ3RyYWNrQWxsUGFnZXMnLCBmYWxzZSlcbiAgLm9wdGlvbigndHJhY2tDYXRlZ29yaXplZFBhZ2VzJywgdHJ1ZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2QyNmIzOTVmd3p1NWZ6LmNsb3VkZnJvbnQubmV0LzMuMC43L3t7IGxpYiB9fS5taW4uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8va2Vlbi5pby9kb2NzL1xuICovXG5cbktlZW4ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgIWZ1bmN0aW9uKGEsYil7aWYodm9pZCAwPT09YlthXSl7YltcIl9cIithXT17fSxiW2FdPWZ1bmN0aW9uKGMpe2JbXCJfXCIrYV0uY2xpZW50cz1iW1wiX1wiK2FdLmNsaWVudHN8fHt9LGJbXCJfXCIrYV0uY2xpZW50c1tjLnByb2plY3RJZF09dGhpcyx0aGlzLl9jb25maWc9Y30sYlthXS5yZWFkeT1mdW5jdGlvbihjKXtiW1wiX1wiK2FdLnJlYWR5PWJbXCJfXCIrYV0ucmVhZHl8fFtdLGJbXCJfXCIrYV0ucmVhZHkucHVzaChjKX07Zm9yKHZhciBjPVtcImFkZEV2ZW50XCIsXCJzZXRHbG9iYWxQcm9wZXJ0aWVzXCIsXCJ0cmFja0V4dGVybmFsTGlua1wiLFwib25cIl0sZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbXCJfXCIrYV09dGhpc1tcIl9cIithXXx8W10sdGhpc1tcIl9cIithXS5wdXNoKGFyZ3VtZW50cyksdGhpc319O2JbYV0ucHJvdG90eXBlW2VdPWYoZSl9fX0oXCJLZWVuXCIsd2luZG93KTtcbiAgdGhpcy5jbGllbnQgPSBuZXcgd2luZG93LktlZW4oe1xuICAgIHByb2plY3RJZDogb3B0aW9ucy5wcm9qZWN0SWQsXG4gICAgd3JpdGVLZXk6IG9wdGlvbnMud3JpdGVLZXksXG4gICAgcmVhZEtleTogb3B0aW9ucy5yZWFkS2V5XG4gIH0pO1xuXG4gIC8vIGlmIHlvdSBoYXZlIGEgcmVhZC1rZXksIHRoZW4gbG9hZCB0aGUgZnVsbCBrZWVuIGxpYnJhcnlcbiAgdmFyIGxpYiA9IHRoaXMub3B0aW9ucy5yZWFkS2V5ID8gJ2tlZW4nIDogJ2tlZW4tdHJhY2tlcic7XG4gIHRoaXMubG9hZCh7IGxpYjogbGliIH0sIHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5LZWVuLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEod2luZG93LktlZW4gJiYgd2luZG93LktlZW4ucHJvdG90eXBlLmNvbmZpZ3VyZSk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuS2Vlbi5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgY2F0ZWdvcnkgPSBwYWdlLmNhdGVnb3J5KCk7XG4gIHZhciBwcm9wcyA9IHBhZ2UucHJvcGVydGllcygpO1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcbiAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgLy8gYWxsIHBhZ2VzXG4gIGlmIChvcHRzLnRyYWNrQWxsUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2soKSk7XG4gIH1cblxuICAvLyBuYW1lZCBwYWdlc1xuICBpZiAobmFtZSAmJiBvcHRzLnRyYWNrTmFtZWRQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjayhuYW1lKSk7XG4gIH1cblxuICAvLyBjYXRlZ29yaXplZCBwYWdlc1xuICBpZiAoY2F0ZWdvcnkgJiYgb3B0cy50cmFja0NhdGVnb3JpemVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2soY2F0ZWdvcnkpKTtcbiAgfVxufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBUT0RPOiBtaWdyYXRlIGZyb20gb2xkIGB1c2VySWRgIHRvIHNpbXBsZXIgYGlkYFxuICogaHR0cHM6Ly9rZWVuLmlvL2RvY3MvZGF0YS1jb2xsZWN0aW9uL2RhdGEtZW5yaWNobWVudC8jYWRkLW9uc1xuICpcbiAqIFNldCB1cCB0aGUgS2VlbiBhZGRvbnMgb2JqZWN0LiBUaGVzZSBtdXN0IGJlIHNwZWNpZmljYWxseVxuICogZW5hYmxlZCBieSB0aGUgc2V0dGluZ3MgaW4gb3JkZXIgdG8gaW5jbHVkZSB0aGUgcGx1Z2lucywgb3IgZWxzZVxuICogS2VlbiB3aWxsIHJlamVjdCB0aGUgcmVxdWVzdC5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbktlZW4ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKCk7XG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuICB2YXIgdXNlciA9IHt9O1xuICBpZiAoaWQpIHVzZXIudXNlcklkID0gaWQ7XG4gIGlmICh0cmFpdHMpIHVzZXIudHJhaXRzID0gdHJhaXRzO1xuICB2YXIgcHJvcHMgPSB7IHVzZXI6IHVzZXIgfTtcbiAgdGhpcy5hZGRvbnMocHJvcHMsIGlkZW50aWZ5KTtcbiAgdGhpcy5jbGllbnQuc2V0R2xvYmFsUHJvcGVydGllcyhmdW5jdGlvbigpe1xuICAgIHJldHVybiBjbG9uZShwcm9wcyk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbktlZW4ucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHRoaXMuYWRkb25zKHByb3BzLCB0cmFjayk7XG4gIHRoaXMuY2xpZW50LmFkZEV2ZW50KHRyYWNrLmV2ZW50KCksIHByb3BzKTtcbn07XG5cbi8qKlxuICogQXR0YWNoIGFkZG9ucyB0byBgb2JqYCB3aXRoIGBtc2dgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7RmFjYWRlfSBtc2dcbiAqL1xuXG5LZWVuLnByb3RvdHlwZS5hZGRvbnMgPSBmdW5jdGlvbihvYmosIG1zZyl7XG4gIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICB2YXIgYWRkb25zID0gW107XG5cbiAgaWYgKG9wdGlvbnMuaXBBZGRvbikge1xuICAgIGFkZG9ucy5wdXNoKHtcbiAgICAgIG5hbWU6ICdrZWVuOmlwX3RvX2dlbycsXG4gICAgICBpbnB1dDogeyBpcDogJ2lwX2FkZHJlc3MnIH0sXG4gICAgICBvdXRwdXQ6ICdpcF9nZW9faW5mbydcbiAgICB9KTtcbiAgICBvYmouaXBfYWRkcmVzcyA9ICcke2tlZW4uaXB9JztcbiAgfVxuXG4gIGlmIChvcHRpb25zLnVhQWRkb24pIHtcbiAgICBhZGRvbnMucHVzaCh7XG4gICAgICBuYW1lOiAna2Vlbjp1YV9wYXJzZXInLFxuICAgICAgaW5wdXQ6IHsgdWFfc3RyaW5nOiAndXNlcl9hZ2VudCcgfSxcbiAgICAgIG91dHB1dDogJ3BhcnNlZF91c2VyX2FnZW50J1xuICAgIH0pO1xuICAgIG9iai51c2VyX2FnZW50ID0gJyR7a2Vlbi51c2VyX2FnZW50fSc7XG4gIH1cblxuICBpZiAob3B0aW9ucy51cmxBZGRvbikge1xuICAgIGFkZG9ucy5wdXNoKHtcbiAgICAgIG5hbWU6ICdrZWVuOnVybF9wYXJzZXInLFxuICAgICAgaW5wdXQ6IHsgdXJsOiAncGFnZV91cmwnIH0sXG4gICAgICBvdXRwdXQ6ICdwYXJzZWRfcGFnZV91cmwnXG4gICAgfSk7XG4gICAgb2JqLnBhZ2VfdXJsID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZjtcbiAgfVxuXG4gIGlmIChvcHRpb25zLnJlZmVycmVyQWRkb24pIHtcbiAgICBhZGRvbnMucHVzaCh7XG4gICAgICBuYW1lOiAna2VlbjpyZWZlcnJlcl9wYXJzZXInLFxuICAgICAgaW5wdXQ6IHtcbiAgICAgICAgcmVmZXJyZXJfdXJsOiAncmVmZXJyZXJfdXJsJyxcbiAgICAgICAgcGFnZV91cmw6ICdwYWdlX3VybCdcbiAgICAgIH0sXG4gICAgICBvdXRwdXQ6ICdyZWZlcnJlcl9pbmZvJ1xuICAgIH0pO1xuICAgIG9iai5yZWZlcnJlcl91cmwgPSBkb2N1bWVudC5yZWZlcnJlcjtcbiAgICBvYmoucGFnZV91cmwgPSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmO1xuICB9XG5cbiAgb2JqLmtlZW4gPSB7XG4gICAgdGltZXN0YW1wOiBtc2cudGltZXN0YW1wKCksXG4gICAgYWRkb25zOiBhZGRvbnNcbiAgfTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBpbmRleG9mID0gcmVxdWlyZSgnaW5kZXhvZicpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEtlbnNob29gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBLZW5zaG9vID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignS2Vuc2hvbycpXG4gIC5nbG9iYWwoJ2tfdHJhY2tldmVudCcpXG4gIC5vcHRpb24oJ2NpZCcsICcnKVxuICAub3B0aW9uKCdzdWJkb21haW4nLCAnJylcbiAgLm9wdGlvbignZXZlbnRzJywgW10pXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy97eyBzdWJkb21haW4gfX0ueGc0a2VuLmNvbS9tZWRpYS9nZXRweC5waHA/Y2lkPXt7IGNpZCB9fVwiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogU2VlIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2p1c3RpbmJveWxlLzc4NzU4MzJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbktlbnNob28ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/IChjaGVja3MgaWYgdGhlIHRyYWNraW5nIGZ1bmN0aW9uIGlzIHNldClcbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbktlbnNob28ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpcy5mbih3aW5kb3cua190cmFja2V2ZW50KTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogT25seSB0cmFja3MgZXZlbnRzIGlmIHRoZXkgYXJlIGxpc3RlZCBpbiB0aGUgZXZlbnRzIGFycmF5IG9wdGlvbi5cbiAqIFdlJ3ZlIGFza2VkIGZvciBkb2NzIGEgZmV3IHRpbWVzIGJ1dCBubyBnbyA6L1xuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qb3JnZWdvcmthL3RoZV90cmFja2VyL2Jsb2IvbWFzdGVyL2xpYi90aGVfdHJhY2tlci90cmFja2Vycy9rZW5zaG9vLnJiXG4gKlxuICogQHBhcmFtIHtUcmFja30gZXZlbnRcbiAqL1xuXG5LZW5zaG9vLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIGV2ZW50cyA9IHRoaXMub3B0aW9ucy5ldmVudHM7XG4gIHZhciB0cmFpdHMgPSB0cmFjay50cmFpdHMoKTtcbiAgdmFyIGV2ZW50ID0gdHJhY2suZXZlbnQoKTtcbiAgdmFyIHJldmVudWUgPSB0cmFjay5yZXZlbnVlKCkgfHwgMDtcbiAgaWYgKCF+aW5kZXhvZihldmVudHMsIGV2ZW50KSkgcmV0dXJuO1xuXG4gIHZhciBwYXJhbXMgPSBbXG4gICAgJ2lkPScgKyB0aGlzLm9wdGlvbnMuY2lkLFxuICAgICd0eXBlPWNvbnYnLFxuICAgICd2YWw9JyArIHJldmVudWUsXG4gICAgJ29yZGVySWQ9JyArIHRyYWNrLm9yZGVySWQoKSxcbiAgICAncHJvbW9Db2RlPScgKyB0cmFjay5jb3Vwb24oKSxcbiAgICAndmFsdWVDdXJyZW5jeT0nICsgdHJhY2suY3VycmVuY3koKSxcblxuICAgIC8vIExpdmUgdHJhY2tpbmcgZmllbGRzLiBJZ25vcmVkIGZvciBub3cgKHVudGlsIHdlIGdldCBkb2N1bWVudGF0aW9uKS5cbiAgICAnR0NJRD0nLFxuICAgICdrdz0nLFxuICAgICdwcm9kdWN0PSdcbiAgXTtcblxuICB3aW5kb3cua190cmFja2V2ZW50KHBhcmFtcywgdGhpcy5vcHRpb25zLnN1YmRvbWFpbik7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfa21xJyk7XG52YXIgVHJhY2sgPSByZXF1aXJlKCdmYWNhZGUnKS5UcmFjaztcbnZhciBhbGlhcyA9IHJlcXVpcmUoJ2FsaWFzJyk7XG52YXIgQmF0Y2ggPSByZXF1aXJlKCdiYXRjaCcpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgS0lTU21ldHJpY3NgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBLSVNTbWV0cmljcyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0tJU1NtZXRyaWNzJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19rbXEnKVxuICAuZ2xvYmFsKCdLTScpXG4gIC5nbG9iYWwoJ19rbWlsJylcbiAgLm9wdGlvbignYXBpS2V5JywgJycpXG4gIC5vcHRpb24oJ3RyYWNrTmFtZWRQYWdlcycsIHRydWUpXG4gIC5vcHRpb24oJ3RyYWNrQ2F0ZWdvcml6ZWRQYWdlcycsIHRydWUpXG4gIC5vcHRpb24oJ3ByZWZpeFByb3BlcnRpZXMnLCB0cnVlKVxuICAudGFnKCd1c2VsZXNzJywgJzxzY3JpcHQgc3JjPVwiLy9pLmtpc3NtZXRyaWNzLmNvbS9pLmpzXCI+JylcbiAgLnRhZygnbGlicmFyeScsICc8c2NyaXB0IHNyYz1cIi8vZG91ZzFpemFlcnd0My5jbG91ZGZyb250Lm5ldC97eyBhcGlLZXkgfX0uMS5qc1wiPicpO1xuXG4vKipcbiAqIENoZWNrIGlmIGJyb3dzZXIgaXMgbW9iaWxlLCBmb3Iga2lzc21ldHJpY3MuXG4gKlxuICogaHR0cDovL3N1cHBvcnQua2lzc21ldHJpY3MuY29tL2hvdy10b3MvYnJvd3Nlci1kZXRlY3Rpb24uaHRtbCNtb2JpbGUtdnMtbm9uLW1vYmlsZVxuICovXG5cbmV4cG9ydHMuaXNNb2JpbGUgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpXG4gIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0JsYWNrQmVycnkvaSlcbiAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBob25lfGlQb2QvaSlcbiAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKVxuICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PcGVyYSBNaW5pL2kpXG4gIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0lFTW9iaWxlL2kpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL3N1cHBvcnQua2lzc21ldHJpY3MuY29tL2FwaXMvamF2YXNjcmlwdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuS0lTU21ldHJpY3MucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB3aW5kb3cuX2ttcSA9IFtdO1xuICBpZiAoZXhwb3J0cy5pc01vYmlsZSkgcHVzaCgnc2V0JywgeyAnTW9iaWxlIFNlc3Npb24nOiAnWWVzJyB9KTtcblxuICB2YXIgYmF0Y2ggPSBuZXcgQmF0Y2goKTtcbiAgYmF0Y2gucHVzaChmdW5jdGlvbihkb25lKXsgc2VsZi5sb2FkKCd1c2VsZXNzJywgZG9uZSk7IH0pIC8vIDopXG4gIGJhdGNoLnB1c2goZnVuY3Rpb24oZG9uZSl7IHNlbGYubG9hZCgnbGlicmFyeScsIGRvbmUpOyB9KVxuICBiYXRjaC5lbmQoZnVuY3Rpb24oKXtcbiAgICBzZWxmLnRyYWNrUGFnZShwYWdlKTtcbiAgICBzZWxmLnJlYWR5KCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5LSVNTbWV0cmljcy5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGlzLm9iamVjdCh3aW5kb3cuS00pO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbktJU1NtZXRyaWNzLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIGlmICghd2luZG93LktNX1NLSVBfUEFHRV9WSUVXKSB3aW5kb3cuS00ucGFnZVZpZXcoKTtcbiAgdGhpcy50cmFja1BhZ2UocGFnZSk7XG59O1xuXG4vKipcbiAqIFRyYWNrIHBhZ2UuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuS0lTU21ldHJpY3MucHJvdG90eXBlLnRyYWNrUGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgY2F0ZWdvcnkgPSBwYWdlLmNhdGVnb3J5KCk7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcblxuICAvLyBuYW1lZCBwYWdlc1xuICBpZiAobmFtZSAmJiBvcHRzLnRyYWNrTmFtZWRQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjayhuYW1lKSk7XG4gIH1cblxuICAvLyBjYXRlZ29yaXplZCBwYWdlc1xuICBpZiAoY2F0ZWdvcnkgJiYgb3B0cy50cmFja0NhdGVnb3JpemVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2soY2F0ZWdvcnkpKTtcbiAgfVxufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbktJU1NtZXRyaWNzLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgaWYgKGlkKSBwdXNoKCdpZGVudGlmeScsIGlkKTtcbiAgaWYgKHRyYWl0cykgcHVzaCgnc2V0JywgdHJhaXRzKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5LSVNTbWV0cmljcy5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBtYXBwaW5nID0geyByZXZlbnVlOiAnQmlsbGluZyBBbW91bnQnIH07XG4gIHZhciBldmVudCA9IHRyYWNrLmV2ZW50KCk7XG4gIHZhciBwcm9wZXJ0aWVzID0gdHJhY2sucHJvcGVydGllcyhtYXBwaW5nKTtcbiAgaWYgKHRoaXMub3B0aW9ucy5wcmVmaXhQcm9wZXJ0aWVzKSBwcm9wZXJ0aWVzID0gcHJlZml4KGV2ZW50LCBwcm9wZXJ0aWVzKTtcbiAgcHVzaCgncmVjb3JkJywgZXZlbnQsIHByb3BlcnRpZXMpO1xufTtcblxuLyoqXG4gKiBBbGlhcy5cbiAqXG4gKiBAcGFyYW0ge0FsaWFzfSB0b1xuICovXG5cbktJU1NtZXRyaWNzLnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uKGFsaWFzKXtcbiAgcHVzaCgnYWxpYXMnLCBhbGlhcy50bygpLCBhbGlhcy5mcm9tKCkpO1xufTtcblxuLyoqXG4gKiBDb21wbGV0ZWQgb3JkZXIuXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbktJU1NtZXRyaWNzLnByb3RvdHlwZS5jb21wbGV0ZWRPcmRlciA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb2R1Y3RzID0gdHJhY2sucHJvZHVjdHMoKTtcbiAgdmFyIGV2ZW50ID0gdHJhY2suZXZlbnQoKTtcblxuICAvLyB0cmFuc2FjdGlvblxuICBwdXNoKCdyZWNvcmQnLCBldmVudCwgcHJlZml4KGV2ZW50LCB0cmFjay5wcm9wZXJ0aWVzKCkpKTtcblxuICAvLyBpdGVtc1xuICB3aW5kb3cuX2ttcS5wdXNoKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGttID0gd2luZG93LktNO1xuICAgIGVhY2gocHJvZHVjdHMsIGZ1bmN0aW9uKHByb2R1Y3QsIGkpe1xuICAgICAgdmFyIHRlbXAgPSBuZXcgVHJhY2soeyBldmVudDogZXZlbnQsIHByb3BlcnRpZXM6IHByb2R1Y3QgfSk7XG4gICAgICB2YXIgaXRlbSA9IHByZWZpeChldmVudCwgcHJvZHVjdCk7XG4gICAgICBpdGVtLl90ID0ga20udHMoKSArIGk7XG4gICAgICBpdGVtLl9kID0gMTtcbiAgICAgIGttLnNldChpdGVtKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFByZWZpeCBwcm9wZXJ0aWVzIHdpdGggdGhlIGV2ZW50IG5hbWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllc1xuICogQHJldHVybiB7T2JqZWN0fSBwcmVmaXhlZFxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcHJlZml4KGV2ZW50LCBwcm9wZXJ0aWVzKXtcbiAgdmFyIHByZWZpeGVkID0ge307XG4gIGVhY2gocHJvcGVydGllcywgZnVuY3Rpb24oa2V5LCB2YWwpe1xuICAgIGlmIChrZXkgPT09ICdCaWxsaW5nIEFtb3VudCcpIHtcbiAgICAgIHByZWZpeGVkW2tleV0gPSB2YWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZWZpeGVkW2V2ZW50ICsgJyAtICcgKyBrZXldID0gdmFsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwcmVmaXhlZDtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX2xlYXJucScpO1xudmFyIHRpY2sgPSByZXF1aXJlKCduZXh0LXRpY2snKTtcbnZhciBhbGlhcyA9IHJlcXVpcmUoJ2FsaWFzJyk7XG5cbi8qKlxuICogVHJhaXQgYWxpYXNlcy5cbiAqL1xuXG52YXIgYWxpYXNlcyA9IHtcbiAgaWQ6ICckaWQnLFxuICBlbWFpbDogJyRlbWFpbCcsXG4gIGZpcnN0TmFtZTogJyRmaXJzdF9uYW1lJyxcbiAgbGFzdE5hbWU6ICckbGFzdF9uYW1lJyxcbiAgcGhvbmU6ICckcGhvbmVfbnVtYmVyJyxcbiAgdGl0bGU6ICckdGl0bGUnXG59O1xuXG4vKipcbiAqIEV4cG9zZSBgS2xhdml5b2AgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIEtsYXZpeW8gPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdLbGF2aXlvJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19sZWFybnEnKVxuICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2Eua2xhdml5by5jb20vbWVkaWEvanMvbGVhcm5tYXJrbGV0LmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL3d3dy5rbGF2aXlvLmNvbS9kb2NzL2dldHRpbmctc3RhcnRlZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuS2xhdml5by5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHB1c2goJ2FjY291bnQnLCB0aGlzLm9wdGlvbnMuYXBpS2V5KTtcbiAgdGhpcy5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgdGljayhzZWxmLnJlYWR5KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbktsYXZpeW8ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9sZWFybnEgJiYgd2luZG93Ll9sZWFybnEucHVzaCAhPT0gQXJyYXkucHJvdG90eXBlLnB1c2gpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbktsYXZpeW8ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKGFsaWFzZXMpO1xuICBpZiAoIXRyYWl0cy4kaWQgJiYgIXRyYWl0cy4kZW1haWwpIHJldHVybjtcbiAgcHVzaCgnaWRlbnRpZnknLCB0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBHcm91cC5cbiAqXG4gKiBAcGFyYW0ge0dyb3VwfSBncm91cFxuICovXG5cbktsYXZpeW8ucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24oZ3JvdXApe1xuICB2YXIgcHJvcHMgPSBncm91cC5wcm9wZXJ0aWVzKCk7XG4gIGlmICghcHJvcHMubmFtZSkgcmV0dXJuO1xuICBwdXNoKCdpZGVudGlmeScsIHsgJG9yZ2FuaXphdGlvbjogcHJvcHMubmFtZSB9KTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5LbGF2aXlvLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgcHVzaCgndHJhY2snLCB0cmFjay5ldmVudCgpLCB0cmFjay5wcm9wZXJ0aWVzKHtcbiAgICByZXZlbnVlOiAnJHZhbHVlJ1xuICB9KSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG5cbi8qKlxuICogRXhwb3NlIGBMZWFkTGFuZGVyYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgTGVhZExhbmRlciA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ0xlYWRMYW5kZXInKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnbGxhY3RpZCcpXG4gIC5nbG9iYWwoJ3RyYWNrYWx5emVyJylcbiAgLm9wdGlvbignYWNjb3VudElkJywgbnVsbClcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCJodHRwOi8vdDYudHJhY2thbHl6ZXIuY29tL3RyYWNrYWx5emUtbm9kb2MuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuTGVhZExhbmRlci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cubGxhY3RpZCA9IHRoaXMub3B0aW9ucy5hY2NvdW50SWQ7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuTGVhZExhbmRlci5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhIHdpbmRvdy50cmFja2FseXplcjtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBjbG9uZSA9IHJlcXVpcmUoJ2Nsb25lJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcbnZhciBJZGVudGlmeSA9IHJlcXVpcmUoJ2ZhY2FkZScpLklkZW50aWZ5O1xudmFyIHdoZW4gPSByZXF1aXJlKCd3aGVuJyk7XG5cbi8qKlxuICogRXhwb3NlIGBMaXZlQ2hhdGAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIExpdmVDaGF0ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignTGl2ZUNoYXQnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX19sYycpXG4gIC5nbG9iYWwoJ19fbGNfaW5pdGVkJylcbiAgLmdsb2JhbCgnTENfQVBJJylcbiAgLmdsb2JhbCgnTENfSW52aXRlJylcbiAgLm9wdGlvbignZ3JvdXAnLCAwKVxuICAub3B0aW9uKCdsaWNlbnNlJywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9jZG4ubGl2ZWNoYXRpbmMuY29tL3RyYWNraW5nLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vd3d3LmxpdmVjaGF0aW5jLmNvbS9hcGkvamF2YXNjcmlwdC1hcGlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkxpdmVDaGF0LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG4gIHZhciBpZGVudGlmeSA9IG5ldyBJZGVudGlmeSh7XG4gICAgdXNlcklkOiB1c2VyLmlkKCksXG4gICAgdHJhaXRzOiB1c2VyLnRyYWl0cygpXG4gIH0pO1xuXG4gIHdpbmRvdy5fX2xjID0gY2xvbmUodGhpcy5vcHRpb25zKTtcbiAgd2luZG93Ll9fbGMudmlzaXRvciA9IHtcbiAgICBuYW1lOiBpZGVudGlmeS5uYW1lKCksXG4gICAgZW1haWw6IGlkZW50aWZ5LmVtYWlsKClcbiAgfTtcblxuICB0aGlzLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB3aGVuKGZ1bmN0aW9uKCl7IHJldHVybiBzZWxmLmxvYWRlZCgpOyB9LCBzZWxmLnJlYWR5KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkxpdmVDaGF0LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEod2luZG93LkxDX0FQSSAmJiB3aW5kb3cuTENfSW52aXRlKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5MaXZlQ2hhdC5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoeyB1c2VySWQ6ICdVc2VyIElEJyB9KTtcbiAgd2luZG93LkxDX0FQSS5zZXRfY3VzdG9tX3ZhcmlhYmxlcyhjb252ZXJ0KHRyYWl0cykpO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgdHJhaXRzIG9iamVjdCBpbnRvIHRoZSBmb3JtYXQgTGl2ZUNoYXQgcmVxdWlyZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRyYWl0c1xuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZnVuY3Rpb24gY29udmVydCh0cmFpdHMpe1xuICB2YXIgYXJyID0gW107XG4gIGVhY2godHJhaXRzLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgICBhcnIucHVzaCh7IG5hbWU6IGtleSwgdmFsdWU6IHZhbHVlIH0pO1xuICB9KTtcbiAgcmV0dXJuIGFycjtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIElkZW50aWZ5ID0gcmVxdWlyZSgnZmFjYWRlJykuSWRlbnRpZnk7XG52YXIgdXNlSHR0cHMgPSByZXF1aXJlKCd1c2UtaHR0cHMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYEx1Y2t5T3JhbmdlYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgTHVja3lPcmFuZ2UgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdMdWNreSBPcmFuZ2UnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2xvcScpXG4gIC5nbG9iYWwoJ19fd3R3X3dhdGNoZXJfYWRkZWQnKVxuICAuZ2xvYmFsKCdfX3d0d19sdWNreV9zaXRlX2lkJylcbiAgLmdsb2JhbCgnX193dHdfbHVja3lfaXNfc2VnbWVudF9pbycpXG4gIC5nbG9iYWwoJ19fd3R3X2N1c3RvbV91c2VyX2RhdGEnKVxuICAub3B0aW9uKCdzaXRlSWQnLCBudWxsKVxuICAudGFnKCdodHRwJywgJzxzY3JpcHQgc3JjPVwiaHR0cDovL3d3dy5sdWNreW9yYW5nZS5jb20vdy5qcz97eyBjYWNoZSB9fVwiPicpXG4gIC50YWcoJ2h0dHBzJywgJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9zc2wubHVja3lvcmFuZ2UuY29tL3cuanM/e3sgY2FjaGUgfX1cIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuTHVja3lPcmFuZ2UucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG4gIHdpbmRvdy5fbG9xIHx8ICh3aW5kb3cuX2xvcSA9IFtdKTtcbiAgd2luZG93Ll9fd3R3X2x1Y2t5X3NpdGVfaWQgPSB0aGlzLm9wdGlvbnMuc2l0ZUlkO1xuICB0aGlzLmlkZW50aWZ5KG5ldyBJZGVudGlmeSh7XG4gICAgdHJhaXRzOiB1c2VyLnRyYWl0cygpLFxuICAgIHVzZXJJZDogdXNlci5pZCgpXG4gIH0pKTtcbiAgdmFyIGNhY2hlID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDYwMDAwKTtcbiAgdmFyIG5hbWUgPSB1c2VIdHRwcygpID8gJ2h0dHBzJyA6ICdodHRwJztcbiAgdGhpcy5sb2FkKG5hbWUsIHsgY2FjaGU6IGNhY2hlIH0sIHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5MdWNreU9yYW5nZS5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhIHdpbmRvdy5fX3d0d193YXRjaGVyX2FkZGVkO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkx1Y2t5T3JhbmdlLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICB2YXIgZW1haWwgPSBpZGVudGlmeS5lbWFpbCgpO1xuICB2YXIgbmFtZSA9IGlkZW50aWZ5Lm5hbWUoKTtcbiAgaWYgKG5hbWUpIHRyYWl0cy5uYW1lID0gbmFtZTtcbiAgaWYgKGVtYWlsKSB0cmFpdHMuZW1haWwgPSBlbWFpbDtcbiAgd2luZG93Ll9fd3R3X2N1c3RvbV91c2VyX2RhdGEgPSB0cmFpdHM7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgYWxpYXMgPSByZXF1aXJlKCdhbGlhcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgTHl0aWNzYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgTHl0aWNzID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignTHl0aWNzJylcbiAgLmdsb2JhbCgnanN0YWcnKVxuICAub3B0aW9uKCdjaWQnLCAnJylcbiAgLm9wdGlvbignY29va2llJywgJ3NlZXJpZCcpXG4gIC5vcHRpb24oJ2RlbGF5JywgMjAwMClcbiAgLm9wdGlvbignc2Vzc2lvblRpbWVvdXQnLCAxODAwKVxuICAub3B0aW9uKCd1cmwnLCAnLy9jLmx5dGljcy5pbycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9jLmx5dGljcy5pby9zdGF0aWMvaW8ubWluLmpzXCI+Jyk7XG5cbi8qKlxuICogT3B0aW9ucyBhbGlhc2VzLlxuICovXG5cbnZhciBhbGlhc2VzID0ge1xuICBzZXNzaW9uVGltZW91dDogJ3Nlc3NlY3MnXG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL2FkbWluLmx5dGljcy5pby9kb2MjanN0YWdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbkx5dGljcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgb3B0aW9ucyA9IGFsaWFzKHRoaXMub3B0aW9ucywgYWxpYXNlcyk7XG4gIHdpbmRvdy5qc3RhZyA9IChmdW5jdGlvbigpe3ZhciB0ID0geyBfcTogW10sIF9jOiBvcHRpb25zLCB0czogKG5ldyBEYXRlKCkpLmdldFRpbWUoKSB9OyB0LnNlbmQgPSBmdW5jdGlvbigpe3RoaXMuX3EucHVzaChbJ3JlYWR5JywgJ3NlbmQnLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXSk7IHJldHVybiB0aGlzOyB9OyByZXR1cm4gdDsgfSkoKTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5MeXRpY3MucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93LmpzdGFnICYmIHdpbmRvdy5qc3RhZy5iaW5kKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5MeXRpY3MucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93LmpzdGFnLnNlbmQocGFnZS5wcm9wZXJ0aWVzKCkpO1xufTtcblxuLyoqXG4gKiBJZGVuZml0eS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbkx5dGljcy5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciB0cmFpdHMgPSBpZGVudGlmeS50cmFpdHMoeyB1c2VySWQ6ICdfdWlkJyB9KTtcbiAgd2luZG93LmpzdGFnLnNlbmQodHJhaXRzKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAob3B0aW9uYWwpXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAob3B0aW9uYWwpXG4gKi9cblxuTHl0aWNzLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICBwcm9wcy5fZSA9IHRyYWNrLmV2ZW50KCk7XG4gIHdpbmRvdy5qc3RhZy5zZW5kKHByb3BzKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgYWxpYXMgPSByZXF1aXJlKCdhbGlhcycpO1xudmFyIGNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcbnZhciBkYXRlcyA9IHJlcXVpcmUoJ2NvbnZlcnQtZGF0ZXMnKTtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcbnZhciBpc28gPSByZXF1aXJlKCd0by1pc28tc3RyaW5nJyk7XG52YXIgaW5kZXhvZiA9IHJlcXVpcmUoJ2luZGV4b2YnKTtcbnZhciBkZWwgPSByZXF1aXJlKCdvYmotY2FzZScpLmRlbDtcbnZhciBzb21lID0gcmVxdWlyZSgnc29tZScpO1xuXG4vKipcbiAqIEV4cG9zZSBgTWl4cGFuZWxgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBNaXhwYW5lbCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ01peHBhbmVsJylcbiAgLmdsb2JhbCgnbWl4cGFuZWwnKVxuICAub3B0aW9uKCdpbmNyZW1lbnRzJywgW10pXG4gIC5vcHRpb24oJ2Nvb2tpZU5hbWUnLCAnJylcbiAgLm9wdGlvbignbmFtZVRhZycsIHRydWUpXG4gIC5vcHRpb24oJ3BhZ2V2aWV3JywgZmFsc2UpXG4gIC5vcHRpb24oJ3Blb3BsZScsIGZhbHNlKVxuICAub3B0aW9uKCd0b2tlbicsICcnKVxuICAub3B0aW9uKCd0cmFja0FsbFBhZ2VzJywgZmFsc2UpXG4gIC5vcHRpb24oJ3RyYWNrTmFtZWRQYWdlcycsIHRydWUpXG4gIC5vcHRpb24oJ3RyYWNrQ2F0ZWdvcml6ZWRQYWdlcycsIHRydWUpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9jZG4ubXhwbmwuY29tL2xpYnMvbWl4cGFuZWwtMi4yLm1pbi5qc1wiPicpO1xuXG4vKipcbiAqIE9wdGlvbnMgYWxpYXNlcy5cbiAqL1xuXG52YXIgb3B0aW9uc0FsaWFzZXMgPSB7XG4gIGNvb2tpZU5hbWU6ICdjb29raWVfbmFtZSdcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL21peHBhbmVsLmNvbS9oZWxwL3JlZmVyZW5jZS9qYXZhc2NyaXB0I2luc3RhbGxpbmdcbiAqIGh0dHBzOi8vbWl4cGFuZWwuY29tL2hlbHAvcmVmZXJlbmNlL2phdmFzY3JpcHQtZnVsbC1hcGktcmVmZXJlbmNlI21peHBhbmVsLmluaXRcbiAqL1xuXG5NaXhwYW5lbC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIChmdW5jdGlvbihjLCBhKXt3aW5kb3cubWl4cGFuZWwgPSBhOyB2YXIgYiwgZCwgaCwgZTsgYS5faSA9IFtdOyBhLmluaXQgPSBmdW5jdGlvbihiLCBjLCBmKXtmdW5jdGlvbiBkKGEsIGIpe3ZhciBjID0gYi5zcGxpdCgnLicpOyAyID09IGMubGVuZ3RoICYmIChhID0gYVtjWzBdXSwgYiA9IGNbMV0pOyBhW2JdID0gZnVuY3Rpb24oKXthLnB1c2goW2JdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKSk7IH07IH0gdmFyIGcgPSBhOyAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGYgPyBnID0gYVtmXSA9IFtdIDogZiA9ICdtaXhwYW5lbCc7IGcucGVvcGxlID0gZy5wZW9wbGUgfHwgW107IGggPSBbJ2Rpc2FibGUnLCAndHJhY2snLCAndHJhY2tfcGFnZXZpZXcnLCAndHJhY2tfbGlua3MnLCAndHJhY2tfZm9ybXMnLCAncmVnaXN0ZXInLCAncmVnaXN0ZXJfb25jZScsICd1bnJlZ2lzdGVyJywgJ2lkZW50aWZ5JywgJ2FsaWFzJywgJ25hbWVfdGFnJywgJ3NldF9jb25maWcnLCAncGVvcGxlLnNldCcsICdwZW9wbGUuaW5jcmVtZW50JywgJ3Blb3BsZS50cmFja19jaGFyZ2UnLCAncGVvcGxlLmFwcGVuZCddOyBmb3IgKGUgPSAwOyBlIDwgaC5sZW5ndGg7IGUrKykgZChnLCBoW2VdKTsgYS5faS5wdXNoKFtiLCBjLCBmXSk7IH07IGEuX19TViA9IDEuMjsgfSkoZG9jdW1lbnQsIHdpbmRvdy5taXhwYW5lbCB8fCBbXSk7XG4gIHRoaXMub3B0aW9ucy5pbmNyZW1lbnRzID0gbG93ZXJjYXNlKHRoaXMub3B0aW9ucy5pbmNyZW1lbnRzKTtcbiAgdmFyIG9wdGlvbnMgPSBhbGlhcyh0aGlzLm9wdGlvbnMsIG9wdGlvbnNBbGlhc2VzKTtcbiAgd2luZG93Lm1peHBhbmVsLmluaXQob3B0aW9ucy50b2tlbiwgb3B0aW9ucyk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuTWl4cGFuZWwucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Lm1peHBhbmVsICYmIHdpbmRvdy5taXhwYW5lbC5jb25maWcpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHBzOi8vbWl4cGFuZWwuY29tL2hlbHAvcmVmZXJlbmNlL2phdmFzY3JpcHQtZnVsbC1hcGktcmVmZXJlbmNlI21peHBhbmVsLnRyYWNrX3BhZ2V2aWV3XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNhdGVnb3J5IChvcHRpb25hbClcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIChvcHRpb25hbClcbiAqL1xuXG5NaXhwYW5lbC5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgY2F0ZWdvcnkgPSBwYWdlLmNhdGVnb3J5KCk7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcblxuICAvLyBhbGwgcGFnZXNcbiAgaWYgKG9wdHMudHJhY2tBbGxQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjaygpKTtcbiAgfVxuXG4gIC8vIGNhdGVnb3JpemVkIHBhZ2VzXG4gIGlmIChjYXRlZ29yeSAmJiBvcHRzLnRyYWNrQ2F0ZWdvcml6ZWRQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjayhjYXRlZ29yeSkpO1xuICB9XG5cbiAgLy8gbmFtZWQgcGFnZXNcbiAgaWYgKG5hbWUgJiYgb3B0cy50cmFja05hbWVkUGFnZXMpIHtcbiAgICB0aGlzLnRyYWNrKHBhZ2UudHJhY2sobmFtZSkpO1xuICB9XG59O1xuXG4vKipcbiAqIFRyYWl0IGFsaWFzZXMuXG4gKi9cblxudmFyIHRyYWl0QWxpYXNlcyA9IHtcbiAgY3JlYXRlZDogJyRjcmVhdGVkJyxcbiAgZW1haWw6ICckZW1haWwnLFxuICBmaXJzdE5hbWU6ICckZmlyc3RfbmFtZScsXG4gIGxhc3ROYW1lOiAnJGxhc3RfbmFtZScsXG4gIGxhc3RTZWVuOiAnJGxhc3Rfc2VlbicsXG4gIG5hbWU6ICckbmFtZScsXG4gIHVzZXJuYW1lOiAnJHVzZXJuYW1lJyxcbiAgcGhvbmU6ICckcGhvbmUnXG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIGh0dHBzOi8vbWl4cGFuZWwuY29tL2hlbHAvcmVmZXJlbmNlL2phdmFzY3JpcHQjc3VwZXItcHJvcGVydGllc1xuICogaHR0cHM6Ly9taXhwYW5lbC5jb20vaGVscC9yZWZlcmVuY2UvamF2YXNjcmlwdCN1c2VyLWlkZW50aXR5XG4gKiBodHRwczovL21peHBhbmVsLmNvbS9oZWxwL3JlZmVyZW5jZS9qYXZhc2NyaXB0I3N0b3JpbmctdXNlci1wcm9maWxlc1xuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuTWl4cGFuZWwucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgdXNlcm5hbWUgPSBpZGVudGlmeS51c2VybmFtZSgpO1xuICB2YXIgZW1haWwgPSBpZGVudGlmeS5lbWFpbCgpO1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcblxuICAvLyBpZFxuICBpZiAoaWQpIHdpbmRvdy5taXhwYW5lbC5pZGVudGlmeShpZCk7XG5cbiAgLy8gbmFtZSB0YWdcbiAgdmFyIG5hbWV0YWcgPSBlbWFpbCB8fCB1c2VybmFtZSB8fCBpZDtcbiAgaWYgKG5hbWV0YWcpIHdpbmRvdy5taXhwYW5lbC5uYW1lX3RhZyhuYW1ldGFnKTtcblxuICAvLyB0cmFpdHNcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cyh0cmFpdEFsaWFzZXMpO1xuICBpZiAodHJhaXRzLiRjcmVhdGVkKSBkZWwodHJhaXRzLCAnY3JlYXRlZEF0Jyk7XG4gIHdpbmRvdy5taXhwYW5lbC5yZWdpc3RlcihkYXRlcyh0cmFpdHMsIGlzbykpO1xuICBpZiAodGhpcy5vcHRpb25zLnBlb3BsZSkgd2luZG93Lm1peHBhbmVsLnBlb3BsZS5zZXQodHJhaXRzKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cHM6Ly9taXhwYW5lbC5jb20vaGVscC9yZWZlcmVuY2UvamF2YXNjcmlwdCNzZW5kaW5nLWV2ZW50c1xuICogaHR0cHM6Ly9taXhwYW5lbC5jb20vaGVscC9yZWZlcmVuY2UvamF2YXNjcmlwdCN0cmFja2luZy1yZXZlbnVlXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5NaXhwYW5lbC5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBpbmNyZW1lbnRzID0gdGhpcy5vcHRpb25zLmluY3JlbWVudHM7XG4gIHZhciBpbmNyZW1lbnQgPSB0cmFjay5ldmVudCgpLnRvTG93ZXJDYXNlKCk7XG4gIHZhciBwZW9wbGUgPSB0aGlzLm9wdGlvbnMucGVvcGxlO1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHZhciByZXZlbnVlID0gdHJhY2sucmV2ZW51ZSgpO1xuXG4gIC8vIGRlbGV0ZSBtaXhwYW5lbCdzIHJlc2VydmVkIHByb3BlcnRpZXMsIHNvIHRoZXkgZG9uJ3QgY29uZmxpY3RcbiAgZGVsZXRlIHByb3BzLmRpc3RpbmN0X2lkO1xuICBkZWxldGUgcHJvcHMuaXA7XG4gIGRlbGV0ZSBwcm9wcy5tcF9uYW1lX3RhZztcbiAgZGVsZXRlIHByb3BzLm1wX25vdGU7XG4gIGRlbGV0ZSBwcm9wcy50b2tlbjtcblxuICAvLyBjb252ZXJ0IGFycmF5cyBvZiBvYmplY3RzIHRvIGxlbmd0aCwgc2luY2UgbWl4cGFuZWwgZG9lc24ndCBzdXBwb3J0IG9iamVjdCBhcnJheXNcbiAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7XG4gICAgdmFyIHZhbCA9IHByb3BzW2tleV07XG4gICAgaWYgKGlzLmFycmF5KHZhbCkgJiYgc29tZSh2YWwsIGlzLm9iamVjdCkpIHByb3BzW2tleV0gPSB2YWwubGVuZ3RoO1xuICB9XG5cbiAgLy8gaW5jcmVtZW50IHByb3BlcnRpZXMgaW4gbWl4cGFuZWwgcGVvcGxlXG4gIGlmIChwZW9wbGUgJiYgfmluZGV4b2YoaW5jcmVtZW50cywgaW5jcmVtZW50KSkge1xuICAgIHdpbmRvdy5taXhwYW5lbC5wZW9wbGUuaW5jcmVtZW50KHRyYWNrLmV2ZW50KCkpO1xuICAgIHdpbmRvdy5taXhwYW5lbC5wZW9wbGUuc2V0KCdMYXN0ICcgKyB0cmFjay5ldmVudCgpLCBuZXcgRGF0ZSk7XG4gIH1cblxuICAvLyB0cmFjayB0aGUgZXZlbnRcbiAgcHJvcHMgPSBkYXRlcyhwcm9wcywgaXNvKTtcbiAgd2luZG93Lm1peHBhbmVsLnRyYWNrKHRyYWNrLmV2ZW50KCksIHByb3BzKTtcblxuICAvLyB0cmFjayByZXZlbnVlIHNwZWNpZmljYWxseVxuICBpZiAocmV2ZW51ZSAmJiBwZW9wbGUpIHtcbiAgICB3aW5kb3cubWl4cGFuZWwucGVvcGxlLnRyYWNrX2NoYXJnZShyZXZlbnVlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBBbGlhcy5cbiAqXG4gKiBodHRwczovL21peHBhbmVsLmNvbS9oZWxwL3JlZmVyZW5jZS9qYXZhc2NyaXB0I3VzZXItaWRlbnRpdHlcbiAqIGh0dHBzOi8vbWl4cGFuZWwuY29tL2hlbHAvcmVmZXJlbmNlL2phdmFzY3JpcHQtZnVsbC1hcGktcmVmZXJlbmNlI21peHBhbmVsLmFsaWFzXG4gKlxuICogQHBhcmFtIHtBbGlhc30gYWxpYXNcbiAqL1xuXG5NaXhwYW5lbC5wcm90b3R5cGUuYWxpYXMgPSBmdW5jdGlvbihhbGlhcyl7XG4gIHZhciBtcCA9IHdpbmRvdy5taXhwYW5lbDtcbiAgdmFyIHRvID0gYWxpYXMudG8oKTtcbiAgaWYgKG1wLmdldF9kaXN0aW5jdF9pZCAmJiBtcC5nZXRfZGlzdGluY3RfaWQoKSA9PT0gdG8pIHJldHVybjtcbiAgLy8gSEFDSzogaW50ZXJuYWwgbWl4cGFuZWwgQVBJIHRvIGVuc3VyZSB3ZSBkb24ndCBvdmVyd3JpdGVcbiAgaWYgKG1wLmdldF9wcm9wZXJ0eSAmJiBtcC5nZXRfcHJvcGVydHkoJyRwZW9wbGVfZGlzdGluY3RfaWQnKSA9PT0gdG8pIHJldHVybjtcbiAgLy8gYWx0aG91Z2ggdW5kb2N1bWVudGVkLCBtaXhwYW5lbCB0YWtlcyBhbiBvcHRpb25hbCBvcmlnaW5hbCBpZFxuICBtcC5hbGlhcyh0bywgYWxpYXMuZnJvbSgpKTtcbn07XG5cbi8qKlxuICogTG93ZXJjYXNlIHRoZSBnaXZlbiBgYXJyYC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG93ZXJjYXNlKGFycil7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcbiAgICByZXRbaV0gPSBTdHJpbmcoYXJyW2ldKS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGJpbmQgPSByZXF1aXJlKCdiaW5kJyk7XG52YXIgd2hlbiA9IHJlcXVpcmUoJ3doZW4nKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBNb2puYFxuICovXG5cbnZhciBNb2puID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignTW9qbicpXG4gIC5vcHRpb24oJ2N1c3RvbWVyQ29kZScsICcnKVxuICAuZ2xvYmFsKCdfbW9qblRyYWNrJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCJodHRwczovL3RyYWNrLmlkdGFyZ2V0aW5nLmNvbS97eyBjdXN0b21lckNvZGUgfX0vdHJhY2suanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuTW9qbi5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIHdpbmRvdy5fbW9qblRyYWNrID0gd2luZG93Ll9tb2puVHJhY2sgfHwgW107XG4gIHdpbmRvdy5fbW9qblRyYWNrLnB1c2goeyBjaWQ6IHRoaXMub3B0aW9ucy5jdXN0b21lckNvZGUgfSk7XG4gIHZhciBsb2FkZWQgPSBiaW5kKHRoaXMsIHRoaXMubG9hZGVkKTtcbiAgdmFyIHJlYWR5ID0gdGhpcy5yZWFkeTtcbiAgdGhpcy5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgd2hlbihsb2FkZWQsIHJlYWR5KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbk1vam4ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpcy5vYmplY3Qod2luZG93Ll9tb2puVHJhY2spO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbk1vam4ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgZW1haWwgPSBpZGVudGlmeS5lbWFpbCgpO1xuICBpZiAoIWVtYWlsKSByZXR1cm47XG4gIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgaW1nLnNyYyA9ICcvL21hdGNoZXIuaWR0YXJnZXRpbmcuY29tL2FuYWx5dGljcy5naWY/Y2lkPScgKyB0aGlzLm9wdGlvbnMuY3VzdG9tZXJDb2RlICsgJyZfbWpuY3RpZD0nK2VtYWlsO1xuICBpbWcud2lkdGggPSAxO1xuICBpbWcuaGVpZ2h0ID0gMTtcbiAgcmV0dXJuIGltZztcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogQHBhcmFtIHtUcmFja30gZXZlbnRcbiAqL1xuXG5Nb2puLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb3BlcnRpZXMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIHZhciByZXZlbnVlID0gcHJvcGVydGllcy5yZXZlbnVlO1xuICB2YXIgY3VycmVuY3kgPSBwcm9wZXJ0aWVzLmN1cnJlbmN5IHx8ICcnO1xuICB2YXIgY29udiA9IGN1cnJlbmN5ICsgcmV2ZW51ZTtcbiAgaWYgKCFyZXZlbnVlKSByZXR1cm47XG4gIHdpbmRvdy5fbW9qblRyYWNrLnB1c2goeyBjb252OiBjb252IH0pO1xuICByZXR1cm4gY29udjtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfbWZxJyk7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xuXG4vKipcbiAqIEV4cG9zZSBgTW91c2VmbG93YC5cbiAqL1xuXG52YXIgTW91c2VmbG93ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignTW91c2VmbG93JylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ21vdXNlZmxvdycpXG4gIC5nbG9iYWwoJ19tZnEnKVxuICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgLm9wdGlvbignbW91c2VmbG93SHRtbERlbGF5JywgMClcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2Nkbi5tb3VzZWZsb3cuY29tL3Byb2plY3RzL3t7IGFwaUtleSB9fS5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbk1vdXNlZmxvdy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cubW91c2VmbG93SHRtbERlbGF5ID0gdGhpcy5vcHRpb25zLm1vdXNlZmxvd0h0bWxEZWxheTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5Nb3VzZWZsb3cucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISB3aW5kb3cubW91c2VmbG93O1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIGh0dHA6Ly9tb3VzZWZsb3cuemVuZGVzay5jb20vZW50cmllcy8yMjUyODgxNy1TaW5nbGUtcGFnZS13ZWJzaXRlc1xuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbk1vdXNlZmxvdy5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICBpZiAoIXdpbmRvdy5tb3VzZWZsb3cpIHJldHVybjtcbiAgaWYgKCdmdW5jdGlvbicgIT0gdHlwZW9mIG1vdXNlZmxvdy5uZXdQYWdlVmlldykgcmV0dXJuO1xuICBtb3VzZWZsb3cubmV3UGFnZVZpZXcoKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogaHR0cDovL21vdXNlZmxvdy56ZW5kZXNrLmNvbS9lbnRyaWVzLzI0NjQzNjAzLUN1c3RvbS1WYXJpYWJsZXMtVGFnZ2luZ1xuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuTW91c2VmbG93LnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgc2V0KGlkZW50aWZ5LnRyYWl0cygpKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cDovL21vdXNlZmxvdy56ZW5kZXNrLmNvbS9lbnRyaWVzLzI0NjQzNjAzLUN1c3RvbS1WYXJpYWJsZXMtVGFnZ2luZ1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuTW91c2VmbG93LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICBwcm9wcy5ldmVudCA9IHRyYWNrLmV2ZW50KCk7XG4gIHNldChwcm9wcyk7XG59O1xuXG4vKipcbiAqIFB1c2ggZWFjaCBrZXkgYW5kIHZhbHVlIGluIHRoZSBnaXZlbiBgb2JqYCBvbnRvIHRoZSBxdWV1ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKi9cblxuZnVuY3Rpb24gc2V0KG9iail7XG4gIGVhY2gob2JqLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgICBwdXNoKCdzZXRWYXJpYWJsZScsIGtleSwgdmFsdWUpO1xuICB9KTtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHVzZUh0dHBzID0gcmVxdWlyZSgndXNlLWh0dHBzJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBNb3VzZVN0YXRzYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgTW91c2VTdGF0cyA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ01vdXNlU3RhdHMnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnbXNhYScpXG4gIC5nbG9iYWwoJ01vdXNlU3RhdHNWaXNpdG9yUGxheWJhY2tzJylcbiAgLm9wdGlvbignYWNjb3VudE51bWJlcicsICcnKVxuICAudGFnKCdodHRwJywgJzxzY3JpcHQgc3JjPVwiaHR0cDovL3d3dzIubW91c2VzdGF0cy5jb20vanMve3sgcGF0aCB9fS5qcz97eyBjYWNoZSB9fVwiPicpXG4gIC50YWcoJ2h0dHBzJywgJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9zc2wubW91c2VzdGF0cy5jb20vanMve3sgcGF0aCB9fS5qcz97eyBjYWNoZSB9fVwiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cDovL3d3dy5tb3VzZXN0YXRzLmNvbS9kb2NzL3BhZ2VzL2FsbHBhZ2VzXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5Nb3VzZVN0YXRzLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBudW1iZXIgPSB0aGlzLm9wdGlvbnMuYWNjb3VudE51bWJlcjtcbiAgdmFyIHBhdGggPSBudW1iZXIuc2xpY2UoMCwxKSArICcvJyArIG51bWJlci5zbGljZSgxLDIpICsgJy8nICsgbnVtYmVyO1xuICB2YXIgY2FjaGUgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gNjAwMDApO1xuICB2YXIgbmFtZSA9IHVzZUh0dHBzKCkgPyAnaHR0cHMnIDogJ2h0dHAnO1xuICB0aGlzLmxvYWQobmFtZSwgeyBwYXRoOiBwYXRoLCBjYWNoZTogY2FjaGUgfSwgdGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbk1vdXNlU3RhdHMucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpcy5hcnJheSh3aW5kb3cuTW91c2VTdGF0c1Zpc2l0b3JQbGF5YmFja3MpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBodHRwOi8vd3d3Lm1vdXNlc3RhdHMuY29tL2RvY3Mvd2lraS83L2hvdy10by1hZGQtY3VzdG9tLWRhdGEtdG8tdmlzaXRvci1wbGF5YmFja3NcbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cbk1vdXNlU3RhdHMucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICBlYWNoKGlkZW50aWZ5LnRyYWl0cygpLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIHdpbmRvdy5Nb3VzZVN0YXRzVmlzaXRvclBsYXliYWNrcy5jdXN0b21WYXJpYWJsZShrZXksIHZhbHVlKTtcbiAgfSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfX25scycpO1xuXG4vKipcbiAqIEV4cG9zZSBgTmF2aWx5dGljc2AgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIE5hdmlseXRpY3MgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdOYXZpbHl0aWNzJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19fbmxzJylcbiAgLm9wdGlvbignbWVtYmVySWQnLCAnJylcbiAgLm9wdGlvbigncHJvamVjdElkJywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy93d3cubmF2aWx5dGljcy5jb20vbmxzLmpzP21pZD17eyBtZW1iZXJJZCB9fSZwaWQ9e3sgcHJvamVjdElkIH19XCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwczovL3d3dy5uYXZpbHl0aWNzLmNvbS9tZW1iZXIvY29kZV9zZXR0aW5nc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuTmF2aWx5dGljcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB3aW5kb3cuX19ubHMgPSB3aW5kb3cuX19ubHMgfHwgW107XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuTmF2aWx5dGljcy5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX19ubHMgJiYgW10ucHVzaCAhPSB3aW5kb3cuX19ubHMucHVzaCk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIGh0dHBzOi8vd3d3Lm5hdmlseXRpY3MuY29tL2RvY3MjdGFnc1xuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuTmF2aWx5dGljcy5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHB1c2goJ3RhZ1JlY29yZGluZycsIHRyYWNrLmV2ZW50KCkpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGh0dHBzID0gcmVxdWlyZSgndXNlLWh0dHBzJyk7XG52YXIgdGljayA9IHJlcXVpcmUoJ25leHQtdGljaycpO1xuXG4vKipcbiAqIEV4cG9zZSBgT2xhcmtgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBPbGFyayA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ09sYXJrJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ29sYXJrJylcbiAgLm9wdGlvbignaWRlbnRpZnknLCB0cnVlKVxuICAub3B0aW9uKCdwYWdlJywgdHJ1ZSlcbiAgLm9wdGlvbignc2l0ZUlkJywgJycpXG4gIC5vcHRpb24oJ2dyb3VwSWQnLCAnJylcbiAgLm9wdGlvbigndHJhY2snLCBmYWxzZSk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vd3d3Lm9sYXJrLmNvbS9kb2N1bWVudGF0aW9uXG4gKiBodHRwczovL3d3dy5vbGFyay5jb20vZG9jdW1lbnRhdGlvbi9qYXZhc2NyaXB0L2FwaS5jaGF0LnNldE9wZXJhdG9yR3JvdXBcbiAqXG4gKiBAcGFyYW0ge0ZhY2FkZX0gcGFnZVxuICovXG5cbk9sYXJrLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgdGljayhzZWxmLnJlYWR5KTtcbiAgfSk7XG5cbiAgLy8gYXNzaWduIGNoYXQgdG8gYSBzcGVjaWZpYyBzaXRlXG4gIHZhciBncm91cElkID0gdGhpcy5vcHRpb25zLmdyb3VwSWQ7XG4gIGlmIChncm91cElkKSBhcGkoJ2NoYXQuc2V0T3BlcmF0b3JHcm91cCcsIHsgZ3JvdXA6IGdyb3VwSWQgfSk7XG5cbiAgLy8ga2VlcCB0cmFjayBvZiB0aGUgd2lkZ2V0J3Mgb3BlbiBzdGF0ZVxuICBhcGkoJ2JveC5vbkV4cGFuZCcsIGZ1bmN0aW9uKCl7IHNlbGYuX29wZW4gPSB0cnVlOyB9KTtcbiAgYXBpKCdib3gub25TaHJpbmsnLCBmdW5jdGlvbigpeyBzZWxmLl9vcGVuID0gZmFsc2U7IH0pO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5PbGFyay5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhIHdpbmRvdy5vbGFyaztcbn07XG5cbi8qKlxuICogTG9hZC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICovXG5cbk9sYXJrLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24oY2FsbGJhY2spe1xuICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2xhcmsnKTtcbiAgd2luZG93Lm9sYXJrfHwoZnVuY3Rpb24oYyl7dmFyIGY9d2luZG93LGQ9ZG9jdW1lbnQsbD1odHRwcygpP1wiaHR0cHM6XCI6XCJodHRwOlwiLHo9Yy5uYW1lLHI9XCJsb2FkXCI7dmFyIG50PWZ1bmN0aW9uKCl7Zlt6XT1mdW5jdGlvbigpeyhhLnM9YS5zfHxbXSkucHVzaChhcmd1bWVudHMpfTt2YXIgYT1mW3pdLl89e30scT1jLm1ldGhvZHMubGVuZ3RoO3doaWxlIChxLS0pIHsoZnVuY3Rpb24obil7Zlt6XVtuXT1mdW5jdGlvbigpe2Zbel0oXCJjYWxsXCIsbixhcmd1bWVudHMpfX0pKGMubWV0aG9kc1txXSl9YS5sPWMubG9hZGVyO2EuaT1udDthLnA9eyAwOituZXcgRGF0ZSgpIH07YS5QPWZ1bmN0aW9uKHUpe2EucFt1XT1uZXcgRGF0ZSgpLWEucFswXX07ZnVuY3Rpb24gcygpe2EuUChyKTtmW3pdKHIpfWYuYWRkRXZlbnRMaXN0ZW5lcj9mLmFkZEV2ZW50TGlzdGVuZXIocixzLGZhbHNlKTpmLmF0dGFjaEV2ZW50KFwib25cIityLHMpO3ZhciBsZD1mdW5jdGlvbigpe2Z1bmN0aW9uIHAoaGQpe2hkPVwiaGVhZFwiO3JldHVybiBbXCI8XCIsaGQsXCI+PC9cIixoZCxcIj48XCIsaSwnIG9ubCcgKyAnb2FkPVwidmFyIGQ9JyxnLFwiO2QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5cIixqLFwiKGQuXCIsaCxcIignc2NyaXB0JykpLlwiLGssXCI9J1wiLGwsXCIvL1wiLGEubCxcIidcIiwnXCInLFwiPjwvXCIsaSxcIj5cIl0uam9pbihcIlwiKX12YXIgaT1cImJvZHlcIixtPWRbaV07aWYgKCFtKSB7cmV0dXJuIHNldFRpbWVvdXQobGQsMTAwKX1hLlAoMSk7dmFyIGo9XCJhcHBlbmRDaGlsZFwiLGg9XCJjcmVhdGVFbGVtZW50XCIsaz1cInNyY1wiLG49ZFtoXShcImRpdlwiKSx2PW5bal0oZFtoXSh6KSksYj1kW2hdKFwiaWZyYW1lXCIpLGc9XCJkb2N1bWVudFwiLGU9XCJkb21haW5cIixvO24uc3R5bGUuZGlzcGxheT1cIm5vbmVcIjttLmluc2VydEJlZm9yZShuLG0uZmlyc3RDaGlsZCkuaWQ9ejtiLmZyYW1lQm9yZGVyPVwiMFwiO2IuaWQ9eitcIi1sb2FkZXJcIjtpZiAoL01TSUVbIF0rNi8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge2Iuc3JjPVwiamF2YXNjcmlwdDpmYWxzZVwifWIuYWxsb3dUcmFuc3BhcmVuY3k9XCJ0cnVlXCI7dltqXShiKTt0cnkge2IuY29udGVudFdpbmRvd1tnXS5vcGVuKCl9Y2F0Y2ggKHcpIHtjW2VdPWRbZV07bz1cImphdmFzY3JpcHQ6dmFyIGQ9XCIrZytcIi5vcGVuKCk7ZC5kb21haW49J1wiK2QuZG9tYWluK1wiJztcIjtiW2tdPW8rXCJ2b2lkKDApO1wifXRyeSB7dmFyIHQ9Yi5jb250ZW50V2luZG93W2ddO3Qud3JpdGUocCgpKTt0LmNsb3NlKCl9Y2F0Y2ggKHgpIHtiW2tdPW8rJ2Qud3JpdGUoXCInK3AoKS5yZXBsYWNlKC9cIi9nLFN0cmluZy5mcm9tQ2hhckNvZGUoOTIpKydcIicpKydcIik7ZC5jbG9zZSgpOyd9YS5QKDIpfTtsZCgpfTtudCgpfSkoeyBsb2FkZXI6IFwic3RhdGljLm9sYXJrLmNvbS9qc2NsaWVudC9sb2FkZXIwLmpzXCIsIG5hbWU6XCJvbGFya1wiLCBtZXRob2RzOltcImNvbmZpZ3VyZVwiLFwiZXh0ZW5kXCIsXCJkZWNsYXJlXCIsXCJpZGVudGlmeVwiXSB9KTtcbiAgd2luZG93Lm9sYXJrLmlkZW50aWZ5KHRoaXMub3B0aW9ucy5zaXRlSWQpO1xuICBjYWxsYmFjaygpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIEBwYXJhbSB7RmFjYWRlfSBwYWdlXG4gKi9cblxuT2xhcmsucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgaWYgKCF0aGlzLm9wdGlvbnMucGFnZSkgcmV0dXJuO1xuICB2YXIgcHJvcHMgPSBwYWdlLnByb3BlcnRpZXMoKTtcbiAgdmFyIG5hbWUgPSBwYWdlLmZ1bGxOYW1lKCk7XG4gIGlmICghbmFtZSAmJiAhcHJvcHMudXJsKSByZXR1cm47XG5cbiAgbmFtZSA9IG5hbWUgPyBuYW1lICsgJyBwYWdlJyA6IHByb3BzLnVybDtcbiAgdGhpcy5ub3RpZnkoJ2xvb2tpbmcgYXQgJyArIG5hbWUpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0ZhY2FkZX0gaWRlbnRpZnlcbiAqL1xuXG5PbGFyay5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIGlmICghdGhpcy5vcHRpb25zLmlkZW50aWZ5KSByZXR1cm47XG5cbiAgdmFyIHVzZXJuYW1lID0gaWRlbnRpZnkudXNlcm5hbWUoKTtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgdmFyIGVtYWlsID0gaWRlbnRpZnkuZW1haWwoKTtcbiAgdmFyIHBob25lID0gaWRlbnRpZnkucGhvbmUoKTtcbiAgdmFyIG5hbWUgPSBpZGVudGlmeS5uYW1lKCkgfHwgaWRlbnRpZnkuZmlyc3ROYW1lKCk7XG5cbiAgaWYgKHRyYWl0cykgYXBpKCd2aXNpdG9yLnVwZGF0ZUN1c3RvbUZpZWxkcycsIHRyYWl0cyk7XG4gIGlmIChlbWFpbCkgYXBpKCd2aXNpdG9yLnVwZGF0ZUVtYWlsQWRkcmVzcycsIHsgZW1haWxBZGRyZXNzOiBlbWFpbCB9KTtcbiAgaWYgKHBob25lKSBhcGkoJ3Zpc2l0b3IudXBkYXRlUGhvbmVOdW1iZXInLCB7IHBob25lTnVtYmVyOiBwaG9uZSB9KTtcbiAgaWYgKG5hbWUpIGFwaSgndmlzaXRvci51cGRhdGVGdWxsTmFtZScsIHsgZnVsbE5hbWU6IG5hbWUgfSk7XG5cbiAgLy8gZmlndXJlIG91dCBiZXN0IG5pY2tuYW1lXG4gIHZhciBuaWNrbmFtZSA9IG5hbWUgfHwgZW1haWwgfHwgdXNlcm5hbWUgfHwgaWQ7XG4gIGlmIChuYW1lICYmIGVtYWlsKSBuaWNrbmFtZSArPSAnICgnICsgZW1haWwgKyAnKSc7XG4gIGlmIChuaWNrbmFtZSkgYXBpKCdjaGF0LnVwZGF0ZVZpc2l0b3JOaWNrbmFtZScsIHsgc25pcHBldDogbmlja25hbWUgfSk7XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7RmFjYWRlfSB0cmFja1xuICovXG5cbk9sYXJrLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgaWYgKCF0aGlzLm9wdGlvbnMudHJhY2spIHJldHVybjtcbiAgdGhpcy5ub3RpZnkoJ3Zpc2l0b3IgdHJpZ2dlcmVkIFwiJyArIHRyYWNrLmV2ZW50KCkgKyAnXCInKTtcbn07XG5cbi8qKlxuICogU2VuZCBhIG5vdGlmaWNhdGlvbiBgbWVzc2FnZWAgdG8gdGhlIG9wZXJhdG9yLCBvbmx5IHdoZW4gYSBjaGF0IGlzIGFjdGl2ZSBhbmRcbiAqIHdoZW4gdGhlIGNoYXQgaXMgb3Blbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICovXG5cbk9sYXJrLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbihtZXNzYWdlKXtcbiAgaWYgKCF0aGlzLl9vcGVuKSByZXR1cm47XG5cbiAgLy8gbG93ZXJjYXNlIHNpbmNlIG9sYXJrIGRvZXNcbiAgbWVzc2FnZSA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcblxuICBhcGkoJ3Zpc2l0b3IuZ2V0RGV0YWlscycsIGZ1bmN0aW9uKGRhdGEpe1xuICAgIGlmICghZGF0YSB8fCAhZGF0YS5pc0NvbnZlcnNpbmcpIHJldHVybjtcbiAgICBhcGkoJ2NoYXQuc2VuZE5vdGlmaWNhdGlvblRvT3BlcmF0b3InLCB7IGJvZHk6IG1lc3NhZ2UgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBIZWxwZXIgZm9yIE9sYXJrIEFQSSBjYWxscy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsdWVcbiAqL1xuXG5mdW5jdGlvbiBhcGkoYWN0aW9uLCB2YWx1ZSkge1xuICB3aW5kb3cub2xhcmsoJ2FwaS4nICsgYWN0aW9uLCB2YWx1ZSk7XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ29wdGltaXplbHknKTtcbnZhciBjYWxsYmFjayA9IHJlcXVpcmUoJ2NhbGxiYWNrJyk7XG52YXIgdGljayA9IHJlcXVpcmUoJ25leHQtdGljaycpO1xudmFyIGJpbmQgPSByZXF1aXJlKCdiaW5kJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcblxuLyoqXG4gKiBFeHBvc2UgYE9wdGltaXplbHlgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBPcHRpbWl6ZWx5ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignT3B0aW1pemVseScpXG4gIC5vcHRpb24oJ3ZhcmlhdGlvbnMnLCB0cnVlKVxuICAub3B0aW9uKCd0cmFja05hbWVkUGFnZXMnLCB0cnVlKVxuICAub3B0aW9uKCd0cmFja0NhdGVnb3JpemVkUGFnZXMnLCB0cnVlKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vd3d3Lm9wdGltaXplbHkuY29tL2RvY3MvYXBpI2Z1bmN0aW9uLWNhbGxzXG4gKi9cblxuT3B0aW1pemVseS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIGlmICh0aGlzLm9wdGlvbnMudmFyaWF0aW9ucykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aWNrKGZ1bmN0aW9uKCl7XG4gICAgICBzZWxmLnJlcGxheSgpO1xuICAgIH0pO1xuICB9XG4gIHRoaXMucmVhZHkoKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cHM6Ly93d3cub3B0aW1pemVseS5jb20vZG9jcy9hcGkjdHJhY2stZXZlbnRcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbk9wdGltaXplbHkucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcHJvcHMgPSB0cmFjay5wcm9wZXJ0aWVzKCk7XG4gIGlmIChwcm9wcy5yZXZlbnVlKSBwcm9wcy5yZXZlbnVlICo9IDEwMDtcbiAgcHVzaCgndHJhY2tFdmVudCcsIHRyYWNrLmV2ZW50KCksIHByb3BzKTtcbn07XG5cbi8qKlxuICogUGFnZS5cbiAqXG4gKiBodHRwczovL3d3dy5vcHRpbWl6ZWx5LmNvbS9kb2NzL2FwaSN0cmFjay1ldmVudFxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cbk9wdGltaXplbHkucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIGNhdGVnb3J5ID0gcGFnZS5jYXRlZ29yeSgpO1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcbiAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgLy8gY2F0ZWdvcml6ZWQgcGFnZXNcbiAgaWYgKGNhdGVnb3J5ICYmIG9wdHMudHJhY2tDYXRlZ29yaXplZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKGNhdGVnb3J5KSk7XG4gIH1cblxuICAvLyBuYW1lZCBwYWdlc1xuICBpZiAobmFtZSAmJiBvcHRzLnRyYWNrTmFtZWRQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjayhuYW1lKSk7XG4gIH1cbn07XG5cbi8qKlxuICogUmVwbGF5IGV4cGVyaW1lbnQgZGF0YSBhcyB0cmFpdHMgdG8gb3RoZXIgZW5hYmxlZCBwcm92aWRlcnMuXG4gKlxuICogaHR0cHM6Ly93d3cub3B0aW1pemVseS5jb20vZG9jcy9hcGkjZGF0YS1vYmplY3RcbiAqL1xuXG5PcHRpbWl6ZWx5LnByb3RvdHlwZS5yZXBsYXkgPSBmdW5jdGlvbigpe1xuICBpZiAoIXdpbmRvdy5vcHRpbWl6ZWx5KSByZXR1cm47IC8vIGluIGNhc2UgdGhlIHNuaXBwZXQgaXNudCBvbiB0aGUgcGFnZVxuXG4gIHZhciBkYXRhID0gd2luZG93Lm9wdGltaXplbHkuZGF0YTtcbiAgaWYgKCFkYXRhKSByZXR1cm47XG5cbiAgdmFyIGV4cGVyaW1lbnRzID0gZGF0YS5leHBlcmltZW50cztcbiAgdmFyIG1hcCA9IGRhdGEuc3RhdGUudmFyaWF0aW9uTmFtZXNNYXA7XG4gIHZhciB0cmFpdHMgPSB7fTtcblxuICBlYWNoKG1hcCwgZnVuY3Rpb24oZXhwZXJpbWVudElkLCB2YXJpYXRpb24pe1xuICAgIHZhciBleHBlcmltZW50ID0gZXhwZXJpbWVudHNbZXhwZXJpbWVudElkXS5uYW1lO1xuICAgIHRyYWl0c1snRXhwZXJpbWVudDogJyArIGV4cGVyaW1lbnRdID0gdmFyaWF0aW9uO1xuICB9KTtcblxuICB0aGlzLmFuYWx5dGljcy5pZGVudGlmeSh0cmFpdHMpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX3BxJyk7XG5cbi8qKlxuICogRXhwb3NlIGBQZXJmZWN0QXVkaWVuY2VgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBQZXJmZWN0QXVkaWVuY2UgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdQZXJmZWN0IEF1ZGllbmNlJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19wcScpXG4gIC5vcHRpb24oJ3NpdGVJZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vdGFnLnBlcmZlY3RhdWRpZW5jZS5jb20vc2VydmUve3sgc2l0ZUlkIH19LmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vc3VwcG9ydC5wZXJmZWN0YXVkaWVuY2UuY29tL2tub3dsZWRnZWJhc2UvYXJ0aWNsZXMvMjEyNDkwLXZpc2l0b3ItdHJhY2tpbmctYXBpXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5QZXJmZWN0QXVkaWVuY2UucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9wcSA9IHdpbmRvdy5fcHEgfHwgW107XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuUGVyZmVjdEF1ZGllbmNlLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5fcHEgJiYgd2luZG93Ll9wcS5wdXNoKTtcbn07XG5cbi8qKlxuICogVHJhY2suXG4gKlxuICogaHR0cDovL3N1cHBvcnQucGVyZmVjdGF1ZGllbmNlLmNvbS9rbm93bGVkZ2ViYXNlL2FydGljbGVzLzIxMjQ5MC12aXNpdG9yLXRyYWNraW5nLWFwaVxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IGV2ZW50XG4gKi9cblxuUGVyZmVjdEF1ZGllbmNlLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgcHVzaCgndHJhY2snLCB0cmFjay5ldmVudCgpKTtcbn07XG5cblxuLyoqXG4gKiBWaWV3ZWQgUHJvZHVjdC5cbiAqXG4gKiBodHRwOi8vc3VwcG9ydC5wZXJmZWN0YXVkaWVuY2UuY29tL2tub3dsZWRnZWJhc2UvYXJ0aWNsZXMvMjEyNDkwLXZpc2l0b3ItdHJhY2tpbmctYXBpXG4gKlxuICogQHBhcmFtIHtUcmFja30gZXZlbnRcbiAqL1xuXG5QZXJmZWN0QXVkaWVuY2UucHJvdG90eXBlLnZpZXdlZFByb2R1Y3QgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9kdWN0ID0gdHJhY2suc2t1KCk7XG4gIHB1c2goJ3RyYWNrJywgdHJhY2suZXZlbnQoKSk7XG4gIHB1c2goJ3RyYWNrUHJvZHVjdCcsIHByb2R1Y3QpO1xufTtcblxuLyoqXG4gKiBDb21wbGV0ZWQgUHVyY2hhc2UuXG4gKlxuICogaHR0cDovL3N1cHBvcnQucGVyZmVjdGF1ZGllbmNlLmNvbS9rbm93bGVkZ2ViYXNlL2FydGljbGVzLzIxMjQ5MC12aXNpdG9yLXRyYWNraW5nLWFwaVxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IGV2ZW50XG4gKi9cblxuUGVyZmVjdEF1ZGllbmNlLnByb3RvdHlwZS5jb21wbGV0ZWRPcmRlciA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHRvdGFsID0gdHJhY2sudG90YWwoKSB8fCB0cmFjay5yZXZlbnVlKCk7XG4gIHZhciBvcmRlcklkID0gdHJhY2sub3JkZXJJZCgpO1xuICB2YXIgcHJvcHMgPSB7fTtcbiAgaWYgKHRvdGFsKSBwcm9wcy5yZXZlbnVlID0gdG90YWw7XG4gIGlmIChvcmRlcklkKSBwcm9wcy5vcmRlcklkID0gb3JkZXJJZDtcbiAgcHVzaCgndHJhY2snLCB0cmFjay5ldmVudCgpLCBwcm9wcyk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfcHJ1bScpO1xudmFyIGRhdGUgPSByZXF1aXJlKCdsb2FkLWRhdGUnKTtcblxuLyoqXG4gKiBFeHBvc2UgYFBpbmdkb21gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBQaW5nZG9tID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignUGluZ2RvbScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfcHJ1bScpXG4gIC5nbG9iYWwoJ1BSVU1fRVBJU09ERVMnKVxuICAub3B0aW9uKCdpZCcsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vcnVtLXN0YXRpYy5waW5nZG9tLm5ldC9wcnVtLm1pbi5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5QaW5nZG9tLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fcHJ1bSA9IHdpbmRvdy5fcHJ1bSB8fCBbXTtcbiAgcHVzaCgnaWQnLCB0aGlzLm9wdGlvbnMuaWQpO1xuICBwdXNoKCdtYXJrJywgJ2ZpcnN0Ynl0ZScsIGRhdGUuZ2V0VGltZSgpKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cblBpbmdkb20ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9wcnVtICYmIHdpbmRvdy5fcHJ1bS5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfcGFxJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ2VhY2gnKTtcblxuLyoqXG4gKiBFeHBvc2UgYFBpd2lrYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgUGl3aWsgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdQaXdpaycpXG4gIC5nbG9iYWwoJ19wYXEnKVxuICAub3B0aW9uKCd1cmwnLCBudWxsKVxuICAub3B0aW9uKCdzaXRlSWQnLCAnJylcbiAgLm1hcHBpbmcoJ2dvYWxzJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCJ7eyB1cmwgfX0vcGl3aWsuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9waXdpay5vcmcvZG9jcy9qYXZhc2NyaXB0LXRyYWNraW5nLyN0b2MtYXN5bmNocm9ub3VzLXRyYWNraW5nXG4gKi9cblxuUGl3aWsucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICB3aW5kb3cuX3BhcSA9IHdpbmRvdy5fcGFxIHx8IFtdO1xuICBwdXNoKCdzZXRTaXRlSWQnLCB0aGlzLm9wdGlvbnMuc2l0ZUlkKTtcbiAgcHVzaCgnc2V0VHJhY2tlclVybCcsIHRoaXMub3B0aW9ucy51cmwgKyAnL3Bpd2lrLnBocCcpO1xuICBwdXNoKCdlbmFibGVMaW5rVHJhY2tpbmcnKTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBQaXdpayBpcyBsb2FkZWRcbiAqL1xuXG5QaXdpay5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICEhICh3aW5kb3cuX3BhcSAmJiB3aW5kb3cuX3BhcS5wdXNoICE9IFtdLnB1c2gpO1xufTtcblxuLyoqXG4gKiBQYWdlXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuUGl3aWsucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcbiAgcHVzaCgndHJhY2tQYWdlVmlldycpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cblBpd2lrLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIGdvYWxzID0gdGhpcy5nb2Fscyh0cmFjay5ldmVudCgpKTtcbiAgdmFyIHJldmVudWUgPSB0cmFjay5yZXZlbnVlKCkgfHwgMDtcbiAgZWFjaChnb2FscywgZnVuY3Rpb24oZ29hbCl7XG4gICAgcHVzaCgndHJhY2tHb2FsJywgZ29hbCwgcmV2ZW51ZSk7XG4gIH0pO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGNvbnZlcnREYXRlcyA9IHJlcXVpcmUoJ2NvbnZlcnQtZGF0ZXMnKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ19sbnEnKTtcbnZhciBhbGlhcyA9IHJlcXVpcmUoJ2FsaWFzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBQcmVhY3RgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBQcmVhY3QgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdQcmVhY3QnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX2xucScpXG4gIC5vcHRpb24oJ3Byb2plY3RDb2RlJywgJycpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9kMmJidmw2ZHE0OGZhNi5jbG91ZGZyb250Lm5ldC9qcy9sbi0yLjQubWluLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vd3d3LnByZWFjdC5pby9hcGkvamF2YXNjcmlwdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuUHJlYWN0LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fbG5xID0gd2luZG93Ll9sbnEgfHwgW107XG4gIHB1c2goJ19zZXRDb2RlJywgdGhpcy5vcHRpb25zLnByb2plY3RDb2RlKTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5QcmVhY3QucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9sbnEgJiYgd2luZG93Ll9sbnEucHVzaCAhPT0gQXJyYXkucHJvdG90eXBlLnB1c2gpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cblByZWFjdC5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIGlmICghaWRlbnRpZnkudXNlcklkKCkpIHJldHVybjtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cyh7IGNyZWF0ZWQ6ICdjcmVhdGVkX2F0JyB9KTtcbiAgdHJhaXRzID0gY29udmVydERhdGVzKHRyYWl0cywgY29udmVydERhdGUpO1xuICBwdXNoKCdfc2V0UGVyc29uRGF0YScsIHtcbiAgICBuYW1lOiBpZGVudGlmeS5uYW1lKCksXG4gICAgZW1haWw6IGlkZW50aWZ5LmVtYWlsKCksXG4gICAgdWlkOiBpZGVudGlmeS51c2VySWQoKSxcbiAgICBwcm9wZXJ0aWVzOiB0cmFpdHNcbiAgfSk7XG59O1xuXG4vKipcbiAqIEdyb3VwLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICovXG5cblByZWFjdC5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbihncm91cCl7XG4gIGlmICghZ3JvdXAuZ3JvdXBJZCgpKSByZXR1cm47XG4gIHB1c2goJ19zZXRBY2NvdW50JywgZ3JvdXAudHJhaXRzKCkpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cblByZWFjdC5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBwcm9wcyA9IHRyYWNrLnByb3BlcnRpZXMoKTtcbiAgdmFyIHJldmVudWUgPSB0cmFjay5yZXZlbnVlKCk7XG4gIHZhciBldmVudCA9IHRyYWNrLmV2ZW50KCk7XG4gIHZhciBzcGVjaWFsID0geyBuYW1lOiBldmVudCB9O1xuXG4gIGlmIChyZXZlbnVlKSB7XG4gICAgc3BlY2lhbC5yZXZlbnVlID0gcmV2ZW51ZSAqIDEwMDtcbiAgICBkZWxldGUgcHJvcHMucmV2ZW51ZTtcbiAgfVxuXG4gIGlmIChwcm9wcy5ub3RlKSB7XG4gICAgc3BlY2lhbC5ub3RlID0gcHJvcHMubm90ZTtcbiAgICBkZWxldGUgcHJvcHMubm90ZTtcbiAgfVxuXG4gIHB1c2goJ19sb2dFdmVudCcsIHNwZWNpYWwsIHByb3BzKTtcbn07XG5cbi8qKlxuICogQ29udmVydCBhIGBkYXRlYCB0byBhIGZvcm1hdCBQcmVhY3Qgc3VwcG9ydHMuXG4gKlxuICogQHBhcmFtIHtEYXRlfSBkYXRlXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gY29udmVydERhdGUoZGF0ZSl7XG4gIHJldHVybiBNYXRoLmZsb29yKGRhdGUgLyAxMDAwKTtcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX2tpcScpO1xudmFyIEZhY2FkZSA9IHJlcXVpcmUoJ2ZhY2FkZScpO1xudmFyIElkZW50aWZ5ID0gRmFjYWRlLklkZW50aWZ5O1xudmFyIGJpbmQgPSByZXF1aXJlKCdiaW5kJyk7XG52YXIgd2hlbiA9IHJlcXVpcmUoJ3doZW4nKTtcblxuLyoqXG4gKiBFeHBvc2UgYFF1YWxhcm9vYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgUXVhbGFyb28gPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdRdWFsYXJvbycpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdfa2lxJylcbiAgLm9wdGlvbignY3VzdG9tZXJJZCcsICcnKVxuICAub3B0aW9uKCdzaXRlVG9rZW4nLCAnJylcbiAgLm9wdGlvbigndHJhY2snLCBmYWxzZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL3MzLmFtYXpvbmF3cy5jb20va2kuanMve3sgY3VzdG9tZXJJZCB9fS97eyBzaXRlVG9rZW4gfX0uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuUXVhbGFyb28ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgd2luZG93Ll9raXEgPSB3aW5kb3cuX2tpcSB8fCBbXTtcbiAgdmFyIGxvYWRlZCA9IGJpbmQodGhpcywgdGhpcy5sb2FkZWQpO1xuICB2YXIgcmVhZHkgPSB0aGlzLnJlYWR5O1xuICB0aGlzLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB3aGVuKGxvYWRlZCwgcmVhZHkpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuUXVhbGFyb28ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll9raXEgJiYgd2luZG93Ll9raXEucHVzaCAhPT0gQXJyYXkucHJvdG90eXBlLnB1c2gpO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeS5cbiAqXG4gKiBodHRwOi8vaGVscC5xdWFsYXJvby5jb20vY3VzdG9tZXIvcG9ydGFsL2FydGljbGVzLzczMTA4NS1pZGVudGlmeS1zdXJ2ZXktbnVkZ2UtdGFrZXJzXG4gKiBodHRwOi8vaGVscC5xdWFsYXJvby5jb20vY3VzdG9tZXIvcG9ydGFsL2FydGljbGVzLzczMTA5MS1zZXQtYWRkaXRpb25hbC11c2VyLXByb3BlcnRpZXNcbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cblF1YWxhcm9vLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgdmFyIGVtYWlsID0gaWRlbnRpZnkuZW1haWwoKTtcbiAgaWYgKGVtYWlsKSBpZCA9IGVtYWlsO1xuICBpZiAoaWQpIHB1c2goJ2lkZW50aWZ5JywgaWQpO1xuICBpZiAodHJhaXRzKSBwdXNoKCdzZXQnLCB0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIChvcHRpb25hbClcbiAqL1xuXG5RdWFsYXJvby5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIGlmICghdGhpcy5vcHRpb25zLnRyYWNrKSByZXR1cm47XG4gIHZhciBldmVudCA9IHRyYWNrLmV2ZW50KCk7XG4gIHZhciB0cmFpdHMgPSB7fTtcbiAgdHJhaXRzWydUcmlnZ2VyZWQ6ICcgKyBldmVudF0gPSB0cnVlO1xuICB0aGlzLmlkZW50aWZ5KG5ldyBJZGVudGlmeSh7IHRyYWl0czogdHJhaXRzIH0pKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgcHVzaCA9IHJlcXVpcmUoJ2dsb2JhbC1xdWV1ZScpKCdfcWV2ZW50cycsIHsgd3JhcDogZmFsc2UgfSk7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB1c2VIdHRwcyA9IHJlcXVpcmUoJ3VzZS1odHRwcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgUXVhbnRjYXN0YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgUXVhbnRjYXN0ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignUXVhbnRjYXN0JylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ19xZXZlbnRzJylcbiAgLmdsb2JhbCgnX19xYycpXG4gIC5vcHRpb24oJ3BDb2RlJywgbnVsbClcbiAgLm9wdGlvbignYWR2ZXJ0aXNlJywgZmFsc2UpXG4gIC50YWcoJ2h0dHAnLCAnPHNjcmlwdCBzcmM9XCJodHRwOi8vZWRnZS5xdWFudHNlcnZlLmNvbS9xdWFudC5qc1wiPicpXG4gIC50YWcoJ2h0dHBzJywgJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9zZWN1cmUucXVhbnRzZXJ2ZS5jb20vcXVhbnQuanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHBzOi8vd3d3LnF1YW50Y2FzdC5jb20vbGVhcm5pbmctY2VudGVyL2d1aWRlcy91c2luZy10aGUtcXVhbnRjYXN0LWFzeW5jaHJvbm91cy10YWcvXG4gKiBodHRwczovL3d3dy5xdWFudGNhc3QuY29tL2hlbHAvY3Jvc3MtcGxhdGZvcm0tYXVkaWVuY2UtbWVhc3VyZW1lbnQtZ3VpZGUvXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuUXVhbnRjYXN0LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fcWV2ZW50cyA9IHdpbmRvdy5fcWV2ZW50cyB8fCBbXTtcblxuICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgdmFyIHNldHRpbmdzID0geyBxYWNjdDogb3B0cy5wQ29kZSB9O1xuICB2YXIgdXNlciA9IHRoaXMuYW5hbHl0aWNzLnVzZXIoKTtcbiAgaWYgKHVzZXIuaWQoKSkgc2V0dGluZ3MudWlkID0gdXNlci5pZCgpO1xuXG4gIGlmIChwYWdlKSB7XG4gICAgc2V0dGluZ3MubGFiZWxzID0gdGhpcy5sYWJlbHMoJ3BhZ2UnLCBwYWdlLmNhdGVnb3J5KCksIHBhZ2UubmFtZSgpKTtcbiAgfVxuXG4gIHB1c2goc2V0dGluZ3MpO1xuXG4gIHZhciBuYW1lID0gdXNlSHR0cHMoKSA/ICdodHRwcycgOiAnaHR0cCc7XG4gIHRoaXMubG9hZChuYW1lLCB0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuUXVhbnRjYXN0LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93Ll9fcWM7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogaHR0cHM6Ly9jbG91ZHVwLmNvbS9jQlJSRkFmcTZtZlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cblF1YW50Y2FzdC5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgY2F0ZWdvcnkgPSBwYWdlLmNhdGVnb3J5KCk7XG4gIHZhciBuYW1lID0gcGFnZS5uYW1lKCk7XG4gIHZhciBzZXR0aW5ncyA9IHtcbiAgICBldmVudDogJ3JlZnJlc2gnLFxuICAgIGxhYmVsczogdGhpcy5sYWJlbHMoJ3BhZ2UnLCBjYXRlZ29yeSwgbmFtZSksXG4gICAgcWFjY3Q6IHRoaXMub3B0aW9ucy5wQ29kZSxcbiAgfTtcbiAgdmFyIHVzZXIgPSB0aGlzLmFuYWx5dGljcy51c2VyKCk7XG4gIGlmICh1c2VyLmlkKCkpIHNldHRpbmdzLnVpZCA9IHVzZXIuaWQoKTtcbiAgcHVzaChzZXR0aW5ncyk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIGh0dHBzOi8vd3d3LnF1YW50Y2FzdC5jb20vaGVscC9jcm9zcy1wbGF0Zm9ybS1hdWRpZW5jZS1tZWFzdXJlbWVudC1ndWlkZS9cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaWQgKG9wdGlvbmFsKVxuICovXG5cblF1YW50Y2FzdC5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIC8vIGVkaXQgdGhlIGluaXRpYWwgcXVhbnRjYXN0IHNldHRpbmdzXG4gIC8vIFRPRE86IGNvdWxkIGJlIGRvbmUgaW4gYSBjbGVhbmVyIHdheVxuICB2YXIgaWQgPSBpZGVudGlmeS51c2VySWQoKTtcbiAgaWYgKGlkKSB7XG4gICAgd2luZG93Ll9xZXZlbnRzWzBdID0gd2luZG93Ll9xZXZlbnRzWzBdIHx8IHt9O1xuICAgIHdpbmRvdy5fcWV2ZW50c1swXS51aWQgPSBpZDtcbiAgfVxufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwczovL2Nsb3VkdXAuY29tL2NCUlJGQWZxNm1mXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqL1xuXG5RdWFudGNhc3QucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgbmFtZSA9IHRyYWNrLmV2ZW50KCk7XG4gIHZhciByZXZlbnVlID0gdHJhY2sucmV2ZW51ZSgpO1xuICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgZXZlbnQ6ICdjbGljaycsXG4gICAgbGFiZWxzOiB0aGlzLmxhYmVscygnZXZlbnQnLCBuYW1lKSxcbiAgICBxYWNjdDogdGhpcy5vcHRpb25zLnBDb2RlXG4gIH07XG4gIHZhciB1c2VyID0gdGhpcy5hbmFseXRpY3MudXNlcigpO1xuICBpZiAobnVsbCAhPSByZXZlbnVlKSBzZXR0aW5ncy5yZXZlbnVlID0gKHJldmVudWUrJycpOyAvLyBjb252ZXJ0IHRvIHN0cmluZ1xuICBpZiAodXNlci5pZCgpKSBzZXR0aW5ncy51aWQgPSB1c2VyLmlkKCk7XG4gIHB1c2goc2V0dGluZ3MpO1xufTtcblxuLyoqXG4gKiBDb21wbGV0ZWQgT3JkZXIuXG4gKlxuICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblF1YW50Y2FzdC5wcm90b3R5cGUuY29tcGxldGVkT3JkZXIgPSBmdW5jdGlvbih0cmFjayl7XG4gIHZhciBuYW1lID0gdHJhY2suZXZlbnQoKTtcbiAgdmFyIHJldmVudWUgPSB0cmFjay50b3RhbCgpO1xuICB2YXIgbGFiZWxzID0gdGhpcy5sYWJlbHMoJ2V2ZW50JywgbmFtZSk7XG4gIHZhciBjYXRlZ29yeSA9IHRyYWNrLmNhdGVnb3J5KCk7XG5cbiAgaWYgKHRoaXMub3B0aW9ucy5hZHZlcnRpc2UgJiYgY2F0ZWdvcnkpIHtcbiAgICBsYWJlbHMgKz0gJywnICsgdGhpcy5sYWJlbHMoJ3BjYXQnLCBjYXRlZ29yeSk7XG4gIH1cblxuICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgZXZlbnQ6ICdyZWZyZXNoJywgLy8gdGhlIGV4YW1wbGUgUXVhbnRjYXN0IHNlbnQgaGFzIGNvbXBsZXRlZCBvcmRlciBzZW5kIHJlZnJlc2ggbm90IGNsaWNrXG4gICAgbGFiZWxzOiBsYWJlbHMsXG4gICAgcmV2ZW51ZTogKHJldmVudWUrJycpLCAvLyBjb252ZXJ0IHRvIHN0cmluZ1xuICAgIG9yZGVyaWQ6IHRyYWNrLm9yZGVySWQoKSxcbiAgICBxYWNjdDogdGhpcy5vcHRpb25zLnBDb2RlXG4gIH07XG4gIHB1c2goc2V0dGluZ3MpO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZSBxdWFudGNhc3QgbGFiZWxzLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgb3B0aW9ucy5hZHZlcnRpc2UgPSBmYWxzZTtcbiAqICAgIGxhYmVscygnZXZlbnQnLCAnbXkgZXZlbnQnKTtcbiAqICAgIC8vID0+IFwiZXZlbnQubXkgZXZlbnRcIlxuICpcbiAqICAgIG9wdGlvbnMuYWR2ZXJ0aXNlID0gdHJ1ZTtcbiAqICAgIGxhYmVscygnZXZlbnQnLCAnbXkgZXZlbnQnKTtcbiAqICAgIC8vID0+IFwiX2ZwLmV2ZW50Lm15IGV2ZW50XCJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtTdHJpbmd9IC4uLlxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUXVhbnRjYXN0LnByb3RvdHlwZS5sYWJlbHMgPSBmdW5jdGlvbih0eXBlKXtcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIHZhciBhZHZlcnRpc2UgPSB0aGlzLm9wdGlvbnMuYWR2ZXJ0aXNlO1xuICB2YXIgcmV0ID0gW107XG5cbiAgaWYgKGFkdmVydGlzZSAmJiAncGFnZScgPT0gdHlwZSkgdHlwZSA9ICdldmVudCc7XG4gIGlmIChhZHZlcnRpc2UpIHR5cGUgPSAnX2ZwLicgKyB0eXBlO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgIGlmIChudWxsID09IGFyZ3NbaV0pIGNvbnRpbnVlO1xuICAgIHZhciB2YWx1ZSA9IFN0cmluZyhhcmdzW2ldKTtcbiAgICByZXQucHVzaCh2YWx1ZS5yZXBsYWNlKC8sL2csICc7JykpO1xuICB9XG5cbiAgcmV0ID0gYWR2ZXJ0aXNlID8gcmV0LmpvaW4oJyAnKSA6IHJldC5qb2luKCcuJyk7XG4gIHJldHVybiBbdHlwZSwgcmV0XS5qb2luKCcuJyk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgZXh0ZW5kID0gcmVxdWlyZSgnZXh0ZW5kJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgUm9sbGJhcmAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIFJvbGxiYXJJbnRlZ3JhdGlvbiA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ1JvbGxiYXInKVxuICAuZ2xvYmFsKCdSb2xsYmFyJylcbiAgLm9wdGlvbignaWRlbnRpZnknLCB0cnVlKVxuICAub3B0aW9uKCdhY2Nlc3NUb2tlbicsICcnKVxuICAub3B0aW9uKCdlbnZpcm9ubWVudCcsICd1bmtub3duJylcbiAgLm9wdGlvbignY2FwdHVyZVVuY2F1Z2h0JywgdHJ1ZSk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cblJvbGxiYXJJbnRlZ3JhdGlvbi5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgX3JvbGxiYXJDb25maWcgPSB0aGlzLmNvbmZpZyA9IHtcbiAgICBhY2Nlc3NUb2tlbjogdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuLFxuICAgIGNhcHR1cmVVbmNhdWdodDogdGhpcy5vcHRpb25zLmNhcHR1cmVVbmNhdWdodCxcbiAgICBwYXlsb2FkOiB7XG4gICAgICBlbnZpcm9ubWVudDogdGhpcy5vcHRpb25zLmVudmlyb25tZW50XG4gICAgfVxuICB9O1xuXG4gIChmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3RoaXMuc2hpbUlkPSsrZyx0aGlzLm5vdGlmaWVyPW51bGwsdGhpcy5wYXJlbnRTaGltPWIsdGhpcy5sb2dnZXI9ZnVuY3Rpb24oKXt9LGEuY29uc29sZSYmdm9pZCAwID09PSBhLmNvbnNvbGUuc2hpbUlkJiYodGhpcy5sb2dnZXI9YS5jb25zb2xlLmxvZyl9ZnVuY3Rpb24gYyhiLGMsZCl7IWRbNF0mJmEuX3JvbGxiYXJXcmFwcGVkRXJyb3ImJihkWzRdPWEuX3JvbGxiYXJXcmFwcGVkRXJyb3IsYS5fcm9sbGJhcldyYXBwZWRFcnJvcj1udWxsKSxiLnVuY2F1Z2h0RXJyb3IuYXBwbHkoYixkKSxjJiZjLmFwcGx5KGEsZCl9ZnVuY3Rpb24gZChjKXt2YXIgZD1iO3JldHVybiBmKGZ1bmN0aW9uKCl7aWYgKHRoaXMubm90aWZpZXIpcmV0dXJuIHRoaXMubm90aWZpZXJbY10uYXBwbHkodGhpcy5ub3RpZmllcixhcmd1bWVudHMpO3ZhciBiPXRoaXMsZT1cInNjb3BlXCI9PT1jO2UmJihiPW5ldyBkKHRoaXMpKTt2YXIgZj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCksZz17IHNoaW06YiwgbWV0aG9kOmMsIGFyZ3M6ZiwgdHM6bmV3IERhdGUgfTtyZXR1cm4gYS5fcm9sbGJhclNoaW1RdWV1ZS5wdXNoKGcpLGU/Yjp2b2lkIDB9KX1mdW5jdGlvbiBlKGEsYil7aWYgKGIuaGFzT3duUHJvcGVydHkmJmIuaGFzT3duUHJvcGVydHkoXCJhZGRFdmVudExpc3RlbmVyXCIpKXt2YXIgYz1iLmFkZEV2ZW50TGlzdGVuZXI7Yi5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGIsZCxlKXtjLmNhbGwodGhpcyxiLGEud3JhcChkKSxlKX07dmFyIGQ9Yi5yZW1vdmVFdmVudExpc3RlbmVyO2IucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyl7ZC5jYWxsKHRoaXMsYSxiLl93cmFwcGVkfHxiLGMpfX19ZnVuY3Rpb24gZihhLGIpe3JldHVybiBiPWJ8fHRoaXMubG9nZ2VyLGZ1bmN0aW9uKCl7dHJ5IHtyZXR1cm4gYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9IGNhdGNoIChjKSB7YihcIlJvbGxiYXIgaW50ZXJuYWwgZXJyb3I6XCIsYyl9fX12YXIgZz0wO2IuaW5pdD1mdW5jdGlvbihhLGQpe3ZhciBnPWQuZ2xvYmFsQWxpYXN8fFwiUm9sbGJhclwiO2lmIChcIm9iamVjdFwiPT10eXBlb2YgYVtnXSlyZXR1cm4gYVtnXTthLl9yb2xsYmFyU2hpbVF1ZXVlPVtdLGEuX3JvbGxiYXJXcmFwcGVkRXJyb3I9bnVsbCxkPWR8fHt9O3ZhciBoPW5ldyBiO3JldHVybiBmKGZ1bmN0aW9uKCl7aWYgKGguY29uZmlndXJlKGQpLGQuY2FwdHVyZVVuY2F1Z2h0KXt2YXIgYj1hLm9uZXJyb3I7YS5vbmVycm9yPWZ1bmN0aW9uKCl7dmFyIGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO2MoaCxiLGEpfTt2YXIgZixpLGo9W1wiRXZlbnRUYXJnZXRcIixcIldpbmRvd1wiLFwiTm9kZVwiLFwiQXBwbGljYXRpb25DYWNoZVwiLFwiQXVkaW9UcmFja0xpc3RcIixcIkNoYW5uZWxNZXJnZXJOb2RlXCIsXCJDcnlwdG9PcGVyYXRpb25cIixcIkV2ZW50U291cmNlXCIsXCJGaWxlUmVhZGVyXCIsXCJIVE1MVW5rbm93bkVsZW1lbnRcIixcIklEQkRhdGFiYXNlXCIsXCJJREJSZXF1ZXN0XCIsXCJJREJUcmFuc2FjdGlvblwiLFwiS2V5T3BlcmF0aW9uXCIsXCJNZWRpYUNvbnRyb2xsZXJcIixcIk1lc3NhZ2VQb3J0XCIsXCJNb2RhbFdpbmRvd1wiLFwiTm90aWZpY2F0aW9uXCIsXCJTVkdFbGVtZW50SW5zdGFuY2VcIixcIlNjcmVlblwiLFwiVGV4dFRyYWNrXCIsXCJUZXh0VHJhY2tDdWVcIixcIlRleHRUcmFja0xpc3RcIixcIldlYlNvY2tldFwiLFwiV2ViU29ja2V0V29ya2VyXCIsXCJXb3JrZXJcIixcIlhNTEh0dHBSZXF1ZXN0XCIsXCJYTUxIdHRwUmVxdWVzdEV2ZW50VGFyZ2V0XCIsXCJYTUxIdHRwUmVxdWVzdFVwbG9hZFwiXTtmb3IgKGY9MDtmPGoubGVuZ3RoOysrZilpPWpbZl0sYVtpXSYmYVtpXS5wcm90b3R5cGUmJmUoaCxhW2ldLnByb3RvdHlwZSl9cmV0dXJuIGFbZ109aCxofSxoLmxvZ2dlcikoKX0sYi5wcm90b3R5cGUubG9hZEZ1bGw9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZz1mKGZ1bmN0aW9uKCl7dmFyIGE9Yi5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLGU9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKVswXTthLnNyYz1kLnJvbGxiYXJKc1VybCxhLmFzeW5jPSFjLGEub25sb2FkPWgsZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLGUpfSx0aGlzLmxvZ2dlciksaD1mKGZ1bmN0aW9uKCl7dmFyIGI7aWYgKHZvaWQgMD09PWEuX3JvbGxiYXJQYXlsb2FkUXVldWUpe3ZhciBjLGQsZixnO2ZvciAoYj1uZXcgRXJyb3IoXCJyb2xsYmFyLmpzIGRpZCBub3QgbG9hZFwiKTtjPWEuX3JvbGxiYXJTaGltUXVldWUuc2hpZnQoKTspZm9yIChmPWMuYXJncyxnPTA7ZzxmLmxlbmd0aDsrK2cpaWYgKGQ9ZltnXSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkKXtkKGIpO2JyZWFrfX1lJiZlKGIpfSx0aGlzLmxvZ2dlcik7ZihmdW5jdGlvbigpe2M/ZygpOmEuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZywhMSk6YS5hdHRhY2hFdmVudChcIm9ubG9hZFwiLGcpfSx0aGlzLmxvZ2dlcikoKX0sYi5wcm90b3R5cGUud3JhcD1mdW5jdGlvbihiKXtpZiAoXCJmdW5jdGlvblwiIT10eXBlb2YgYilyZXR1cm4gYjtpZiAoYi5faXNXcmFwKXJldHVybiBiO2lmICghYi5fd3JhcHBlZCl7Yi5fd3JhcHBlZD1mdW5jdGlvbigpe3RyeSB7cmV0dXJuIGIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSBjYXRjaCAoYykge3Rocm93IGEuX3JvbGxiYXJXcmFwcGVkRXJyb3I9YyxjfX0sYi5fd3JhcHBlZC5faXNXcmFwPSEwO2ZvciAodmFyIGMgaW4gYiliLmhhc093blByb3BlcnR5KGMpJiYoYi5fd3JhcHBlZFtjXT1iW2NdKX1yZXR1cm4gYi5fd3JhcHBlZH07Zm9yICh2YXIgaD1cImxvZyxkZWJ1ZyxpbmZvLHdhcm4sd2FybmluZyxlcnJvcixjcml0aWNhbCxnbG9iYWwsY29uZmlndXJlLHNjb3BlLHVuY2F1Z2h0RXJyb3JcIi5zcGxpdChcIixcIiksaT0wO2k8aC5sZW5ndGg7KytpKWIucHJvdG90eXBlW2hbaV1dPWQoaFtpXSk7dmFyIGo9XCIvL2QzN2d2cnZjMHd0NHMxLmNsb3VkZnJvbnQubmV0L2pzL3YxLjAvcm9sbGJhci5taW4uanNcIjtfcm9sbGJhckNvbmZpZy5yb2xsYmFySnNVcmw9X3JvbGxiYXJDb25maWcucm9sbGJhckpzVXJsfHxqLGIuaW5pdChhLF9yb2xsYmFyQ29uZmlnKX0pKHdpbmRvdyxkb2N1bWVudCk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuUm9sbGJhckludGVncmF0aW9uLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMub2JqZWN0KHdpbmRvdy5Sb2xsYmFyKSAmJiBudWxsID09IHdpbmRvdy5Sb2xsYmFyLnNoaW1JZDtcbn07XG5cbi8qKlxuICogTG9hZC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICovXG5cblJvbGxiYXJJbnRlZ3JhdGlvbi5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKGNhbGxiYWNrKXtcbiAgd2luZG93LlJvbGxiYXIubG9hZEZ1bGwod2luZG93LCBkb2N1bWVudCwgdHJ1ZSwgdGhpcy5jb25maWcsIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuUm9sbGJhckludGVncmF0aW9uLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgLy8gZG8gc3R1ZmYgd2l0aCBgaWRgIG9yIGB0cmFpdHNgXG4gIGlmICghdGhpcy5vcHRpb25zLmlkZW50aWZ5KSByZXR1cm47XG5cbiAgLy8gRG9uJ3QgYWxsb3cgaWRlbnRpZnkgd2l0aG91dCBhIHVzZXIgaWRcbiAgdmFyIHVpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuICBpZiAodWlkID09PSBudWxsIHx8IHVpZCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgdmFyIHJvbGxiYXIgPSB3aW5kb3cuUm9sbGJhcjtcbiAgdmFyIHBlcnNvbiA9IHsgaWQ6IHVpZCB9O1xuICBleHRlbmQocGVyc29uLCBpZGVudGlmeS50cmFpdHMoKSk7XG4gIHJvbGxiYXIuY29uZmlndXJlKHsgcGF5bG9hZDogeyBwZXJzb246IHBlcnNvbiB9fSk7XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG5cbi8qKlxuICogRXhwb3NlIGBTYWFTcXVhdGNoYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgU2FhU3F1YXRjaCA9IG1vZHVsZS5leHBvcnRzID0gaW50ZWdyYXRpb24oJ1NhYVNxdWF0Y2gnKVxuICAub3B0aW9uKCd0ZW5hbnRBbGlhcycsICcnKVxuICAub3B0aW9uKCdyZWZlcnJhbEltYWdlJywgJycpXG4gIC5nbG9iYWwoJ19zcWgnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vZDJyY3A5YWsxNTJrZTEuY2xvdWRmcm9udC5uZXQvYXNzZXRzL2phdmFzY3JpcHRzL3NxdWF0Y2gubWluLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge1BhZ2V9IHBhZ2VcbiAqL1xuXG5TYWFTcXVhdGNoLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fc3FoID0gd2luZG93Ll9zcWggfHwgW107XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuU2FhU3F1YXRjaC5wcm90b3R5cGUubG9hZGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHdpbmRvdy5fc3FoICYmIHdpbmRvdy5fc3FoLnB1c2ggIT0gW10ucHVzaDtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtGYWNhZGV9IGlkZW50aWZ5XG4gKi9cblxuU2FhU3F1YXRjaC5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbihpZGVudGlmeSl7XG4gIHZhciBzcWggPSB3aW5kb3cuX3NxaDtcbiAgdmFyIGFjY291bnRJZCA9IGlkZW50aWZ5LnByb3h5KCd0cmFpdHMuYWNjb3VudElkJyk7XG4gIHZhciBpbWFnZSA9IGlkZW50aWZ5LnByb3h5KCd0cmFpdHMucmVmZXJyYWxJbWFnZScpIHx8IHRoaXMub3B0aW9ucy5yZWZlcnJhbEltYWdlO1xuICB2YXIgb3B0cyA9IGlkZW50aWZ5Lm9wdGlvbnModGhpcy5uYW1lKTtcbiAgdmFyIGlkID0gaWRlbnRpZnkudXNlcklkKCk7XG4gIHZhciBlbWFpbCA9IGlkZW50aWZ5LmVtYWlsKCk7XG5cbiAgaWYgKCEoaWQgfHwgZW1haWwpKSByZXR1cm47XG4gIGlmICh0aGlzLmNhbGxlZCkgcmV0dXJuO1xuXG4gIHZhciBpbml0ID0ge1xuICAgIHRlbmFudF9hbGlhczogdGhpcy5vcHRpb25zLnRlbmFudEFsaWFzLFxuICAgIGZpcnN0X25hbWU6IGlkZW50aWZ5LmZpcnN0TmFtZSgpLFxuICAgIGxhc3RfbmFtZTogaWRlbnRpZnkubGFzdE5hbWUoKSxcbiAgICB1c2VyX2ltYWdlOiBpZGVudGlmeS5hdmF0YXIoKSxcbiAgICBlbWFpbDogZW1haWwsXG4gICAgdXNlcl9pZDogaWQsXG4gIH07XG5cbiAgaWYgKGFjY291bnRJZCkgaW5pdC5hY2NvdW50X2lkID0gYWNjb3VudElkO1xuICBpZiAob3B0cy5jaGVja3N1bSkgaW5pdC5jaGVja3N1bSA9IG9wdHMuY2hlY2tzdW07XG4gIGlmIChpbWFnZSkgaW5pdC5mYl9zaGFyZV9pbWFnZSA9IGltYWdlO1xuXG4gIHNxaC5wdXNoKFsnaW5pdCcsIGluaXRdKTtcbiAgdGhpcy5jYWxsZWQgPSB0cnVlO1xuICB0aGlzLmxvYWQoKTtcbn07XG5cbi8qKlxuICogR3JvdXAuXG4gKlxuICogQHBhcmFtIHtHcm91cH0gZ3JvdXBcbiAqL1xuXG5TYWFTcXVhdGNoLnByb3RvdHlwZS5ncm91cCA9IGZ1bmN0aW9uKGdyb3VwKXtcbiAgdmFyIHNxaCA9IHdpbmRvdy5fc3FoO1xuICB2YXIgcHJvcHMgPSBncm91cC5wcm9wZXJ0aWVzKCk7XG4gIHZhciBpZCA9IGdyb3VwLmdyb3VwSWQoKTtcbiAgdmFyIGltYWdlID0gZ3JvdXAucHJveHkoJ3RyYWl0cy5yZWZlcnJhbEltYWdlJykgfHwgdGhpcy5vcHRpb25zLnJlZmVycmFsSW1hZ2U7XG4gIHZhciBvcHRzID0gZ3JvdXAub3B0aW9ucyh0aGlzLm5hbWUpO1xuXG4gIC8vIHRlbmFudF9hbGlhcyBpcyByZXF1aXJlZC5cbiAgaWYgKHRoaXMuY2FsbGVkKSByZXR1cm47XG5cbiAgdmFyIGluaXQgPSB7XG4gICAgdGVuYW50X2FsaWFzOiB0aGlzLm9wdGlvbnMudGVuYW50QWxpYXMsXG4gICAgYWNjb3VudF9pZDogaWRcbiAgfTtcblxuICBpZiAob3B0cy5jaGVja3N1bSkgaW5pdC5jaGVja3N1bSA9IG9wdHMuY2hlY2tzdW07XG4gIGlmIChpbWFnZSkgaW5pdC5mYl9zaGFyZV9pbWFnZSA9IGltYWdlO1xuXG4gIHNxaC5wdXNoKFsnaW5pdCcsIGluaXRdKTtcbiAgdGhpcy5jYWxsZWQgPSB0cnVlO1xuICB0aGlzLmxvYWQoKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBpcyA9IHJlcXVpcmUoJ2lzJyk7XG5cbi8qKlxuICogRXhwb3NlIGBTZW50cnlgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBTZW50cnkgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdTZW50cnknKVxuICAuZ2xvYmFsKCdSYXZlbicpXG4gIC5vcHRpb24oJ2NvbmZpZycsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vY2RuLnJhdmVuanMuY29tLzEuMS4xMC9uYXRpdmUvcmF2ZW4ubWluLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vcmF2ZW4tanMucmVhZHRoZWRvY3Mub3JnL2VuL2xhdGVzdC9jb25maWcvaW5kZXguaHRtbFxuICovXG5cblNlbnRyeS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMubG9hZChmdW5jdGlvbigpe1xuICAgIC8vIGZvciBub3csIHJhdmVuIGJhc2ljYWxseSByZXF1aXJlcyBgaW5zdGFsbGAgdG8gYmUgY2FsbGVkXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9yYXZlbi1qcy9ibG9iL21hc3Rlci9zcmMvcmF2ZW4uanMjTDExM1xuICAgIHdpbmRvdy5SYXZlbi5jb25maWcoY29uZmlnKS5pbnN0YWxsKCk7XG4gICAgc2VsZi5yZWFkeSgpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuU2VudHJ5LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gaXMub2JqZWN0KHdpbmRvdy5SYXZlbik7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuU2VudHJ5LnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgd2luZG93LlJhdmVuLnNldFVzZXIoaWRlbnRpZnkudHJhaXRzKCkpO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGlzID0gcmVxdWlyZSgnaXMnKTtcblxuLyoqXG4gKiBFeHBvc2UgYFNuYXBFbmdhZ2VgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBTbmFwRW5nYWdlID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignU25hcEVuZ2FnZScpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCdTbmFwQUJ1ZycpXG4gIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vY29tbW9uZGF0YXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vY29kZS5zbmFwZW5nYWdlLmNvbS9qcy97eyBhcGlLZXkgfX0uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9oZWxwLnNuYXBlbmdhZ2UuY29tL2luc3RhbGxhdGlvbi1ndWlkZS1nZXR0aW5nLXN0YXJ0ZWQtaW4tYS1zbmFwL1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuU25hcEVuZ2FnZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cblNuYXBFbmdhZ2UucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpcy5vYmplY3Qod2luZG93LlNuYXBBQnVnKTtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5TbmFwRW5nYWdlLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIGVtYWlsID0gaWRlbnRpZnkuZW1haWwoKTtcbiAgaWYgKCFlbWFpbCkgcmV0dXJuO1xuICB3aW5kb3cuU25hcEFCdWcuc2V0VXNlckVtYWlsKGVtYWlsKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnYmluZCcpO1xudmFyIHdoZW4gPSByZXF1aXJlKCd3aGVuJyk7XG5cbi8qKlxuICogRXhwb3NlIGBTcGlubmFrcmAgaW50ZWdyYXRpb24uXG4gKi9cblxudmFyIFNwaW5uYWtyID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignU3Bpbm5ha3InKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnX3NwaW5uYWtyX3NpdGVfaWQnKVxuICAuZ2xvYmFsKCdfc3Bpbm5ha3InKVxuICAub3B0aW9uKCdzaXRlSWQnLCAnJylcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2Qzb2p6eWhib2x2b2k1LmNsb3VkZnJvbnQubmV0L2pzL3NvLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cblNwaW5uYWtyLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fc3Bpbm5ha3Jfc2l0ZV9pZCA9IHRoaXMub3B0aW9ucy5zaXRlSWQ7XG4gIHZhciBsb2FkZWQgPSBiaW5kKHRoaXMsIHRoaXMubG9hZGVkKTtcbiAgdmFyIHJlYWR5ID0gdGhpcy5yZWFkeTtcbiAgdGhpcy5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgd2hlbihsb2FkZWQsIHJlYWR5KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIExvYWRlZD9cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cblNwaW5uYWtyLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93Ll9zcGlubmFrcjtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBzbHVnID0gcmVxdWlyZSgnc2x1ZycpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnX3RzcScpO1xuXG4vKipcbiAqIEV4cG9zZSBgVGFwc3RyZWFtYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgVGFwc3RyZWFtID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignVGFwc3RyZWFtJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ190c3EnKVxuICAub3B0aW9uKCdhY2NvdW50TmFtZScsICcnKVxuICAub3B0aW9uKCd0cmFja0FsbFBhZ2VzJywgdHJ1ZSlcbiAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSlcbiAgLm9wdGlvbigndHJhY2tDYXRlZ29yaXplZFBhZ2VzJywgdHJ1ZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2Nkbi50YXBzdHJlYW0uY29tL3N0YXRpYy9qcy90YXBzdHJlYW0uanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuVGFwc3RyZWFtLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHdpbmRvdy5fdHNxID0gd2luZG93Ll90c3EgfHwgW107XG4gIHB1c2goJ3NldEFjY291bnROYW1lJywgdGhpcy5vcHRpb25zLmFjY291bnROYW1lKTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5UYXBzdHJlYW0ucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhISAod2luZG93Ll90c3EgJiYgd2luZG93Ll90c3EucHVzaCAhPT0gQXJyYXkucHJvdG90eXBlLnB1c2gpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIEBwYXJhbSB7UGFnZX0gcGFnZVxuICovXG5cblRhcHN0cmVhbS5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgY2F0ZWdvcnkgPSBwYWdlLmNhdGVnb3J5KCk7XG4gIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcblxuICAvLyBhbGwgcGFnZXNcbiAgaWYgKG9wdHMudHJhY2tBbGxQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjaygpKTtcbiAgfVxuXG4gIC8vIG5hbWVkIHBhZ2VzXG4gIGlmIChuYW1lICYmIG9wdHMudHJhY2tOYW1lZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKG5hbWUpKTtcbiAgfVxuXG4gIC8vIGNhdGVnb3JpemVkIHBhZ2VzXG4gIGlmIChjYXRlZ29yeSAmJiBvcHRzLnRyYWNrQ2F0ZWdvcml6ZWRQYWdlcykge1xuICAgIHRoaXMudHJhY2socGFnZS50cmFjayhjYXRlZ29yeSkpO1xuICB9XG59O1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuVGFwc3RyZWFtLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgdmFyIHByb3BzID0gdHJhY2sucHJvcGVydGllcygpO1xuICBwdXNoKCdmaXJlSGl0Jywgc2x1Zyh0cmFjay5ldmVudCgpKSwgW3Byb3BzLnVybF0pOyAvLyBuZWVkcyBldmVudHMgYXMgc2x1Z3Ncbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBhbGlhcyA9IHJlcXVpcmUoJ2FsaWFzJyk7XG52YXIgY2xvbmUgPSByZXF1aXJlKCdjbG9uZScpO1xuXG4vKipcbiAqIEV4cG9zZSBgVHJha2lvYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgVHJha2lvID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbigndHJhay5pbycpXG4gIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAuZ2xvYmFsKCd0cmFrJylcbiAgLm9wdGlvbigndG9rZW4nLCAnJylcbiAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSlcbiAgLm9wdGlvbigndHJhY2tDYXRlZ29yaXplZFBhZ2VzJywgdHJ1ZSlcbiAgLnRhZygnPHNjcmlwdCBzcmM9XCIvL2QyOXA2NDc3OXg0M3pvLmNsb3VkZnJvbnQubmV0L3YxL3RyYWsuaW8ubWluLmpzXCI+Jyk7XG5cbi8qKlxuICogT3B0aW9ucyBhbGlhc2VzLlxuICovXG5cbnZhciBvcHRpb25zQWxpYXNlcyA9IHtcbiAgaW5pdGlhbFBhZ2V2aWV3OiAnYXV0b190cmFja19wYWdlX3ZpZXcnXG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cHM6Ly9kb2NzLnRyYWsuaW9cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cblRyYWtpby5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgd2luZG93LnRyYWsgPSB3aW5kb3cudHJhayB8fCBbXTtcbiAgd2luZG93LnRyYWsuaW8gPSB3aW5kb3cudHJhay5pbyB8fCB7fTtcbiAgd2luZG93LnRyYWsucHVzaCA9IHdpbmRvdy50cmFrLnB1c2ggfHwgZnVuY3Rpb24oKXt9O1xuICB3aW5kb3cudHJhay5pby5sb2FkID0gd2luZG93LnRyYWsuaW8ubG9hZCB8fCBmdW5jdGlvbihlKXt2YXIgciA9IGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3dpbmRvdy50cmFrLnB1c2goW2VdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpKTsgfTsgfSAsaT1bXCJpbml0aWFsaXplXCIsXCJpZGVudGlmeVwiLFwidHJhY2tcIixcImFsaWFzXCIsXCJjaGFubmVsXCIsXCJzb3VyY2VcIixcImhvc3RcIixcInByb3RvY29sXCIsXCJwYWdlX3ZpZXdcIl07IGZvciAodmFyIHM9MDtzPGkubGVuZ3RoO3MrKykgd2luZG93LnRyYWsuaW9baVtzXV09cihpW3NdKTsgd2luZG93LnRyYWsuaW8uaW5pdGlhbGl6ZS5hcHBseSh3aW5kb3cudHJhay5pbyxhcmd1bWVudHMpOyB9O1xuICB3aW5kb3cudHJhay5pby5sb2FkKG9wdGlvbnMudG9rZW4sIGFsaWFzKG9wdGlvbnMsIG9wdGlvbnNBbGlhc2VzKSk7XG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuVHJha2lvLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy50cmFrICYmIHdpbmRvdy50cmFrLmxvYWRlZCk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuVHJha2lvLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBjYXRlZ29yeSA9IHBhZ2UuY2F0ZWdvcnkoKTtcbiAgdmFyIHByb3BzID0gcGFnZS5wcm9wZXJ0aWVzKCk7XG4gIHZhciBuYW1lID0gcGFnZS5mdWxsTmFtZSgpO1xuXG4gIHdpbmRvdy50cmFrLmlvLnBhZ2Vfdmlldyhwcm9wcy5wYXRoLCBuYW1lIHx8IHByb3BzLnRpdGxlKTtcblxuICAvLyBuYW1lZCBwYWdlc1xuICBpZiAobmFtZSAmJiB0aGlzLm9wdGlvbnMudHJhY2tOYW1lZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKG5hbWUpKTtcbiAgfVxuXG4gIC8vIGNhdGVnb3JpemVkIHBhZ2VzXG4gIGlmIChjYXRlZ29yeSAmJiB0aGlzLm9wdGlvbnMudHJhY2tDYXRlZ29yaXplZFBhZ2VzKSB7XG4gICAgdGhpcy50cmFjayhwYWdlLnRyYWNrKGNhdGVnb3J5KSk7XG4gIH1cbn07XG5cbi8qKlxuICogVHJhaXQgYWxpYXNlcy5cbiAqXG4gKiBodHRwOi8vZG9jcy50cmFrLmlvL3Byb3BlcnRpZXMuaHRtbCNzcGVjaWFsXG4gKi9cblxudmFyIHRyYWl0QWxpYXNlcyA9IHtcbiAgYXZhdGFyOiAnYXZhdGFyX3VybCcsXG4gIGZpcnN0TmFtZTogJ2ZpcnN0X25hbWUnLFxuICBsYXN0TmFtZTogJ2xhc3RfbmFtZSdcbn07XG5cbi8qKlxuICogSWRlbnRpZnkuXG4gKlxuICogQHBhcmFtIHtJZGVudGlmeX0gaWRlbnRpZnlcbiAqL1xuXG5UcmFraW8ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKHRyYWl0QWxpYXNlcyk7XG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuXG4gIGlmIChpZCkge1xuICAgIHdpbmRvdy50cmFrLmlvLmlkZW50aWZ5KGlkLCB0cmFpdHMpO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy50cmFrLmlvLmlkZW50aWZ5KHRyYWl0cyk7XG4gIH1cbn07XG5cbi8qKlxuICogR3JvdXAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlkIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIChvcHRpb25hbClcbiAqXG4gKiBUT0RPOiBhZGQgZ3JvdXBcbiAqIFRPRE86IGFkZCBgdHJhaXQuY29tcGFueS9vcmdhbml6YXRpb25gIGZyb20gdHJhay5pbyBkb2NzIGh0dHA6Ly9kb2NzLnRyYWsuaW8vcHJvcGVydGllcy5odG1sI3NwZWNpYWxcbiAqL1xuXG4vKipcbiAqIFRyYWNrLlxuICpcbiAqIEBwYXJhbSB7VHJhY2t9IHRyYWNrXG4gKi9cblxuVHJha2lvLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uKHRyYWNrKXtcbiAgd2luZG93LnRyYWsuaW8udHJhY2sodHJhY2suZXZlbnQoKSwgdHJhY2sucHJvcGVydGllcygpKTtcbn07XG5cbi8qKlxuICogQWxpYXMuXG4gKlxuICogQHBhcmFtIHtBbGlhc30gYWxpYXNcbiAqL1xuXG5UcmFraW8ucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24oYWxpYXMpe1xuICBpZiAoIXdpbmRvdy50cmFrLmlvLmRpc3RpbmN0X2lkKSByZXR1cm47XG4gIHZhciBmcm9tID0gYWxpYXMuZnJvbSgpO1xuICB2YXIgdG8gPSBhbGlhcy50bygpO1xuXG4gIGlmICh0byA9PT0gd2luZG93LnRyYWsuaW8uZGlzdGluY3RfaWQoKSkgcmV0dXJuO1xuXG4gIGlmIChmcm9tKSB7XG4gICAgd2luZG93LnRyYWsuaW8uYWxpYXMoZnJvbSwgdG8pO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy50cmFrLmlvLmFsaWFzKHRvKTtcbiAgfVxufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbi8qKlxuICogSE9QLlxuICovXG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEV4cG9zZSBgVHdpdHRlckFkc2AuXG4gKi9cblxudmFyIFR3aXR0ZXJBZHMgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdUd2l0dGVyIEFkcycpXG4gIC5vcHRpb24oJ3BhZ2UnLCAnJylcbiAgLnRhZygnPGltZyBzcmM9XCIvL2FuYWx5dGljcy50d2l0dGVyLmNvbS9pL2Fkc2N0P3R4bl9pZD17eyBwaXhlbElkIH19JnBfaWQ9VHdpdHRlclwiLz4nKVxuICAubWFwcGluZygnZXZlbnRzJyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cblR3aXR0ZXJBZHMucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpe1xuICB0aGlzLnJlYWR5KCk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuVHdpdHRlckFkcy5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICBpZiAodGhpcy5vcHRpb25zLnBhZ2UpIHtcbiAgICB0aGlzLmxvYWQoeyBwaXhlbElkOiB0aGlzLm9wdGlvbnMucGFnZSB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cblR3aXR0ZXJBZHMucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHModHJhY2suZXZlbnQoKSk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgZWFjaChldmVudHMsIGZ1bmN0aW9uKHBpeGVsSWQpe1xuICAgIHNlbGYubG9hZCh7IHBpeGVsSWQ6IHBpeGVsSWQgfSk7XG4gIH0pO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHB1c2ggPSByZXF1aXJlKCdnbG9iYWwtcXVldWUnKSgnVXNlclZvaWNlJyk7XG52YXIgY29udmVydERhdGVzID0gcmVxdWlyZSgnY29udmVydC1kYXRlcycpO1xudmFyIHVuaXggPSByZXF1aXJlKCd0by11bml4LXRpbWVzdGFtcCcpO1xudmFyIGFsaWFzID0gcmVxdWlyZSgnYWxpYXMnKTtcbnZhciBjbG9uZSA9IHJlcXVpcmUoJ2Nsb25lJyk7XG5cbi8qKlxuICogRXhwb3NlIGBVc2VyVm9pY2VgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBVc2VyVm9pY2UgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdVc2VyVm9pY2UnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgnVXNlclZvaWNlJylcbiAgLmdsb2JhbCgnc2hvd0NsYXNzaWNXaWRnZXQnKVxuICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgLm9wdGlvbignY2xhc3NpYycsIGZhbHNlKVxuICAub3B0aW9uKCdmb3J1bUlkJywgbnVsbClcbiAgLm9wdGlvbignc2hvd1dpZGdldCcsIHRydWUpXG4gIC5vcHRpb24oJ21vZGUnLCAnY29udGFjdCcpXG4gIC5vcHRpb24oJ2FjY2VudENvbG9yJywgJyM0NDhkZDYnKVxuICAub3B0aW9uKCdzbWFydHZvdGUnLCB0cnVlKVxuICAub3B0aW9uKCd0cmlnZ2VyJywgbnVsbClcbiAgLm9wdGlvbigndHJpZ2dlclBvc2l0aW9uJywgJ2JvdHRvbS1yaWdodCcpXG4gIC5vcHRpb24oJ3RyaWdnZXJDb2xvcicsICcjZmZmZmZmJylcbiAgLm9wdGlvbigndHJpZ2dlckJhY2tncm91bmRDb2xvcicsICdyZ2JhKDQ2LCA0OSwgNTEsIDAuNiknKVxuICAvLyBCQUNLV0FSRFMgQ09NUEFUSUJJTElUWTogY2xhc3NpYyBvcHRpb25zXG4gIC5vcHRpb24oJ2NsYXNzaWNNb2RlJywgJ2Z1bGwnKVxuICAub3B0aW9uKCdwcmltYXJ5Q29sb3InLCAnI2NjNmQwMCcpXG4gIC5vcHRpb24oJ2xpbmtDb2xvcicsICcjMDA3ZGJmJylcbiAgLm9wdGlvbignZGVmYXVsdE1vZGUnLCAnc3VwcG9ydCcpXG4gIC5vcHRpb24oJ3RhYkxhYmVsJywgJ0ZlZWRiYWNrICYgU3VwcG9ydCcpXG4gIC5vcHRpb24oJ3RhYkNvbG9yJywgJyNjYzZkMDAnKVxuICAub3B0aW9uKCd0YWJQb3NpdGlvbicsICdtaWRkbGUtcmlnaHQnKVxuICAub3B0aW9uKCd0YWJJbnZlcnRlZCcsIGZhbHNlKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vd2lkZ2V0LnVzZXJ2b2ljZS5jb20ve3sgYXBpS2V5IH19LmpzXCI+Jyk7XG5cbi8qKlxuICogV2hlbiBpbiBcImNsYXNzaWNcIiBtb2RlLCBvbiBgY29uc3RydWN0YCBzd2FwIGFsbCBvZiB0aGUgbWV0aG9kIHRvIHBvaW50IHRvXG4gKiB0aGVpciBjbGFzc2ljIGNvdW50ZXJwYXJ0cy5cbiAqL1xuXG5Vc2VyVm9pY2Uub24oJ2NvbnN0cnVjdCcsIGZ1bmN0aW9uKGludGVncmF0aW9uKXtcbiAgaWYgKCFpbnRlZ3JhdGlvbi5vcHRpb25zLmNsYXNzaWMpIHJldHVybjtcbiAgaW50ZWdyYXRpb24uZ3JvdXAgPSB1bmRlZmluZWQ7XG4gIGludGVncmF0aW9uLmlkZW50aWZ5ID0gaW50ZWdyYXRpb24uaWRlbnRpZnlDbGFzc2ljO1xuICBpbnRlZ3JhdGlvbi5pbml0aWFsaXplID0gaW50ZWdyYXRpb24uaW5pdGlhbGl6ZUNsYXNzaWM7XG59KTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuVXNlclZvaWNlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICB2YXIgb3B0cyA9IGZvcm1hdE9wdGlvbnMob3B0aW9ucyk7XG4gIHB1c2goJ3NldCcsIG9wdHMpO1xuICBwdXNoKCdhdXRvcHJvbXB0Jywge30pO1xuICBpZiAob3B0aW9ucy5zaG93V2lkZ2V0KSB7XG4gICAgb3B0aW9ucy50cmlnZ2VyXG4gICAgICA/IHB1c2goJ2FkZFRyaWdnZXInLCBvcHRpb25zLnRyaWdnZXIsIG9wdHMpXG4gICAgICA6IHB1c2goJ2FkZFRyaWdnZXInLCBvcHRzKTtcbiAgfVxuXG4gIHRoaXMubG9hZCh0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuVXNlclZvaWNlLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5Vc2VyVm9pY2UgJiYgd2luZG93LlVzZXJWb2ljZS5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuVXNlclZvaWNlLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cyh7IGNyZWF0ZWQ6ICdjcmVhdGVkX2F0JyB9KTtcbiAgdHJhaXRzID0gY29udmVydERhdGVzKHRyYWl0cywgdW5peCk7XG4gIHB1c2goJ2lkZW50aWZ5JywgdHJhaXRzKTtcbn07XG5cbi8qKlxuICogR3JvdXAuXG4gKlxuICogQHBhcmFtIHtHcm91cH0gZ3JvdXBcbiAqL1xuXG5Vc2VyVm9pY2UucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24oZ3JvdXApe1xuICB2YXIgdHJhaXRzID0gZ3JvdXAudHJhaXRzKHsgY3JlYXRlZDogJ2NyZWF0ZWRfYXQnIH0pO1xuICB0cmFpdHMgPSBjb252ZXJ0RGF0ZXModHJhaXRzLCB1bml4KTtcbiAgcHVzaCgnaWRlbnRpZnknLCB7IGFjY291bnQ6IHRyYWl0cyB9KTtcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSAoY2xhc3NpYykuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlYWR5XG4gKi9cblxuVXNlclZvaWNlLnByb3RvdHlwZS5pbml0aWFsaXplQ2xhc3NpYyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICB3aW5kb3cuc2hvd0NsYXNzaWNXaWRnZXQgPSBzaG93Q2xhc3NpY1dpZGdldDsgLy8gcGFydCBvZiBwdWJsaWMgYXBpXG4gIGlmIChvcHRpb25zLnNob3dXaWRnZXQpIHNob3dDbGFzc2ljV2lkZ2V0KCdzaG93VGFiJywgZm9ybWF0Q2xhc3NpY09wdGlvbnMob3B0aW9ucykpO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5IChjbGFzc2ljKS5cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cblVzZXJWb2ljZS5wcm90b3R5cGUuaWRlbnRpZnlDbGFzc2ljID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICBwdXNoKCdzZXRDdXN0b21GaWVsZHMnLCBpZGVudGlmeS50cmFpdHMoKSk7XG59O1xuXG4vKipcbiAqIEZvcm1hdCB0aGUgb3B0aW9ucyBmb3IgVXNlclZvaWNlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0T3B0aW9ucyhvcHRpb25zKXtcbiAgcmV0dXJuIGFsaWFzKG9wdGlvbnMsIHtcbiAgICBmb3J1bUlkOiAnZm9ydW1faWQnLFxuICAgIGFjY2VudENvbG9yOiAnYWNjZW50X2NvbG9yJyxcbiAgICBzbWFydHZvdGU6ICdzbWFydHZvdGVfZW5hYmxlZCcsXG4gICAgdHJpZ2dlckNvbG9yOiAndHJpZ2dlcl9jb2xvcicsXG4gICAgdHJpZ2dlckJhY2tncm91bmRDb2xvcjogJ3RyaWdnZXJfYmFja2dyb3VuZF9jb2xvcicsXG4gICAgdHJpZ2dlclBvc2l0aW9uOiAndHJpZ2dlcl9wb3NpdGlvbidcbiAgfSk7XG59XG5cbi8qKlxuICogRm9ybWF0IHRoZSBjbGFzc2ljIG9wdGlvbnMgZm9yIFVzZXJWb2ljZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdENsYXNzaWNPcHRpb25zKG9wdGlvbnMpe1xuICByZXR1cm4gYWxpYXMob3B0aW9ucywge1xuICAgIGZvcnVtSWQ6ICdmb3J1bV9pZCcsXG4gICAgY2xhc3NpY01vZGU6ICdtb2RlJyxcbiAgICBwcmltYXJ5Q29sb3I6ICdwcmltYXJ5X2NvbG9yJyxcbiAgICB0YWJQb3NpdGlvbjogJ3RhYl9wb3NpdGlvbicsXG4gICAgdGFiQ29sb3I6ICd0YWJfY29sb3InLFxuICAgIGxpbmtDb2xvcjogJ2xpbmtfY29sb3InLFxuICAgIGRlZmF1bHRNb2RlOiAnZGVmYXVsdF9tb2RlJyxcbiAgICB0YWJMYWJlbDogJ3RhYl9sYWJlbCcsXG4gICAgdGFiSW52ZXJ0ZWQ6ICd0YWJfaW52ZXJ0ZWQnXG4gIH0pO1xufVxuXG4vKipcbiAqIFNob3cgdGhlIGNsYXNzaWMgdmVyc2lvbiBvZiB0aGUgVXNlclZvaWNlIHdpZGdldC4gVGhpcyBtZXRob2QgaXMgdXN1YWxseSBwYXJ0XG4gKiBvZiBVc2VyVm9pY2UgY2xhc3NpYydzIHB1YmxpYyBBUEkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgKCdzaG93VGFiJyBvciAnc2hvd0xpZ2h0Ym94JylcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIChvcHRpb25hbClcbiAqL1xuXG5mdW5jdGlvbiBzaG93Q2xhc3NpY1dpZGdldCh0eXBlLCBvcHRpb25zKXtcbiAgdHlwZSA9IHR5cGUgfHwgJ3Nob3dMaWdodGJveCc7XG4gIHB1c2godHlwZSwgJ2NsYXNzaWNfd2lkZ2V0Jywgb3B0aW9ucyk7XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBwdXNoID0gcmVxdWlyZSgnZ2xvYmFsLXF1ZXVlJykoJ192ZXJvcScpO1xudmFyIGNvb2tpZSA9IHJlcXVpcmUoJ2NvbXBvbmVudC9jb29raWUnKTtcbnZhciBvYmpDYXNlID0gcmVxdWlyZSgnb2JqLWNhc2UnKTtcblxuLyoqXG4gKiBFeHBvc2UgYFZlcm9gIGludGVncmF0aW9uLlxuICovXG5cbnZhciBWZXJvID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignVmVybycpXG4gIC5nbG9iYWwoJ192ZXJvcScpXG4gIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vZDNxeGVmNHJwNzBlbG0uY2xvdWRmcm9udC5uZXQvbS5qc1wiPicpO1xuXG4vKipcbiAqIEluaXRpYWxpemUuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dldHZlcm8vdmVyby1hcGkvYmxvYi9tYXN0ZXIvc2VjdGlvbnMvanMubWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cblZlcm8ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgLy8gY2xlYXIgZGVmYXVsdCBjb29raWUgc28gdmVybyBwYXJzZXMgY29ycmVjdGx5LlxuICAvLyB0aGlzIGlzIGZvciB0aGUgdGVzdHMuXG4gIC8vIGJhc2ljYWxseSwgdGhleSBoYXZlIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmxvYWQnKVxuICAvLyB3aGljaCB0aGVuIHNhdmVzIHRoZWlyIFwiY29tbWFuZF9zdG9yZVwiLCB3aGljaCBpcyBhbiBhcnJheS5cbiAgLy8gc28gd2UganVzdCB3YW50IHRvIGNyZWF0ZSB0aGF0IGluaXRpYWxseSBzbyB3ZSBjYW4gcmVsb2FkIHRoZSB0ZXN0cy5cbiAgaWYgKCFjb29raWUoJ19fdmVyb2M0JykpIGNvb2tpZSgnX192ZXJvYzQnLCAnW10nKTtcbiAgcHVzaCgnaW5pdCcsIHsgYXBpX2tleTogdGhpcy5vcHRpb25zLmFwaUtleSB9KTtcbiAgdGhpcy5sb2FkKHRoaXMucmVhZHkpO1xufTtcblxuLyoqXG4gKiBMb2FkZWQ/XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5WZXJvLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5fdmVyb3EgJiYgd2luZG93Ll92ZXJvcS5wdXNoICE9PSBBcnJheS5wcm90b3R5cGUucHVzaCk7XG59O1xuXG4vKipcbiAqIFBhZ2UuXG4gKlxuICogaHR0cHM6Ly93d3cuZ2V0dmVyby5jb20va25vd2xlZGdlLWJhc2UjL3F1ZXN0aW9ucy83MTc2OC1Eb2VzLVZlcm8tdHJhY2stcGFnZXZpZXdzXG4gKlxuICogQHBhcmFtIHtQYWdlfSBwYWdlXG4gKi9cblxuVmVyby5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICBwdXNoKCd0cmFja1BhZ2V2aWV3Jyk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXR2ZXJvL3Zlcm8tYXBpL2Jsb2IvbWFzdGVyL3NlY3Rpb25zL2pzLm1kI3VzZXItaWRlbnRpZmljYXRpb25cbiAqXG4gKiBAcGFyYW0ge0lkZW50aWZ5fSBpZGVudGlmeVxuICovXG5cblZlcm8ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24oaWRlbnRpZnkpe1xuICB2YXIgdHJhaXRzID0gaWRlbnRpZnkudHJhaXRzKCk7XG4gIHZhciBlbWFpbCA9IGlkZW50aWZ5LmVtYWlsKCk7XG4gIHZhciBpZCA9IGlkZW50aWZ5LnVzZXJJZCgpO1xuICBpZiAoIWlkIHx8ICFlbWFpbCkgcmV0dXJuOyAvLyBib3RoIHJlcXVpcmVkXG4gIHB1c2goJ3VzZXInLCB0cmFpdHMpO1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ2V0dmVyby92ZXJvLWFwaS9ibG9iL21hc3Rlci9zZWN0aW9ucy9qcy5tZCN0cmFja2luZy1ldmVudHNcbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cblZlcm8ucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24odHJhY2spe1xuICB2YXIgcmVnZXggPSAvW3VVXW5zdWJzY3JpYmUvO1xuXG4gIGlmICh0cmFjay5ldmVudCgpLm1hdGNoKHJlZ2V4KSkge1xuICAgIHB1c2goJ3Vuc3Vic2NyaWJlJywgeyBpZDogdHJhY2sucHJvcGVydGllcygpLmlkIH0pO1xuICB9IGVsc2Uge1xuICAgIHB1c2goJ3RyYWNrJywgdHJhY2suZXZlbnQoKSwgdHJhY2sucHJvcGVydGllcygpKTtcbiAgfVxufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRpY2sgPSByZXF1aXJlKCduZXh0LXRpY2snKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xuXG4vKipcbiAqIEV4cG9zZSBgVldPYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgVldPID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignVmlzdWFsIFdlYnNpdGUgT3B0aW1pemVyJylcbiAgLm9wdGlvbigncmVwbGF5JywgdHJ1ZSk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vdjIudmlzdWFsd2Vic2l0ZW9wdGltaXplci5jb20vdG9vbHMvZ2V0X3RyYWNraW5nX2NvZGUucGhwXG4gKi9cblxuVldPLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMub3B0aW9ucy5yZXBsYXkpIHRoaXMucmVwbGF5KCk7XG4gIHRoaXMucmVhZHkoKTtcbn07XG5cbi8qKlxuICogUmVwbGF5IHRoZSBleHBlcmltZW50cyB0aGUgdXNlciBoYXMgc2VlbiBhcyB0cmFpdHMgdG8gYWxsIG90aGVyIGludGVncmF0aW9ucy5cbiAqIFdhaXQgZm9yIHRoZSBuZXh0IHRpY2sgdG8gcmVwbGF5IHNvIHRoYXQgdGhlIGBhbmFseXRpY3NgIG9iamVjdCBhbmQgYWxsIG9mXG4gKiB0aGUgaW50ZWdyYXRpb25zIGFyZSBmdWxseSBpbml0aWFsaXplZC5cbiAqL1xuXG5WV08ucHJvdG90eXBlLnJlcGxheSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBhbmFseXRpY3MgPSB0aGlzLmFuYWx5dGljcztcbiAgdGljayhmdW5jdGlvbigpe1xuICAgIGV4cGVyaW1lbnRzKGZ1bmN0aW9uKGVyciwgdHJhaXRzKXtcbiAgICAgIGlmICh0cmFpdHMpIGFuYWx5dGljcy5pZGVudGlmeSh0cmFpdHMpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbi8qKlxuICogR2V0IGRpY3Rpb25hcnkgb2YgZXhwZXJpbWVudCBrZXlzIGFuZCB2YXJpYXRpb25zLlxuICpcbiAqIGh0dHA6Ly92aXN1YWx3ZWJzaXRlb3B0aW1pemVyLmNvbS9rbm93bGVkZ2UvaW50ZWdyYXRpb24tb2YtdndvLXdpdGgta2lzc21ldHJpY3MvXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBleHBlcmltZW50cyhmbil7XG4gIGVucXVldWUoZnVuY3Rpb24oKXtcbiAgICB2YXIgZGF0YSA9IHt9O1xuICAgIHZhciBpZHMgPSB3aW5kb3cuX3Z3b19leHBfaWRzO1xuICAgIGlmICghaWRzKSByZXR1cm4gZm4oKTtcbiAgICBlYWNoKGlkcywgZnVuY3Rpb24oaWQpe1xuICAgICAgdmFyIG5hbWUgPSB2YXJpYXRpb24oaWQpO1xuICAgICAgaWYgKG5hbWUpIGRhdGFbJ0V4cGVyaW1lbnQ6ICcgKyBpZF0gPSBuYW1lO1xuICAgIH0pO1xuICAgIGZuKG51bGwsIGRhdGEpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBBZGQgYSBgZm5gIHRvIHRoZSBWV08gcXVldWUsIGNyZWF0aW5nIG9uZSBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuZnVuY3Rpb24gZW5xdWV1ZShmbil7XG4gIHdpbmRvdy5fdmlzX29wdF9xdWV1ZSA9IHdpbmRvdy5fdmlzX29wdF9xdWV1ZSB8fCBbXTtcbiAgd2luZG93Ll92aXNfb3B0X3F1ZXVlLnB1c2goZm4pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgY2hvc2VuIHZhcmlhdGlvbidzIG5hbWUgZnJvbSBhbiBleHBlcmltZW50IGBpZGAuXG4gKlxuICogaHR0cDovL3Zpc3VhbHdlYnNpdGVvcHRpbWl6ZXIuY29tL2tub3dsZWRnZS9pbnRlZ3JhdGlvbi1vZi12d28td2l0aC1raXNzbWV0cmljcy9cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB2YXJpYXRpb24oaWQpe1xuICB2YXIgZXhwZXJpbWVudHMgPSB3aW5kb3cuX3Z3b19leHA7XG4gIGlmICghZXhwZXJpbWVudHMpIHJldHVybiBudWxsO1xuICB2YXIgZXhwZXJpbWVudCA9IGV4cGVyaW1lbnRzW2lkXTtcbiAgdmFyIHZhcmlhdGlvbklkID0gZXhwZXJpbWVudC5jb21iaW5hdGlvbl9jaG9zZW47XG4gIHJldHVybiB2YXJpYXRpb25JZCA/IGV4cGVyaW1lbnQuY29tYl9uW3ZhcmlhdGlvbklkXSA6IG51bGw7XG59XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB1c2VIdHRwcyA9IHJlcXVpcmUoJ3VzZS1odHRwcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgV2ViRW5nYWdlYCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgV2ViRW5nYWdlID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignV2ViRW5nYWdlJylcbiAgLmFzc3VtZXNQYWdldmlldygpXG4gIC5nbG9iYWwoJ193ZXEnKVxuICAuZ2xvYmFsKCd3ZWJlbmdhZ2UnKVxuICAub3B0aW9uKCd3aWRnZXRWZXJzaW9uJywgJzQuMCcpXG4gIC5vcHRpb24oJ2xpY2Vuc2VDb2RlJywgJycpXG4gIC50YWcoJ2h0dHAnLCAnPHNjcmlwdCBzcmM9XCJodHRwOi8vY2RuLndpZGdldHMud2ViZW5nYWdlLmNvbS9qcy93aWRnZXQvd2ViZW5nYWdlLW1pbi12LTQuMC5qc1wiPicpXG4gIC50YWcoJ2h0dHBzJywgJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9zc2wud2lkZ2V0cy53ZWJlbmdhZ2UuY29tL2pzL3dpZGdldC93ZWJlbmdhZ2UtbWluLXYtNC4wLmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICovXG5cbldlYkVuZ2FnZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBhZ2Upe1xuICB2YXIgX3dlcSA9IHdpbmRvdy5fd2VxID0gd2luZG93Ll93ZXEgfHwge307XG4gIF93ZXFbJ3dlYmVuZ2FnZS5saWNlbnNlQ29kZSddID0gdGhpcy5vcHRpb25zLmxpY2Vuc2VDb2RlO1xuICBfd2VxWyd3ZWJlbmdhZ2Uud2lkZ2V0VmVyc2lvbiddID0gdGhpcy5vcHRpb25zLndpZGdldFZlcnNpb247XG4gIHZhciBuYW1lID0gdXNlSHR0cHMoKSA/ICdodHRwcycgOiAnaHR0cCc7XG4gIHRoaXMubG9hZChuYW1lLCB0aGlzLnJlYWR5KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuV2ViRW5nYWdlLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgd2luZG93LndlYmVuZ2FnZTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciBzbmFrZSA9IHJlcXVpcmUoJ3RvLXNuYWtlLWNhc2UnKTtcbnZhciBpc0VtYWlsID0gcmVxdWlyZSgnaXMtZW1haWwnKTtcbnZhciBleHRlbmQgPSByZXF1aXJlKCdleHRlbmQnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xudmFyIHR5cGUgPSByZXF1aXJlKCd0eXBlJyk7XG5cbi8qKlxuICogRXhwb3NlIGBXb29wcmFgIGludGVncmF0aW9uLlxuICovXG5cbnZhciBXb29wcmEgPSBtb2R1bGUuZXhwb3J0cyA9IGludGVncmF0aW9uKCdXb29wcmEnKVxuICAuZ2xvYmFsKCd3b29wcmEnKVxuICAub3B0aW9uKCdkb21haW4nLCAnJylcbiAgLm9wdGlvbignY29va2llTmFtZScsICd3b29UcmFja2VyJylcbiAgLm9wdGlvbignY29va2llRG9tYWluJywgbnVsbClcbiAgLm9wdGlvbignY29va2llUGF0aCcsICcvJylcbiAgLm9wdGlvbigncGluZycsIHRydWUpXG4gIC5vcHRpb24oJ3BpbmdJbnRlcnZhbCcsIDEyMDAwKVxuICAub3B0aW9uKCdpZGxlVGltZW91dCcsIDMwMDAwMClcbiAgLm9wdGlvbignZG93bmxvYWRUcmFja2luZycsIHRydWUpXG4gIC5vcHRpb24oJ291dGdvaW5nVHJhY2tpbmcnLCB0cnVlKVxuICAub3B0aW9uKCdvdXRnb2luZ0lnbm9yZVN1YmRvbWFpbicsIHRydWUpXG4gIC5vcHRpb24oJ2Rvd25sb2FkUGF1c2UnLCAyMDApXG4gIC5vcHRpb24oJ291dGdvaW5nUGF1c2UnLCA0MDApXG4gIC5vcHRpb24oJ2lnbm9yZVF1ZXJ5VXJsJywgdHJ1ZSlcbiAgLm9wdGlvbignaGlkZUNhbXBhaWduJywgZmFsc2UpXG4gIC50YWcoJzxzY3JpcHQgc3JjPVwiLy9zdGF0aWMud29vcHJhLmNvbS9qcy93LmpzXCI+Jyk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZS5cbiAqXG4gKiBodHRwOi8vd3d3Lndvb3ByYS5jb20vZG9jcy9zZXR1cC9qYXZhc2NyaXB0LXRyYWNraW5nL1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlXG4gKi9cblxuV29vcHJhLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ocGFnZSl7XG4gIChmdW5jdGlvbiAoKSB7dmFyIGksIHMsIHosIHcgPSB3aW5kb3csIGQgPSBkb2N1bWVudCwgYSA9IGFyZ3VtZW50cywgcSA9ICdzY3JpcHQnLCBmID0gWydjb25maWcnLCAndHJhY2snLCAnaWRlbnRpZnknLCAndmlzaXQnLCAncHVzaCcsICdjYWxsJ10sIGMgPSBmdW5jdGlvbiAoKSB7dmFyIGksIHNlbGYgPSB0aGlzOyBzZWxmLl9lID0gW107IGZvciAoaSA9IDA7IGkgPCBmLmxlbmd0aDsgaSsrKSB7KGZ1bmN0aW9uIChmKSB7c2VsZltmXSA9IGZ1bmN0aW9uICgpIHtzZWxmLl9lLnB1c2goW2ZdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKSk7IHJldHVybiBzZWxmOyB9OyB9KShmW2ldKTsgfSB9OyB3Ll93ID0gdy5fdyB8fCB7fTsgZm9yIChpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsgdy5fd1thW2ldXSA9IHdbYVtpXV0gPSB3W2FbaV1dIHx8IG5ldyBjKCk7IH0gfSkoJ3dvb3ByYScpO1xuICB0aGlzLmxvYWQodGhpcy5yZWFkeSk7XG4gIGVhY2godGhpcy5vcHRpb25zLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgICBrZXkgPSBzbmFrZShrZXkpO1xuICAgIGlmIChudWxsID09IHZhbHVlKSByZXR1cm47XG4gICAgaWYgKCcnID09PSB2YWx1ZSkgcmV0dXJuO1xuICAgIHdpbmRvdy53b29wcmEuY29uZmlnKGtleSwgdmFsdWUpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuV29vcHJhLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy53b29wcmEgJiYgd2luZG93Lndvb3ByYS5sb2FkZWQpO1xufTtcblxuLyoqXG4gKiBQYWdlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjYXRlZ29yeSAob3B0aW9uYWwpXG4gKi9cblxuV29vcHJhLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24ocGFnZSl7XG4gIHZhciBwcm9wcyA9IHBhZ2UucHJvcGVydGllcygpO1xuICB2YXIgbmFtZSA9IHBhZ2UuZnVsbE5hbWUoKTtcbiAgaWYgKG5hbWUpIHByb3BzLnRpdGxlID0gbmFtZTtcbiAgd2luZG93Lndvb3ByYS50cmFjaygncHYnLCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIElkZW50aWZ5LlxuICpcbiAqIEBwYXJhbSB7SWRlbnRpZnl9IGlkZW50aWZ5XG4gKi9cblxuV29vcHJhLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uKGlkZW50aWZ5KXtcbiAgdmFyIHRyYWl0cyA9IGlkZW50aWZ5LnRyYWl0cygpO1xuICBpZiAoaWRlbnRpZnkubmFtZSgpKSB0cmFpdHMubmFtZSA9IGlkZW50aWZ5Lm5hbWUoKTtcbiAgd2luZG93Lndvb3ByYS5pZGVudGlmeSh0cmFpdHMpLnB1c2goKTsgLy8gYHB1c2hgIHNlbmRzIGl0IG9mZiBhc3luY1xufTtcblxuLyoqXG4gKiBUcmFjay5cbiAqXG4gKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICovXG5cbldvb3ByYS5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbih0cmFjayl7XG4gIHdpbmRvdy53b29wcmEudHJhY2sodHJhY2suZXZlbnQoKSwgdHJhY2sucHJvcGVydGllcygpKTtcbn07XG4iLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0aWNrID0gcmVxdWlyZSgnbmV4dC10aWNrJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJ2JpbmQnKTtcbnZhciB3aGVuID0gcmVxdWlyZSgnd2hlbicpO1xuXG4vKipcbiAqIEV4cG9zZSBgWWFuZGV4YCBpbnRlZ3JhdGlvbi5cbiAqL1xuXG52YXIgWWFuZGV4ID0gbW9kdWxlLmV4cG9ydHMgPSBpbnRlZ3JhdGlvbignWWFuZGV4IE1ldHJpY2EnKVxuICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgLmdsb2JhbCgneWFuZGV4X21ldHJpa2FfY2FsbGJhY2tzJylcbiAgLmdsb2JhbCgnWWEnKVxuICAub3B0aW9uKCdjb3VudGVySWQnLCBudWxsKVxuICAub3B0aW9uKCdjbGlja21hcCcsIGZhbHNlKVxuICAub3B0aW9uKCd3ZWJ2aXNvcicsIGZhbHNlKVxuICAudGFnKCc8c2NyaXB0IHNyYz1cIi8vbWMueWFuZGV4LnJ1L21ldHJpa2Evd2F0Y2guanNcIj4nKTtcblxuLyoqXG4gKiBJbml0aWFsaXplLlxuICpcbiAqIGh0dHA6Ly9hcGkueWFuZGV4LmNvbS9tZXRyaWthL1xuICogaHR0cHM6Ly9tZXRyaWNhLnlhbmRleC5jb20vMjI1MjIzNTE/c3RlcD0yI3RhYj1jb2RlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2VcbiAqL1xuXG5ZYW5kZXgucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihwYWdlKXtcbiAgdmFyIGlkID0gdGhpcy5vcHRpb25zLmNvdW50ZXJJZDtcbiAgdmFyIGNsaWNrbWFwID0gdGhpcy5vcHRpb25zLmNsaWNrbWFwO1xuICB2YXIgd2Vidmlzb3IgPSB0aGlzLm9wdGlvbnMud2Vidmlzb3I7XG5cbiAgcHVzaChmdW5jdGlvbigpe1xuICAgIHdpbmRvd1sneWFDb3VudGVyJyArIGlkXSA9IG5ldyB3aW5kb3cuWWEuTWV0cmlrYSh7XG4gICAgICBpZDogaWQsXG4gICAgICBjbGlja21hcDogY2xpY2ttYXAsXG4gICAgICB3ZWJ2aXNvcjogd2Vidmlzb3JcbiAgICB9KTtcbiAgfSk7XG5cbiAgdmFyIGxvYWRlZCA9IGJpbmQodGhpcywgdGhpcy5sb2FkZWQpO1xuICB2YXIgcmVhZHkgPSB0aGlzLnJlYWR5O1xuICB0aGlzLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB3aGVuKGxvYWRlZCwgZnVuY3Rpb24oKXtcbiAgICAgIHRpY2socmVhZHkpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZGVkP1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuWWFuZGV4LnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gISEgKHdpbmRvdy5ZYSAmJiB3aW5kb3cuWWEuTWV0cmlrYSk7XG59O1xuXG4vKipcbiAqIFB1c2ggYSBuZXcgY2FsbGJhY2sgb24gdGhlIGdsb2JhbCBZYW5kZXggcXVldWUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqL1xuXG5mdW5jdGlvbiBwdXNoKGNhbGxiYWNrKXtcbiAgd2luZG93LnlhbmRleF9tZXRyaWthX2NhbGxiYWNrcyA9IHdpbmRvdy55YW5kZXhfbWV0cmlrYV9jYWxsYmFja3MgfHwgW107XG4gIHdpbmRvdy55YW5kZXhfbWV0cmlrYV9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG59XG4iLCJcbnZhciBhZnRlciA9IHJlcXVpcmUoJ2FmdGVyJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJ2JpbmQnKTtcbnZhciBjYWxsYmFjayA9IHJlcXVpcmUoJ2NhbGxiYWNrJyk7XG52YXIgY2Fub25pY2FsID0gcmVxdWlyZSgnY2Fub25pY2FsJyk7XG52YXIgY2xvbmUgPSByZXF1aXJlKCdjbG9uZScpO1xudmFyIGNvb2tpZSA9IHJlcXVpcmUoJy4vY29va2llJyk7XG52YXIgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnZGVmYXVsdHMnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xudmFyIEVtaXR0ZXIgPSByZXF1aXJlKCdlbWl0dGVyJyk7XG52YXIgZ3JvdXAgPSByZXF1aXJlKCcuL2dyb3VwJyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xudmFyIGlzRW1haWwgPSByZXF1aXJlKCdpcy1lbWFpbCcpO1xudmFyIGlzTWV0YSA9IHJlcXVpcmUoJ2lzLW1ldGEnKTtcbnZhciBuZXdEYXRlID0gcmVxdWlyZSgnbmV3LWRhdGUnKTtcbnZhciBvbiA9IHJlcXVpcmUoJ2V2ZW50JykuYmluZDtcbnZhciBwcmV2ZW50ID0gcmVxdWlyZSgncHJldmVudCcpO1xudmFyIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTtcbnZhciBzaXplID0gcmVxdWlyZSgnb2JqZWN0JykubGVuZ3RoO1xudmFyIHN0b3JlID0gcmVxdWlyZSgnLi9zdG9yZScpO1xudmFyIHVybCA9IHJlcXVpcmUoJ3VybCcpO1xudmFyIHVzZXIgPSByZXF1aXJlKCcuL3VzZXInKTtcbnZhciBGYWNhZGUgPSByZXF1aXJlKCdmYWNhZGUnKTtcbnZhciBJZGVudGlmeSA9IEZhY2FkZS5JZGVudGlmeTtcbnZhciBHcm91cCA9IEZhY2FkZS5Hcm91cDtcbnZhciBBbGlhcyA9IEZhY2FkZS5BbGlhcztcbnZhciBUcmFjayA9IEZhY2FkZS5UcmFjaztcbnZhciBQYWdlID0gRmFjYWRlLlBhZ2U7XG5cbi8qKlxuICogRXhwb3NlIGBBbmFseXRpY3NgLlxuICovXG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IEFuYWx5dGljcztcblxuLyoqXG4gKiBFeHBvc2UgYGNvb2tpZWBcbiAqL1xuXG5leHBvcnRzLmNvb2tpZSA9IGNvb2tpZTtcbmV4cG9ydHMuc3RvcmUgPSBzdG9yZTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBBbmFseXRpY3NgIGluc3RhbmNlLlxuICovXG5cbmZ1bmN0aW9uIEFuYWx5dGljcyAoKSB7XG4gIHRoaXMuSW50ZWdyYXRpb25zID0ge307XG4gIHRoaXMuX2ludGVncmF0aW9ucyA9IHt9O1xuICB0aGlzLl9yZWFkaWVkID0gZmFsc2U7XG4gIHRoaXMuX3RpbWVvdXQgPSAzMDA7XG4gIHRoaXMuX3VzZXIgPSB1c2VyOyAvLyBCQUNLV0FSRFMgQ09NUEFUSUJJTElUWVxuICBiaW5kLmFsbCh0aGlzKTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMub24oJ2luaXRpYWxpemUnLCBmdW5jdGlvbihzZXR0aW5ncywgb3B0aW9ucyl7XG4gICAgaWYgKG9wdGlvbnMuaW5pdGlhbFBhZ2V2aWV3KSBzZWxmLnBhZ2UoKTtcbiAgfSk7XG5cbiAgdGhpcy5vbignaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgc2VsZi5fcGFyc2VRdWVyeSgpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBFdmVudCBFbWl0dGVyLlxuICovXG5cbkVtaXR0ZXIoQW5hbHl0aWNzLnByb3RvdHlwZSk7XG5cbi8qKlxuICogVXNlIGEgYHBsdWdpbmAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGx1Z2luXG4gKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gKi9cblxuQW5hbHl0aWNzLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG4gIHBsdWdpbih0aGlzKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIERlZmluZSBhIG5ldyBgSW50ZWdyYXRpb25gLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IEludGVncmF0aW9uXG4gKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gKi9cblxuQW5hbHl0aWNzLnByb3RvdHlwZS5hZGRJbnRlZ3JhdGlvbiA9IGZ1bmN0aW9uIChJbnRlZ3JhdGlvbikge1xuICB2YXIgbmFtZSA9IEludGVncmF0aW9uLnByb3RvdHlwZS5uYW1lO1xuICBpZiAoIW5hbWUpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2F0dGVtcHRlZCB0byBhZGQgYW4gaW52YWxpZCBpbnRlZ3JhdGlvbicpO1xuICB0aGlzLkludGVncmF0aW9uc1tuYW1lXSA9IEludGVncmF0aW9uO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB3aXRoIHRoZSBnaXZlbiBpbnRlZ3JhdGlvbiBgc2V0dGluZ3NgIGFuZCBgb3B0aW9uc2AuIEFsaWFzZWQgdG9cbiAqIGBpbml0YCBmb3IgY29udmVuaWVuY2UuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAob3B0aW9uYWwpXG4gKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gKi9cblxuQW5hbHl0aWNzLnByb3RvdHlwZS5pbml0ID1cbkFuYWx5dGljcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChzZXR0aW5ncywgb3B0aW9ucykge1xuICBzZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICB0aGlzLl9vcHRpb25zKG9wdGlvbnMpO1xuICB0aGlzLl9yZWFkaWVkID0gZmFsc2U7XG5cbiAgLy8gY2xlYW4gdW5rbm93biBpbnRlZ3JhdGlvbnMgZnJvbSBzZXR0aW5nc1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGVhY2goc2V0dGluZ3MsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIEludGVncmF0aW9uID0gc2VsZi5JbnRlZ3JhdGlvbnNbbmFtZV07XG4gICAgaWYgKCFJbnRlZ3JhdGlvbikgZGVsZXRlIHNldHRpbmdzW25hbWVdO1xuICB9KTtcblxuICAvLyBhZGQgaW50ZWdyYXRpb25zXG4gIGVhY2goc2V0dGluZ3MsIGZ1bmN0aW9uIChuYW1lLCBvcHRzKSB7XG4gICAgdmFyIEludGVncmF0aW9uID0gc2VsZi5JbnRlZ3JhdGlvbnNbbmFtZV07XG4gICAgdmFyIGludGVncmF0aW9uID0gbmV3IEludGVncmF0aW9uKGNsb25lKG9wdHMpKTtcbiAgICBzZWxmLmFkZChpbnRlZ3JhdGlvbik7XG4gIH0pO1xuXG4gIHZhciBpbnRlZ3JhdGlvbnMgPSB0aGlzLl9pbnRlZ3JhdGlvbnM7XG5cbiAgLy8gbG9hZCB1c2VyIG5vdyB0aGF0IG9wdGlvbnMgYXJlIHNldFxuICB1c2VyLmxvYWQoKTtcbiAgZ3JvdXAubG9hZCgpO1xuXG4gIC8vIG1ha2UgcmVhZHkgY2FsbGJhY2tcbiAgdmFyIHJlYWR5ID0gYWZ0ZXIoc2l6ZShpbnRlZ3JhdGlvbnMpLCBmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fcmVhZGllZCA9IHRydWU7XG4gICAgc2VsZi5lbWl0KCdyZWFkeScpO1xuICB9KTtcblxuICAvLyBpbml0aWFsaXplIGludGVncmF0aW9ucywgcGFzc2luZyByZWFkeVxuICBlYWNoKGludGVncmF0aW9ucywgZnVuY3Rpb24gKG5hbWUsIGludGVncmF0aW9uKSB7XG4gICAgaWYgKG9wdGlvbnMuaW5pdGlhbFBhZ2V2aWV3ICYmIGludGVncmF0aW9uLm9wdGlvbnMuaW5pdGlhbFBhZ2V2aWV3ID09PSBmYWxzZSkge1xuICAgICAgaW50ZWdyYXRpb24ucGFnZSA9IGFmdGVyKDIsIGludGVncmF0aW9uLnBhZ2UpO1xuICAgIH1cblxuICAgIGludGVncmF0aW9uLmFuYWx5dGljcyA9IHNlbGY7XG4gICAgaW50ZWdyYXRpb24ub25jZSgncmVhZHknLCByZWFkeSk7XG4gICAgaW50ZWdyYXRpb24uaW5pdGlhbGl6ZSgpO1xuICB9KTtcblxuICAvLyBiYWNrd2FyZHMgY29tcGF0IHdpdGggYW5ndWxhciBwbHVnaW4uXG4gIC8vIFRPRE86IHJlbW92ZVxuICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcblxuICB0aGlzLmVtaXQoJ2luaXRpYWxpemUnLCBzZXR0aW5ncywgb3B0aW9ucyk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGQgYW4gaW50ZWdyYXRpb24uXG4gKlxuICogQHBhcmFtIHtJbnRlZ3JhdGlvbn0gaW50ZWdyYXRpb25cbiAqL1xuXG5BbmFseXRpY3MucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGludGVncmF0aW9uKXtcbiAgdGhpcy5faW50ZWdyYXRpb25zW2ludGVncmF0aW9uLm5hbWVdID0gaW50ZWdyYXRpb247XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBJZGVudGlmeSBhIHVzZXIgYnkgb3B0aW9uYWwgYGlkYCBhbmQgYHRyYWl0c2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlkIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSB0cmFpdHMgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gKG9wdGlvbmFsKVxuICogQHJldHVybiB7QW5hbHl0aWNzfVxuICovXG5cbkFuYWx5dGljcy5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAoaWQsIHRyYWl0cywgb3B0aW9ucywgZm4pIHtcbiAgaWYgKGlzLmZuKG9wdGlvbnMpKSBmbiA9IG9wdGlvbnMsIG9wdGlvbnMgPSBudWxsO1xuICBpZiAoaXMuZm4odHJhaXRzKSkgZm4gPSB0cmFpdHMsIG9wdGlvbnMgPSBudWxsLCB0cmFpdHMgPSBudWxsO1xuICBpZiAoaXMub2JqZWN0KGlkKSkgb3B0aW9ucyA9IHRyYWl0cywgdHJhaXRzID0gaWQsIGlkID0gdXNlci5pZCgpO1xuXG5cbiAgLy8gY2xvbmUgdHJhaXRzIGJlZm9yZSB3ZSBtYW5pcHVsYXRlIHNvIHdlIGRvbid0IGRvIGFueXRoaW5nIHVuY291dGgsIGFuZCB0YWtlXG4gIC8vIGZyb20gYHVzZXJgIHNvIHRoYXQgd2UgY2FycnlvdmVyIGFub255bW91cyB0cmFpdHNcbiAgdXNlci5pZGVudGlmeShpZCwgdHJhaXRzKTtcbiAgaWQgPSB1c2VyLmlkKCk7XG4gIHRyYWl0cyA9IHVzZXIudHJhaXRzKCk7XG5cbiAgdGhpcy5faW52b2tlKCdpZGVudGlmeScsIG1lc3NhZ2UoSWRlbnRpZnksIHtcbiAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgIHRyYWl0czogdHJhaXRzLFxuICAgIHVzZXJJZDogaWRcbiAgfSkpO1xuXG4gIC8vIGVtaXRcbiAgdGhpcy5lbWl0KCdpZGVudGlmeScsIGlkLCB0cmFpdHMsIG9wdGlvbnMpO1xuICB0aGlzLl9jYWxsYmFjayhmbik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGN1cnJlbnQgdXNlci5cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuQW5hbHl0aWNzLnByb3RvdHlwZS51c2VyID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdXNlcjtcbn07XG5cbi8qKlxuICogSWRlbnRpZnkgYSBncm91cCBieSBvcHRpb25hbCBgaWRgIGFuZCBgdHJhaXRzYC4gT3IsIGlmIG5vIGFyZ3VtZW50cyBhcmVcbiAqIHN1cHBsaWVkLCByZXR1cm4gdGhlIGN1cnJlbnQgZ3JvdXAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlkIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSB0cmFpdHMgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gKG9wdGlvbmFsKVxuICogQHJldHVybiB7QW5hbHl0aWNzIG9yIE9iamVjdH1cbiAqL1xuXG5BbmFseXRpY3MucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24gKGlkLCB0cmFpdHMsIG9wdGlvbnMsIGZuKSB7XG4gIGlmICgwID09PSBhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZ3JvdXA7XG4gIGlmIChpcy5mbihvcHRpb25zKSkgZm4gPSBvcHRpb25zLCBvcHRpb25zID0gbnVsbDtcbiAgaWYgKGlzLmZuKHRyYWl0cykpIGZuID0gdHJhaXRzLCBvcHRpb25zID0gbnVsbCwgdHJhaXRzID0gbnVsbDtcbiAgaWYgKGlzLm9iamVjdChpZCkpIG9wdGlvbnMgPSB0cmFpdHMsIHRyYWl0cyA9IGlkLCBpZCA9IGdyb3VwLmlkKCk7XG5cblxuICAvLyBncmFiIGZyb20gZ3JvdXAgYWdhaW4gdG8gbWFrZSBzdXJlIHdlJ3JlIHRha2luZyBmcm9tIHRoZSBzb3VyY2VcbiAgZ3JvdXAuaWRlbnRpZnkoaWQsIHRyYWl0cyk7XG4gIGlkID0gZ3JvdXAuaWQoKTtcbiAgdHJhaXRzID0gZ3JvdXAudHJhaXRzKCk7XG5cbiAgdGhpcy5faW52b2tlKCdncm91cCcsIG1lc3NhZ2UoR3JvdXAsIHtcbiAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgIHRyYWl0czogdHJhaXRzLFxuICAgIGdyb3VwSWQ6IGlkXG4gIH0pKTtcblxuICB0aGlzLmVtaXQoJ2dyb3VwJywgaWQsIHRyYWl0cywgb3B0aW9ucyk7XG4gIHRoaXMuX2NhbGxiYWNrKGZuKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFRyYWNrIGFuIGBldmVudGAgdGhhdCBhIHVzZXIgaGFzIHRyaWdnZXJlZCB3aXRoIG9wdGlvbmFsIGBwcm9wZXJ0aWVzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIChvcHRpb25hbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIChvcHRpb25hbClcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIChvcHRpb25hbClcbiAqIEByZXR1cm4ge0FuYWx5dGljc31cbiAqL1xuXG5BbmFseXRpY3MucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24gKGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBmbikge1xuICBpZiAoaXMuZm4ob3B0aW9ucykpIGZuID0gb3B0aW9ucywgb3B0aW9ucyA9IG51bGw7XG4gIGlmIChpcy5mbihwcm9wZXJ0aWVzKSkgZm4gPSBwcm9wZXJ0aWVzLCBvcHRpb25zID0gbnVsbCwgcHJvcGVydGllcyA9IG51bGw7XG5cbiAgdGhpcy5faW52b2tlKCd0cmFjaycsIG1lc3NhZ2UoVHJhY2ssIHtcbiAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgZXZlbnQ6IGV2ZW50XG4gIH0pKTtcblxuICB0aGlzLmVtaXQoJ3RyYWNrJywgZXZlbnQsIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xuICB0aGlzLl9jYWxsYmFjayhmbik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBIZWxwZXIgbWV0aG9kIHRvIHRyYWNrIGFuIG91dGJvdW5kIGxpbmsgdGhhdCB3b3VsZCBub3JtYWxseSBuYXZpZ2F0ZSBhd2F5XG4gKiBmcm9tIHRoZSBwYWdlIGJlZm9yZSB0aGUgYW5hbHl0aWNzIGNhbGxzIHdlcmUgc2VudC5cbiAqXG4gKiBCQUNLV0FSRFMgQ09NUEFUSUJJTElUWTogYWxpYXNlZCB0byBgdHJhY2tDbGlja2AuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50IG9yIEFycmF5fSBsaW5rc1xuICogQHBhcmFtIHtTdHJpbmcgb3IgRnVuY3Rpb259IGV2ZW50XG4gKiBAcGFyYW0ge09iamVjdCBvciBGdW5jdGlvbn0gcHJvcGVydGllcyAob3B0aW9uYWwpXG4gKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gKi9cblxuQW5hbHl0aWNzLnByb3RvdHlwZS50cmFja0NsaWNrID1cbkFuYWx5dGljcy5wcm90b3R5cGUudHJhY2tMaW5rID0gZnVuY3Rpb24gKGxpbmtzLCBldmVudCwgcHJvcGVydGllcykge1xuICBpZiAoIWxpbmtzKSByZXR1cm4gdGhpcztcbiAgaWYgKGlzLmVsZW1lbnQobGlua3MpKSBsaW5rcyA9IFtsaW5rc107IC8vIGFsd2F5cyBhcnJheXMsIGhhbmRsZXMganF1ZXJ5XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBlYWNoKGxpbmtzLCBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoIWlzLmVsZW1lbnQoZWwpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdNdXN0IHBhc3MgSFRNTEVsZW1lbnQgdG8gYGFuYWx5dGljcy50cmFja0xpbmtgLicpO1xuICAgIG9uKGVsLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGV2ID0gaXMuZm4oZXZlbnQpID8gZXZlbnQoZWwpIDogZXZlbnQ7XG4gICAgICB2YXIgcHJvcHMgPSBpcy5mbihwcm9wZXJ0aWVzKSA/IHByb3BlcnRpZXMoZWwpIDogcHJvcGVydGllcztcbiAgICAgIHNlbGYudHJhY2soZXYsIHByb3BzKTtcblxuICAgICAgaWYgKGVsLmhyZWYgJiYgZWwudGFyZ2V0ICE9PSAnX2JsYW5rJyAmJiAhaXNNZXRhKGUpKSB7XG4gICAgICAgIHByZXZlbnQoZSk7XG4gICAgICAgIHNlbGYuX2NhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGVsLmhyZWY7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogSGVscGVyIG1ldGhvZCB0byB0cmFjayBhbiBvdXRib3VuZCBmb3JtIHRoYXQgd291bGQgbm9ybWFsbHkgbmF2aWdhdGUgYXdheVxuICogZnJvbSB0aGUgcGFnZSBiZWZvcmUgdGhlIGFuYWx5dGljcyBjYWxscyB3ZXJlIHNlbnQuXG4gKlxuICogQkFDS1dBUkRTIENPTVBBVElCSUxJVFk6IGFsaWFzZWQgdG8gYHRyYWNrU3VibWl0YC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnQgb3IgQXJyYXl9IGZvcm1zXG4gKiBAcGFyYW0ge1N0cmluZyBvciBGdW5jdGlvbn0gZXZlbnRcbiAqIEBwYXJhbSB7T2JqZWN0IG9yIEZ1bmN0aW9ufSBwcm9wZXJ0aWVzIChvcHRpb25hbClcbiAqIEByZXR1cm4ge0FuYWx5dGljc31cbiAqL1xuXG5BbmFseXRpY3MucHJvdG90eXBlLnRyYWNrU3VibWl0ID1cbkFuYWx5dGljcy5wcm90b3R5cGUudHJhY2tGb3JtID0gZnVuY3Rpb24gKGZvcm1zLCBldmVudCwgcHJvcGVydGllcykge1xuICBpZiAoIWZvcm1zKSByZXR1cm4gdGhpcztcbiAgaWYgKGlzLmVsZW1lbnQoZm9ybXMpKSBmb3JtcyA9IFtmb3Jtc107IC8vIGFsd2F5cyBhcnJheXMsIGhhbmRsZXMganF1ZXJ5XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBlYWNoKGZvcm1zLCBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoIWlzLmVsZW1lbnQoZWwpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdNdXN0IHBhc3MgSFRNTEVsZW1lbnQgdG8gYGFuYWx5dGljcy50cmFja0Zvcm1gLicpO1xuICAgIGZ1bmN0aW9uIGhhbmRsZXIgKGUpIHtcbiAgICAgIHByZXZlbnQoZSk7XG5cbiAgICAgIHZhciBldiA9IGlzLmZuKGV2ZW50KSA/IGV2ZW50KGVsKSA6IGV2ZW50O1xuICAgICAgdmFyIHByb3BzID0gaXMuZm4ocHJvcGVydGllcykgPyBwcm9wZXJ0aWVzKGVsKSA6IHByb3BlcnRpZXM7XG4gICAgICBzZWxmLnRyYWNrKGV2LCBwcm9wcyk7XG5cbiAgICAgIHNlbGYuX2NhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWwuc3VibWl0KCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBzdXBwb3J0IHRoZSBldmVudHMgaGFwcGVuaW5nIHRocm91Z2ggalF1ZXJ5IG9yIFplcHRvIGluc3RlYWQgb2YgdGhyb3VnaFxuICAgIC8vIHRoZSBub3JtYWwgRE9NIEFQSSwgc2luY2UgYGVsLnN1Ym1pdGAgZG9lc24ndCBidWJibGUgdXAgZXZlbnRzLi4uXG4gICAgdmFyICQgPSB3aW5kb3cualF1ZXJ5IHx8IHdpbmRvdy5aZXB0bztcbiAgICBpZiAoJCkge1xuICAgICAgJChlbCkuc3VibWl0KGhhbmRsZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbihlbCwgJ3N1Ym1pdCcsIGhhbmRsZXIpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFRyaWdnZXIgYSBwYWdldmlldywgbGFiZWxpbmcgdGhlIGN1cnJlbnQgcGFnZSB3aXRoIGFuIG9wdGlvbmFsIGBjYXRlZ29yeWAsXG4gKiBgbmFtZWAgYW5kIGBwcm9wZXJ0aWVzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2F0ZWdvcnkgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3Qgb3IgU3RyaW5nfSBwcm9wZXJ0aWVzIChvciBwYXRoKSAob3B0aW9uYWwpXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAob3B0aW9uYWwpXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAob3B0aW9uYWwpXG4gKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gKi9cblxuQW5hbHl0aWNzLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBuYW1lLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBmbikge1xuICBpZiAoaXMuZm4ob3B0aW9ucykpIGZuID0gb3B0aW9ucywgb3B0aW9ucyA9IG51bGw7XG4gIGlmIChpcy5mbihwcm9wZXJ0aWVzKSkgZm4gPSBwcm9wZXJ0aWVzLCBvcHRpb25zID0gcHJvcGVydGllcyA9IG51bGw7XG4gIGlmIChpcy5mbihuYW1lKSkgZm4gPSBuYW1lLCBvcHRpb25zID0gcHJvcGVydGllcyA9IG5hbWUgPSBudWxsO1xuICBpZiAoaXMub2JqZWN0KGNhdGVnb3J5KSkgb3B0aW9ucyA9IG5hbWUsIHByb3BlcnRpZXMgPSBjYXRlZ29yeSwgbmFtZSA9IGNhdGVnb3J5ID0gbnVsbDtcbiAgaWYgKGlzLm9iamVjdChuYW1lKSkgb3B0aW9ucyA9IHByb3BlcnRpZXMsIHByb3BlcnRpZXMgPSBuYW1lLCBuYW1lID0gbnVsbDtcbiAgaWYgKGlzLnN0cmluZyhjYXRlZ29yeSkgJiYgIWlzLnN0cmluZyhuYW1lKSkgbmFtZSA9IGNhdGVnb3J5LCBjYXRlZ29yeSA9IG51bGw7XG5cbiAgdmFyIGRlZnMgPSB7XG4gICAgcGF0aDogY2Fub25pY2FsUGF0aCgpLFxuICAgIHJlZmVycmVyOiBkb2N1bWVudC5yZWZlcnJlcixcbiAgICB0aXRsZTogZG9jdW1lbnQudGl0bGUsXG4gICAgc2VhcmNoOiBsb2NhdGlvbi5zZWFyY2hcbiAgfTtcblxuICBpZiAobmFtZSkgZGVmcy5uYW1lID0gbmFtZTtcbiAgaWYgKGNhdGVnb3J5KSBkZWZzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG5cbiAgcHJvcGVydGllcyA9IGNsb25lKHByb3BlcnRpZXMpIHx8IHt9O1xuICBkZWZhdWx0cyhwcm9wZXJ0aWVzLCBkZWZzKTtcbiAgcHJvcGVydGllcy51cmwgPSBwcm9wZXJ0aWVzLnVybCB8fCBjYW5vbmljYWxVcmwocHJvcGVydGllcy5zZWFyY2gpO1xuXG4gIHRoaXMuX2ludm9rZSgncGFnZScsIG1lc3NhZ2UoUGFnZSwge1xuICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG4gICAgY2F0ZWdvcnk6IGNhdGVnb3J5LFxuICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgbmFtZTogbmFtZVxuICB9KSk7XG5cbiAgdGhpcy5lbWl0KCdwYWdlJywgY2F0ZWdvcnksIG5hbWUsIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xuICB0aGlzLl9jYWxsYmFjayhmbik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBCQUNLV0FSRFMgQ09NUEFUSUJJTElUWTogY29udmVydCBhbiBvbGQgYHBhZ2V2aWV3YCB0byBhIGBwYWdlYCBjYWxsLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICogQHJldHVybiB7QW5hbHl0aWNzfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuQW5hbHl0aWNzLnByb3RvdHlwZS5wYWdldmlldyA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHtcbiAgdmFyIHByb3BlcnRpZXMgPSB7fTtcbiAgaWYgKHVybCkgcHJvcGVydGllcy5wYXRoID0gdXJsO1xuICB0aGlzLnBhZ2UocHJvcGVydGllcyk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBNZXJnZSB0d28gcHJldmlvdXNseSB1bmFzc29jaWF0ZWQgdXNlciBpZGVudGl0aWVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0b1xuICogQHBhcmFtIHtTdHJpbmd9IGZyb20gKG9wdGlvbmFsKVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgKG9wdGlvbmFsKVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gKG9wdGlvbmFsKVxuICogQHJldHVybiB7QW5hbHl0aWNzfVxuICovXG5cbkFuYWx5dGljcy5wcm90b3R5cGUuYWxpYXMgPSBmdW5jdGlvbiAodG8sIGZyb20sIG9wdGlvbnMsIGZuKSB7XG4gIGlmIChpcy5mbihvcHRpb25zKSkgZm4gPSBvcHRpb25zLCBvcHRpb25zID0gbnVsbDtcbiAgaWYgKGlzLmZuKGZyb20pKSBmbiA9IGZyb20sIG9wdGlvbnMgPSBudWxsLCBmcm9tID0gbnVsbDtcbiAgaWYgKGlzLm9iamVjdChmcm9tKSkgb3B0aW9ucyA9IGZyb20sIGZyb20gPSBudWxsO1xuXG4gIHRoaXMuX2ludm9rZSgnYWxpYXMnLCBtZXNzYWdlKEFsaWFzLCB7XG4gICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICBmcm9tOiBmcm9tLFxuICAgIHRvOiB0b1xuICB9KSk7XG5cbiAgdGhpcy5lbWl0KCdhbGlhcycsIHRvLCBmcm9tLCBvcHRpb25zKTtcbiAgdGhpcy5fY2FsbGJhY2soZm4pO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVnaXN0ZXIgYSBgZm5gIHRvIGJlIGZpcmVkIHdoZW4gYWxsIHRoZSBhbmFseXRpY3Mgc2VydmljZXMgYXJlIHJlYWR5LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gKi9cblxuQW5hbHl0aWNzLnByb3RvdHlwZS5yZWFkeSA9IGZ1bmN0aW9uIChmbikge1xuICBpZiAoIWlzLmZuKGZuKSkgcmV0dXJuIHRoaXM7XG4gIHRoaXMuX3JlYWRpZWRcbiAgICA/IGNhbGxiYWNrLmFzeW5jKGZuKVxuICAgIDogdGhpcy5vbmNlKCdyZWFkeScsIGZuKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgYHRpbWVvdXRgIChpbiBtaWxsaXNlY29uZHMpIHVzZWQgZm9yIGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gdGltZW91dFxuICovXG5cbkFuYWx5dGljcy5wcm90b3R5cGUudGltZW91dCA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG4gIHRoaXMuX3RpbWVvdXQgPSB0aW1lb3V0O1xufTtcblxuLyoqXG4gKiBFbmFibGUgb3IgZGlzYWJsZSBkZWJ1Zy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZyBvciBCb29sZWFufSBzdHJcbiAqL1xuXG5BbmFseXRpY3MucHJvdG90eXBlLmRlYnVnID0gZnVuY3Rpb24oc3RyKXtcbiAgaWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCB8fCBzdHIpIHtcbiAgICBkZWJ1Zy5lbmFibGUoJ2FuYWx5dGljczonICsgKHN0ciB8fCAnKicpKTtcbiAgfSBlbHNlIHtcbiAgICBkZWJ1Zy5kaXNhYmxlKCk7XG4gIH1cbn07XG5cbi8qKlxuICogQXBwbHkgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7QW5hbHl0aWNzfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuQW5hbHl0aWNzLnByb3RvdHlwZS5fb3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBjb29raWUub3B0aW9ucyhvcHRpb25zLmNvb2tpZSk7XG4gIHN0b3JlLm9wdGlvbnMob3B0aW9ucy5sb2NhbFN0b3JhZ2UpO1xuICB1c2VyLm9wdGlvbnMob3B0aW9ucy51c2VyKTtcbiAgZ3JvdXAub3B0aW9ucyhvcHRpb25zLmdyb3VwKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIENhbGxiYWNrIGEgYGZuYCBhZnRlciBvdXIgZGVmaW5lZCB0aW1lb3V0IHBlcmlvZC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7QW5hbHl0aWNzfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuQW5hbHl0aWNzLnByb3RvdHlwZS5fY2FsbGJhY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgY2FsbGJhY2suYXN5bmMoZm4sIHRoaXMuX3RpbWVvdXQpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ2FsbCBgbWV0aG9kYCB3aXRoIGBmYWNhZGVgIG9uIGFsbCBlbmFibGVkIGludGVncmF0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gKiBAcGFyYW0ge0ZhY2FkZX0gZmFjYWRlXG4gKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5BbmFseXRpY3MucHJvdG90eXBlLl9pbnZva2UgPSBmdW5jdGlvbiAobWV0aG9kLCBmYWNhZGUpIHtcbiAgdmFyIG9wdGlvbnMgPSBmYWNhZGUub3B0aW9ucygpO1xuXG4gIHRoaXMuZW1pdCgnaW52b2tlJywgZmFjYWRlKTtcblxuICBlYWNoKHRoaXMuX2ludGVncmF0aW9ucywgZnVuY3Rpb24gKG5hbWUsIGludGVncmF0aW9uKSB7XG4gICAgaWYgKCFmYWNhZGUuZW5hYmxlZChuYW1lKSkgcmV0dXJuO1xuICAgIGludGVncmF0aW9uLmludm9rZS5jYWxsKGludGVncmF0aW9uLCBtZXRob2QsIGZhY2FkZSk7XG4gIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBQdXNoIGBhcmdzYC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcmdzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5BbmFseXRpY3MucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihhcmdzKXtcbiAgdmFyIG1ldGhvZCA9IGFyZ3Muc2hpZnQoKTtcbiAgaWYgKCF0aGlzW21ldGhvZF0pIHJldHVybjtcbiAgdGhpc1ttZXRob2RdLmFwcGx5KHRoaXMsIGFyZ3MpO1xufTtcblxuLyoqXG4gKiBSZXNldCBncm91cCBhbmQgdXNlciB0cmFpdHMgYW5kIGlkJ3MuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5BbmFseXRpY3MucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy51c2VyKCkubG9nb3V0KCk7XG4gIHRoaXMuZ3JvdXAoKS5sb2dvdXQoKTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIHF1ZXJ5IHN0cmluZyBmb3IgY2FsbGFibGUgbWV0aG9kcy5cbiAqXG4gKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5BbmFseXRpY3MucHJvdG90eXBlLl9wYXJzZVF1ZXJ5ID0gZnVuY3Rpb24gKCkge1xuICAvLyBJZGVudGlmeSBhbmQgdHJhY2sgYW55IGBhanNfdWlkYCBhbmQgYGFqc19ldmVudGAgcGFyYW1ldGVycyBpbiB0aGUgVVJMLlxuICB2YXIgcSA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICBpZiAocS5hanNfdWlkKSB0aGlzLmlkZW50aWZ5KHEuYWpzX3VpZCk7XG4gIGlmIChxLmFqc19ldmVudCkgdGhpcy50cmFjayhxLmFqc19ldmVudCk7XG4gIGlmIChxLmFqc19haWQpIHVzZXIuYW5vbnltb3VzSWQocS5hanNfYWlkKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgY2Fub25pY2FsIHBhdGggZm9yIHRoZSBwYWdlLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBjYW5vbmljYWxQYXRoICgpIHtcbiAgdmFyIGNhbm9uID0gY2Fub25pY2FsKCk7XG4gIGlmICghY2Fub24pIHJldHVybiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG4gIHZhciBwYXJzZWQgPSB1cmwucGFyc2UoY2Fub24pO1xuICByZXR1cm4gcGFyc2VkLnBhdGhuYW1lO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgY2Fub25pY2FsIFVSTCBmb3IgdGhlIHBhZ2UgY29uY2F0IHRoZSBnaXZlbiBgc2VhcmNoYFxuICogYW5kIHN0cmlwIHRoZSBoYXNoLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBjYW5vbmljYWxVcmwgKHNlYXJjaCkge1xuICB2YXIgY2Fub24gPSBjYW5vbmljYWwoKTtcbiAgaWYgKGNhbm9uKSByZXR1cm4gfmNhbm9uLmluZGV4T2YoJz8nKSA/IGNhbm9uIDogY2Fub24gKyBzZWFyY2g7XG4gIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgdmFyIGkgPSB1cmwuaW5kZXhPZignIycpO1xuICByZXR1cm4gLTEgPT0gaSA/IHVybCA6IHVybC5zbGljZSgwLCBpKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgbWVzc2FnZSB3aXRoIGBUeXBlYCBhbmQgYG1zZ2BcbiAqXG4gKiB0aGUgZnVuY3Rpb24gd2lsbCBtYWtlIHN1cmUgdGhhdCB0aGUgYG1zZy5vcHRpb25zYFxuICogaXMgbWVyZ2VkIHRvIGBtc2dgIGFuZCBkZWxldGVzIGBtc2cub3B0aW9uc2AgaWYgaXRcbiAqIGhhcyBgLmNvbnRleHQgLyAudGltZXN0YW1wIC8gLmludGVncmF0aW9ucyAvIC5hbm9ueW1vdXNJZGAuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgIG1lc3NhZ2UoSWRlbnRpZnksIHtcbiAqICAgICAgICBvcHRpb25zOiB7IHRpbWVzdGFtcDogRGF0ZSwgY29udGV4dDogT2JqZWN0LCBpbnRlZ3JhdGlvbnM6IE9iamVjdCB9LFxuICogICAgICAgIHRyYWl0czogeyB0cmFpdDogdHJ1ZSB9LFxuICogICAgICAgIHVzZXJJZDogMTIzXG4gKiAgICAgIH0pO1xuICpcbiAqICAgICAgLy8gPT5cbiAqXG4gKiAgICAgIHtcbiAqICAgICAgICB1c2VySWQ6IDEyMyxcbiAqICAgICAgICBjb250ZXh0OiBPYmplY3QsXG4gKiAgICAgICAgdGltZXN0YW1wOiBEYXRlLFxuICogICAgICAgIGludGVncmF0aW9uczogT2JqZWN0XG4gKiAgICAgICAgdHJhaXRzOiB7IHRyYWl0OiB0cnVlIH1cbiAqICAgICAgfVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFR5cGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBtc2dcbiAqIEByZXR1cm4ge0ZhY2FkZX1cbiAqL1xuXG5mdW5jdGlvbiBtZXNzYWdlKFR5cGUsIG1zZyl7XG4gIHZhciBjdHggPSBtc2cub3B0aW9ucyB8fCB7fTtcblxuICBpZiAoY3R4LnRpbWVzdGFtcCB8fCBjdHguaW50ZWdyYXRpb25zIHx8IGN0eC5jb250ZXh0IHx8IGN0eC5hbm9ueW1vdXNJZCkge1xuICAgIG1zZyA9IGRlZmF1bHRzKGN0eCwgbXNnKTtcbiAgICBkZWxldGUgbXNnLm9wdGlvbnM7XG4gIH1cblxuICBpZiAoY3R4LmFub255bW91c0lkKSB7XG4gICAgdXNlci5hbm9ueW1vdXNJZChjdHguYW5vbnltb3VzSWQpO1xuICB9XG5cbiAgbXNnLmFub255bW91c0lkID0gdXNlci5hbm9ueW1vdXNJZCgpO1xuXG4gIHJldHVybiBuZXcgVHlwZShtc2cpO1xufVxuIiwiXG50cnkge1xuICB2YXIgYmluZCA9IHJlcXVpcmUoJ2JpbmQnKTtcbn0gY2F0Y2ggKGUpIHtcbiAgdmFyIGJpbmQgPSByZXF1aXJlKCdiaW5kLWNvbXBvbmVudCcpO1xufVxuXG52YXIgYmluZEFsbCA9IHJlcXVpcmUoJ2JpbmQtYWxsJyk7XG5cblxuLyoqXG4gKiBFeHBvc2UgYGJpbmRgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGJpbmQ7XG5cblxuLyoqXG4gKiBFeHBvc2UgYGJpbmRBbGxgLlxuICovXG5cbmV4cG9ydHMuYWxsID0gYmluZEFsbDtcblxuXG4vKipcbiAqIEV4cG9zZSBgYmluZE1ldGhvZHNgLlxuICovXG5cbmV4cG9ydHMubWV0aG9kcyA9IGJpbmRNZXRob2RzO1xuXG5cbi8qKlxuICogQmluZCBgbWV0aG9kc2Agb24gYG9iamAgdG8gYWx3YXlzIGJlIGNhbGxlZCB3aXRoIHRoZSBgb2JqYCBhcyBjb250ZXh0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RzLi4uXG4gKi9cblxuZnVuY3Rpb24gYmluZE1ldGhvZHMgKG9iaiwgbWV0aG9kcykge1xuICBtZXRob2RzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICBmb3IgKHZhciBpID0gMCwgbWV0aG9kOyBtZXRob2QgPSBtZXRob2RzW2ldOyBpKyspIHtcbiAgICBvYmpbbWV0aG9kXSA9IGJpbmQob2JqLCBvYmpbbWV0aG9kXSk7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn0iLCJcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ2FuYWx5dGljcy5qczpjb29raWUnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnYmluZCcpO1xudmFyIGNvb2tpZSA9IHJlcXVpcmUoJ2Nvb2tpZScpO1xudmFyIGNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJ2RlZmF1bHRzJyk7XG52YXIganNvbiA9IHJlcXVpcmUoJ2pzb24nKTtcbnZhciB0b3BEb21haW4gPSByZXF1aXJlKCd0b3AtZG9tYWluJyk7XG5cblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBDb29raWVgIHdpdGggYG9wdGlvbnNgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gQ29va2llIChvcHRpb25zKSB7XG4gIHRoaXMub3B0aW9ucyhvcHRpb25zKTtcbn1cblxuXG4vKipcbiAqIEdldCBvciBzZXQgdGhlIGNvb2tpZSBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiAgIEBmaWVsZCB7TnVtYmVyfSBtYXhhZ2UgKDEgeWVhcilcbiAqICAgQGZpZWxkIHtTdHJpbmd9IGRvbWFpblxuICogICBAZmllbGQge1N0cmluZ30gcGF0aFxuICogICBAZmllbGQge0Jvb2xlYW59IHNlY3VyZVxuICovXG5cbkNvb2tpZS5wcm90b3R5cGUub3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdGhpcy5fb3B0aW9ucztcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICB2YXIgZG9tYWluID0gJy4nICsgdG9wRG9tYWluKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICB0aGlzLl9vcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywge1xuICAgIG1heGFnZTogMzE1MzYwMDAwMDAsIC8vIGRlZmF1bHQgdG8gYSB5ZWFyXG4gICAgcGF0aDogJy8nLFxuICAgIGRvbWFpbjogZG9tYWluXG4gIH0pO1xuXG4gIC8vIGh0dHA6Ly9jdXJsLmhheHguc2UvcmZjL2Nvb2tpZV9zcGVjLmh0bWxcbiAgLy8gaHR0cHM6Ly9wdWJsaWNzdWZmaXgub3JnL2xpc3QvZWZmZWN0aXZlX3RsZF9uYW1lcy5kYXRcbiAgLy9cbiAgLy8gdHJ5IHNldHRpbmcgYSBkdW1teSBjb29raWUgd2l0aCB0aGUgb3B0aW9uc1xuICAvLyBpZiB0aGUgY29va2llIGlzbid0IHNldCwgaXQgcHJvYmFibHkgbWVhbnNcbiAgLy8gdGhhdCB0aGUgZG9tYWluIGlzIG9uIHRoZSBwdWJsaWMgc3VmZml4IGxpc3RcbiAgLy8gbGlrZSBteWFwcC5oZXJva3VhcHAuY29tIG9yIGxvY2FsaG9zdCAvIGlwLlxuICB0aGlzLnNldCgnYWpzOnRlc3QnLCB0cnVlKTtcbiAgaWYgKCF0aGlzLmdldCgnYWpzOnRlc3QnKSkge1xuICAgIGRlYnVnKCdmYWxsYmFjayB0byBkb21haW49bnVsbCcpO1xuICAgIHRoaXMuX29wdGlvbnMuZG9tYWluID0gbnVsbDtcbiAgfVxuICB0aGlzLnJlbW92ZSgnYWpzOnRlc3QnKTtcbn07XG5cblxuLyoqXG4gKiBTZXQgYSBga2V5YCBhbmQgYHZhbHVlYCBpbiBvdXIgY29va2llLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZVxuICogQHJldHVybiB7Qm9vbGVhbn0gc2F2ZWRcbiAqL1xuXG5Db29raWUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgdmFsdWUgPSBqc29uLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgY29va2llKGtleSwgdmFsdWUsIGNsb25lKHRoaXMuX29wdGlvbnMpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuXG4vKipcbiAqIEdldCBhIHZhbHVlIGZyb20gb3VyIGNvb2tpZSBieSBga2V5YC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtPYmplY3R9IHZhbHVlXG4gKi9cblxuQ29va2llLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHRyeSB7XG4gICAgdmFyIHZhbHVlID0gY29va2llKGtleSk7XG4gICAgdmFsdWUgPSB2YWx1ZSA/IGpzb24ucGFyc2UodmFsdWUpIDogbnVsbDtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuXG4vKipcbiAqIFJlbW92ZSBhIHZhbHVlIGZyb20gb3VyIGNvb2tpZSBieSBga2V5YC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtCb29sZWFufSByZW1vdmVkXG4gKi9cblxuQ29va2llLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHRyeSB7XG4gICAgY29va2llKGtleSwgbnVsbCwgY2xvbmUodGhpcy5fb3B0aW9ucykpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5cbi8qKlxuICogRXhwb3NlIHRoZSBjb29raWUgc2luZ2xldG9uLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gYmluZC5hbGwobmV3IENvb2tpZSgpKTtcblxuXG4vKipcbiAqIEV4cG9zZSB0aGUgYENvb2tpZWAgY29uc3RydWN0b3IuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMuQ29va2llID0gQ29va2llO1xuIiwiaWYgKCd1bmRlZmluZWQnID09IHR5cGVvZiB3aW5kb3cpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9kZWJ1ZycpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2RlYnVnJyk7XG59XG4iLCIvKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIHR0eSA9IHJlcXVpcmUoJ3R0eScpO1xuXG4vKipcbiAqIEV4cG9zZSBgZGVidWcoKWAgYXMgdGhlIG1vZHVsZS5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYnVnO1xuXG4vKipcbiAqIEVuYWJsZWQgZGVidWdnZXJzLlxuICovXG5cbnZhciBuYW1lcyA9IFtdXG4gICwgc2tpcHMgPSBbXTtcblxuKHByb2Nlc3MuZW52LkRFQlVHIHx8ICcnKVxuICAuc3BsaXQoL1tcXHMsXSsvKVxuICAuZm9yRWFjaChmdW5jdGlvbihuYW1lKXtcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKCcqJywgJy4qPycpO1xuICAgIGlmIChuYW1lWzBdID09PSAnLScpIHtcbiAgICAgIHNraXBzLnB1c2gobmV3IFJlZ0V4cCgnXicgKyBuYW1lLnN1YnN0cigxKSArICckJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuYW1lcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZSArICckJykpO1xuICAgIH1cbiAgfSk7XG5cbi8qKlxuICogQ29sb3JzLlxuICovXG5cbnZhciBjb2xvcnMgPSBbNiwgMiwgMywgNCwgNSwgMV07XG5cbi8qKlxuICogUHJldmlvdXMgZGVidWcoKSBjYWxsLlxuICovXG5cbnZhciBwcmV2ID0ge307XG5cbi8qKlxuICogUHJldmlvdXNseSBhc3NpZ25lZCBjb2xvci5cbiAqL1xuXG52YXIgcHJldkNvbG9yID0gMDtcblxuLyoqXG4gKiBJcyBzdGRvdXQgYSBUVFk/IENvbG9yZWQgb3V0cHV0IGlzIGRpc2FibGVkIHdoZW4gYHRydWVgLlxuICovXG5cbnZhciBpc2F0dHkgPSB0dHkuaXNhdHR5KDIpO1xuXG4vKipcbiAqIFNlbGVjdCBhIGNvbG9yLlxuICpcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGNvbG9yKCkge1xuICByZXR1cm4gY29sb3JzW3ByZXZDb2xvcisrICUgY29sb3JzLmxlbmd0aF07XG59XG5cbi8qKlxuICogSHVtYW5pemUgdGhlIGdpdmVuIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGh1bWFuaXplKG1zKSB7XG4gIHZhciBzZWMgPSAxMDAwXG4gICAgLCBtaW4gPSA2MCAqIDEwMDBcbiAgICAsIGhvdXIgPSA2MCAqIG1pbjtcblxuICBpZiAobXMgPj0gaG91cikgcmV0dXJuIChtcyAvIGhvdXIpLnRvRml4ZWQoMSkgKyAnaCc7XG4gIGlmIChtcyA+PSBtaW4pIHJldHVybiAobXMgLyBtaW4pLnRvRml4ZWQoMSkgKyAnbSc7XG4gIGlmIChtcyA+PSBzZWMpIHJldHVybiAobXMgLyBzZWMgfCAwKSArICdzJztcbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1R5cGV9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGRlYnVnKG5hbWUpIHtcbiAgZnVuY3Rpb24gZGlzYWJsZWQoKXt9XG4gIGRpc2FibGVkLmVuYWJsZWQgPSBmYWxzZTtcblxuICB2YXIgbWF0Y2ggPSBza2lwcy5zb21lKGZ1bmN0aW9uKHJlKXtcbiAgICByZXR1cm4gcmUudGVzdChuYW1lKTtcbiAgfSk7XG5cbiAgaWYgKG1hdGNoKSByZXR1cm4gZGlzYWJsZWQ7XG5cbiAgbWF0Y2ggPSBuYW1lcy5zb21lKGZ1bmN0aW9uKHJlKXtcbiAgICByZXR1cm4gcmUudGVzdChuYW1lKTtcbiAgfSk7XG5cbiAgaWYgKCFtYXRjaCkgcmV0dXJuIGRpc2FibGVkO1xuICB2YXIgYyA9IGNvbG9yKCk7XG5cbiAgZnVuY3Rpb24gY29sb3JlZChmbXQpIHtcbiAgICBmbXQgPSBjb2VyY2UoZm10KTtcblxuICAgIHZhciBjdXJyID0gbmV3IERhdGU7XG4gICAgdmFyIG1zID0gY3VyciAtIChwcmV2W25hbWVdIHx8IGN1cnIpO1xuICAgIHByZXZbbmFtZV0gPSBjdXJyO1xuXG4gICAgZm10ID0gJyAgXFx1MDAxYls5JyArIGMgKyAnbScgKyBuYW1lICsgJyAnXG4gICAgICArICdcXHUwMDFiWzMnICsgYyArICdtXFx1MDAxYls5MG0nXG4gICAgICArIGZtdCArICdcXHUwMDFiWzMnICsgYyArICdtJ1xuICAgICAgKyAnICsnICsgaHVtYW5pemUobXMpICsgJ1xcdTAwMWJbMG0nO1xuXG4gICAgY29uc29sZS5lcnJvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxhaW4oZm10KSB7XG4gICAgZm10ID0gY29lcmNlKGZtdCk7XG5cbiAgICBmbXQgPSBuZXcgRGF0ZSgpLnRvVVRDU3RyaW5nKClcbiAgICAgICsgJyAnICsgbmFtZSArICcgJyArIGZtdDtcbiAgICBjb25zb2xlLmVycm9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBjb2xvcmVkLmVuYWJsZWQgPSBwbGFpbi5lbmFibGVkID0gdHJ1ZTtcblxuICByZXR1cm4gaXNhdHR5IHx8IHByb2Nlc3MuZW52LkRFQlVHX0NPTE9SU1xuICAgID8gY29sb3JlZFxuICAgIDogcGxhaW47XG59XG5cbi8qKlxuICogQ29lcmNlIGB2YWxgLlxuICovXG5cbmZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcbiAgaWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gdmFsLnN0YWNrIHx8IHZhbC5tZXNzYWdlO1xuICByZXR1cm4gdmFsO1xufVxuIiwiXG4vKipcbiAqIEV4cG9zZSBgZGVidWcoKWAgYXMgdGhlIG1vZHVsZS5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYnVnO1xuXG4vKipcbiAqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7VHlwZX1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGVidWcobmFtZSkge1xuICBpZiAoIWRlYnVnLmVuYWJsZWQobmFtZSkpIHJldHVybiBmdW5jdGlvbigpe307XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKGZtdCl7XG4gICAgZm10ID0gY29lcmNlKGZtdCk7XG5cbiAgICB2YXIgY3VyciA9IG5ldyBEYXRlO1xuICAgIHZhciBtcyA9IGN1cnIgLSAoZGVidWdbbmFtZV0gfHwgY3Vycik7XG4gICAgZGVidWdbbmFtZV0gPSBjdXJyO1xuXG4gICAgZm10ID0gbmFtZVxuICAgICAgKyAnICdcbiAgICAgICsgZm10XG4gICAgICArICcgKycgKyBkZWJ1Zy5odW1hbml6ZShtcyk7XG5cbiAgICAvLyBUaGlzIGhhY2tlcnkgaXMgcmVxdWlyZWQgZm9yIElFOFxuICAgIC8vIHdoZXJlIGBjb25zb2xlLmxvZ2AgZG9lc24ndCBoYXZlICdhcHBseSdcbiAgICB3aW5kb3cuY29uc29sZVxuICAgICAgJiYgY29uc29sZS5sb2dcbiAgICAgICYmIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGNvbnNvbGUubG9nLCBjb25zb2xlLCBhcmd1bWVudHMpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcy5cbiAqL1xuXG5kZWJ1Zy5uYW1lcyA9IFtdO1xuZGVidWcuc2tpcHMgPSBbXTtcblxuLyoqXG4gKiBFbmFibGVzIGEgZGVidWcgbW9kZSBieSBuYW1lLiBUaGlzIGNhbiBpbmNsdWRlIG1vZGVzXG4gKiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmRlYnVnLmVuYWJsZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdHJ5IHtcbiAgICBsb2NhbFN0b3JhZ2UuZGVidWcgPSBuYW1lO1xuICB9IGNhdGNoKGUpe31cblxuICB2YXIgc3BsaXQgPSAobmFtZSB8fCAnJykuc3BsaXQoL1tcXHMsXSsvKVxuICAgICwgbGVuID0gc3BsaXQubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBuYW1lID0gc3BsaXRbaV0ucmVwbGFjZSgnKicsICcuKj8nKTtcbiAgICBpZiAobmFtZVswXSA9PT0gJy0nKSB7XG4gICAgICBkZWJ1Zy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZS5zdWJzdHIoMSkgKyAnJCcpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBkZWJ1Zy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZSArICckJykpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBEaXNhYmxlIGRlYnVnIG91dHB1dC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmRlYnVnLmRpc2FibGUgPSBmdW5jdGlvbigpe1xuICBkZWJ1Zy5lbmFibGUoJycpO1xufTtcblxuLyoqXG4gKiBIdW1hbml6ZSB0aGUgZ2l2ZW4gYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbVxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZGVidWcuaHVtYW5pemUgPSBmdW5jdGlvbihtcykge1xuICB2YXIgc2VjID0gMTAwMFxuICAgICwgbWluID0gNjAgKiAxMDAwXG4gICAgLCBob3VyID0gNjAgKiBtaW47XG5cbiAgaWYgKG1zID49IGhvdXIpIHJldHVybiAobXMgLyBob3VyKS50b0ZpeGVkKDEpICsgJ2gnO1xuICBpZiAobXMgPj0gbWluKSByZXR1cm4gKG1zIC8gbWluKS50b0ZpeGVkKDEpICsgJ20nO1xuICBpZiAobXMgPj0gc2VjKSByZXR1cm4gKG1zIC8gc2VjIHwgMCkgKyAncyc7XG4gIHJldHVybiBtcyArICdtcyc7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZGVidWcuZW5hYmxlZCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRlYnVnLnNraXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKGRlYnVnLnNraXBzW2ldLnRlc3QobmFtZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRlYnVnLm5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKGRlYnVnLm5hbWVzW2ldLnRlc3QobmFtZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIENvZXJjZSBgdmFsYC5cbiAqL1xuXG5mdW5jdGlvbiBjb2VyY2UodmFsKSB7XG4gIGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikgcmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtcbiAgcmV0dXJuIHZhbDtcbn1cblxuLy8gcGVyc2lzdFxuXG50cnkge1xuICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkgZGVidWcuZW5hYmxlKGxvY2FsU3RvcmFnZS5kZWJ1Zyk7XG59IGNhdGNoKGUpe31cbiIsIlxudmFyIGpzb24gPSB3aW5kb3cuSlNPTiB8fCB7fTtcbnZhciBzdHJpbmdpZnkgPSBqc29uLnN0cmluZ2lmeTtcbnZhciBwYXJzZSA9IGpzb24ucGFyc2U7XG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2UgJiYgc3RyaW5naWZ5XG4gID8gSlNPTlxuICA6IHJlcXVpcmUoJ2pzb24tZmFsbGJhY2snKTtcbiIsIi8qXG4gICAganNvbjIuanNcbiAgICAyMDE0LTAyLTA0XG5cbiAgICBQdWJsaWMgRG9tYWluLlxuXG4gICAgTk8gV0FSUkFOVFkgRVhQUkVTU0VEIE9SIElNUExJRUQuIFVTRSBBVCBZT1VSIE9XTiBSSVNLLlxuXG4gICAgU2VlIGh0dHA6Ly93d3cuSlNPTi5vcmcvanMuaHRtbFxuXG5cbiAgICBUaGlzIGNvZGUgc2hvdWxkIGJlIG1pbmlmaWVkIGJlZm9yZSBkZXBsb3ltZW50LlxuICAgIFNlZSBodHRwOi8vamF2YXNjcmlwdC5jcm9ja2ZvcmQuY29tL2pzbWluLmh0bWxcblxuICAgIFVTRSBZT1VSIE9XTiBDT1BZLiBJVCBJUyBFWFRSRU1FTFkgVU5XSVNFIFRPIExPQUQgQ09ERSBGUk9NIFNFUlZFUlMgWU9VIERPXG4gICAgTk9UIENPTlRST0wuXG5cblxuICAgIFRoaXMgZmlsZSBjcmVhdGVzIGEgZ2xvYmFsIEpTT04gb2JqZWN0IGNvbnRhaW5pbmcgdHdvIG1ldGhvZHM6IHN0cmluZ2lmeVxuICAgIGFuZCBwYXJzZS5cblxuICAgICAgICBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgcmVwbGFjZXIsIHNwYWNlKVxuICAgICAgICAgICAgdmFsdWUgICAgICAgYW55IEphdmFTY3JpcHQgdmFsdWUsIHVzdWFsbHkgYW4gb2JqZWN0IG9yIGFycmF5LlxuXG4gICAgICAgICAgICByZXBsYWNlciAgICBhbiBvcHRpb25hbCBwYXJhbWV0ZXIgdGhhdCBkZXRlcm1pbmVzIGhvdyBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyBhcmUgc3RyaW5naWZpZWQgZm9yIG9iamVjdHMuIEl0IGNhbiBiZSBhXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvciBhbiBhcnJheSBvZiBzdHJpbmdzLlxuXG4gICAgICAgICAgICBzcGFjZSAgICAgICBhbiBvcHRpb25hbCBwYXJhbWV0ZXIgdGhhdCBzcGVjaWZpZXMgdGhlIGluZGVudGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBvZiBuZXN0ZWQgc3RydWN0dXJlcy4gSWYgaXQgaXMgb21pdHRlZCwgdGhlIHRleHQgd2lsbFxuICAgICAgICAgICAgICAgICAgICAgICAgYmUgcGFja2VkIHdpdGhvdXQgZXh0cmEgd2hpdGVzcGFjZS4gSWYgaXQgaXMgYSBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpdCB3aWxsIHNwZWNpZnkgdGhlIG51bWJlciBvZiBzcGFjZXMgdG8gaW5kZW50IGF0IGVhY2hcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsLiBJZiBpdCBpcyBhIHN0cmluZyAoc3VjaCBhcyAnXFx0JyBvciAnJm5ic3A7JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdCBjb250YWlucyB0aGUgY2hhcmFjdGVycyB1c2VkIHRvIGluZGVudCBhdCBlYWNoIGxldmVsLlxuXG4gICAgICAgICAgICBUaGlzIG1ldGhvZCBwcm9kdWNlcyBhIEpTT04gdGV4dCBmcm9tIGEgSmF2YVNjcmlwdCB2YWx1ZS5cblxuICAgICAgICAgICAgV2hlbiBhbiBvYmplY3QgdmFsdWUgaXMgZm91bmQsIGlmIHRoZSBvYmplY3QgY29udGFpbnMgYSB0b0pTT05cbiAgICAgICAgICAgIG1ldGhvZCwgaXRzIHRvSlNPTiBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgYW5kIHRoZSByZXN1bHQgd2lsbCBiZVxuICAgICAgICAgICAgc3RyaW5naWZpZWQuIEEgdG9KU09OIG1ldGhvZCBkb2VzIG5vdCBzZXJpYWxpemU6IGl0IHJldHVybnMgdGhlXG4gICAgICAgICAgICB2YWx1ZSByZXByZXNlbnRlZCBieSB0aGUgbmFtZS92YWx1ZSBwYWlyIHRoYXQgc2hvdWxkIGJlIHNlcmlhbGl6ZWQsXG4gICAgICAgICAgICBvciB1bmRlZmluZWQgaWYgbm90aGluZyBzaG91bGQgYmUgc2VyaWFsaXplZC4gVGhlIHRvSlNPTiBtZXRob2RcbiAgICAgICAgICAgIHdpbGwgYmUgcGFzc2VkIHRoZSBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoZSB2YWx1ZSwgYW5kIHRoaXMgd2lsbCBiZVxuICAgICAgICAgICAgYm91bmQgdG8gdGhlIHZhbHVlXG5cbiAgICAgICAgICAgIEZvciBleGFtcGxlLCB0aGlzIHdvdWxkIHNlcmlhbGl6ZSBEYXRlcyBhcyBJU08gc3RyaW5ncy5cblxuICAgICAgICAgICAgICAgIERhdGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZihuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgaW50ZWdlcnMgdG8gaGF2ZSBhdCBsZWFzdCB0d28gZGlnaXRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4gOiBuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VVRDRnVsbFllYXIoKSAgICsgJy0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICBmKHRoaXMuZ2V0VVRDTW9udGgoKSArIDEpICsgJy0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICBmKHRoaXMuZ2V0VVRDRGF0ZSgpKSAgICAgICsgJ1QnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICBmKHRoaXMuZ2V0VVRDSG91cnMoKSkgICAgICsgJzonICtcbiAgICAgICAgICAgICAgICAgICAgICAgICBmKHRoaXMuZ2V0VVRDTWludXRlcygpKSAgICsgJzonICtcbiAgICAgICAgICAgICAgICAgICAgICAgICBmKHRoaXMuZ2V0VVRDU2Vjb25kcygpKSAgICsgJ1onO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFlvdSBjYW4gcHJvdmlkZSBhbiBvcHRpb25hbCByZXBsYWNlciBtZXRob2QuIEl0IHdpbGwgYmUgcGFzc2VkIHRoZVxuICAgICAgICAgICAga2V5IGFuZCB2YWx1ZSBvZiBlYWNoIG1lbWJlciwgd2l0aCB0aGlzIGJvdW5kIHRvIHRoZSBjb250YWluaW5nXG4gICAgICAgICAgICBvYmplY3QuIFRoZSB2YWx1ZSB0aGF0IGlzIHJldHVybmVkIGZyb20geW91ciBtZXRob2Qgd2lsbCBiZVxuICAgICAgICAgICAgc2VyaWFsaXplZC4gSWYgeW91ciBtZXRob2QgcmV0dXJucyB1bmRlZmluZWQsIHRoZW4gdGhlIG1lbWJlciB3aWxsXG4gICAgICAgICAgICBiZSBleGNsdWRlZCBmcm9tIHRoZSBzZXJpYWxpemF0aW9uLlxuXG4gICAgICAgICAgICBJZiB0aGUgcmVwbGFjZXIgcGFyYW1ldGVyIGlzIGFuIGFycmF5IG9mIHN0cmluZ3MsIHRoZW4gaXQgd2lsbCBiZVxuICAgICAgICAgICAgdXNlZCB0byBzZWxlY3QgdGhlIG1lbWJlcnMgdG8gYmUgc2VyaWFsaXplZC4gSXQgZmlsdGVycyB0aGUgcmVzdWx0c1xuICAgICAgICAgICAgc3VjaCB0aGF0IG9ubHkgbWVtYmVycyB3aXRoIGtleXMgbGlzdGVkIGluIHRoZSByZXBsYWNlciBhcnJheSBhcmVcbiAgICAgICAgICAgIHN0cmluZ2lmaWVkLlxuXG4gICAgICAgICAgICBWYWx1ZXMgdGhhdCBkbyBub3QgaGF2ZSBKU09OIHJlcHJlc2VudGF0aW9ucywgc3VjaCBhcyB1bmRlZmluZWQgb3JcbiAgICAgICAgICAgIGZ1bmN0aW9ucywgd2lsbCBub3QgYmUgc2VyaWFsaXplZC4gU3VjaCB2YWx1ZXMgaW4gb2JqZWN0cyB3aWxsIGJlXG4gICAgICAgICAgICBkcm9wcGVkOyBpbiBhcnJheXMgdGhleSB3aWxsIGJlIHJlcGxhY2VkIHdpdGggbnVsbC4gWW91IGNhbiB1c2VcbiAgICAgICAgICAgIGEgcmVwbGFjZXIgZnVuY3Rpb24gdG8gcmVwbGFjZSB0aG9zZSB3aXRoIEpTT04gdmFsdWVzLlxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodW5kZWZpbmVkKSByZXR1cm5zIHVuZGVmaW5lZC5cblxuICAgICAgICAgICAgVGhlIG9wdGlvbmFsIHNwYWNlIHBhcmFtZXRlciBwcm9kdWNlcyBhIHN0cmluZ2lmaWNhdGlvbiBvZiB0aGVcbiAgICAgICAgICAgIHZhbHVlIHRoYXQgaXMgZmlsbGVkIHdpdGggbGluZSBicmVha3MgYW5kIGluZGVudGF0aW9uIHRvIG1ha2UgaXRcbiAgICAgICAgICAgIGVhc2llciB0byByZWFkLlxuXG4gICAgICAgICAgICBJZiB0aGUgc3BhY2UgcGFyYW1ldGVyIGlzIGEgbm9uLWVtcHR5IHN0cmluZywgdGhlbiB0aGF0IHN0cmluZyB3aWxsXG4gICAgICAgICAgICBiZSB1c2VkIGZvciBpbmRlbnRhdGlvbi4gSWYgdGhlIHNwYWNlIHBhcmFtZXRlciBpcyBhIG51bWJlciwgdGhlblxuICAgICAgICAgICAgdGhlIGluZGVudGF0aW9uIHdpbGwgYmUgdGhhdCBtYW55IHNwYWNlcy5cblxuICAgICAgICAgICAgRXhhbXBsZTpcblxuICAgICAgICAgICAgdGV4dCA9IEpTT04uc3RyaW5naWZ5KFsnZScsIHtwbHVyaWJ1czogJ3VudW0nfV0pO1xuICAgICAgICAgICAgLy8gdGV4dCBpcyAnW1wiZVwiLHtcInBsdXJpYnVzXCI6XCJ1bnVtXCJ9XSdcblxuXG4gICAgICAgICAgICB0ZXh0ID0gSlNPTi5zdHJpbmdpZnkoWydlJywge3BsdXJpYnVzOiAndW51bSd9XSwgbnVsbCwgJ1xcdCcpO1xuICAgICAgICAgICAgLy8gdGV4dCBpcyAnW1xcblxcdFwiZVwiLFxcblxcdHtcXG5cXHRcXHRcInBsdXJpYnVzXCI6IFwidW51bVwiXFxuXFx0fVxcbl0nXG5cbiAgICAgICAgICAgIHRleHQgPSBKU09OLnN0cmluZ2lmeShbbmV3IERhdGUoKV0sIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNba2V5XSBpbnN0YW5jZW9mIERhdGUgP1xuICAgICAgICAgICAgICAgICAgICAnRGF0ZSgnICsgdGhpc1trZXldICsgJyknIDogdmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHRleHQgaXMgJ1tcIkRhdGUoLS0tY3VycmVudCB0aW1lLS0tKVwiXSdcblxuXG4gICAgICAgIEpTT04ucGFyc2UodGV4dCwgcmV2aXZlcilcbiAgICAgICAgICAgIFRoaXMgbWV0aG9kIHBhcnNlcyBhIEpTT04gdGV4dCB0byBwcm9kdWNlIGFuIG9iamVjdCBvciBhcnJheS5cbiAgICAgICAgICAgIEl0IGNhbiB0aHJvdyBhIFN5bnRheEVycm9yIGV4Y2VwdGlvbi5cblxuICAgICAgICAgICAgVGhlIG9wdGlvbmFsIHJldml2ZXIgcGFyYW1ldGVyIGlzIGEgZnVuY3Rpb24gdGhhdCBjYW4gZmlsdGVyIGFuZFxuICAgICAgICAgICAgdHJhbnNmb3JtIHRoZSByZXN1bHRzLiBJdCByZWNlaXZlcyBlYWNoIG9mIHRoZSBrZXlzIGFuZCB2YWx1ZXMsXG4gICAgICAgICAgICBhbmQgaXRzIHJldHVybiB2YWx1ZSBpcyB1c2VkIGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIHZhbHVlLlxuICAgICAgICAgICAgSWYgaXQgcmV0dXJucyB3aGF0IGl0IHJlY2VpdmVkLCB0aGVuIHRoZSBzdHJ1Y3R1cmUgaXMgbm90IG1vZGlmaWVkLlxuICAgICAgICAgICAgSWYgaXQgcmV0dXJucyB1bmRlZmluZWQgdGhlbiB0aGUgbWVtYmVyIGlzIGRlbGV0ZWQuXG5cbiAgICAgICAgICAgIEV4YW1wbGU6XG5cbiAgICAgICAgICAgIC8vIFBhcnNlIHRoZSB0ZXh0LiBWYWx1ZXMgdGhhdCBsb29rIGxpa2UgSVNPIGRhdGUgc3RyaW5ncyB3aWxsXG4gICAgICAgICAgICAvLyBiZSBjb252ZXJ0ZWQgdG8gRGF0ZSBvYmplY3RzLlxuXG4gICAgICAgICAgICBteURhdGEgPSBKU09OLnBhcnNlKHRleHQsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGE7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9XG4vXihcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pVChcXGR7Mn0pOihcXGR7Mn0pOihcXGR7Mn0oPzpcXC5cXGQqKT8pWiQvLmV4ZWModmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKCthWzFdLCArYVsyXSAtIDEsICthWzNdLCArYVs0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArYVs1XSwgK2FbNl0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbXlEYXRhID0gSlNPTi5wYXJzZSgnW1wiRGF0ZSgwOS8wOS8yMDAxKVwiXScsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGQ7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnNsaWNlKDAsIDUpID09PSAnRGF0ZSgnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zbGljZSgtMSkgPT09ICcpJykge1xuICAgICAgICAgICAgICAgICAgICBkID0gbmV3IERhdGUodmFsdWUuc2xpY2UoNSwgLTEpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICBUaGlzIGlzIGEgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uLiBZb3UgYXJlIGZyZWUgdG8gY29weSwgbW9kaWZ5LCBvclxuICAgIHJlZGlzdHJpYnV0ZS5cbiovXG5cbi8qanNsaW50IGV2aWw6IHRydWUsIHJlZ2V4cDogdHJ1ZSAqL1xuXG4vKm1lbWJlcnMgXCJcIiwgXCJcXGJcIiwgXCJcXHRcIiwgXCJcXG5cIiwgXCJcXGZcIiwgXCJcXHJcIiwgXCJcXFwiXCIsIEpTT04sIFwiXFxcXFwiLCBhcHBseSxcbiAgICBjYWxsLCBjaGFyQ29kZUF0LCBnZXRVVENEYXRlLCBnZXRVVENGdWxsWWVhciwgZ2V0VVRDSG91cnMsXG4gICAgZ2V0VVRDTWludXRlcywgZ2V0VVRDTW9udGgsIGdldFVUQ1NlY29uZHMsIGhhc093blByb3BlcnR5LCBqb2luLFxuICAgIGxhc3RJbmRleCwgbGVuZ3RoLCBwYXJzZSwgcHJvdG90eXBlLCBwdXNoLCByZXBsYWNlLCBzbGljZSwgc3RyaW5naWZ5LFxuICAgIHRlc3QsIHRvSlNPTiwgdG9TdHJpbmcsIHZhbHVlT2ZcbiovXG5cblxuLy8gQ3JlYXRlIGEgSlNPTiBvYmplY3Qgb25seSBpZiBvbmUgZG9lcyBub3QgYWxyZWFkeSBleGlzdC4gV2UgY3JlYXRlIHRoZVxuLy8gbWV0aG9kcyBpbiBhIGNsb3N1cmUgdG8gYXZvaWQgY3JlYXRpbmcgZ2xvYmFsIHZhcmlhYmxlcy5cblxuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgSlNPTiA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbiAgICBmdW5jdGlvbiBmKG4pIHtcbiAgICAgICAgLy8gRm9ybWF0IGludGVnZXJzIHRvIGhhdmUgYXQgbGVhc3QgdHdvIGRpZ2l0cy5cbiAgICAgICAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4gOiBuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgRGF0ZS5wcm90b3R5cGUudG9KU09OICE9PSAnZnVuY3Rpb24nKSB7XG5cbiAgICAgICAgRGF0ZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUodGhpcy52YWx1ZU9mKCkpXG4gICAgICAgICAgICAgICAgPyB0aGlzLmdldFVUQ0Z1bGxZZWFyKCkgICAgICsgJy0nICtcbiAgICAgICAgICAgICAgICAgICAgZih0aGlzLmdldFVUQ01vbnRoKCkgKyAxKSArICctJyArXG4gICAgICAgICAgICAgICAgICAgIGYodGhpcy5nZXRVVENEYXRlKCkpICAgICAgKyAnVCcgK1xuICAgICAgICAgICAgICAgICAgICBmKHRoaXMuZ2V0VVRDSG91cnMoKSkgICAgICsgJzonICtcbiAgICAgICAgICAgICAgICAgICAgZih0aGlzLmdldFVUQ01pbnV0ZXMoKSkgICArICc6JyArXG4gICAgICAgICAgICAgICAgICAgIGYodGhpcy5nZXRVVENTZWNvbmRzKCkpICAgKyAnWidcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgU3RyaW5nLnByb3RvdHlwZS50b0pTT04gICAgICA9XG4gICAgICAgICAgICBOdW1iZXIucHJvdG90eXBlLnRvSlNPTiAgPVxuICAgICAgICAgICAgQm9vbGVhbi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlT2YoKTtcbiAgICAgICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGN4LFxuICAgICAgICBlc2NhcGFibGUsXG4gICAgICAgIGdhcCxcbiAgICAgICAgaW5kZW50LFxuICAgICAgICBtZXRhLFxuICAgICAgICByZXA7XG5cblxuICAgIGZ1bmN0aW9uIHF1b3RlKHN0cmluZykge1xuXG4vLyBJZiB0aGUgc3RyaW5nIGNvbnRhaW5zIG5vIGNvbnRyb2wgY2hhcmFjdGVycywgbm8gcXVvdGUgY2hhcmFjdGVycywgYW5kIG5vXG4vLyBiYWNrc2xhc2ggY2hhcmFjdGVycywgdGhlbiB3ZSBjYW4gc2FmZWx5IHNsYXAgc29tZSBxdW90ZXMgYXJvdW5kIGl0LlxuLy8gT3RoZXJ3aXNlIHdlIG11c3QgYWxzbyByZXBsYWNlIHRoZSBvZmZlbmRpbmcgY2hhcmFjdGVycyB3aXRoIHNhZmUgZXNjYXBlXG4vLyBzZXF1ZW5jZXMuXG5cbiAgICAgICAgZXNjYXBhYmxlLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIHJldHVybiBlc2NhcGFibGUudGVzdChzdHJpbmcpID8gJ1wiJyArIHN0cmluZy5yZXBsYWNlKGVzY2FwYWJsZSwgZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHZhciBjID0gbWV0YVthXTtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYyA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IGNcbiAgICAgICAgICAgICAgICA6ICdcXFxcdScgKyAoJzAwMDAnICsgYS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpO1xuICAgICAgICB9KSArICdcIicgOiAnXCInICsgc3RyaW5nICsgJ1wiJztcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHN0cihrZXksIGhvbGRlcikge1xuXG4vLyBQcm9kdWNlIGEgc3RyaW5nIGZyb20gaG9sZGVyW2tleV0uXG5cbiAgICAgICAgdmFyIGksICAgICAgICAgIC8vIFRoZSBsb29wIGNvdW50ZXIuXG4gICAgICAgICAgICBrLCAgICAgICAgICAvLyBUaGUgbWVtYmVyIGtleS5cbiAgICAgICAgICAgIHYsICAgICAgICAgIC8vIFRoZSBtZW1iZXIgdmFsdWUuXG4gICAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgICBtaW5kID0gZ2FwLFxuICAgICAgICAgICAgcGFydGlhbCxcbiAgICAgICAgICAgIHZhbHVlID0gaG9sZGVyW2tleV07XG5cbi8vIElmIHRoZSB2YWx1ZSBoYXMgYSB0b0pTT04gbWV0aG9kLCBjYWxsIGl0IHRvIG9idGFpbiBhIHJlcGxhY2VtZW50IHZhbHVlLlxuXG4gICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0pTT04oa2V5KTtcbiAgICAgICAgfVxuXG4vLyBJZiB3ZSB3ZXJlIGNhbGxlZCB3aXRoIGEgcmVwbGFjZXIgZnVuY3Rpb24sIHRoZW4gY2FsbCB0aGUgcmVwbGFjZXIgdG9cbi8vIG9idGFpbiBhIHJlcGxhY2VtZW50IHZhbHVlLlxuXG4gICAgICAgIGlmICh0eXBlb2YgcmVwID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHJlcC5jYWxsKGhvbGRlciwga2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cblxuLy8gV2hhdCBoYXBwZW5zIG5leHQgZGVwZW5kcyBvbiB0aGUgdmFsdWUncyB0eXBlLlxuXG4gICAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICByZXR1cm4gcXVvdGUodmFsdWUpO1xuXG4gICAgICAgIGNhc2UgJ251bWJlcic6XG5cbi8vIEpTT04gbnVtYmVycyBtdXN0IGJlIGZpbml0ZS4gRW5jb2RlIG5vbi1maW5pdGUgbnVtYmVycyBhcyBudWxsLlxuXG4gICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUodmFsdWUpID8gU3RyaW5nKHZhbHVlKSA6ICdudWxsJztcblxuICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgY2FzZSAnbnVsbCc6XG5cbi8vIElmIHRoZSB2YWx1ZSBpcyBhIGJvb2xlYW4gb3IgbnVsbCwgY29udmVydCBpdCB0byBhIHN0cmluZy4gTm90ZTpcbi8vIHR5cGVvZiBudWxsIGRvZXMgbm90IHByb2R1Y2UgJ251bGwnLiBUaGUgY2FzZSBpcyBpbmNsdWRlZCBoZXJlIGluXG4vLyB0aGUgcmVtb3RlIGNoYW5jZSB0aGF0IHRoaXMgZ2V0cyBmaXhlZCBzb21lZGF5LlxuXG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcblxuLy8gSWYgdGhlIHR5cGUgaXMgJ29iamVjdCcsIHdlIG1pZ2h0IGJlIGRlYWxpbmcgd2l0aCBhbiBvYmplY3Qgb3IgYW4gYXJyYXkgb3Jcbi8vIG51bGwuXG5cbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcblxuLy8gRHVlIHRvIGEgc3BlY2lmaWNhdGlvbiBibHVuZGVyIGluIEVDTUFTY3JpcHQsIHR5cGVvZiBudWxsIGlzICdvYmplY3QnLFxuLy8gc28gd2F0Y2ggb3V0IGZvciB0aGF0IGNhc2UuXG5cbiAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ251bGwnO1xuICAgICAgICAgICAgfVxuXG4vLyBNYWtlIGFuIGFycmF5IHRvIGhvbGQgdGhlIHBhcnRpYWwgcmVzdWx0cyBvZiBzdHJpbmdpZnlpbmcgdGhpcyBvYmplY3QgdmFsdWUuXG5cbiAgICAgICAgICAgIGdhcCArPSBpbmRlbnQ7XG4gICAgICAgICAgICBwYXJ0aWFsID0gW107XG5cbi8vIElzIHRoZSB2YWx1ZSBhbiBhcnJheT9cblxuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nKSB7XG5cbi8vIFRoZSB2YWx1ZSBpcyBhbiBhcnJheS4gU3RyaW5naWZ5IGV2ZXJ5IGVsZW1lbnQuIFVzZSBudWxsIGFzIGEgcGxhY2Vob2xkZXJcbi8vIGZvciBub24tSlNPTiB2YWx1ZXMuXG5cbiAgICAgICAgICAgICAgICBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWxbaV0gPSBzdHIoaSwgdmFsdWUpIHx8ICdudWxsJztcbiAgICAgICAgICAgICAgICB9XG5cbi8vIEpvaW4gYWxsIG9mIHRoZSBlbGVtZW50cyB0b2dldGhlciwgc2VwYXJhdGVkIHdpdGggY29tbWFzLCBhbmQgd3JhcCB0aGVtIGluXG4vLyBicmFja2V0cy5cblxuICAgICAgICAgICAgICAgIHYgPSBwYXJ0aWFsLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgICA/ICdbXSdcbiAgICAgICAgICAgICAgICAgICAgOiBnYXBcbiAgICAgICAgICAgICAgICAgICAgPyAnW1xcbicgKyBnYXAgKyBwYXJ0aWFsLmpvaW4oJyxcXG4nICsgZ2FwKSArICdcXG4nICsgbWluZCArICddJ1xuICAgICAgICAgICAgICAgICAgICA6ICdbJyArIHBhcnRpYWwuam9pbignLCcpICsgJ10nO1xuICAgICAgICAgICAgICAgIGdhcCA9IG1pbmQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgICAgICB9XG5cbi8vIElmIHRoZSByZXBsYWNlciBpcyBhbiBhcnJheSwgdXNlIGl0IHRvIHNlbGVjdCB0aGUgbWVtYmVycyB0byBiZSBzdHJpbmdpZmllZC5cblxuICAgICAgICAgICAgaWYgKHJlcCAmJiB0eXBlb2YgcmVwID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHJlcC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVwW2ldID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgayA9IHJlcFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBzdHIoaywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsLnB1c2gocXVvdGUoaykgKyAoZ2FwID8gJzogJyA6ICc6JykgKyB2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbi8vIE90aGVyd2lzZSwgaXRlcmF0ZSB0aHJvdWdoIGFsbCBvZiB0aGUga2V5cyBpbiB0aGUgb2JqZWN0LlxuXG4gICAgICAgICAgICAgICAgZm9yIChrIGluIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gc3RyKGssIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGlhbC5wdXNoKHF1b3RlKGspICsgKGdhcCA/ICc6ICcgOiAnOicpICsgdik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbi8vIEpvaW4gYWxsIG9mIHRoZSBtZW1iZXIgdGV4dHMgdG9nZXRoZXIsIHNlcGFyYXRlZCB3aXRoIGNvbW1hcyxcbi8vIGFuZCB3cmFwIHRoZW0gaW4gYnJhY2VzLlxuXG4gICAgICAgICAgICB2ID0gcGFydGlhbC5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICA/ICd7fSdcbiAgICAgICAgICAgICAgICA6IGdhcFxuICAgICAgICAgICAgICAgID8gJ3tcXG4nICsgZ2FwICsgcGFydGlhbC5qb2luKCcsXFxuJyArIGdhcCkgKyAnXFxuJyArIG1pbmQgKyAnfSdcbiAgICAgICAgICAgICAgICA6ICd7JyArIHBhcnRpYWwuam9pbignLCcpICsgJ30nO1xuICAgICAgICAgICAgZ2FwID0gbWluZDtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9XG4gICAgfVxuXG4vLyBJZiB0aGUgSlNPTiBvYmplY3QgZG9lcyBub3QgeWV0IGhhdmUgYSBzdHJpbmdpZnkgbWV0aG9kLCBnaXZlIGl0IG9uZS5cblxuICAgIGlmICh0eXBlb2YgSlNPTi5zdHJpbmdpZnkgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXNjYXBhYmxlID0gL1tcXFxcXFxcIlxceDAwLVxceDFmXFx4N2YtXFx4OWZcXHUwMGFkXFx1MDYwMC1cXHUwNjA0XFx1MDcwZlxcdTE3YjRcXHUxN2I1XFx1MjAwYy1cXHUyMDBmXFx1MjAyOC1cXHUyMDJmXFx1MjA2MC1cXHUyMDZmXFx1ZmVmZlxcdWZmZjAtXFx1ZmZmZl0vZztcbiAgICAgICAgbWV0YSA9IHsgICAgLy8gdGFibGUgb2YgY2hhcmFjdGVyIHN1YnN0aXR1dGlvbnNcbiAgICAgICAgICAgICdcXGInOiAnXFxcXGInLFxuICAgICAgICAgICAgJ1xcdCc6ICdcXFxcdCcsXG4gICAgICAgICAgICAnXFxuJzogJ1xcXFxuJyxcbiAgICAgICAgICAgICdcXGYnOiAnXFxcXGYnLFxuICAgICAgICAgICAgJ1xccic6ICdcXFxccicsXG4gICAgICAgICAgICAnXCInIDogJ1xcXFxcIicsXG4gICAgICAgICAgICAnXFxcXCc6ICdcXFxcXFxcXCdcbiAgICAgICAgfTtcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkgPSBmdW5jdGlvbiAodmFsdWUsIHJlcGxhY2VyLCBzcGFjZSkge1xuXG4vLyBUaGUgc3RyaW5naWZ5IG1ldGhvZCB0YWtlcyBhIHZhbHVlIGFuZCBhbiBvcHRpb25hbCByZXBsYWNlciwgYW5kIGFuIG9wdGlvbmFsXG4vLyBzcGFjZSBwYXJhbWV0ZXIsIGFuZCByZXR1cm5zIGEgSlNPTiB0ZXh0LiBUaGUgcmVwbGFjZXIgY2FuIGJlIGEgZnVuY3Rpb25cbi8vIHRoYXQgY2FuIHJlcGxhY2UgdmFsdWVzLCBvciBhbiBhcnJheSBvZiBzdHJpbmdzIHRoYXQgd2lsbCBzZWxlY3QgdGhlIGtleXMuXG4vLyBBIGRlZmF1bHQgcmVwbGFjZXIgbWV0aG9kIGNhbiBiZSBwcm92aWRlZC4gVXNlIG9mIHRoZSBzcGFjZSBwYXJhbWV0ZXIgY2FuXG4vLyBwcm9kdWNlIHRleHQgdGhhdCBpcyBtb3JlIGVhc2lseSByZWFkYWJsZS5cblxuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICBnYXAgPSAnJztcbiAgICAgICAgICAgIGluZGVudCA9ICcnO1xuXG4vLyBJZiB0aGUgc3BhY2UgcGFyYW1ldGVyIGlzIGEgbnVtYmVyLCBtYWtlIGFuIGluZGVudCBzdHJpbmcgY29udGFpbmluZyB0aGF0XG4vLyBtYW55IHNwYWNlcy5cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzcGFjZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3BhY2U7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBpbmRlbnQgKz0gJyAnO1xuICAgICAgICAgICAgICAgIH1cblxuLy8gSWYgdGhlIHNwYWNlIHBhcmFtZXRlciBpcyBhIHN0cmluZywgaXQgd2lsbCBiZSB1c2VkIGFzIHRoZSBpbmRlbnQgc3RyaW5nLlxuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcGFjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpbmRlbnQgPSBzcGFjZTtcbiAgICAgICAgICAgIH1cblxuLy8gSWYgdGhlcmUgaXMgYSByZXBsYWNlciwgaXQgbXVzdCBiZSBhIGZ1bmN0aW9uIG9yIGFuIGFycmF5LlxuLy8gT3RoZXJ3aXNlLCB0aHJvdyBhbiBlcnJvci5cblxuICAgICAgICAgICAgcmVwID0gcmVwbGFjZXI7XG4gICAgICAgICAgICBpZiAocmVwbGFjZXIgJiYgdHlwZW9mIHJlcGxhY2VyICE9PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICAgICAgICAgICh0eXBlb2YgcmVwbGFjZXIgIT09ICdvYmplY3QnIHx8XG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiByZXBsYWNlci5sZW5ndGggIT09ICdudW1iZXInKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSlNPTi5zdHJpbmdpZnknKTtcbiAgICAgICAgICAgIH1cblxuLy8gTWFrZSBhIGZha2Ugcm9vdCBvYmplY3QgY29udGFpbmluZyBvdXIgdmFsdWUgdW5kZXIgdGhlIGtleSBvZiAnJy5cbi8vIFJldHVybiB0aGUgcmVzdWx0IG9mIHN0cmluZ2lmeWluZyB0aGUgdmFsdWUuXG5cbiAgICAgICAgICAgIHJldHVybiBzdHIoJycsIHsnJzogdmFsdWV9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cblxuLy8gSWYgdGhlIEpTT04gb2JqZWN0IGRvZXMgbm90IHlldCBoYXZlIGEgcGFyc2UgbWV0aG9kLCBnaXZlIGl0IG9uZS5cblxuICAgIGlmICh0eXBlb2YgSlNPTi5wYXJzZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjeCA9IC9bXFx1MDAwMFxcdTAwYWRcXHUwNjAwLVxcdTA2MDRcXHUwNzBmXFx1MTdiNFxcdTE3YjVcXHUyMDBjLVxcdTIwMGZcXHUyMDI4LVxcdTIwMmZcXHUyMDYwLVxcdTIwNmZcXHVmZWZmXFx1ZmZmMC1cXHVmZmZmXS9nO1xuICAgICAgICBKU09OLnBhcnNlID0gZnVuY3Rpb24gKHRleHQsIHJldml2ZXIpIHtcblxuLy8gVGhlIHBhcnNlIG1ldGhvZCB0YWtlcyBhIHRleHQgYW5kIGFuIG9wdGlvbmFsIHJldml2ZXIgZnVuY3Rpb24sIGFuZCByZXR1cm5zXG4vLyBhIEphdmFTY3JpcHQgdmFsdWUgaWYgdGhlIHRleHQgaXMgYSB2YWxpZCBKU09OIHRleHQuXG5cbiAgICAgICAgICAgIHZhciBqO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiB3YWxrKGhvbGRlciwga2V5KSB7XG5cbi8vIFRoZSB3YWxrIG1ldGhvZCBpcyB1c2VkIHRvIHJlY3Vyc2l2ZWx5IHdhbGsgdGhlIHJlc3VsdGluZyBzdHJ1Y3R1cmUgc29cbi8vIHRoYXQgbW9kaWZpY2F0aW9ucyBjYW4gYmUgbWFkZS5cblxuICAgICAgICAgICAgICAgIHZhciBrLCB2LCB2YWx1ZSA9IGhvbGRlcltrZXldO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoayBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gd2Fsayh2YWx1ZSwgayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVtrXSA9IHY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHZhbHVlW2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmV2aXZlci5jYWxsKGhvbGRlciwga2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG5cblxuLy8gUGFyc2luZyBoYXBwZW5zIGluIGZvdXIgc3RhZ2VzLiBJbiB0aGUgZmlyc3Qgc3RhZ2UsIHdlIHJlcGxhY2UgY2VydGFpblxuLy8gVW5pY29kZSBjaGFyYWN0ZXJzIHdpdGggZXNjYXBlIHNlcXVlbmNlcy4gSmF2YVNjcmlwdCBoYW5kbGVzIG1hbnkgY2hhcmFjdGVyc1xuLy8gaW5jb3JyZWN0bHksIGVpdGhlciBzaWxlbnRseSBkZWxldGluZyB0aGVtLCBvciB0cmVhdGluZyB0aGVtIGFzIGxpbmUgZW5kaW5ncy5cblxuICAgICAgICAgICAgdGV4dCA9IFN0cmluZyh0ZXh0KTtcbiAgICAgICAgICAgIGN4Lmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICBpZiAoY3gudGVzdCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoY3gsIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnXFxcXHUnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICgnMDAwMCcgKyBhLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbi8vIEluIHRoZSBzZWNvbmQgc3RhZ2UsIHdlIHJ1biB0aGUgdGV4dCBhZ2FpbnN0IHJlZ3VsYXIgZXhwcmVzc2lvbnMgdGhhdCBsb29rXG4vLyBmb3Igbm9uLUpTT04gcGF0dGVybnMuIFdlIGFyZSBlc3BlY2lhbGx5IGNvbmNlcm5lZCB3aXRoICcoKScgYW5kICduZXcnXG4vLyBiZWNhdXNlIHRoZXkgY2FuIGNhdXNlIGludm9jYXRpb24sIGFuZCAnPScgYmVjYXVzZSBpdCBjYW4gY2F1c2UgbXV0YXRpb24uXG4vLyBCdXQganVzdCB0byBiZSBzYWZlLCB3ZSB3YW50IHRvIHJlamVjdCBhbGwgdW5leHBlY3RlZCBmb3Jtcy5cblxuLy8gV2Ugc3BsaXQgdGhlIHNlY29uZCBzdGFnZSBpbnRvIDQgcmVnZXhwIG9wZXJhdGlvbnMgaW4gb3JkZXIgdG8gd29yayBhcm91bmRcbi8vIGNyaXBwbGluZyBpbmVmZmljaWVuY2llcyBpbiBJRSdzIGFuZCBTYWZhcmkncyByZWdleHAgZW5naW5lcy4gRmlyc3Qgd2Vcbi8vIHJlcGxhY2UgdGhlIEpTT04gYmFja3NsYXNoIHBhaXJzIHdpdGggJ0AnIChhIG5vbi1KU09OIGNoYXJhY3RlcikuIFNlY29uZCwgd2Vcbi8vIHJlcGxhY2UgYWxsIHNpbXBsZSB2YWx1ZSB0b2tlbnMgd2l0aCAnXScgY2hhcmFjdGVycy4gVGhpcmQsIHdlIGRlbGV0ZSBhbGxcbi8vIG9wZW4gYnJhY2tldHMgdGhhdCBmb2xsb3cgYSBjb2xvbiBvciBjb21tYSBvciB0aGF0IGJlZ2luIHRoZSB0ZXh0LiBGaW5hbGx5LFxuLy8gd2UgbG9vayB0byBzZWUgdGhhdCB0aGUgcmVtYWluaW5nIGNoYXJhY3RlcnMgYXJlIG9ubHkgd2hpdGVzcGFjZSBvciAnXScgb3Jcbi8vICcsJyBvciAnOicgb3IgJ3snIG9yICd9Jy4gSWYgdGhhdCBpcyBzbywgdGhlbiB0aGUgdGV4dCBpcyBzYWZlIGZvciBldmFsLlxuXG4gICAgICAgICAgICBpZiAoL15bXFxdLDp7fVxcc10qJC9cbiAgICAgICAgICAgICAgICAgICAgLnRlc3QodGV4dC5yZXBsYWNlKC9cXFxcKD86W1wiXFxcXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csICdAJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIlteXCJcXFxcXFxuXFxyXSpcInx0cnVlfGZhbHNlfG51bGx8LT9cXGQrKD86XFwuXFxkKik/KD86W2VFXVsrXFwtXT9cXGQrKT8vZywgJ10nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyg/Ol58OnwsKSg/OlxccypcXFspKy9nLCAnJykpKSB7XG5cbi8vIEluIHRoZSB0aGlyZCBzdGFnZSB3ZSB1c2UgdGhlIGV2YWwgZnVuY3Rpb24gdG8gY29tcGlsZSB0aGUgdGV4dCBpbnRvIGFcbi8vIEphdmFTY3JpcHQgc3RydWN0dXJlLiBUaGUgJ3snIG9wZXJhdG9yIGlzIHN1YmplY3QgdG8gYSBzeW50YWN0aWMgYW1iaWd1aXR5XG4vLyBpbiBKYXZhU2NyaXB0OiBpdCBjYW4gYmVnaW4gYSBibG9jayBvciBhbiBvYmplY3QgbGl0ZXJhbC4gV2Ugd3JhcCB0aGUgdGV4dFxuLy8gaW4gcGFyZW5zIHRvIGVsaW1pbmF0ZSB0aGUgYW1iaWd1aXR5LlxuXG4gICAgICAgICAgICAgICAgaiA9IGV2YWwoJygnICsgdGV4dCArICcpJyk7XG5cbi8vIEluIHRoZSBvcHRpb25hbCBmb3VydGggc3RhZ2UsIHdlIHJlY3Vyc2l2ZWx5IHdhbGsgdGhlIG5ldyBzdHJ1Y3R1cmUsIHBhc3Npbmdcbi8vIGVhY2ggbmFtZS92YWx1ZSBwYWlyIHRvIGEgcmV2aXZlciBmdW5jdGlvbiBmb3IgcG9zc2libGUgdHJhbnNmb3JtYXRpb24uXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIHJldml2ZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgPyB3YWxrKHsnJzogan0sICcnKVxuICAgICAgICAgICAgICAgICAgICA6IGo7XG4gICAgICAgICAgICB9XG5cbi8vIElmIHRoZSB0ZXh0IGlzIG5vdCBKU09OIHBhcnNlYWJsZSwgdGhlbiBhIFN5bnRheEVycm9yIGlzIHRocm93bi5cblxuICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdKU09OLnBhcnNlJyk7XG4gICAgICAgIH07XG4gICAgfVxufSgpKTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBwYXJzZSA9IHJlcXVpcmUoJ3VybCcpLnBhcnNlO1xuXG4vKipcbiAqIEV4cG9zZSBgZG9tYWluYFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZG9tYWluO1xuXG4vKipcbiAqIFJlZ0V4cFxuICovXG5cbnZhciByZWdleHAgPSAvW2EtejAtOV1bYS16MC05XFwtXSpbYS16MC05XVxcLlthLXpcXC5dezIsNn0kL2k7XG5cbi8qKlxuICogR2V0IHRoZSB0b3AgZG9tYWluLlxuICogXG4gKiBPZmZpY2lhbCBHcmFtbWFyOiBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM4ODMjcGFnZS01NlxuICogTG9vayBmb3IgdGxkcyB3aXRoIHVwIHRvIDItNiBjaGFyYWN0ZXJzLlxuICogXG4gKiBFeGFtcGxlOlxuICogXG4gKiAgICAgIGRvbWFpbignaHR0cDovL2xvY2FsaG9zdDozMDAwL2JheicpO1xuICogICAgICAvLyA9PiAnJ1xuICogICAgICBkb21haW4oJ2h0dHA6Ly9kZXY6MzAwMC9iYXonKTtcbiAqICAgICAgLy8gPT4gJydcbiAqICAgICAgZG9tYWluKCdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYmF6Jyk7XG4gKiAgICAgIC8vID0+ICcnXG4gKiAgICAgIGRvbWFpbignaHR0cDovL3NlZ21lbnQuaW8vYmF6Jyk7XG4gKiAgICAgIC8vID0+ICdzZWdtZW50LmlvJ1xuICogXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGRvbWFpbih1cmwpe1xuICB2YXIgaG9zdCA9IHBhcnNlKHVybCkuaG9zdG5hbWU7XG4gIHZhciBtYXRjaCA9IGhvc3QubWF0Y2gocmVnZXhwKTtcbiAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMF0gOiAnJztcbn07XG4iLCJcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ2FuYWx5dGljczpncm91cCcpO1xudmFyIEVudGl0eSA9IHJlcXVpcmUoJy4vZW50aXR5Jyk7XG52YXIgaW5oZXJpdCA9IHJlcXVpcmUoJ2luaGVyaXQnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnYmluZCcpO1xuXG5cbi8qKlxuICogR3JvdXAgZGVmYXVsdHNcbiAqL1xuXG5Hcm91cC5kZWZhdWx0cyA9IHtcbiAgcGVyc2lzdDogdHJ1ZSxcbiAgY29va2llOiB7XG4gICAga2V5OiAnYWpzX2dyb3VwX2lkJ1xuICB9LFxuICBsb2NhbFN0b3JhZ2U6IHtcbiAgICBrZXk6ICdhanNfZ3JvdXBfcHJvcGVydGllcydcbiAgfVxufTtcblxuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYEdyb3VwYCB3aXRoIGBvcHRpb25zYC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIEdyb3VwIChvcHRpb25zKSB7XG4gIHRoaXMuZGVmYXVsdHMgPSBHcm91cC5kZWZhdWx0cztcbiAgdGhpcy5kZWJ1ZyA9IGRlYnVnO1xuICBFbnRpdHkuY2FsbCh0aGlzLCBvcHRpb25zKTtcbn1cblxuXG4vKipcbiAqIEluaGVyaXQgYEVudGl0eWBcbiAqL1xuXG5pbmhlcml0KEdyb3VwLCBFbnRpdHkpO1xuXG5cbi8qKlxuICogRXhwb3NlIHRoZSBncm91cCBzaW5nbGV0b24uXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBiaW5kLmFsbChuZXcgR3JvdXAoKSk7XG5cblxuLyoqXG4gKiBFeHBvc2UgdGhlIGBHcm91cGAgY29uc3RydWN0b3IuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMuR3JvdXAgPSBHcm91cDtcbiIsIlxudmFyIHRyYXZlcnNlID0gcmVxdWlyZSgnaXNvZGF0ZS10cmF2ZXJzZScpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnZGVmYXVsdHMnKTtcbnZhciBjb29raWUgPSByZXF1aXJlKCcuL2Nvb2tpZScpO1xudmFyIHN0b3JlID0gcmVxdWlyZSgnLi9zdG9yZScpO1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJ2V4dGVuZCcpO1xudmFyIGNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcblxuXG4vKipcbiAqIEV4cG9zZSBgRW50aXR5YFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gRW50aXR5O1xuXG5cbi8qKlxuICogSW5pdGlhbGl6ZSBuZXcgYEVudGl0eWAgd2l0aCBgb3B0aW9uc2AuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBFbnRpdHkob3B0aW9ucyl7XG4gIHRoaXMucHJvdG9jb2wgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XG4gIHRoaXMub3B0aW9ucyhvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHN0b3JhZ2UuXG4gKlxuICogV2hlbiAucHJvdG9jb2wgaXMgYGZpbGU6YCBvciBgY2hyb21lLWV4dGVuc2lvbjpgXG4gKiB0aGUgbWV0aG9kIHdpbGwgcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UgKHN0b3JlKVxuICogb3RoZXJ3aXNlIGl0IHdpbGwgcmV0dXJuIHRoZSBjb29raWUuXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbkVudGl0eS5wcm90b3R5cGUuc3RvcmFnZSA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAnZmlsZTonID09IHRoaXMucHJvdG9jb2xcbiAgICB8fCAnY2hyb21lLWV4dGVuc2lvbjonID09IHRoaXMucHJvdG9jb2xcbiAgICA/IHN0b3JlXG4gICAgOiBjb29raWU7XG59O1xuXG4vKipcbiAqIEdldCBvciBzZXQgc3RvcmFnZSBgb3B0aW9uc2AuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqICAgQHByb3BlcnR5IHtPYmplY3R9IGNvb2tpZVxuICogICBAcHJvcGVydHkge09iamVjdH0gbG9jYWxTdG9yYWdlXG4gKiAgIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gcGVyc2lzdCAoZGVmYXVsdDogYHRydWVgKVxuICovXG5cbkVudGl0eS5wcm90b3R5cGUub3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgZGVmYXVsdHMob3B0aW9ucywgdGhpcy5kZWZhdWx0cyB8fCB7fSk7XG4gIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xufTtcblxuXG4vKipcbiAqIEdldCBvciBzZXQgdGhlIGVudGl0eSdzIGBpZGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKi9cblxuRW50aXR5LnByb3RvdHlwZS5pZCA9IGZ1bmN0aW9uIChpZCkge1xuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDA6IHJldHVybiB0aGlzLl9nZXRJZCgpO1xuICAgIGNhc2UgMTogcmV0dXJuIHRoaXMuX3NldElkKGlkKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIEdldCB0aGUgZW50aXR5J3MgaWQuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbkVudGl0eS5wcm90b3R5cGUuX2dldElkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RvcmFnZSA9IHRoaXMuc3RvcmFnZSgpO1xuICB2YXIgcmV0ID0gdGhpcy5fb3B0aW9ucy5wZXJzaXN0XG4gICAgPyBzdG9yYWdlLmdldCh0aGlzLl9vcHRpb25zLmNvb2tpZS5rZXkpXG4gICAgOiB0aGlzLl9pZDtcbiAgcmV0dXJuIHJldCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHJldDtcbn07XG5cblxuLyoqXG4gKiBTZXQgdGhlIGVudGl0eSdzIGBpZGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKi9cblxuRW50aXR5LnByb3RvdHlwZS5fc2V0SWQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgdmFyIHN0b3JhZ2UgPSB0aGlzLnN0b3JhZ2UoKTtcbiAgaWYgKHRoaXMuX29wdGlvbnMucGVyc2lzdCkge1xuICAgIHN0b3JhZ2Uuc2V0KHRoaXMuX29wdGlvbnMuY29va2llLmtleSwgaWQpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2lkID0gaWQ7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBHZXQgb3Igc2V0IHRoZSBlbnRpdHkncyBgdHJhaXRzYC5cbiAqXG4gKiBCQUNLV0FSRFMgQ09NUEFUSUJJTElUWTogYWxpYXNlZCB0byBgcHJvcGVydGllc2BcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdHJhaXRzXG4gKi9cblxuRW50aXR5LnByb3RvdHlwZS5wcm9wZXJ0aWVzID1cbkVudGl0eS5wcm90b3R5cGUudHJhaXRzID0gZnVuY3Rpb24gKHRyYWl0cykge1xuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDA6IHJldHVybiB0aGlzLl9nZXRUcmFpdHMoKTtcbiAgICBjYXNlIDE6IHJldHVybiB0aGlzLl9zZXRUcmFpdHModHJhaXRzKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIEdldCB0aGUgZW50aXR5J3MgdHJhaXRzLiBBbHdheXMgY29udmVydCBJU08gZGF0ZSBzdHJpbmdzIGludG8gcmVhbCBkYXRlcyxcbiAqIHNpbmNlIHRoZXkgYXJlbid0IHBhcnNlZCBiYWNrIGZyb20gbG9jYWwgc3RvcmFnZS5cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuRW50aXR5LnByb3RvdHlwZS5fZ2V0VHJhaXRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcmV0ID0gdGhpcy5fb3B0aW9ucy5wZXJzaXN0XG4gICAgPyBzdG9yZS5nZXQodGhpcy5fb3B0aW9ucy5sb2NhbFN0b3JhZ2Uua2V5KVxuICAgIDogdGhpcy5fdHJhaXRzO1xuICByZXR1cm4gcmV0ID8gdHJhdmVyc2UoY2xvbmUocmV0KSkgOiB7fTtcbn07XG5cblxuLyoqXG4gKiBTZXQgdGhlIGVudGl0eSdzIGB0cmFpdHNgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0cmFpdHNcbiAqL1xuXG5FbnRpdHkucHJvdG90eXBlLl9zZXRUcmFpdHMgPSBmdW5jdGlvbiAodHJhaXRzKSB7XG4gIHRyYWl0cyB8fCAodHJhaXRzID0ge30pO1xuICBpZiAodGhpcy5fb3B0aW9ucy5wZXJzaXN0KSB7XG4gICAgc3RvcmUuc2V0KHRoaXMuX29wdGlvbnMubG9jYWxTdG9yYWdlLmtleSwgdHJhaXRzKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl90cmFpdHMgPSB0cmFpdHM7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBJZGVudGlmeSB0aGUgZW50aXR5IHdpdGggYW4gYGlkYCBhbmQgYHRyYWl0c2AuIElmIHdlIGl0J3MgdGhlIHNhbWUgZW50aXR5LFxuICogZXh0ZW5kIHRoZSBleGlzdGluZyBgdHJhaXRzYCBpbnN0ZWFkIG9mIG92ZXJ3cml0aW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHBhcmFtIHtPYmplY3R9IHRyYWl0c1xuICovXG5cbkVudGl0eS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAoaWQsIHRyYWl0cykge1xuICB0cmFpdHMgfHwgKHRyYWl0cyA9IHt9KTtcbiAgdmFyIGN1cnJlbnQgPSB0aGlzLmlkKCk7XG4gIGlmIChjdXJyZW50ID09PSBudWxsIHx8IGN1cnJlbnQgPT09IGlkKSB0cmFpdHMgPSBleHRlbmQodGhpcy50cmFpdHMoKSwgdHJhaXRzKTtcbiAgaWYgKGlkKSB0aGlzLmlkKGlkKTtcbiAgdGhpcy5kZWJ1ZygnaWRlbnRpZnkgJW8sICVvJywgaWQsIHRyYWl0cyk7XG4gIHRoaXMudHJhaXRzKHRyYWl0cyk7XG4gIHRoaXMuc2F2ZSgpO1xufTtcblxuXG4vKipcbiAqIFNhdmUgdGhlIGVudGl0eSB0byBsb2NhbCBzdG9yYWdlIGFuZCB0aGUgY29va2llLlxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuRW50aXR5LnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMuX29wdGlvbnMucGVyc2lzdCkgcmV0dXJuIGZhbHNlO1xuICBjb29raWUuc2V0KHRoaXMuX29wdGlvbnMuY29va2llLmtleSwgdGhpcy5pZCgpKTtcbiAgc3RvcmUuc2V0KHRoaXMuX29wdGlvbnMubG9jYWxTdG9yYWdlLmtleSwgdGhpcy50cmFpdHMoKSk7XG4gIHJldHVybiB0cnVlO1xufTtcblxuXG4vKipcbiAqIExvZyB0aGUgZW50aXR5IG91dCwgcmVzZXRpbmcgYGlkYCBhbmQgYHRyYWl0c2AgdG8gZGVmYXVsdHMuXG4gKi9cblxuRW50aXR5LnByb3RvdHlwZS5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuaWQobnVsbCk7XG4gIHRoaXMudHJhaXRzKHt9KTtcbiAgY29va2llLnJlbW92ZSh0aGlzLl9vcHRpb25zLmNvb2tpZS5rZXkpO1xuICBzdG9yZS5yZW1vdmUodGhpcy5fb3B0aW9ucy5sb2NhbFN0b3JhZ2Uua2V5KTtcbn07XG5cblxuLyoqXG4gKiBSZXNldCBhbGwgZW50aXR5IHN0YXRlLCBsb2dnaW5nIG91dCBhbmQgcmV0dXJuaW5nIG9wdGlvbnMgdG8gZGVmYXVsdHMuXG4gKi9cblxuRW50aXR5LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sb2dvdXQoKTtcbiAgdGhpcy5vcHRpb25zKHt9KTtcbn07XG5cblxuLyoqXG4gKiBMb2FkIHNhdmVkIGVudGl0eSBgaWRgIG9yIGB0cmFpdHNgIGZyb20gc3RvcmFnZS5cbiAqL1xuXG5FbnRpdHkucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuaWQoY29va2llLmdldCh0aGlzLl9vcHRpb25zLmNvb2tpZS5rZXkpKTtcbiAgdGhpcy50cmFpdHMoc3RvcmUuZ2V0KHRoaXMuX29wdGlvbnMubG9jYWxTdG9yYWdlLmtleSkpO1xufTtcblxuIiwiXG52YXIgYmluZCA9IHJlcXVpcmUoJ2JpbmQnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJ2RlZmF1bHRzJyk7XG52YXIgc3RvcmUgPSByZXF1aXJlKCdzdG9yZS5qcycpO1xuXG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIG5ldyBgU3RvcmVgIHdpdGggYG9wdGlvbnNgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gU3RvcmUgKG9wdGlvbnMpIHtcbiAgdGhpcy5vcHRpb25zKG9wdGlvbnMpO1xufVxuXG5cbi8qKlxuICogU2V0IHRoZSBgb3B0aW9uc2AgZm9yIHRoZSBzdG9yZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogICBAZmllbGQge0Jvb2xlYW59IGVuYWJsZWQgKHRydWUpXG4gKi9cblxuU3RvcmUucHJvdG90eXBlLm9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGRlZmF1bHRzKG9wdGlvbnMsIHsgZW5hYmxlZCA6IHRydWUgfSk7XG5cbiAgdGhpcy5lbmFibGVkICA9IG9wdGlvbnMuZW5hYmxlZCAmJiBzdG9yZS5lbmFibGVkO1xuICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbn07XG5cblxuLyoqXG4gKiBTZXQgYSBga2V5YCBhbmQgYHZhbHVlYCBpbiBsb2NhbCBzdG9yYWdlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZVxuICovXG5cblN0b3JlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICBpZiAoIXRoaXMuZW5hYmxlZCkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gc3RvcmUuc2V0KGtleSwgdmFsdWUpO1xufTtcblxuXG4vKipcbiAqIEdldCBhIHZhbHVlIGZyb20gbG9jYWwgc3RvcmFnZSBieSBga2V5YC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuU3RvcmUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgaWYgKCF0aGlzLmVuYWJsZWQpIHJldHVybiBudWxsO1xuICByZXR1cm4gc3RvcmUuZ2V0KGtleSk7XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlIGEgdmFsdWUgZnJvbSBsb2NhbCBzdG9yYWdlIGJ5IGBrZXlgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqL1xuXG5TdG9yZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICBpZiAoIXRoaXMuZW5hYmxlZCkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gc3RvcmUucmVtb3ZlKGtleSk7XG59O1xuXG5cbi8qKlxuICogRXhwb3NlIHRoZSBzdG9yZSBzaW5nbGV0b24uXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBiaW5kLmFsbChuZXcgU3RvcmUoKSk7XG5cblxuLyoqXG4gKiBFeHBvc2UgdGhlIGBTdG9yZWAgY29uc3RydWN0b3IuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMuU3RvcmUgPSBTdG9yZTtcbiIsInZhciBqc29uICAgICAgICAgICAgID0gcmVxdWlyZSgnanNvbicpXG4gICwgc3RvcmUgICAgICAgICAgICA9IHt9XG4gICwgd2luICAgICAgICAgICAgICA9IHdpbmRvd1xuXHQsXHRkb2MgICAgICAgICAgICAgID0gd2luLmRvY3VtZW50XG5cdCxcdGxvY2FsU3RvcmFnZU5hbWUgPSAnbG9jYWxTdG9yYWdlJ1xuXHQsXHRuYW1lc3BhY2UgICAgICAgID0gJ19fc3RvcmVqc19fJ1xuXHQsXHRzdG9yYWdlO1xuXG5zdG9yZS5kaXNhYmxlZCA9IGZhbHNlXG5zdG9yZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7fVxuc3RvcmUuZ2V0ID0gZnVuY3Rpb24oa2V5KSB7fVxuc3RvcmUucmVtb3ZlID0gZnVuY3Rpb24oa2V5KSB7fVxuc3RvcmUuY2xlYXIgPSBmdW5jdGlvbigpIHt9XG5zdG9yZS50cmFuc2FjdCA9IGZ1bmN0aW9uKGtleSwgZGVmYXVsdFZhbCwgdHJhbnNhY3Rpb25Gbikge1xuXHR2YXIgdmFsID0gc3RvcmUuZ2V0KGtleSlcblx0aWYgKHRyYW5zYWN0aW9uRm4gPT0gbnVsbCkge1xuXHRcdHRyYW5zYWN0aW9uRm4gPSBkZWZhdWx0VmFsXG5cdFx0ZGVmYXVsdFZhbCA9IG51bGxcblx0fVxuXHRpZiAodHlwZW9mIHZhbCA9PSAndW5kZWZpbmVkJykgeyB2YWwgPSBkZWZhdWx0VmFsIHx8IHt9IH1cblx0dHJhbnNhY3Rpb25Gbih2YWwpXG5cdHN0b3JlLnNldChrZXksIHZhbClcbn1cbnN0b3JlLmdldEFsbCA9IGZ1bmN0aW9uKCkge31cblxuc3RvcmUuc2VyaWFsaXplID0gZnVuY3Rpb24odmFsdWUpIHtcblx0cmV0dXJuIGpzb24uc3RyaW5naWZ5KHZhbHVlKVxufVxuc3RvcmUuZGVzZXJpYWxpemUgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7IHJldHVybiB1bmRlZmluZWQgfVxuXHR0cnkgeyByZXR1cm4ganNvbi5wYXJzZSh2YWx1ZSkgfVxuXHRjYXRjaChlKSB7IHJldHVybiB2YWx1ZSB8fCB1bmRlZmluZWQgfVxufVxuXG4vLyBGdW5jdGlvbnMgdG8gZW5jYXBzdWxhdGUgcXVlc3Rpb25hYmxlIEZpcmVGb3ggMy42LjEzIGJlaGF2aW9yXG4vLyB3aGVuIGFib3V0LmNvbmZpZzo6ZG9tLnN0b3JhZ2UuZW5hYmxlZCA9PT0gZmFsc2Vcbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWFyY3Vzd2VzdGluL3N0b3JlLmpzL2lzc3VlcyNpc3N1ZS8xM1xuZnVuY3Rpb24gaXNMb2NhbFN0b3JhZ2VOYW1lU3VwcG9ydGVkKCkge1xuXHR0cnkgeyByZXR1cm4gKGxvY2FsU3RvcmFnZU5hbWUgaW4gd2luICYmIHdpbltsb2NhbFN0b3JhZ2VOYW1lXSkgfVxuXHRjYXRjaChlcnIpIHsgcmV0dXJuIGZhbHNlIH1cbn1cblxuaWYgKGlzTG9jYWxTdG9yYWdlTmFtZVN1cHBvcnRlZCgpKSB7XG5cdHN0b3JhZ2UgPSB3aW5bbG9jYWxTdG9yYWdlTmFtZV1cblx0c3RvcmUuc2V0ID0gZnVuY3Rpb24oa2V5LCB2YWwpIHtcblx0XHRpZiAodmFsID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHN0b3JlLnJlbW92ZShrZXkpIH1cblx0XHRzdG9yYWdlLnNldEl0ZW0oa2V5LCBzdG9yZS5zZXJpYWxpemUodmFsKSlcblx0XHRyZXR1cm4gdmFsXG5cdH1cblx0c3RvcmUuZ2V0ID0gZnVuY3Rpb24oa2V5KSB7IHJldHVybiBzdG9yZS5kZXNlcmlhbGl6ZShzdG9yYWdlLmdldEl0ZW0oa2V5KSkgfVxuXHRzdG9yZS5yZW1vdmUgPSBmdW5jdGlvbihrZXkpIHsgc3RvcmFnZS5yZW1vdmVJdGVtKGtleSkgfVxuXHRzdG9yZS5jbGVhciA9IGZ1bmN0aW9uKCkgeyBzdG9yYWdlLmNsZWFyKCkgfVxuXHRzdG9yZS5nZXRBbGwgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgcmV0ID0ge31cblx0XHRmb3IgKHZhciBpPTA7IGk8c3RvcmFnZS5sZW5ndGg7ICsraSkge1xuXHRcdFx0dmFyIGtleSA9IHN0b3JhZ2Uua2V5KGkpXG5cdFx0XHRyZXRba2V5XSA9IHN0b3JlLmdldChrZXkpXG5cdFx0fVxuXHRcdHJldHVybiByZXRcblx0fVxufSBlbHNlIGlmIChkb2MuZG9jdW1lbnRFbGVtZW50LmFkZEJlaGF2aW9yKSB7XG5cdHZhciBzdG9yYWdlT3duZXIsXG5cdFx0c3RvcmFnZUNvbnRhaW5lclxuXHQvLyBTaW5jZSAjdXNlckRhdGEgc3RvcmFnZSBhcHBsaWVzIG9ubHkgdG8gc3BlY2lmaWMgcGF0aHMsIHdlIG5lZWQgdG9cblx0Ly8gc29tZWhvdyBsaW5rIG91ciBkYXRhIHRvIGEgc3BlY2lmaWMgcGF0aC4gIFdlIGNob29zZSAvZmF2aWNvbi5pY29cblx0Ly8gYXMgYSBwcmV0dHkgc2FmZSBvcHRpb24sIHNpbmNlIGFsbCBicm93c2VycyBhbHJlYWR5IG1ha2UgYSByZXF1ZXN0IHRvXG5cdC8vIHRoaXMgVVJMIGFueXdheSBhbmQgYmVpbmcgYSA0MDQgd2lsbCBub3QgaHVydCB1cyBoZXJlLiAgV2Ugd3JhcCBhblxuXHQvLyBpZnJhbWUgcG9pbnRpbmcgdG8gdGhlIGZhdmljb24gaW4gYW4gQWN0aXZlWE9iamVjdChodG1sZmlsZSkgb2JqZWN0XG5cdC8vIChzZWU6IGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9hYTc1MjU3NCh2PVZTLjg1KS5hc3B4KVxuXHQvLyBzaW5jZSB0aGUgaWZyYW1lIGFjY2VzcyBydWxlcyBhcHBlYXIgdG8gYWxsb3cgZGlyZWN0IGFjY2VzcyBhbmRcblx0Ly8gbWFuaXB1bGF0aW9uIG9mIHRoZSBkb2N1bWVudCBlbGVtZW50LCBldmVuIGZvciBhIDQwNCBwYWdlLiAgVGhpc1xuXHQvLyBkb2N1bWVudCBjYW4gYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IGRvY3VtZW50ICh3aGljaCB3b3VsZFxuXHQvLyBoYXZlIGJlZW4gbGltaXRlZCB0byB0aGUgY3VycmVudCBwYXRoKSB0byBwZXJmb3JtICN1c2VyRGF0YSBzdG9yYWdlLlxuXHR0cnkge1xuXHRcdHN0b3JhZ2VDb250YWluZXIgPSBuZXcgQWN0aXZlWE9iamVjdCgnaHRtbGZpbGUnKVxuXHRcdHN0b3JhZ2VDb250YWluZXIub3BlbigpXG5cdFx0c3RvcmFnZUNvbnRhaW5lci53cml0ZSgnPHMnICsgJ2NyaXB0PmRvY3VtZW50Lnc9d2luZG93PC9zJyArICdjcmlwdD48aWZyYW1lIHNyYz1cIi9mYXZpY29uLmljb1wiPjwvaWZyYW1lPicpXG5cdFx0c3RvcmFnZUNvbnRhaW5lci5jbG9zZSgpXG5cdFx0c3RvcmFnZU93bmVyID0gc3RvcmFnZUNvbnRhaW5lci53LmZyYW1lc1swXS5kb2N1bWVudFxuXHRcdHN0b3JhZ2UgPSBzdG9yYWdlT3duZXIuY3JlYXRlRWxlbWVudCgnZGl2Jylcblx0fSBjYXRjaChlKSB7XG5cdFx0Ly8gc29tZWhvdyBBY3RpdmVYT2JqZWN0IGluc3RhbnRpYXRpb24gZmFpbGVkIChwZXJoYXBzIHNvbWUgc3BlY2lhbFxuXHRcdC8vIHNlY3VyaXR5IHNldHRpbmdzIG9yIG90aGVyd3NlKSwgZmFsbCBiYWNrIHRvIHBlci1wYXRoIHN0b3JhZ2Vcblx0XHRzdG9yYWdlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cdFx0c3RvcmFnZU93bmVyID0gZG9jLmJvZHlcblx0fVxuXHRmdW5jdGlvbiB3aXRoSUVTdG9yYWdlKHN0b3JlRnVuY3Rpb24pIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMClcblx0XHRcdGFyZ3MudW5zaGlmdChzdG9yYWdlKVxuXHRcdFx0Ly8gU2VlIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzMTA4MSh2PVZTLjg1KS5hc3B4XG5cdFx0XHQvLyBhbmQgaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTMxNDI0KHY9VlMuODUpLmFzcHhcblx0XHRcdHN0b3JhZ2VPd25lci5hcHBlbmRDaGlsZChzdG9yYWdlKVxuXHRcdFx0c3RvcmFnZS5hZGRCZWhhdmlvcignI2RlZmF1bHQjdXNlckRhdGEnKVxuXHRcdFx0c3RvcmFnZS5sb2FkKGxvY2FsU3RvcmFnZU5hbWUpXG5cdFx0XHR2YXIgcmVzdWx0ID0gc3RvcmVGdW5jdGlvbi5hcHBseShzdG9yZSwgYXJncylcblx0XHRcdHN0b3JhZ2VPd25lci5yZW1vdmVDaGlsZChzdG9yYWdlKVxuXHRcdFx0cmV0dXJuIHJlc3VsdFxuXHRcdH1cblx0fVxuXG5cdC8vIEluIElFNywga2V5cyBtYXkgbm90IGNvbnRhaW4gc3BlY2lhbCBjaGFycy4gU2VlIGFsbCBvZiBodHRwczovL2dpdGh1Yi5jb20vbWFyY3Vzd2VzdGluL3N0b3JlLmpzL2lzc3Vlcy80MFxuXHR2YXIgZm9yYmlkZGVuQ2hhcnNSZWdleCA9IG5ldyBSZWdFeHAoXCJbIVxcXCIjJCUmJygpKissL1xcXFxcXFxcOjs8PT4/QFtcXFxcXV5ge3x9fl1cIiwgXCJnXCIpXG5cdGZ1bmN0aW9uIGllS2V5Rml4KGtleSkge1xuXHRcdHJldHVybiBrZXkucmVwbGFjZShmb3JiaWRkZW5DaGFyc1JlZ2V4LCAnX19fJylcblx0fVxuXHRzdG9yZS5zZXQgPSB3aXRoSUVTdG9yYWdlKGZ1bmN0aW9uKHN0b3JhZ2UsIGtleSwgdmFsKSB7XG5cdFx0a2V5ID0gaWVLZXlGaXgoa2V5KVxuXHRcdGlmICh2YWwgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gc3RvcmUucmVtb3ZlKGtleSkgfVxuXHRcdHN0b3JhZ2Uuc2V0QXR0cmlidXRlKGtleSwgc3RvcmUuc2VyaWFsaXplKHZhbCkpXG5cdFx0c3RvcmFnZS5zYXZlKGxvY2FsU3RvcmFnZU5hbWUpXG5cdFx0cmV0dXJuIHZhbFxuXHR9KVxuXHRzdG9yZS5nZXQgPSB3aXRoSUVTdG9yYWdlKGZ1bmN0aW9uKHN0b3JhZ2UsIGtleSkge1xuXHRcdGtleSA9IGllS2V5Rml4KGtleSlcblx0XHRyZXR1cm4gc3RvcmUuZGVzZXJpYWxpemUoc3RvcmFnZS5nZXRBdHRyaWJ1dGUoa2V5KSlcblx0fSlcblx0c3RvcmUucmVtb3ZlID0gd2l0aElFU3RvcmFnZShmdW5jdGlvbihzdG9yYWdlLCBrZXkpIHtcblx0XHRrZXkgPSBpZUtleUZpeChrZXkpXG5cdFx0c3RvcmFnZS5yZW1vdmVBdHRyaWJ1dGUoa2V5KVxuXHRcdHN0b3JhZ2Uuc2F2ZShsb2NhbFN0b3JhZ2VOYW1lKVxuXHR9KVxuXHRzdG9yZS5jbGVhciA9IHdpdGhJRVN0b3JhZ2UoZnVuY3Rpb24oc3RvcmFnZSkge1xuXHRcdHZhciBhdHRyaWJ1dGVzID0gc3RvcmFnZS5YTUxEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXR0cmlidXRlc1xuXHRcdHN0b3JhZ2UubG9hZChsb2NhbFN0b3JhZ2VOYW1lKVxuXHRcdGZvciAodmFyIGk9MCwgYXR0cjsgYXR0cj1hdHRyaWJ1dGVzW2ldOyBpKyspIHtcblx0XHRcdHN0b3JhZ2UucmVtb3ZlQXR0cmlidXRlKGF0dHIubmFtZSlcblx0XHR9XG5cdFx0c3RvcmFnZS5zYXZlKGxvY2FsU3RvcmFnZU5hbWUpXG5cdH0pXG5cdHN0b3JlLmdldEFsbCA9IHdpdGhJRVN0b3JhZ2UoZnVuY3Rpb24oc3RvcmFnZSkge1xuXHRcdHZhciBhdHRyaWJ1dGVzID0gc3RvcmFnZS5YTUxEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXR0cmlidXRlc1xuXHRcdHZhciByZXQgPSB7fVxuXHRcdGZvciAodmFyIGk9MCwgYXR0cjsgYXR0cj1hdHRyaWJ1dGVzW2ldOyArK2kpIHtcblx0XHRcdHZhciBrZXkgPSBpZUtleUZpeChhdHRyLm5hbWUpXG5cdFx0XHRyZXRbYXR0ci5uYW1lXSA9IHN0b3JlLmRlc2VyaWFsaXplKHN0b3JhZ2UuZ2V0QXR0cmlidXRlKGtleSkpXG5cdFx0fVxuXHRcdHJldHVybiByZXRcblx0fSlcbn1cblxudHJ5IHtcblx0c3RvcmUuc2V0KG5hbWVzcGFjZSwgbmFtZXNwYWNlKVxuXHRpZiAoc3RvcmUuZ2V0KG5hbWVzcGFjZSkgIT0gbmFtZXNwYWNlKSB7IHN0b3JlLmRpc2FibGVkID0gdHJ1ZSB9XG5cdHN0b3JlLnJlbW92ZShuYW1lc3BhY2UpXG59IGNhdGNoKGUpIHtcblx0c3RvcmUuZGlzYWJsZWQgPSB0cnVlXG59XG5zdG9yZS5lbmFibGVkID0gIXN0b3JlLmRpc2FibGVkXG5cbm1vZHVsZS5leHBvcnRzID0gc3RvcmU7IiwiXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGEsIGIpe1xuICB2YXIgZm4gPSBmdW5jdGlvbigpe307XG4gIGZuLnByb3RvdHlwZSA9IGIucHJvdG90eXBlO1xuICBhLnByb3RvdHlwZSA9IG5ldyBmbjtcbiAgYS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBhO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzTWV0YSAoZSkge1xuICAgIGlmIChlLm1ldGFLZXkgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpIHJldHVybiB0cnVlO1xuXG4gICAgLy8gTG9naWMgdGhhdCBoYW5kbGVzIGNoZWNrcyBmb3IgdGhlIG1pZGRsZSBtb3VzZSBidXR0b24sIGJhc2VkXG4gICAgLy8gb24gW2pRdWVyeV0oaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvYmxvYi9tYXN0ZXIvc3JjL2V2ZW50LmpzI0w0NjYpLlxuICAgIHZhciB3aGljaCA9IGUud2hpY2gsIGJ1dHRvbiA9IGUuYnV0dG9uO1xuICAgIGlmICghd2hpY2ggJiYgYnV0dG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiAoIWJ1dHRvbiAmIDEpICYmICghYnV0dG9uICYgMikgJiYgKGJ1dHRvbiAmIDQpO1xuICAgIH0gZWxzZSBpZiAod2hpY2ggPT09IDIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn07IiwiXG4vKipcbiAqIEJpbmQgYGVsYCBldmVudCBgdHlwZWAgdG8gYGZuYC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gY2FwdHVyZVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuYmluZCA9IGZ1bmN0aW9uKGVsLCB0eXBlLCBmbiwgY2FwdHVyZSl7XG4gIGlmIChlbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyZSB8fCBmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGZuKTtcbiAgfVxuICByZXR1cm4gZm47XG59O1xuXG4vKipcbiAqIFVuYmluZCBgZWxgIGV2ZW50IGB0eXBlYCdzIGNhbGxiYWNrIGBmbmAuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGNhcHR1cmVcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnVuYmluZCA9IGZ1bmN0aW9uKGVsLCB0eXBlLCBmbiwgY2FwdHVyZSl7XG4gIGlmIChlbC5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyZSB8fCBmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGZuKTtcbiAgfVxuICByZXR1cm4gZm47XG59O1xuIiwiXG4vKipcbiAqIHByZXZlbnQgZGVmYXVsdCBvbiB0aGUgZ2l2ZW4gYGVgLlxuICogXG4gKiBleGFtcGxlczpcbiAqIFxuICogICAgICBhbmNob3Iub25jbGljayA9IHByZXZlbnQ7XG4gKiAgICAgIGFuY2hvci5vbmNsaWNrID0gZnVuY3Rpb24oZSl7XG4gKiAgICAgICAgaWYgKHNvbWV0aGluZykgcmV0dXJuIHByZXZlbnQoZSk7XG4gKiAgICAgIH07XG4gKiBcbiAqIEBwYXJhbSB7RXZlbnR9IGVcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUpe1xuICBlID0gZSB8fCB3aW5kb3cuZXZlbnRcbiAgcmV0dXJuIGUucHJldmVudERlZmF1bHRcbiAgICA/IGUucHJldmVudERlZmF1bHQoKVxuICAgIDogZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBlbmNvZGUgPSBlbmNvZGVVUklDb21wb25lbnQ7XG52YXIgZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50O1xudmFyIHRyaW0gPSByZXF1aXJlKCd0cmltJyk7XG52YXIgdHlwZSA9IHJlcXVpcmUoJ3R5cGUnKTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gcXVlcnkgYHN0cmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24oc3RyKXtcbiAgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBzdHIpIHJldHVybiB7fTtcblxuICBzdHIgPSB0cmltKHN0cik7XG4gIGlmICgnJyA9PSBzdHIpIHJldHVybiB7fTtcbiAgaWYgKCc/JyA9PSBzdHIuY2hhckF0KDApKSBzdHIgPSBzdHIuc2xpY2UoMSk7XG5cbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgcGFpcnMgPSBzdHIuc3BsaXQoJyYnKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwYXJ0cyA9IHBhaXJzW2ldLnNwbGl0KCc9Jyk7XG4gICAgdmFyIGtleSA9IGRlY29kZShwYXJ0c1swXSk7XG4gICAgdmFyIG07XG5cbiAgICBpZiAobSA9IC8oXFx3KylcXFsoXFxkKylcXF0vLmV4ZWMoa2V5KSkge1xuICAgICAgb2JqW21bMV1dID0gb2JqW21bMV1dIHx8IFtdO1xuICAgICAgb2JqW21bMV1dW21bMl1dID0gZGVjb2RlKHBhcnRzWzFdKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIG9ialtwYXJ0c1swXV0gPSBudWxsID09IHBhcnRzWzFdXG4gICAgICA/ICcnXG4gICAgICA6IGRlY29kZShwYXJ0c1sxXSk7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcblxuLyoqXG4gKiBTdHJpbmdpZnkgdGhlIGdpdmVuIGBvYmpgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5zdHJpbmdpZnkgPSBmdW5jdGlvbihvYmope1xuICBpZiAoIW9iaikgcmV0dXJuICcnO1xuICB2YXIgcGFpcnMgPSBbXTtcblxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG5cbiAgICBpZiAoJ2FycmF5JyA9PSB0eXBlKHZhbHVlKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7ICsraSkge1xuICAgICAgICBwYWlycy5wdXNoKGVuY29kZShrZXkgKyAnWycgKyBpICsgJ10nKSArICc9JyArIGVuY29kZSh2YWx1ZVtpXSkpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcGFpcnMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZShvYmpba2V5XSkpO1xuICB9XG5cbiAgcmV0dXJuIHBhaXJzLmpvaW4oJyYnKTtcbn07XG4iLCJcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ2FuYWx5dGljczp1c2VyJyk7XG52YXIgRW50aXR5ID0gcmVxdWlyZSgnLi9lbnRpdHknKTtcbnZhciBpbmhlcml0ID0gcmVxdWlyZSgnaW5oZXJpdCcpO1xudmFyIGJpbmQgPSByZXF1aXJlKCdiaW5kJyk7XG52YXIgY29va2llID0gcmVxdWlyZSgnLi9jb29raWUnKTtcbnZhciB1dWlkID0gcmVxdWlyZSgndXVpZCcpO1xudmFyIHJhd0Nvb2tpZSA9IHJlcXVpcmUoJ2Nvb2tpZScpO1xuXG5cbi8qKlxuICogVXNlciBkZWZhdWx0c1xuICovXG5cblVzZXIuZGVmYXVsdHMgPSB7XG4gIHBlcnNpc3Q6IHRydWUsXG4gIGNvb2tpZToge1xuICAgIGtleTogJ2Fqc191c2VyX2lkJyxcbiAgICBvbGRLZXk6ICdhanNfdXNlcidcbiAgfSxcbiAgbG9jYWxTdG9yYWdlOiB7XG4gICAga2V5OiAnYWpzX3VzZXJfdHJhaXRzJ1xuICB9XG59O1xuXG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIG5ldyBgVXNlcmAgd2l0aCBgb3B0aW9uc2AuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBVc2VyIChvcHRpb25zKSB7XG4gIHRoaXMuZGVmYXVsdHMgPSBVc2VyLmRlZmF1bHRzO1xuICB0aGlzLmRlYnVnID0gZGVidWc7XG4gIEVudGl0eS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xufVxuXG5cbi8qKlxuICogSW5oZXJpdCBgRW50aXR5YFxuICovXG5cbmluaGVyaXQoVXNlciwgRW50aXR5KTtcblxuLyoqXG4gKiBTZXQgLyBnZXQgdGhlIHVzZXIgaWQuXG4gKlxuICogV2hlbiB0aGUgdXNlciBpZCBjaGFuZ2VzLCB0aGUgbWV0aG9kIHdpbGxcbiAqIHJlc2V0IGhpcyBhbm9ueW1vdXNJZCB0byBhIG5ldyBvbmUuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgIC8vIGRpZG4ndCBjaGFuZ2UgYmVjYXVzZSB0aGUgdXNlciBkaWRuJ3QgaGF2ZSBwcmV2aW91cyBpZC5cbiAqICAgICAgYW5vbklkID0gdXNlci5hbm9ueW1vdXNJZCgpO1xuICogICAgICB1c2VyLmlkKCdmb28nKTtcbiAqICAgICAgYXNzZXJ0LmVxdWFsKGFub25JZCwgdXNlci5hbm9ueW1vdXNJZCgpKTtcbiAqXG4gKiAgICAgIC8vIGRpZG4ndCBjaGFuZ2UgYmVjYXVzZSB0aGUgdXNlciBpZCBjaGFuZ2VkIHRvIG51bGwuXG4gKiAgICAgIGFub25JZCA9IHVzZXIuYW5vbnltb3VzSWQoKTtcbiAqICAgICAgdXNlci5pZCgnZm9vJyk7XG4gKiAgICAgIHVzZXIuaWQobnVsbCk7XG4gKiAgICAgIGFzc2VydC5lcXVhbChhbm9uSWQsIHVzZXIuYW5vbnltb3VzSWQoKSk7XG4gKlxuICogICAgIC8vIGNoYW5nZSBiZWNhdXNlIHRoZSB1c2VyIGhhZCBwcmV2aW91cyBpZC5cbiAqICAgICBhbm9uSWQgPSB1c2VyLmFub255bW91c0lkKCk7XG4gKiAgICAgdXNlci5pZCgnZm9vJyk7XG4gKiAgICAgdXNlci5pZCgnYmF6Jyk7IC8vIHRyaWdnZXJzIGNoYW5nZVxuICogICAgIHVzZXIuaWQoJ2JheicpOyAvLyBubyBjaGFuZ2VcbiAqICAgICBhc3NlcnQubm90RXF1YWwoYW5vbklkLCB1c2VyLmFub255bW91c0lkKCkpO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHJldHVybiB7TWl4ZWR9XG4gKi9cblxuVXNlci5wcm90b3R5cGUuaWQgPSBmdW5jdGlvbihpZCl7XG4gIHZhciBwcmV2ID0gdGhpcy5fZ2V0SWQoKTtcbiAgdmFyIHJldCA9IEVudGl0eS5wcm90b3R5cGUuaWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgaWYgKG51bGwgPT0gcHJldikgcmV0dXJuIHJldDtcbiAgaWYgKHByZXYgIT0gaWQgJiYgaWQpIHRoaXMuYW5vbnltb3VzSWQobnVsbCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIFNldCAvIGdldCAvIHJlbW92ZSBhbm9ueW1vdXNJZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYW5vbklkXG4gKiBAcmV0dXJuIHtTdHJpbmd8VXNlcn1cbiAqL1xuXG5Vc2VyLnByb3RvdHlwZS5hbm9ueW1vdXNJZCA9IGZ1bmN0aW9uKGFub25JZCl7XG4gIHZhciBzdG9yZSA9IHRoaXMuc3RvcmFnZSgpO1xuXG4gIC8vIHNldCAvIHJlbW92ZVxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIHN0b3JlLnNldCgnYWpzX2Fub255bW91c19pZCcsIGFub25JZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBuZXdcbiAgaWYgKGFub25JZCA9IHN0b3JlLmdldCgnYWpzX2Fub255bW91c19pZCcpKSB7XG4gICAgcmV0dXJuIGFub25JZDtcbiAgfVxuXG4gIC8vIG9sZCAtIGl0IGlzIG5vdCBzdHJpbmdpZmllZCBzbyB3ZSB1c2UgdGhlIHJhdyBjb29raWUuXG4gIGlmIChhbm9uSWQgPSByYXdDb29raWUoJ19zaW8nKSkge1xuICAgIGFub25JZCA9IGFub25JZC5zcGxpdCgnLS0tLScpWzFdO1xuICAgIHN0b3JlLnNldCgnYWpzX2Fub255bW91c19pZCcsIGFub25JZCk7XG4gICAgc3RvcmUucmVtb3ZlKCdfc2lvJyk7XG4gICAgcmV0dXJuIGFub25JZDtcbiAgfVxuXG4gIC8vIGVtcHR5XG4gIGFub25JZCA9IHV1aWQoKTtcbiAgc3RvcmUuc2V0KCdhanNfYW5vbnltb3VzX2lkJywgYW5vbklkKTtcbiAgcmV0dXJuIHN0b3JlLmdldCgnYWpzX2Fub255bW91c19pZCcpO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW5vbnltb3VzIGlkIG9uIGxvZ291dCB0b28uXG4gKi9cblxuVXNlci5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcbiAgRW50aXR5LnByb3RvdHlwZS5sb2dvdXQuY2FsbCh0aGlzKTtcbiAgdGhpcy5hbm9ueW1vdXNJZChudWxsKTtcbn07XG5cbi8qKlxuICogTG9hZCBzYXZlZCB1c2VyIGBpZGAgb3IgYHRyYWl0c2AgZnJvbSBzdG9yYWdlLlxuICovXG5cblVzZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLl9sb2FkT2xkQ29va2llKCkpIHJldHVybjtcbiAgRW50aXR5LnByb3RvdHlwZS5sb2FkLmNhbGwodGhpcyk7XG59O1xuXG5cbi8qKlxuICogQkFDS1dBUkRTIENPTVBBVElCSUxJVFk6IExvYWQgdGhlIG9sZCB1c2VyIGZyb20gdGhlIGNvb2tpZS5cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuVXNlci5wcm90b3R5cGUuX2xvYWRPbGRDb29raWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB1c2VyID0gY29va2llLmdldCh0aGlzLl9vcHRpb25zLmNvb2tpZS5vbGRLZXkpO1xuICBpZiAoIXVzZXIpIHJldHVybiBmYWxzZTtcblxuICB0aGlzLmlkKHVzZXIuaWQpO1xuICB0aGlzLnRyYWl0cyh1c2VyLnRyYWl0cyk7XG4gIGNvb2tpZS5yZW1vdmUodGhpcy5fb3B0aW9ucy5jb29raWUub2xkS2V5KTtcbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cbi8qKlxuICogRXhwb3NlIHRoZSB1c2VyIHNpbmdsZXRvbi5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGJpbmQuYWxsKG5ldyBVc2VyKCkpO1xuXG5cbi8qKlxuICogRXhwb3NlIHRoZSBgVXNlcmAgY29uc3RydWN0b3IuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMuVXNlciA9IFVzZXI7XG4iLCJcbi8qKlxuICogVGFrZW4gc3RyYWlnaHQgZnJvbSBqZWQncyBnaXN0OiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS85ODI4ODNcbiAqXG4gKiBSZXR1cm5zIGEgcmFuZG9tIHY0IFVVSUQgb2YgdGhlIGZvcm0geHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4LFxuICogd2hlcmUgZWFjaCB4IGlzIHJlcGxhY2VkIHdpdGggYSByYW5kb20gaGV4YWRlY2ltYWwgZGlnaXQgZnJvbSAwIHRvIGYsIGFuZFxuICogeSBpcyByZXBsYWNlZCB3aXRoIGEgcmFuZG9tIGhleGFkZWNpbWFsIGRpZ2l0IGZyb20gOCB0byBiLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdXVpZChhKXtcbiAgcmV0dXJuIGEgICAgICAgICAgIC8vIGlmIHRoZSBwbGFjZWhvbGRlciB3YXMgcGFzc2VkLCByZXR1cm5cbiAgICA/ICggICAgICAgICAgICAgIC8vIGEgcmFuZG9tIG51bWJlciBmcm9tIDAgdG8gMTVcbiAgICAgIGEgXiAgICAgICAgICAgIC8vIHVubGVzcyBiIGlzIDgsXG4gICAgICBNYXRoLnJhbmRvbSgpICAvLyBpbiB3aGljaCBjYXNlXG4gICAgICAqIDE2ICAgICAgICAgICAvLyBhIHJhbmRvbSBudW1iZXIgZnJvbVxuICAgICAgPj4gYS80ICAgICAgICAgLy8gOCB0byAxMVxuICAgICAgKS50b1N0cmluZygxNikgLy8gaW4gaGV4YWRlY2ltYWxcbiAgICA6ICggICAgICAgICAgICAgIC8vIG9yIG90aGVyd2lzZSBhIGNvbmNhdGVuYXRlZCBzdHJpbmc6XG4gICAgICBbMWU3XSArICAgICAgICAvLyAxMDAwMDAwMCArXG4gICAgICAtMWUzICsgICAgICAgICAvLyAtMTAwMCArXG4gICAgICAtNGUzICsgICAgICAgICAvLyAtNDAwMCArXG4gICAgICAtOGUzICsgICAgICAgICAvLyAtODAwMDAwMDAgK1xuICAgICAgLTFlMTEgICAgICAgICAgLy8gLTEwMDAwMDAwMDAwMCxcbiAgICAgICkucmVwbGFjZSggICAgIC8vIHJlcGxhY2luZ1xuICAgICAgICAvWzAxOF0vZywgICAgLy8gemVyb2VzLCBvbmVzLCBhbmQgZWlnaHRzIHdpdGhcbiAgICAgICAgdXVpZCAgICAgICAgIC8vIHJhbmRvbSBoZXggZGlnaXRzXG4gICAgICApXG59OyIsIlxubW9kdWxlLmV4cG9ydHMgPSAnMi40LjYnO1xuIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGluZGV4T2YgPSByZXF1aXJlKCdpbmRleG9mJyk7XG52YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0Jyk7XG52YXIgZG9taWZ5ID0gcmVxdWlyZSgnZG9taWZ5Jyk7XG52YXIgc3R1YiA9IHJlcXVpcmUoJ3N0dWInKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnZWFjaCcpO1xudmFyIGtleXMgPSByZXF1aXJlKCdrZXlzJyk7XG52YXIgZm10ID0gcmVxdWlyZSgnZm10Jyk7XG52YXIgc3B5ID0gcmVxdWlyZSgnc3B5Jyk7XG52YXIgaXMgPSByZXF1aXJlKCdpcycpO1xuXG4vKipcbiAqIEV4cG9zZSBgcGx1Z2luYC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBsdWdpbjtcblxuLyoqXG4gKiBJbnRlZ3JhdGlvbiB0ZXN0aW5nIHBsdWdpbi5cbiAqXG4gKiBAcGFyYW0ge0FuYWx5dGljc30gYW5hbHl0aWNzXG4gKi9cblxuZnVuY3Rpb24gcGx1Z2luKGFuYWx5dGljcykge1xuICBhbmFseXRpY3Muc3BpZXMgPSBbXTtcblxuICAvKipcbiAgICogU3B5IG9uIGEgYG1ldGhvZGAgb2YgaG9zdCBgb2JqZWN0YC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gICAqIEByZXR1cm4ge0FuYWx5dGljc31cbiAgICovXG5cbiAgYW5hbHl0aWNzLnNweSA9IGZ1bmN0aW9uKG9iamVjdCwgbWV0aG9kKXtcbiAgICB2YXIgcyA9IHNweShvYmplY3QsIG1ldGhvZCk7XG4gICAgdGhpcy5zcGllcy5wdXNoKHMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdHViIGEgYG1ldGhvZGAgb2YgaG9zdCBgb2JqZWN0YC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gICAqIEByZXR1cm4ge0FuYWx5dGljc31cbiAgICovXG5cbiAgYW5hbHl0aWNzLnN0dWIgPSBmdW5jdGlvbihvYmplY3QsIG1ldGhvZCl7XG4gICAgdmFyIHMgPSBzdHViKG9iamVjdCwgbWV0aG9kKTtcbiAgICB0aGlzLnNwaWVzLnB1c2gocyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc3RvcmUgYWxsIHNwaWVzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gICAqL1xuXG4gIGFuYWx5dGljcy5yZXN0b3JlID0gZnVuY3Rpb24oKXtcbiAgICBlYWNoKHRoaXMuc3BpZXMsIGZ1bmN0aW9uKHNweSwgaSl7XG4gICAgICBzcHkucmVzdG9yZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuc3BpZXMgPSBbXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQXNzZXJ0IHRoYXQgYSBgc3B5YCB3YXMgY2FsbGVkIHdpdGggYGFyZ3MuLi5gXG4gICAqXG4gICAqIEBwYXJhbSB7U3B5fSBzcHlcbiAgICogQHBhcmFtIHtNaXhlZH0gYXJncy4uLiAob3B0aW9uYWwpXG4gICAqIEByZXR1cm4ge0FuYWx5dGljc31cbiAgICovXG5cbiAgYW5hbHl0aWNzLmNhbGxlZCA9IGZ1bmN0aW9uKHNweSl7XG4gICAgYXNzZXJ0KFxuICAgICAgfmluZGV4T2YodGhpcy5zcGllcywgc3B5KSxcbiAgICAgICdZb3UgbXVzdCBjYWxsIGAuc3B5KG9iamVjdCwgbWV0aG9kKWAgcHJpb3IgdG8gY2FsbGluZyBgLmNhbGxlZCgpYC4nXG4gICAgKTtcbiAgICBhc3NlcnQoc3B5LmNhbGxlZCwgZm10KCdFeHBlY3RlZCBcIiVzXCIgdG8gaGF2ZSBiZWVuIGNhbGxlZC4nLCBzcHkubmFtZSkpO1xuXG4gICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgaWYgKCFhcmdzLmxlbmd0aCkgcmV0dXJuIHRoaXM7XG5cbiAgICBhc3NlcnQoXG4gICAgICBzcHkuZ290LmFwcGx5KHNweSwgYXJncyksIGZtdCgnJ1xuICAgICAgKyAnRXhwZWN0ZWQgXCIlc1wiIHRvIGJlIGNhbGxlZCB3aXRoIFwiJXNcIiwgXFxuJ1xuICAgICAgKyAnYnV0IGl0IHdhcyBjYWxsZWQgd2l0aCBcIiVzXCIuJ1xuICAgICAgLCBzcHkubmFtZVxuICAgICAgLCBKU09OLnN0cmluZ2lmeShhcmdzLCBudWxsLCAyKVxuICAgICAgLCBKU09OLnN0cmluZ2lmeShzcHkuYXJnc1swXSwgbnVsbCwgMikpXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBc3NlcnQgdGhhdCBhIGBzcHlgIHdhcyBub3QgY2FsbGVkIHdpdGggYGFyZ3MuLi5gLlxuICAgKlxuICAgKiBAcGFyYW0ge1NweX0gc3B5XG4gICAqIEBwYXJhbSB7TWl4ZWR9IGFyZ3MuLi4gKG9wdGlvbmFsKVxuICAgKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gICAqL1xuXG4gIGFuYWx5dGljcy5kaWROb3RDYWxsID0gZnVuY3Rpb24oc3B5KXtcbiAgICBhc3NlcnQoXG4gICAgICB+aW5kZXhPZih0aGlzLnNwaWVzLCBzcHkpLFxuICAgICAgJ1lvdSBtdXN0IGNhbGwgYC5zcHkob2JqZWN0LCBtZXRob2QpYCBwcmlvciB0byBjYWxsaW5nIGAuZGlkTm90Q2FsbCgpYC4nXG4gICAgKTtcblxuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgIXNweS5jYWxsZWQsXG4gICAgICAgIGZtdCgnRXhwZWN0ZWQgXCIlc1wiIG5vdCB0byBoYXZlIGJlZW4gY2FsbGVkLicsIHNweS5uYW1lKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KCFzcHkuZ290LmFwcGx5KHNweSwgYXJncyksIGZtdCgnJ1xuICAgICAgICArICdFeHBlY3RlZCBcIiVzXCIgbm90IHRvIGJlIGNhbGxlZCB3aXRoIFwiJW9cIiwgJ1xuICAgICAgICArICdidXQgaXQgd2FzIGNhbGxlZCB3aXRoIFwiJW9cIi4nXG4gICAgICAgICwgc3B5Lm5hbWVcbiAgICAgICAgLCBhcmdzXG4gICAgICAgICwgc3B5LmFyZ3NbMF0pXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBc3NlcnQgdGhhdCBhIGBzcHlgIHdhcyBub3QgY2FsbGVkIDEgdGltZS5cbiAgICpcbiAgICogQHBhcmFtIHtTcHl9IHNweVxuICAgKiBAcmV0dXJuIHtBbmFseXRpY3N9XG4gICAqL1xuXG4gIGFuYWx5dGljcy5jYWxsZWRPbmNlID0gY2FsbGVkVGltZXMoMSk7XG5cbiAgLyoqXG4gICAqIEFzc2VydCB0aGF0IGEgYHNweWAgd2FzIGNhbGxlZCAyIHRpbWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge1NweX0gc3B5XG4gICAqIEByZXR1cm4ge0FuYWx5dGljc31cbiAgICovXG5cbiAgYW5hbHl0aWNzLmNhbGxlZFR3aWNlID0gY2FsbGVkVGltZXMoMik7XG5cbiAgLyoqXG4gICAqIEFzc2VydCB0aGF0IGEgYHNweWAgd2FzIGNhbGxlZCAzIHRpbWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge1NweX0gc3B5XG4gICAqIEByZXR1cm4ge0FuYWx5dGljc31cbiAgICovXG5cbiAgYW5hbHl0aWNzLmNhbGxlZFRocmljZSA9IGNhbGxlZFRpbWVzKDIpO1xuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIGZ1bmN0aW9uIGZvciBhc3NlcnRpbmcgYSBzcHlcbiAgICogd2FzIGNhbGxlZCBgbmAgdGltZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiBjYWxsZWRUaW1lcyhuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNweSkge1xuICAgICAgdmFyIG0gPSBzcHkuYXJncy5sZW5ndGg7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIG4gPT0gbSxcbiAgICAgICAgZm10KCcnXG4gICAgICAgICAgKyAnRXhwZWN0ZWQgXCIlc1wiIHRvIGhhdmUgYmVlbiBjYWxsZWQgJXMgdGltZSVzLCAnXG4gICAgICAgICAgKyAnYnV0IGl0IHdhcyBvbmx5IGNhbGxlZCAlcyB0aW1lJXMuJ1xuICAgICAgICAgICwgc3B5Lm5hbWUsIG4sIDEgIT0gbiA/ICdzJyA6ICcnLCBtLCAxICE9IG0gPyAncycgOiAnJylcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFzc2VydCB0aGF0IGEgYHNweWAgcmV0dXJuZWQgYHZhbHVlYC5cbiAgICpcbiAgICogQHBhcmFtIHtTcHl9IHNweVxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtUZXN0ZXJ9XG4gICAqL1xuXG4gIGFuYWx5dGljcy5yZXR1cm5lZCA9IGZ1bmN0aW9uKHNweSwgdmFsdWUpe1xuICAgIGFzc2VydChcbiAgICAgIH5pbmRleE9mKHRoaXMuc3BpZXMsIHNweSksXG4gICAgICAnWW91IG11c3QgY2FsbCBgLnNweShvYmplY3QsIG1ldGhvZClgIHByaW9yIHRvIGNhbGxpbmcgYC5yZXR1cm5lZCgpYC4nXG4gICAgKTtcbiAgICBhc3NlcnQoXG4gICAgICBzcHkucmV0dXJuZWQodmFsdWUpLFxuICAgICAgZm10KCdFeHBlY3RlZCBcIiVzXCIgdG8gaGF2ZSByZXR1cm5lZCBcIiVvXCIuJywgc3B5Lm5hbWUsIHZhbHVlKVxuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQXNzZXJ0IHRoYXQgYSBgc3B5YCBkaWQgbm90IHJldHVybiBgdmFsdWVgLlxuICAgKlxuICAgKiBAcGFyYW0ge1NweX0gc3B5XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEByZXR1cm4ge1Rlc3Rlcn1cbiAgICovXG5cbiAgYW5hbHl0aWNzLmRpZE5vdFJldHVybiA9IGZ1bmN0aW9uKHNweSwgdmFsdWUpe1xuICAgIGFzc2VydChcbiAgICAgIH5pbmRleE9mKHRoaXMuc3BpZXMsIHNweSksXG4gICAgICAnWW91IG11c3QgY2FsbCBgLnNweShvYmplY3QsIG1ldGhvZClgIHByaW9yIHRvIGNhbGxpbmcgYC5kaWROb3RSZXR1cm4oKWAuJ1xuICAgICk7XG4gICAgYXNzZXJ0KFxuICAgICAgIXNweS5yZXR1cm5lZCh2YWx1ZSksXG4gICAgICBmbXQoJ0V4cGVjdGVkIFwiJXNcIiBub3QgdG8gaGF2ZSByZXR1cm5lZCBcIiVvXCIuJywgc3B5Lm5hbWUsIHZhbHVlKVxuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbCBgcmVzZXRgIG9uIHRoZSBpbnRlZ3JhdGlvbi5cbiAgICpcbiAgICogQHJldHVybiB7QW5hbHl0aWNzfVxuICAgKi9cblxuICBhbmFseXRpY3MucmVzZXQgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMudXNlcigpLnJlc2V0KCk7XG4gICAgdGhpcy5ncm91cCgpLnJlc2V0KCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbXBhcmUgYGludGAgYWdhaW5zdCBgdGVzdGAuXG4gICAqXG4gICAqIFRvIGRvdWJsZS1jaGVjayB0aGF0IHRoZXkgaGF2ZSB0aGUgcmlnaHQgZGVmYXVsdHMsIGdsb2JhbHMsIGFuZCBjb25maWcuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGEgYWN0dWFsIGludGVncmF0aW9uIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGIgdGVzdCBpbnRlZ3JhdGlvbiBjb25zdHJ1Y3RvclxuICAgKi9cblxuICBhbmFseXRpY3MuY29tcGFyZSA9IGZ1bmN0aW9uKGEsIGIpe1xuICAgIGEgPSBuZXcgYTtcbiAgICBiID0gbmV3IGI7XG4gICAgLy8gbmFtZVxuICAgIGFzc2VydChcbiAgICAgIGEubmFtZSA9PT0gYi5uYW1lLFxuICAgICAgZm10KCdFeHBlY3RlZCBuYW1lIHRvIGJlIFwiJXNcIiwgYnV0IGl0IHdhcyBcIiVzXCIuJywgYi5uYW1lLCBhLm5hbWUpXG4gICAgKTtcblxuICAgIC8vIG9wdGlvbnNcbiAgICB2YXIgeCA9IGEuZGVmYXVsdHM7XG4gICAgdmFyIHkgPSBiLmRlZmF1bHRzO1xuICAgIGZvciAodmFyIGtleSBpbiB5KSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHguaGFzT3duUHJvcGVydHkoa2V5KSxcbiAgICAgICAgZm10KCdUaGUgaW50ZWdyYXRpb24gZG9lcyBub3QgaGF2ZSBhbiBvcHRpb24gbmFtZWQgXCIlc1wiLicsIGtleSlcbiAgICAgICk7XG4gICAgICBhc3NlcnQuZGVlcEVxdWFsKFxuICAgICAgICB4W2tleV0sIHlba2V5XSxcbiAgICAgICAgZm10KFxuICAgICAgICAgICdFeHBlY3RlZCBvcHRpb24gXCIlc1wiIHRvIGRlZmF1bHQgdG8gXCIlc1wiLCBidXQgaXQgZGVmYXVsdHMgdG8gXCIlc1wiLicsXG4gICAgICAgICAga2V5LCB5W2tleV0sIHhba2V5XVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIGdsb2JhbHNcbiAgICB2YXIgeCA9IGEuZ2xvYmFscztcbiAgICB2YXIgeSA9IGIuZ2xvYmFscztcbiAgICBlYWNoKHksIGZ1bmN0aW9uKGtleSl7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIGluZGV4T2YoeCwga2V5KSAhPT0gLTEsXG4gICAgICAgIGZtdCgnRXhwZWN0ZWQgZ2xvYmFsIFwiJXNcIiB0byBiZSByZWdpc3RlcmVkLicsIGtleSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICAvLyBhc3N1bWVzUGFnZXZpZXdcbiAgICBhc3NlcnQoXG4gICAgICBhLl9hc3N1bWVzUGFnZXZpZXcgPT0gYi5fYXNzdW1lc1BhZ2V2aWV3LFxuICAgICAgJ0V4cGVjdGVkIHRoZSBpbnRlZ3JhdGlvbiB0byBhc3N1bWUgYSBwYWdldmlldy4nXG4gICAgKTtcblxuICAgIC8vIHJlYWR5T25Jbml0aWFsaXplXG4gICAgYXNzZXJ0KFxuICAgICAgYS5fcmVhZHlPbkluaXRpYWxpemUgPT0gYi5fcmVhZHlPbkluaXRpYWxpemUsXG4gICAgICAnRXhwZWN0ZWQgdGhlIGludGVncmF0aW9uIHRvIGJlIHJlYWR5IG9uIGluaXRpYWxpemUuJ1xuICAgICk7XG5cbiAgICAvLyByZWFkeU9uTG9hZFxuICAgIGFzc2VydChcbiAgICAgIGEuX3JlYWR5T25Mb2FkID09IGIuX3JlYWR5T25Mb2FkLFxuICAgICAgJ0V4cGVjdGVkIGludGVncmF0aW9uIHRvIGJlIHJlYWR5IG9uIGxvYWQuJ1xuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFzc2VydCB0aGUgaW50ZWdyYXRpb24gYmVpbmcgdGVzdGVkIGxvYWRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0ludGVncmF0aW9ufSBpbnRlZ3JhdGlvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkb25lXG4gICAqL1xuXG4gIGFuYWx5dGljcy5sb2FkID0gZnVuY3Rpb24oaW50ZWdyYXRpb24sIGRvbmUpe1xuICAgIGFuYWx5dGljcy5hc3NlcnQoIWludGVncmF0aW9uLmxvYWRlZCgpLCAnRXhwZWN0ZWQgYGludGVncmF0aW9uLmxvYWRlZCgpYCB0byBiZSBmYWxzZSBiZWZvcmUgbG9hZGluZy4nKTtcbiAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLmFzc2VydChpbnRlZ3JhdGlvbi5sb2FkZWQoKSwgJ0V4cGVjdGVkIGBpbnRlZ3JhdGlvbi5sb2FkZWQoKWAgdG8gYmUgdHJ1ZSBhZnRlciBsb2FkaW5nLicpO1xuICAgICAgZG9uZSgpO1xuICAgIH0pO1xuICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgYW5hbHl0aWNzLnBhZ2Uoe30sIHsgTWFya2V0bzogdHJ1ZSB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQXNzZXJ0IGEgc2NyaXB0LCBpbWFnZSwgb3IgaWZyYW1lIHdhcyBsb2FkZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgRE9NIHRlbXBsYXRlXG4gICAqL1xuICBcbiAgYW5hbHl0aWNzLmxvYWRlZCA9IGZ1bmN0aW9uKGludGVncmF0aW9uLCBzdHIpe1xuICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgaW50ZWdyYXRpb24pIHtcbiAgICAgIHN0ciA9IGludGVncmF0aW9uO1xuICAgICAgaW50ZWdyYXRpb24gPSB0aGlzLmludGVncmF0aW9uKCk7XG4gICAgfVxuXG4gICAgdmFyIHRhZ3MgPSBbXTtcblxuICAgIGFzc2VydChcbiAgICAgIH5pbmRleE9mKHRoaXMuc3BpZXMsIGludGVncmF0aW9uLmxvYWQpLFxuICAgICAgJ1lvdSBtdXN0IGNhbGwgYC5zcHkoaW50ZWdyYXRpb24sIFxcJ2xvYWRcXCcpYCBwcmlvciB0byBjYWxsaW5nIGAubG9hZGVkKClgLidcbiAgICApO1xuXG4gICAgLy8gY29sbGVjdCBhbGwgSW1hZ2Ugb3IgSFRNTEVsZW1lbnQgb2JqZWN0c1xuICAgIC8vIGluIGFuIGFycmF5IG9mIHN0cmluZ2lmaWVkIGVsZW1lbnRzLCBmb3IgaHVtYW4tcmVhZGFibGUgYXNzZXJ0aW9ucy5cbiAgICBlYWNoKGludGVncmF0aW9uLmxvYWQucmV0dXJucywgZnVuY3Rpb24oZWwpe1xuICAgICAgdmFyIHRhZyA9IHt9O1xuICAgICAgaWYgKGVsIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkge1xuICAgICAgICB0YWcudHlwZSA9ICdpbWcnO1xuICAgICAgICB0YWcuYXR0cnMgPSB7IHNyYzogZWwuc3JjIH07XG4gICAgICB9IGVsc2UgaWYgKGlzLmVsZW1lbnQoZWwpKSB7XG4gICAgICAgIHRhZy50eXBlID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB0YWcuYXR0cnMgPSBhdHRyaWJ1dGVzKGVsKTtcbiAgICAgICAgc3dpdGNoICh0YWcudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3NjcmlwdCc6XG4gICAgICAgICAgICAvLyBkb24ndCBjYXJlIGFib3V0IHRoZXNlIHByb3BlcnRpZXMuXG4gICAgICAgICAgICBkZWxldGUgdGFnLmF0dHJzLnR5cGU7XG4gICAgICAgICAgICBkZWxldGUgdGFnLmF0dHJzLmFzeW5jO1xuICAgICAgICAgICAgZGVsZXRlIHRhZy5hdHRycy5kZWZlcjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGFnLnR5cGUpIHRhZ3MucHVzaChzdHJpbmdpZnkodGFnLnR5cGUsIHRhZy5hdHRycykpO1xuICAgIH0pO1xuXG4gICAgLy8gbm9ybWFsaXplIGZvcm1hdHRpbmdcbiAgICB2YXIgdGFnID0gb2JqZWN0aWZ5KHN0cik7XG4gICAgdmFyIGV4cGVjdGVkID0gc3RyaW5naWZ5KHRhZy50eXBlLCB0YWcuYXR0cnMpO1xuXG4gICAgaWYgKCF0YWdzLmxlbmd0aCkge1xuICAgICAgYXNzZXJ0KGZhbHNlLCBmbXQoJ05vIHRhZ3Mgd2VyZSByZXR1cm5lZC5cXG5FeHBlY3RlZCAlcy4nLCBleHBlY3RlZCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzaG93IHRoZSBjbG9zZXN0IG1hdGNoXG4gICAgICBhc3NlcnQoXG4gICAgICAgIGluZGV4T2YodGFncywgZXhwZWN0ZWQpICE9PSAtMSxcbiAgICAgICAgZm10KCdcXG5FeHBlY3RlZCAlcy5cXG5Gb3VuZCAlcycsIGV4cGVjdGVkLCB0YWdzLmpvaW4oJ1xcbicpKVxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGludGVncmF0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHtJbnRlZ3JhdGlvbn1cbiAgICovXG4gIFxuICBhbmFseXRpY3MuaW50ZWdyYXRpb24gPSBmdW5jdGlvbigpe1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5faW50ZWdyYXRpb25zKSByZXR1cm4gdGhpcy5faW50ZWdyYXRpb25zW25hbWVdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBc3NlcnQgYSBgdmFsdWVgIGlzIHRydXRoeS5cbiAgICpcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHJldHVybiB7VGVzdGVyfVxuICAgKi9cblxuICBhbmFseXRpY3MuYXNzZXJ0ID0gYXNzZXJ0O1xuXG4gIC8qKlxuICAgKiBFeHBvc2UgYWxsIG9mIHRoZSBtZXRob2RzIG9uIGBhc3NlcnRgLlxuICAgKlxuICAgKiBAcGFyYW0ge01peGVkfSBhcmdzLi4uXG4gICAqIEByZXR1cm4ge1Rlc3Rlcn1cbiAgICovXG5cbiAgZWFjaChrZXlzKGFzc2VydCksIGZ1bmN0aW9uKGtleSl7XG4gICAgYW5hbHl0aWNzW2tleV0gPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICBhc3NlcnRba2V5XS5hcHBseShhc3NlcnQsIGFyZ3MpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERPTSBub2RlIHN0cmluZy5cbiAgICovXG5cbiAgZnVuY3Rpb24gc3RyaW5naWZ5KG5hbWUsIGF0dHJzKSB7XG4gICAgdmFyIHN0ciA9IFtdO1xuICAgIHN0ci5wdXNoKCc8JyArIG5hbWUpO1xuICAgIGVhY2goYXR0cnMsIGZ1bmN0aW9uKGtleSwgdmFsKXtcbiAgICAgIHN0ci5wdXNoKCcgJyArIGtleSArICc9XCInICsgdmFsICsgJ1wiJyk7XG4gICAgfSk7XG4gICAgc3RyLnB1c2goJz4nKTtcbiAgICAvLyBibG9ja1xuICAgIGlmICgnaW1nJyAhPT0gbmFtZSkgc3RyLnB1c2goJzwvJyArIG5hbWUgKyAnPicpO1xuICAgIHJldHVybiBzdHIuam9pbignJyk7XG4gIH1cblxuICAvKipcbiAgICogRE9NIG5vZGUgYXR0cmlidXRlcyBhcyBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH1cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgXG4gIGZ1bmN0aW9uIGF0dHJpYnV0ZXMobm9kZSkge1xuICAgIHZhciBvYmogPSB7fTtcbiAgICBlYWNoKG5vZGUuYXR0cmlidXRlcywgZnVuY3Rpb24oYXR0cil7XG4gICAgICBvYmpbYXR0ci5uYW1lXSA9IGF0dHIudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHN0cmluZywgZ2l2ZSBiYWNrIERPTSBhdHRyaWJ1dGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG5cbiAgZnVuY3Rpb24gb2JqZWN0aWZ5KHN0cikge1xuICAgIC8vIHJlcGxhY2UgYHNyY2Agd2l0aCBgZGF0YS1zcmNgIHRvIHByZXZlbnQgaW1hZ2UgbG9hZGluZ1xuICAgIHN0ciA9IHN0ci5yZXBsYWNlKCcgc3JjPVwiJywgJyBkYXRhLXNyYz1cIicpO1xuICAgIFxuICAgIHZhciBlbCA9IGRvbWlmeShzdHIpO1xuICAgIHZhciBhdHRycyA9IHt9O1xuICAgIFxuICAgIGVhY2goZWwuYXR0cmlidXRlcywgZnVuY3Rpb24oYXR0cil7XG4gICAgICAvLyB0aGVuIHJlcGxhY2UgaXQgYmFja1xuICAgICAgdmFyIG5hbWUgPSAnZGF0YS1zcmMnID09IGF0dHIubmFtZSA/ICdzcmMnIDogYXR0ci5uYW1lO1xuICAgICAgYXR0cnNbbmFtZV0gPSBhdHRyLnZhbHVlO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICBhdHRyczogYXR0cnNcbiAgICB9O1xuICB9XG59IiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIG1lcmdlID0gcmVxdWlyZSgnbWVyZ2UnKTtcbnZhciBlcWwgPSByZXF1aXJlKCdlcWwnKTtcblxuLyoqXG4gKiBDcmVhdGUgYSB0ZXN0IHN0dWIgd2l0aCBgb2JqYCwgYG1ldGhvZGAuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICBzID0gcmVxdWlyZSgnc3R1YicpKHt9LCAndG9TdHJpbmcnKTtcbiAqICAgICAgcyA9IHJlcXVpcmUoJ3N0dWInKShkb2N1bWVudC53cml0ZSk7XG4gKiAgICAgIHMgPSByZXF1aXJlKCdzdHViJykoKTtcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmosIG1ldGhvZCl7XG4gIHZhciBmbiA9IHRvRnVuY3Rpb24oYXJndW1lbnRzLCBzdHViKTtcbiAgbWVyZ2Uoc3R1YiwgcHJvdG8pO1xuICBzdHViLnJlc2V0KCk7XG4gIHN0dWIubmFtZSA9IG1ldGhvZDtcbiAgcmV0dXJuIHN0dWI7XG5cbiAgZnVuY3Rpb24gc3R1Yigpe1xuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgIHZhciByZXQgPSBmbihhcmd1bWVudHMpO1xuICAgIC8vc3R1Yi5yZXR1cm5zIHx8IHN0dWIucmVzZXQoKTtcbiAgICBzdHViLmFyZ3MucHVzaChhcmdzKTtcbiAgICBzdHViLnJldHVybnMucHVzaChyZXQpO1xuICAgIHN0dWIudXBkYXRlKCk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxufTtcblxuLyoqXG4gKiBQcm90b3R5cGUuXG4gKi9cblxudmFyIHByb3RvID0ge307XG5cbi8qKlxuICogYHRydWVgIGlmIHRoZSBzdHViIHdhcyBjYWxsZWQgd2l0aCBgYXJnc2AuXG4gKlxuICogQHBhcmFtIHtBcmd1bWVudHN9IC4uLlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucHJvdG8uZ290ID1cbnByb3RvLmNhbGxlZFdpdGggPSBmdW5jdGlvbihuKXtcbiAgdmFyIGEgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gdGhpcy5hcmdzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIHZhciBiID0gdGhpcy5hcmdzW2ldO1xuICAgIGlmIChlcWwoYSwgYi5zbGljZSgwLCBhLmxlbmd0aCkpKSByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm47XG59O1xuXG4vKipcbiAqIGB0cnVlYCBpZiB0aGUgc3R1YiByZXR1cm5lZCBgdmFsdWVgLlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5wcm90by5yZXR1cm5lZCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgdmFyIHJldCA9IHRoaXMucmV0dXJuc1t0aGlzLnJldHVybnMubGVuZ3RoIC0gMV07XG4gIHJldHVybiBlcWwocmV0LCB2YWx1ZSk7XG59O1xuXG4vKipcbiAqIGB0cnVlYCBpZiB0aGUgc3R1YiB3YXMgY2FsbGVkIG9uY2UuXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucHJvdG8ub25jZSA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAxID09IHRoaXMuYXJncy5sZW5ndGg7XG59O1xuXG4vKipcbiAqIGB0cnVlYCBpZiB0aGUgc3R1YiB3YXMgY2FsbGVkIHR3aWNlLlxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnByb3RvLnR3aWNlID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIDIgPT0gdGhpcy5hcmdzLmxlbmd0aDtcbn07XG5cbi8qKlxuICogYHRydWVgIGlmIHRoZSBzdHViIHdhcyBjYWxsZWQgdGhyZWUgdGltZXMuXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucHJvdG8udGhyaWNlID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIDMgPT0gdGhpcy5hcmdzLmxlbmd0aDtcbn07XG5cbi8qKlxuICogUmVzZXQgdGhlIHN0dWIuXG4gKlxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnByb3RvLnJlc2V0ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5yZXR1cm5zID0gW107XG4gIHRoaXMuYXJncyA9IFtdO1xuICB0aGlzLnVwZGF0ZSgpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVzdG9yZS5cbiAqXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucHJvdG8ucmVzdG9yZSA9IGZ1bmN0aW9uKCl7XG4gIGlmICghdGhpcy5vYmopIHJldHVybiB0aGlzO1xuICB2YXIgbSA9IHRoaXMubWV0aG9kO1xuICB2YXIgZm4gPSB0aGlzLmZuO1xuICB0aGlzLm9ialttXSA9IGZuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogVXBkYXRlIHRoZSBzdHViLlxuICpcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxucHJvdG8udXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5jYWxsZWQgPSAhISB0aGlzLmFyZ3MubGVuZ3RoO1xuICB0aGlzLmNhbGxlZE9uY2UgPSB0aGlzLm9uY2UoKTtcbiAgdGhpcy5jYWxsZWRUd2ljZSA9IHRoaXMudHdpY2UoKTtcbiAgdGhpcy5jYWxsZWRUaHJpY2UgPSB0aGlzLnRocmljZSgpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogVG8gZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHsuLi59IGFyZ3NcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHN0dWJcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gdG9GdW5jdGlvbihhcmdzLCBzdHViKXtcbiAgdmFyIG9iaiA9IGFyZ3NbMF07XG4gIHZhciBtZXRob2QgPSBhcmdzWzFdO1xuICB2YXIgZm4gPSBhcmdzWzJdIHx8IGZ1bmN0aW9uKCl7fTtcblxuICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgY2FzZSAwOiByZXR1cm4gZnVuY3Rpb24gbm9vcCgpe307XG4gICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oYXJncyl7IHJldHVybiBvYmouYXBwbHkobnVsbCwgYXJncyk7IH07XG4gICAgY2FzZSAyOlxuICAgIGNhc2UgMzpcbiAgICB2YXIgbSA9IG9ialttZXRob2RdO1xuICAgIHN0dWIubWV0aG9kID0gbWV0aG9kO1xuICAgIHN0dWIuZm4gPSBtO1xuICAgIHN0dWIub2JqID0gb2JqO1xuICAgIG9ialttZXRob2RdID0gc3R1YjtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJncykgeyBmbi5hcHBseShvYmosIGFyZ3MpIH07XG4gIH1cbn0iLCJcbi8qKlxuICogbWVyZ2UgYGJgJ3MgcHJvcGVydGllcyB3aXRoIGBhYCdzLlxuICpcbiAqIGV4YW1wbGU6XG4gKlxuICogICAgICAgIHZhciB1c2VyID0ge307XG4gKiAgICAgICAgbWVyZ2UodXNlciwgY29uc29sZSk7XG4gKiAgICAgICAgLy8gPiB7IGxvZzogZm4sIGRpcjogZm4gLi59XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFcbiAqIEBwYXJhbSB7T2JqZWN0fSBiXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYSwgYikge1xuICBmb3IgKHZhciBrIGluIGIpIGFba10gPSBiW2tdO1xuICByZXR1cm4gYTtcbn07XG4iLCJcbi8qKlxuICogZGVwZW5kZW5jaWVzXG4gKi9cblxudmFyIHR5cGUgPSByZXF1aXJlKCd0eXBlJyk7XG52YXIgayA9IHJlcXVpcmUoJ2tleXMnKTtcblxuLyoqXG4gKiBFeHBvcnQgYGVxbGBcbiAqL1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBlcWw7XG5cbi8qKlxuICogQ29tcGFyZSBgYWAgdG8gYGJgLlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IGFcbiAqIEBwYXJhbSB7TWl4ZWR9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGVxbChhLCBiKXtcbiAgdmFyIGNvbXBhcmUgPSB0eXBlKGEpO1xuXG4gIC8vIHNhbml0eSBjaGVja1xuICBpZiAoY29tcGFyZSAhPSB0eXBlKGIpKSByZXR1cm4gZmFsc2U7XG4gIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcblxuICAvLyBjb21wYXJlXG4gIHJldHVybiAoY29tcGFyZSA9IGVxbFtjb21wYXJlXSlcbiAgICA/IGNvbXBhcmUoYSwgYilcbiAgICA6IGEgPT0gYjtcbn1cblxuLyoqXG4gKiBDb21wYXJlIHJlZ2V4cHMgYGFgLCBgYmAuXG4gKlxuICogQHBhcmFtIHtSZWdFeHB9IGFcbiAqIEBwYXJhbSB7UmVnRXhwfSBiXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5lcWwucmVnZXhwID0gZnVuY3Rpb24oYSwgYil7XG4gIHJldHVybiBhLmlnbm9yZUNhc2UgPT0gYi5pZ25vcmVDYXNlXG4gICAgJiYgYS5tdWx0aWxpbmUgPT0gYi5tdWx0aWxpbmVcbiAgICAmJiBhLmxhc3RJbmRleCA9PSBiLmxhc3RJbmRleFxuICAgICYmIGEuZ2xvYmFsID09IGIuZ2xvYmFsXG4gICAgJiYgYS5zb3VyY2UgPT0gYi5zb3VyY2U7XG59O1xuXG4vKipcbiAqIENvbXBhcmUgb2JqZWN0cyBgYWAsIGBiYC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYVxuICogQHBhcmFtIHtPYmplY3R9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmVxbC5vYmplY3QgPSBmdW5jdGlvbihhLCBiKXtcbiAgdmFyIGtleXMgPSB7fTtcblxuICAvLyBwcm90b1xuICBpZiAoYS5wcm90b3R5cGUgIT0gYi5wcm90b3R5cGUpIHJldHVybiBmYWxzZTtcblxuICAvLyBrZXlzXG4gIGtleXMuYSA9IGsoYSkuc29ydCgpO1xuICBrZXlzLmIgPSBrKGIpLnNvcnQoKTtcblxuICAvLyBsZW5ndGhcbiAgaWYgKGtleXMuYS5sZW5ndGggIT0ga2V5cy5iLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIGtleXNcbiAgaWYgKGtleXMuYS50b1N0cmluZygpICE9IGtleXMuYi50b1N0cmluZygpKSByZXR1cm4gZmFsc2U7XG5cbiAgLy8gd2Fsa1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMuYS5sZW5ndGg7ICsraSkge1xuICAgIHZhciBrZXkgPSBrZXlzLmFbaV07XG4gICAgaWYgKCFlcWwoYVtrZXldLCBiW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBlcWxcbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIENvbXBhcmUgYXJyYXlzIGBhYCwgYGJgLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFcbiAqIEBwYXJhbSB7QXJyYXl9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmVxbC5hcnJheSA9IGZ1bmN0aW9uKGEsIGIpe1xuICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCFlcWwoYVtpXSwgYltpXSkpIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQ29tcGFyZSBkYXRlcyBgYWAsIGBiYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV9IGFcbiAqIEBwYXJhbSB7RGF0ZX0gYlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXFsLmRhdGUgPSBmdW5jdGlvbihhLCBiKXtcbiAgcmV0dXJuICthID09ICtiO1xufTtcbiIsInZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uKG9iail7XG4gIHZhciBrZXlzID0gW107XG5cbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChoYXMuY2FsbChvYmosIGtleSkpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBtZXJnZSA9IHJlcXVpcmUoJ21lcmdlJyk7XG52YXIgZXFsID0gcmVxdWlyZSgnZXFsJyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgdGVzdCBzcHkgd2l0aCBgb2JqYCwgYG1ldGhvZGAuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICBzID0gcmVxdWlyZSgnc3B5Jykoe30sICd0b1N0cmluZycpO1xuICogICAgICBzID0gcmVxdWlyZSgnc3B5JykoZG9jdW1lbnQud3JpdGUpO1xuICogICAgICBzID0gcmVxdWlyZSgnc3B5JykoKTtcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmosIG1ldGhvZCl7XG4gIHZhciBmbiA9IHRvRnVuY3Rpb24oYXJndW1lbnRzLCBzcHkpO1xuICBtZXJnZShzcHksIHByb3RvKTtcbiAgcmV0dXJuIHNweS5yZXNldCgpO1xuXG4gIGZ1bmN0aW9uIHNweSgpe1xuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgIHZhciByZXQgPSBmbihhcmd1bWVudHMpO1xuICAgIHNweS5yZXR1cm5zIHx8IHNweS5yZXNldCgpO1xuICAgIHNweS5hcmdzLnB1c2goYXJncyk7XG4gICAgc3B5LnJldHVybnMucHVzaChyZXQpO1xuICAgIHNweS51cGRhdGUoKTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG59O1xuXG4vKipcbiAqIFBzZXVkby1wcm90b3R5cGUuXG4gKi9cblxudmFyIHByb3RvID0ge307XG5cbi8qKlxuICogTGF6aWx5IG1hdGNoIGBhcmdzYCBhbmQgcmV0dXJuIGB0cnVlYCBpZiB0aGUgc3B5IHdhcyBjYWxsZWQgd2l0aCB0aGVtLlxuICpcbiAqIEBwYXJhbSB7QXJndW1lbnRzfSBhcmdzXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5wcm90by5nb3QgPVxucHJvdG8uY2FsbGVkV2l0aCA9XG5wcm90by5nb3RMYXp5ID1cbnByb3RvLmNhbGxlZFdpdGhMYXp5ID0gZnVuY3Rpb24oKXtcbiAgdmFyIGEgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGFyZ3M7IGFyZ3MgPSB0aGlzLmFyZ3NbaV07IGkrKykge1xuICAgIGlmIChlcWwoYSwgIGFyZ3Muc2xpY2UoMCwgYS5sZW5ndGgpKSkgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIEV4YWN0bHkgbWF0Y2ggYGFyZ3NgIGFuZCByZXR1cm4gYHRydWVgIGlmIHRoZSBzcHkgd2FzIGNhbGxlZCB3aXRoIHRoZW0uXG4gKlxuICogQHBhcmFtIHtBcmd1bWVudHN9IC4uLlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucHJvdG8uZ290RXhhY3RseSA9XG5wcm90by5jYWxsZWRXaXRoRXhhY3RseSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBhID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gIGZvciAodmFyIGkgPSAwLCBhcmdzOyBhcmdzID0gdGhpcy5hcmdzW2ldOyBpKyspIHtcbiAgICBpZiAoZXFsKGEsIGFyZ3MpKSByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogYHRydWVgIGlmIHRoZSBzcHkgcmV0dXJuZWQgYHZhbHVlYC5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucHJvdG8ucmV0dXJuZWQgPSBmdW5jdGlvbih2YWx1ZSl7XG4gIHZhciByZXQgPSB0aGlzLnJldHVybnNbdGhpcy5yZXR1cm5zLmxlbmd0aCAtIDFdO1xuICByZXR1cm4gZXFsKHJldCwgdmFsdWUpO1xufTtcblxuLyoqXG4gKiBgdHJ1ZWAgaWYgdGhlIHNweSB3YXMgY2FsbGVkIG9uY2UuXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucHJvdG8ub25jZSA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAxID09IHRoaXMuYXJncy5sZW5ndGg7XG59O1xuXG4vKipcbiAqIGB0cnVlYCBpZiB0aGUgc3B5IHdhcyBjYWxsZWQgdHdpY2UuXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucHJvdG8udHdpY2UgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gMiA9PSB0aGlzLmFyZ3MubGVuZ3RoO1xufTtcblxuLyoqXG4gKiBgdHJ1ZWAgaWYgdGhlIHNweSB3YXMgY2FsbGVkIHRocmVlIHRpbWVzLlxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnByb3RvLnRocmljZSA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAzID09IHRoaXMuYXJncy5sZW5ndGg7XG59O1xuXG4vKipcbiAqIFJlc2V0IHRoZSBzcHkuXG4gKlxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnByb3RvLnJlc2V0ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5yZXR1cm5zID0gW107XG4gIHRoaXMuYXJncyA9IFtdO1xuICB0aGlzLnVwZGF0ZSgpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVzdG9yZS5cbiAqXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucHJvdG8ucmVzdG9yZSA9IGZ1bmN0aW9uKCl7XG4gIGlmICghdGhpcy5vYmopIHJldHVybiB0aGlzO1xuICB2YXIgbSA9IHRoaXMubWV0aG9kO1xuICB2YXIgZm4gPSB0aGlzLmZuO1xuICB0aGlzLm9ialttXSA9IGZuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogVXBkYXRlIHRoZSBzcHkuXG4gKlxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5wcm90by51cGRhdGUgPSBmdW5jdGlvbigpe1xuICB0aGlzLmNhbGxlZCA9ICEhIHRoaXMuYXJncy5sZW5ndGg7XG4gIHRoaXMuY2FsbGVkT25jZSA9IHRoaXMub25jZSgpO1xuICB0aGlzLmNhbGxlZFR3aWNlID0gdGhpcy50d2ljZSgpO1xuICB0aGlzLmNhbGxlZFRocmljZSA9IHRoaXMudGhyaWNlKCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBUbyBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gey4uLn0gYXJnc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gc3B5XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHRvRnVuY3Rpb24oYXJncywgc3B5KXtcbiAgdmFyIG9iaiA9IGFyZ3NbMF07XG4gIHZhciBtZXRob2QgPSBhcmdzWzFdO1xuXG4gIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICBjYXNlIDA6IHJldHVybiBmdW5jdGlvbiBub29wKCl7fTtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhcmdzKXsgcmV0dXJuIG9iai5hcHBseShudWxsLCBhcmdzKTsgfTtcbiAgICBjYXNlIDI6XG4gICAgICB2YXIgbSA9IG9ialttZXRob2RdO1xuICAgICAgbWVyZ2Uoc3B5LCBtKTtcbiAgICAgIHNweS5tZXRob2QgPSBtZXRob2Q7XG4gICAgICBzcHkuZm4gPSBtO1xuICAgICAgc3B5Lm9iaiA9IG9iajtcbiAgICAgIG9ialttZXRob2RdID0gc3B5O1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFyZ3Mpe1xuICAgICAgICByZXR1cm4gbS5hcHBseShvYmosIGFyZ3MpO1xuICAgICAgfTtcbiAgfVxufVxuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdBZFdvcmRzJywgZnVuY3Rpb24oKXtcbiAgdmFyIEFkV29yZHMgPSBwbHVnaW47XG4gIHZhciBhZHdvcmRzO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBjb252ZXJzaW9uSWQ6IDk3ODM1MjgwMSxcbiAgICBldmVudHM6IHtcbiAgICAgIHNpZ251cDogJy1rR2tDSl9Uc2djUW9mWEIwZ00nLFxuICAgICAgbG9naW46ICdRYlRoQ01fem9nY1FvZlhCMGdNJyxcbiAgICAgIHBsYXk6ICdiOTFmYzc3ZidcbiAgICB9XG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgYWR3b3JkcyA9IG5ldyBBZFdvcmRzKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChhZHdvcmRzKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBhZHdvcmRzLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIGNvcnJlY3Qgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKEFkV29yZHMsIGludGVncmF0aW9uKCdBZFdvcmRzJylcbiAgICAgIC5vcHRpb24oJ2NvbnZlcnNpb25JZCcsICcnKVxuICAgICAgLm9wdGlvbigncmVtYXJrZXRpbmcnLCBmYWxzZSlcbiAgICAgIC5tYXBwaW5nKCdldmVudHMnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdywgJ2dvb2dsZV90cmFja0NvbnZlcnNpb24nKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBsb2FkIHJlbWFya2V0aW5nIGlmIG9wdGlvbiBpcyBub3Qgb24nLCBmdW5jdGlvbigpe1xuICAgICAgICBhZHdvcmRzLm9wdGlvbnMucmVtYXJrZXRpbmcgPSBmYWxzZTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuZ29vZ2xlX3RyYWNrQ29udmVyc2lvbiwge1xuICAgICAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2lkOiBvcHRpb25zLmNvbnZlcnNpb25JZCxcbiAgICAgICAgICBnb29nbGVfY3VzdG9tX3BhcmFtczoge30sXG4gICAgICAgICAgZ29vZ2xlX3JlbWFya2V0aW5nX29ubHk6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbG9hZCByZW1hcmtldGluZyBpZiBvcHRpb24gaXMgb24nLCBmdW5jdGlvbigpe1xuICAgICAgICBhZHdvcmRzLm9wdGlvbnMucmVtYXJrZXRpbmcgPSB0cnVlO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5nb29nbGVfdHJhY2tDb252ZXJzaW9uLCB7XG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25faWQ6IG9wdGlvbnMuY29udmVyc2lvbklkLFxuICAgICAgICAgIGdvb2dsZV9jdXN0b21fcGFyYW1zOiB7fSxcbiAgICAgICAgICBnb29nbGVfcmVtYXJrZXRpbmdfb25seTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdywgJ2dvb2dsZV90cmFja0NvbnZlcnNpb24nKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBzZW5kIGlmIGV2ZW50IGlzIG5vdCBkZWZpbmVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCd0b1N0cmluZycsIHt9KTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Lmdvb2dsZV90cmFja0NvbnZlcnNpb24pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBldmVudCBpZiBpdCBpcyBkZWZpbmVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdzaWdudXAnLCB7fSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lmdvb2dsZV90cmFja0NvbnZlcnNpb24sIHtcbiAgICAgICAgICBnb29nbGVfY29udmVyc2lvbl9pZDogb3B0aW9ucy5jb252ZXJzaW9uSWQsXG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fbGFuZ3VhZ2U6ICdlbicsXG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fZm9ybWF0OiAnMycsXG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fY29sb3I6ICdmZmZmZmYnLFxuICAgICAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2xhYmVsOiBvcHRpb25zLmV2ZW50cy5zaWdudXAsXG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fdmFsdWU6IDAsXG4gICAgICAgICAgZ29vZ2xlX3JlbWFya2V0aW5nX29ubHk6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc3VwcG9ydCBhcnJheSBldmVudHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhZHdvcmRzLm9wdGlvbnMuZXZlbnRzID0gW3sga2V5OiAnbG9naW4nLCB2YWx1ZTogJ1FiVGhDTV96b2djUW9mWEIwZ00nIH1dO1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2xvZ2luJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lmdvb2dsZV90cmFja0NvbnZlcnNpb24sIHtcbiAgICAgICAgICBnb29nbGVfY29udmVyc2lvbl9pZDogb3B0aW9ucy5jb252ZXJzaW9uSWQsXG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fbGFuZ3VhZ2U6ICdlbicsXG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fZm9ybWF0OiAnMycsXG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fY29sb3I6ICdmZmZmZmYnLFxuICAgICAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2xhYmVsOiBhZHdvcmRzLm9wdGlvbnMuZXZlbnRzWzBdLnZhbHVlLFxuICAgICAgICAgIGdvb2dsZV9jb252ZXJzaW9uX3ZhbHVlOiAwLFxuICAgICAgICAgIGdvb2dsZV9yZW1hcmtldGluZ19vbmx5OiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgcmV2ZW51ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnbG9naW4nLCB7IHJldmVudWU6IDkwIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5nb29nbGVfdHJhY2tDb252ZXJzaW9uLCB7XG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25faWQ6IG9wdGlvbnMuY29udmVyc2lvbklkLFxuICAgICAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2xhbmd1YWdlOiAnZW4nLFxuICAgICAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2Zvcm1hdDogJzMnLFxuICAgICAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2NvbG9yOiAnZmZmZmZmJyxcbiAgICAgICAgICBnb29nbGVfY29udmVyc2lvbl9sYWJlbDogb3B0aW9ucy5ldmVudHMubG9naW4sXG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fdmFsdWU6IDkwLFxuICAgICAgICAgIGdvb2dsZV9yZW1hcmtldGluZ19vbmx5OiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGFsd2F5cyBzZW5kIHJlbWFya2V0aW5nX29ubHkgZmFsc2UnLCBmdW5jdGlvbigpe1xuICAgICAgICBhZHdvcmRzLm9wdGlvbnMucmVtYXJrZXRpbmcgPSB0cnVlO1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2xvZ2luJywgeyByZXZlbnVlOiA5MCB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuZ29vZ2xlX3RyYWNrQ29udmVyc2lvbiwge1xuICAgICAgICAgIGdvb2dsZV9jb252ZXJzaW9uX2lkOiBvcHRpb25zLmNvbnZlcnNpb25JZCxcbiAgICAgICAgICBnb29nbGVfY29udmVyc2lvbl9sYW5ndWFnZTogJ2VuJyxcbiAgICAgICAgICBnb29nbGVfY29udmVyc2lvbl9mb3JtYXQ6ICczJyxcbiAgICAgICAgICBnb29nbGVfY29udmVyc2lvbl9jb2xvcjogJ2ZmZmZmZicsXG4gICAgICAgICAgZ29vZ2xlX2NvbnZlcnNpb25fbGFiZWw6IG9wdGlvbnMuZXZlbnRzLmxvZ2luLFxuICAgICAgICAgIGdvb2dsZV9jb252ZXJzaW9uX3ZhbHVlOiA5MCxcbiAgICAgICAgICBnb29nbGVfcmVtYXJrZXRpbmdfb25seTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnQWxleGEnLCBmdW5jdGlvbigpe1xuICB2YXIgQWxleGEgPSBwbHVnaW47XG4gIHZhciBhbGV4YTtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgYWNjb3VudDogJ2g1R2FqMWE0WlAwMDBoJyxcbiAgICBkb21haW46ICdteWRvbWFpbi5jb20nLFxuICAgIGR5bmFtaWM6IHRydWVcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBhbGV4YSA9IG5ldyBBbGV4YShvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoYWxleGEpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGFsZXhhLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShBbGV4YSwgaW50ZWdyYXRpb24oJ0FsZXhhJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnX2F0cmtfb3B0cycpXG4gICAgICAub3B0aW9uKCdhY2NvdW50JywgbnVsbClcbiAgICAgIC5vcHRpb24oJ2RvbWFpbicsICcnKVxuICAgICAgLm9wdGlvbignZHluYW1pYycsIHRydWUpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihhbGV4YSwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuX2F0cmtfb3B0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9hdHJrX29wdHMsIHtcbiAgICAgICAgICBhdHJrX2FjY3Q6IG9wdGlvbnMuYWNjb3VudCxcbiAgICAgICAgICBkb21haW46IG9wdGlvbnMuZG9tYWluLFxuICAgICAgICAgIGR5bmFtaWM6IG9wdGlvbnMuZHluYW1pY1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGFsZXhhLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGFsZXhhLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0FtcGxpdHVkZScsIGZ1bmN0aW9uKCl7XG4gIHZhciBBbXBsaXR1ZGUgPSBwbHVnaW47XG4gIHZhciBhbXBsaXR1ZGU7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFwaUtleTogJzA3ODA4ODY2YWRiMjUxMGFkZjE5ZWU2OWU4ZmMyMjAxJ1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGFtcGxpdHVkZSA9IG5ldyBBbXBsaXR1ZGUob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGFtcGxpdHVkZSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgYW1wbGl0dWRlLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShBbXBsaXR1ZGUsIGludGVncmF0aW9uKCdBbXBsaXR1ZGUnKVxuICAgICAgLmdsb2JhbCgnYW1wbGl0dWRlJylcbiAgICAgIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAgICAgLm9wdGlvbigndHJhY2tBbGxQYWdlcycsIGZhbHNlKVxuICAgICAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGFtcGxpdHVkZSwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW1wbGl0dWRlLnJlc2V0KCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2luZG93LmFtcGxpdHVkZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy5hbXBsaXR1ZGUpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5hbXBsaXR1ZGUpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoYW1wbGl0dWRlLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGFtcGxpdHVkZSwgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5hbXBsaXR1ZGUsICdsb2dFdmVudCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHRyYWNrIHVubmFtZWQgcGFnZXMgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5hbXBsaXR1ZGUubG9nRXZlbnQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgdW5uYW1lZCBwYWdlcyBpZiBlbmFibGVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW1wbGl0dWRlLm9wdGlvbnMudHJhY2tBbGxQYWdlcyA9IHRydWU7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmFtcGxpdHVkZS5sb2dFdmVudCwgJ0xvYWRlZCBhIFBhZ2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIG5hbWVkIHBhZ2VzIGJ5IGRlZmF1bHQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnTmFtZScpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5hbXBsaXR1ZGUubG9nRXZlbnQsICdWaWV3ZWQgTmFtZSBQYWdlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBuYW1lZCBwYWdlcyB3aXRoIGEgY2F0ZWdvcnkgYWRkZWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnQ2F0ZWdvcnknLCAnTmFtZScpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5hbXBsaXR1ZGUubG9nRXZlbnQsICdWaWV3ZWQgQ2F0ZWdvcnkgTmFtZSBQYWdlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBjYXRlZ29yaXplZCBwYWdlcyBieSBkZWZhdWx0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuYW1wbGl0dWRlLmxvZ0V2ZW50LCAnVmlld2VkIENhdGVnb3J5IFBhZ2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB0cmFjayBuYW1lIG9yIGNhdGVnb3JpemVkIHBhZ2VzIGlmIGRpc2FibGVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW1wbGl0dWRlLm9wdGlvbnMudHJhY2tOYW1lZFBhZ2VzID0gZmFsc2U7XG4gICAgICAgIGFtcGxpdHVkZS5vcHRpb25zLnRyYWNrQ2F0ZWdvcml6ZWRQYWdlcyA9IGZhbHNlO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnQ2F0ZWdvcnknLCAnTmFtZScpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cuYW1wbGl0dWRlLmxvZ0V2ZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5hbXBsaXR1ZGUsICdzZXRVc2VySWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LmFtcGxpdHVkZSwgJ3NldEdsb2JhbFVzZXJQcm9wZXJ0aWVzJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5hbXBsaXR1ZGUuc2V0VXNlcklkLCAnaWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmFtcGxpdHVkZS5zZXRHbG9iYWxVc2VyUHJvcGVydGllcywgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5hbXBsaXR1ZGUuc2V0VXNlcklkLCAnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuYW1wbGl0dWRlLnNldEdsb2JhbFVzZXJQcm9wZXJ0aWVzLCB7IGlkOiAnaWQnLCB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5hbXBsaXR1ZGUsICdsb2dFdmVudCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuYW1wbGl0dWRlLmxvZ0V2ZW50LCAnZXZlbnQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQgYW5kIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuYW1wbGl0dWRlLmxvZ0V2ZW50LCAnZXZlbnQnLCB7IHByb3BlcnR5OiB0cnVlIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlLnNraXAoJ0FwcGN1ZXMnLCBmdW5jdGlvbigpe1xuICB2YXIgQXBwY3VlcyA9IHBsdWdpbi5JbnRlZ3JhdGlvbjtcbiAgdmFyIGFwcGN1ZXM7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFwcGN1ZXNJZDogJ3Rlc3QnLFxuICAgIHVzZXJJZDogJ3Rlc3QnLFxuICAgIHVzZXJFbWFpbDogJ3Rlc3RAdGVzdGlmaWNhdGlvbi5jb20nXG4gIH07XG5cbiAgLy8gRGlzYWJsZSBBTUQgZm9yIHRoZXNlIGJyb3dzZXIgdGVzdHMuXG4gIHZhciBfZGVmaW5lID0gd2luZG93LmRlZmluZTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBhcHBjdWVzID0gbmV3IEFwcGN1ZXMob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGFwcGN1ZXMpO1xuICAgIHdpbmRvdy5kZWZpbmUgPSB1bmRlZmluZWQ7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICAgIHdpbmRvdy5kZWZpbmUgPSBfZGVmaW5lO1xuICB9KTtcblxuICBhZnRlcihmdW5jdGlvbigpe1xuICAgIGFwcGN1ZXMucmVzZXQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoQXBwY3VlcywgaW50ZWdyYXRpb24oJ0FwcGN1ZXMnKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdBcHBjdWVzJylcbiAgICAgIC5nbG9iYWwoJ0FwcGN1ZXNJZGVudGl0eScpXG4gICAgICAub3B0aW9uKCdhcHBjdWVzSWQnLCAnJylcbiAgICAgIC5vcHRpb24oJ3VzZXJJZCcsICcnKVxuICAgICAgLm9wdGlvbigndXNlckVtYWlsJywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihhcHBjdWVzLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhcHBjdWVzLnJlc2V0KCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChhcHBjdWVzLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGFwcGN1ZXMsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LkFwcGN1ZXMsICdpZGVudGlmeScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbmQgaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5BcHBjdWVzLmlkZW50aWZ5LCB7IGlkOiAnaWQnLCB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdhd2Uuc20nLCBmdW5jdGlvbigpe1xuICB2YXIgQXdlc20gPSBwbHVnaW47XG4gIHZhciBhd2VzbTtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgYXBpS2V5OiAnNWM4YjFhMjEyNDM0YzIxNTNjMmYyYzJmMmM3NjVhMzYxNDBhZGQyNDNiZjZlYWU4NzYzNDVmOGZkMTEwNDVkOScsXG4gICAgZXZlbnRzOiB7IGV2ZW50OiAnZ29hbF8xJyB9XG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgYXdlc20gPSBuZXcgQXdlc20ob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGF3ZXNtKTtcbiAgICAvLyB0dXJuIG9mZiB0aGUgZGF0YSBjYXB0dXJpbmcgdG8gcHJldmVudCBqc29ucCBmcm9tIGJyZWFraW5nIG90aGVyIHRlc3RzXG4gICAgd2luZG93LkFXRVNNRVhUUkEgPSB7IGNhcHR1cmVfZGF0YTogZmFsc2UgfTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBhd2VzbS5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoQXdlc20sIGludGVncmF0aW9uKCdhd2Uuc20nKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdBV0VTTScpXG4gICAgICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgICAgIC5tYXBwaW5nKCdldmVudHMnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoYXdlc20sICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBwYXNzIG9wdGlvbnMgdG8gYXdlLnNtJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmVxdWFsKHdpbmRvdy5BV0VTTS5hcGlfa2V5LCBvcHRpb25zLmFwaUtleSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChhd2VzbS5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChhd2VzbSwgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuQVdFU00sICdjb252ZXJ0Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb252ZXJ0IGFuIGV2ZW50IHRvIGEgZ29hbCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKVxuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5BV0VTTS5jb252ZXJ0LCAnZ29hbF8xJywgMCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgY29udmVydCBhbiB1bmtub3duIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCd1bmtub3duJyk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5BV0VTTS5jb252ZXJ0KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHN1cHBvcnQgYXJyYXkgZXZlbnRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYXdlc20ub3B0aW9ucy5ldmVudHMgPSBbeyBrZXk6ICdldmVudCcsIHZhbHVlOiAnZ29hbF8yJyB9XTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgdmFsdWU6IDIgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkFXRVNNLmNvbnZlcnQsICdnb2FsXzInLCAyKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGFjY2VwdCBhIHZhbHVlIHByb3BlcnR5JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgdmFsdWU6IDEgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkFXRVNNLmNvbnZlcnQsICdnb2FsXzEnLCAxKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHByZWZlciBhbmQgY29udmVydCBhIHJldmVudWUgcHJvcGVydHknLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyB2YWx1ZTogMSwgcmV2ZW51ZTogJyQ0Mi45OScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkFXRVNNLmNvbnZlcnQsICdnb2FsXzEnLCA0Mjk5KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbi8vIGF3ZXNvbWF0aWMgYXMgYSBjb21wYW55IHNlZW1zIHRvIGhhdmUgYmVlbiBzaHV0IGRvd25cbmRlc2NyaWJlLnNraXAoJ0F3ZXNvbWF0aWMnLCBmdW5jdGlvbigpe1xuICB2YXIgQXdlc29tYXRpYyA9IHBsdWdpbjtcbiAgdmFyIGF3ZXNvbWF0aWM7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFwcElkOiAnYWYzOTJhZjAxNjAzY2EzODM2NzI2ODkyNDFiNjQ4YjInXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgYXdlc29tYXRpYyA9IG5ldyBBd2Vzb21hdGljKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChhd2Vzb21hdGljKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBhd2Vzb21hdGljLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShBd2Vzb21hdGljLCBpbnRlZ3JhdGlvbignQXdlc29tYXRpYycpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ0F3ZXNvbWF0aWMnKVxuICAgICAgLmdsb2JhbCgnQXdlc29tYXRpY1NldHRpbmdzJylcbiAgICAgIC5nbG9iYWwoJ0F3c21TZXR1cCcpXG4gICAgICAuZ2xvYmFsKCdBd3NtVG1wJylcbiAgICAgIC5vcHRpb24oJ2FwcElkJywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1Yihhd2Vzb21hdGljLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGFmdGVyKGZ1bmN0aW9uKCl7XG4gICAgICAgIGRlbGV0ZSB3aW5kb3cuQXdlc29tYXRpYztcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aCB0aGUgY3VycmVudCB1c2VyJywgZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gbmVlZCB0byBzdHViIG91dCB0aGVzZSBwaWVjZXMgYmVjYXVzZSB0aGUgbG9hZGluZyBsb2dpYyBpcyBjb21wbGV4XG4gICAgICAgIHdpbmRvdy5Bd2Vzb21hdGljID0ge307XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5Bd2Vzb21hdGljLCAnaW5pdGlhbGl6ZScpO1xuICAgICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkF3ZXNvbWF0aWMuaW5pdGlhbGl6ZSwge1xuICAgICAgICAgICAgYXBwSWQ6IG9wdGlvbnMuYXBwSWQsXG4gICAgICAgICAgICB1c2VyX2lkOiAnaWQnLFxuICAgICAgICAgICAgdHJhaXQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGF3ZXNvbWF0aWMsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdCaW5nIEFkcycsIGZ1bmN0aW9uKCl7XG4gIHZhciBCaW5nID0gcGx1Z2luO1xuICB2YXIgYmluZztcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgc2l0ZUlkOiAnZmQwODBiNDEtMGY4MC00MjFkLTlmMTItZDZiYTQzN2UyMDZkJyxcbiAgICBkb21haW5JZDogJzI4MjMyMDQnLFxuICAgIGV2ZW50czoge1xuICAgICAgc2lnbnVwOiAxLFxuICAgICAgbG9naW46IDIsXG4gICAgICBwbGF5OiAzXG4gICAgfVxuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGJpbmcgPSBuZXcgQmluZyhvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoYmluZyk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgYmluZy5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSBjb3JyZWN0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShCaW5nLCBpbnRlZ3JhdGlvbignQmluZyBBZHMnKVxuICAgICAgLm9wdGlvbignc2l0ZUlkJywgJycpXG4gICAgICAub3B0aW9uKCdkb21haW5JZCcsICcnKVxuICAgICAgLm1hcHBpbmcoJ2V2ZW50cycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoYmluZywgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cubXN0YWcsICdsb2FkVGFnJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBpZiBnb2FsIGlzIG5vdCBkZWZpbmVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCd0b1N0cmluZycsIHt9KTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Lm1zdGFnLmxvYWRUYWcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBjb3JyZWN0bHknLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ3BsYXknLCB7IHJldmVudWU6IDkwIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5tc3RhZy5sb2FkVGFnLCAnYW5hbHl0aWNzJywge1xuICAgICAgICAgIGRvbWFpbklkOiBvcHRpb25zLmRvbWFpbklkLFxuICAgICAgICAgIHJldmVudWU6IDkwLFxuICAgICAgICAgIGRlZHVwOiAnMScsXG4gICAgICAgICAgdHlwZTogJzEnLFxuICAgICAgICAgIGFjdGlvbmlkOiBvcHRpb25zLmV2ZW50cy5wbGF5XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc3VwcG9ydCBhcnJheSBldmVudHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBiaW5nLm9wdGlvbnMuZXZlbnRzID0gW3sga2V5OiAnZXZlbnQnLCB2YWx1ZTogNCB9XTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgcmV2ZW51ZTogOTkgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1zdGFnLmxvYWRUYWcsICdhbmFseXRpY3MnLCB7XG4gICAgICAgICAgYWN0aW9uaWQ6IGJpbmcub3B0aW9ucy5ldmVudHNbMF0udmFsdWUsXG4gICAgICAgICAgZG9tYWluSWQ6IG9wdGlvbnMuZG9tYWluSWQsXG4gICAgICAgICAgcmV2ZW51ZTogOTksXG4gICAgICAgICAgZGVkdXA6ICcxJyxcbiAgICAgICAgICB0eXBlOiAnMSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnQnJvbnRvJywgZnVuY3Rpb24oKXtcbiAgdmFyIEJyb250byA9IHBsdWdpbjtcbiAgdmFyIGJyb250bztcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgc2l0ZUlkOiAnYXJ2ZHNpYWhkeWhieGh1a3ZpZ25mbGhka25sZGJlbidcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBicm9udG8gPSBuZXcgQnJvbnRvKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChicm9udG8pO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGJyb250by5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSBjb3JyZWN0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShCcm9udG8sIGludGVncmF0aW9uKCdCcm9udG8nKVxuICAgICAgLm9wdGlvbignc2l0ZUlkJywgJycpXG4gICAgICAub3B0aW9uKCdob3N0JywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1Yihicm9udG8sICdsb2FkJyk7XG4gICAgICBhbmFseXRpY3Muc3R1Yihicm9udG8sICdkZWJ1ZycpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3MuZGVidWcoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgd2FybiB0aGF0IF9idGFfdGlkIGFuZCBfYnRhX2MgYXJlbnQgZm91bmQgaWYgZGVidWdnZXIgaXMgb24nLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuZGVidWcoKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChcbiAgICAgICAgICBicm9udG8uZGVidWcsXG4gICAgICAgICAgJ21pc3NpbmcgdHJhY2tpbmcgVVJMIHBhcmFtZXRlcnMgYF9idGFfdGlkYCBhbmQgYF9idGFfY2AuJ1xuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGJyb250bywgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjY29tcGxldGVkT3JkZXInLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yihicm9udG8uYnRhLCAnYWRkT3JkZXInKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgZWNvbW1lcmNlIGRhdGEnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyBlbWFpbDogJ2xhbmNlQHNlZ21lbnQuaW8nIH0pO1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHtcbiAgICAgICAgICBwcm9kdWN0czogW3sgc2t1OiAnYzU0NmM5NicsIHF1YW50aXR5OiA4LCBuYW1lOiAnbXktcHJvZHVjdCcsIHByaWNlOiA5OS45OSB9XSxcbiAgICAgICAgICBvcmRlcklkOiAnNTVjNDk3YmYnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwoYnJvbnRvLmJ0YS5hZGRPcmRlci5hcmdzWzBdWzBdLCB7XG4gICAgICAgICAgZW1haWw6ICdsYW5jZUBzZWdtZW50LmlvJyxcbiAgICAgICAgICBpdGVtczogW3sgaXRlbV9pZDogJ2M1NDZjOTYnLCBxdWFudGl0eTogOCwgZGVzYzogJ215LXByb2R1Y3QnLCBhbW91bnQ6IDk5Ljk5IH1dLFxuICAgICAgICAgIG9yZGVyX2lkOiAnNTVjNDk3YmYnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdCdWdIZXJkJywgZnVuY3Rpb24oKXtcbiAgdmFyIEJ1Z0hlcmQgPSBwbHVnaW47XG4gIHZhciBidWdoZXJkO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBhcGlLZXk6ICd2cDN6NGx5cmk3bWRqZjd3anJ1ZnBhJ1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGJ1Z2hlcmQgPSBuZXcgQnVnSGVyZChvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoYnVnaGVyZCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgYnVnaGVyZC5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ19CSF9mcmFtZScpO1xuICAgIGlmIChpZnJhbWUpIGlmcmFtZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKEJ1Z0hlcmQsIGludGVncmF0aW9uKCdCdWdIZXJkJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnQnVnSGVyZENvbmZpZycpXG4gICAgICAuZ2xvYmFsKCdfYnVnSGVyZCcpXG4gICAgICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgICAgIC5vcHRpb24oJ3Nob3dGZWVkYmFja1RhYicsIHRydWUpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihidWdoZXJkLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIHdpbmRvdy5CdWdIZXJkQ29uZmlnJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuQnVnSGVyZENvbmZpZywge1xuICAgICAgICAgIGZlZWRiYWNrOiB7IGhpZGU6IGZhbHNlIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGhpZGUgdGhlIHRhYicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGJ1Z2hlcmQub3B0aW9ucy5zaG93RmVlZGJhY2tUYWIgPSBmYWxzZTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuQnVnSGVyZENvbmZpZywge1xuICAgICAgICAgIGZlZWRiYWNrOiB7IGhpZGU6IHRydWUgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChidWdoZXJkLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0J1Z3NuYWcnLCBmdW5jdGlvbigpe1xuICB2YXIgQnVnc25hZyA9IHBsdWdpbjtcbiAgdmFyIGJ1Z3NuYWc7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFwaUtleTogJzc1NjNmZGZjMWY0MThlOTU2ZjVlNTQ3MjE0ODc1OWYwJ1xuICB9O1xuICB2YXIgb25lcnJvciA9IHdpbmRvdy5vbmVycm9yO1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGJ1Z3NuYWcgPSBuZXcgQnVnc25hZyhvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoYnVnc25hZyk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgYnVnc25hZy5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoQnVnc25hZywgaW50ZWdyYXRpb24oJ0J1Z3NuYWcnKVxuICAgICAgLmdsb2JhbCgnQnVnc25hZycpXG4gICAgICAub3B0aW9uKCdhcGlLZXknLCAnJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGJ1Z3NuYWcsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQgYW5kIHNldCBhbiBvbmVycm9yIGhhbmRsZXInLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGJ1Z3NuYWcsIGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiBkb25lKGVycik7XG4gICAgICAgIGFuYWx5dGljcy5ub3RFcXVhbCh3aW5kb3cub25lcnJvciwgb25lcnJvcik7XG4gICAgICAgIGFuYWx5dGljcy5lcXVhbCgnZnVuY3Rpb24nLCB0eXBlb2Ygd2luZG93Lm9uZXJyb3IpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIHNldCBtZXRhZGF0YScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5CdWdzbmFnLm1ldGFEYXRhLCB7XG4gICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgdHJhaXQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJ2V4dGVuZCcpO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnQ2hhcnRiZWF0JywgZnVuY3Rpb24gKCkge1xuICB2YXIgQ2hhcnRiZWF0ID0gcGx1Z2luO1xuICB2YXIgY2hhcnRiZWF0O1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICB1aWQ6ICd4JyxcbiAgICBkb21haW46ICdleGFtcGxlLmNvbSdcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBjaGFydGJlYXQgPSBuZXcgQ2hhcnRiZWF0KG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChjaGFydGJlYXQpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGNoYXJ0YmVhdC5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoQ2hhcnRiZWF0LCBpbnRlZ3JhdGlvbignQ2hhcnRiZWF0JylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnX3NmX2FzeW5jX2NvbmZpZycpXG4gICAgICAuZ2xvYmFsKCdfc2ZfZW5kcHQnKVxuICAgICAgLmdsb2JhbCgncFNVUEVSRkxZJylcbiAgICAgIC5vcHRpb24oJ2RvbWFpbicsICcnKVxuICAgICAgLm9wdGlvbigndWlkJywgbnVsbCkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGNoYXJ0YmVhdCwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgICAgY2hhcnRiZWF0LnJlc2V0KCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2luZG93Ll9zZl9hc3luY19jb25maWcnLCBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZXhwZWN0ZWQgPSBleHRlbmQoe30sIG9wdGlvbnMsIHsgdXNlQ2Fub25pY2FsOiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fc2ZfYXN5bmNfY29uZmlnLCBleHBlY3RlZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBpbmhlcml0IGdsb2JhbCB3aW5kb3cuX3NmX2FzeW5jX2NvbmZpZyBkZWZhdWx0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHdpbmRvdy5fc2ZfYXN5bmNfY29uZmlnID0geyBzZXR0aW5nOiB0cnVlIH07XG4gICAgICAgIHZhciBleHBlY3RlZCA9IGV4dGVuZCh7fSwgb3B0aW9ucywge1xuICAgICAgICAgIHNldHRpbmc6IHRydWUsXG4gICAgICAgICAgdXNlQ2Fub25pY2FsOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9zZl9hc3luY19jb25maWcsIGV4cGVjdGVkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuX3NmX2VuZHB0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Ll9zZl9lbmRwdCk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5lcXVhbCgnbnVtYmVyJywgdHlwZW9mIHdpbmRvdy5fc2ZfZW5kcHQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoY2hhcnRiZWF0LmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGNoYXJ0YmVhdCwgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5wU1VQRVJGTFksICd2aXJ0dWFsUGFnZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHBhdGggYW5kIHRpdGxlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoeyBwYXRoOiAnL3BhdGgnLCB0aXRsZTogJ3RpdGxlJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cucFNVUEVSRkxZLnZpcnR1YWxQYWdlLCAnL3BhdGgnLCAndGl0bGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHByZWZlciBhIG5hbWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnTmFtZScsIHsgcGF0aDogJy9wYXRoJywgdGl0bGU6ICd0aXRsZScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LnBTVVBFUkZMWS52aXJ0dWFsUGFnZSwgJy9wYXRoJywgJ05hbWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHByZWZlciBhIG5hbWUgYW5kIGNhdGVnb3J5JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnLCB7IHBhdGg6ICcvcGF0aCcsIHRpdGxlOiAndGl0bGUnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5wU1VQRVJGTFkudmlydHVhbFBhZ2UsICcvcGF0aCcsICdDYXRlZ29yeSBOYW1lJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnQ2h1cm5CZWUnLCBmdW5jdGlvbigpe1xuICB2YXIgQ2h1cm5CZWUgPSBwbHVnaW47XG4gIHZhciBjaHVybmJlZTtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgYXBpS2V5OiAnaF9wRXZrR2F4b0tFTWdhZFM1LUdsVG9IWkprR0FYcTcwd2x3VWc4N1pBMCcsXG4gICAgZXZlbnRzOiB7XG4gICAgICAnTG9nZ2VkIEluJzogJ2xvZ2luJ1xuICAgIH1cbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBjaHVybmJlZSA9IG5ldyBDaHVybkJlZShvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoY2h1cm5iZWUpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGNodXJuYmVlLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShDaHVybkJlZSwgaW50ZWdyYXRpb24oJ0NodXJuQmVlJylcbiAgICAgIC5nbG9iYWwoJ19jYnEnKVxuICAgICAgLmdsb2JhbCgnQ2h1cm5CZWUnKVxuICAgICAgLm9wdGlvbignYXBpS2V5JywgJycpXG4gICAgICAubWFwcGluZygnZXZlbnRzJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGNodXJuYmVlLCAnbG9hZCcpO1xuICAgIH0pO1xuICAgIFxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIHdpbmRvdy5fY2JxID0gW107XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fY2JxLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoY2h1cm5iZWUubG9hZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwdXNoIHRoZSBhcGkga2V5JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2NicS5wdXNoLCBbXG4gICAgICAgICAgJ19zZXRBcGlLZXknLFxuICAgICAgICAgICdoX3BFdmtHYXhvS0VNZ2FkUzUtR2xUb0haSmtHQVhxNzB3bHdVZzg3WkEwJ1xuICAgICAgICBdKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChjaHVybmJlZSwgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX2NicSwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGlnbm9yZSBub24gc3RhbmRhcmQgZXZlbnRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdub24tc3RhbmRhcmQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Ll9jYnEucHVzaCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBhbGxvdyBzdGFuZGFyZCBldmVudHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2xvZ2luJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9jYnEucHVzaCwgWydsb2dpbicsIHt9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cnkgYW5kIG1hcCBub24gc3RhbmRhcmQgZXZlbnRzIHVzaW5nIGBldmVudHNgIG9wdGlvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnTG9nZ2VkIEluJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9jYnEucHVzaCwgWydsb2dpbicsIHt9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGFycmF5IGV2ZW50cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGNodXJuYmVlLm9wdGlvbnMuZXZlbnRzID0gW3sga2V5OiAnZXZlbnQnLCB2YWx1ZTogJ2xvZ2luJyB9XTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fY2JxLnB1c2gsIFsnbG9naW4nLCB7fV0pO1xuICAgICAgfSlcblxuICAgICAgaXQoJ3Nob3VsZCBhbGlhcyBgcmV2ZW51ZWAgdG8gYGFtb3VudGAnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ3JlZ2lzdGVyJywgeyByZXZlbnVlOiA5MCB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2NicS5wdXNoLCBbJ3JlZ2lzdGVyJywgeyBhbW91bnQ6IDkwIH1dKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdDbGlja1RhbGUnLCBmdW5jdGlvbigpe1xuICB2YXIgQ2xpY2tUYWxlID0gcGx1Z2luO1xuICB2YXIgY2xpY2t0YWxlO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBwYXJ0aXRpb25JZDogJ3d3dzE0JyxcbiAgICBwcm9qZWN0SWQ6ICcxOTM3MCcsXG4gICAgcmVjb3JkaW5nUmF0aW86ICcwLjAwODknXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgY2xpY2t0YWxlID0gbmV3IENsaWNrVGFsZShvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoY2xpY2t0YWxlKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBjbGlja3RhbGUucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKENsaWNrVGFsZSwgaW50ZWdyYXRpb24oJ0NsaWNrVGFsZScpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ1dSSW5pdFRpbWUnKVxuICAgICAgLmdsb2JhbCgnQ2xpY2tUYWxlJylcbiAgICAgIC5vcHRpb24oJ2h0dHBDZG5VcmwnLCAnaHR0cDovL3MuY2xpY2t0YWxlLm5ldC9XUmUwLmpzJylcbiAgICAgIC5vcHRpb24oJ2h0dHBzQ2RuVXJsJywgJycpXG4gICAgICAub3B0aW9uKCdwcm9qZWN0SWQnLCAnJylcbiAgICAgIC5vcHRpb24oJ3JlY29yZGluZ1JhdGlvJywgMC4wMSlcbiAgICAgIC5vcHRpb24oJ3BhcnRpdGlvbklkJywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihjbGlja3RhbGUsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBzdG9yZSB0aGUgbG9hZCB0aW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93LldSSW5pdFRpbWUpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuZXF1YWwoJ251bWJlcicsIHR5cGVvZiB3aW5kb3cuV1JJbml0VGltZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBhcHBlbmQgdGhlIGNsaWNrdGFsZSBkaXYnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdDbGlja1RhbGVEaXYnKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoY2xpY2t0YWxlLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdywgJ0NsaWNrVGFsZVNldFVJRCcpO1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3csICdDbGlja1RhbGVGaWVsZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuQ2xpY2tUYWxlU2V0VUlELCAnaWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkNsaWNrVGFsZUZpZWxkLCAndHJhaXQnLCB0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5DbGlja1RhbGVTZXRVSUQsICdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5DbGlja1RhbGVGaWVsZCwgJ3RyYWl0JywgdHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3csICdDbGlja1RhbGVFdmVudCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuQ2xpY2tUYWxlRXZlbnQsICdldmVudCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0NsaWNreScsIGZ1bmN0aW9uKCl7XG4gIHZhciBDbGlja3kgPSBwbHVnaW47XG4gIHZhciBjbGlja3k7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIHNpdGVJZDogMTAwNjQ5ODQ4XG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgY2xpY2t5ID0gbmV3IENsaWNreShvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoY2xpY2t5KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBjbGlja3kucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKENsaWNreSwgaW50ZWdyYXRpb24oJ0NsaWNreScpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ2NsaWNreV9zaXRlX2lkcycpXG4gICAgICAub3B0aW9uKCdzaXRlSWQnLCBudWxsKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoY2xpY2t5LCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0aGUgY2xpY2t5IGdsb2JhbCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmNsaWNreV9zaXRlX2lkcywgWyBvcHRpb25zLnNpdGVJZCBdKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChjbGlja3ksIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3BhZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuY2xpY2t5LCAnbG9nJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgcGF0aCBhbmQgdGl0bGUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSh7IHBhdGg6ICcvcGF0aCcsIHRpdGxlOiAndGl0bGUnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5jbGlja3kubG9nLCAnL3BhdGgnLCAndGl0bGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHByZWZlciBhIG5hbWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnbmFtZScsIHsgcGF0aDogJy9wYXRoJywgdGl0bGU6ICd0aXRsZScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmNsaWNreS5sb2csICcvcGF0aCcsICduYW1lJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwcmVmZXIgYSBuYW1lIGFuZCBjYXRlZ29yeScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdjYXRlZ29yeScsICduYW1lJywgeyBwYXRoOiAnL3BhdGgnLCB0aXRsZTogJ3RpdGxlJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuY2xpY2t5LmxvZywgJy9wYXRoJywgJ2NhdGVnb3J5IG5hbWUnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgZGVsZXRlIHdpbmRvdy5jbGlja3lfY3VzdG9tLnNlc3Npb247XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZXQgYW4gaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmNsaWNreV9jdXN0b20uc2Vzc2lvbiwgeyBpZDogJ2lkJyB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNldCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuY2xpY2t5X2N1c3RvbS5zZXNzaW9uLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2V0IGFuIGlkIGFuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuY2xpY2t5X2N1c3RvbS5zZXNzaW9uLCB7IGlkOiAnaWQnLCB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5jbGlja3ksICdnb2FsJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5jbGlja3kuZ29hbCwgJ2V2ZW50Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIHJldmVudWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyByZXZlbnVlOiA0Mi45OSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuY2xpY2t5LmdvYWwsICdldmVudCcsIDQyLjk5KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdjb21TY29yZScsIGZ1bmN0aW9uKCl7XG4gIHZhciBDb21zY29yZSA9IHBsdWdpbjtcbiAgdmFyIGNvbXNjb3JlO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBjMjogJ3gnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgY29tc2NvcmUgPSBuZXcgQ29tc2NvcmUob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGNvbXNjb3JlKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBjb21zY29yZS5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoQ29tc2NvcmUsIGludGVncmF0aW9uKCdjb21TY29yZScpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ19jb21zY29yZScpXG4gICAgICAub3B0aW9uKCdjMScsICcyJylcbiAgICAgIC5vcHRpb24oJ2MyJywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1Yihjb21zY29yZSwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuX2NvbXNjb3JlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Ll9jb21zY29yZSk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Ll9jb21zY29yZSBpbnN0YW5jZW9mIEFycmF5KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChjb21zY29yZSwgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5DT01TQ09SRSwgJ2JlYWNvbicpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCBvbmx5IG9uIDJuZCBwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93LkNPTVNDT1JFLmJlYWNvbiwgeydjMSc6JzInLCAnYzInOid4J30pO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5DT01TQ09SRS5iZWFjb24sIHsnYzEnOicyJywgJ2MyJzoneCd9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdDcmF6eSBFZ2cnLCBmdW5jdGlvbigpe1xuICB2YXIgQ3JhenlFZ2cgPSBwbHVnaW47XG4gIHZhciBjcmF6eWVnZztcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgYWNjb3VudE51bWJlcjogJzAwMTM4MzAxJ1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGNyYXp5ZWdnID0gbmV3IENyYXp5RWdnKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChjcmF6eWVnZyk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgY3JhenllZ2cucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKENyYXp5RWdnLCBpbnRlZ3JhdGlvbignQ3JhenkgRWdnJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnQ0UyJylcbiAgICAgIC5vcHRpb24oJ2FjY291bnROdW1iZXInLCAnJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGNyYXp5ZWdnLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoY3JhenllZ2cubG9hZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoY3JhenllZ2csIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgaXNvID0gcmVxdWlyZSgndG8taXNvLXN0cmluZycpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0N1cmViaXQnLCBmdW5jdGlvbigpe1xuICB2YXIgQ3VyZWJpdCA9IHBsdWdpbjtcbiAgdmFyIGN1cmViaXQ7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIHNpdGVJZDogJ2N1cmViaXQtODdhYjk5NWQtNzM2Yi00NWJhLWFjNDEtNzFmNGRiYjVjNzRhJyxcbiAgICBzZXJ2ZXI6ICdodHRwczovL2FwaS5zZWdtZW50LmlvL3RyYWNrJ1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGN1cmViaXQgPSBuZXcgQ3VyZWJpdChvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoY3VyZWJpdCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgY3VyZWJpdC5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSBjb3JyZWN0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShDdXJlYml0LCBpbnRlZ3JhdGlvbignQ3VyZWJpdCcpXG4gICAgICAuZ2xvYmFsKCdfY3VyZWJpdHEnKVxuICAgICAgLmdsb2JhbCgnY3VyZWJpdCcpXG4gICAgICAub3B0aW9uKCdzaXRlSWQnLCAnJylcbiAgICAgIC5vcHRpb24oJ2lmcmFtZUJvcmRlcicsIDApXG4gICAgICAub3B0aW9uKCdpZnJhbWVJZCcsICdjdXJlYml0X2ludGVncmF0aW9uJylcbiAgICAgIC5vcHRpb24oJ2lmcmFtZUhlaWdodCcsICc0ODAnKVxuICAgICAgLm9wdGlvbignaWZyYW1lV2lkdGgnLCAnMTAwJScpXG4gICAgICAub3B0aW9uKCdyZXNwb25zaXZlJywgdHJ1ZSlcbiAgICAgIC5vcHRpb24oJ2RldmljZScsICcnKVxuICAgICAgLm9wdGlvbignaW5zZXJ0SW50b0lkJywgJycpXG4gICAgICAub3B0aW9uKCdjYW1wYWlnbnMnLCB7fSlcbiAgICAgIC5vcHRpb24oJ3NlcnZlcicsICdodHRwczovL3d3dy5jdXJlYml0LmNvbScpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihjdXJlYml0LCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgcHVzaCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9jdXJlYml0cSwgW1snaW5pdCcsIHtcbiAgICAgICAgICBzaXRlX2lkOiBvcHRpb25zLnNpdGVJZCxcbiAgICAgICAgICBzZXJ2ZXI6ICdodHRwczovL2FwaS5zZWdtZW50LmlvL3RyYWNrJ1xuICAgICAgICB9XV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoY3VyZWJpdC5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChjdXJlYml0LCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3BhZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX2N1cmViaXRxLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHJlZ2lzdGVyIGFmZmlsaWF0ZSB3aGVuIHRoZSB1cmwgZG9lc250IG1hdGNoJywgZnVuY3Rpb24oKXtcbiAgICAgICAgY3VyZWJpdC5vcHRpb25zLmNhbXBhaWducyA9IHsgJy9zaGFyZSc6ICdzaGFyZSx0ZXN0JyB9O1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cuX2N1cmViaXRxLnB1c2gpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgYWZmaWxpYXRlIHdoZW4gdGhlIHVybCBtYXRjaGVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGNhbXBhaWducyA9IHt9O1xuICAgICAgICBjYW1wYWlnbnNbd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXSA9ICdzaGFyZSx0ZXN0JztcbiAgICAgICAgY3VyZWJpdC5vcHRpb25zLmNhbXBhaWducyA9IGNhbXBhaWducztcbiAgICAgICAgY3VyZWJpdC5vcHRpb25zLmlmcmFtZUlkID0gJ2N1cmViaXRfaW50ZWdyYXRpb24nO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fY3VyZWJpdHEucHVzaCwgWydyZWdpc3Rlcl9hZmZpbGlhdGUnLCB7XG4gICAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSxcbiAgICAgICAgICBkZXZpY2U6ICcnLFxuICAgICAgICAgIGNhbXBhaWduX3RhZ3MgOiBbJ3NoYXJlJywgJ3Rlc3QnXSxcbiAgICAgICAgICBpZnJhbWU6IHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjogJycsXG4gICAgICAgICAgICBmcmFtZWJvcmRlcjogMCxcbiAgICAgICAgICAgIGhlaWdodDogJzQ4MCcsXG4gICAgICAgICAgICBpZDogJ2N1cmViaXRfaW50ZWdyYXRpb24nLFxuICAgICAgICAgICAgd2lkdGg6ICcxMDAlJ1xuICAgICAgICAgIH0sXG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIGFmZmlsaWF0ZSB3aXRoIGFmZmlsaWF0ZSBtZW1iZXIgaW5mbycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBjYW1wYWlnbnMgPSB7fTtcbiAgICAgICAgY2FtcGFpZ25zW3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZV0gPSAnc2hhcmUsdGVzdCc7XG4gICAgICAgIGN1cmViaXQub3B0aW9ucy5jYW1wYWlnbnMgPSBjYW1wYWlnbnM7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7XG4gICAgICAgICAgbmFtZTogJ2ZpcnN0IGxhc3QnLFxuICAgICAgICAgIGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbSdcbiAgICAgICAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9jdXJlYml0cS5wdXNoLCBbJ3JlZ2lzdGVyX2FmZmlsaWF0ZScsIHtcbiAgICAgICAgICByZXNwb25zaXZlOiB0cnVlLFxuICAgICAgICAgIGRldmljZTogJycsXG4gICAgICAgICAgY2FtcGFpZ25fdGFncyA6IFsnc2hhcmUnLCAndGVzdCddLFxuICAgICAgICAgIGlmcmFtZToge1xuICAgICAgICAgICAgY29udGFpbmVyOiAnJyxcbiAgICAgICAgICAgIGZyYW1lYm9yZGVyOiAwLFxuICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgIGlkOiAnY3VyZWJpdF9pbnRlZ3JhdGlvbicsXG4gICAgICAgICAgICBoZWlnaHQ6ICc0ODAnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWZmaWxpYXRlX21lbWJlcjoge1xuICAgICAgICAgICAgZW1haWw6ICduYW1lQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICAgIGZpcnN0X25hbWU6ICdmaXJzdCcsXG4gICAgICAgICAgICBsYXN0X25hbWU6ICdsYXN0JyxcbiAgICAgICAgICAgIGN1c3RvbWVyX2lkOiAnaWQnXG4gICAgICAgICAgfVxuICAgICAgICB9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0aHJvdHRsZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHdpbmRvdy5fY3VyZWJpdHEgPSBbXTtcbiAgICAgICAgdmFyIGNhbXBhaWducyA9IHt9O1xuICAgICAgICBjYW1wYWlnbnNbd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXSA9ICdzaGFyZSx0ZXN0JztcbiAgICAgICAgY3VyZWJpdC5vcHRpb25zLmNhbXBhaWducyA9IGNhbXBhaWducztcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmVxdWFsKHdpbmRvdy5fY3VyZWJpdHEubGVuZ3RoLCAxKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNjb21wbGV0ZWRPcmRlcicsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fY3VyZWJpdHEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGVjb21tZXJjZSBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZTtcblxuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHtcbiAgICAgICAgICBvcmRlcklkOiAnYWI1MzVhNTInLFxuICAgICAgICAgIGNvdXBvbjogJ3NhdmUyMCcsXG4gICAgICAgICAgZGF0ZTogZGF0ZSxcbiAgICAgICAgICB0b3RhbDogNjQ3LjkyLFxuICAgICAgICAgIHByb2R1Y3RzOiBbe1xuICAgICAgICAgICAgc2t1OiAnNWJlNTlmNTYnLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDgsXG4gICAgICAgICAgICBwcmljZTogODAuOTksXG4gICAgICAgICAgICBuYW1lOiAnbXktcHJvZHVjdCcsXG4gICAgICAgICAgICB1cmw6ICcvL3Byb2R1Y3RzLmlvL215LXByb2R1Y3QnLFxuICAgICAgICAgICAgaW1hZ2U6ICcvL3Byb2R1Y3RzLmlvL215LXByb2R1Y3Qud2VicCdcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcblxuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fY3VyZWJpdHEucHVzaCwgWydyZWdpc3Rlcl9wdXJjaGFzZScsIHtcbiAgICAgICAgICBjb3Vwb25fY29kZTogJ3NhdmUyMCcsXG4gICAgICAgICAgY3VzdG9tZXJfaWQ6IG51bGwsXG4gICAgICAgICAgZW1haWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICBvcmRlcl9kYXRlOiBpc28oZGF0ZSksXG4gICAgICAgICAgZmlyc3RfbmFtZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGxhc3RfbmFtZTogdW5kZWZpbmVkLFxuICAgICAgICAgIG9yZGVyX251bWJlcjogJ2FiNTM1YTUyJyxcbiAgICAgICAgICBzdWJ0b3RhbDogNjQ3LjkyLFxuICAgICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgcHJvZHVjdF9pZDogJzViZTU5ZjU2JyxcbiAgICAgICAgICAgIHF1YW50aXR5OiA4LFxuICAgICAgICAgICAgcHJpY2U6IDgwLjk5LFxuICAgICAgICAgICAgdGl0bGU6ICdteS1wcm9kdWN0JyxcbiAgICAgICAgICAgIHVybDogJy8vcHJvZHVjdHMuaW8vbXktcHJvZHVjdCcsXG4gICAgICAgICAgICBpbWFnZV91cmw6ICcvL3Byb2R1Y3RzLmlvL215LXByb2R1Y3Qud2VicCcsXG4gICAgICAgICAgfV1cbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0N1c3RvbWVyLmlvJywgZnVuY3Rpb24oKXtcbiAgdmFyIEN1c3RvbWVyaW8gPSBwbHVnaW47XG4gIHZhciBjdXN0b21lcmlvO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBzaXRlSWQ6ICd4J1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGN1c3RvbWVyaW8gPSBuZXcgQ3VzdG9tZXJpbyhvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoY3VzdG9tZXJpbyk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgY3VzdG9tZXJpby5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoQ3VzdG9tZXJpbywgaW50ZWdyYXRpb24oJ0N1c3RvbWVyLmlvJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnX2NpbycpXG4gICAgICAub3B0aW9uKCdzaXRlSWQnLCAnJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGN1c3RvbWVyaW8sICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgdGhlIHdpbmRvdy5fY2lvIG9iamVjdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy5fY2lvKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX2Npbyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChjdXN0b21lcmlvLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGN1c3RvbWVyaW8sIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9jaW8sICdpZGVudGlmeScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Npby5pZGVudGlmeSwgeyBpZDogJ2lkJyB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBzZW5kIG9ubHkgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5fY2lvLmlkZW50aWZ5KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fY2lvLmlkZW50aWZ5LCB7IGlkOiAnaWQnLCB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNvbnZlcnQgZGF0ZXMgdG8gdW5peCB0aW1lc3RhbXBzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBkYXRlOiBkYXRlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fY2lvLmlkZW50aWZ5LCB7XG4gICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgZGF0ZTogTWF0aC5mbG9vcihkYXRlLzEwMDApXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWxpYXMgY3JlYXRlZCB0byBjcmVhdGVkX2F0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBjcmVhdGVkOiBkYXRlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fY2lvLmlkZW50aWZ5LCB7XG4gICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgY3JlYXRlZF9hdDogTWF0aC5mbG9vcihkYXRlLzEwMDApXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2dyb3VwJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBhbmFseXRpY3MudXNlcigpLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX2NpbywgJ2lkZW50aWZ5Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmdyb3VwKCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fY2lvLmlkZW50aWZ5LCB7XG4gICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgJ0dyb3VwIGlkJzogJ2lkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmdyb3VwKHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9jaW8uaWRlbnRpZnksIHtcbiAgICAgICAgICBpZDogJ2lkJyxcbiAgICAgICAgICAnR3JvdXAgdHJhaXQnOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCBhbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmdyb3VwKCdpZCcsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9jaW8uaWRlbnRpZnksIHtcbiAgICAgICAgICBpZDogJ2lkJyxcbiAgICAgICAgICAnR3JvdXAgaWQnOiAnaWQnLFxuICAgICAgICAgICdHcm91cCB0cmFpdCc6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb252ZXJ0IGRhdGVzIHRvIHVuaXggdGltZXN0YW1wcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgYW5hbHl0aWNzLmdyb3VwKHsgZGF0ZTogZGF0ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Npby5pZGVudGlmeSwge1xuICAgICAgICAgIGlkOiAnaWQnLFxuICAgICAgICAgICdHcm91cCBkYXRlJzogTWF0aC5mbG9vcihkYXRlLzEwMDApXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9jaW8sICd0cmFjaycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Npby50cmFjaywgJ2V2ZW50Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50IGFuZCBwcm9wZXJ0aWVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgcHJvcGVydHk6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9jaW8udHJhY2ssICdldmVudCcsIHsgcHJvcGVydHk6IHRydWUgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb252ZXJ0IGRhdGVzIHRvIHVuaXggdGltZXN0YW1wcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgZGF0ZTogZGF0ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Npby50cmFjaywgJ2V2ZW50JywgeyBkYXRlOiBNYXRoLmZsb29yKGRhdGUvMTAwMCkgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnRHJpcCcsIGZ1bmN0aW9uKCl7XG4gIHZhciBEcmlwID0gcGx1Z2luO1xuICB2YXIgZHJpcDtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgYWNjb3VudDogJzk5OTk5OTknXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgZHJpcCA9IG5ldyBEcmlwKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChkcmlwKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBkcmlwLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShEcmlwLCBpbnRlZ3JhdGlvbignRHJpcCcpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ2RjJylcbiAgICAgIC5nbG9iYWwoJ19kY3EnKVxuICAgICAgLmdsb2JhbCgnX2RjcycpXG4gICAgICAub3B0aW9uKCdhY2NvdW50JywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihkcmlwLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIHdpbmRvdy5fZGNxJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Ll9kY3EpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5fZGNxIGluc3RhbmNlb2YgQXJyYXkpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIHdpbmRvdy5fZGNzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Ll9kY3MpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5fZGNzKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX2Rjcy5hY2NvdW50ID09PSBvcHRpb25zLmFjY291bnQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoZHJpcC5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChkcmlwLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fZGNxLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBldmVudCBhcyB0aGUgYWN0aW9uJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZGNxLnB1c2gsIFsndHJhY2snLCAnZXZlbnQnLCB7fV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY29udmVydCBhbmQgYWxpYXMgcmV2ZW51ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHJldmVudWU6ICckOS45OScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9kY3EucHVzaCwgWyd0cmFjaycsICdldmVudCcsIHsgdmFsdWU6IDk5OSB9XSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaWRlbnRpZnknLCBmdW5jdGlvbiAoKSB7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9kY3EsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGlkZW50aWZ5IHdpdGggdHJhaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2RjcS5wdXNoLCBbJ2lkZW50aWZ5JywgeyBpZDogJ2lkJywgdHJhaXQ6IHRydWUgfV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0Vycm9yY2VwdGlvbicsIGZ1bmN0aW9uKCl7XG4gIHZhciBFcnJvcmNlcHRpb24gPSBwbHVnaW47XG4gIHZhciBub29wID0gZnVuY3Rpb24oKXt9O1xuICB2YXIgZXJyb3JjZXB0aW9uO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb25lcnJvcjtcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgcHJvamVjdElkOiAnNTM1MDIxNzhjMDkwNmQ0MDMxMDAwMzUwJ1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGVycm9yY2VwdGlvbiA9IG5ldyBFcnJvcmNlcHRpb24ob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGVycm9yY2VwdGlvbik7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgZXJyb3JjZXB0aW9uLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShFcnJvcmNlcHRpb24sIGludGVncmF0aW9uKCdFcnJvcmNlcHRpb24nKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdfZXJycycpXG4gICAgICAub3B0aW9uKCdwcm9qZWN0SWQnLCAnJylcbiAgICAgIC5vcHRpb24oJ21ldGEnLCB0cnVlKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoZXJyb3JjZXB0aW9uLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBlcnJvcmNlcHRpb24ucmVzZXQoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIG9uZXJyb3IgPSB3aW5kb3cub25lcnJvcjtcbiAgICAgICAgd2luZG93Lm9uZXJyb3IgPSBub29wO1xuICAgICAgfSk7XG5cbiAgICAgIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgICAgICB3aW5kb3cub25lcnJvciA9IG9uZXJyb3I7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRoZSBlcnJvcmNlcHRpb24gcXVldWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fZXJycywgW29wdGlvbnMucHJvamVjdElkXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBhZGQgdGhlIGVycm9yIGhhbmRsZXInLCBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdhIHRlc3QgZXJyb3InKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9lcnJzLCAncHVzaCcpO1xuICAgICAgICB3aW5kb3cub25lcnJvcihlcnIpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZXJycy5wdXNoLCBbZXJyXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChlcnJvcmNlcHRpb24ubG9hZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoZXJyb3JjZXB0aW9uLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgZGVsZXRlIHdpbmRvdy5fZXJycy5tZXRhO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWRkIGFuIGlkIHRvIG1ldGFkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fZXJycy5tZXRhLCB7IGlkOiAnaWQnIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWRkIHRyYWl0cyB0byBtZXRhZGF0YScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fZXJycy5tZXRhLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWRkIGFuIGlkIGFuZCB0cmFpdHMgdG8gbWV0YWRhdGEnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuX2VycnMubWV0YSwgeyBpZDogJ2lkJywgdHJhaXQ6IHRydWUgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgYWRkIHRvIG1ldGFkYXRhIHdoZW4gbWV0YSBvcHRpb24gaXMgZmFsc2UnLCBmdW5jdGlvbigpe1xuICAgICAgICBlcnJvcmNlcHRpb24ub3B0aW9ucy5tZXRhID0gZmFsc2U7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Ll9lcnJzLm1ldGEpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0V2ZXJnYWdlJywgZnVuY3Rpb24oKXtcbiAgdmFyIEV2ZXJnYWdlID0gcGx1Z2luO1xuICB2YXIgZXZlcmdhZ2U7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFjY291bnQ6ICdzZWdtZW50aW90ZXN0JyxcbiAgICBkYXRhc2V0OiAnc2VnaW9fYjJiX2Fub24nXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgZXZlcmdhZ2UgPSBuZXcgRXZlcmdhZ2Uob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGV2ZXJnYWdlKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBldmVyZ2FnZS5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoRXZlcmdhZ2UsIGludGVncmF0aW9uKCdFdmVyZ2FnZScpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ19hYXEnKVxuICAgICAgLm9wdGlvbignYWNjb3VudCcsICcnKVxuICAgICAgLm9wdGlvbignZGF0YXNldCcsICcnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoZXZlcmdhZ2UsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2luZG93Ll9hYXEnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCF3aW5kb3cuX2FhcSk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Ll9hYXEpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHVzaCB0aGUgYWNjb3VudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9hYXFbMF0sIFsnc2V0RXZlcmdhZ2VBY2NvdW50Jywgb3B0aW9ucy5hY2NvdW50XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwdXNoIHRoZSBkYXRhc2V0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuX2FhcVsxXSwgWydzZXREYXRhc2V0Jywgb3B0aW9ucy5kYXRhc2V0XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwdXNoIHVzZSBzaXRlIGNvbmZpZycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9hYXFbMl0sIFsnc2V0VXNlU2l0ZUNvbmZpZycsIHRydWVdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGV2ZXJnYWdlLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGV2ZXJnYWdlLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fYWFxLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2FhcS5wdXNoLCBbJ3NldFVzZXInLCAnaWQnXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBqdXN0IHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cuX2FhcS5wdXNoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fYWFxLnB1c2gsIFsnc2V0VXNlcicsICdpZCddKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2FhcS5wdXNoLCBbJ3NldFVzZXJGaWVsZCcsICd0cmFpdCcsIHRydWUsICdwYWdlJ10pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBlbWFpbCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9hYXEucHVzaCwgWydzZXRVc2VyRmllbGQnLCAndXNlckVtYWlsJywgJ25hbWVAZXhhbXBsZS5jb20nLCAncGFnZSddKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgbmFtZTogJ25hbWUnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fYWFxLnB1c2gsIFsnc2V0VXNlckZpZWxkJywgJ3VzZXJOYW1lJywgJ25hbWUnLCAncGFnZSddKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNncm91cCcsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fYWFxLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5ncm91cCgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2FhcS5wdXNoLCBbJ3NldENvbXBhbnknLCAnaWQnXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBqdXN0IHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5ncm91cCh7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cuX2FhcS5wdXNoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuZ3JvdXAoJ2lkJywgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2FhcS5wdXNoLCBbJ3NldENvbXBhbnknLCAnaWQnXSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9hYXEucHVzaCwgWydzZXRBY2NvdW50RmllbGQnLCAndHJhaXQnLCB0cnVlLCAncGFnZSddKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fYWFxLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2FhcS5wdXNoLCBbJ3RyYWNrQWN0aW9uJywgJ2V2ZW50Jywge31dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQgYW5kIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2FhcS5wdXNoLCBbJ3RyYWNrQWN0aW9uJywgJ2V2ZW50JywgeyBwcm9wZXJ0eTogdHJ1ZSB9XSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9hYXEsICdwdXNoJyk7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5FdmVyZ2FnZSwgJ2luaXQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSBwYWdlIHZpZXcnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5FdmVyZ2FnZS5pbml0LCB0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgcGFnZSBwcm9wZXJ0aWVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2FhcS5wdXNoLCBbJ3NldEN1c3RvbUZpZWxkJywgJ3Byb3BlcnR5JywgdHJ1ZSwgJ3BhZ2UnXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgcGFnZSBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ25hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2FhcS5wdXNoLCBbJ25hbWVQYWdlJywgJ25hbWUnXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnRmFjZWJvb2sgQ29udmVyc2lvbiBUcmFja2luZycsIGZ1bmN0aW9uKCl7XG4gIHZhciBGYWNlYm9vayA9IHBsdWdpbjtcbiAgdmFyIGZhY2Vib29rO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBldmVudHM6IHtcbiAgICAgIHNpZ251cDogMCxcbiAgICAgIGxvZ2luOiAxLFxuICAgICAgcGxheTogMlxuICAgIH1cbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBmYWNlYm9vayA9IG5ldyBGYWNlYm9vayhvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoZmFjZWJvb2spO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGZhY2Vib29rLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIGNvcnJlY3Qgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKEZhY2Vib29rLCBpbnRlZ3JhdGlvbignRmFjZWJvb2sgQ29udmVyc2lvbiBUcmFja2luZycpXG4gICAgICAub3B0aW9uKCdjdXJyZW5jeScsICdVU0QnKVxuICAgICAgLm1hcHBpbmcoJ2V2ZW50cycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoZmFjZWJvb2ssIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9mYnEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGN1c3RvbSBldmVudCBldmVuIGlmIGV2ZW50IGlzIG5vdCBkZWZpbmVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgeDogMTAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9mYnEucHVzaCwgWyAndHJhY2snLCAnZXZlbnQnLCB7IHg6IDEwIH0gXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGV2ZW50IGlmIGZvdW5kJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdzaWdudXAnLCB7fSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9mYnEucHVzaCwgWyAndHJhY2snLCAwLCB7XG4gICAgICAgICAgY3VycmVuY3k6ICdVU0QnLFxuICAgICAgICAgIHZhbHVlOiAnMC4wMCdcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc3VwcG9ydCBhcnJheSBldmVudHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBmYWNlYm9vay5vcHRpb25zLmV2ZW50cyA9IFt7IGtleTogJ2V2ZW50JywgdmFsdWU6IDQgfV07XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2ZicS5wdXNoLCBbJ3RyYWNrJywgNCwge1xuICAgICAgICAgIGN1cnJlbmN5OiAnVVNEJyxcbiAgICAgICAgICB2YWx1ZTogJzAuMDAnXG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgcmV2ZW51ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnbG9naW4nLCB7IHJldmVudWU6ICckNTAnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZmJxLnB1c2gsIFsgJ3RyYWNrJywgMSwge1xuICAgICAgICAgIHZhbHVlOiAnNTAuMDAnLFxuICAgICAgICAgIGN1cnJlbmN5OiAnVVNEJ1xuICAgICAgICB9IF0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iLCJcclxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xyXG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcclxudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcclxudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XHJcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XHJcblxyXG5kZXNjcmliZSgnRm94TWV0cmljcycsIGZ1bmN0aW9uKCl7XHJcbiAgdmFyIEZveE1ldHJpY3MgPSBwbHVnaW47XHJcbiAgdmFyIGZveG1ldHJpY3M7XHJcbiAgdmFyIGFuYWx5dGljcztcclxuICB2YXIgb3B0aW9ucyA9IHtcclxuICAgIGFwcElkOiAnNTEzNTA4NTQyNDAyMzIzNmJjYTljMDhjJ1xyXG4gIH07XHJcblxyXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcclxuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XHJcbiAgICBmb3htZXRyaWNzID0gbmV3IEZveE1ldHJpY3Mob3B0aW9ucyk7XHJcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XHJcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XHJcbiAgICBhbmFseXRpY3MuYWRkKGZveG1ldHJpY3MpO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcclxuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XHJcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcclxuICAgIGZveG1ldHJpY3MucmVzZXQoKTtcclxuICAgIHNhbmRib3goKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XHJcbiAgICBhbmFseXRpY3MuY29tcGFyZShGb3hNZXRyaWNzLCBpbnRlZ3JhdGlvbignRm94TWV0cmljcycpXHJcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxyXG4gICAgICAuZ2xvYmFsKCdfZnhtJylcclxuICAgICAgLm9wdGlvbignYXBwSWQnLCAnJykpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xyXG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xyXG4gICAgICBhbmFseXRpY3Muc3R1Yihmb3htZXRyaWNzLCAnbG9hZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcclxuICAgICAgXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xyXG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XHJcbiAgICAgIGFuYWx5dGljcy5sb2FkKGZveG1ldHJpY3MsIGRvbmUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcclxuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XHJcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xyXG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fZnhtLCAncHVzaCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHBhZ2UgdmlldycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcclxuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZnhtLnB1c2gsIFtcclxuICAgICAgICAgICdfZnhtLnBhZ2VzLnZpZXcnLFxyXG4gICAgICAgICAgZG9jdW1lbnQudGl0bGUsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKSArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcclxuICAgICAgICAgICcnXHJcbiAgICAgICAgXSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIHBhZ2UgcHJvcGVydGllcycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ2NhdGVnb3J5JywgJ25hbWUnLCB7XHJcbiAgICAgICAgICByZWZlcnJlcjogJ3JlZmVycmVyJyxcclxuICAgICAgICAgIHRpdGxlOiAndGl0bGUnLFxyXG4gICAgICAgICAgdXJsOiAndXJsJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZnhtLnB1c2gsIFtcclxuICAgICAgICAgICdfZnhtLnBhZ2VzLnZpZXcnLFxyXG4gICAgICAgICAgJ3RpdGxlJyxcclxuICAgICAgICAgICduYW1lJyxcclxuICAgICAgICAgICdjYXRlZ29yeScsXHJcbiAgICAgICAgICAndXJsJyxcclxuICAgICAgICAgICdyZWZlcnJlcidcclxuICAgICAgICBdKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcclxuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fZnhtLCAncHVzaCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xyXG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9meG0ucHVzaCwgW1xyXG4gICAgICAgICAgJ19meG0udmlzaXRvci5wcm9maWxlJyxcclxuICAgICAgICAgICdpZCcsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB7IGlkOiAnaWQnIH1cclxuICAgICAgICBdKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIG5vdCBvbmx5IHNlbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyB0cmFpdDogdHJ1ZSB9KTtcclxuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cuX2Z4bS5wdXNoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHtcclxuICAgICAgICAgIGFkZHJlc3M6ICdhZGRyZXNzJyxcclxuICAgICAgICAgIGVtYWlsOiAnZW1haWxAZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgZmlyc3ROYW1lOiAnZmlyc3QnLFxyXG4gICAgICAgICAgbGFzdE5hbWU6ICdsYXN0JyxcclxuICAgICAgICAgIHRyYWl0OiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Z4bS5wdXNoLCBbXHJcbiAgICAgICAgICAnX2Z4bS52aXNpdG9yLnByb2ZpbGUnLFxyXG4gICAgICAgICAgJ2lkJyxcclxuICAgICAgICAgICdmaXJzdCcsXHJcbiAgICAgICAgICAnbGFzdCcsXHJcbiAgICAgICAgICAnZW1haWxAZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgJ2FkZHJlc3MnLFxyXG4gICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBhZGRyZXNzOiAnYWRkcmVzcycsXHJcbiAgICAgICAgICAgIGVtYWlsOiAnZW1haWxAZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgICBmaXJzdE5hbWU6ICdmaXJzdCcsXHJcbiAgICAgICAgICAgIGxhc3ROYW1lOiAnbGFzdCcsXHJcbiAgICAgICAgICAgIHRyYWl0OiB0cnVlLFxyXG4gICAgICAgICAgICBpZDogJ2lkJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgc3BsaXQgYSBuYW1lIHRyYWl0JywgZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBuYW1lOiAnZmlyc3QgbGFzdCcgfSk7XHJcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Z4bS5wdXNoLCBbXHJcbiAgICAgICAgICAnX2Z4bS52aXNpdG9yLnByb2ZpbGUnLFxyXG4gICAgICAgICAgJ2lkJyxcclxuICAgICAgICAgICdmaXJzdCcsXHJcbiAgICAgICAgICAnbGFzdCcsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdmaXJzdCBsYXN0JyxcclxuICAgICAgICAgICAgaWQ6ICdpZCdcclxuICAgICAgICAgIH1cclxuICAgICAgICBdKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fZnhtLCAncHVzaCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xyXG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9meG0ucHVzaCwgW1xyXG4gICAgICAgICAgJ2V2ZW50JyxcclxuICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgIHt9XHJcbiAgICAgICAgXSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50IGFuZCBwcm9wZXJ0aWVzJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcclxuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZnhtLnB1c2gsIFtcclxuICAgICAgICAgICdldmVudCcsXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICB7IHByb3BlcnR5OiB0cnVlIH1cclxuICAgICAgICBdKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSBjYXRlZ29yeSBwcm9wZXJ0eScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgY2F0ZWdvcnk6ICdjYXRlZ29yeScgfSk7XHJcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Z4bS5wdXNoLCBbXHJcbiAgICAgICAgICAnZXZlbnQnLFxyXG4gICAgICAgICAgJ2NhdGVnb3J5JyxcclxuICAgICAgICAgIHsgY2F0ZWdvcnk6ICdjYXRlZ29yeScgfVxyXG4gICAgICAgIF0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHN0b3JlZCBjYXRlZ29yeScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ2NhdGVnb3J5Jyk7XHJcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgY2F0ZWdvcnk6ICdjYXRlZ29yeScgfSk7XHJcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Z4bS5wdXNoLCBbXHJcbiAgICAgICAgICAnX2Z4bS5wYWdlcy52aWV3JyxcclxuICAgICAgICAgIGRvY3VtZW50LnRpdGxlLFxyXG4gICAgICAgICAgJ2NhdGVnb3J5JyxcclxuICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKSArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcclxuICAgICAgICAgICcnXHJcbiAgICAgICAgXSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2Vjb21tZXJjZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX2Z4bSwgJ3B1c2gnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIHZpZXdlZCBwcm9kdWN0JywgZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3MudHJhY2soJ3ZpZXdlZCBwcm9kdWN0Jywge1xyXG4gICAgICAgICAgc2t1OiAnZjg0ZDM0OWInLFxyXG4gICAgICAgICAgbmFtZTogJ215LXByb2R1Y3QnLFxyXG4gICAgICAgICAgY2F0ZWdvcnk6ICdjYXRlZ29yeSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Z4bS5wdXNoLCBbXHJcbiAgICAgICAgICAnX2Z4bS5lY29tbWVyY2UucHJvZHVjdHZpZXcnLFxyXG4gICAgICAgICAgJ2Y4NGQzNDliJyxcclxuICAgICAgICAgICdteS1wcm9kdWN0JyxcclxuICAgICAgICAgICdjYXRlZ29yeSdcclxuICAgICAgICBdKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIGFkZGVkIHByb2R1Y3QnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnYWRkZWQgcHJvZHVjdCcsIHtcclxuICAgICAgICAgIGlkOiAnYzFlYzE4NjQnLFxyXG4gICAgICAgICAgbmFtZTogJ215LXByb2R1Y3QnLFxyXG4gICAgICAgICAgY2F0ZWdvcnk6ICdjYXRlZ29yeSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Z4bS5wdXNoLCBbXHJcbiAgICAgICAgICAnX2Z4bS5lY29tbWVyY2UuY2FydGl0ZW0nLFxyXG4gICAgICAgICAgJ2MxZWMxODY0JyxcclxuICAgICAgICAgICdteS1wcm9kdWN0JyxcclxuICAgICAgICAgICdjYXRlZ29yeSdcclxuICAgICAgICBdKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIHJlbW92ZWQgcHJvZHVjdCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdyZW1vdmVkIHByb2R1Y3QnLCB7XHJcbiAgICAgICAgICBza3U6ICdjMWVjMTg2NCcsXHJcbiAgICAgICAgICBuYW1lOiAnbXktcHJvZHVjdCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2Z4bS5wdXNoLCBbXHJcbiAgICAgICAgICAnX2Z4bS5lY29tbWVyY2UucmVtb3ZlY2FydGl0ZW0nLFxyXG4gICAgICAgICAgJ2MxZWMxODY0JyxcclxuICAgICAgICAgICdteS1wcm9kdWN0JyxcclxuICAgICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICAgIF0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgY29tcGxldGVkIG9yZGVyJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHtcclxuICAgICAgICAgIG9yZGVySWQ6ICczNzIzZWU4YScsXHJcbiAgICAgICAgICB0b3RhbDogMzAwLFxyXG4gICAgICAgICAgdGF4OiAxMCxcclxuICAgICAgICAgIHNoaXBwaW5nOiAyMCxcclxuICAgICAgICAgIHByb2R1Y3RzOiBbe1xyXG4gICAgICAgICAgICBza3U6ICdkMzcwYjRjZCcsXHJcbiAgICAgICAgICAgIG5hbWU6ICdzb255IHB1bHNlJyxcclxuICAgICAgICAgICAgY2F0ZWdvcnk6ICd0ZWNoJyxcclxuICAgICAgICAgICAgcHJpY2U6IDI3MCxcclxuICAgICAgICAgICAgcXVhbnRpdHk6IDFcclxuICAgICAgICAgIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9meG0ucHVzaC5hcmdzWzBdWzBdLCBbXHJcbiAgICAgICAgICAnX2Z4bS5lY29tbWVyY2Uub3JkZXInLFxyXG4gICAgICAgICAgJzM3MjNlZThhJyxcclxuICAgICAgICAgIDI3MCxcclxuICAgICAgICAgIDIwLFxyXG4gICAgICAgICAgMTAsXHJcbiAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgbnVsbCxcclxuICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgIDEsXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9meG0ucHVzaC5hcmdzWzFdWzBdLCBbXHJcbiAgICAgICAgICAnX2Z4bS5lY29tbWVyY2UucHVyY2hhc2VpdGVtJyxcclxuICAgICAgICAgICdkMzcwYjRjZCcsXHJcbiAgICAgICAgICAnc29ueSBwdWxzZScsXHJcbiAgICAgICAgICAndGVjaCcsXHJcbiAgICAgICAgICAxLFxyXG4gICAgICAgICAgMjcwLFxyXG4gICAgICAgICAgJzM3MjNlZThhJ1xyXG4gICAgICAgIF0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0Zyb250bGVhZicsIGZ1bmN0aW9uKCl7XG4gIHZhciBGcm9udGxlYWYgPSBwbHVnaW47XG4gIHZhciBmcm9udGxlYWY7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGJhc2VVcmw6ICdodHRwczovL2RlbW8uZnJvbnRsZWFmLmNvbScsXG4gICAgdG9rZW46ICdhbEhUbUJqTWlld1puUEx5Y0ZlQlF4YWlkYkJlb3VYRycsXG4gICAgc3RyZWFtOiAnc2VnbWVudC5pbydcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBmcm9udGxlYWYgPSBuZXcgRnJvbnRsZWFmKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChmcm9udGxlYWYpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGZyb250bGVhZi5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoRnJvbnRsZWFmLCBpbnRlZ3JhdGlvbignRnJvbnRsZWFmJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnX2ZsJylcbiAgICAgIC5nbG9iYWwoJ19mbEJhc2VVcmwnKVxuICAgICAgLm9wdGlvbigndG9rZW4nLCAnJylcbiAgICAgIC5vcHRpb24oJ3N0cmVhbScsICcnKVxuICAgICAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgZmFsc2UpXG4gICAgICAub3B0aW9uKCd0cmFja0NhdGVnb3JpemVkUGFnZXMnLCBmYWxzZSkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGZyb250bGVhZiwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuX2ZsJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Ll9mbCk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Ll9mbCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2luZG93Ll9mbEJhc2VVcmwnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCF3aW5kb3cuX2ZsQmFzZVVybCk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5lcXVhbCh3aW5kb3cuX2ZsQmFzZVVybCwgb3B0aW9ucy5iYXNlVXJsKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChmcm9udGxlYWYsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIoZnJvbnRsZWFmLCAnX3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoZnJvbnRsZWFmLl9wdXNoLCAnc2V0VXNlcicsIHtcbiAgICAgICAgICBpZDogJ2lkJyxcbiAgICAgICAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgZGF0YToge31cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGZyb250bGVhZi5fcHVzaCwgJ3NldFVzZXInLCB7XG4gICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGRhdGE6IHsgdHJhaXQ6IHRydWUgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgbmFtZTogJ25hbWUnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGZyb250bGVhZi5fcHVzaCwgJ3NldFVzZXInLCB7XG4gICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgbmFtZTogJ25hbWUnLFxuICAgICAgICAgIGRhdGE6IHt9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHVzZXJuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdXNlcm5hbWU6ICd1c2VybmFtZScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoZnJvbnRsZWFmLl9wdXNoLCAnc2V0VXNlcicsIHtcbiAgICAgICAgICBpZDogJ2lkJyxcbiAgICAgICAgICBuYW1lOiAndXNlcm5hbWUnLFxuICAgICAgICAgIGRhdGE6IHsgdXNlcm5hbWU6ICd1c2VybmFtZScgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNncm91cCcsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKGZyb250bGVhZiwgJ19wdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCB3aXRob3V0IGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmdyb3VwKCk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKGZyb250bGVhZi5fcHVzaCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmdyb3VwKCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGZyb250bGVhZi5fcHVzaCwgJ3NldEFjY291bnQnLCB7XG4gICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGRhdGE6IHt9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuZ3JvdXAoJ2lkJywgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChmcm9udGxlYWYuX3B1c2gsICdzZXRBY2NvdW50Jywge1xuICAgICAgICAgIGlkOiAnaWQnLFxuICAgICAgICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBkYXRhOiB7IHRyYWl0OiB0cnVlIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgbmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5ncm91cCgnaWQnLCB7IG5hbWU6ICduYW1lJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChmcm9udGxlYWYuX3B1c2gsICdzZXRBY2NvdW50Jywge1xuICAgICAgICAgIGlkOiAnaWQnLFxuICAgICAgICAgIG5hbWU6ICduYW1lJyxcbiAgICAgICAgICBkYXRhOiB7fVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIoZnJvbnRsZWFmLCAnX3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB0cmFjayBhbm9ueW1vdXMgcGFnZXMgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKGZyb250bGVhZi5fcHVzaCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBuYW1lZCBwYWdlcyB3aGVuIHRoZSBvcHRpb24gaXMgb24nLCBmdW5jdGlvbigpe1xuICAgICAgICBmcm9udGxlYWYub3B0aW9ucy50cmFja05hbWVkUGFnZXMgPSB0cnVlO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnTmFtZScpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbChmcm9udGxlYWYuX3B1c2gsICdldmVudCcsICdWaWV3ZWQgQ2F0ZWdvcnkgUGFnZScpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGZyb250bGVhZi5fcHVzaCwgJ2V2ZW50JywgJ1ZpZXdlZCBOYW1lIFBhZ2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIG5hbWVkIHBhZ2VzIHdpdGggY2F0ZWdvcmllcyB3aGVuIHRoZSBvcHRpb25zIGFyZSBvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGZyb250bGVhZi5vcHRpb25zLnRyYWNrTmFtZWRQYWdlcyA9IHRydWU7XG4gICAgICAgIGZyb250bGVhZi5vcHRpb25zLnRyYWNrQ2F0ZWdvcml6ZWRQYWdlcyA9IHRydWU7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKGZyb250bGVhZi5fcHVzaCwgJ2V2ZW50JywgJ1ZpZXdlZCBOYW1lIFBhZ2UnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChmcm9udGxlYWYuX3B1c2gsICdldmVudCcsICdWaWV3ZWQgQ2F0ZWdvcnkgUGFnZScpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGZyb250bGVhZi5fcHVzaCwgJ2V2ZW50JywgJ1ZpZXdlZCBDYXRlZ29yeSBOYW1lIFBhZ2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIGNhdGVnb3JpemVkIHBhZ2VzIHdoZW4gdGhlIG9wdGlvbiBpcyBvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGZyb250bGVhZi5vcHRpb25zLnRyYWNrQ2F0ZWdvcml6ZWRQYWdlcyA9IHRydWU7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKGZyb250bGVhZi5fcHVzaCwgJ2V2ZW50JywgJ1ZpZXdlZCBOYW1lIFBhZ2UnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChmcm9udGxlYWYuX3B1c2gsICdldmVudCcsICdWaWV3ZWQgQ2F0ZWdvcnkgUGFnZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIoZnJvbnRsZWFmLCAnX3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2xvZ2luJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoZnJvbnRsZWFmLl9wdXNoLCAnZXZlbnQnLCAnbG9naW4nKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgcHJvcGVydGllcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnbG9naW4nLCB7IHByb3BlcnR5OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGZyb250bGVhZi5fcHVzaCwgJ2V2ZW50JywgJ2xvZ2luJywgeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdGdWxsU3RvcnknLCBmdW5jdGlvbigpe1xuICB2YXIgRnVsbFN0b3J5ID0gcGx1Z2luO1xuICB2YXIgZnVsbHN0b3J5O1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBvcmc6ICcxSk8nLFxuICAgIGRlYnVnOiBmYWxzZVxuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGZ1bGxzdG9yeSA9IG5ldyBGdWxsU3Rvcnkob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGZ1bGxzdG9yeSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgZnVsbHN0b3J5LnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShGdWxsU3RvcnksIGludGVncmF0aW9uKCdGdWxsU3RvcnknKVxuICAgICAgLm9wdGlvbignb3JnJywgJycpXG4gICAgICAub3B0aW9uKCdkZWJ1ZycsIGZhbHNlKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoZnVsbHN0b3J5LCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIHdpbmRvdy5GUycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy5GUyk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93LkZTKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGZ1bGxzdG9yeS5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LkZTLCAnaWRlbnRpZnknKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkZTLmlkZW50aWZ5LCAnaWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBzZW5kIG9ubHkgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5GUy5pZGVudGlmeSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaXQoJ3Nob3VsZCBtYXAgbmFtZSBhbmQgZW1haWwnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBuYW1lOiAnVGVzdCcsIGVtYWlsOiAndGVzdEB0ZXN0LmNvbScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkZTLmlkZW50aWZ5LCAnaWQnLCB7IGRpc3BsYXlOYW1lOiAnVGVzdCcsIG5hbWU6ICdUZXN0JywgaWQ6ICdpZCcsIGVtYWlsOiAndGVzdEB0ZXN0LmNvbScgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnR2F1Z2VzJywgZnVuY3Rpb24oKXtcbiAgdmFyIEdhdWdlcyA9IHBsdWdpbjtcbiAgdmFyIGdhdWdlcztcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgc2l0ZUlkOiAneCdcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBnYXVnZXMgPSBuZXcgR2F1Z2VzKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChnYXVnZXMpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGdhdWdlcy5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoR2F1Z2VzLCBpbnRlZ3JhdGlvbignR2F1Z2VzJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnX2dhdWdlcycpXG4gICAgICAub3B0aW9uKCdzaXRlSWQnLCAnJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGdhdWdlcywgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB0aGUgZ2F1Z2VzIHF1ZXVlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Ll9nYXVnZXMpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5fZ2F1Z2VzIGluc3RhbmNlb2YgQXJyYXkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGdhdWdlcywgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fZ2F1Z2VzLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHBhZ2UgdmlldycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9nYXVnZXMucHVzaCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnR2V0IFNhdGlzZmFjdGlvbicsIGZ1bmN0aW9uKCl7XG4gIHZhciBHZXRTYXRpc2ZhY3Rpb24gPSBwbHVnaW47XG4gIHZhciBncztcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgd2lkZ2V0SWQ6IDUwMDVcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBncyA9IG5ldyBHZXRTYXRpc2ZhY3Rpb24ob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGdzKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBncy5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoR2V0U2F0aXNmYWN0aW9uLCBpbnRlZ3JhdGlvbignR2V0IFNhdGlzZmFjdGlvbicpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ0dTRk4nKVxuICAgICAgLm9wdGlvbignd2lkZ2V0SWQnLCAnJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGdzLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgYWRkIHRoZSBnZXQgc2F0aXNmYWN0aW9uIHdpZGdldCB0byB0aGUgZG9tJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2V0c2F0LXdpZGdldC0nICsgb3B0aW9ucy53aWRnZXRJZCkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGdzLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnR29vZ2xlIEFuYWx5dGljcycsIGZ1bmN0aW9uKCl7XG4gIHZhciBHQSA9IHBsdWdpbi5JbnRlZ3JhdGlvbjtcbiAgdmFyIGdhO1xuICB2YXIgYW5hbHl0aWNzO1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShHQSwgaW50ZWdyYXRpb24oJ0dvb2dsZSBBbmFseXRpY3MnKVxuICAgICAgLnJlYWR5T25Mb2FkKClcbiAgICAgIC5nbG9iYWwoJ2dhJylcbiAgICAgIC5nbG9iYWwoJ19nYXEnKVxuICAgICAgLmdsb2JhbCgnR29vZ2xlQW5hbHl0aWNzT2JqZWN0JylcbiAgICAgIC5vcHRpb24oJ2Fub255bWl6ZUlwJywgZmFsc2UpXG4gICAgICAub3B0aW9uKCdjbGFzc2ljJywgZmFsc2UpXG4gICAgICAub3B0aW9uKCdkb21haW4nLCAnYXV0bycpXG4gICAgICAub3B0aW9uKCdkb3VibGVDbGljaycsIGZhbHNlKVxuICAgICAgLm9wdGlvbignZW5oYW5jZWRFY29tbWVyY2UnLCBmYWxzZSlcbiAgICAgIC5vcHRpb24oJ2VuaGFuY2VkTGlua0F0dHJpYnV0aW9uJywgZmFsc2UpXG4gICAgICAub3B0aW9uKCdub25JbnRlcmFjdGlvbicsZmFsc2UpXG4gICAgICAub3B0aW9uKCdpZ25vcmVkUmVmZXJyZXJzJywgbnVsbClcbiAgICAgIC5vcHRpb24oJ3NpdGVTcGVlZFNhbXBsZVJhdGUnLCAxKVxuICAgICAgLm9wdGlvbigndHJhY2tpbmdJZCcsICcnKVxuICAgICAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnVW5pdmVyc2FsJywgZnVuY3Rpb24oKXtcbiAgICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgICBhbm9ueW1pemVJcDogdHJ1ZSxcbiAgICAgIGRvbWFpbjogJ2F1dG8nLFxuICAgICAgc2l0ZVNwZWVkU2FtcGxlUmF0ZTogNDIsXG4gICAgICB0cmFja2luZ0lkOiAnVUEtMjcwMzM3MDktMTInXG4gICAgfTtcblxuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGdhID0gbmV3IEdBKHNldHRpbmdzKTtcbiAgICAgIGFuYWx5dGljcy5hZGQoZ2EpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBnYS5yZXNldCgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIoZ2EsICdsb2FkJyk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgICAgaXQoJ3Nob3VsZCByZXF1aXJlIFwiZGlzcGxheWZlYXR1cmVzXCIgaWYgLmRvdWJsZUNsaWNrIG9wdGlvbiBpcyBgdHJ1ZWAnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGdhLm9wdGlvbnMuZG91YmxlQ2xpY2sgPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5xWzFdLCBbJ3JlcXVpcmUnLCAnZGlzcGxheWZlYXR1cmVzJ10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuR29vZ2xlQW5hbHl0aWNzT2JqZWN0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCF3aW5kb3cuR29vZ2xlQW5hbHl0aWNzT2JqZWN0KTtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCgnZ2EnID09PSB3aW5kb3cuR29vZ2xlQW5hbHl0aWNzT2JqZWN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2luZG93LmdhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCF3aW5kb3cuZ2EpO1xuICAgICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCdmdW5jdGlvbicgPT09IHR5cGVvZiB3aW5kb3cuZ2EpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuZ2EubCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93LmdhKTtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCgnbnVtYmVyJyA9PT0gdHlwZW9mIHdpbmRvdy5nYS5sKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBjYWxsIHdpbmRvdy5nYS5jcmVhdGUgd2l0aCBvcHRpb25zJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh3aW5kb3cuZ2EucVswXSksIFsnY3JlYXRlJywgc2V0dGluZ3MudHJhY2tpbmdJZCwge1xuICAgICAgICAgICAgY29va2llRG9tYWluOiAnbm9uZScsXG4gICAgICAgICAgICBzaXRlU3BlZWRTYW1wbGVSYXRlOiBzZXR0aW5ncy5zaXRlU3BlZWRTYW1wbGVSYXRlLFxuICAgICAgICAgICAgYWxsb3dMaW5rZXI6IHRydWVcbiAgICAgICAgICB9XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYW5vbnltaXplIHRoZSBpcCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLnFbMV0sIFsnc2V0JywgJ2Fub255bWl6ZUlwJywgdHJ1ZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGdhLmxvYWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIG5vdCBzZW5kIHVuaXZlcnNhbCB1c2VyIGlkIGJ5IGRlZmF1bHQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy51c2VyKCkuaWQoJ2JheicpO1xuICAgICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3Mubm90RGVlcEVxdWFsKHdpbmRvdy5nYS5xWzFdLCBbJ3NldCcsICd1c2VySWQnLCAnYmF6J10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgdW5pdmVyc2FsIHVzZXIgaWQgaWYgc2VuZFVzZXJJZCBvcHRpb24gaXMgdHJ1ZSBhbmQgdXNlci5pZCgpIGlzIHRydXRoeScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnVzZXIoKS5pZCgnYmF6Jyk7XG4gICAgICAgICAgZ2Eub3B0aW9ucy5zZW5kVXNlcklkID0gdHJ1ZTtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EucVsxXSwgWydzZXQnLCAndXNlcklkJywgJ2JheiddKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBtYXAgY3VzdG9tIGRpbWVuc2lvbnMgJiBtZXRyaWNzIHVzaW5nIHVzZXIudHJhaXRzKCknLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGdhLm9wdGlvbnMubWV0cmljcyA9IHsgZmlyc3ROYW1lOiAnbWV0cmljMScsIGxhc3RfbmFtZTogJ21ldHJpYzInIH07XG4gICAgICAgICAgZ2Eub3B0aW9ucy5kaW1lbnNpb25zID0geyBBZ2U6ICdkaW1lbnNpb24yJyB9O1xuICAgICAgICAgIGFuYWx5dGljcy51c2VyKCkudHJhaXRzKHsgZmlyc3ROYW1lOiAnSm9obicsIGxhc3ROYW1lOiAnRG9lJywgYWdlOiAyMCB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5xWzJdLCBbJ3NldCcsIHtcbiAgICAgICAgICAgIG1ldHJpYzE6ICdKb2huJyxcbiAgICAgICAgICAgIG1ldHJpYzI6ICdEb2UnLFxuICAgICAgICAgICAgZGltZW5zaW9uMjogMjBcbiAgICAgICAgICB9XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgbm90IHNldCBtZXRyaWNzIGFuZCBkaW1lbnNpb25zIGlmIHRoZXJlIGFyZSBubyB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGdhLm9wdGlvbnMubWV0cmljcyA9IHsgbWV0cmljMTogJ3NvbWV0aGluZycgfTtcbiAgICAgICAgICBnYS5vcHRpb25zLmRpbWVuc2lvbnMgPSB7IGRpbWVuc2lvbjM6ICdpbmR1c3RyeScgfTtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EucVsyXSwgdW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZXQgbWV0cmljcyBhbmQgZGltZW5zaW9ucyB0aGF0IGhhdmUgZG90cyBidXQgYXJlbnQgbmVzdGVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBnYS5vcHRpb25zLm1ldHJpY3MgPSB7ICduYW1lLmZpcnN0JzogJ21ldHJpYzEnLCAnbmFtZS5sYXN0JzogJ21ldHJpYzInIH07XG4gICAgICAgICAgZ2Eub3B0aW9ucy5kaW1lbnNpb25zID0geyBBZ2U6ICdkaW1lbnNpb24yJyB9O1xuICAgICAgICAgIGFuYWx5dGljcy51c2VyKCkudHJhaXRzKHsgJ25hbWUuZmlyc3QnOiAnSm9obicsICduYW1lLmxhc3QnOiAnRG9lJywgYWdlOiAyMCB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5xWzJdLCBbJ3NldCcsIHtcbiAgICAgICAgICAgIG1ldHJpYzE6ICdKb2huJyxcbiAgICAgICAgICAgIG1ldHJpYzI6ICdEb2UnLFxuICAgICAgICAgICAgZGltZW5zaW9uMjogMjBcbiAgICAgICAgICB9XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2V0IG1ldHJpY3MgYW5kIGRpbWVuc2lvbnMgdGhhdCBhcmUgbmVzdGVkLCB1c2luZyBkb3Qgbm90YXRpb24nLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGdhLm9wdGlvbnMubWV0cmljcyA9IHsgJ25hbWUuZmlyc3QnOiAnbWV0cmljMScsICduYW1lLmxhc3QnOiAnbWV0cmljMicgfTtcbiAgICAgICAgICBnYS5vcHRpb25zLmRpbWVuc2lvbnMgPSB7IEFnZTogJ2RpbWVuc2lvbjInIH07XG4gICAgICAgICAgYW5hbHl0aWNzLnVzZXIoKS50cmFpdHMoe1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICBmaXJzdDogJ0pvaG4nLFxuICAgICAgICAgICAgICBsYXN0OiAnRG9lJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZ2U6IDIwXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuXG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EucVsyXSwgWydzZXQnLCB7XG4gICAgICAgICAgICBtZXRyaWMxOiAnSm9obicsXG4gICAgICAgICAgICBtZXRyaWMyOiAnRG9lJyxcbiAgICAgICAgICAgIGRpbWVuc2lvbjI6IDIwXG4gICAgICAgICAgfV0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICAgIGFuYWx5dGljcy5sb2FkKGdhLCBkb25lKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdywgJ2dhJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHBhZ2UgdmlldycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5nYSwgJ3NlbmQnLCAncGFnZXZpZXcnLCB7XG4gICAgICAgICAgICBwYWdlOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgICAgICB0aXRsZTogZG9jdW1lbnQudGl0bGUsXG4gICAgICAgICAgICBsb2NhdGlvbjogd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJykgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHBhZ2UgdmlldyB3aXRoIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCdjYXRlZ29yeScsICduYW1lJywgeyB1cmw6ICd1cmwnLCBwYXRoOiAnL3BhdGgnIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmdhLCAnc2VuZCcsICdwYWdldmlldycsIHtcbiAgICAgICAgICAgIHBhZ2U6ICcvcGF0aCcsXG4gICAgICAgICAgICB0aXRsZTogJ2NhdGVnb3J5IG5hbWUnLFxuICAgICAgICAgICAgbG9jYXRpb246ICd1cmwnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCB0aGUgcXVlcnkgaWYgaXRzIGluY2x1ZGVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBnYS5vcHRpb25zLmluY2x1ZGVTZWFyY2ggPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCdjYXRlZ29yeScsICduYW1lJywgeyB1cmw6ICd1cmwnLCBwYXRoOiAnL3BhdGgnLCBzZWFyY2g6ICc/cT0xJyB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5nYSwgJ3NlbmQnLCAncGFnZXZpZXcnLCB7XG4gICAgICAgICAgICBwYWdlOiAnL3BhdGg/cT0xJyxcbiAgICAgICAgICAgIHRpdGxlOiAnY2F0ZWdvcnkgbmFtZScsXG4gICAgICAgICAgICBsb2NhdGlvbjogJ3VybCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCB0cmFjayBhIG5hbWVkIHBhZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCdOYW1lJyk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuZ2EsICdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ0FsbCcsXG4gICAgICAgICAgICBldmVudEFjdGlvbjogJ1ZpZXdlZCBOYW1lIFBhZ2UnLFxuICAgICAgICAgICAgZXZlbnRMYWJlbDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZXZlbnRWYWx1ZTogMCxcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgdHJhY2sgYSBuYW1lICsgY2F0ZWdvcnkgcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5nYSwgJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgICAgICBldmVudENhdGVnb3J5OiAnQ2F0ZWdvcnknLFxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdWaWV3ZWQgQ2F0ZWdvcnkgTmFtZSBQYWdlJyxcbiAgICAgICAgICAgIGV2ZW50TGFiZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGV2ZW50VmFsdWU6IDAsXG4gICAgICAgICAgICBub25JbnRlcmFjdGlvbjogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHRyYWNrIGEgY2F0ZWdvcml6ZWQgcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5nYSwgJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgICAgICBldmVudENhdGVnb3J5OiAnQ2F0ZWdvcnknLFxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdWaWV3ZWQgQ2F0ZWdvcnkgUGFnZScsXG4gICAgICAgICAgICBldmVudExhYmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBldmVudFZhbHVlOiAwLFxuICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBub3QgdHJhY2sgYSBuYW1lZCBvciBjYXRlZ29yaXplZCBwYWdlIHdoZW4gdGhlIG9wdGlvbiBpcyBvZmYnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGdhLm9wdGlvbnMudHJhY2tOYW1lZFBhZ2VzID0gZmFsc2U7XG4gICAgICAgICAgZ2Eub3B0aW9ucy50cmFja0NhdGVnb3JpemVkUGFnZXMgPSBmYWxzZTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgnTmFtZScpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZFR3aWNlKHdpbmRvdy5nYSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LCAnZ2EnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50Jyk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuZ2EsICdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ0FsbCcsXG4gICAgICAgICAgICBldmVudEFjdGlvbjogJ2V2ZW50JyxcbiAgICAgICAgICAgIGV2ZW50TGFiZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGV2ZW50VmFsdWU6IDAsXG4gICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgY2F0ZWdvcnkgcHJvcGVydHknLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IGNhdGVnb3J5OiAnY2F0ZWdvcnknIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmdhLCAnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdjYXRlZ29yeScsXG4gICAgICAgICAgICBldmVudEFjdGlvbjogJ2V2ZW50JyxcbiAgICAgICAgICAgIGV2ZW50TGFiZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGV2ZW50VmFsdWU6IDAsXG4gICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgc3RvcmVkIGNhdGVnb3J5JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgnY2F0ZWdvcnknLCAnbmFtZScpO1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7fSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuZ2EsICdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2NhdGVnb3J5JyxcbiAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnZXZlbnQnLFxuICAgICAgICAgICAgZXZlbnRMYWJlbDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZXZlbnRWYWx1ZTogMCxcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYSBjYXRlZ29yeSBwcm9wZXJ0eSBldmVuIGlmIHRoZXJlIGlzIGEgc3RvcmVkIGNhdGVnb3J5JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgnY2F0ZWdvcnkocGFnZSknKTtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyBjYXRlZ29yeTogJ2NhdGVnb3J5KHRyYWNrKScgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuZ2EsICdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2NhdGVnb3J5KHRyYWNrKScsXG4gICAgICAgICAgICBldmVudEFjdGlvbjogJ2V2ZW50JyxcbiAgICAgICAgICAgIGV2ZW50TGFiZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGV2ZW50VmFsdWU6IDAsXG4gICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgbGFiZWwgcHJvcGVydHknLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IGxhYmVsOiAnbGFiZWwnIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmdhLCAnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdBbGwnLFxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdldmVudCcsXG4gICAgICAgICAgICBldmVudExhYmVsOiAnbGFiZWwnLFxuICAgICAgICAgICAgZXZlbnRWYWx1ZTogMCxcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYSByb3VuZGVkIHZhbHVlIHByb3BlcnR5JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyB2YWx1ZTogMS4xIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmdhLCAnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdBbGwnLFxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdldmVudCcsXG4gICAgICAgICAgICBldmVudExhYmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBldmVudFZhbHVlOiAxLFxuICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcHJlZmVyIGEgcm91bmRlZCByZXZlbnVlIHByb3BlcnR5JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyByZXZlbnVlOiA5Ljk5IH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmdhLCAnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdBbGwnLFxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdldmVudCcsXG4gICAgICAgICAgICBldmVudExhYmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBldmVudFZhbHVlOiAxMCxcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYSBub24taW50ZXJhY3Rpb24gcHJvcGVydHknLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IG5vbkludGVyYWN0aW9uOiAxIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmdhLCAnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdBbGwnLFxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdldmVudCcsXG4gICAgICAgICAgICBldmVudExhYmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBldmVudFZhbHVlOiAwLFxuICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgbm9uLWludGVyYWN0aW9uIG9wdGlvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHt9LCB7ICdHb29nbGUgQW5hbHl0aWNzJzogeyBub25JbnRlcmFjdGlvbjogMSB9IH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmdhLCAnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdBbGwnLFxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdldmVudCcsXG4gICAgICAgICAgICBldmVudExhYmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBldmVudFZhbHVlOiAwLFxuICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJ2Vjb21tZXJjZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3csICdnYScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHJlcXVpcmUgZWNvbW1lcmNlLmpzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHsgb3JkZXJJZDogJ2VlMDk5YmY3JyB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5nYSwgJ3JlcXVpcmUnLCAnZWNvbW1lcmNlJyk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydChnYS5lY29tbWVyY2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIG5vdCByZXF1aXJlIGVjb21tZXJjZSBpZiAuZWNvbW1lcmNlIGlzIHRydWUnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGdhLmVjb21tZXJjZSA9IHRydWU7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7IG9yZGVySWQ6ICdlMjEzZTRkYScgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93LmdhLCAncmVxdWlyZScsICdlY29tbWVyY2UnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIHNpbXBsZSBlY29tbWVyY2UgZGF0YScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7IG9yZGVySWQ6ICc3MzA2Y2MwNicgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCgzID09IHdpbmRvdy5nYS5hcmdzLmxlbmd0aCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCgnZWNvbW1lcmNlOmFkZFRyYW5zYWN0aW9uJyA9PSB3aW5kb3cuZ2EuYXJnc1sxXVswXSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCgnZWNvbW1lcmNlOnNlbmQnID09IHdpbmRvdy5nYS5hcmdzWzJdWzBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGVjb21tZXJjZSBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHtcbiAgICAgICAgICAgIG9yZGVySWQ6ICc3ODBiYzU1JyxcbiAgICAgICAgICAgIHRvdGFsOiA5OS45OSxcbiAgICAgICAgICAgIHNoaXBwaW5nOiAxMy45OSxcbiAgICAgICAgICAgIHRheDogMjAuOTksXG4gICAgICAgICAgICBwcm9kdWN0czogW3tcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgICBza3U6ICdwLTI5OCdcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IDMsXG4gICAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgICAgbmFtZTogJ290aGVyIHByb2R1Y3QnLFxuICAgICAgICAgICAgICBza3U6ICdwLTI5OSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzFdLCBbJ2Vjb21tZXJjZTphZGRUcmFuc2FjdGlvbicsIHtcbiAgICAgICAgICAgIGlkOiAnNzgwYmM1NScsXG4gICAgICAgICAgICByZXZlbnVlOiA5OS45OSxcbiAgICAgICAgICAgIHNoaXBwaW5nOiAxMy45OSxcbiAgICAgICAgICAgIGFmZmlsaWF0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0YXg6IDIwLjk5LFxuICAgICAgICAgICAgY3VycmVuY3k6ICdVU0QnXG4gICAgICAgICAgfV0pO1xuXG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1syXSwgWydlY29tbWVyY2U6YWRkSXRlbScsIHtcbiAgICAgICAgICAgIGlkOiAnNzgwYmM1NScsXG4gICAgICAgICAgICBjYXRlZ29yeTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgcHJpY2U6IDI0Ljc1LFxuICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICBza3U6ICdwLTI5OCcsXG4gICAgICAgICAgICBjdXJyZW5jeTogJ1VTRCdcbiAgICAgICAgICB9XSk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzNdLCBbJ2Vjb21tZXJjZTphZGRJdGVtJywge1xuICAgICAgICAgICAgaWQ6ICc3ODBiYzU1JyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBuYW1lOiAnb3RoZXIgcHJvZHVjdCcsXG4gICAgICAgICAgICBwcmljZTogMjQuNzUsXG4gICAgICAgICAgICBza3U6ICdwLTI5OScsXG4gICAgICAgICAgICBxdWFudGl0eTogMyxcbiAgICAgICAgICAgIGN1cnJlbmN5OiAnVVNEJ1xuICAgICAgICAgIH1dKTtcblxuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbNF0sIFsnZWNvbW1lcmNlOnNlbmQnXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZmFsbGJhY2sgdG8gcmV2ZW51ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7XG4gICAgICAgICAgICBvcmRlcklkOiAnNWQ0YzdjYjUnLFxuICAgICAgICAgICAgcmV2ZW51ZTogOTkuOSxcbiAgICAgICAgICAgIHNoaXBwaW5nOiAxMy45OSxcbiAgICAgICAgICAgIHRheDogMjAuOTksXG4gICAgICAgICAgICBwcm9kdWN0czogW11cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMV0sIFsnZWNvbW1lcmNlOmFkZFRyYW5zYWN0aW9uJywge1xuICAgICAgICAgICAgaWQ6ICc1ZDRjN2NiNScsXG4gICAgICAgICAgICByZXZlbnVlOiA5OS45LFxuICAgICAgICAgICAgc2hpcHBpbmc6IDEzLjk5LFxuICAgICAgICAgICAgYWZmaWxpYXRpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRheDogMjAuOTksXG4gICAgICAgICAgICBjdXJyZW5jeTogJ1VTRCdcbiAgICAgICAgICB9XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcGFzcyBjdXN0b20gY3VycmVuY3knLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnY29tcGxldGVkIG9yZGVyJywge1xuICAgICAgICAgICAgb3JkZXJJZDogJzVkNGM3Y2I1JyxcbiAgICAgICAgICAgIHJldmVudWU6IDk5LjksXG4gICAgICAgICAgICBzaGlwcGluZzogMTMuOTksXG4gICAgICAgICAgICB0YXg6IDIwLjk5LFxuICAgICAgICAgICAgcHJvZHVjdHM6IFtdLFxuICAgICAgICAgICAgY3VycmVuY3k6ICdFVVInXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzFdLCBbJ2Vjb21tZXJjZTphZGRUcmFuc2FjdGlvbicsIHtcbiAgICAgICAgICAgIGlkOiAnNWQ0YzdjYjUnLFxuICAgICAgICAgICAgcmV2ZW51ZTogOTkuOSxcbiAgICAgICAgICAgIHNoaXBwaW5nOiAxMy45OSxcbiAgICAgICAgICAgIGFmZmlsaWF0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0YXg6IDIwLjk5LFxuICAgICAgICAgICAgY3VycmVuY3k6ICdFVVInXG4gICAgICAgICAgfV0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVW5pdmVyc2FsIEVuaGFuY2VkIEVjb21tZXJjZScsIGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNldHRpbmdzID0ge1xuICAgICAgZW5oYW5jZWRFY29tbWVyY2U6IHRydWUsXG4gICAgICBhbm9ueW1pemVJcDogdHJ1ZSxcbiAgICAgIGRvbWFpbjogJ25vbmUnLFxuICAgICAgc2l0ZVNwZWVkU2FtcGxlUmF0ZTogNDIsXG4gICAgICB0cmFja2luZ0lkOiAnVUEtMjcwMzM3MDktMTInXG4gICAgfTtcblxuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGdhID0gbmV3IEdBKHNldHRpbmdzKTtcbiAgICAgIGFuYWx5dGljcy5hZGQoZ2EpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBnYS5yZXNldCgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJ2VuaGFuY2VkIGVjb21tZXJjZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3csICdnYScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHJlcXVpcmUgZWMuanMnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnY29tcGxldGVkIG9yZGVyJywgeyBvcmRlcklkOiAnZWUwOTliZjcnIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93LmdhLmFyZ3MubGVuZ3RoID4gMCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1swXSwgWydyZXF1aXJlJywgJ2VjJ10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIG5vdCByZXF1aXJlIGVjIGlmIC5lbmhhbmNlZEVjb21tZXJjZUxvYWRlZCBpcyB0cnVlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBnYS5lbmhhbmNlZEVjb21tZXJjZUxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7IG9yZGVySWQ6ICdlMjEzZTRkYScgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuZ2EuYXJncy5sZW5ndGggPiAwKTtcbiAgICAgICAgICBhbmFseXRpY3Mubm90RGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzBdLCBbJ3JlcXVpcmUnLCAnZWMnXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2V0IGN1cnJlbmN5IGZvciBlYy5qcyAgdG8gZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7IG9yZGVySWQ6ICdlZTA5OWJmNycgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1sxXSwgWydzZXQnLCAnJmN1JywgJ1VTRCddKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZXQgY3VycmVuY3kgZm9yIGVjLmpzIHRvIGN1c3RvbSBjdXJyZW5jeScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7IG9yZGVySWQ6ICdlZTA5OWJmNycsIGN1cnJlbmN5OiAnRVVSJyB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzFdLCBbJ3NldCcsICcmY3UnLCAnRVVSJ10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYWRkZWQgcHJvZHVjdCBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2FkZGVkIHByb2R1Y3QnLCB7XG4gICAgICAgICAgICBjdXJyZW5jeTogJ0NBRCcsXG4gICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgIG5hbWU6ICdteSBwcm9kdWN0JyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnY2F0IDEnLFxuICAgICAgICAgICAgc2t1OiAncC0yOTgnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KDUgPT0gd2luZG93LmdhLmFyZ3MubGVuZ3RoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzFdLCBbJ3NldCcsICcmY3UnLCAnQ0FEJ10pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMl0sIFsnZWM6YWRkUHJvZHVjdCcsIHtcbiAgICAgICAgICAgIGlkOiAncC0yOTgnLFxuICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdjYXQgMScsXG4gICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgIGJyYW5kOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB2YXJpYW50OiB1bmRlZmluZWQsXG4gICAgICAgICAgfV0pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbM10sIFsnZWM6c2V0QWN0aW9uJywgJ2FkZCcsIHt9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1s0XSwgWydzZW5kJywgJ2V2ZW50JywgJ0VuaGFuY2VkRWNvbW1lcmNlJywgJ1B1c2gnLCB7J25vbkludGVyYWN0aW9uJzogMX1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIHJlbW92ZWQgcHJvZHVjdCBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ3JlbW92ZWQgcHJvZHVjdCcsIHtcbiAgICAgICAgICAgIGN1cnJlbmN5OiAnQ0FEJyxcbiAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgcHJpY2U6IDI0Ljc1LFxuICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdjYXQgMScsXG4gICAgICAgICAgICBza3U6ICdwLTI5OCdcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFuYWx5dGljcy5hc3NlcnQoNSA9PSB3aW5kb3cuZ2EuYXJncy5sZW5ndGgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMV0sIFsnc2V0JywgJyZjdScsICdDQUQnXSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1syXSwgWydlYzphZGRQcm9kdWN0Jywge1xuICAgICAgICAgICAgaWQ6ICdwLTI5OCcsXG4gICAgICAgICAgICBuYW1lOiAnbXkgcHJvZHVjdCcsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ2NhdCAxJyxcbiAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgcHJpY2U6IDI0Ljc1LFxuICAgICAgICAgICAgYnJhbmQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZhcmlhbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1szXSwgWydlYzpzZXRBY3Rpb24nLCAncmVtb3ZlJywge31dKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzRdLCBbJ3NlbmQnLCAnZXZlbnQnLCAnRW5oYW5jZWRFY29tbWVyY2UnLCAnUHVzaCcsIHsnbm9uSW50ZXJhY3Rpb24nOiAxfV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgdmlld2VkIHByb2R1Y3QgZGV0YWlscyBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ3ZpZXdlZCBwcm9kdWN0IGRldGFpbHMnLCB7XG4gICAgICAgICAgICBjdXJyZW5jeTogJ0NBRCcsXG4gICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgIG5hbWU6ICdteSBwcm9kdWN0JyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnY2F0IDEnLFxuICAgICAgICAgICAgc2t1OiAncC0yOTgnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KDUgPT0gd2luZG93LmdhLmFyZ3MubGVuZ3RoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzFdLCBbJ3NldCcsICcmY3UnLCAnQ0FEJ10pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMl0sIFsnZWM6YWRkUHJvZHVjdCcsIHtcbiAgICAgICAgICAgIGlkOiAncC0yOTgnLFxuICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdjYXQgMScsXG4gICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgIGJyYW5kOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB2YXJpYW50OiB1bmRlZmluZWQsXG4gICAgICAgICAgfV0pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbM10sIFsnZWM6c2V0QWN0aW9uJywgJ2RldGFpbCcsIHt9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1s0XSwgWydzZW5kJywgJ2V2ZW50JywgJ0VuaGFuY2VkRWNvbW1lcmNlJywgJ1B1c2gnLCB7J25vbkludGVyYWN0aW9uJzogMX1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGNsaWNrZWQgcHJvZHVjdCBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NsaWNrZWQgcHJvZHVjdCcsIHtcbiAgICAgICAgICAgIGN1cnJlbmN5OiAnQ0FEJyxcbiAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgcHJpY2U6IDI0Ljc1LFxuICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdjYXQgMScsXG4gICAgICAgICAgICBza3U6ICdwLTI5OCcsXG4gICAgICAgICAgICBsaXN0OiAnc2VhcmNoIHJlc3VsdHMnLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCg1ID09IHdpbmRvdy5nYS5hcmdzLmxlbmd0aCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1sxXSwgWydzZXQnLCAnJmN1JywgJ0NBRCddKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzJdLCBbJ2VjOmFkZFByb2R1Y3QnLCB7XG4gICAgICAgICAgICBpZDogJ3AtMjk4JyxcbiAgICAgICAgICAgIG5hbWU6ICdteSBwcm9kdWN0JyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnY2F0IDEnLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICBwcmljZTogMjQuNzUsXG4gICAgICAgICAgICBicmFuZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdmFyaWFudDogdW5kZWZpbmVkLFxuICAgICAgICAgIH1dKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzNdLCBbJ2VjOnNldEFjdGlvbicsICdjbGljaycsIHtcbiAgICAgICAgICAgIGxpc3Q6ICdzZWFyY2ggcmVzdWx0cydcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1s0XSwgWydzZW5kJywgJ2V2ZW50JywgJ0VuaGFuY2VkRWNvbW1lcmNlJywgJ1B1c2gnLCB7J25vbkludGVyYWN0aW9uJzogMX1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIHZpZXdlZCBwcm9kdWN0IGRhdGEnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygndmlld2VkIHByb2R1Y3QnLCB7XG4gICAgICAgICAgICBjdXJyZW5jeTogJ0NBRCcsXG4gICAgICAgICAgICBuYW1lOiAnbXkgcHJvZHVjdCcsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ2NhdCAxJyxcbiAgICAgICAgICAgIHNrdTogJ3AtMjk4JyxcbiAgICAgICAgICAgIGxpc3Q6ICdzZWFyY2ggcmVzdWx0cycsXG4gICAgICAgICAgICBwb3NpdGlvbjogMVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCg0ID09IHdpbmRvdy5nYS5hcmdzLmxlbmd0aCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1sxXSwgWydzZXQnLCAnJmN1JywgJ0NBRCddKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzJdLCBbJ2VjOmFkZEltcHJlc3Npb24nLCB7XG4gICAgICAgICAgICBpZDogJ3AtMjk4JyxcbiAgICAgICAgICAgIG5hbWU6ICdteSBwcm9kdWN0JyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnY2F0IDEnLFxuICAgICAgICAgICAgYnJhbmQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZhcmlhbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGxpc3Q6ICdzZWFyY2ggcmVzdWx0cycsXG4gICAgICAgICAgICBwb3NpdGlvbjogMVxuICAgICAgICAgIH1dKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzNdLCBbJ3NlbmQnLCAnZXZlbnQnLCAnRW5oYW5jZWRFY29tbWVyY2UnLCAnUHVzaCcsIHsnbm9uSW50ZXJhY3Rpb24nOiAxfV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgdmlld2VkIHByb21vdGlvbiBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ3ZpZXdlZCBwcm9tb3Rpb24nLCB7XG4gICAgICAgICAgICBjdXJyZW5jeTogJ0NBRCcsXG4gICAgICAgICAgICBpZDogJ1BST01PXzEyMzQnLFxuICAgICAgICAgICAgbmFtZTogJ1N1bW1lciBTYWxlJyxcbiAgICAgICAgICAgIGNyZWF0aXZlOiAnc3VtbWVyX2Jhbm5lcjInLFxuICAgICAgICAgICAgcG9zaXRpb246ICdiYW5uZXJfc2xvdDEnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvL2FuYWx5dGljcy5hc3NlcnQoNCA9PSB3aW5kb3cuZ2EuYXJncy5sZW5ndGgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMV0sIFsnc2V0JywgJyZjdScsICdDQUQnXSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1syXSwgWydlYzphZGRQcm9tbycsIHtcbiAgICAgICAgICAgIGlkOiAnUFJPTU9fMTIzNCcsXG4gICAgICAgICAgICBuYW1lOiAnU3VtbWVyIFNhbGUnLFxuICAgICAgICAgICAgY3JlYXRpdmU6ICdzdW1tZXJfYmFubmVyMicsXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Jhbm5lcl9zbG90MSdcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1szXSwgWydzZW5kJywgJ2V2ZW50JywgJ0VuaGFuY2VkRWNvbW1lcmNlJywgJ1B1c2gnLCB7J25vbkludGVyYWN0aW9uJzogMX1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGNsaWNrZWQgcHJvbW90aW9uIGRhdGEnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnY2xpY2tlZCBwcm9tb3Rpb24nLCB7XG4gICAgICAgICAgICBjdXJyZW5jeTogJ0NBRCcsXG4gICAgICAgICAgICBpZDogJ1BST01PXzEyMzQnLFxuICAgICAgICAgICAgbmFtZTogJ1N1bW1lciBTYWxlJyxcbiAgICAgICAgICAgIGNyZWF0aXZlOiAnc3VtbWVyX2Jhbm5lcjInLFxuICAgICAgICAgICAgcG9zaXRpb246ICdiYW5uZXJfc2xvdDEnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvL2FuYWx5dGljcy5hc3NlcnQoNSA9PSB3aW5kb3cuZ2EuYXJncy5sZW5ndGgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMV0sIFsnc2V0JywgJyZjdScsICdDQUQnXSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1syXSwgWydlYzphZGRQcm9tbycsIHtcbiAgICAgICAgICAgIGlkOiAnUFJPTU9fMTIzNCcsXG4gICAgICAgICAgICBuYW1lOiAnU3VtbWVyIFNhbGUnLFxuICAgICAgICAgICAgY3JlYXRpdmU6ICdzdW1tZXJfYmFubmVyMicsXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Jhbm5lcl9zbG90MSdcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1szXSwgWydlYzpzZXRBY3Rpb24nLCAncHJvbW9fY2xpY2snLCB7fV0pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbNF0sIFsnc2VuZCcsICdldmVudCcsICdFbmhhbmNlZEVjb21tZXJjZScsICdQdXNoJywgeydub25JbnRlcmFjdGlvbic6IDF9XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCBzdGFydGVkIG9yZGVyIGRhdGEnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnc3RhcnRlZCBvcmRlcicsIHtcbiAgICAgICAgICAgIGN1cnJlbmN5OiAnQ0FEJyxcbiAgICAgICAgICAgIHByb2R1Y3RzOiBbe1xuICAgICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgICAgcHJpY2U6IDI0Ljc1LFxuICAgICAgICAgICAgICBuYW1lOiAnbXkgcHJvZHVjdCcsXG4gICAgICAgICAgICAgIHNrdTogJ3AtMjk4J1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBxdWFudGl0eTogMyxcbiAgICAgICAgICAgICAgcHJpY2U6IDI0Ljc1LFxuICAgICAgICAgICAgICBuYW1lOiAnb3RoZXIgcHJvZHVjdCcsXG4gICAgICAgICAgICAgIHNrdTogJ3AtMjk5J1xuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBzdGVwOiAxLFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogJ1Zpc2EnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KDYgPT0gd2luZG93LmdhLmFyZ3MubGVuZ3RoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzFdLCBbJ3NldCcsICcmY3UnLCAnQ0FEJ10pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMl0sIFsnZWM6YWRkUHJvZHVjdCcsIHtcbiAgICAgICAgICAgIGlkOiAncC0yOTgnLFxuICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgcHJpY2U6IDI0Ljc1LFxuICAgICAgICAgICAgYnJhbmQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZhcmlhbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1szXSwgWydlYzphZGRQcm9kdWN0Jywge1xuICAgICAgICAgICAgaWQ6ICdwLTI5OScsXG4gICAgICAgICAgICBuYW1lOiAnb3RoZXIgcHJvZHVjdCcsXG4gICAgICAgICAgICBjYXRlZ29yeTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDMsXG4gICAgICAgICAgICBwcmljZTogMjQuNzUsXG4gICAgICAgICAgICBicmFuZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdmFyaWFudDogdW5kZWZpbmVkLFxuICAgICAgICAgIH1dKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzRdLCBbJ2VjOnNldEFjdGlvbicsICdjaGVja291dCcsIHtcbiAgICAgICAgICAgIHN0ZXA6IDEsXG4gICAgICAgICAgICBvcHRpb246ICdWaXNhJ1xuICAgICAgICAgIH1dKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzVdLCBbJ3NlbmQnLCAnZXZlbnQnLCAnRW5oYW5jZWRFY29tbWVyY2UnLCAnUHVzaCcsIHsnbm9uSW50ZXJhY3Rpb24nOiAxfV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgdXBkYXRlZCBvcmRlciBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ3VwZGF0ZWQgb3JkZXInLCB7XG4gICAgICAgICAgICBjdXJyZW5jeTogJ0NBRCcsXG4gICAgICAgICAgICBwcm9kdWN0czogW3tcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgICBjYXRlZ29yeTogJ2NhdCAxJyxcbiAgICAgICAgICAgICAgc2t1OiAncC0yOTgnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIHF1YW50aXR5OiAzLFxuICAgICAgICAgICAgICBwcmljZTogMjQuNzUsXG4gICAgICAgICAgICAgIG5hbWU6ICdvdGhlciBwcm9kdWN0JyxcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdjYXQgMicsXG4gICAgICAgICAgICAgIHNrdTogJ3AtMjk5J1xuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBzdGVwOiAxLFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogJ1Zpc2EnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KDYgPT0gd2luZG93LmdhLmFyZ3MubGVuZ3RoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzFdLCBbJ3NldCcsICcmY3UnLCAnQ0FEJ10pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMl0sIFsnZWM6YWRkUHJvZHVjdCcsIHtcbiAgICAgICAgICAgIGlkOiAncC0yOTgnLFxuICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdjYXQgMScsXG4gICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgIGJyYW5kOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB2YXJpYW50OiB1bmRlZmluZWQsXG4gICAgICAgICAgfV0pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbM10sIFsnZWM6YWRkUHJvZHVjdCcsIHtcbiAgICAgICAgICAgIGlkOiAncC0yOTknLFxuICAgICAgICAgICAgbmFtZTogJ290aGVyIHByb2R1Y3QnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdjYXQgMicsXG4gICAgICAgICAgICBxdWFudGl0eTogMyxcbiAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgIGJyYW5kOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB2YXJpYW50OiB1bmRlZmluZWQsXG4gICAgICAgICAgfV0pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbNF0sIFsnZWM6c2V0QWN0aW9uJywgJ2NoZWNrb3V0Jywge1xuICAgICAgICAgICAgc3RlcDogMSxcbiAgICAgICAgICAgIG9wdGlvbjogJ1Zpc2EnXG4gICAgICAgICAgfV0pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbNV0sIFsnc2VuZCcsICdldmVudCcsICdFbmhhbmNlZEVjb21tZXJjZScsICdQdXNoJywgeydub25JbnRlcmFjdGlvbic6IDF9XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCB2aWV3ZWQgY2hlY2tvdXQgc3RlcCBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ3ZpZXdlZCBjaGVja291dCBzdGVwJywge1xuICAgICAgICAgICAgY3VycmVuY3k6ICdDQUQnLFxuICAgICAgICAgICAgc3RlcDogMlxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCg0ID09IHdpbmRvdy5nYS5hcmdzLmxlbmd0aCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1sxXSwgWydzZXQnLCAnJmN1JywgJ0NBRCddKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzJdLCBbJ2VjOnNldEFjdGlvbicsICdjaGVja291dCcsIHtcbiAgICAgICAgICAgIHN0ZXA6IDIsXG4gICAgICAgICAgICBvcHRpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1szXSwgWydzZW5kJywgJ2V2ZW50JywgJ0VuaGFuY2VkRWNvbW1lcmNlJywgJ1B1c2gnLCB7J25vbkludGVyYWN0aW9uJzogMX1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGNvbXBsZXRlZCBjaGVja291dCBzdGVwIGRhdGEnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnY29tcGxldGVkIGNoZWNrb3V0IHN0ZXAnLCB7XG4gICAgICAgICAgICBjdXJyZW5jeTogJ0NBRCcsXG4gICAgICAgICAgICBzdGVwOiAyLFxuICAgICAgICAgICAgc2hpcHBpbmdNZXRob2Q6ICdGZWRFeCdcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFuYWx5dGljcy5hc3NlcnQoNCA9PSB3aW5kb3cuZ2EuYXJncy5sZW5ndGgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMV0sIFsnc2V0JywgJyZjdScsICdDQUQnXSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1syXSwgWydlYzpzZXRBY3Rpb24nLCAnY2hlY2tvdXRfb3B0aW9uJywge1xuICAgICAgICAgICAgc3RlcDogMixcbiAgICAgICAgICAgIG9wdGlvbjogJ0ZlZEV4JyxcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1szXSwgWydzZW5kJywgJ2V2ZW50JywgJ0NoZWNrb3V0JywgJ09wdGlvbiddKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGNvbXBsZXRlZCBjaGVja291dCBzdGVwIGRhdGEgd2l0aCBhbGwgb3B0aW9ucycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgY2hlY2tvdXQgc3RlcCcsIHtcbiAgICAgICAgICAgIGN1cnJlbmN5OiAnQ0FEJyxcbiAgICAgICAgICAgIHN0ZXA6IDIsXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kOiAnVmlzYScsXG4gICAgICAgICAgICBzaGlwcGluZ01ldGhvZDogJ0ZlZEV4JyxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFuYWx5dGljcy5hc3NlcnQoNCA9PSB3aW5kb3cuZ2EuYXJncy5sZW5ndGgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMV0sIFsnc2V0JywgJyZjdScsICdDQUQnXSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1syXSwgWydlYzpzZXRBY3Rpb24nLCAnY2hlY2tvdXRfb3B0aW9uJywge1xuICAgICAgICAgICAgc3RlcDogMixcbiAgICAgICAgICAgIG9wdGlvbjogJ1Zpc2EsIEZlZEV4JyxcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1szXSwgWydzZW5kJywgJ2V2ZW50JywgJ0NoZWNrb3V0JywgJ09wdGlvbiddKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBjb21wbGV0ZWQgY2hlY2tvdXQgc3RlcCBkYXRhIHdpdGhvdXQgYSBzdGVwJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBjaGVja291dCBzdGVwJywge1xuICAgICAgICAgICAgY3VycmVuY3k6ICdDQUQnLFxuICAgICAgICAgICAgc2hpcHBpbmdNZXRob2Q6ICdGZWRFeCcsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KDAgPT0gd2luZG93LmdhLmFyZ3MubGVuZ3RoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBjb21wbGV0ZWQgY2hlY2tvdXQgc3RlcCBkYXRhIHdpdGhvdXQgYW4gb3B0aW9uJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBjaGVja291dCBzdGVwJywge1xuICAgICAgICAgICAgY3VycmVuY3k6ICdDQUQnLFxuICAgICAgICAgICAgc3RlcDogMixcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFuYWx5dGljcy5hc3NlcnQoMCA9PSB3aW5kb3cuZ2EuYXJncy5sZW5ndGgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgc2ltcGxlIGNvbXBsZXRlZCBvcmRlciBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHsgb3JkZXJJZDogJzczMDZjYzA2JyB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KDQgPT0gd2luZG93LmdhLmFyZ3MubGVuZ3RoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzJdLCBbJ2VjOnNldEFjdGlvbicsICdwdXJjaGFzZScsIHtcbiAgICAgICAgICAgIGlkOiAnNzMwNmNjMDYnLFxuICAgICAgICAgICAgYWZmaWxpYXRpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJldmVudWU6IDAuMCxcbiAgICAgICAgICAgIHRheDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2hpcHBpbmc6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvdXBvbjogdW5kZWZpbmVkXG4gICAgICAgICAgfV0pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbM10sIFsnc2VuZCcsICdldmVudCcsICdFbmhhbmNlZEVjb21tZXJjZScsICdQdXNoJywgeydub25JbnRlcmFjdGlvbic6IDF9XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCBjb21wbGV0ZWQgb3JkZXIgZGF0YScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7XG4gICAgICAgICAgICBvcmRlcklkOiAnNzgwYmM1NScsXG4gICAgICAgICAgICB0b3RhbDogOTkuOSxcbiAgICAgICAgICAgIHNoaXBwaW5nOiAxMy45OSxcbiAgICAgICAgICAgIHRheDogMjAuOTksXG4gICAgICAgICAgICBjdXJyZW5jeTogJ0NBRCcsXG4gICAgICAgICAgICBjb3Vwb246ICdjb3Vwb24nLFxuICAgICAgICAgICAgYWZmaWxpYXRpb246ICdhZmZpbGlhdGlvbicsXG4gICAgICAgICAgICBwcm9kdWN0czogW3tcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgICBjYXRlZ29yeTogJ2NhdCAxJyxcbiAgICAgICAgICAgICAgc2t1OiAncC0yOTgnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIHF1YW50aXR5OiAzLFxuICAgICAgICAgICAgICBwcmljZTogMjQuNzUsXG4gICAgICAgICAgICAgIG5hbWU6ICdvdGhlciBwcm9kdWN0JyxcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdjYXQgMicsXG4gICAgICAgICAgICAgIHNrdTogJ3AtMjk5J1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFuYWx5dGljcy5hc3NlcnQoNiA9PSB3aW5kb3cuZ2EuYXJncy5sZW5ndGgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMV0sIFsnc2V0JywgJyZjdScsICdDQUQnXSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1syXSwgWydlYzphZGRQcm9kdWN0Jywge1xuICAgICAgICAgICAgaWQ6ICdwLTI5OCcsXG4gICAgICAgICAgICBuYW1lOiAnbXkgcHJvZHVjdCcsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ2NhdCAxJyxcbiAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgcHJpY2U6IDI0Ljc1LFxuICAgICAgICAgICAgYnJhbmQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZhcmlhbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1szXSwgWydlYzphZGRQcm9kdWN0Jywge1xuICAgICAgICAgICAgaWQ6ICdwLTI5OScsXG4gICAgICAgICAgICBuYW1lOiAnb3RoZXIgcHJvZHVjdCcsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ2NhdCAyJyxcbiAgICAgICAgICAgIHF1YW50aXR5OiAzLFxuICAgICAgICAgICAgcHJpY2U6IDI0Ljc1LFxuICAgICAgICAgICAgYnJhbmQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZhcmlhbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1s0XSwgWydlYzpzZXRBY3Rpb24nLCAncHVyY2hhc2UnLCB7XG4gICAgICAgICAgICBpZDogJzc4MGJjNTUnLFxuICAgICAgICAgICAgYWZmaWxpYXRpb246ICdhZmZpbGlhdGlvbicsXG4gICAgICAgICAgICByZXZlbnVlOiA5OS45LFxuICAgICAgICAgICAgdGF4OiAyMC45OSxcbiAgICAgICAgICAgIHNoaXBwaW5nOiAxMy45OSxcbiAgICAgICAgICAgIGNvdXBvbjogJ2NvdXBvbidcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1s1XSwgWydzZW5kJywgJ2V2ZW50JywgJ0VuaGFuY2VkRWNvbW1lcmNlJywgJ1B1c2gnLCB7J25vbkludGVyYWN0aW9uJzogMX1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2NvbXBsZXRlZCBvcmRlciBzaG91bGQgZmFsbGJhY2sgdG8gcmV2ZW51ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7XG4gICAgICAgICAgICBvcmRlcklkOiAnNWQ0YzdjYjUnLFxuICAgICAgICAgICAgcmV2ZW51ZTogOTkuOSxcbiAgICAgICAgICAgIHNoaXBwaW5nOiAxMy45OSxcbiAgICAgICAgICAgIHRheDogMjAuOTksXG4gICAgICAgICAgICBwcm9kdWN0czogW11cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMl0sIFsnZWM6c2V0QWN0aW9uJywgJ3B1cmNoYXNlJywge1xuICAgICAgICAgICAgaWQ6ICc1ZDRjN2NiNScsXG4gICAgICAgICAgICBhZmZpbGlhdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmV2ZW51ZTogOTkuOSxcbiAgICAgICAgICAgIHRheDogMjAuOTksXG4gICAgICAgICAgICBzaGlwcGluZzogMTMuOTksXG4gICAgICAgICAgICBjb3Vwb246IHVuZGVmaW5lZFxuICAgICAgICAgIH1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGZ1bGwgcmVmdW5kZWQgb3JkZXIgZGF0YScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdyZWZ1bmRlZCBvcmRlcicsIHsgb3JkZXJJZDogJzc4MGJjNTUnIH0pO1xuXG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCg0ID09IHdpbmRvdy5nYS5hcmdzLmxlbmd0aCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1syXSwgWydlYzpzZXRBY3Rpb24nLCAncmVmdW5kJywge1xuICAgICAgICAgICAgaWQ6ICc3ODBiYzU1J1xuICAgICAgICAgIH1dKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5nYS5hcmdzWzNdLCBbJ3NlbmQnLCAnZXZlbnQnLCAnRW5oYW5jZWRFY29tbWVyY2UnLCAnUHVzaCcsIHsnbm9uSW50ZXJhY3Rpb24nOiAxfV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgcGFydGlhbCByZWZ1bmRlZCBvcmRlciBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ3JlZnVuZGVkIG9yZGVyJywge1xuICAgICAgICAgICAgb3JkZXJJZDogJzc4MGJjNTUnLFxuICAgICAgICAgICAgcHJvZHVjdHM6IFt7XG4gICAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgICBza3U6ICdwLTI5OCdcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IDIsXG4gICAgICAgICAgICAgIHNrdTogJ3AtMjk5J1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFuYWx5dGljcy5hc3NlcnQoNiA9PSB3aW5kb3cuZ2EuYXJncy5sZW5ndGgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbMl0sIFsnZWM6YWRkUHJvZHVjdCcsIHtcbiAgICAgICAgICAgIGlkOiAncC0yOTgnLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgfV0pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbM10sIFsnZWM6YWRkUHJvZHVjdCcsIHtcbiAgICAgICAgICAgIGlkOiAncC0yOTknLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDIsXG4gICAgICAgICAgfV0pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93LmdhLmFyZ3NbNF0sIFsnZWM6c2V0QWN0aW9uJywgJ3JlZnVuZCcsIHtcbiAgICAgICAgICAgIGlkOiAnNzgwYmM1NSdcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuZ2EuYXJnc1s1XSwgWydzZW5kJywgJ2V2ZW50JywgJ0VuaGFuY2VkRWNvbW1lcmNlJywgJ1B1c2gnLCB7J25vbkludGVyYWN0aW9uJzogMX1dKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NsYXNzaWMnLCBmdW5jdGlvbigpe1xuICAgIHZhciBzZXR0aW5ncyA9IHtcbiAgICAgIGFub255bWl6ZUlwOiB0cnVlLFxuICAgICAgY2xhc3NpYzogdHJ1ZSxcbiAgICAgIGRvbWFpbjogJ2F1dG8nLFxuICAgICAgZW5oYW5jZWRMaW5rQXR0cmlidXRpb246IHRydWUsXG4gICAgICBpZ25vcmVkUmVmZXJyZXJzOiBbJ2RvbWFpbi5jb20nLCAnd3d3LmRvbWFpbi5jb20nXSxcbiAgICAgIHNpdGVTcGVlZFNhbXBsZVJhdGU6IDQyLFxuICAgICAgdHJhY2tpbmdJZDogJ1VBLTI3MDMzNzA5LTUnXG4gICAgfTtcblxuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGdhID0gbmV3IEdBKHNldHRpbmdzKTtcbiAgICAgIGFuYWx5dGljcy5hZGQoZ2EpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBnYS5yZXNldCgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIoZ2EsICdsb2FkJyk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2luZG93Ll9nYXEnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy5fZ2FxKTtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX2dhcSBpbnN0YW5jZW9mIEFycmF5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBwdXNoIHRoZSB0cmFja2luZyBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9nYXFbMF0sIFsnX3NldEFjY291bnQnLCBzZXR0aW5ncy50cmFja2luZ0lkXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2V0IGFsbG93IGxpbmtlcicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9nYXFbMV0sIFsnX3NldEFsbG93TGlua2VyJywgdHJ1ZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNldCBhbm9ueW1pemUgaXAnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fZ2FxWzJdLCBbJ19nYXQuX2Fub255bWl6ZUlwJ10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNldCBkb21haW4gbmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9nYXFbM10sIFsnX3NldERvbWFpbk5hbWUnLCBzZXR0aW5ncy5kb21haW5dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZXQgc2l0ZSBzcGVlZCBzYW1wbGUgcmF0ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9nYXFbNF0sIFsnX3NldFNpdGVTcGVlZFNhbXBsZVJhdGUnLCBzZXR0aW5ncy5zaXRlU3BlZWRTYW1wbGVSYXRlXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2V0IGVuaGFuY2VkIGxpbmsgYXR0cmlidXRpb24nLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fZ2FxWzVdLCBbJ19yZXF1aXJlJywgJ2lucGFnZV9saW5raWQnLCAnaHR0cDovL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9wbHVnaW5zL2dhL2lucGFnZV9saW5raWQuanMnXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2V0IGlnbm9yZWQgcmVmZXJyZXJzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuX2dhcVs2XSwgWydfYWRkSWdub3JlZFJlZicsIHNldHRpbmdzLmlnbm9yZWRSZWZlcnJlcnNbMF1dKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fZ2FxWzddLCBbJ19hZGRJZ25vcmVkUmVmJywgc2V0dGluZ3MuaWdub3JlZFJlZmVycmVyc1sxXV0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICAgIGFuYWx5dGljcy5sb2FkKGdhLCBkb25lKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fZ2FxLCAncHVzaCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYSBwYWdlIHZpZXcnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2dhcS5wdXNoLCBbJ190cmFja1BhZ2V2aWV3Jywgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHBhdGgnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKHsgcGF0aDogJy9wYXRoJyB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZ2FxLnB1c2gsIFsnX3RyYWNrUGFnZXZpZXcnLCAnL3BhdGgnXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCB0aGUgcXVlcnkgaWYgaXRzIGluY2x1ZGVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBnYS5vcHRpb25zLmluY2x1ZGVTZWFyY2ggPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKHsgcGF0aDogJy9wYXRoJywgc2VhcmNoOiAnP3E9MScgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2dhcS5wdXNoLCBbJ190cmFja1BhZ2V2aWV3JywgJy9wYXRoP3E9MSddKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCB0cmFjayBhIG5hbWVkIHBhZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCdOYW1lJyk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2dhcS5wdXNoLCBbJ190cmFja0V2ZW50JywgJ0FsbCcsICdWaWV3ZWQgTmFtZSBQYWdlJywgdW5kZWZpbmVkLCAwLCB0cnVlXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgdHJhY2sgYSBuYW1lZCBwYWdlIHdpdGggYSBjYXRlZ29yeScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZ2FxLnB1c2gsIFsnX3RyYWNrRXZlbnQnLCAnQ2F0ZWdvcnknLCAnVmlld2VkIENhdGVnb3J5IE5hbWUgUGFnZScsIHVuZGVmaW5lZCwgMCwgdHJ1ZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHRyYWNrIGEgY2F0ZWdvcml6ZWQgcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZ2FxLnB1c2gsIFsnX3RyYWNrRXZlbnQnLCAnQ2F0ZWdvcnknLCAnVmlld2VkIENhdGVnb3J5IFBhZ2UnLCB1bmRlZmluZWQsIDAsIHRydWVdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBub3QgdHJhY2sgYSBuYW1lZCBvciBjYXRlZ29yaXplZCBwYWdlIHdoZW4gdGhlIG9wdGlvbiBpcyBvZmYnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGdhLm9wdGlvbnMudHJhY2tOYW1lZFBhZ2VzID0gZmFsc2U7XG4gICAgICAgICAgZ2Eub3B0aW9ucy50cmFja0NhdGVnb3JpemVkUGFnZXMgPSBmYWxzZTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgnTmFtZScpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZFR3aWNlKHdpbmRvdy5fZ2FxLnB1c2gpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fZ2FxLCAncHVzaCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZ2FxLnB1c2gsIFsnX3RyYWNrRXZlbnQnLCAnQWxsJywgJ2V2ZW50JywgdW5kZWZpbmVkLCAwLCBmYWxzZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYSBjYXRlZ29yeSBwcm9wZXJ0eScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgY2F0ZWdvcnk6ICdjYXRlZ29yeScgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2dhcS5wdXNoLCBbJ190cmFja0V2ZW50JywgJ2NhdGVnb3J5JywgJ2V2ZW50JywgdW5kZWZpbmVkLCAwLCBmYWxzZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYSBzdG9yZWQgY2F0ZWdvcnknLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCdjYXRlZ29yeScpO1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IGNhdGVnb3J5OiAnY2F0ZWdvcnknIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9nYXEucHVzaCwgWydfdHJhY2tFdmVudCcsICdjYXRlZ29yeScsICdldmVudCcsIHVuZGVmaW5lZCwgMCwgZmFsc2VdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgbGFiZWwgcHJvcGVydHknLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IGxhYmVsOiAnbGFiZWwnIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9nYXEucHVzaCwgWydfdHJhY2tFdmVudCcsICdBbGwnLCAnZXZlbnQnLCAnbGFiZWwnLCAwLCBmYWxzZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYSByb3VuZGVkIHZhbHVlIHByb3BlcnR5JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyB2YWx1ZTogMS4xIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9nYXEucHVzaCwgWydfdHJhY2tFdmVudCcsICdBbGwnLCAnZXZlbnQnLCB1bmRlZmluZWQsIDEsIGZhbHNlXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcHJlZmVyIGEgcm91bmRlZCByZXZlbnVlIHByb3BlcnR5JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyByZXZlbnVlOiA5Ljk5IH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9nYXEucHVzaCwgWydfdHJhY2tFdmVudCcsICdBbGwnLCAnZXZlbnQnLCB1bmRlZmluZWQsIDEwLCBmYWxzZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYSBub24taW50ZXJhY3Rpb24gcHJvcGVydHknLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IG5vbkludGVyYWN0aW9uOiAxIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9nYXEucHVzaCwgWydfdHJhY2tFdmVudCcsICdBbGwnLCAnZXZlbnQnLCB1bmRlZmluZWQsIDAsIHRydWVdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgbm9uLWludGVyYWN0aW9uIG9wdGlvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHt9LCB7ICdHb29nbGUgQW5hbHl0aWNzJzogeyBub25JbnRlcmFjdGlvbjogMSB9IH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9nYXEucHVzaCwgWydfdHJhY2tFdmVudCcsICdBbGwnLCAnZXZlbnQnLCB1bmRlZmluZWQsIDAsIHRydWVdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgnZWNvbW1lcmNlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fZ2FxLCAncHVzaCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgc2ltcGxlIGVjb21tZXJjZSBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHsgb3JkZXJJZDogJzA3ODc4MWM3JyB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KDMgPT0gd2luZG93Ll9nYXEucHVzaC5hcmdzLmxlbmd0aCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCgnX2FkZFRyYW5zJyA9PSB3aW5kb3cuX2dhcS5wdXNoLmFyZ3NbMF1bMF1bMF0pO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwoWydfc2V0JywgJ2N1cnJlbmN5Q29kZScsICdVU0QnXSwgd2luZG93Ll9nYXEucHVzaC5hcmdzWzFdWzBdKTtcbiAgICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCdfdHJhY2tUcmFucycgPT0gd2luZG93Ll9nYXEucHVzaC5hcmdzWzJdWzBdWzBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGVjb21tZXJjZSBkYXRhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHtcbiAgICAgICAgICAgIG9yZGVySWQ6ICdhZjVjY2Q3MycsXG4gICAgICAgICAgICB0b3RhbDogOTkuOTksXG4gICAgICAgICAgICBzaGlwcGluZzogMTMuOTksXG4gICAgICAgICAgICB0YXg6IDIwLjk5LFxuICAgICAgICAgICAgcHJvZHVjdHM6IFt7XG4gICAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgICBwcmljZTogMjQuNzUsXG4gICAgICAgICAgICAgIG5hbWU6ICdteSBwcm9kdWN0JyxcbiAgICAgICAgICAgICAgc2t1OiAncC0yOTgnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIHF1YW50aXR5OiAzLFxuICAgICAgICAgICAgICBwcmljZTogMjQuNzUsXG4gICAgICAgICAgICAgIG5hbWU6ICdvdGhlciBwcm9kdWN0JyxcbiAgICAgICAgICAgICAgc2t1OiAncC0yOTknXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuX2dhcS5wdXNoLmFyZ3NbMF0sIFtbXG4gICAgICAgICAgICAnX2FkZFRyYW5zJyxcbiAgICAgICAgICAgICdhZjVjY2Q3MycsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICA5OS45OSxcbiAgICAgICAgICAgIDIwLjk5LFxuICAgICAgICAgICAgMTMuOTksXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG51bGxcbiAgICAgICAgICBdXSk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fZ2FxLnB1c2guYXJnc1sxXSwgW1tcbiAgICAgICAgICAgICdfYWRkSXRlbScsXG4gICAgICAgICAgICAnYWY1Y2NkNzMnLFxuICAgICAgICAgICAgJ3AtMjk4JyxcbiAgICAgICAgICAgICdteSBwcm9kdWN0JyxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIDI0Ljc1LFxuICAgICAgICAgICAgMSxcbiAgICAgICAgICBdXSk7XG5cbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fZ2FxLnB1c2guYXJnc1syXSwgW1tcbiAgICAgICAgICAgICdfYWRkSXRlbScsXG4gICAgICAgICAgICAnYWY1Y2NkNzMnLFxuICAgICAgICAgICAgJ3AtMjk5JyxcbiAgICAgICAgICAgICdvdGhlciBwcm9kdWN0JyxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIDI0Ljc1LFxuICAgICAgICAgICAgM1xuICAgICAgICAgIF1dKTtcblxuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9nYXEucHVzaC5hcmdzWzNdLCBbW1xuICAgICAgICAgICAgJ19zZXQnLFxuICAgICAgICAgICAgJ2N1cnJlbmN5Q29kZScsXG4gICAgICAgICAgICAnVVNEJ1xuICAgICAgICAgIF1dKTtcblxuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9nYXEucHVzaC5hcmdzWzRdLCBbW1xuICAgICAgICAgICAgJ190cmFja1RyYW5zJ1xuICAgICAgICAgIF1dKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBmYWxsYmFjayB0byByZXZlbnVlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHtcbiAgICAgICAgICAgIG9yZGVySWQ6ICdmMmZmZWU1YycsXG4gICAgICAgICAgICByZXZlbnVlOiA5LFxuICAgICAgICAgICAgc2hpcHBpbmc6IDMsXG4gICAgICAgICAgICB0YXg6IDIsXG4gICAgICAgICAgICBwcm9kdWN0czogW11cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9nYXEucHVzaC5hcmdzWzBdLCBbW1xuICAgICAgICAgICAgJ19hZGRUcmFucycsXG4gICAgICAgICAgICAnZjJmZmVlNWMnLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgOSxcbiAgICAgICAgICAgIDIsXG4gICAgICAgICAgICAzLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBudWxsXG4gICAgICAgICAgXV0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdHb29nbGUgVGFnIE1hbmFnZXInLCBmdW5jdGlvbigpe1xuICB2YXIgR1RNID0gcGx1Z2luO1xuICB2YXIgZ3RtO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBjb250YWluZXJJZDogJ0dUTS1LNUY3OEwnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgZ3RtID0gbmV3IEdUTShvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoZ3RtKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBndG0ucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc3RvcmUgdGhlIGNvcnJlY3Qgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKEdUTSwgaW50ZWdyYXRpb24oJ0dvb2dsZSBUYWcgTWFuYWdlcicpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ2RhdGFMYXllcicpXG4gICAgICAub3B0aW9uKCdjb250YWluZXJJZCcsICcnKVxuICAgICAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSlcbiAgICAgIC5vcHRpb24oJ3RyYWNrQ2F0ZWdvcml6ZWRQYWdlcycsIHRydWUpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoZ3RtLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwdXNoIGluaXRpYWwgZ3RtLnN0YXJ0IGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgIHZhciBkbCA9IHdpbmRvdy5kYXRhTGF5ZXI7XG4gICAgICBhbmFseXRpY3MuYXNzZXJ0KGRsKTtcbiAgICAgIGFuYWx5dGljcy5hc3NlcnQoJ2d0bS5qcycgPT0gZGxbMF0uZXZlbnQpO1xuICAgICAgYW5hbHl0aWNzLmFzc2VydCgnbnVtYmVyJyA9PSB0eXBlb2YgZGxbMF1bJ2d0bS5zdGFydCddKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuZGF0YUxheWVyLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnc29tZS1ldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5kYXRhTGF5ZXIucHVzaCwgeyBldmVudDogJ3NvbWUtZXZlbnQnIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBldmVudCB3aXRoIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyBwcm9wOiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5kYXRhTGF5ZXIucHVzaCwgeyBldmVudDogJ2V2ZW50JywgcHJvcDogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LmRhdGFMYXllciwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB0cmFjayB1bmFtZWQgcGFnZXMgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5kYXRhTGF5ZXIucHVzaCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayB1bmFtZWQgcGFnZXMgaWYgZW5hYmxlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGd0bS5vcHRpb25zLnRyYWNrQWxsUGFnZXMgPSB0cnVlO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5kYXRhTGF5ZXIucHVzaCwge1xuICAgICAgICAgIGV2ZW50OiAnTG9hZGVkIGEgUGFnZScsXG4gICAgICAgICAgcGF0aDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICAgIHJlZmVycmVyOiBkb2N1bWVudC5yZWZlcnJlcixcbiAgICAgICAgICB0aXRsZTogZG9jdW1lbnQudGl0bGUsXG4gICAgICAgICAgc2VhcmNoOiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLFxuICAgICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJykgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBuYW1lZCBwYWdlcyBieSBkZWZhdWx0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuZGF0YUxheWVyLnB1c2gsIHtcbiAgICAgICAgICBldmVudDogJ1ZpZXdlZCBOYW1lIFBhZ2UnLFxuICAgICAgICAgIG5hbWU6ICdOYW1lJyxcbiAgICAgICAgICBwYXRoOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgICAgcmVmZXJyZXI6IGRvY3VtZW50LnJlZmVycmVyLFxuICAgICAgICAgIHRpdGxlOiBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICBzZWFyY2g6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gsXG4gICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKSArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIG5hbWVkIHBhZ2VzIHdpdGggYSBjYXRlZ29yeSBhZGRlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJylcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuZGF0YUxheWVyLnB1c2gsIHtcbiAgICAgICAgICBldmVudDogJ1ZpZXdlZCBDYXRlZ29yeSBOYW1lIFBhZ2UnLFxuICAgICAgICAgIGNhdGVnb3J5OiAnQ2F0ZWdvcnknLFxuICAgICAgICAgIG5hbWU6ICdOYW1lJyxcbiAgICAgICAgICBwYXRoOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgICAgcmVmZXJyZXI6IGRvY3VtZW50LnJlZmVycmVyLFxuICAgICAgICAgIHRpdGxlOiBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICBzZWFyY2g6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gsXG4gICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKSArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIGNhdGVnb3JpemVkIHBhZ2VzIGJ5IGRlZmF1bHQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnQ2F0ZWdvcnknLCAnTmFtZScpXG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmRhdGFMYXllci5wdXNoLCB7XG4gICAgICAgICAgZXZlbnQ6ICdWaWV3ZWQgQ2F0ZWdvcnkgTmFtZSBQYWdlJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ0NhdGVnb3J5JyxcbiAgICAgICAgICBuYW1lOiAnTmFtZScsXG4gICAgICAgICAgcGF0aDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICAgIHJlZmVycmVyOiBkb2N1bWVudC5yZWZlcnJlcixcbiAgICAgICAgICB0aXRsZTogZG9jdW1lbnQudGl0bGUsXG4gICAgICAgICAgc2VhcmNoOiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLFxuICAgICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJykgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgdHJhY2sgbmFtZSBvciBjYXRlZ29yaXplZCBwYWdlcyBpZiBkaXNhYmxlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGd0bS5vcHRpb25zLnRyYWNrTmFtZWRQYWdlcyA9IGZhbHNlO1xuICAgICAgICBndG0ub3B0aW9ucy50cmFja0NhdGVnb3JpemVkUGFnZXMgPSBmYWxzZTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93LmRhdGFMYXllci5wdXNoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbmRlc2NyaWJlKCdHb1NxdWFyZWQnLCBmdW5jdGlvbigpe1xuICB2YXIgR29TcXVhcmVkID0gcGx1Z2luO1xuICB2YXIgZ29zcXVhcmVkO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBzaXRlVG9rZW46ICd4J1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGdvc3F1YXJlZCA9IG5ldyBHb1NxdWFyZWQob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGdvc3F1YXJlZCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgZ29zcXVhcmVkLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShHb1NxdWFyZWQsIGludGVncmF0aW9uKCdHb1NxdWFyZWQnKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdfZ3MnKVxuICAgICAgLm9wdGlvbignc2l0ZVRva2VuJywgJycpXG4gICAgICAub3B0aW9uKCdhbm9ueW1pemVJUCcsIGZhbHNlKVxuICAgICAgLm9wdGlvbignY29va2llRG9tYWluJywgbnVsbClcbiAgICAgIC5vcHRpb24oJ3VzZUNvb2tpZXMnLCB0cnVlKVxuICAgICAgLm9wdGlvbigndHJhY2tIYXNoJywgZmFsc2UpXG4gICAgICAub3B0aW9uKCd0cmFja0xvY2FsJywgZmFsc2UpXG4gICAgICAub3B0aW9uKCd0cmFja1BhcmFtcycsIHRydWUpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1Yihnb3NxdWFyZWQsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRoZSBfZ3MgZ2xvYmFsJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Ll9ncyk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQodHlwZW9mIHdpbmRvdy5fZ3MgPT09ICdmdW5jdGlvbicpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoZ29zcXVhcmVkLmxvYWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgY29uZmlndXJlIHRoZSBzaXRlIHRva2VuJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LCAnX2dzJyk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9ncywgb3B0aW9ucy5zaXRlVG9rZW4pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY29uZmlndXJlIGFsbCBkZWZhdWx0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdywgJ19ncycpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBlYWNoKGdvc3F1YXJlZC5vcHRpb25zLCBmdW5jdGlvbihuYW1lLCB2YWx1ZSl7XG4gICAgICAgICAgaWYgKCdzaXRlVG9rZW4nID09IG5hbWUpIHJldHVybjtcbiAgICAgICAgICBpZiAobnVsbCA9PSB2YWx1ZSkgcmV0dXJuO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9ncywgJ3NldCcsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoZ29zcXVhcmVkLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LCAnX2dzJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgcGF0aCBhbmQgdGl0bGUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSh7IHBhdGg6ICcvcGF0aCcsIHRpdGxlOiAndGl0bGUnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZ3MsICd0cmFjaycsICcvcGF0aCcsICd0aXRsZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHJlZmVyIGEgbmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCduYW1lJywgeyBwYXRoOiAnL3BhdGgnLCB0aXRsZTogJ3RpdGxlJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2dzLCAndHJhY2snLCAnL3BhdGgnLCAnbmFtZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHJlZmVyIGEgbmFtZSBhbmQgY2F0ZWdvcnknLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnY2F0ZWdvcnknLCAnbmFtZScsIHsgcGF0aDogJy9wYXRoJywgdGl0bGU6ICd0aXRsZScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9ncywgJ3RyYWNrJywgJy9wYXRoJywgJ2NhdGVnb3J5IG5hbWUnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdywgJ19ncycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2V0IGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZ3MsICdzZXQnLCAndmlzaXRvcklEJywgJ2lkJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZXQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9ncywgJ3NldCcsICd2aXNpdG9yJywgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNldCBhbiBpZCBhbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9ncywgJ3NldCcsICd2aXNpdG9ySUQnLCAnaWQnKVxuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZ3MsICdzZXQnLCAndmlzaXRvcicsIHtcbiAgICAgICAgICB1c2VySUQ6ICdpZCcsXG4gICAgICAgICAgdHJhaXQ6IHRydWUsXG4gICAgICAgICAgaWQ6ICdpZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwcmVmZXIgYW4gZW1haWwgZm9yIHZpc2l0b3IgbmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7XG4gICAgICAgICAgZW1haWw6ICdlbWFpbEBleGFtcGxlLmNvbScsXG4gICAgICAgICAgdXNlcm5hbWU6ICd1c2VybmFtZSdcbiAgICAgICAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9ncywgJ3NldCcsICd2aXNpdG9yTmFtZScsICdlbWFpbEBleGFtcGxlLmNvbScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWxzbyBwcmVmZXIgYSB1c2VybmFtZSBmb3IgdmlzaXRvciBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdXNlcm5hbWU6ICd1c2VybmFtZScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9ncywgJ3NldCcsICd2aXNpdG9yTmFtZScsICd1c2VybmFtZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LCAnX2dzJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fZ3MsICdldmVudCcsICdldmVudCcsIHt9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQgYW5kIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2dzLCAnZXZlbnQnLCAnZXZlbnQnLCB7IHByb3BlcnR5OiB0cnVlIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZWNvbW1lcmNlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LCAnX2dzJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgdHJhbnNhY3Rpb24nLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHtcbiAgICAgICAgICBpZDogJ2E5MTczOTkxJyxcbiAgICAgICAgICB0b3RhbDogOTAsXG4gICAgICAgICAgcXVhbnRpdHk6IDEwLFxuICAgICAgICAgIHByb2R1Y3RzOiBbe1xuICAgICAgICAgICAgY2F0ZWdvcnk6ICdteSBjYXRlZ29yeScsXG4gICAgICAgICAgICBuYW1lOiAnbXktcHJvZHVjdCcsXG4gICAgICAgICAgICBxdWFudGl0eTogMTAsXG4gICAgICAgICAgICBwcmljZTogOVxuICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9ncywgJ3RyYW5zYWN0aW9uJywgJ2E5MTczOTkxJywge1xuICAgICAgICAgIHJldmVudWU6IDkwLFxuICAgICAgICAgIHRyYWNrOiB0cnVlXG4gICAgICAgIH0sIFt7XG4gICAgICAgICAgbmFtZTogJ215LXByb2R1Y3QnLFxuICAgICAgICAgIGNhdGVnb3J5OiAnbXkgY2F0ZWdvcnknLFxuICAgICAgICAgIHF1YW50aXR5OiAxMCxcbiAgICAgICAgICBwcmljZTogOVxuICAgICAgICB9XSk7XG4gICAgICB9KVxuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdlYWNoJyk7XG5cbmRlc2NyaWJlKCdIZWFwJywgZnVuY3Rpb24oKXtcbiAgdmFyIEhlYXAgPSBwbHVnaW47XG4gIHZhciBoZWFwO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBhcHBJZDogJ3gnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgaGVhcCA9IG5ldyBIZWFwKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChoZWFwKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBoZWFwLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShIZWFwLCBpbnRlZ3JhdGlvbignSGVhcCcpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ2hlYXAnKVxuICAgICAgLmdsb2JhbCgnX2hlYXBpZCcpXG4gICAgICAub3B0aW9uKCdhcHBJZCcsICcnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoaGVhcCwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuaGVhcCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy5oZWFwKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuaGVhcCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzdHViIHdpbmRvdy5oZWFwIHdpdGggdGhlIHJpZ2h0IG1ldGhvZHMnLCBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgbWV0aG9kcyA9IFsnaWRlbnRpZnknLCAndHJhY2snXTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93LmhlYXApO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBlYWNoKG1ldGhvZHMsIGZ1bmN0aW9uKG1ldGhvZCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuaGVhcFttZXRob2RdKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZXQgd2luZG93Ll9oZWFwaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCF3aW5kb3cuX2hlYXBpZCk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Ll9oZWFwaWQgPT09IG9wdGlvbnMuYXBwSWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoaGVhcC5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChoZWFwLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5oZWFwLCAnaWRlbnRpZnknKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmhlYXAuaWRlbnRpZnksIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIHVzZXJuYW1lIGFzIGhhbmRsZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IHVzZXJuYW1lOiAndXNlcm5hbWUnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5oZWFwLmlkZW50aWZ5LCB7IGhhbmRsZTogJ3VzZXJuYW1lJyB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgaWQgYXMgaGFuZGxlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5oZWFwLmlkZW50aWZ5LCB7IGhhbmRsZTogJ2lkJywgaWQ6ICdpZCcgfSk7XG4gICAgICB9KVxuXG4gICAgICBpdCgnc2hvdWxkIHByZWZlciB1c2VybmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHVzZXJuYW1lOiAnYmF6JyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuaGVhcC5pZGVudGlmeSwgeyBoYW5kbGU6ICdiYXonLCBpZDogJ2lkJyB9KTtcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LmhlYXAsICd0cmFjaycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuaGVhcC50cmFjaywgJ2V2ZW50Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50IGFuZCBwcm9wZXJ0aWVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgcHJvcGVydHk6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmhlYXAudHJhY2ssICdldmVudCcsIHsgcHJvcGVydHk6IHRydWUgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0hlbGxvYmFyJywgZnVuY3Rpb24oKXtcbiAgdmFyIEhlbGxvYmFyID0gcGx1Z2luO1xuICB2YXIgaGVsbG9iYXI7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFwaUtleTogJ2JiOTAwNjY1YTMwOTBhNzllZTFkYjk4YzNhZjIxZWExNzRiYmMwOWYnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgaGVsbG9iYXIgPSBuZXcgSGVsbG9iYXIob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGhlbGxvYmFyKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBoZWxsb2Jhci5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgYWZ0ZXIoZnVuY3Rpb24oKXtcbiAgICByZXNldCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShIZWxsb2JhciwgaW50ZWdyYXRpb24oJ0hlbGxvIEJhcicpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ19oYnEnKVxuICAgICAgLm9wdGlvbignYXBpS2V5JywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihoZWxsb2JhciwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgICAgcmVzZXQoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB0aGUgd2luZG93Ll9oYnEgb2JqZWN0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh0eXBlb2Yod2luZG93Ll9oYnEpID09PSAndW5kZWZpbmVkJyk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Ll9oYnEpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoaGVsbG9iYXIubG9hZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoaGVsbG9iYXIsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5mdW5jdGlvbiByZXNldCgpIHtcbiAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlbGxvYmFyX2NvbnRhaW5lcicpO1xuICBpZiAoZWwpIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xufSIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnSGl0VGFpbCcsIGZ1bmN0aW9uKCl7XG4gIHZhciBIaXRUYWlsID0gcGx1Z2luO1xuICB2YXIgaGl0dGFpbDtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgc2l0ZUlkOiAneCdcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBoaXR0YWlsID0gbmV3IEhpdFRhaWwob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGhpdHRhaWwpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGhpdHRhaWwucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKEhpdFRhaWwsIGludGVncmF0aW9uKCdIaXRUYWlsJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnaHRrJylcbiAgICAgIC5vcHRpb24oJ3NpdGVJZCcsICcnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGhpdHRhaWwsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnSHViU3BvdCcsIGZ1bmN0aW9uKCl7XG4gIHZhciBIdWJTcG90ID0gcGx1Z2luO1xuICB2YXIgaHVic3BvdDtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgcG9ydGFsSWQ6IDYyNTE1XG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgaHVic3BvdCA9IG5ldyBIdWJTcG90KG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChodWJzcG90KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBodWJzcG90LnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShIdWJTcG90LCBpbnRlZ3JhdGlvbignSHViU3BvdCcpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ19oc3EnKVxuICAgICAgLm9wdGlvbigncG9ydGFsSWQnLCBudWxsKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoaHVic3BvdCwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuX2hzcScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy5faHNxKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX2hzcSBpbnN0YW5jZW9mIEFycmF5KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChodWJzcG90LCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5faHNxLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHNlbmQgdHJhaXRzIHdpdGhvdXQgYW4gZW1haWwnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5faHNxLnB1c2gpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCB0cmFpdHMgd2l0aCBhbiBlbWFpbCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9oc3EucHVzaCwgWydpZGVudGlmeScsIHsgZW1haWw6ICduYW1lQGV4YW1wbGUuY29tJyB9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkIGFuZCB0cmFpdHMgd2l0aCBhbiBlbWFpbCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9oc3EucHVzaCwgWydpZGVudGlmeScsIHtcbiAgICAgICAgICBpZDogJ2lkJyxcbiAgICAgICAgICBlbWFpbDogJ25hbWVAZXhhbXBsZS5jb20nXG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNvbnZlcnQgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoe1xuICAgICAgICAgIGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScsXG4gICAgICAgICAgZGF0ZTogZGF0ZVxuICAgICAgICB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2hzcS5wdXNoLCBbJ2lkZW50aWZ5Jywge1xuICAgICAgICAgIGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScsXG4gICAgICAgICAgZGF0ZTogZGF0ZS5nZXRUaW1lKClcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9oc3EsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5faHNxLnB1c2gsIFsndHJhY2tFdmVudCcsICdldmVudCcsIHt9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50IGFuZCBwcm9wZXJ0aWVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgcHJvcGVydHk6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9oc3EucHVzaCwgWyd0cmFja0V2ZW50JywgJ2V2ZW50JywgeyBwcm9wZXJ0eTogdHJ1ZSB9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb252ZXJ0IGRhdGVzIHRvIG1pbGxpc2Vjb25kcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIG1zID0gZGF0ZS5nZXRUaW1lKCk7XG5cbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgZGF0ZTogZGF0ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2hzcS5wdXNoLCBbJ3RyYWNrRXZlbnQnLCAnZXZlbnQnLCB7IGRhdGU6IG1zIH1dKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9oc3EsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgcGFnZSB2aWV3JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2hzcS5wdXNoLCBbJ190cmFja1BhZ2V2aWV3J10pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiXHJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcclxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XHJcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XHJcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xyXG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xyXG5cclxuZGVzY3JpYmUoJ0ltcHJvdmVseScsIGZ1bmN0aW9uKCl7XHJcbiAgdmFyIEltcHJvdmVseSA9IHBsdWdpbjtcclxuICB2YXIgaW1wcm92ZWx5O1xyXG4gIHZhciBhbmFseXRpY3M7XHJcbiAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICBkb21haW46ICdkZW1vJyxcclxuICAgIHByb2plY3RJZDogMVxyXG4gIH07XHJcblxyXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcclxuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XHJcbiAgICBpbXByb3ZlbHkgPSBuZXcgSW1wcm92ZWx5KG9wdGlvbnMpO1xyXG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xyXG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xyXG4gICAgYW5hbHl0aWNzLmFkZChpbXByb3ZlbHkpO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcclxuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XHJcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcclxuICAgIGltcHJvdmVseS5yZXNldCgpO1xyXG4gICAgc2FuZGJveCgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcclxuICAgIGFuYWx5dGljcy5jb21wYXJlKEltcHJvdmVseSwgaW50ZWdyYXRpb24oJ0ltcHJvdmVseScpXHJcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxyXG4gICAgICAuZ2xvYmFsKCdfaW1wcm92ZWx5JylcclxuICAgICAgLmdsb2JhbCgnaW1wcm92ZWx5JylcclxuICAgICAgLm9wdGlvbignZG9tYWluJywgJycpXHJcbiAgICAgIC5vcHRpb24oJ3Byb2plY3RJZCcsIG51bGwpKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcclxuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgYW5hbHl0aWNzLnN0dWIoaW1wcm92ZWx5LCAnbG9hZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcclxuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2luZG93Ll9pbXByb3ZlbHknLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy5faW1wcm92ZWx5KTtcclxuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XHJcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX2ltcHJvdmVseSBpbnN0YW5jZW9mIEFycmF5KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuaW1wcm92ZWx5JywgZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCF3aW5kb3cuaW1wcm92ZWx5KTtcclxuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XHJcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuaW1wcm92ZWx5KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGluaXQgd2l0aCBhIGRvbWFpbiBhbmQgcHJvamVjdCBpZCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcclxuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xyXG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9pbXByb3ZlbHlbMF0sIFsnaW5pdCcsIG9wdGlvbnMuZG9tYWluLCBvcHRpb25zLnByb2plY3RJZF0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcclxuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xyXG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoaW1wcm92ZWx5LmxvYWQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XHJcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcclxuICAgICAgYW5hbHl0aWNzLmxvYWQoaW1wcm92ZWx5LCBkb25lKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XHJcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xyXG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcclxuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcclxuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCcjaWRlbnRpZnknLCBmdW5jdGlvbigpe1xyXG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LmltcHJvdmVseSwgJ2xhYmVsJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XHJcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuaW1wcm92ZWx5LmxhYmVsLCAnaWQnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIG5vdCBzZW5kIGlmIGlkIGlzIGVtcHR5JywgZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoKTtcclxuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cuaW1wcm92ZWx5LmxhYmVsKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5pbXByb3ZlbHksICdnb2FsJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50JywgZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50Jyk7XHJcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuaW1wcm92ZWx5LmdvYWwsIHsgdHlwZTogJ2V2ZW50JyB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQgYW5kIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHByb3BlcnR5OiB0cnVlIH0pO1xyXG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmltcHJvdmVseS5nb2FsLCB7XHJcbiAgICAgICAgICB0eXBlOiAnZXZlbnQnLFxyXG4gICAgICAgICAgcHJvcGVydHk6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGFsaWFzIHJldmVudWUgdG8gYW1vdW50JywgZnVuY3Rpb24oKXtcclxuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyByZXZlbnVlOiA0Mi45OSB9KTtcclxuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5pbXByb3ZlbHkuZ29hbCwge1xyXG4gICAgICAgICAgdHlwZTogJ2V2ZW50JyxcclxuICAgICAgICAgIGFtb3VudDogNDIuOTlcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7IiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdJbnNpZGVWYXVsdCcsIGZ1bmN0aW9uKCl7XG4gIHZhciBJbnNpZGVWYXVsdCA9IHBsdWdpbjtcbiAgdmFyIGl2O1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBjbGllbnRJZDogJ3Rlc3QxNycsXG4gICAgZG9tYWluOiAndGVzdGRvbWFpbi5jb20nLFxuICAgIGV2ZW50czoge1xuICAgICAgJ3NpZ24gdXAnOiAnZXZlbnQxJyxcbiAgICAgICdjb21wbGV0ZWQgb3JkZXInOiAnZXZlbnQyJ1xuICAgIH1cbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBpdiA9IG5ldyBJbnNpZGVWYXVsdChvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoaXYpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGl2LnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShJbnNpZGVWYXVsdCwgaW50ZWdyYXRpb24oJ0luc2lkZVZhdWx0JylcbiAgICAgIC5nbG9iYWwoJ19pdmEnKVxuICAgICAgLm9wdGlvbignY2xpZW50SWQnLCAnJylcbiAgICAgIC5vcHRpb24oJ2RvbWFpbicsICcnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoaXYsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2luZG93Ll9pdmEgYW5kIGNhbGwgbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Ll9pdmEgaW5zdGFuY2VvZiBBcnJheSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoaXYubG9hZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwYXNzIGluIGNsaWVudElkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgd2luZG93Ll9pdmEgPSBbXTtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9pdmEsICdwdXNoJyk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9pdmEucHVzaCwgWydzZXRDbGllbnRJZCcsIGl2Lm9wdGlvbnMuY2xpZW50SWRdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHBhc3MgaW4gdXNlcklkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgd2luZG93Ll9pdmEgPSBbXTtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9pdmEsICdwdXNoJyk7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgndXNlci1pZCcpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5faXZhLnB1c2gsIFsnc2V0VXNlcklkJywgJ3VzZXItaWQnXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwYXNzIGluIGRvbWFpbiBpZiBwcmVzZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgd2luZG93Ll9pdmEgPSBbXTtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9pdmEsICdwdXNoJyk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9pdmEucHVzaCwgWydzZXREb21haW4nLCBpdi5vcHRpb25zLmRvbWFpbl0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHBhc3MgaW4gZG9tYWluIGlmIGJsYW5rJywgZnVuY3Rpb24oKXtcbiAgICAgICAgd2luZG93Ll9pdmEgPSBbXTtcbiAgICAgICAgaXYub3B0aW9ucy5kb21haW4gPSBudWxsO1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX2l2YSwgJ3B1c2gnKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Ll9pdmEucHVzaCwgWydzZXREb21haW4nLCBpdi5vcHRpb25zLmRvbWFpbl0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGl2LCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9pdmEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIFwiY2xpY2tcIiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9pdmEucHVzaCwgWyd0cmFja0V2ZW50JywgJ2NsaWNrJ10pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9pdmEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnc2lnbiB1cCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5faXZhLnB1c2gsIFsndHJhY2tFdmVudCcsICdldmVudDEnLCAwLCAnJ10pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgYW4gZXZlbnQgd2l0aCByZXZlbnVlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7IHJldmVudWU6ICcwLjc1JyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2l2YS5wdXNoLCBbJ3RyYWNrRXZlbnQnLCAnZXZlbnQyJywgMC43NSwgJyddKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIGFuIGV2ZW50IHdpdGggdmFsdWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2NvbXBsZXRlZCBvcmRlcicsIHsgdmFsdWU6IDEuMjMgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9pdmEucHVzaCwgWyd0cmFja0V2ZW50JywgJ2V2ZW50MicsIDEuMjMsICcnXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBhbiBldmVudCB3aXRoIHJldmVudWUgYW5kIG9yZGVyIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7IHJldmVudWU6ICc4OS43Jywgb3JkZXJJZDogJ2FiYzEyMycgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9pdmEucHVzaCwgWyd0cmFja0V2ZW50JywgJ2V2ZW50MicsIDg5LjcsICdhYmMxMjMnXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBhbiBldmVudCB3aXRoIHVzZXJJZCBhbmQgb3JkZXJJZCwgdXNpbmcgb3JkZXJJZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7IG9yZGVySWQ6ICdhYmMxMjMnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5faXZhLnB1c2gsIFsndHJhY2tFdmVudCcsICdldmVudDInLCAwLCAnYWJjMTIzJ10pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZmFsbCBiYWNrIHRvIHVzZXJJZCBpZiBubyBvcmRlcklkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ3NpZ24gdXAnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2l2YS5wdXNoLCBbJ3RyYWNrRXZlbnQnLCAnZXZlbnQxJywgMCwgJ2lkJ10pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgbXVsdGlwbGUgZXZlbnRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgaXYub3B0aW9ucy5ldmVudHMgPSBbXG4gICAgICAgICAgeyBrZXk6ICdjb21wbGV0ZWQgb3JkZXInLCB2YWx1ZTogJ2V2ZW50MScgfSxcbiAgICAgICAgICB7IGtleTogJ2NvbXBsZXRlZCBvcmRlcicsIHZhbHVlOiAnZXZlbnQyJyB9XG4gICAgICAgIF07XG5cbiAgICAgICAgd2luZG93Ll9pdmEgPSBbXTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7IG9yZGVySWQ6ICdpZCcsIHJldmVudWU6IDkuOTkgfSk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQuZGVlcEVxdWFsKHdpbmRvdy5faXZhLCBbXG4gICAgICAgICAgWyd0cmFja0V2ZW50JywgJ2V2ZW50MScsIDkuOTksICdpZCddLFxuICAgICAgICAgIFsndHJhY2tFdmVudCcsICdldmVudDInLCA5Ljk5LCAnaWQnXVxuICAgICAgICBdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB0cmFjayBhIFwic2FsZVwiIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdzYWxlJyk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5faXZhLnB1c2gpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHRyYWNrIHVubWFwcGVkIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cuX2l2YS5wdXNoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdJbnNwZWN0bGV0JywgZnVuY3Rpb24oKXtcbiAgdmFyIEluc3BlY3RsZXQgPSBwbHVnaW47XG4gIHZhciBpbnNwZWN0bGV0O1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICB3aWQ6ICd4J1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGluc3BlY3RsZXQgPSBuZXcgSW5zcGVjdGxldChvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoaW5zcGVjdGxldCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgaW5zcGVjdGxldC5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoSW5zcGVjdGxldCwgaW50ZWdyYXRpb24oJ0luc3BlY3RsZXQnKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdfX2luc3AnKVxuICAgICAgLmdsb2JhbCgnX19pbnNwXycpXG4gICAgICAub3B0aW9uKCd3aWQnLCAnJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGluc3BlY3RsZXQsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgdGhlIGluc3BlY3RsZXQgcXVldWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCF3aW5kb3cuX19pbnNwKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX19pbnNwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHB1c2ggdGhlIHdpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9faW5zcCwgW1snd2lkJywgb3B0aW9ucy53aWRdXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChpbnNwZWN0bGV0LmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGluc3BlY3RsZXQsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9faW5zcCwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGlkZW50aWZ5IHRoZSB1c2VyJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCd1c2VySWQnLCB7IGVtYWlsOiAnZW1haWxAZXhhbXBsZS5jb20nIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fX2luc3AucHVzaCwgWyd0YWdTZXNzaW9uJywge1xuICAgICAgICAgIGVtYWlsOiAnZW1haWxAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHVzZXJpZDogJ3VzZXJJZCdcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9faW5zcCwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRhZyB0aGUgc2Vzc2lvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX19pbnNwLnB1c2gsIFsndGFnU2Vzc2lvbicsICdldmVudCddKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9faW5zcCwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgb25seSBvbiAybmQgcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5fX2luc3AucHVzaCwgWyd2aXJ0dWFsUGFnZSddKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX19pbnNwLnB1c2gsIFsndmlydHVhbFBhZ2UnXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnSW50ZXJjb20nLCBmdW5jdGlvbigpe1xuICB2YXIgSW50ZXJjb20gPSBwbHVnaW47XG4gIHZhciBpbnRlcmNvbTtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgYXBwSWQ6ICc4Y2Y5MzM4ZGY5NjI1Y2JlNjgxMWExNmQ1NzNhNzliMGM4YThmYTg2J1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGludGVyY29tID0gbmV3IEludGVyY29tKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChpbnRlcmNvbSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgaW50ZXJjb20ucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKEludGVyY29tLCBpbnRlZ3JhdGlvbignSW50ZXJjb20nKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdJbnRlcmNvbScpXG4gICAgICAub3B0aW9uKCdhY3RpdmF0b3InLCAnI0ludGVyY29tRGVmYXVsdFdpZGdldCcpXG4gICAgICAub3B0aW9uKCdhcHBJZCcsICcnKVxuICAgICAgLm9wdGlvbignaW5ib3gnLCBmYWxzZSkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGludGVyY29tLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoaW50ZXJjb20ubG9hZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoaW50ZXJjb20sIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3BhZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3csICdJbnRlcmNvbScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCB1cGRhdGUgb24gc3Vic2VxdWVudCBwYWdldmlld3MnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5JbnRlcmNvbSwgJ3VwZGF0ZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LCAnSW50ZXJjb20nKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgYm9vdCB0aGUgZmlyc3QgdGltZSBhbmQgdXBkYXRlIHRoZSBzZWNvbmQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkludGVyY29tLCAnYm9vdCcsIHtcbiAgICAgICAgICBhcHBfaWQ6IG9wdGlvbnMuYXBwSWQsXG4gICAgICAgICAgdXNlcl9pZDogJ2lkJyxcbiAgICAgICAgICBpZDogJ2lkJ1xuICAgICAgICB9KTtcblxuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkludGVyY29tLCAndXBkYXRlJywge1xuICAgICAgICAgIGFwcF9pZDogb3B0aW9ucy5hcHBJZCxcbiAgICAgICAgICB1c2VyX2lkOiAnaWQnLFxuICAgICAgICAgIGlkOiAnaWQnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCBhbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgZW1haWw6ICdlbWFpbEBleGFtcGxlLmNvbScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkludGVyY29tLCAnYm9vdCcsIHtcbiAgICAgICAgICBlbWFpbDogJ2VtYWlsQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBhcHBfaWQ6IG9wdGlvbnMuYXBwSWQsXG4gICAgICAgICAgdXNlcl9pZDogJ2lkJyxcbiAgICAgICAgICBpZDogJ2lkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgdXNlciBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgbmFtZTogJ2pvaG4gZG9lJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuSW50ZXJjb20sICdib290Jywge1xuICAgICAgICAgIGFwcF9pZDogb3B0aW9ucy5hcHBJZCxcbiAgICAgICAgICB1c2VyX2lkOiAnaWQnLFxuICAgICAgICAgIG5hbWU6ICdqb2huIGRvZScsXG4gICAgICAgICAgaWQ6ICdpZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGZpcnN0IGFuZCBsYXN0IGFzIG5hbWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBmaXJzdE5hbWU6ICdqb2huJywgbGFzdE5hbWU6ICdkb2UnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5JbnRlcmNvbSwgJ2Jvb3QnLCB7XG4gICAgICAgICAgYXBwX2lkOiBvcHRpb25zLmFwcElkLFxuICAgICAgICAgIHVzZXJfaWQ6ICdpZCcsXG4gICAgICAgICAgZmlyc3ROYW1lOiAnam9obicsXG4gICAgICAgICAgbGFzdE5hbWU6ICdkb2UnLFxuICAgICAgICAgIG5hbWU6ICdqb2huIGRvZScsXG4gICAgICAgICAgaWQ6ICdpZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXNwZWN0IC5uYW1lLCAuZmlyc3ROYW1lIGFuZCAubGFzdE5hbWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBmaXJzdE5hbWU6ICdqb2huJywgbGFzdE5hbWU6ICdkb2UnLCBuYW1lOiAnYmF6JyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuSW50ZXJjb20sICdib290Jywge1xuICAgICAgICAgIGFwcF9pZDogb3B0aW9ucy5hcHBJZCxcbiAgICAgICAgICB1c2VyX2lkOiAnaWQnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ2pvaG4nLFxuICAgICAgICAgIGxhc3ROYW1lOiAnZG9lJyxcbiAgICAgICAgICBuYW1lOiAnYmF6JyxcbiAgICAgICAgICBpZDogJ2lkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgY3JlYXRlZF9hdCBhcyBzZWNvbmRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlO1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBjcmVhdGVkOiBub3cgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkludGVyY29tLCAnYm9vdCcsIHtcbiAgICAgICAgICBhcHBfaWQ6IG9wdGlvbnMuYXBwSWQsXG4gICAgICAgICAgY3JlYXRlZF9hdDogTWF0aC5mbG9vcihub3cuZ2V0VGltZSgpIC8gMTAwMCksXG4gICAgICAgICAgdXNlcl9pZDogJ2lkJyxcbiAgICAgICAgICBpZDogJ2lkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNvbnZlcnQgZGF0ZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7XG4gICAgICAgICAgY3JlYXRlZDogZGF0ZSxcbiAgICAgICAgICBjb21wYW55OiB7IGNyZWF0ZWQ6IGRhdGUgfVxuICAgICAgICB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuSW50ZXJjb20sICdib290Jywge1xuICAgICAgICAgIGFwcF9pZDogb3B0aW9ucy5hcHBJZCxcbiAgICAgICAgICB1c2VyX2lkOiAnaWQnLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IE1hdGguZmxvb3IoZGF0ZSAvIDEwMDApLFxuICAgICAgICAgIGNvbXBhbnk6IHsgY3JlYXRlZF9hdDogTWF0aC5mbG9vcihkYXRlIC8gMTAwMCkgfSxcbiAgICAgICAgICBpZDogJ2lkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGFsbG93IHBhc3NpbmcgYSB1c2VyIGhhc2gnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywge30sIHtcbiAgICAgICAgICBJbnRlcmNvbTogeyB1c2VySGFzaDogJ3gnIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkludGVyY29tLCAnYm9vdCcsIHtcbiAgICAgICAgICBhcHBfaWQ6IG9wdGlvbnMuYXBwSWQsXG4gICAgICAgICAgdXNlcl9pZDogJ2lkJyxcbiAgICAgICAgICB1c2VyX2hhc2g6ICd4JyxcbiAgICAgICAgICBpZDogJ2lkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGFsbG93IHBhc3NpbmcgaW5jcmVtZW50cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7fSwge1xuICAgICAgICAgIEludGVyY29tOiB7IGluY3JlbWVudHM6IHsgbnVtYmVyOiA0MiB9IH1cbiAgICAgICAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkludGVyY29tLCAnYm9vdCcsIHtcbiAgICAgICAgICBhcHBfaWQ6IG9wdGlvbnMuYXBwSWQsXG4gICAgICAgICAgdXNlcl9pZDogJ2lkJyxcbiAgICAgICAgICBpbmNyZW1lbnRzOiB7IG51bWJlcjogNDIgfSxcbiAgICAgICAgICBpZDogJ2lkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgd2lkZ2V0IHNldHRpbmdzIGlmIHRoZSBhY3RpdmF0b3IgaXNudCB0aGUgZGVmYXVsdCBvbmUuJywgZnVuY3Rpb24oKXtcbiAgICAgICAgaW50ZXJjb20ub3B0aW9ucy5hY3RpdmF0b3IgPSAnI215LXdpZGdldCc7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuSW50ZXJjb20sICdib290Jywge1xuICAgICAgICAgIGFwcF9pZDogb3B0aW9ucy5hcHBJZCxcbiAgICAgICAgICB1c2VyX2lkOiAnaWQnLFxuICAgICAgICAgIGlkOiAnaWQnLFxuICAgICAgICAgIHdpZGdldDoge1xuICAgICAgICAgICAgYWN0aXZhdG9yOiAnI215LXdpZGdldCdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHNlbmQgYWN0aXZhdG9yIGlmIGl0cyB0aGUgZGVmYXVsdCBvbmUuJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5JbnRlcmNvbSwgJ2Jvb3QnLCB7XG4gICAgICAgICAgYXBwX2lkOiBvcHRpb25zLmFwcElkLFxuICAgICAgICAgIHVzZXJfaWQ6ICdpZCcsXG4gICAgICAgICAgaWQ6ICdpZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgZmFpbCB3aGVuIHRoZSBjb21wYW55IHRyYWl0IGlzIGEgc3RyaW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBjb21wYW55OiAnc3RyaW5nJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuSW50ZXJjb20sICdib290Jywge1xuICAgICAgICAgIGFwcF9pZDogb3B0aW9ucy5hcHBJZCxcbiAgICAgICAgICB1c2VyX2lkOiAnaWQnLFxuICAgICAgICAgIGlkOiAnaWQnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IGZhaWwgd2hlbiB0aGUgY29tcGFueSB0cmFpdCBpcyBhIG51bWJlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgY29tcGFueTogOTcgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkludGVyY29tLCAnYm9vdCcsIHtcbiAgICAgICAgICBhcHBfaWQ6IG9wdGlvbnMuYXBwSWQsXG4gICAgICAgICAgdXNlcl9pZDogJ2lkJyxcbiAgICAgICAgICBpZDogJ2lkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhcnJ5IG92ZXIgY29tcGFueSB0cmFpdHMgc2V0IGluIGdyb3VwIGlmIGEgY29tcGFueSB0cmFpdCBleGlzdHMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgYW5hbHl0aWNzLmdyb3VwKCkudHJhaXRzKHsgZm9vOiAnYmFyJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgY29tcGFueTogeyBuYW1lOiAnbmFtZScgfX0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5JbnRlcmNvbSwgJ2Jvb3QnLCB7XG4gICAgICAgICAgYXBwX2lkOiBvcHRpb25zLmFwcElkLFxuICAgICAgICAgIHVzZXJfaWQ6ICdpZCcsXG4gICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgY29tcGFueToge1xuICAgICAgICAgICAgbmFtZTogJ25hbWUnLFxuICAgICAgICAgICAgZm9vOiAnYmFyJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjZ3JvdXAnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3csICdJbnRlcmNvbScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5ncm91cCgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuSW50ZXJjb20sICd1cGRhdGUnLCB7IGNvbXBhbnk6IHsgaWQ6ICdpZCcgfX0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCBhbmQgcHJvcGVydGllcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5ncm91cCgnaWQnLCB7IG5hbWU6ICdOYW1lJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuSW50ZXJjb20sICd1cGRhdGUnLCB7XG4gICAgICAgICAgY29tcGFueToge1xuICAgICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgICBuYW1lOiAnTmFtZSdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LCAnSW50ZXJjb20nKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50Jyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkludGVyY29tLCAndHJhY2tFdmVudCcsICdldmVudCcsIHt9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnS2VlbiBJTycsIGZ1bmN0aW9uKCl7XG4gIHZhciBLZWVuID0gcGx1Z2luO1xuICB2YXIga2VlbjtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgcHJvamVjdElkOiAnNTNlNDAzNzRlODYxNzAwZTc5MDAwMDAyJyxcbiAgICB3cml0ZUtleTogJ2Y0NzRjMTFiY2Y1ODEzZmFiYzkzM2QwYTFmODBmZjJlMWFjOWZmMWM5MzM4ZGNmMjcwN2JiYjhjZjY4OTcxYWU1MjRiNGNhYzhkYjVkYTU0OWFhMzM4M2Q0OTllZDRhODA5ZTJiNjI5NGQxZDA5MzgxOGQ2OTk0OTVhNDE3MWRhYjNlNmFkODZlMmMzMWQwNjYyN2YyN2FhZGI4NDMzZjQzYzhmMjdmM2UwMzU0ZTZlYTRjMTJmOWRhNTdjYTlkODQyMGIxOGM1ZTRmNzE5Mjg2YTBmYWUwODkxNGQ5YzQ0J1xuICB9O1xuICB2YXIgcmVhZEtleSA9ICdlNWNkZWU5YjczOTViMzE1YmQ4Y2M2MzVmM2IwNGZjMDc1NjFkNGU0Mjg4OWZlMWI2YWM3MTlhOWE0YjQ1NzMyYzc0NjY2NmQ4M2NlODY0NGM4YjBmMDZiODY3MTY2NjU0ZjkwMGI2N2IyNTBhZGJjMjI1YmVmYWM0YjNhMjU2MjcyOWMyZWJlYmZiZjE5YjFkMTNmNjMxYzJlZDBjOWY4ZGUwYmU3ODk3ZWRlZDg4MTAyYWJlNDM2NmM3OTA2MDExZGQ0ODA2MzFlZDliYTYwY2RlZjg0ZjkwOGFiYzg1Mic7XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAga2VlbiA9IG5ldyBLZWVuKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChrZWVuKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBrZWVuLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShLZWVuLCBpbnRlZ3JhdGlvbignS2VlbiBJTycpXG4gICAgICAuZ2xvYmFsKCdLZWVuJylcbiAgICAgIC5vcHRpb24oJ3Byb2plY3RJZCcsICcnKVxuICAgICAgLm9wdGlvbigncmVhZEtleScsICcnKVxuICAgICAgLm9wdGlvbignd3JpdGVLZXknLCAnJylcbiAgICAgIC5vcHRpb24oJ2lwQWRkb24nLCBmYWxzZSlcbiAgICAgIC5vcHRpb24oJ3VhQWRkb24nLCBmYWxzZSlcbiAgICAgIC5vcHRpb24oJ3VybEFkZG9uJywgZmFsc2UpXG4gICAgICAub3B0aW9uKCdyZWZlcnJlckFkZG9uJywgZmFsc2UpXG4gICAgICAub3B0aW9uKCd0cmFja05hbWVkUGFnZXMnLCB0cnVlKVxuICAgICAgLm9wdGlvbigndHJhY2tBbGxQYWdlcycsIGZhbHNlKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoa2VlbiwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuS2VlbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy5LZWVuKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuS2Vlbik7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb25maWd1cmUgS2VlbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwoa2Vlbi5jbGllbnQuX2NvbmZpZywge1xuICAgICAgICAgIHByb2plY3RJZDogb3B0aW9ucy5wcm9qZWN0SWQsXG4gICAgICAgICAgd3JpdGVLZXk6IG9wdGlvbnMud3JpdGVLZXksXG4gICAgICAgICAgcmVhZEtleTogJydcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zcHkoa2VlbiwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9hZCBzbGltIHZlcnNpb24gYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoa2VlbiwgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93LktlZW4uVmlzdWFsaXphdGlvbik7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2FkIGZ1bGwgdmVyc2lvbiBpZiB5b3UgaGF2ZSBhIGByZWFkS2V5YCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAga2Vlbi5vcHRpb25zLnJlYWRLZXkgPSByZWFkS2V5O1xuICAgICAgYW5hbHl0aWNzLmxvYWQoa2VlbiwgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuS2Vlbi5WaXN1YWxpemF0aW9uKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKGtlZW4uY2xpZW50LCAnYWRkRXZlbnQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB0cmFjayBhbm9ueW1vdXMgcGFnZXMgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKGtlZW4uY2xpZW50LmFkZEV2ZW50KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIGFub255bW91cyBwYWdlcyB3aGVuIHRoZSBvcHRpb24gaXMgb24nLCBmdW5jdGlvbigpe1xuICAgICAgICBrZWVuLm9wdGlvbnMudHJhY2tBbGxQYWdlcyA9IHRydWU7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoa2Vlbi5jbGllbnQuYWRkRXZlbnQsICdMb2FkZWQgYSBQYWdlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBuYW1lZCBwYWdlcyBieSBkZWZhdWx0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChrZWVuLmNsaWVudC5hZGRFdmVudCwgJ1ZpZXdlZCBOYW1lIFBhZ2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIG5hbWVkIHBhZ2VzIHdpdGggY2F0ZWdvcmllcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoa2Vlbi5jbGllbnQuYWRkRXZlbnQsICdWaWV3ZWQgQ2F0ZWdvcnkgTmFtZSBQYWdlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBjYXRlZ29yaXplZCBwYWdlcyBieSBkZWZhdWx0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChrZWVuLmNsaWVudC5hZGRFdmVudCwgJ1ZpZXdlZCBDYXRlZ29yeSBQYWdlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgdHJhY2sgYSBuYW1lZCBvciBjYXRlZ29yaXplZCBwYWdlIHdoZW4gdGhlIG9wdGlvbiBpcyBvZmYnLCBmdW5jdGlvbigpe1xuICAgICAgICBrZWVuLm9wdGlvbnMudHJhY2tOYW1lZFBhZ2VzID0gZmFsc2U7XG4gICAgICAgIGtlZW4ub3B0aW9ucy50cmFja0NhdGVnb3JpemVkUGFnZXMgPSBmYWxzZTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwoa2Vlbi5jbGllbnQuYWRkRXZlbnQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcGFzcyBwcm9wZXJ0aWVzIHRvIC5hZGRFdmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB0aW1lID0gbmV3IERhdGUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ2NhdGVnb3J5JywgJ25hbWUnLCB7IHByb3A6IHRydWUgfSwgeyB0aW1lc3RhbXA6IHRpbWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQoa2Vlbi5jbGllbnQuYWRkRXZlbnQsICdWaWV3ZWQgY2F0ZWdvcnkgbmFtZSBQYWdlJywge1xuICAgICAgICAgIHByb3A6IHRydWUsXG4gICAgICAgICAgcGF0aDogbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgICAgcmVmZXJyZXI6ICcnLFxuICAgICAgICAgIHRpdGxlOiBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICBzZWFyY2g6IGxvY2F0aW9uLnNlYXJjaCxcbiAgICAgICAgICBuYW1lOiAnbmFtZScsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdjYXRlZ29yeScsXG4gICAgICAgICAgdXJsOiBsb2NhdGlvbi5ocmVmLFxuICAgICAgICAgIGtlZW46IHtcbiAgICAgICAgICAgIHRpbWVzdGFtcDogdGltZSxcbiAgICAgICAgICAgIGFkZG9uczogW11cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIoa2Vlbi5jbGllbnQsICdhZGRFdmVudCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcGFzcyBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgdmFyIHVzZXIgPSBrZWVuLmNsaWVudC5jbGllbnQuZ2xvYmFsUHJvcGVydGllcygpLnVzZXI7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwodXNlciwgeyB1c2VySWQ6ICdpZCcsIHRyYWl0czogeyBpZDogJ2lkJyB9IH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcGFzcyBhIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICB2YXIgdXNlciA9IGtlZW4uY2xpZW50LmNsaWVudC5nbG9iYWxQcm9wZXJ0aWVzKCkudXNlcjtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh1c2VyLCB7IHRyYWl0czogeyB0cmFpdDogdHJ1ZSB9fSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwYXNzIGFuIGlkIGFuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgdmFyIHVzZXIgPSBrZWVuLmNsaWVudC5jbGllbnQuZ2xvYmFsUHJvcGVydGllcygpLnVzZXI7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwodXNlciwgeyB1c2VySWQ6ICdpZCcsIHRyYWl0czogeyB0cmFpdDogdHJ1ZSwgaWQ6ICdpZCcgfX0pO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCdhZGRvbnMnLCBmdW5jdGlvbigpe1xuICAgICAgICBpdCgnc2hvdWxkIGFkZCBpcEFkZG9uIGlmIGVuYWJsZWQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGtlZW4ub3B0aW9ucy5pcEFkZG9uID0gdHJ1ZTtcbiAgICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgICAgdmFyIHByb3BzID0ga2Vlbi5jbGllbnQuY2xpZW50Lmdsb2JhbFByb3BlcnRpZXMoKTtcbiAgICAgICAgICB2YXIgYWRkb24gPSBwcm9wcy5rZWVuLmFkZG9uc1swXTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKGFkZG9uLCB7XG4gICAgICAgICAgICBuYW1lOiAna2VlbjppcF90b19nZW8nLFxuICAgICAgICAgICAgaW5wdXQ6IHsgaXA6ICdpcF9hZGRyZXNzJyB9LFxuICAgICAgICAgICAgb3V0cHV0OiAnaXBfZ2VvX2luZm8nXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmVxdWFsKHByb3BzLmlwX2FkZHJlc3MsICcke2tlZW4uaXB9Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYWRkIHVhQWRkb24gaWYgZW5hYmxlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAga2Vlbi5vcHRpb25zLnVhQWRkb24gPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgICB2YXIgcHJvcHMgPSBrZWVuLmNsaWVudC5jbGllbnQuZ2xvYmFsUHJvcGVydGllcygpO1xuICAgICAgICAgIHZhciBhZGRvbiA9IHByb3BzLmtlZW4uYWRkb25zWzBdO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwoYWRkb24sIHtcbiAgICAgICAgICAgIG5hbWU6ICdrZWVuOnVhX3BhcnNlcicsXG4gICAgICAgICAgICBpbnB1dDogeyB1YV9zdHJpbmc6ICd1c2VyX2FnZW50JyB9LFxuICAgICAgICAgICAgb3V0cHV0OiAncGFyc2VkX3VzZXJfYWdlbnQnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmVxdWFsKHByb3BzLnVzZXJfYWdlbnQsICcke2tlZW4udXNlcl9hZ2VudH0nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBhZGQgdXJsQWRkb24gaWYgZW5hYmxlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAga2Vlbi5vcHRpb25zLnVybEFkZG9uID0gdHJ1ZTtcbiAgICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgICAgdmFyIHByb3BzID0ga2Vlbi5jbGllbnQuY2xpZW50Lmdsb2JhbFByb3BlcnRpZXMoKTtcbiAgICAgICAgICB2YXIgYWRkb24gPSBwcm9wcy5rZWVuLmFkZG9uc1swXTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKGFkZG9uLCB7XG4gICAgICAgICAgICBuYW1lOiAna2Vlbjp1cmxfcGFyc2VyJyxcbiAgICAgICAgICAgIGlucHV0OiB7IHVybDogJ3BhZ2VfdXJsJyB9LFxuICAgICAgICAgICAgb3V0cHV0OiAncGFyc2VkX3BhZ2VfdXJsJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5lcXVhbChwcm9wcy5wYWdlX3VybCwgZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYWRkIHJlZmVycmVyQWRkb24gaWYgZW5hYmxlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAga2Vlbi5vcHRpb25zLnJlZmVycmVyQWRkb24gPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgICB2YXIgcHJvcHMgPSBrZWVuLmNsaWVudC5jbGllbnQuZ2xvYmFsUHJvcGVydGllcygpO1xuICAgICAgICAgIHZhciBhZGRvbiA9IHByb3BzLmtlZW4uYWRkb25zWzBdO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwoYWRkb24sIHtcbiAgICAgICAgICAgIG5hbWU6ICdrZWVuOnJlZmVycmVyX3BhcnNlcicsXG4gICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICByZWZlcnJlcl91cmw6ICdyZWZlcnJlcl91cmwnLFxuICAgICAgICAgICAgICBwYWdlX3VybDogJ3BhZ2VfdXJsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG91dHB1dDogJ3JlZmVycmVyX2luZm8nXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmVxdWFsKHByb3BzLnJlZmVycmVyX3VybCwgZG9jdW1lbnQucmVmZXJyZXIpO1xuICAgICAgICAgIGFuYWx5dGljcy5lcXVhbChwcm9wcy5wYWdlX3VybCwgZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIoa2Vlbi5jbGllbnQsICdhZGRFdmVudCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcGFzcyBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChrZWVuLmNsaWVudC5hZGRFdmVudCwgJ2V2ZW50Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwYXNzIGFuIGV2ZW50IGFuZCBwcm9wZXJ0aWVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyBwcm9wZXJ0eTogdHJ1ZSB9LCB7IHRpbWVzdGFtcDogdGltZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChrZWVuLmNsaWVudC5hZGRFdmVudCwgJ2V2ZW50Jywge1xuICAgICAgICAgIHByb3BlcnR5OiB0cnVlLFxuICAgICAgICAgIGtlZW46IHtcbiAgICAgICAgICAgIHRpbWVzdGFtcDogdGltZSxcbiAgICAgICAgICAgIGFkZG9uczogW11cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCdhZGRvbnMnLCBmdW5jdGlvbigpe1xuICAgICAgICBpdCgnc2hvdWxkIGFkZCBpcEFkZG9uIGlmIGVuYWJsZWQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGtlZW4ub3B0aW9ucy5pcEFkZG9uID0gdHJ1ZTtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50Jyk7XG4gICAgICAgICAgdmFyIHByb3BzID0ga2Vlbi5jbGllbnQuYWRkRXZlbnQuYXJnc1swXVsxXTtcbiAgICAgICAgICB2YXIgYWRkb24gPSBwcm9wcy5rZWVuLmFkZG9uc1swXTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKGFkZG9uLCB7XG4gICAgICAgICAgICBuYW1lOiAna2VlbjppcF90b19nZW8nLFxuICAgICAgICAgICAgaW5wdXQ6IHsgaXA6ICdpcF9hZGRyZXNzJyB9LFxuICAgICAgICAgICAgb3V0cHV0OiAnaXBfZ2VvX2luZm8nXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmVxdWFsKHByb3BzLmlwX2FkZHJlc3MsICcke2tlZW4uaXB9Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYWRkIHVhQWRkb24gaWYgZW5hYmxlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAga2Vlbi5vcHRpb25zLnVhQWRkb24gPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgICB2YXIgcHJvcHMgPSBrZWVuLmNsaWVudC5hZGRFdmVudC5hcmdzWzBdWzFdO1xuICAgICAgICAgIHZhciBhZGRvbiA9IHByb3BzLmtlZW4uYWRkb25zWzBdO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwoYWRkb24sIHtcbiAgICAgICAgICAgIG5hbWU6ICdrZWVuOnVhX3BhcnNlcicsXG4gICAgICAgICAgICBpbnB1dDogeyB1YV9zdHJpbmc6ICd1c2VyX2FnZW50JyB9LFxuICAgICAgICAgICAgb3V0cHV0OiAncGFyc2VkX3VzZXJfYWdlbnQnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmVxdWFsKHByb3BzLnVzZXJfYWdlbnQsICcke2tlZW4udXNlcl9hZ2VudH0nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBhZGQgdXJsQWRkb24gaWYgZW5hYmxlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAga2Vlbi5vcHRpb25zLnVybEFkZG9uID0gdHJ1ZTtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50Jyk7XG4gICAgICAgICAgdmFyIHByb3BzID0ga2Vlbi5jbGllbnQuYWRkRXZlbnQuYXJnc1swXVsxXTtcbiAgICAgICAgICB2YXIgYWRkb24gPSBwcm9wcy5rZWVuLmFkZG9uc1swXTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKGFkZG9uLCB7XG4gICAgICAgICAgICBuYW1lOiAna2Vlbjp1cmxfcGFyc2VyJyxcbiAgICAgICAgICAgIGlucHV0OiB7IHVybDogJ3BhZ2VfdXJsJyB9LFxuICAgICAgICAgICAgb3V0cHV0OiAncGFyc2VkX3BhZ2VfdXJsJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5lcXVhbChwcm9wcy5wYWdlX3VybCwgZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYWRkIHJlZmVycmVyQWRkb24gaWYgZW5hYmxlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAga2Vlbi5vcHRpb25zLnJlZmVycmVyQWRkb24gPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgICB2YXIgcHJvcHMgPSBrZWVuLmNsaWVudC5hZGRFdmVudC5hcmdzWzBdWzFdO1xuICAgICAgICAgIHZhciBhZGRvbiA9IHByb3BzLmtlZW4uYWRkb25zWzBdO1xuICAgICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwoYWRkb24sIHtcbiAgICAgICAgICAgIG5hbWU6ICdrZWVuOnJlZmVycmVyX3BhcnNlcicsXG4gICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICByZWZlcnJlcl91cmw6ICdyZWZlcnJlcl91cmwnLFxuICAgICAgICAgICAgICBwYWdlX3VybDogJ3BhZ2VfdXJsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG91dHB1dDogJ3JlZmVycmVyX2luZm8nXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmVxdWFsKHByb3BzLnJlZmVycmVyX3VybCwgZG9jdW1lbnQucmVmZXJyZXIpO1xuICAgICAgICAgIGFuYWx5dGljcy5lcXVhbChwcm9wcy5wYWdlX3VybCwgZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnS2Vuc2hvbycsIGZ1bmN0aW9uKCl7XG4gIHZhciBLZW5zaG9vID0gcGx1Z2luO1xuICB2YXIga2Vuc2hvbztcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgY2lkOiAnZDU5MGNiM2YtZWM4MS00ZGE3LTk3ZDYtMzAxM2VjMDIwNDU1JyxcbiAgICBzdWJkb21haW46ICcxMjIzJ1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGtlbnNob28gPSBuZXcgS2Vuc2hvbyhvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoa2Vuc2hvbyk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAga2Vuc2hvby5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoS2Vuc2hvbywgaW50ZWdyYXRpb24oJ0tlbnNob28nKVxuICAgICAgLmdsb2JhbCgna190cmFja2V2ZW50JylcbiAgICAgIC5vcHRpb24oJ2NpZCcsICcnKVxuICAgICAgLm9wdGlvbignc3ViZG9tYWluJywgJycpXG4gICAgICAub3B0aW9uKCdldmVudHMnLCBbXSkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGtlbnNob28sICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChrZW5zaG9vLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGtlbnNob28sIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LCAna190cmFja2V2ZW50Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBjdXN0b20gZXZlbnRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAga2Vuc2hvby5vcHRpb25zLmV2ZW50cyA9IFsgJ2V2ZW50JyBdO1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50Jywge1xuICAgICAgICAgIHJldmVudWU6ICc0MicsXG4gICAgICAgICAgb3JkZXJJZDogJzg0JyxcbiAgICAgICAgICBjb3Vwb246ICdwcm9tbycsXG4gICAgICAgICAgY3VycmVuY3k6ICdFVVInLFxuICAgICAgICB9KTtcblxuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5rX3RyYWNrZXZlbnQsIFtcbiAgICAgICAgICAnaWQ9JyArIG9wdGlvbnMuY2lkLFxuICAgICAgICAgICd0eXBlPWNvbnYnLFxuICAgICAgICAgICd2YWw9NDInLFxuICAgICAgICAgICdvcmRlcklkPTg0JyxcbiAgICAgICAgICAncHJvbW9Db2RlPXByb21vJyxcbiAgICAgICAgICAndmFsdWVDdXJyZW5jeT1FVVInLFxuICAgICAgICAgICdHQ0lEPScsXG4gICAgICAgICAgJ2t3PScsXG4gICAgICAgICAgJ3Byb2R1Y3Q9J1xuICAgICAgICBdLCBvcHRpb25zLnN1YmRvbWFpbik7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgdHJhY2sgdW5kZWZpbmVkIGV2ZW50cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygncmFuZG9tJywge1xuICAgICAgICAgIHJldmVudWU6ICc0MicsXG4gICAgICAgICAgb3JkZXJJZDogJzg0JyxcbiAgICAgICAgICBjb3Vwb246ICdwcm9tbycsXG4gICAgICAgICAgY3VycmVuY3k6ICdFVVInLFxuICAgICAgICB9KTtcblxuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cua190cmFja2V2ZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LCAna190cmFja2V2ZW50Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgbWFrZSBhbnkgZXZlbnQgY2FsbHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cua190cmFja2V2ZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnS0lTU21ldHJpY3MnLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBLSVNTbWV0cmljcyA9IHBsdWdpbjtcbiAgdmFyIGtpc3NtZXRyaWNzO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIga2lzc21ldHJpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFwaUtleTogJzY3ZjU3YWU5ZDYxYTY5ODFmYTA3ZDE0MWJlYzhjNmMzN2U4Yjg4YzcnXG4gIH07XG5cbiAgYmVmb3JlKGZ1bmN0aW9uKCl7XG4gICAgLy8gc2V0dXAgZ2xvYmFsIHRoYXQgdGVsbCBraXNzbWV0cmljcyB0byBub3QgZmlyZSBqc29ucCBicmVha2luZyByZXF1ZXN0c1xuICAgIHdpbmRvdy5LTV9ETlQgPSB0cnVlO1xuICAgIHdpbmRvdy5LTUROVEggPSB0cnVlO1xuICB9KTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBraXNzbWV0cmljcyA9IG5ldyBLSVNTbWV0cmljcyhvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoa2lzc21ldHJpY3MpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGtpc3NtZXRyaWNzLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24gKCkge1xuICAgIGFuYWx5dGljcy5jb21wYXJlKEtJU1NtZXRyaWNzLCBpbnRlZ3JhdGlvbignS0lTU21ldHJpY3MnKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdfa21xJylcbiAgICAgIC5nbG9iYWwoJ0tNJylcbiAgICAgIC5nbG9iYWwoJ19rbWlsJylcbiAgICAgIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAgICAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSlcbiAgICAgIC5vcHRpb24oJ3RyYWNrQ2F0ZWdvcml6ZWRQYWdlcycsIHRydWUpXG4gICAgICAub3B0aW9uKCdwcmVmaXhQcm9wZXJ0aWVzJywgdHJ1ZSkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGtpc3NtZXRyaWNzLCAnbG9hZCcpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2luZG93Ll9rbXEnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Ll9rbXEgaW5zdGFuY2VvZiBBcnJheSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoa2lzc21ldHJpY3MsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuS00nLCBmdW5jdGlvbiAoKSB7XG4gICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5LTSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3BhZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9rbXEsICdwdXNoJyk7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5LTSwgJ3BhZ2VWaWV3Jyk7XG4gICAgICB9KTtcblxuICAgICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vIHNldCBiYWNrIHRvIGRlZmF1bHRzXG4gICAgICAgIHdpbmRvdy5LTV9TS0lQX1BBR0VfVklFVyA9IDE7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZWNvcmQgbm9ybWFsIGtpc3NtZXRyaWNzIHBhZ2Ugdmlld3Mgd2hlbiB0aGUgb3B0aW9uIGlzIHNldCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93LktNX1NLSVBfUEFHRV9WSUVXID0gZmFsc2U7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5fa21xLnB1c2gpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCBgS00ucGFnZVZpZXcoKWAgd2hlbiBLTV9TS0lQX1BBR0VfVklFVyBpcyBub3Qgc2V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuS01fU0tJUF9QQUdFX1ZJRVcgPSBmYWxzZTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZE9uY2Uod2luZG93LktNLnBhZ2VWaWV3KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBjYWxsIGBLTS5wYWdlVmlldygpYCB3aGVuIEtNX1NLSVBfUEFHRV9WSUVXIGlzIHNldCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93LktNX1NLSVBfUEFHRV9WSUVXID0gMTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93LktNLnBhZ2VWaWV3KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIG5hbWVkIHBhZ2VzIGJ5IGRlZmF1bHQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdOYW1lJywge1xuICAgICAgICAgIHRpdGxlOiBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG4gICAgICAgIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fa21xLnB1c2gsIFsncmVjb3JkJywgJ1ZpZXdlZCBOYW1lIFBhZ2UnLCB7XG4gICAgICAgICAgJ1ZpZXdlZCBOYW1lIFBhZ2UgLSB0aXRsZSc6IGRvY3VtZW50LnRpdGxlLFxuICAgICAgICAgICdWaWV3ZWQgTmFtZSBQYWdlIC0gdXJsJzogd2luZG93LmxvY2F0aW9uLmhyZWYsXG4gICAgICAgICAgJ1ZpZXdlZCBOYW1lIFBhZ2UgLSBwYXRoJzogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICAgICdWaWV3ZWQgTmFtZSBQYWdlIC0gcmVmZXJyZXInOiBkb2N1bWVudC5yZWZlcnJlcixcbiAgICAgICAgICAnVmlld2VkIE5hbWUgUGFnZSAtIHNlYXJjaCc6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gsXG4gICAgICAgICAgJ1ZpZXdlZCBOYW1lIFBhZ2UgLSBuYW1lJzogJ05hbWUnXG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB0cmFjayBhIG5hbWVkIHBhZ2Ugd2hlbiB0aGUgb3B0aW9uIGlzIG9mZiwgYnV0IHNob3VsZCB0cmFjayBjYXRlZ29yeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAga2lzc21ldHJpY3Mub3B0aW9ucy50cmFja05hbWVkUGFnZXMgPSBmYWxzZTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZE9uY2Uod2luZG93Ll9rbXEucHVzaCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9rbXEucHVzaCwgWydyZWNvcmQnLCAnVmlld2VkIENhdGVnb3J5IFBhZ2UnLCB7XG4gICAgICAgICAgJ1ZpZXdlZCBDYXRlZ29yeSBQYWdlIC0gcGF0aCc6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgICAnVmlld2VkIENhdGVnb3J5IFBhZ2UgLSByZWZlcnJlcic6IGRvY3VtZW50LnJlZmVycmVyLFxuICAgICAgICAgICdWaWV3ZWQgQ2F0ZWdvcnkgUGFnZSAtIHRpdGxlJzogZG9jdW1lbnQudGl0bGUsXG4gICAgICAgICAgJ1ZpZXdlZCBDYXRlZ29yeSBQYWdlIC0gc2VhcmNoJzogd2luZG93LmxvY2F0aW9uLnNlYXJjaCxcbiAgICAgICAgICAnVmlld2VkIENhdGVnb3J5IFBhZ2UgLSBuYW1lJzogJ05hbWUnLFxuICAgICAgICAgICdWaWV3ZWQgQ2F0ZWdvcnkgUGFnZSAtIGNhdGVnb3J5JzogJ0NhdGVnb3J5JyxcbiAgICAgICAgICAnVmlld2VkIENhdGVnb3J5IFBhZ2UgLSB1cmwnOiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKSArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2hcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHRyYWNrIGEgY2F0ZWdvcml6ZWQgcGFnZSB3aGVuIHRoZSBvcHRpb24gaXMgb2ZmLCBidXQgc2hvdWxkIHRyYWNrIG5hbWUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGtpc3NtZXRyaWNzLm9wdGlvbnMudHJhY2tDYXRlZ29yaXplZFBhZ2VzID0gZmFsc2U7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWRPbmNlKHdpbmRvdy5fa21xLnB1c2gpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fa21xLnB1c2gsIFsncmVjb3JkJywgJ1ZpZXdlZCBDYXRlZ29yeSBOYW1lIFBhZ2UnLCB7XG4gICAgICAgICAgJ1ZpZXdlZCBDYXRlZ29yeSBOYW1lIFBhZ2UgLSB0aXRsZSc6IGRvY3VtZW50LnRpdGxlLFxuICAgICAgICAgICdWaWV3ZWQgQ2F0ZWdvcnkgTmFtZSBQYWdlIC0gdXJsJzogd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJykgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoLFxuICAgICAgICAgICdWaWV3ZWQgQ2F0ZWdvcnkgTmFtZSBQYWdlIC0gcGF0aCc6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgICAnVmlld2VkIENhdGVnb3J5IE5hbWUgUGFnZSAtIHJlZmVycmVyJzogZG9jdW1lbnQucmVmZXJyZXIsXG4gICAgICAgICAgJ1ZpZXdlZCBDYXRlZ29yeSBOYW1lIFBhZ2UgLSBzZWFyY2gnOiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLFxuICAgICAgICAgICdWaWV3ZWQgQ2F0ZWdvcnkgTmFtZSBQYWdlIC0gbmFtZSc6ICdOYW1lJyxcbiAgICAgICAgICAnVmlld2VkIENhdGVnb3J5IE5hbWUgUGFnZSAtIGNhdGVnb3J5JzogJ0NhdGVnb3J5J1xuICAgICAgICB9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBib3RoIG5hbWVkIGFuZCBjYXRlZ29yaXplZCBwYWdlIHdoZW4gb3B0aW9ucyBhcmUgb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWRUd2ljZSh3aW5kb3cuX2ttcS5wdXNoKTtcbiAgICAgICAgLy8gVE9ETzogbWF5YmUgY2FsbGVkRmlyc3QobWV0aG9kLCBhcmdzKT9cbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2ttcS5wdXNoLCBbJ3JlY29yZCcsICdWaWV3ZWQgQ2F0ZWdvcnkgTmFtZSBQYWdlJywge1xuICAgICAgICAgICdWaWV3ZWQgQ2F0ZWdvcnkgTmFtZSBQYWdlIC0gdGl0bGUnOiBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICAnVmlld2VkIENhdGVnb3J5IE5hbWUgUGFnZSAtIHVybCc6IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAod2luZG93LmxvY2F0aW9uLnBvcnQgPyAnOicgKyB3aW5kb3cubG9jYXRpb24ucG9ydDogJycpICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCxcbiAgICAgICAgICAnVmlld2VkIENhdGVnb3J5IE5hbWUgUGFnZSAtIHBhdGgnOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgICAgJ1ZpZXdlZCBDYXRlZ29yeSBOYW1lIFBhZ2UgLSByZWZlcnJlcic6IGRvY3VtZW50LnJlZmVycmVyLFxuICAgICAgICAgICdWaWV3ZWQgQ2F0ZWdvcnkgTmFtZSBQYWdlIC0gc2VhcmNoJzogd2luZG93LmxvY2F0aW9uLnNlYXJjaCxcbiAgICAgICAgICAnVmlld2VkIENhdGVnb3J5IE5hbWUgUGFnZSAtIG5hbWUnOiAnTmFtZScsXG4gICAgICAgICAgJ1ZpZXdlZCBDYXRlZ29yeSBOYW1lIFBhZ2UgLSBjYXRlZ29yeSc6ICdDYXRlZ29yeSdcbiAgICAgICAgfV0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fa21xLnB1c2gsIFsncmVjb3JkJywgJ1ZpZXdlZCBDYXRlZ29yeSBQYWdlJywge1xuICAgICAgICAgICdWaWV3ZWQgQ2F0ZWdvcnkgUGFnZSAtIHRpdGxlJzogZG9jdW1lbnQudGl0bGUsXG4gICAgICAgICAgJ1ZpZXdlZCBDYXRlZ29yeSBQYWdlIC0gdXJsJzogd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJykgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoLFxuICAgICAgICAgICdWaWV3ZWQgQ2F0ZWdvcnkgUGFnZSAtIHBhdGgnOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgICAgJ1ZpZXdlZCBDYXRlZ29yeSBQYWdlIC0gcmVmZXJyZXInOiBkb2N1bWVudC5yZWZlcnJlcixcbiAgICAgICAgICAnVmlld2VkIENhdGVnb3J5IFBhZ2UgLSBzZWFyY2gnOiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLFxuICAgICAgICAgICdWaWV3ZWQgQ2F0ZWdvcnkgUGFnZSAtIG5hbWUnOiAnTmFtZScsXG4gICAgICAgICAgJ1ZpZXdlZCBDYXRlZ29yeSBQYWdlIC0gY2F0ZWdvcnknOiAnQ2F0ZWdvcnknXG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBwcmVmaXhQcm9wZXJ0aWVzIGlmIG9wdGlvbiBpcyBvZmYnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGtpc3NtZXRyaWNzLm9wdGlvbnMucHJlZml4UHJvcGVydGllcyA9IGZhbHNlO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnTmFtZScsIHtcbiAgICAgICAgICB0aXRsZTogZG9jdW1lbnQudGl0bGUsXG4gICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZlxuICAgICAgICB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2ttcS5wdXNoLCBbJ3JlY29yZCcsICdWaWV3ZWQgTmFtZSBQYWdlJywge1xuICAgICAgICAgICd0aXRsZSc6IGRvY3VtZW50LnRpdGxlLFxuICAgICAgICAgICd1cmwnOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgICAgICAnbmFtZSc6ICdOYW1lJyxcbiAgICAgICAgICAncGF0aCc6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgICAncmVmZXJyZXInOiBkb2N1bWVudC5yZWZlcnJlcixcbiAgICAgICAgICAnc2VhcmNoJzogd2luZG93LmxvY2F0aW9uLnNlYXJjaFxuICAgICAgICB9XSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaWRlbnRpZnknLCBmdW5jdGlvbiAoKSB7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9rbXEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9rbXEucHVzaCwgWydpZGVudGlmeScsICdpZCddKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgdHJhaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2ttcS5wdXNoLCBbJ3NldCcsIHsgdHJhaXQ6IHRydWUgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCBhbmQgdHJhaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2ttcS5wdXNoLCBbJ2lkZW50aWZ5JywgJ2lkJ10pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fa21xLnB1c2gsIFsnc2V0JywgeyB0cmFpdDogdHJ1ZSwgaWQ6ICdpZCcgfV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fa21xLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fa21xLnB1c2gsIFsncmVjb3JkJywgJ2V2ZW50Jywge31dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQgYW5kIHByb3BlcnRpZXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHByb3BlcnR5OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fa21xLnB1c2gsIFsncmVjb3JkJywgJ2V2ZW50Jywge1xuICAgICAgICAgICdldmVudCAtIHByb3BlcnR5JzogdHJ1ZVxuICAgICAgICB9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBhbGlhcyByZXZlbnVlIHRvIFwiQmlsbGluZyBBbW91bnRcIicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgcmV2ZW51ZTogOS45OSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2ttcS5wdXNoLCBbJ3JlY29yZCcsICdldmVudCcsIHtcbiAgICAgICAgICAnQmlsbGluZyBBbW91bnQnOiA5Ljk5XG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNhbGlhcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX2ttcSwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSBuZXcgaWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFuYWx5dGljcy5hbGlhcygnbmV3Jyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9rbXEucHVzaCwgWydhbGlhcycsICduZXcnLCB1bmRlZmluZWRdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSBuZXcgYW5kIG9sZCBpZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYW5hbHl0aWNzLmFsaWFzKCduZXcnLCAnb2xkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9rbXEucHVzaCwgWydhbGlhcycsICduZXcnLCAnb2xkJ10pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZWNvbW1lcmNlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9rbXEsICdwdXNoJyk7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5LTSwgJ3NldCcpO1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuS00sICd0cycsIEZ1bmN0aW9uKCdyZXR1cm4gMCcpKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIHZpZXdlZCBwcm9kdWN0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCd2aWV3ZWQgcHJvZHVjdCcsIHtcbiAgICAgICAgICBza3U6IDEsXG4gICAgICAgICAgbmFtZTogJ2l0ZW0nLFxuICAgICAgICAgIGNhdGVnb3J5OiAnY2F0ZWdvcnknLFxuICAgICAgICAgIHByaWNlOiA5XG4gICAgICAgIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fa21xLnB1c2gsIFsncmVjb3JkJywgJ3ZpZXdlZCBwcm9kdWN0Jywge1xuICAgICAgICAgICd2aWV3ZWQgcHJvZHVjdCAtIHNrdSc6IDEsXG4gICAgICAgICAgJ3ZpZXdlZCBwcm9kdWN0IC0gbmFtZSc6ICdpdGVtJyxcbiAgICAgICAgICAndmlld2VkIHByb2R1Y3QgLSBjYXRlZ29yeSc6ICdjYXRlZ29yeScsXG4gICAgICAgICAgJ3ZpZXdlZCBwcm9kdWN0IC0gcHJpY2UnOiA5XG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIGFkZGVkIHByb2R1Y3QnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2FkZGVkIHByb2R1Y3QnLCB7XG4gICAgICAgICAgc2t1OiAxLFxuICAgICAgICAgIG5hbWU6ICdpdGVtJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ2NhdGVnb3J5JyxcbiAgICAgICAgICBwcmljZTogOSxcbiAgICAgICAgICBxdWFudGl0eTogMlxuICAgICAgICB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2ttcS5wdXNoLCBbJ3JlY29yZCcsICdhZGRlZCBwcm9kdWN0Jywge1xuICAgICAgICAgICdhZGRlZCBwcm9kdWN0IC0gc2t1JzogMSxcbiAgICAgICAgICAnYWRkZWQgcHJvZHVjdCAtIG5hbWUnOiAnaXRlbScsXG4gICAgICAgICAgJ2FkZGVkIHByb2R1Y3QgLSBjYXRlZ29yeSc6ICdjYXRlZ29yeScsXG4gICAgICAgICAgJ2FkZGVkIHByb2R1Y3QgLSBwcmljZSc6IDksXG4gICAgICAgICAgJ2FkZGVkIHByb2R1Y3QgLSBxdWFudGl0eSc6IDJcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgY29tcGxldGVkIG9yZGVyJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7XG4gICAgICAgICAgb3JkZXJJZDogJzEyMDc0ZDQ4JyxcbiAgICAgICAgICB0YXg6IDE2LFxuICAgICAgICAgIHRvdGFsOiAxNjYsXG4gICAgICAgICAgcHJvZHVjdHM6IFt7XG4gICAgICAgICAgICBza3U6ICc0MGJjZGE3MycsXG4gICAgICAgICAgICBuYW1lOiAnbXktcHJvZHVjdCcsXG4gICAgICAgICAgICBwcmljZTogNzUsXG4gICAgICAgICAgICBxdWFudGl0eTogMVxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIHNrdTogJzY0MzQ2ZmM2JyxcbiAgICAgICAgICAgIG5hbWU6ICdvdGhlci1wcm9kdWN0JyxcbiAgICAgICAgICAgIHByaWNlOiA3NSxcbiAgICAgICAgICAgIHF1YW50aXR5OiAxXG4gICAgICAgICAgfV1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX2ttcS5wdXNoLmFyZ3NbMF0sIFsncmVjb3JkJywgJ2NvbXBsZXRlZCBvcmRlcicsIHtcbiAgICAgICAgICAnY29tcGxldGVkIG9yZGVyIC0gc2t1JzogJzEyMDc0ZDQ4JyxcbiAgICAgICAgICAnY29tcGxldGVkIG9yZGVyIC0gdG90YWwnOiAxNjZcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWRkIGl0ZW1zIG9uY2UgS00gaXMgbG9hZGVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdjb21wbGV0ZWQgb3JkZXInLCB7XG4gICAgICAgICAgb3JkZXJJZDogJzEyMDc0ZDQ4JyxcbiAgICAgICAgICB0YXg6IDE2LFxuICAgICAgICAgIHByb2R1Y3RzOiBbe1xuICAgICAgICAgICAgc2t1OiAnNDBiY2RhNzMnLFxuICAgICAgICAgICAgbmFtZTogJ215LXByb2R1Y3QnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdteS1jYXRlZ29yeScsXG4gICAgICAgICAgICBwcmljZTogNzUsXG4gICAgICAgICAgICBxdWFudGl0eTogMVxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIHNrdTogJzY0MzQ2ZmM2JyxcbiAgICAgICAgICAgIG5hbWU6ICdvdGhlci1wcm9kdWN0JyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnbXktb3RoZXItY2F0ZWdvcnknLFxuICAgICAgICAgICAgcHJpY2U6IDc1LFxuICAgICAgICAgICAgcXVhbnRpdHk6IDFcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUT0RPOiB3aGF0IGlzIGhhcHBlbmluZyBoZXJlP1xuICAgICAgICB2YXIgZm4gPSB3aW5kb3cuX2ttcS5wdXNoLmFyZ3NbMV1bMF07XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWRUd2ljZSh3aW5kb3cuX2ttcS5wdXNoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCgnZnVuY3Rpb24nID09IHR5cGVvZiBmbik7XG4gICAgICAgIGZuKCk7XG5cbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuS00uc2V0LmFyZ3NbMF1bMF0sIHtcbiAgICAgICAgICAnY29tcGxldGVkIG9yZGVyIC0gc2t1JzogJzQwYmNkYTczJyxcbiAgICAgICAgICAnY29tcGxldGVkIG9yZGVyIC0gbmFtZSc6ICdteS1wcm9kdWN0JyxcbiAgICAgICAgICAnY29tcGxldGVkIG9yZGVyIC0gY2F0ZWdvcnknOiAnbXktY2F0ZWdvcnknLFxuICAgICAgICAgICdjb21wbGV0ZWQgb3JkZXIgLSBwcmljZSc6IDc1LFxuICAgICAgICAgICdjb21wbGV0ZWQgb3JkZXIgLSBxdWFudGl0eSc6IDEsXG4gICAgICAgICAgX3Q6IDAsXG4gICAgICAgICAgX2Q6IDFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuS00uc2V0LmFyZ3NbMV1bMF0sIHtcbiAgICAgICAgICAnY29tcGxldGVkIG9yZGVyIC0gc2t1JzogJzY0MzQ2ZmM2JyxcbiAgICAgICAgICAnY29tcGxldGVkIG9yZGVyIC0gbmFtZSc6ICdvdGhlci1wcm9kdWN0JyxcbiAgICAgICAgICAnY29tcGxldGVkIG9yZGVyIC0gY2F0ZWdvcnknOiAnbXktb3RoZXItY2F0ZWdvcnknLFxuICAgICAgICAgICdjb21wbGV0ZWQgb3JkZXIgLSBwcmljZSc6IDc1LFxuICAgICAgICAgICdjb21wbGV0ZWQgb3JkZXIgLSBxdWFudGl0eSc6IDEsXG4gICAgICAgICAgX3Q6IDEsXG4gICAgICAgICAgX2Q6IDFcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciB0aWNrID0gcmVxdWlyZSgnbmV4dC10aWNrJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdLbGF2aXlvJywgZnVuY3Rpb24oKXtcbiAgdmFyIEtsYXZpeW8gPSBwbHVnaW47XG4gIHZhciBrbGF2aXlvO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBhcGlLZXk6ICd4J1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIGtsYXZpeW8gPSBuZXcgS2xhdml5byhvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoa2xhdml5byk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAga2xhdml5by5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoS2xhdml5bywgaW50ZWdyYXRpb24oJ0tsYXZpeW8nKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdfbGVhcm5xJylcbiAgICAgIC5vcHRpb24oJ2FwaUtleScsICcnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoa2xhdml5bywgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuX2xlYXJucScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy5fbGVhcm5xKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX2xlYXJucSBpbnN0YW5jZW9mIEFycmF5KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHB1c2ggYW4gYXBpIGtleScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9sZWFybnEsIFtbJ2FjY291bnQnLCBvcHRpb25zLmFwaUtleV1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KGtsYXZpeW8ubG9hZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoa2xhdml5bywgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaWRlbnRpZnknLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX2xlYXJucSwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9sZWFybnEucHVzaCwgWydpZGVudGlmeScsIHsgJGlkOiAnaWQnIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkbnQgc2VuZCBqdXN0IHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cuX2xlYXJucS5wdXNoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fbGVhcm5xLnB1c2gsIFsnaWRlbnRpZnknLCB7ICRpZDogJ2lkJywgdHJhaXQ6IHRydWUgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWxpYXMgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHtcbiAgICAgICAgICBlbWFpbDogJ25hbWVAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ2ZpcnN0JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ2xhc3QnLFxuICAgICAgICAgIHBob25lOiAncGhvbmUnLFxuICAgICAgICAgIHRpdGxlOiAndGl0bGUnXG4gICAgICAgIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fbGVhcm5xLnB1c2gsIFsnaWRlbnRpZnknLCB7XG4gICAgICAgICAgJGlkOiAnaWQnLFxuICAgICAgICAgICRlbWFpbDogJ25hbWVAZXhhbXBsZS5jb20nLFxuICAgICAgICAgICRmaXJzdF9uYW1lOiAnZmlyc3QnLFxuICAgICAgICAgICRsYXN0X25hbWU6ICdsYXN0JyxcbiAgICAgICAgICAkcGhvbmVfbnVtYmVyOiAncGhvbmUnLFxuICAgICAgICAgICR0aXRsZTogJ3RpdGxlJ1xuICAgICAgICB9XSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjZ3JvdXAnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX2xlYXJucSwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmdyb3VwKCdpZCcsIHsgbmFtZTogJ25hbWUnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fbGVhcm5xLnB1c2gsIFsnaWRlbnRpZnknLCB7ICRvcmdhbml6YXRpb246ICduYW1lJyB9XSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX2xlYXJucSwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50Jyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9sZWFybnEucHVzaCwgWyd0cmFjaycsICdldmVudCcsIHt9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50IGFuZCBwcm9wZXJ0aWVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgcHJvcGVydHk6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9sZWFybnEucHVzaCwgWyd0cmFjaycsICdldmVudCcsIHsgcHJvcGVydHk6IHRydWUgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWxpYXMgcmV2ZW51ZSB0byBgJHZhbHVlYCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHJldmVudWU6IDkwIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fbGVhcm5xLnB1c2gsIFsndHJhY2snLCAnZXZlbnQnLCB7ICR2YWx1ZTogOTAgfV0pO1xuICAgICAgfSlcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0xlYWRMYW5kZXInLCBmdW5jdGlvbigpe1xuICB2YXIgTGVhZExhbmRlciA9IHBsdWdpbjtcbiAgdmFyIGxlYWRsYW5kZXI7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFjY291bnRJZDogJ3gnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgbGVhZGxhbmRlciA9IG5ldyBMZWFkTGFuZGVyKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChsZWFkbGFuZGVyKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBsZWFkbGFuZGVyLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShMZWFkTGFuZGVyLCBpbnRlZ3JhdGlvbignTGVhZExhbmRlcicpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ2xsYWN0aWQnKVxuICAgICAgLmdsb2JhbCgndHJhY2thbHl6ZXInKVxuICAgICAgLm9wdGlvbignYWNjb3VudElkJywgbnVsbCkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGxlYWRsYW5kZXIsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBzZXQgd2luZG93LmxsYWN0aWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5sbGFjdGlkID09PSBvcHRpb25zLmFjY291bnRJZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydChsZWFkbGFuZGVyLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGxlYWRsYW5kZXIsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnTGl2ZUNoYXQnLCBmdW5jdGlvbigpe1xuICB2YXIgTGl2ZUNoYXQgPSBwbHVnaW47XG4gIHZhciBsaXZlY2hhdDtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgbGljZW5zZTogJzQyOTMzNzEnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgbGl2ZWNoYXQgPSBuZXcgTGl2ZUNoYXQob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKGxpdmVjaGF0KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBsaXZlY2hhdC5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgdmFyIFRlc3QgPSBpbnRlZ3JhdGlvbignTGl2ZUNoYXQnKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdfX2xjJylcbiAgICAgIC5nbG9iYWwoJ0xDX0FQSScpXG4gICAgICAuZ2xvYmFsKCdMQ19JbnZpdGUnKVxuICAgICAgLmdsb2JhbCgnX19sY19pbml0ZWQnKVxuICAgICAgLm9wdGlvbignbGljZW5zZScsICcnKTtcblxuICAgIGFuYWx5dGljcy5jb21wYXJlKExpdmVDaGF0LCBUZXN0KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyBlbWFpbDogJ2VtYWlsJywgbmFtZTogJ25hbWUnIH0pO1xuICAgICAgYW5hbHl0aWNzLnN0dWIobGl2ZWNoYXQsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2luZG93Ll9fbGMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCF3aW5kb3cuX19sYyk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9fbGMsIHtcbiAgICAgICAgICBsaWNlbnNlOiBvcHRpb25zLmxpY2Vuc2UsXG4gICAgICAgICAgZ3JvdXA6IDAsXG4gICAgICAgICAgdmlzaXRvcjoge1xuICAgICAgICAgICAgbmFtZTogJ25hbWUnLFxuICAgICAgICAgICAgZW1haWw6ICdlbWFpbCdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKGxpdmVjaGF0LCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5MQ19BUEksICdzZXRfY3VzdG9tX3ZhcmlhYmxlcycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuTENfQVBJLnNldF9jdXN0b21fdmFyaWFibGVzLCBbXG4gICAgICAgICAgeyBuYW1lOiAnaWQnLCB2YWx1ZTogJ2lkJyB9LFxuICAgICAgICAgIHsgbmFtZTogJ1VzZXIgSUQnLCB2YWx1ZTogJ2lkJyB9XG4gICAgICAgIF0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuTENfQVBJLnNldF9jdXN0b21fdmFyaWFibGVzLCBbXG4gICAgICAgICAgeyBuYW1lOiAndHJhaXQnLCB2YWx1ZTogdHJ1ZSB9XG4gICAgICAgIF0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCBhbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LkxDX0FQSS5zZXRfY3VzdG9tX3ZhcmlhYmxlcywgW1xuICAgICAgICAgIHsgbmFtZTogJ3RyYWl0JywgdmFsdWU6IHRydWUgfSxcbiAgICAgICAgICB7IG5hbWU6ICdpZCcsIHZhbHVlOiAnaWQnIH0sXG4gICAgICAgICAgeyBuYW1lOiAnVXNlciBJRCcsIHZhbHVlOiAnaWQnIH1cbiAgICAgICAgXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0x1Y2t5IE9yYW5nZScsIGZ1bmN0aW9uKCl7XG4gIHZhciBMdWNreSA9IHBsdWdpbjtcbiAgdmFyIGx1Y2t5O1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBzaXRlSWQ6ICcxNzE4MSdcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBsdWNreSA9IG5ldyBMdWNreShvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQobHVja3kpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIGx1Y2t5LnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShMdWNreSwgaW50ZWdyYXRpb24oJ0x1Y2t5IE9yYW5nZScpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ19sb3EnKVxuICAgICAgLmdsb2JhbCgnX193dHdfbHVja3lfc2l0ZV9pZCcpXG4gICAgICAuZ2xvYmFsKCdfX3d0d19sdWNreV9pc19zZWdtZW50X2lvJylcbiAgICAgIC5nbG9iYWwoJ19fd3R3X2N1c3RvbV91c2VyX2RhdGEnKVxuICAgICAgLm9wdGlvbignc2l0ZUlkJywgbnVsbCkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKGx1Y2t5LCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIHdpbmRvdy5fbG9xJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Ll9sb3EpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5fbG9xIGluc3RhbmNlb2YgQXJyYXkpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0aGUgbHVja3kgdmFyaWFibGVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX193dHdfbHVja3lfc2l0ZV9pZCA9PT0gb3B0aW9ucy5zaXRlSWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQobHVja3kubG9hZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQobHVja3ksIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9sb3EsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIG5hbWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nIH0pO1xuICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fX3d0d19jdXN0b21fdXNlcl9kYXRhLCB7IGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIG5hbWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyBuYW1lOiAndGVzdCcgfSk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9fd3R3X2N1c3RvbV91c2VyX2RhdGEsIHsgbmFtZTogJ3Rlc3QnIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBuYW1lOiAndGVzdCcsIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9fd3R3X2N1c3RvbV91c2VyX2RhdGEsIHsgaWQ6ICdpZCcsIG5hbWU6ICd0ZXN0JywgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHRpY2sgPSByZXF1aXJlKCduZXh0LXRpY2snKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ0x5dGljcycsIGZ1bmN0aW9uKCl7XG4gIHZhciBMeXRpY3MgPSBwbHVnaW47XG4gIHZhciBseXRpY3M7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGNpZDogJ3gnLFxuICAgIGNvb2tpZTogJ2x5dGljc19jb29raWUnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgbHl0aWNzID0gbmV3IEx5dGljcyhvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQobHl0aWNzKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBseXRpY3MucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKEx5dGljcywgaW50ZWdyYXRpb24oJ0x5dGljcycpXG4gICAgICAuZ2xvYmFsKCdqc3RhZycpXG4gICAgICAub3B0aW9uKCdjaWQnLCAnJylcbiAgICAgIC5vcHRpb24oJ2Nvb2tpZScsICdzZWVyaWQnKVxuICAgICAgLm9wdGlvbignZGVsYXknLCAyMDAwKVxuICAgICAgLm9wdGlvbignc2Vzc2lvblRpbWVvdXQnLCAxODAwKVxuICAgICAgLm9wdGlvbigndXJsJywgJy8vYy5seXRpY3MuaW8nKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIobHl0aWNzLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIHdpbmRvdy5qc3RhZycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93LmpzdGFnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGx5dGljcy5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChseXRpY3MsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3BhZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuanN0YWcsICdzZW5kJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsIHNlbmQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSh7IHByb3BlcnR5OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5qc3RhZy5zZW5kLCB7XG4gICAgICAgICAgcHJvcGVydHk6IHRydWUsXG4gICAgICAgICAgcGF0aDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICAgIHJlZmVycmVyOiBkb2N1bWVudC5yZWZlcnJlcixcbiAgICAgICAgICB0aXRsZTogZG9jdW1lbnQudGl0bGUsXG4gICAgICAgICAgc2VhcmNoOiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLFxuICAgICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJykgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LmpzdGFnLCAnc2VuZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuanN0YWcuc2VuZCwgeyBfdWlkOiAnaWQnLCBpZDogJ2lkJyB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LmpzdGFnLnNlbmQsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkIGFuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuanN0YWcuc2VuZCwgeyBfdWlkOiAnaWQnLCB0cmFpdDogdHJ1ZSwgaWQ6ICdpZCcgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuanN0YWcsICdzZW5kJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5qc3RhZy5zZW5kLCB7IF9lOiAnZXZlbnQnIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCBhbmQgcHJvcGVydGllcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHByb3BlcnR5OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5qc3RhZy5zZW5kLCB7IF9lOiAnZXZlbnQnLCBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xudmFyIGlzbyA9IHJlcXVpcmUoJ3RvLWlzby1zdHJpbmcnKTtcblxuZGVzY3JpYmUoJ01peHBhbmVsJywgZnVuY3Rpb24oKXtcbiAgdmFyIE1peHBhbmVsID0gcGx1Z2luO1xuICB2YXIgbWl4cGFuZWw7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIHRva2VuOiAneCdcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBtaXhwYW5lbCA9IG5ldyBNaXhwYW5lbChvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQobWl4cGFuZWwpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIG1peHBhbmVsLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShNaXhwYW5lbCwgaW50ZWdyYXRpb24oJ01peHBhbmVsJylcbiAgICAgIC5nbG9iYWwoJ21peHBhbmVsJylcbiAgICAgIC5vcHRpb24oJ2Nvb2tpZU5hbWUnLCAnJylcbiAgICAgIC5vcHRpb24oJ25hbWVUYWcnLCB0cnVlKVxuICAgICAgLm9wdGlvbigncGFnZXZpZXcnLCBmYWxzZSlcbiAgICAgIC5vcHRpb24oJ3Blb3BsZScsIGZhbHNlKVxuICAgICAgLm9wdGlvbigndG9rZW4nLCAnJylcbiAgICAgIC5vcHRpb24oJ3RyYWNrQWxsUGFnZXMnLCBmYWxzZSlcbiAgICAgIC5vcHRpb24oJ3RyYWNrTmFtZWRQYWdlcycsIHRydWUpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihtaXhwYW5lbCwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cubWl4cGFuZWwnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCF3aW5kb3cubWl4cGFuZWwpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5taXhwYW5lbCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChtaXhwYW5lbC5sb2FkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGxvd2VyY2FzZSBpbmNyZW1lbnRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgbWl4cGFuZWwub3B0aW9ucy5pbmNyZW1lbnRzID0gWydBJywgJ2InLCAnY18nXTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbChtaXhwYW5lbC5vcHRpb25zLmluY3JlbWVudHMsIFsnYScsICdiJywgJ2NfJ10pO1xuICAgICAgfSlcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQobWl4cGFuZWwsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3BhZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cubWl4cGFuZWwsICd0cmFjaycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHRyYWNrIGFub255bW91cyBwYWdlcyBieSBkZWZhdWx0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Lm1peHBhbmVsLnRyYWNrKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIGFub255bW91cyBwYWdlcyB3aGVuIHRoZSBvcHRpb24gaXMgb24nLCBmdW5jdGlvbigpe1xuICAgICAgICBtaXhwYW5lbC5vcHRpb25zLnRyYWNrQWxsUGFnZXMgPSB0cnVlO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5taXhwYW5lbC50cmFjaywgJ0xvYWRlZCBhIFBhZ2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIG5hbWVkIHBhZ2VzIGJ5IGRlZmF1bHQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnTmFtZScpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5taXhwYW5lbC50cmFjaywgJ1ZpZXdlZCBOYW1lIFBhZ2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIG5hbWVkIHBhZ2VzIHdpdGggY2F0ZWdvcmllcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLnRyYWNrLCAnVmlld2VkIENhdGVnb3J5IE5hbWUgUGFnZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgY2F0ZWdvcml6ZWQgcGFnZXMgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLnRyYWNrLCAnVmlld2VkIENhdGVnb3J5IFBhZ2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB0cmFjayBjYXRlZ29yeSBwYWdlcyB3aGVuIHRoZSBvcHRpb24gaXMgb2ZmJywgZnVuY3Rpb24oKXtcbiAgICAgICAgbWl4cGFuZWwub3B0aW9ucy50cmFja05hbWVkUGFnZXMgPSBmYWxzZTtcbiAgICAgICAgbWl4cGFuZWwub3B0aW9ucy50cmFja0NhdGVnb3JpemVkUGFnZXMgPSBmYWxzZTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Lm1peHBhbmVsLnRyYWNrKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5taXhwYW5lbCwgJ2lkZW50aWZ5Jyk7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5taXhwYW5lbCwgJ3JlZ2lzdGVyJyk7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5taXhwYW5lbCwgJ25hbWVfdGFnJyk7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5taXhwYW5lbC5wZW9wbGUsICdzZXQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLmlkZW50aWZ5LCAnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cubWl4cGFuZWwucmVnaXN0ZXIsIHsgaWQ6ICdpZCcgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5taXhwYW5lbC5yZWdpc3RlciwgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5taXhwYW5lbC5pZGVudGlmeSwgJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLnJlZ2lzdGVyLCB7IHRyYWl0OiB0cnVlLCBpZDogJ2lkJyB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHVzZSBhbiBpZCBhcyBhIG5hbWUgdGFnJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5taXhwYW5lbC5uYW1lX3RhZywgJ2lkJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwcmVmZXIgYSB1c2VybmFtZSBhcyBhIG5hbWUgdGFnJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdXNlcm5hbWU6ICd1c2VybmFtZScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLm5hbWVfdGFnLCAndXNlcm5hbWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHByZWZlciBhbiBlbWFpbCBhcyBhIG5hbWUgdGFnJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHtcbiAgICAgICAgICB1c2VybmFtZTogJ3VzZXJuYW1lJyxcbiAgICAgICAgICBlbWFpbDogJ25hbWVAZXhhbXBsZS5jb20nXG4gICAgICAgIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5taXhwYW5lbC5uYW1lX3RhZywgJ25hbWVAZXhhbXBsZS5jb20nKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgdHJhaXRzIHRvIE1peHBhbmVsIFBlb3BsZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIG1peHBhbmVsLm9wdGlvbnMucGVvcGxlID0gdHJ1ZTtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLnBlb3BsZS5zZXQsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBhbGlhcyB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7XG4gICAgICAgICAgY3JlYXRlZDogZGF0ZSxcbiAgICAgICAgICBlbWFpbDogJ25hbWVAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ2ZpcnN0JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ2xhc3QnLFxuICAgICAgICAgIGxhc3RTZWVuOiBkYXRlLFxuICAgICAgICAgIG5hbWU6ICduYW1lJyxcbiAgICAgICAgICB1c2VybmFtZTogJ3VzZXJuYW1lJyxcbiAgICAgICAgICBwaG9uZTogJ3Bob25lJ1xuICAgICAgICB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cubWl4cGFuZWwucmVnaXN0ZXIsIHtcbiAgICAgICAgICAkY3JlYXRlZDogaXNvKGRhdGUpLFxuICAgICAgICAgICRlbWFpbDogJ25hbWVAZXhhbXBsZS5jb20nLFxuICAgICAgICAgICRmaXJzdF9uYW1lOiAnZmlyc3QnLFxuICAgICAgICAgICRsYXN0X25hbWU6ICdsYXN0JyxcbiAgICAgICAgICAkbGFzdF9zZWVuOiBpc28oZGF0ZSksXG4gICAgICAgICAgJG5hbWU6ICduYW1lJyxcbiAgICAgICAgICAkdXNlcm5hbWU6ICd1c2VybmFtZScsXG4gICAgICAgICAgJHBob25lOiAncGhvbmUnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWxpYXMgdHJhaXRzIHRvIE1peHBhbmVsIFBlb3BsZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIG1peHBhbmVsLm9wdGlvbnMucGVvcGxlID0gdHJ1ZTtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoe1xuICAgICAgICAgIGNyZWF0ZWQ6IGRhdGUsXG4gICAgICAgICAgZW1haWw6ICduYW1lQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBmaXJzdE5hbWU6ICdmaXJzdCcsXG4gICAgICAgICAgbGFzdE5hbWU6ICdsYXN0JyxcbiAgICAgICAgICBsYXN0U2VlbjogZGF0ZSxcbiAgICAgICAgICBuYW1lOiAnbmFtZScsXG4gICAgICAgICAgdXNlcm5hbWU6ICd1c2VybmFtZScsXG4gICAgICAgICAgcGhvbmU6ICdwaG9uZSdcbiAgICAgICAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLnBlb3BsZS5zZXQsIHtcbiAgICAgICAgICAkY3JlYXRlZDogZGF0ZSxcbiAgICAgICAgICAkZW1haWw6ICduYW1lQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICAkZmlyc3RfbmFtZTogJ2ZpcnN0JyxcbiAgICAgICAgICAkbGFzdF9uYW1lOiAnbGFzdCcsXG4gICAgICAgICAgJGxhc3Rfc2VlbjogZGF0ZSxcbiAgICAgICAgICAkbmFtZTogJ25hbWUnLFxuICAgICAgICAgICR1c2VybmFtZTogJ3VzZXJuYW1lJyxcbiAgICAgICAgICAkcGhvbmU6ICdwaG9uZSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZW1vdmUgLmNyZWF0ZWRfYXQnLCBmdW5jdGlvbigpe1xuICAgICAgICBtaXhwYW5lbC5vcHRpb25zLnBlb3BsZSA9IHRydWU7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHtcbiAgICAgICAgICBjcmVhdGVkX2F0OiBkYXRlLFxuICAgICAgICAgIGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScsXG4gICAgICAgICAgZmlyc3ROYW1lOiAnZmlyc3QnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnbGFzdCcsXG4gICAgICAgICAgbGFzdFNlZW46IGRhdGUsXG4gICAgICAgICAgbmFtZTogJ25hbWUnLFxuICAgICAgICAgIHVzZXJuYW1lOiAndXNlcm5hbWUnLFxuICAgICAgICAgIHBob25lOiAncGhvbmUnXG4gICAgICAgIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5taXhwYW5lbC5wZW9wbGUuc2V0LCB7XG4gICAgICAgICAgJGNyZWF0ZWQ6IGRhdGUsXG4gICAgICAgICAgJGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScsXG4gICAgICAgICAgJGZpcnN0X25hbWU6ICdmaXJzdCcsXG4gICAgICAgICAgJGxhc3RfbmFtZTogJ2xhc3QnLFxuICAgICAgICAgICRsYXN0X3NlZW46IGRhdGUsXG4gICAgICAgICAgJG5hbWU6ICduYW1lJyxcbiAgICAgICAgICAkdXNlcm5hbWU6ICd1c2VybmFtZScsXG4gICAgICAgICAgJHBob25lOiAncGhvbmUnXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cubWl4cGFuZWwsICd0cmFjaycpO1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cubWl4cGFuZWwucGVvcGxlLCAnaW5jcmVtZW50Jyk7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5taXhwYW5lbC5wZW9wbGUsICdzZXQnKTtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Lm1peHBhbmVsLnBlb3BsZSwgJ3RyYWNrX2NoYXJnZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cubWl4cGFuZWwudHJhY2ssICdldmVudCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCBhbmQgcHJvcGVydGllcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHByb3BlcnR5OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5taXhwYW5lbC50cmFjaywgJ2V2ZW50JywgeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSByZXZlbnVlIHByb3BlcnR5IHRvIE1peHBhbmVsIFBlb3BsZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIG1peHBhbmVsLm9wdGlvbnMucGVvcGxlID0gdHJ1ZTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgcmV2ZW51ZTogOS45OSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cubWl4cGFuZWwucGVvcGxlLnRyYWNrX2NoYXJnZSwgOS45OSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb252ZXJ0IGRhdGVzIHRvIGlzbyBzdHJpbmdzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyBkYXRlOiBkYXRlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5taXhwYW5lbC50cmFjaywgJ2V2ZW50JywgeyBkYXRlOiBpc28oZGF0ZSkgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBpbmNyZW1lbnQgZXZlbnRzIHRoYXQgYXJlIGluIC5pbmNyZW1lbnRzIG9wdGlvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIG1peHBhbmVsLm9wdGlvbnMuaW5jcmVtZW50cyA9IFswLCAnbXkgZXZlbnQnLCAxXTtcbiAgICAgICAgbWl4cGFuZWwub3B0aW9ucy5wZW9wbGUgPSB0cnVlO1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ215IGV2ZW50Jyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLnBlb3BsZS5pbmNyZW1lbnQsICdteSBldmVudCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2hvdWxkIHVwZGF0ZSBwZW9wbGUgcHJvcGVydHkgaWYgdGhlIGV2ZW50IGlzIGluIC5pbmNyZW1lbnRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgbWl4cGFuZWwub3B0aW9ucy5pbmNyZW1lbnRzID0gWydldmVudCddO1xuICAgICAgICBtaXhwYW5lbC5vcHRpb25zLnBlb3BsZSA9IHRydWU7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgdmFyIGRhdGUgPSB3aW5kb3cubWl4cGFuZWwucGVvcGxlLnNldC5hcmdzWzBdWzFdO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KGRhdGUuZ2V0VGltZSgpID09IG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cubWl4cGFuZWwucGVvcGxlLmluY3JlbWVudCwgJ2V2ZW50Jyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLnBlb3BsZS5zZXQsICdMYXN0IGV2ZW50JywgZGF0ZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgY29udmVydCBhcnJheXMgb2Ygc2ltcGxlIHR5cGVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgYXJyYXk6IFsnYScsICdiJywgJ2MnXSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cubWl4cGFuZWwudHJhY2ssICdldmVudCcsIHsgYXJyYXk6IFsnYScsICdiJywgJ2MnXSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgYXJyYXk6IFsxMywgMjgsIDk5XSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cubWl4cGFuZWwudHJhY2ssICdldmVudCcsIHsgYXJyYXk6IFsxMywgMjgsIDk5XSB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNvbnZlcnQgYXJyYXlzIG9mIG9iamVjdHMgdG8gbGVuZ3RocycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IGFycmF5OiBbeydhJzogJ2FzZGYnfSwgeydiJzogJ2dlYXNkJ30sIHsnYycgOiAnYXNmZWUnfV0gfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLnRyYWNrLCAnZXZlbnQnLCB7IGFycmF5OiAzIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVtb3ZlIG1peHBhbmVsXFwncyByZXNlcnZlZCBwcm9wZXJ0aWVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHtcbiAgICAgICAgICBkaXN0aW5jdF9pZDogJ3N0cmluZycsXG4gICAgICAgICAgaXA6ICdzdHJpbmcnLFxuICAgICAgICAgIG1wX25hbWVfdGFnOiAnc3RyaW5nJyxcbiAgICAgICAgICBtcF9ub3RlOiAnc3RyaW5nJyxcbiAgICAgICAgICB0b2tlbjogJ3N0cmluZydcbiAgICAgICAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLnRyYWNrLCAnZXZlbnQnLCB7fSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjYWxpYXMnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cubWl4cGFuZWwsICdhbGlhcycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhIG5ldyBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hbGlhcygnbmV3Jyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm1peHBhbmVsLmFsaWFzLCAnbmV3Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgbmV3IGFuZCBvbGQgaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuYWxpYXMoJ25ldycsICdvbGQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cubWl4cGFuZWwuYWxpYXMsICduZXcnLCAnb2xkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnTW9qbicsIGZ1bmN0aW9uKCl7XG4gIHZhciBNb2puID0gcGx1Z2luO1xuICB2YXIgbW9qbjtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgY3VzdG9tZXJDb2RlOiAnRVdCQ0snXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgbW9qbiA9IG5ldyBNb2puKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChtb2puKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBtb2puLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIGNvcnJlY3QgZGVmYXVsdCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoTW9qbiwgaW50ZWdyYXRpb24oJ01vam4nKVxuICAgICAgLmdsb2JhbCgnX21vam5UcmFjaycpXG4gICAgICAub3B0aW9uKCdjdXN0b21lckNvZGUnLCAnJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKG1vam4sICdsb2FkJyk7XG4gICAgfSk7XG4gICAgXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQobW9qbi5sb2FkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHBhc3MgY3VzdG9tZXJDb2RlIHRvIHRyYWNrZXIgc2NyaXB0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgd2luZG93Ll9tb2puVHJhY2sgPSBbXTtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9tb2puVHJhY2ssICdwdXNoJyk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9tb2puVHJhY2sucHVzaCwgeyBjaWQ6IG9wdGlvbnMuY3VzdG9tZXJDb2RlIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKG1vam4sIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9tb2puVHJhY2ssICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBpZ25vcmUgaWYgcmV2ZW51ZSBpcyBub3Qgc2V0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdzb21lIHNhbGUnLCB7fSk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5fbW9qblRyYWNrLnB1c2gpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgaWYgcmV2ZW51ZSBpcyBzZXQgKG5vIGN1cnJlbmN5KScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnc29tZSBzYWxlJywgeyByZXZlbnVlOiA0MiB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX21vam5UcmFjay5wdXNoLCB7IGNvbnY6ICc0MicgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBpZiByZXZlbnVlIGlzIHNldCAod2l0aCBjdXJyZW5jeSknLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ3NvbWUgc2FsZScsIHsgcmV2ZW51ZTogNDIsIGN1cnJlbmN5OiAnREtLJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX21vam5UcmFjay5wdXNoLCB7IGNvbnY6ICdES0s0MicgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaWRlbnRpZnknLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3B5KG1vam4sICdpZGVudGlmeScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaWdub3JlIGlmIG1pc3NpbmcgZW1haWwnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyBhbnl0aGluZzogJ2J1dCBhbiBlbWFpbCcgfSk7XG4gICAgICAgIHZhciBpbWcgPSBtb2puLmlkZW50aWZ5LnJldHVybnNbMF07XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQobnVsbCA9PSBpbWcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgaWYgZW1haWwgaXMgc2V0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGVtYWlsID0gJ3Rlc3RAdGVzdC5tb2puLmNvbSc7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IGVtYWlsOiBlbWFpbCB9KTtcbiAgICAgICAgdmFyIGltZyA9IG1vam4uaWRlbnRpZnkucmV0dXJuc1swXTtcbiAgICAgICAgdmFyIGV4cGVjdCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvL21hdGNoZXIuaWR0YXJnZXRpbmcuY29tL2FuYWx5dGljcy5naWY/Y2lkPScgKyBvcHRpb25zLmN1c3RvbWVyQ29kZSArICcmX21qbmN0aWQ9JyArIGVtYWlsO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KGV4cGVjdCA9PSBpbWcuc3JjKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnTW91c2VmbG93JywgZnVuY3Rpb24oKXtcbiAgdmFyIE1vdXNlZmxvdyA9IHBsdWdpbjtcbiAgdmFyIG1vdXNlZmxvdztcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgYXBpS2V5OiAnMDkzYzgwY2YtMTQ1NS00YWQ2LWIxMzAtY2U0NGNkMjVjYTdjJ1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIG1vdXNlZmxvdyA9IG5ldyBNb3VzZWZsb3cob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKG1vdXNlZmxvdyk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgbW91c2VmbG93LnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIGNvcnJlY3Qgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKE1vdXNlZmxvdywgaW50ZWdyYXRpb24oJ01vdXNlZmxvdycpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ21vdXNlZmxvdycpXG4gICAgICAuZ2xvYmFsKCdfbWZxJylcbiAgICAgIC5vcHRpb24oJ2FwaUtleScsICcnKVxuICAgICAgLm9wdGlvbignbW91c2VmbG93SHRtbERlbGF5JywgMCkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKG1vdXNlZmxvdywgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKG1vdXNlZmxvdy5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChtb3VzZWZsb3csIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNldCB3aW5kb3cubW91c2VmbG93SHRtbERlbGF5JywgZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5hc3NlcnQoMCA9PSB3aW5kb3cubW91c2VmbG93SHRtbERlbGF5KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5tb3VzZWZsb3csICduZXdQYWdlVmlldycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCBtb3VzZWZsb3cubmV3UGFnZVZpZXcnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5tb3VzZWZsb3cubmV3UGFnZVZpZXcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHRocm93IGlmIGl0cyBub3QgYSBmdW5jdGlvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHdpbmRvdy5tb3VzZWZsb3cubmV3UGFnZVZpZXcgPSBudWxsO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHRocm93IGlmIHdpbmRvdy5tb3VzZWZsb3cgaXMgbm90IGFuIG9iamVjdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHdpbmRvdy5tb3VzZWZsb3cgPSBudWxsO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9tZnEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KDEyMyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9tZnEucHVzaCwgWydzZXRWYXJpYWJsZScsICdpZCcsIDEyM10pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyBhOiAxIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fbWZxLnB1c2gsIFsnc2V0VmFyaWFibGUnLCAnYScsIDFdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgxMjMsIHsgYTogMSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX21mcS5wdXNoLCBbJ3NldFZhcmlhYmxlJywgJ2lkJywgMTIzXSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9tZnEucHVzaCwgWydzZXRWYXJpYWJsZScsICdhJywgMV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9tZnEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudC1uYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9tZnEucHVzaCwgWydzZXRWYXJpYWJsZScsICdldmVudCcsICdldmVudC1uYW1lJ10pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBwcm9wcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQtbmFtZScsIHsgYTogMSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX21mcS5wdXNoLCBbJ3NldFZhcmlhYmxlJywgJ2V2ZW50JywgJ2V2ZW50LW5hbWUnXSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9tZnEucHVzaCwgWydzZXRWYXJpYWJsZScsICdhJywgMV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdNb3VzZVN0YXRzJywgZnVuY3Rpb24oKXtcbiAgdmFyIE1vdXNlU3RhdHMgPSBwbHVnaW47XG4gIHZhciBtb3VzZXN0YXRzO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBhY2NvdW50TnVtYmVyOiAnNTUzMjM3NTczMDMzNTYxNjI5NSdcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBtb3VzZXN0YXRzID0gbmV3IE1vdXNlU3RhdHMob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKG1vdXNlc3RhdHMpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIG1vdXNlc3RhdHMucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKE1vdXNlU3RhdHMsIGludGVncmF0aW9uKCdNb3VzZVN0YXRzJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnbXNhYScpXG4gICAgICAuZ2xvYmFsKCdNb3VzZVN0YXRzVmlzaXRvclBsYXliYWNrcycpXG4gICAgICAub3B0aW9uKCdhY2NvdW50TnVtYmVyJywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1Yihtb3VzZXN0YXRzLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQobW91c2VzdGF0cy5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChtb3VzZXN0YXRzLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ05hdmlseXRpY3MnLCBmdW5jdGlvbigpe1xuICB2YXIgTmF2aWx5dGljcyA9IHBsdWdpbjtcbiAgdmFyIG5hdmlseXRpY3M7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBzZXR0aW5ncztcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgc2V0dGluZ3MgPSB7XG4gICAgICBtZW1iZXJJZDogJzEwNDInLFxuICAgICAgcHJvamVjdElkOiAnNzMnXG4gICAgfTtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIG5hdmlseXRpY3MgPSBuZXcgTmF2aWx5dGljcyhzZXR0aW5ncyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKG5hdmlseXRpY3MpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIG5hdmlseXRpY3MucmVzZXQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoTmF2aWx5dGljcywgaW50ZWdyYXRpb24oJ05hdmlseXRpY3MnKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdfX25scycpXG4gICAgICAub3B0aW9uKCdtZW1iZXJJZCcsICcnKVxuICAgICAgLm9wdGlvbigncHJvamVjdElkJywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihuYXZpbHl0aWNzLCAnbG9hZCcpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQobmF2aWx5dGljcy5sb2FkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuX19ubHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KG51bGwgPT0gd2luZG93Ll9fbmxzKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbChbXSwgd2luZG93Ll9fbmxzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChuYXZpbHl0aWNzLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fX25scywgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRhZyB0aGUgcmVjb3JkaW5nJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fX25scy5wdXNoLCBbJ3RhZ1JlY29yZGluZycsICdldmVudCddKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHRpY2sgPSByZXF1aXJlKCduZXh0LXRpY2snKTtcbnZhciBvbmNlID0gcmVxdWlyZSgnb25jZScpO1xudmFyIHdoZW4gPSByZXF1aXJlKCd3aGVuJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG52YXIgZXh0ZW5kID0gcmVxdWlyZSgnZXh0ZW5kJyk7XG5cbmRlc2NyaWJlKCdPbGFyaycsIGZ1bmN0aW9uKCl7XG4gIHZhciBPbGFyayA9IHBsdWdpbjtcbiAgdmFyIG9sYXJrO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBzaXRlSWQ6ICc1Nzk4LTk0OS0xMC0xNjkyJ1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIG9sYXJrID0gbmV3IE9sYXJrKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChvbGFyayk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBhZnRlcihmdW5jdGlvbigpe1xuICAgIG9sYXJrLnJlc2V0KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKE9sYXJrLCBpbnRlZ3JhdGlvbignT2xhcmsnKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdvbGFyaycpXG4gICAgICAub3B0aW9uKCdpZGVudGlmeScsIHRydWUpXG4gICAgICAub3B0aW9uKCdwYWdlJywgdHJ1ZSlcbiAgICAgIC5vcHRpb24oJ3NpdGVJZCcsICcnKVxuICAgICAgLm9wdGlvbigndHJhY2snLCBmYWxzZSkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdywgJ29sYXJrJyk7XG4gICAgICBhbmFseXRpY3Muc3R1YihvbGFyaywgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgICAgb2xhcmsucmVzZXQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcGFzcyBpbiBncm91cCBpZCB0byBgY29uZmlndXJlYCcsIGZ1bmN0aW9uKCl7XG4gICAgICBvbGFyay5vcHRpb25zLmdyb3VwSWQgPSAnLWdyb3VwSWQtJztcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cub2xhcmssICdhcGkuY2hhdC5zZXRPcGVyYXRvckdyb3VwJywgeyBncm91cDogJy1ncm91cElkLScgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKG9sYXJrLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgdGhlIHdpbmRvdy5vbGFyayB2YXJpYWJsZScsIGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5vbGFyayk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNldCB1cCBleHBhbmQvc2hyaW5rIGxpc3RlbmVycycsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgZXhwYW5kVGhlbihmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KG9sYXJrLl9vcGVuKTtcbiAgICAgICAgc2hyaW5rVGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIW9sYXJrLl9vcGVuKTtcbiAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LCAnb2xhcmsnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm9sYXJrLCAnYXBpLnZpc2l0b3IudXBkYXRlQ3VzdG9tRmllbGRzJywge1xuICAgICAgICAgIGlkOiAnaWQnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkodW5kZWZpbmVkLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vbGFyaywgJ2FwaS52aXNpdG9yLnVwZGF0ZUN1c3RvbUZpZWxkcycsIHtcbiAgICAgICAgICB0cmFpdDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vbGFyaywgJ2FwaS52aXNpdG9yLnVwZGF0ZUN1c3RvbUZpZWxkcycsIHtcbiAgICAgICAgICB0cmFpdDogdHJ1ZSxcbiAgICAgICAgICBpZDogJ2lkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZW1haWwnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkodW5kZWZpbmVkLCB7IGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm9sYXJrLCAnYXBpLnZpc2l0b3IudXBkYXRlRW1haWxBZGRyZXNzJywge1xuICAgICAgICAgIGVtYWlsQWRkcmVzczogJ25hbWVAZXhhbXBsZS5jb20nXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGRudCBzZW5kIGFuIGVtcHR5IGVtYWlsJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cub2xhcmssICdhcGkudmlzaXRvci51cGRhdGVFbWFpbEFkZHJlc3MnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHVuZGVmaW5lZCwgeyBuYW1lOiAnZmlyc3QgbGFzdCcgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm9sYXJrLCAnYXBpLnZpc2l0b3IudXBkYXRlRnVsbE5hbWUnLCB7XG4gICAgICAgICAgZnVsbE5hbWU6ICdmaXJzdCBsYXN0J1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkbnQgc2VuZCBhbiBlbXB0eSBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cub2xhcmssICdhcGkudmlzaXRvci51cGRhdGVGdWxsTmFtZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZmFsbGJhY2sgdG8gc2VuZGluZyBmaXJzdCBhbmQgbGFzdCBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHVuZGVmaW5lZCwge1xuICAgICAgICAgIGZpcnN0TmFtZTogJ2ZpcnN0JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ2xhc3QnXG4gICAgICAgIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vbGFyaywgJ2FwaS52aXNpdG9yLnVwZGF0ZUZ1bGxOYW1lJywge1xuICAgICAgICAgIGZ1bGxOYW1lOiAnZmlyc3QgbGFzdCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBmYWxsYmFjayB0byBzZW5kaW5nIG9ubHkgYSBmaXJzdCBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHVuZGVmaW5lZCwgeyBmaXJzdE5hbWU6ICdmaXJzdCcgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm9sYXJrLCAnYXBpLnZpc2l0b3IudXBkYXRlRnVsbE5hbWUnLCB7XG4gICAgICAgICAgZnVsbE5hbWU6ICdmaXJzdCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgcGhvbmUgbnVtYmVyJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHVuZGVmaW5lZCwgeyBwaG9uZTogJ3Bob25lJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cub2xhcmssICdhcGkudmlzaXRvci51cGRhdGVQaG9uZU51bWJlcicsIHtcbiAgICAgICAgICBwaG9uZU51bWJlcjogJ3Bob25lJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkbnQgc2VuZCBhbiBlbXB0eSBwaG9uZSBudW1iZXInLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5vbGFyaywgJ2FwaS52aXNpdG9yLnVwZGF0ZVBob25lTnVtYmVyJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB1cyBhbiBpZCBhcyBhIG5pY2tuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vbGFyaywgJ2FwaS5jaGF0LnVwZGF0ZVZpc2l0b3JOaWNrbmFtZScsIHtcbiAgICAgICAgICBzbmlwcGV0OiAnaWQnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHJlZmVyIGEgdXNlcm5hbWUgYXMgYSBuaWNrbmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHVzZXJuYW1lOiAndXNlcm5hbWUnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vbGFyaywgJ2FwaS5jaGF0LnVwZGF0ZVZpc2l0b3JOaWNrbmFtZScsIHtcbiAgICAgICAgICBzbmlwcGV0OiAndXNlcm5hbWUnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHJlZmVyIGFuIGVtYWlsIGFzIGEgbmlja25hbWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywge1xuICAgICAgICAgIHVzZXJuYW1lOiAndXNlcm5hbWUnLFxuICAgICAgICAgIGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbSdcbiAgICAgICAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm9sYXJrLCAnYXBpLmNoYXQudXBkYXRlVmlzaXRvck5pY2tuYW1lJywge1xuICAgICAgICAgIHNuaXBwZXQ6ICduYW1lQGV4YW1wbGUuY29tJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHByZWZlciBhIG5hbWUgYXMgYSBuaWNrbmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7XG4gICAgICAgICAgdXNlcm5hbWU6ICd1c2VybmFtZScsXG4gICAgICAgICAgbmFtZTogJ25hbWUnXG4gICAgICAgIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vbGFyaywgJ2FwaS5jaGF0LnVwZGF0ZVZpc2l0b3JOaWNrbmFtZScsIHtcbiAgICAgICAgICBzbmlwcGV0OiAnbmFtZSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwcmVmZXIgYSBuYW1lIGFuZCBlbWFpbCBhcyBhIG5pY2tuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHtcbiAgICAgICAgICB1c2VybmFtZTogJ3VzZXJuYW1lJyxcbiAgICAgICAgICBuYW1lOiAnbmFtZScsXG4gICAgICAgICAgZW1haWw6ICduYW1lQGV4YW1wbGUuY29tJ1xuICAgICAgICB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cub2xhcmssICdhcGkuY2hhdC51cGRhdGVWaXNpdG9yTmlja25hbWUnLCB7XG4gICAgICAgICAgc25pcHBldDogJ25hbWUgKG5hbWVAZXhhbXBsZS5jb20pJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ25vdCBvcGVuJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnNweSh3aW5kb3csICdvbGFyaycpO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGl0KCdzaG91bGQgbm90IHNlbmQgYW4gZXZlbnQgd2hlbiB0aGUgY2hhdCBpc250IG9wZW4nLCBmdW5jdGlvbigpe1xuICAgICAgICAgIG9sYXJrLm9wdGlvbnMucGFnZSA9IHRydWU7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cub2xhcmspO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBhbiBldmVudCBieSBkZWZhdWx0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50Jyk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Lm9sYXJrKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBhbiBldmVudCB3aGVuIHRoZSBjaGF0IGlzbnQgb3BlbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgb2xhcmsub3B0aW9ucy50cmFjayA9IHRydWU7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5vbGFyayk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnb3BlbiBhbmQgbm90IGNvbnZlcnNpbmcnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgICAgZXhwYW5kVGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5zcHkod2luZG93LCAnb2xhcmsnKTtcbiAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGFmdGVyRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICAgICAgc2hyaW5rVGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBhIG5vdGlmaWNhdGlvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cub2xhcmssICdhcGkuY2hhdC5zZW5kTm90aWZpY2F0aW9uVG9PcGVyYXRvcicpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIG5vdCBzZW5kIGEgbm90aWZpY2F0aW9uIHdoZW4gdGhlIGNoYXQgaXNudCBvcGVuJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBvbGFyay5vcHRpb25zLnBhZ2UgPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Lm9sYXJrLCAnYXBpLmNoYXQuc2VuZE5vdGlmaWNhdGlvblRvT3BlcmF0b3InKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGl0KCdzaG91bGQgbm90IHNlbmQgYSBub3RpZmljYXRpb24gYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5vbGFyaywgJ2FwaS5jaGF0LnNlbmROb3RpZmljYXRpb25Ub09wZXJhdG9yJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgbm90IHNlbmQgYSBub3RpZmljYXRpb24gd2hlbiB0aGUgY2hhdCBpc250IG9wZW4nLCBmdW5jdGlvbigpe1xuICAgICAgICAgIG9sYXJrLm9wdGlvbnMudHJhY2sgPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cub2xhcmssICdhcGkuY2hhdC5zZW5kTm90aWZpY2F0aW9uVG9PcGVyYXRvcicpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ29wZW4gYW5kIGNvbnZlcnNpbmcnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgICAgLy8gZm9yY2UgdGhlIGNoYXQgdG8gc3RhcnQsIHNvIHRoZSB1c2VyIGlzIGNvbnNpZGVyZWQgXCJjb252ZXJzaW5nXCJcbiAgICAgICAgd2luZG93Lm9sYXJrKCdhcGkuY2hhdC5zZW5kTWVzc2FnZVRvVmlzaXRvcicsIHsgYm9keTogJ2NvbnZlcnNpbmcnIH0pO1xuICAgICAgICBleHBhbmRUaGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnNweSh3aW5kb3csICdvbGFyaycpO1xuICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgICAgICBzaHJpbmtUaGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgnI3BhZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYSBwYWdlIG5hbWUnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCdOYW1lJyk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cub2xhcmssICdhcGkuY2hhdC5zZW5kTm90aWZpY2F0aW9uVG9PcGVyYXRvcicsIHtcbiAgICAgICAgICAgIGJvZHk6ICdsb29raW5nIGF0IG5hbWUgcGFnZSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgcGFnZSBjYXRlZ29yeSBhbmQgbmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vbGFyaywgJ2FwaS5jaGF0LnNlbmROb3RpZmljYXRpb25Ub09wZXJhdG9yJywge1xuICAgICAgICAgICAgYm9keTogJ2xvb2tpbmcgYXQgY2F0ZWdvcnkgbmFtZSBwYWdlJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYSBwYWdlIHVybCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoeyB1cmw6ICd1cmwnIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm9sYXJrLCAnYXBpLmNoYXQuc2VuZE5vdGlmaWNhdGlvblRvT3BlcmF0b3InLCB7XG4gICAgICAgICAgICBib2R5OiAnbG9va2luZyBhdCB1cmwnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgbm90IHNlbmQgYW4gZXZlbnQgd2hlbiBwYWdlIGlzIGRpc2FibGVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBvbGFyay5vcHRpb25zLnBhZ2UgPSBmYWxzZTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5vbGFyayk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIG9sYXJrLm9wdGlvbnMudHJhY2sgPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vbGFyaywgJ2FwaS5jaGF0LnNlbmROb3RpZmljYXRpb25Ub09wZXJhdG9yJywge1xuICAgICAgICAgICAgYm9keTogJ3Zpc2l0b3IgdHJpZ2dlcmVkIFwiZXZlbnRcIidcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZnVuY3Rpb24gZXhwYW5kVGhlbihmbikge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9scmstc3RhdGUtZXhwYW5kZWQnKSkgcmV0dXJuIGZuKCk7XG4gIHdpbmRvdy5vbGFyaygnYXBpLmJveC5vbkV4cGFuZCcsIG9uY2UoZm4pKTtcbiAgd2luZG93Lm9sYXJrKCdhcGkuYm94LmV4cGFuZCcpO1xufVxuXG5mdW5jdGlvbiBzaHJpbmtUaGVuKGZuKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub2xyay1zdGF0ZS1jb21wcmVzc2VkJykpIHJldHVybiBmbigpO1xuICB3aW5kb3cub2xhcmsoJ2FwaS5ib3gub25TaHJpbmsnLCBvbmNlKGZuKSk7XG4gIHdpbmRvdy5vbGFyaygnYXBpLmJveC5zaHJpbmsnKTtcbn0iLCJcbi8qKlxuICogSWRlbnRpZmllci5cbiAqL1xuXG52YXIgbiA9IDA7XG5cbi8qKlxuICogR2xvYmFsLlxuICovXG5cbnZhciBnbG9iYWwgPSAoZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMgfSkoKTtcblxuLyoqXG4gKiBNYWtlIGBmbmAgY2FsbGFibGUgb25seSBvbmNlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbikge1xuICB2YXIgaWQgPSBuKys7XG5cbiAgZnVuY3Rpb24gb25jZSgpe1xuICAgIC8vIG5vIHJlY2VpdmVyXG4gICAgaWYgKHRoaXMgPT0gZ2xvYmFsKSB7XG4gICAgICBpZiAob25jZS5jYWxsZWQpIHJldHVybjtcbiAgICAgIG9uY2UuY2FsbGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIC8vIHJlY2VpdmVyXG4gICAgdmFyIGtleSA9ICdfX2NhbGxlZF8nICsgaWQgKyAnX18nO1xuICAgIGlmICh0aGlzW2tleV0pIHJldHVybjtcbiAgICB0aGlzW2tleV0gPSB0cnVlO1xuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIG9uY2U7XG59O1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgdGljayA9IHJlcXVpcmUoJ25leHQtdGljaycpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnT3B0aW1pemVseScsIGZ1bmN0aW9uKCl7XG4gIHZhciBPcHRpbWl6ZWx5ID0gcGx1Z2luO1xuICB2YXIgb3B0aW1pemVseTtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7fTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBvcHRpbWl6ZWx5ID0gbmV3IE9wdGltaXplbHkob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKG9wdGltaXplbHkpO1xuXG4gICAgd2luZG93Lm9wdGltaXplbHkuZGF0YSA9IHtcbiAgICAgIGV4cGVyaW1lbnRzOiB7IDA6IHsgbmFtZTogJ1Rlc3QnIH0gfSxcbiAgICAgIHN0YXRlOiB7IHZhcmlhdGlvbk5hbWVzTWFwOiB7IDA6ICdWYXJpYXRpb24nIH0gfVxuICAgIH07XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgb3B0aW1pemVseS5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihvcHRpbWl6ZWx5LCAnbG9hZCcpO1xuICAgICAgYW5hbHl0aWNzLnN0dWIob3B0aW1pemVseSwgJ3JlcGxheScpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpbml0aWFsaXplJywgZnVuY3Rpb24oKXtcbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjcmVwbGF5IGJ5IGRlZmF1bHQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgdGljayhmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQob3B0aW1pemVseS5yZXBsYXkpO1xuICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgY2FsbCAjcmVwbGF5IGlmIHZhcmlhdGlvbnMgYXJlIGRpc2FibGVkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICAgIG9wdGltaXplbHkub3B0aW9ucy52YXJpYXRpb25zID0gZmFsc2U7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIHRpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbChvcHRpbWl6ZWx5LnJlcGxheSk7XG4gICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnI3JlcGxheScsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoYW5hbHl0aWNzLCAnaWRlbnRpZnknKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVwbGF5IHZhcmlhdGlvbiB0cmFpdHMnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIG9wdGltaXplbHkub3B0aW9ucy52YXJpYXRpb25zID0gdHJ1ZTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgdGljayhmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKGFuYWx5dGljcy5pZGVudGlmeSwge1xuICAgICAgICAgICdFeHBlcmltZW50OiBUZXN0JzogJ1ZhcmlhdGlvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Lm9wdGltaXplbHksICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vcHRpbWl6ZWx5LnB1c2gsIFsndHJhY2tFdmVudCcsICdldmVudCcsIHt9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50IGFuZCBwcm9wZXJ0aWVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgcHJvcGVydHk6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lm9wdGltaXplbHkucHVzaCwgWyd0cmFja0V2ZW50JywgJ2V2ZW50Jywge1xuICAgICAgICAgIHByb3BlcnR5OiB0cnVlXG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNoYW5nZSByZXZlbnVlIHRvIGNlbnRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcsIHsgcmV2ZW51ZTogOS45OSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cub3B0aW1pemVseS5wdXNoLCBbJ3RyYWNrRXZlbnQnLCAnZXZlbnQnLCB7XG4gICAgICAgICAgcmV2ZW51ZTogOTk5XG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Lm9wdGltaXplbHksICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50IGZvciBhIG5hbWVkIHBhZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnSG9tZScpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vcHRpbWl6ZWx5LnB1c2gsIFsndHJhY2tFdmVudCcsICdWaWV3ZWQgSG9tZSBQYWdlJywge1xuICAgICAgICAgIG5hbWU6ICdIb21lJyxcbiAgICAgICAgICBwYXRoOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgICAgcmVmZXJyZXI6IGRvY3VtZW50LnJlZmVycmVyLFxuICAgICAgICAgIHRpdGxlOiBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICBzZWFyY2g6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gsXG4gICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKSArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2hcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCBmb3IgYSBuYW1lZCBhbmQgY2F0ZWdvcml6ZWQgcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdCbG9nJywgJ05ldyBJbnRlZ3JhdGlvbicpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5vcHRpbWl6ZWx5LnB1c2gsIFsndHJhY2tFdmVudCcsICdWaWV3ZWQgQmxvZyBOZXcgSW50ZWdyYXRpb24gUGFnZScsIHtcbiAgICAgICAgICBjYXRlZ29yeTogJ0Jsb2cnLFxuICAgICAgICAgIG5hbWU6ICdOZXcgSW50ZWdyYXRpb24nLFxuICAgICAgICAgIHBhdGg6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgICByZWZlcnJlcjogZG9jdW1lbnQucmVmZXJyZXIsXG4gICAgICAgICAgdGl0bGU6IGRvY3VtZW50LnRpdGxlLFxuICAgICAgICAgIHNlYXJjaDogd2luZG93LmxvY2F0aW9uLnNlYXJjaCxcbiAgICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAod2luZG93LmxvY2F0aW9uLnBvcnQgPyAnOicgKyB3aW5kb3cubG9jYXRpb24ucG9ydDogJycpICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaFxuICAgICAgICB9XSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ1BlcmZlY3QgQXVkaWVuY2UnLCBmdW5jdGlvbigpe1xuICB2YXIgUGVyZmVjdEF1ZGllbmNlID0gcGx1Z2luO1xuICB2YXIgcGVyZmVjdDtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgc2l0ZUlkOiAnNGZmNmFkZTQzNjFlZDUwMDAyMDAwMGE1J1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIHBlcmZlY3QgPSBuZXcgUGVyZmVjdEF1ZGllbmNlKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChwZXJmZWN0KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBwZXJmZWN0LnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShQZXJmZWN0QXVkaWVuY2UsIGludGVncmF0aW9uKCdQZXJmZWN0IEF1ZGllbmNlJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnX3BxJylcbiAgICAgIC5vcHRpb24oJ3NpdGVJZCcsICcnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIocGVyZmVjdCwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB0aGUgd2luZG93Ll9wcSBvYmplY3QnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCF3aW5kb3cuX3BxKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX3BxIGluc3RhbmNlb2YgQXJyYXkpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQocGVyZmVjdC5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChwZXJmZWN0LCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fcHEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fcHEucHVzaCwgWyd0cmFjaycsICdldmVudCddKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN2aWV3ZWRQcm9kdWN0JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9wcSwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSB0cmFjayBhbmQgYSB0cmFja1Byb2R1Y3Qgd2l0aCBwcm9kdWN0IElEJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdWaWV3ZWQgUHJvZHVjdCcsIHtcbiAgICAgICAgICBpZDogJzUwN2YxZjc3YmNmODZjZDc5OTQzOTAxMScsXG4gICAgICAgICAgc2t1OiAnNDU3OTAtMzInLFxuICAgICAgICAgIG5hbWU6ICdNb25vcG9seTogM3JkIEVkaXRpb24nLFxuICAgICAgICAgIHByaWNlOiAxOC45OSxcbiAgICAgICAgICBjYXRlZ29yeTogJ0dhbWVzJ1xuICAgICAgICB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3BxLnB1c2gsIFsndHJhY2snLCAnVmlld2VkIFByb2R1Y3QnXSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9wcS5wdXNoLCBbJ3RyYWNrUHJvZHVjdCcsICc0NTc5MC0zMiddKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNjb21wbGV0ZWRPcmRlcicsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fcHEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGV2ZW50IGFuZCBvcmRlcklkLCByZXZlbnVlIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ0NvbXBsZXRlZCBPcmRlcicsIHtcbiAgICAgICAgICBvcmRlcklkOiAnMTIzNDUnLFxuICAgICAgICAgIHRvdGFsOiAzMCxcbiAgICAgICAgICByZXZlbnVlOiAyNSxcbiAgICAgICAgICBzaGlwcGluZzogMyxcbiAgICAgICAgICB0YXg6IDIsXG4gICAgICAgICAgZGlzY291bnQ6IDIuNSxcbiAgICAgICAgICBjb3Vwb246ICdoYXNicm9zJyxcbiAgICAgICAgICBjdXJyZW5jeTogJ1VTRCcsXG4gICAgICAgICAgcHJvZHVjdHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICc1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTEnLFxuICAgICAgICAgICAgICBza3U6ICc0NTc5MC0zMicsXG4gICAgICAgICAgICAgIG5hbWU6ICdNb25vcG9seTogM3JkIEVkaXRpb24nLFxuICAgICAgICAgICAgICBwcmljZTogMTksXG4gICAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgICBjYXRlZ29yeTogJ0dhbWVzJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICc1MDViZDc2Nzg1ZWJiNTA5ZmMxODM3MzMnLFxuICAgICAgICAgICAgICBza3U6ICc0NjQ5My0zMicsXG4gICAgICAgICAgICAgIG5hbWU6ICdVbm8gQ2FyZCBHYW1lJyxcbiAgICAgICAgICAgICAgcHJpY2U6IDMsXG4gICAgICAgICAgICAgIHF1YW50aXR5OiAyLFxuICAgICAgICAgICAgICBjYXRlZ29yeTogJ0dhbWVzJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9wcS5wdXNoLCBbJ3RyYWNrJywgJ0NvbXBsZXRlZCBPcmRlcicsIHtvcmRlcklkOiAnMTIzNDUnLCByZXZlbnVlOiAzMH1dKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgZGF0ZSA9IHJlcXVpcmUoJ2xvYWQtZGF0ZScpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnUGluZ2RvbScsIGZ1bmN0aW9uKCl7XG4gIHZhciBQaW5nZG9tID0gcGx1Z2luO1xuICB2YXIgcGluZ2RvbTtcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgaWQ6ICc1MTY4ZjhjNmFiZTUzZGI3MzIwMDAwMDAnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgcGluZ2RvbSA9IG5ldyBQaW5nZG9tKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChwaW5nZG9tKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBwaW5nZG9tLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShQaW5nZG9tLCBpbnRlZ3JhdGlvbignUGluZ2RvbScpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ19wcnVtJylcbiAgICAgIC5nbG9iYWwoJ1BSVU1fRVBJU09ERVMnKVxuICAgICAgLm9wdGlvbignaWQnLCAnJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKHBpbmdkb20sICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChwaW5nZG9tLmxvYWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHVzaCB0aGUgaWQgb250byB3aW5kb3cuX3BydW0nLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fcHJ1bVswXSwgWyAnaWQnLCBvcHRpb25zLmlkIF0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKHBpbmdkb20sIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1hcmsgdGhlIGZpcnN0IGJ5dGUnLCBmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLmVxdWFsKGRhdGUuZ2V0VGltZSgpLCB3aW5kb3cuUFJVTV9FUElTT0RFUy5tYXJrcy5maXJzdGJ5dGUpO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnUGl3aWsnLCBmdW5jdGlvbigpe1xuICB2YXIgUGl3aWsgPSBwbHVnaW47XG4gIHZhciBwaXdpaztcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgc2l0ZUlkOiA0MixcbiAgICB1cmw6ICdodHRwczovL2RlbW8ucGl3aWsub3JnJ1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIHBpd2lrID0gbmV3IFBpd2lrKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChwaXdpayk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgcGl3aWsucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKFBpd2lrLCBpbnRlZ3JhdGlvbignUGl3aWsnKVxuICAgICAgLmdsb2JhbCgnX3BhcScpXG4gICAgICAub3B0aW9uKCdzaXRlSWQnLCAnJylcbiAgICAgIC5vcHRpb24oJ3VybCcsIG51bGwpXG4gICAgICAubWFwcGluZygnZ29hbHMnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIocGl3aWssICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChwaXdpay5sb2FkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHB1c2ggdGhlIGlkIG9udG8gd2luZG93Ll9wYXEnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5fcGFxWzBdLCBbJ3NldFNpdGVJZCcsIG9wdGlvbnMuc2l0ZUlkXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwdXNoIHRoZSB1cmwgb250byB3aW5kb3cuX3BhcScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwod2luZG93Ll9wYXFbMV0sIFsnc2V0VHJhY2tlclVybCcsIG9wdGlvbnMudXJsICsgXCIvcGl3aWsucGhwXCJdKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChwaXdpaywgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSBwYWdlIHZpZXcnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3RyYWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9wYXEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBnb2FscycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHBpd2lrLm9wdGlvbnMuZ29hbHMgPSBbeyBrZXk6ICdnb2FsJywgdmFsdWU6IDEgfV07XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZ29hbCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fcGFxLnB1c2gsIFsndHJhY2tHb2FsJywgMSwgMF0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCAucmV2ZW51ZSgpJywgZnVuY3Rpb24oKXtcbiAgICAgICAgcGl3aWsub3B0aW9ucy5nb2FscyA9IFt7IGtleTogJ2dvYWwnLCB2YWx1ZTogMiB9XTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdnb2FsJywgeyByZXZlbnVlOiAxMCB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3BhcS5wdXNoLCBbJ3RyYWNrR29hbCcsIDIsIDEwXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIC50b3RhbCgpJywgZnVuY3Rpb24oKXtcbiAgICAgICAgcGl3aWsub3B0aW9ucy5nb2FscyA9IFt7IGtleTogJ2NvbXBsZXRlZCBvcmRlcicsIHZhbHVlOiAxMCB9XTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdDb21wbGV0ZWQgT3JkZXInLCB7IHRvdGFsOiAyMCB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3BhcS5wdXNoLCBbJ3RyYWNrR29hbCcsIDEwLCAyMF0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdQcmVhY3QnLCBmdW5jdGlvbigpe1xuICB2YXIgUHJlYWN0ID0gcGx1Z2luO1xuICB2YXIgcHJlYWN0O1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBwcm9qZWN0Q29kZTogJ3gnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgcHJlYWN0ID0gbmV3IFByZWFjdChvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQocHJlYWN0KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBwcmVhY3QucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKFByZWFjdCwgaW50ZWdyYXRpb24oJ1ByZWFjdCcpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ19sbnEnKVxuICAgICAgLm9wdGlvbigncHJvamVjdENvZGUnLCAnJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKHByZWFjdCwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIHB1c2ggX3NldENvZGUgb250byB0aGUgd2luZG93Ll9sbnEgb2JqZWN0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuX2xucVswXSwgWydfc2V0Q29kZScsIG9wdGlvbnMucHJvamVjdENvZGVdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHByZWFjdC5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChwcmVhY3QsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9sbnEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fbG5xLnB1c2gsIFsnX3NldFBlcnNvbkRhdGEnLCB7XG4gICAgICAgICAgcHJvcGVydGllczogeyBpZDogJ2lkJyB9LFxuICAgICAgICAgIGVtYWlsOiB1bmRlZmluZWQsXG4gICAgICAgICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICAgICAgIHVpZDogJ2lkJyxcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGRudCBzZW5kIGp1c3QgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5fbG5xLnB1c2gpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCBhbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9sbnEucHVzaCwgWydfc2V0UGVyc29uRGF0YScsIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7IHRyYWl0OiB0cnVlLCBpZDogJ2lkJyB9LFxuICAgICAgICAgIGVtYWlsOiB1bmRlZmluZWQsXG4gICAgICAgICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICAgICAgIHVpZDogJ2lkJyxcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBlbWFpbCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9sbnEucHVzaCwgWydfc2V0UGVyc29uRGF0YScsIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScsIGlkOiAnaWQnIH0sXG4gICAgICAgICAgZW1haWw6ICduYW1lQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgdWlkOiAnaWQnLFxuICAgICAgICB9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGEgbmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IG5hbWU6ICduYW1lJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2xucS5wdXNoLCBbJ19zZXRQZXJzb25EYXRhJywge1xuICAgICAgICAgIHByb3BlcnRpZXM6IHsgbmFtZTogJ25hbWUnLCBpZDogJ2lkJyB9LFxuICAgICAgICAgIGVtYWlsOiB1bmRlZmluZWQsXG4gICAgICAgICAgbmFtZTogJ25hbWUnLFxuICAgICAgICAgIHVpZDogJ2lkJyxcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2dyb3VwJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll9sbnEsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmdyb3VwKCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fbG5xLnB1c2gsIFsnX3NldEFjY291bnQnLCB7IGlkOiAnaWQnIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuZ3JvdXAoJ2lkJywgeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2xucS5wdXNoLCBbJ19zZXRBY2NvdW50Jywge1xuICAgICAgICAgIGlkOiAnaWQnLFxuICAgICAgICAgIHByb3BlcnR5OiB0cnVlXG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fbG5xLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX2xucS5wdXNoLCBbJ19sb2dFdmVudCcsIHsgbmFtZTogJ2V2ZW50JyB9LCB7fV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCBhbmQgcHJvcGVydGllcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHByb3BlcnR5OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fbG5xLnB1c2gsIFsnX2xvZ0V2ZW50JywgeyBuYW1lOiAnZXZlbnQnIH0sIHsgcHJvcGVydHk6IHRydWUgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc3BlY2lhbCBjYXNlIGEgcmV2ZW51ZSBwcm9wZXJ0eScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHJldmVudWU6IDkuOTkgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9sbnEucHVzaCwgWydfbG9nRXZlbnQnLCB7XG4gICAgICAgICAgbmFtZTogJ2V2ZW50JyxcbiAgICAgICAgICByZXZlbnVlOiA5OTlcbiAgICAgICAgfSwge31dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNwZWNpYWwgY2FzZSBhIG5vdGUgcHJvcGVydHknLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyBub3RlOiAnbm90ZScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9sbnEucHVzaCwgWydfbG9nRXZlbnQnLCB7XG4gICAgICAgICAgbmFtZTogJ2V2ZW50JyxcbiAgICAgICAgICBub3RlOiAnbm90ZSdcbiAgICAgICAgfSwge31dKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZS5za2lwKCdRdWFsYXJvbycsIGZ1bmN0aW9uKCl7XG4gIHZhciBRdWFsYXJvbyA9IHBsdWdpbjtcbiAgdmFyIHF1YWxhcm9vO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBjdXN0b21lcklkOiAnNDc1MTcnLFxuICAgIHNpdGVUb2tlbjogJzlGZCdcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBxdWFsYXJvbyA9IG5ldyBRdWFsYXJvbyhvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQocXVhbGFyb28pO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIHF1YWxhcm9vLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShRdWFsYXJvbywgaW50ZWdyYXRpb24oJ1F1YWxhcm9vJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnX2tpcScpXG4gICAgICAub3B0aW9uKCdjdXN0b21lcklkJywgJycpXG4gICAgICAub3B0aW9uKCdzaXRlVG9rZW4nLCAnJylcbiAgICAgIC5vcHRpb24oJ3RyYWNrJywgZmFsc2UpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihxdWFsYXJvbywgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3aW5kb3cuX2tpcScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy5fa2lxKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX2tpcSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydChxdWFsYXJvby5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZChxdWFsYXJvbywgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaWRlbnRpZnknLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX2tpcSwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9raXEucHVzaCwgWydpZGVudGlmeScsICdpZCddKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9raXEucHVzaCwgWydzZXQnLCB7IHRyYWl0OiB0cnVlIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fa2lxLnB1c2gsIFsnaWRlbnRpZnknLCAnaWQnXSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9raXEucHVzaCwgWydzZXQnLCB7IHRyYWl0OiB0cnVlLCBpZDogJ2lkJyB9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwcmVmZXIgYW4gZW1haWwnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBlbWFpbDogJ25hbWVAZXhhbXBsZS5jb20nIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fa2lxLnB1c2gsIFsnaWRlbnRpZnknLCAnbmFtZUBleGFtcGxlLmNvbSddKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fa2lxLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHNlbmQgYW55dGhpbmcgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Ll9raXEucHVzaCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZXQgYW4gZXZlbnQgdHJhaXQnLCBmdW5jdGlvbigpe1xuICAgICAgICBxdWFsYXJvby5vcHRpb25zLnRyYWNrID0gdHJ1ZTtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fa2lxLnB1c2gsIFsnc2V0JywgeyAnVHJpZ2dlcmVkOiBldmVudCc6IHRydWUgfV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdRdWFudGNhc3QnLCBmdW5jdGlvbigpe1xuICB2YXIgUXVhbnRjYXN0ID0gcGx1Z2luO1xuICB2YXIgcXVhbnRjYXN0O1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBwQ29kZTogJ3AtWkRzakpVdHA1ODNTZSdcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBxdWFudGNhc3QgPSBuZXcgUXVhbnRjYXN0KG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChxdWFudGNhc3QpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIHF1YW50Y2FzdC5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoUXVhbnRjYXN0LCBpbnRlZ3JhdGlvbignUXVhbnRjYXN0JylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnX3FldmVudHMnKVxuICAgICAgLmdsb2JhbCgnX19xYycpXG4gICAgICAub3B0aW9uKCdwQ29kZScsIG51bGwpXG4gICAgICAub3B0aW9uKCdhZHZlcnRpc2UnLCBmYWxzZSkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKHF1YW50Y2FzdCwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIHB1c2ggdGhlIHBDb2RlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX3FldmVudHNbMF0ucWFjY3QgPT09IG9wdGlvbnMucENvZGUpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHVzaCB0aGUgdXNlciBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy51c2VyKCkuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Ll9xZXZlbnRzWzBdLnVpZCA9PT0gJ2lkJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChxdWFudGNhc3QubG9hZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwdXNoIFwicmVmcmVzaFwiIHdpdGggbGFiZWxzIHdoZW4gZ2l2ZW4gYSBwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ2NhdGVnb3J5JywgJ25hbWUnKTtcbiAgICAgICAgdmFyIHB1c2hlZCA9IHdpbmRvdy5fcWV2ZW50c1swXTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydChvcHRpb25zLnBDb2RlID09IHB1c2hlZC5xYWNjdCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQobnVsbCA9PSBwdXNoZWQuZXZlbnQpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KCdwYWdlLmNhdGVnb3J5Lm5hbWUnID09IHB1c2hlZC5sYWJlbHMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKHF1YW50Y2FzdCwgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fcWV2ZW50cywgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHB1c2ggYSByZWZyZXNoIGV2ZW50IHdpdGggcENvZGUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fcWV2ZW50cy5wdXNoLCB7XG4gICAgICAgICAgZXZlbnQ6ICdyZWZyZXNoJyxcbiAgICAgICAgICBsYWJlbHM6ICdwYWdlLicsXG4gICAgICAgICAgcWFjY3Q6IG9wdGlvbnMucENvZGVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwdXNoIHRoZSBwYWdlIG5hbWUgYXMgYSBsYWJlbCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdQYWdlIE5hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3FldmVudHMucHVzaCwge1xuICAgICAgICAgIGV2ZW50OiAncmVmcmVzaCcsXG4gICAgICAgICAgbGFiZWxzOiAncGFnZS5QYWdlIE5hbWUnLFxuICAgICAgICAgIHFhY2N0OiBvcHRpb25zLnBDb2RlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHVzaCB0aGUgcGFnZSBuYW1lIGFzIGEgbGFiZWwgd2l0aG91dCBjb21tYXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnUGFnZSwgTmFtZScpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fcWV2ZW50cy5wdXNoLCB7XG4gICAgICAgICAgZXZlbnQ6ICdyZWZyZXNoJyxcbiAgICAgICAgICBsYWJlbHM6ICdwYWdlLlBhZ2U7IE5hbWUnLFxuICAgICAgICAgIHFhY2N0OiBvcHRpb25zLnBDb2RlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHVzaCB0aGUgcGFnZSBjYXRlZ29yeSBhbmQgbmFtZSBhcyBsYWJlbHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnQ2F0ZWdvcnknLCAnUGFnZScpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fcWV2ZW50cy5wdXNoLCB7XG4gICAgICAgICAgZXZlbnQ6ICdyZWZyZXNoJyxcbiAgICAgICAgICBsYWJlbHM6ICdwYWdlLkNhdGVnb3J5LlBhZ2UnLFxuICAgICAgICAgIHFhY2N0OiBvcHRpb25zLnBDb2RlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHVzaCB0aGUgdXNlciBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy51c2VyKCkuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9xZXZlbnRzLnB1c2gsIHtcbiAgICAgICAgICBldmVudDogJ3JlZnJlc2gnLFxuICAgICAgICAgIGxhYmVsczogJ3BhZ2UuJyxcbiAgICAgICAgICBxYWNjdDogb3B0aW9ucy5wQ29kZSxcbiAgICAgICAgICB1aWQ6ICdpZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJ3doZW4gYWR2ZXJ0aXNlIGlzIHRydWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBpdCgnc2hvdWxkIHByZWZpeCB3aXRoIF9mcC5ldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgcXVhbnRjYXN0Lm9wdGlvbnMuYWR2ZXJ0aXNlID0gdHJ1ZTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgnUGFnZSBOYW1lJyk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3FldmVudHMucHVzaCwge1xuICAgICAgICAgICAgZXZlbnQ6ICdyZWZyZXNoJyxcbiAgICAgICAgICAgIGxhYmVsczogJ19mcC5ldmVudC5QYWdlIE5hbWUnLFxuICAgICAgICAgICAgcWFjY3Q6IG9wdGlvbnMucENvZGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGNhdGVnb3J5IGFuZCBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBxdWFudGNhc3Qub3B0aW9ucy5hZHZlcnRpc2UgPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeSBOYW1lJywgJ1BhZ2UgTmFtZScpO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9xZXZlbnRzLnB1c2gsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncmVmcmVzaCcsXG4gICAgICAgICAgICBsYWJlbHM6ICdfZnAuZXZlbnQuQ2F0ZWdvcnkgTmFtZSBQYWdlIE5hbWUnLFxuICAgICAgICAgICAgcWFjY3Q6IG9wdGlvbnMucENvZGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaWRlbnRpZnknLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgdGhlIHVzZXIgaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Ll9xZXZlbnRzWzBdLnVpZCA9PT0gJ2lkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX3FldmVudHMsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwdXNoIGEgY2xpY2sgZXZlbnQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50Jyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9xZXZlbnRzLnB1c2gsIHtcbiAgICAgICAgICBldmVudDogJ2NsaWNrJyxcbiAgICAgICAgICBsYWJlbHM6ICdldmVudC5ldmVudCcsXG4gICAgICAgICAgcWFjY3Q6IG9wdGlvbnMucENvZGVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwdXNoIHJldmVudWUgZm9yIHRoZSBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHJldmVudWUgOiAxMC40NSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3FldmVudHMucHVzaCwge1xuICAgICAgICAgIGV2ZW50OiAnY2xpY2snLFxuICAgICAgICAgIGxhYmVsczogJ2V2ZW50LmV2ZW50JyxcbiAgICAgICAgICBxYWNjdDogb3B0aW9ucy5wQ29kZSxcbiAgICAgICAgICByZXZlbnVlOiAnMTAuNDUnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHVzaCB0aGUgdXNlciBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy51c2VyKCkuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3FldmVudHMucHVzaCwge1xuICAgICAgICAgIGV2ZW50OiAnY2xpY2snLFxuICAgICAgICAgIGxhYmVsczogJ2V2ZW50LmV2ZW50JyxcbiAgICAgICAgICBxYWNjdDogb3B0aW9ucy5wQ29kZSxcbiAgICAgICAgICB1aWQ6ICdpZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcGxldGVkIG9yZGVyIGV2ZW50cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnY29tcGxldGVkIG9yZGVyJywge1xuICAgICAgICAgIG9yZGVySWQ6ICc3ODBiYzU1JyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3RlY2gnLFxuICAgICAgICAgIHRvdGFsOiA5OS45OSxcbiAgICAgICAgICBzaGlwcGluZzogMTMuOTksXG4gICAgICAgICAgdGF4OiAyMC45OSxcbiAgICAgICAgICBwcm9kdWN0czogW3tcbiAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgcHJpY2U6IDI0Ljc1LFxuICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgc2t1OiAncC0yOTgnXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgcXVhbnRpdHk6IDMsXG4gICAgICAgICAgICBwcmljZTogMjQuNzUsXG4gICAgICAgICAgICBuYW1lOiAnb3RoZXIgcHJvZHVjdCcsXG4gICAgICAgICAgICBza3U6ICdwLTI5OSdcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3FldmVudHMucHVzaCwge1xuICAgICAgICAgIGV2ZW50OiAncmVmcmVzaCcsXG4gICAgICAgICAgbGFiZWxzOiAnZXZlbnQuY29tcGxldGVkIG9yZGVyJyxcbiAgICAgICAgICBvcmRlcmlkOiAnNzgwYmM1NScsXG4gICAgICAgICAgcWFjY3Q6IG9wdGlvbnMucENvZGUsXG4gICAgICAgICAgcmV2ZW51ZTogJzk5Ljk5J1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgnd2hlbiBhZHZlcnRpc2UgaXMgdHJ1ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGl0KCdzaG91bGQgcHJlZml4IHdpdGggX2ZwLmV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBxdWFudGNhc3Qub3B0aW9ucy5hZHZlcnRpc2UgPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fcWV2ZW50cy5wdXNoLCB7XG4gICAgICAgICAgICBldmVudDogJ2NsaWNrJyxcbiAgICAgICAgICAgIGxhYmVsczogJ19mcC5ldmVudC5ldmVudCcsXG4gICAgICAgICAgICBxYWNjdDogb3B0aW9ucy5wQ29kZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZWQgb3JkZXIgZXZlbnRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBxdWFudGNhc3Qub3B0aW9ucy5hZHZlcnRpc2UgPSB0cnVlO1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnY29tcGxldGVkIG9yZGVyJywge1xuICAgICAgICAgICAgb3JkZXJJZDogJzc4MGJjNTUnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICd0ZWNoJyxcbiAgICAgICAgICAgIHRvdGFsOiA5OS45OSxcbiAgICAgICAgICAgIHNoaXBwaW5nOiAxMy45OSxcbiAgICAgICAgICAgIHRheDogMjAuOTksXG4gICAgICAgICAgICBwcm9kdWN0czogW3tcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgICAgbmFtZTogJ215IHByb2R1Y3QnLFxuICAgICAgICAgICAgICBza3U6ICdwLTI5OCdcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IDMsXG4gICAgICAgICAgICAgIHByaWNlOiAyNC43NSxcbiAgICAgICAgICAgICAgbmFtZTogJ290aGVyIHByb2R1Y3QnLFxuICAgICAgICAgICAgICBza3U6ICdwLTI5OSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3FldmVudHMucHVzaCwge1xuICAgICAgICAgICAgZXZlbnQ6ICdyZWZyZXNoJyxcbiAgICAgICAgICAgIGxhYmVsczogJ19mcC5ldmVudC5jb21wbGV0ZWQgb3JkZXIsX2ZwLnBjYXQudGVjaCcsXG4gICAgICAgICAgICBvcmRlcmlkOiAnNzgwYmM1NScsXG4gICAgICAgICAgICBxYWNjdDogb3B0aW9ucy5wQ29kZSxcbiAgICAgICAgICAgIHJldmVudWU6ICc5OS45OSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ1JvbGxiYXInLCBmdW5jdGlvbigpe1xuICB2YXIgUm9sbGJhciA9IHBsdWdpbjtcbiAgdmFyIHJvbGxiYXI7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFjY2Vzc1Rva2VuOiAnRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkYnLFxuICAgIGVudmlyb25tZW50OiAndGVzdGVudmlyb25tZW50JyxcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgcHJldk9uRXJyb3IgPSB3aW5kb3cub25lcnJvcjtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIHJvbGxiYXIgPSBuZXcgUm9sbGJhcihvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQocm9sbGJhcik7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICAgIHJvbGxiYXIucmVzZXQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoUm9sbGJhciwgaW50ZWdyYXRpb24oJ1JvbGxiYXInKVxuICAgICAgLmdsb2JhbCgnUm9sbGJhcicpXG4gICAgICAub3B0aW9uKCdhY2Nlc3NUb2tlbicsICcnKVxuICAgICAgLm9wdGlvbignaWRlbnRpZnknLCB0cnVlKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIocm9sbGJhciwgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB0aGUgd2luZG93LlJvbGxiYXIgb2JqZWN0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93LlJvbGxiYXIpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5Sb2xsYmFyKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhdmUgYWxsIG9mIHRoZSBjb3JyZWN0IG1ldGhvZHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5Sb2xsYmFyKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuUm9sbGJhci5kZWJ1Zyk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93LlJvbGxiYXIuaW5mbyk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93LlJvbGxiYXIud2FybmluZyk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93LlJvbGxiYXIuZXJyb3IpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5Sb2xsYmFyLmNyaXRpY2FsKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuUm9sbGJhci5jb25maWd1cmUpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5Sb2xsYmFyLnNjb3BlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNldCB3aW5kb3cub25lcnJvcicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBvbmVyciA9IHdpbmRvdy5vbmVycm9yO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy5vbmVycm9yICE9PSBvbmVycik7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQodHlwZW9mIHdpbmRvdy5vbmVycm9yID09PSAnZnVuY3Rpb24nKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHJvbGxiYXIubG9hZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQocm9sbGJhciwgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaWRlbnRpZnknLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3csICdvbmVycm9yJyk7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5Sb2xsYmFyLCAnY29uZmlndXJlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHt9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuUm9sbGJhci5jb25maWd1cmUsIHtcbiAgICAgICAgICBwYXlsb2FkOiB7IHBlcnNvbjogeyBpZDogJ2lkJyB9IH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBvbmx5IHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cuUm9sbGJhci5jb25maWd1cmUpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCBhbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LlJvbGxiYXIuY29uZmlndXJlLCB7XG4gICAgICAgICAgcGF5bG9hZDogeyBwZXJzb246IHsgaWQ6ICdpZCcsIHRyYWl0OiB0cnVlIH0gfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3dpbmRvdy5vbmVycm9yJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LlJvbGxiYXIsICd1bmNhdWdodEVycm9yJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoXCJzaG91bGQgY2FsbCB3aW5kb3cuUm9sbGJhci51bmNhdWdodEVycm9yXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ3Rlc3RpbmcnKTtcbiAgICAgICAgd2luZG93Lm9uZXJyb3IoXG4gICAgICAgICAgJ3Rlc3QgbWVzc2FnZScsXG4gICAgICAgICAgJ2h0dHA6Ly9mb28uY29tJyxcbiAgICAgICAgICAzMyxcbiAgICAgICAgICAyMSxcbiAgICAgICAgICBlcnJcbiAgICAgICAgKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuUm9sbGJhci51bmNhdWdodEVycm9yLFxuICAgICAgICAgICd0ZXN0IG1lc3NhZ2UnLFxuICAgICAgICAgICdodHRwOi8vZm9vLmNvbScsXG4gICAgICAgICAgMzMsXG4gICAgICAgICAgMjEsXG4gICAgICAgICAgZXJyXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ1NhYVNxdWF0Y2gnLCBmdW5jdGlvbigpe1xuICB2YXIgU2FhU3F1YXRjaCA9IHBsdWdpbjtcbiAgdmFyIHNhYXNxdWF0Y2g7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIHRlbmFudEFsaWFzOiAnYmF6JyxcbiAgICBhY2NvdW50SWQ6ICdmb28nXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgc2Fhc3F1YXRjaCA9IG5ldyBTYWFTcXVhdGNoKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChzYWFzcXVhdGNoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBzYWFzcXVhdGNoLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIGNvcnJlY3Qgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKFNhYVNxdWF0Y2gsIGludGVncmF0aW9uKCdTYWFTcXVhdGNoJylcbiAgICAgIC5vcHRpb24oJ3RlbmFudEFsaWFzJywgJycpXG4gICAgICAuZ2xvYmFsKCdfc3FoJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub24oJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnbXktaWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fc3FoLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHNlbmQgaWYgdXNlcklkIG9yIGVtYWlsIGFyZSBtaXNzaW5nJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5fc3FoLnB1c2gpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBpZiB1c2VySWQgaXMgZ2l2ZW4nLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9zcWgucHVzaCwgWydpbml0Jywge1xuICAgICAgICAgIHVzZXJfaWQ6ICdpZCcsXG4gICAgICAgICAgdGVuYW50X2FsaWFzOiAnYmF6JyxcbiAgICAgICAgICBlbWFpbDogdW5kZWZpbmVkLFxuICAgICAgICAgIGZpcnN0X25hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBsYXN0X25hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICB1c2VyX2ltYWdlOiB1bmRlZmluZWRcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBpZiBlbWFpbCBpcyBnaXZlbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IGVtYWlsOiAnc2VsZkBleGFtcGxlLmNvbScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9zcWgucHVzaCwgWydpbml0Jywge1xuICAgICAgICAgIHVzZXJfaWQ6IG51bGwsXG4gICAgICAgICAgdGVuYW50X2FsaWFzOiAnYmF6JyxcbiAgICAgICAgICBlbWFpbDogJ3NlbGZAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIGZpcnN0X25hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBsYXN0X25hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICB1c2VyX2ltYWdlOiB1bmRlZmluZWRcbiAgICAgICAgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcGFzcyBjaGVja3N1bScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IGVtYWlsOiAnc2VsZkBleGFtcGxlLmNvbScgfSwgeyBTYWFTcXVhdGNoOiB7IGNoZWNrc3VtOiAnd2VlJyB9IH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fc3FoLnB1c2gsIFsnaW5pdCcsIHtcbiAgICAgICAgICB1c2VyX2lkOiBudWxsLFxuICAgICAgICAgIHRlbmFudF9hbGlhczogJ2JheicsXG4gICAgICAgICAgZW1haWw6ICdzZWxmQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBmaXJzdF9uYW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgbGFzdF9uYW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgdXNlcl9pbWFnZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGNoZWNrc3VtOiAnd2VlJ1xuICAgICAgICB9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwYXNzIGFjY291bnRJZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IGVtYWlsOiAnc2VsZkBleGFtcGxlLmNvbScsIGFjY291bnRJZDogMTIzIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fc3FoLnB1c2gsIFsnaW5pdCcsIHtcbiAgICAgICAgICB1c2VyX2lkOiBudWxsLFxuICAgICAgICAgIHRlbmFudF9hbGlhczogJ2JheicsXG4gICAgICAgICAgZW1haWw6ICdzZWxmQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBmaXJzdF9uYW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgbGFzdF9uYW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgdXNlcl9pbWFnZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGFjY291bnRfaWQ6IDEyM1xuICAgICAgICB9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwYXNzIHJlZmVycmFsIGltYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KDEsIHsgcmVmZXJyYWxJbWFnZTogJ2ltZycgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll9zcWgucHVzaCwgWydpbml0Jywge1xuICAgICAgICAgIHVzZXJfaWQ6IDEsXG4gICAgICAgICAgdGVuYW50X2FsaWFzOiAnYmF6JyxcbiAgICAgICAgICBlbWFpbDogdW5kZWZpbmVkLFxuICAgICAgICAgIGZpcnN0X25hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBsYXN0X25hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICB1c2VyX2ltYWdlOiB1bmRlZmluZWQsXG4gICAgICAgICAgZmJfc2hhcmVfaW1hZ2U6ICdpbWcnXG4gICAgICAgIH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgb25seSBvbmNlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWRPbmNlKHdpbmRvdy5fc3FoLnB1c2gpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdTZW50cnknLCBmdW5jdGlvbigpe1xuICB2YXIgU2VudHJ5ID0gcGx1Z2luO1xuICB2YXIgc2VudHJ5O1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBjb25maWc6ICdodHRwczovL2RhZjY5ODBhMGZmMjQzYWE5NDA2ZGIxZWRkN2JkZWRiQGFwcC5nZXRzZW50cnkuY29tLzI1NDE1J1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIHNlbnRyeSA9IG5ldyBTZW50cnkob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKHNlbnRyeSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgc2VudHJ5LnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShTZW50cnksIGludGVncmF0aW9uKCdTZW50cnknKVxuICAgICAgLmdsb2JhbCgnUmF2ZW4nKVxuICAgICAgLm9wdGlvbignY29uZmlnJywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1YihzZW50cnksICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChzZW50cnkubG9hZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQoc2VudHJ5LCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5SYXZlbiwgJ3NldFVzZXInKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LlJhdmVuLnNldFVzZXIsIHsgaWQ6ICdpZCcgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5SYXZlbi5zZXRVc2VyLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCBhbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LlJhdmVuLnNldFVzZXIsIHsgaWQ6ICdpZCcsIHRyYWl0OiB0cnVlIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdTbmFwRW5nYWdlJywgZnVuY3Rpb24oKXtcbiAgdmFyIFNuYXBFbmdhZ2UgPSBwbHVnaW47XG4gIHZhciBzbmFwZW5nYWdlO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBhcGlLZXk6ICc3ODJiNzM3ZS00ODdmLTQxMTctOGEyYi0yYmViMzJiNjAwZTUnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgc25hcGVuZ2FnZSA9IG5ldyBTbmFwRW5nYWdlKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZChzbmFwZW5nYWdlKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICBzbmFwZW5nYWdlLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHN0b3JlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoU25hcEVuZ2FnZSwgaW50ZWdyYXRpb24oJ1NuYXBFbmdhZ2UnKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdTbmFwQUJ1ZycpXG4gICAgICAub3B0aW9uKCdhcGlLZXknLCAnJykpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKHNuYXBlbmdhZ2UsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZChzbmFwZW5nYWdlLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKHNuYXBlbmdhZ2UsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2lkZW50aWZ5JywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LlNuYXBBQnVnLCAnc2V0VXNlckVtYWlsJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBqdXN0IGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cuU25hcEFCdWcuc2V0VXNlckVtYWlsKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZW1haWwnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywgeyBlbWFpbDogJ25hbWVAZXhhbXBsZS5jb20nIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5TbmFwQUJ1Zy5zZXRVc2VyRW1haWwsICduYW1lQGV4YW1wbGUuY29tJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciB0aWNrID0gcmVxdWlyZSgnbmV4dC10aWNrJyk7XG52YXIgd2hlbiA9IHJlcXVpcmUoJ3doZW4nKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ1NwaW5uYWtyJywgZnVuY3Rpb24oKXtcbiAgdmFyIFNwaW5uYWtyID0gcGx1Z2luO1xuICB2YXIgc3Bpbm5ha3I7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIHNpdGVJZDogJzY2ODkyNTYwNCdcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBzcGlubmFrciA9IG5ldyBTcGlubmFrcihvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoc3Bpbm5ha3IpO1xuICAgIC8vIG5lZWRlZCBmb3Igc3Bpbm5ha3IncyBzY3JpcHQgdG8gc2V0IGEgZ2xvYmFsIHdlIGNhbiByZWFkXG4gICAgd2luZG93Ll9zcGlubmFrcl9kZXZlbG9wbWVudCA9IHRydWU7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgc3Bpbm5ha3IucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gICAgZGVsZXRlIHdpbmRvdy5fc3Bpbm5ha3JfZGV2ZWxvcG1lbnQ7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc3RvcmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShTcGlubmFrciwgaW50ZWdyYXRpb24oJ1NwaW5uYWtyJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgnX3NwaW5uYWtyX3NpdGVfaWQnKVxuICAgICAgLmdsb2JhbCgnX3NwaW5uYWtyJylcbiAgICAgIC5vcHRpb24oJ3NpdGVJZCcsICcnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIoc3Bpbm5ha3IsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBzZXQgd2luZG93Ll9zcGlubmFrcl9zaXRlX2lkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Ll9zcGlubmFrcl9zaXRlX2lkKTtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuX3NwaW5uYWtyX3NpdGVfaWQgPT09IG9wdGlvbnMuc2l0ZUlkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHNwaW5uYWtyLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKHNwaW5uYWtyLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ1RhcHN0cmVhbScsIGZ1bmN0aW9uKCl7XG4gIHZhciBUYXBzdHJlYW0gPSBwbHVnaW47XG4gIHZhciB0YXBzdHJlYW07XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFjY291bnROYW1lOiAndGFwc3RyZWFtVGVzdEFjY291bnQnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgdGFwc3RyZWFtID0gbmV3IFRhcHN0cmVhbShvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQodGFwc3RyZWFtKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICB0YXBzdHJlYW0ucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc3RvcmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShUYXBzdHJlYW0sIGludGVncmF0aW9uKCdUYXBzdHJlYW0nKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCdfdHNxJylcbiAgICAgIC5vcHRpb24oJ2FjY291bnROYW1lJywgJycpXG4gICAgICAub3B0aW9uKCd0cmFja0FsbFBhZ2VzJywgdHJ1ZSlcbiAgICAgIC5vcHRpb24oJ3RyYWNrTmFtZWRQYWdlcycsIHRydWUpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1Yih0YXBzdHJlYW0sICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBwdXNoIHNldEFjY291bnQgbmFtZSBvbnRvIHdpbmRvdy5fdHNxJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuX3RzcVswXSAsIFsnc2V0QWNjb3VudE5hbWUnLCBvcHRpb25zLmFjY291bnROYW1lXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxsICNsb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh0YXBzdHJlYW0ubG9hZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQodGFwc3RyZWFtLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3Mub25jZSgncmVhZHknLCBkb25lKTtcbiAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNwYWdlJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93Ll90c3EsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBhbGwgcGFnZXMgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll90c3EucHVzaCwgWydmaXJlSGl0JywgJ2xvYWRlZC1hLXBhZ2UnLCBbd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJykgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVdXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBuYW1lZCBwYWdlcyBieSBkZWZhdWx0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3RzcS5wdXNoLCBbJ2ZpcmVIaXQnLCAndmlld2VkLW5hbWUtcGFnZScsIFt3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKSArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZV1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRyYWNrIG5hbWVkIHBhZ2VzIHdpdGggYSBjYXRlZ29yeScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll90c3EucHVzaCwgWydmaXJlSGl0JywgJ3ZpZXdlZC1jYXRlZ29yeS1uYW1lLXBhZ2UnLCBbd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJykgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVdXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBjYXRlZ29yaXplZCBwYWdlcyBieSBkZWZhdWx0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3RzcS5wdXNoLCBbJ2ZpcmVIaXQnLCAndmlld2VkLWNhdGVnb3J5LXBhZ2UnLCBbd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJykgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVdXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgdHJhY2sgYW55IHBhZ2VzIGlmIHRoZSBvcHRpb25zIGFyZSBvZmYnLCBmdW5jdGlvbigpe1xuICAgICAgICB0YXBzdHJlYW0ub3B0aW9ucy50cmFja0FsbFBhZ2VzID0gZmFsc2U7XG4gICAgICAgIHRhcHN0cmVhbS5vcHRpb25zLnRyYWNrTmFtZWRQYWdlcyA9IGZhbHNlO1xuICAgICAgICB0YXBzdHJlYW0ub3B0aW9ucy50cmFja0NhdGVnb3JpemVkUGFnZXMgPSBmYWxzZTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ0NhdGVnb3J5JywgJ05hbWUnKTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Ll90c3EucHVzaCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX3RzcSwgJ3B1c2gnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQgYXMgYSBzbHVnJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdFdmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fdHNxLnB1c2gsIFsnZmlyZUhpdCcsICdldmVudCcsIFt1bmRlZmluZWRdXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcbnZhciB0aWNrID0gcmVxdWlyZSgnbmV4dC10aWNrJyk7XG52YXIgd2hlbiA9IHJlcXVpcmUoJ3doZW4nKTtcblxuZGVzY3JpYmUoJ3RyYWsuaW8nLCBmdW5jdGlvbigpe1xuICB2YXIgVHJha2lvID0gcGx1Z2luO1xuICB2YXIgdHJha2lvO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICB0b2tlbjogJzc0MGQzNmE3OWZiNTkzYmJjMDM0YTNhYzkzNGJjMDRmNWE1OTFjMGMnXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgdHJha2lvID0gbmV3IFRyYWtpbyhvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQodHJha2lvKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLnJlc3RvcmUoKTtcbiAgICBhbmFseXRpY3MucmVzZXQoKTtcbiAgICB0cmFraW8ucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc3RvcmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShUcmFraW8sIGludGVncmF0aW9uKCd0cmFrLmlvJylcbiAgICAgIC5hc3N1bWVzUGFnZXZpZXcoKVxuICAgICAgLmdsb2JhbCgndHJhaycpXG4gICAgICAub3B0aW9uKCd0b2tlbicsICcnKVxuICAgICAgLm9wdGlvbigndHJhY2tOYW1lZFBhZ2VzJywgdHJ1ZSkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnYmVmb3JlIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIGFuYWx5dGljcy5zdHViKHRyYWtpbywgJ2xvYWQnKTtcbiAgICB9KTtcbiAgICBcbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBzZXQgdXAgdGhlIHdpbmRvdy50cmFrLmlvIHZhcmlhYmxlcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93LnRyYWsuaW8pO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy50cmFrLmlvLmlkZW50aWZ5KTtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cudHJhay5pby50cmFjayk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93LnRyYWsuaW8uYWxpYXMpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQodHJha2lvLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKHRyYWtpbywgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy50cmFrLmlvLCAncGFnZV92aWV3Jyk7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy50cmFrLmlvLCAndHJhY2snKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgcGFnZV92aWV3JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cudHJhay5pby5wYWdlX3ZpZXcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHBhdGggYW5kIHRpdGxlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoeyBwYXRoOiAnL3BhdGgnLCB0aXRsZTogJ3RpdGxlJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cudHJhay5pby5wYWdlX3ZpZXcsICcvcGF0aCcsICd0aXRsZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcHJlZmVyIGEgbmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCduYW1lJywgeyB0aXRsZTogJ3RpdGxlJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cudHJhay5pby5wYWdlX3ZpZXcsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgJ25hbWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHByZWZlciBhIGNhdGVnb3J5IGFuZCBuYW1lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoJ2NhdGVnb3J5JywgJ25hbWUnLCB7IHRpdGxlOiAndGl0bGUnIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy50cmFrLmlvLnBhZ2Vfdmlldywgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCAnY2F0ZWdvcnkgbmFtZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgbmFtZWQgcGFnZXMgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LnRyYWsuaW8udHJhY2ssICdWaWV3ZWQgTmFtZSBQYWdlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0cmFjayBuYW1lZCBwYWdlcyB3aXRoIGNhdGVnb3JpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnQ2F0ZWdvcnknLCAnTmFtZScpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy50cmFrLmlvLnRyYWNrLCAnVmlld2VkIENhdGVnb3J5IE5hbWUgUGFnZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJhY2sgY2F0ZWdvcml6ZWQgcGFnZXMgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdDYXRlZ29yeScsICdOYW1lJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LnRyYWsuaW8udHJhY2ssICdWaWV3ZWQgQ2F0ZWdvcnkgUGFnZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHRyYWNrIG5hbWVkIG9yIGNhdGVnb3JpemVkIHBhZ2VzIGlmIHRoZSBvcHRpb24gaXMgb2ZmJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdHJha2lvLm9wdGlvbnMudHJhY2tOYW1lZFBhZ2VzID0gZmFsc2U7XG4gICAgICAgIHRyYWtpby5vcHRpb25zLnRyYWNrQ2F0ZWdvcml6ZWRQYWdlcyA9IGZhbHNlO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnTmFtZScpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnQ2F0ZWdvcnknLCAnTmFtZScpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh3aW5kb3cudHJhay5pby50cmFjayk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaWRlbnRpZnknLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cudHJhay5pbywgJ2lkZW50aWZ5Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy50cmFrLmlvLmlkZW50aWZ5LCAnaWQnLCB7IGlkOiAnaWQnIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cudHJhay5pby5pZGVudGlmeSwgeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy50cmFrLmlvLmlkZW50aWZ5LCAnaWQnLCB7IHRyYWl0OiB0cnVlLCBpZDogJ2lkJyB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGFsaWFzIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7XG4gICAgICAgICAgYXZhdGFyOiAnYXZhdGFyJyxcbiAgICAgICAgICBmaXJzdE5hbWU6ICdmaXJzdCcsXG4gICAgICAgICAgbGFzdE5hbWU6ICdsYXN0J1xuICAgICAgICB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cudHJhay5pby5pZGVudGlmeSwge1xuICAgICAgICAgIGF2YXRhcl91cmw6ICdhdmF0YXInLFxuICAgICAgICAgIGZpcnN0X25hbWU6ICdmaXJzdCcsXG4gICAgICAgICAgbGFzdF9uYW1lOiAnbGFzdCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cudHJhay5pbywgJ3RyYWNrJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGV2ZW50JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdldmVudCcpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy50cmFrLmlvLnRyYWNrLCAnZXZlbnQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gZXZlbnQgYW5kIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ2V2ZW50JywgeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cudHJhay5pby50cmFjaywgJ2V2ZW50JywgeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNhbGlhcycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy50cmFrLmlvLCAnZGlzdGluY3RfaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LnRyYWsuaW8sICdhbGlhcycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhIG5ldyBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hbGlhcygnbmV3Jyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LnRyYWsuaW8uYWxpYXMsICduZXcnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgYSBuZXcgaWQgYW5kIGFuIG9yaWdpbmFsIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFsaWFzKCdhbm90aGVyJywgJ29yaWdpbmFsJyk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LnRyYWsuaW8uYWxpYXMsICdvcmlnaW5hbCcsICdhbm90aGVyJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ1R3aXR0ZXIgQWRzJywgZnVuY3Rpb24oKXtcbiAgdmFyIFR3aXR0ZXIgPSBwbHVnaW47XG4gIHZhciB0d2l0dGVyO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBldmVudHM6IHtcbiAgICAgIHNpZ251cDogJ2MzNjQ2MmEzJyxcbiAgICAgIGxvZ2luOiAnNjEzN2FiMjQnLFxuICAgICAgcGxheTogJ2UzMTk2ZGUxJ1xuICAgIH1cbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICB0d2l0dGVyID0gbmV3IFR3aXR0ZXIob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKHR3aXR0ZXIpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIHR3aXR0ZXIucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSB0aGUgY29ycmVjdCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoVHdpdHRlciwgaW50ZWdyYXRpb24oJ1R3aXR0ZXIgQWRzJylcbiAgICAgIC5vcHRpb24oJ3BhZ2UnLCAnJylcbiAgICAgIC5tYXBwaW5nKCdldmVudHMnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zcHkodHdpdHRlciwgJ2xvYWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBzZW5kIGlmIGBwYWdlYCBvcHRpb24gaXMgbm90IGRlZmluZWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh0d2l0dGVyLmxvYWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBpZiBgcGFnZWAgb3B0aW9uIGlzIGRlZmluZWQnLCBmdW5jdGlvbigpe1xuICAgICAgICB0d2l0dGVyLm9wdGlvbnMucGFnZSA9ICdlMzE5NmRlMSc7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5sb2FkZWQoJzxpbWcgc3JjPVwiaHR0cDovL2FuYWx5dGljcy50d2l0dGVyLmNvbS9pL2Fkc2N0P3R4bl9pZD1lMzE5NmRlMSZwX2lkPVR3aXR0ZXJcIj4nKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zcHkodHdpdHRlciwgJ2xvYWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBzZW5kIGlmIGV2ZW50IGlzIG5vdCBkZWZpbmVkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCd0b1N0cmluZycpO1xuICAgICAgICBhbmFseXRpY3MuZGlkTm90Q2FsbCh0d2l0dGVyLmxvYWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBjb3JyZWN0bHknLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MudHJhY2soJ3BsYXknKTtcbiAgICAgICAgYW5hbHl0aWNzLmxvYWRlZCgnPGltZyBzcmM9XCJodHRwOi8vYW5hbHl0aWNzLnR3aXR0ZXIuY29tL2kvYWRzY3Q/dHhuX2lkPWUzMTk2ZGUxJnBfaWQ9VHdpdHRlclwiPicpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc3VwcG9ydCBhcnJheSBldmVudHMnLCBmdW5jdGlvbigpe1xuICAgICAgICB0d2l0dGVyLm9wdGlvbnMuZXZlbnRzID0gW3sga2V5OiAnZXZlbnQnLCB2YWx1ZTogMTIgfV07XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmxvYWRlZCgnPGltZyBzcmM9XCJodHRwOi8vYW5hbHl0aWNzLnR3aXR0ZXIuY29tL2kvYWRzY3Q/dHhuX2lkPTEyJnBfaWQ9VHdpdHRlclwiPicpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIlxudmFyIEFuYWx5dGljcyA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcycpLmNvbnN0cnVjdG9yO1xudmFyIGludGVncmF0aW9uID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uJyk7XG52YXIgdGVzdGVyID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzLWludGVncmF0aW9uLXRlc3RlcicpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoJ2pxdWVyeScpO1xudmFyIHRlc3QgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgdW5peCA9IHJlcXVpcmUoJ3RvLXVuaXgtdGltZXN0YW1wJyk7XG52YXIgVXNlclZvaWNlID0gcmVxdWlyZSgnLi9pbmRleCcpXG52YXIgd2hlbiA9IHJlcXVpcmUoJ3doZW4nKTtcblxuZGVzY3JpYmUoJ1VzZXJWb2ljZScsIGZ1bmN0aW9uKCl7XG4gIHZhciBVc2VyVm9pY2UgPSBwbHVnaW47XG4gIHZhciB1c2Vydm9pY2U7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGFwaUtleTogJ0V2QWxqU2VKdldycklpZGdWdkkyZydcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBzdG9yZSB0aGUgcmlnaHQgc2V0dGluZ3MnLCBmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5jb21wYXJlKFVzZXJWb2ljZSwgaW50ZWdyYXRpb24oJ1VzZXJWb2ljZScpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ1VzZXJWb2ljZScpXG4gICAgICAub3B0aW9uKCdhcGlLZXknLCAnJylcbiAgICAgIC5vcHRpb24oJ2NsYXNzaWMnLCBmYWxzZSlcbiAgICAgIC5vcHRpb24oJ2ZvcnVtSWQnLCBudWxsKVxuICAgICAgLm9wdGlvbignc2hvd1dpZGdldCcsIHRydWUpXG4gICAgICAub3B0aW9uKCdtb2RlJywgJ2NvbnRhY3QnKVxuICAgICAgLm9wdGlvbignYWNjZW50Q29sb3InLCAnIzQ0OGRkNicpXG4gICAgICAub3B0aW9uKCdzbWFydHZvdGUnLCB0cnVlKVxuICAgICAgLm9wdGlvbigndHJpZ2dlcicsIG51bGwpXG4gICAgICAub3B0aW9uKCd0cmlnZ2VyUG9zaXRpb24nLCAnYm90dG9tLXJpZ2h0JylcbiAgICAgIC5vcHRpb24oJ3RyaWdnZXJDb2xvcicsICcjZmZmZmZmJylcbiAgICAgIC5vcHRpb24oJ3RyaWdnZXJCYWNrZ3JvdW5kQ29sb3InLCAncmdiYSg0NiwgNDksIDUxLCAwLjYpJylcbiAgICAgIC8vIEJBQ0tXQVJEUyBDT01QQVRJQklMSVRZOiBjbGFzc2ljIG9wdGlvbnNcbiAgICAgIC5vcHRpb24oJ2NsYXNzaWNNb2RlJywgJ2Z1bGwnKVxuICAgICAgLm9wdGlvbigncHJpbWFyeUNvbG9yJywgJyNjYzZkMDAnKVxuICAgICAgLm9wdGlvbignbGlua0NvbG9yJywgJyMwMDdkYmYnKVxuICAgICAgLm9wdGlvbignZGVmYXVsdE1vZGUnLCAnc3VwcG9ydCcpXG4gICAgICAub3B0aW9uKCd0YWJMYWJlbCcsICdGZWVkYmFjayAmIFN1cHBvcnQnKVxuICAgICAgLm9wdGlvbigndGFiQ29sb3InLCAnI2NjNmQwMCcpXG4gICAgICAub3B0aW9uKCd0YWJQb3NpdGlvbicsICdtaWRkbGUtcmlnaHQnKVxuICAgICAgLm9wdGlvbigndGFiSW52ZXJ0ZWQnLCBmYWxzZSkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnTm9uLUNsYXNzaWMnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIHVzZXJ2b2ljZSA9IG5ldyBVc2VyVm9pY2Uob3B0aW9ucyk7XG4gICAgICBhbmFseXRpY3MuYWRkKHVzZXJ2b2ljZSk7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICAgIHVzZXJ2b2ljZS5yZXNldCgpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnN0dWIodXNlcnZvaWNlLCAnbG9hZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBvcHRzID0ge1xuICAgICAgICAgIGFjY2VudF9jb2xvcjogJyM0NDhkZDYnLFxuICAgICAgICAgIGFwaUtleTogJ0V2QWxqU2VKdldycklpZGdWdkkyZycsXG4gICAgICAgICAgY2xhc3NpYzogZmFsc2UsXG4gICAgICAgICAgY2xhc3NpY01vZGU6ICdmdWxsJyxcbiAgICAgICAgICBkZWZhdWx0TW9kZTogJ3N1cHBvcnQnLFxuICAgICAgICAgIGZvcnVtX2lkOiBudWxsLFxuICAgICAgICAgIGxpbmtDb2xvcjogJyMwMDdkYmYnLFxuICAgICAgICAgIG1vZGU6ICdjb250YWN0JyxcbiAgICAgICAgICBwcmltYXJ5Q29sb3I6ICcjY2M2ZDAwJyxcbiAgICAgICAgICBzaG93V2lkZ2V0OiB0cnVlLFxuICAgICAgICAgIHNtYXJ0dm90ZV9lbmFibGVkOiB0cnVlLFxuICAgICAgICAgIHRhYkNvbG9yOiAnI2NjNmQwMCcsXG4gICAgICAgICAgdGFiSW52ZXJ0ZWQ6IGZhbHNlLFxuICAgICAgICAgIHRhYkxhYmVsOiAnRmVlZGJhY2sgJiBTdXBwb3J0JyxcbiAgICAgICAgICB0YWJQb3NpdGlvbjogJ21pZGRsZS1yaWdodCcsXG4gICAgICAgICAgdHJpZ2dlcjogbnVsbCxcbiAgICAgICAgICB0cmlnZ2VyX2JhY2tncm91bmRfY29sb3I6ICdyZ2JhKDQ2LCA0OSwgNTEsIDAuNiknLFxuICAgICAgICAgIHRyaWdnZXJfY29sb3I6ICcjZmZmZmZmJyxcbiAgICAgICAgICB0cmlnZ2VyX3Bvc2l0aW9uOiAnYm90dG9tLXJpZ2h0J1xuICAgICAgICB9O1xuXG4gICAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQodXNlcnZvaWNlLmxvYWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHB1c2ggdGhlIHJpZ2h0IG9wdGlvbnMgb250byB3aW5kb3cuVXNlclZvaWNlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuVXNlclZvaWNlWzBdLCBbJ3NldCcsIG9wdHNdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBwdXNoIHRoZSBhdXRvcHJvbXB0IG9wdGlvbnMnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5Vc2VyVm9pY2VbMV0sIFsnYXV0b3Byb21wdCcsIHt9XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcHVzaCB0aGUgYWRkVHJpZ2dlciBvcHRpb25zJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuVXNlclZvaWNlWzJdLCBbJ2FkZFRyaWdnZXInLCBvcHRzXSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgICAgYW5hbHl0aWNzLmxvYWQodXNlcnZvaWNlLCBkb25lKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2FmdGVyIGxvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICB9KTtcblxuICAgICAgYWZ0ZXIoZnVuY3Rpb24oKXtcbiAgICAgICAgdXNlcnZvaWNlLnJlc2V0KCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzaG93IHRoZSB0cmlnZ2VyJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICAgIHdoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICByZXR1cm4galF1ZXJ5KCcudXYtaWNvbicpLmxlbmd0aDtcbiAgICAgICAgfSwgZG9uZSk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuVXNlclZvaWNlLCAncHVzaCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5Vc2VyVm9pY2UucHVzaCwgW1xuICAgICAgICAgICAgJ2lkZW50aWZ5JyxcbiAgICAgICAgICAgIHsgaWQ6ICdpZCcgfVxuICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5Vc2VyVm9pY2UucHVzaCwgW1xuICAgICAgICAgICAgJ2lkZW50aWZ5JyxcbiAgICAgICAgICAgIHsgdHJhaXQ6IHRydWUgfVxuICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuVXNlclZvaWNlLnB1c2gsIFtcbiAgICAgICAgICAgICdpZGVudGlmeScsXG4gICAgICAgICAgICB7IGlkOiAnaWQnLCB0cmFpdDogdHJ1ZSB9XG4gICAgICAgICAgXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgY29udmVydCBhIGNyZWF0ZWQgZGF0ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IGNyZWF0ZWQ6IGRhdGUgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuVXNlclZvaWNlLnB1c2gsIFtcbiAgICAgICAgICAgICdpZGVudGlmeScsXG4gICAgICAgICAgICB7IGNyZWF0ZWRfYXQ6IHVuaXgoZGF0ZSkgfVxuICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgnI2dyb3VwJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5Vc2VyVm9pY2UsICdwdXNoJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmdyb3VwKCdpZCcpO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LlVzZXJWb2ljZS5wdXNoLCBbXG4gICAgICAgICAgICAnaWRlbnRpZnknLFxuICAgICAgICAgICAgeyBhY2NvdW50OiB7IGlkOiAnaWQnIH19XG4gICAgICAgICAgXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCBwcm9wZXJ0aWVzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuZ3JvdXAoeyBwcm9wZXJ0eTogdHJ1ZSB9KTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5Vc2VyVm9pY2UucHVzaCwgW1xuICAgICAgICAgICAgJ2lkZW50aWZ5JyxcbiAgICAgICAgICAgIHsgYWNjb3VudDogeyBwcm9wZXJ0eTogdHJ1ZSB9fVxuICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5ncm91cCgnaWQnLCB7IHByb3BlcnR5OiB0cnVlIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LlVzZXJWb2ljZS5wdXNoLCBbXG4gICAgICAgICAgICAnaWRlbnRpZnknLFxuICAgICAgICAgICAgeyBhY2NvdW50OiB7IGlkOiAnaWQnLCBwcm9wZXJ0eTogdHJ1ZSB9fVxuICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGNvbnZlcnQgYSBjcmVhdGVkIGRhdGUnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZ3JvdXAoeyBjcmVhdGVkOiBkYXRlIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LlVzZXJWb2ljZS5wdXNoLCBbXG4gICAgICAgICAgICAnaWRlbnRpZnknLFxuICAgICAgICAgICAgeyBhY2NvdW50OiB7IGNyZWF0ZWRfYXQ6IHVuaXgoZGF0ZSkgfX1cbiAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NsYXNzaWMnLCBmdW5jdGlvbigpe1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIGNsYXNzaWM6IHRydWUsXG4gICAgICAgIGNsYXNzaWNNb2RlOiAnZnVsbCcsXG4gICAgICAgIGFwaUtleTogJ21oejVPcDRNVWZ0NTkyTzhRODJNd0EnLFxuICAgICAgICBmb3J1bUlkOiAyMjE1MzksXG4gICAgICAgIHRhYkxhYmVsOiAndGVzdCcsXG4gICAgICAgIGRlZmF1bHRNb2RlOiAnZmVlZGJhY2snLFxuICAgICAgICBwcmltYXJ5Q29sb3I6ICcjZmZmZmZmJyxcbiAgICAgIH07XG4gICAgICB1c2Vydm9pY2UgPSBuZXcgVXNlclZvaWNlKG9wdGlvbnMpO1xuICAgICAgYW5hbHl0aWNzLmFkZCh1c2Vydm9pY2UpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICB1c2Vydm9pY2UucmVzZXQoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHVzZXJ2b2ljZSwgJ2xvYWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgICBpdCgnc2hvdWxkIHB1c2ggdGhlIG9wdGlvbnMgb250byB3aW5kb3cuVXNlclZvaWNlLnB1c2gnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuZGVlcEVxdWFsKHdpbmRvdy5Vc2VyVm9pY2VbMF0sIFtcbiAgICAgICAgICAgICdzaG93VGFiJyxcbiAgICAgICAgICAgICdjbGFzc2ljX3dpZGdldCcsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGFjY2VudENvbG9yOiAnIzQ0OGRkNicsXG4gICAgICAgICAgICAgIGFwaUtleTogJ21oejVPcDRNVWZ0NTkyTzhRODJNd0EnLFxuICAgICAgICAgICAgICBjbGFzc2ljOiB0cnVlLFxuICAgICAgICAgICAgICBkZWZhdWx0X21vZGU6ICdmZWVkYmFjaycsXG4gICAgICAgICAgICAgIGZvcnVtX2lkOiAyMjE1MzksXG4gICAgICAgICAgICAgIGxpbmtfY29sb3I6ICcjMDA3ZGJmJyxcbiAgICAgICAgICAgICAgbW9kZTogJ2Z1bGwnLFxuICAgICAgICAgICAgICBwcmltYXJ5X2NvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgICAgICAgIHNob3dXaWRnZXQ6IHRydWUsXG4gICAgICAgICAgICAgIHNtYXJ0dm90ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgdGFiX2NvbG9yOiAnI2NjNmQwMCcsXG4gICAgICAgICAgICAgIHRhYl9pbnZlcnRlZDogZmFsc2UsXG4gICAgICAgICAgICAgIHRhYl9sYWJlbDogJ3Rlc3QnLFxuICAgICAgICAgICAgICB0YWJfcG9zaXRpb246ICdtaWRkbGUtcmlnaHQnLFxuICAgICAgICAgICAgICB0cmlnZ2VyOiBudWxsLFxuICAgICAgICAgICAgICB0cmlnZ2VyQmFja2dyb3VuZENvbG9yOiAncmdiYSg0NiwgNDksIDUxLCAwLjYpJyxcbiAgICAgICAgICAgICAgdHJpZ2dlckNvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgICAgICAgIHRyaWdnZXJQb3NpdGlvbjogJ2JvdHRvbS1yaWdodCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgdGhlIHdpbmRvdy5zaG93Q2xhc3NpY1dpZGdldCBmdW5jdGlvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93LnNob3dDbGFzc2ljV2lkZ2V0KTtcbiAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLmFzc2VydCh3aW5kb3cuc2hvd0NsYXNzaWNXaWRnZXQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHVzZXJ2b2ljZS5sb2FkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBub3QgaGF2ZSBhIGdyb3VwIG1ldGhvZCBpZiBzZXQgdG8gY2xhc3NpYycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICAgIGFuYWx5dGljcy5hc3NlcnQodXNlcnZvaWNlLmdyb3VwID09PSB1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICAgIGFuYWx5dGljcy5sb2FkKHVzZXJ2b2ljZSwgZG9uZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSl7XG4gICAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2hvdyB0aGUgdGFiJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICAgIHdoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3V2VGFiJyk7XG4gICAgICAgIH0sIGRvbmUpO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCcjaWRlbnRpZnknLCBmdW5jdGlvbigpe1xuICAgICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLnN0dWIod2luZG93LlVzZXJWb2ljZSwgJ3B1c2gnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJyk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuVXNlclZvaWNlLnB1c2gsIFtcbiAgICAgICAgICAgICdzZXRDdXN0b21GaWVsZHMnLFxuICAgICAgICAgICAgeyBpZDogJ2lkJyB9XG4gICAgICAgICAgXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSh7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93LlVzZXJWb2ljZS5wdXNoLCBbXG4gICAgICAgICAgICAnc2V0Q3VzdG9tRmllbGRzJyxcbiAgICAgICAgICAgIHsgdHJhaXQ6IHRydWUgfVxuICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNlbmQgYW4gaWQgYW5kIHRyYWl0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuVXNlclZvaWNlLnB1c2gsIFtcbiAgICAgICAgICAgICdzZXRDdXN0b21GaWVsZHMnLFxuICAgICAgICAgICAgeyBpZDogJ2lkJywgdHJhaXQ6IHRydWUgfVxuICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIi8qIVxuICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2MS4xMS4xXG4gKiBodHRwOi8vanF1ZXJ5LmNvbS9cbiAqXG4gKiBJbmNsdWRlcyBTaXp6bGUuanNcbiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IDIwMDUsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogMjAxNC0wNS0wMVQxNzo0MlpcbiAqL1xuXG4oZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHtcblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xuICAgIC8vIEZvciBDb21tb25KUyBhbmQgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgd2hlcmUgYSBwcm9wZXIgd2luZG93IGlzIHByZXNlbnQsXG4gICAgLy8gZXhlY3V0ZSB0aGUgZmFjdG9yeSBhbmQgZ2V0IGpRdWVyeVxuICAgIC8vIEZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3QgaW5oZXJlbnRseSBwb3NzZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XG4gICAgLy8gKHN1Y2ggYXMgTm9kZS5qcyksIGV4cG9zZSBhIGpRdWVyeS1tYWtpbmcgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0c1xuICAgIC8vIFRoaXMgYWNjZW50dWF0ZXMgdGhlIG5lZWQgZm9yIHRoZSBjcmVhdGlvbiBvZiBhIHJlYWwgd2luZG93XG4gICAgLy8gZS5nLiB2YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKSh3aW5kb3cpO1xuICAgIC8vIFNlZSB0aWNrZXQgIzE0NTQ5IGZvciBtb3JlIGluZm9cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5kb2N1bWVudCA/XG4gICAgICBmYWN0b3J5KCBnbG9iYWwsIHRydWUgKSA6XG4gICAgICBmdW5jdGlvbiggdyApIHtcbiAgICAgICAgaWYgKCAhdy5kb2N1bWVudCApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhY3RvcnkoIHcgKTtcbiAgICAgIH07XG4gIH0gZWxzZSB7XG4gICAgZmFjdG9yeSggZ2xvYmFsICk7XG4gIH1cblxuLy8gUGFzcyB0aGlzIGlmIHdpbmRvdyBpcyBub3QgZGVmaW5lZCB5ZXRcbn0odHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCB3aW5kb3csIG5vR2xvYmFsICkge1xuXG4vLyBDYW4ndCBkbyB0aGlzIGJlY2F1c2Ugc2V2ZXJhbCBhcHBzIGluY2x1ZGluZyBBU1AuTkVUIHRyYWNlXG4vLyB0aGUgc3RhY2sgdmlhIGFyZ3VtZW50cy5jYWxsZXIuY2FsbGVlIGFuZCBGaXJlZm94IGRpZXMgaWZcbi8vIHlvdSB0cnkgdG8gdHJhY2UgdGhyb3VnaCBcInVzZSBzdHJpY3RcIiBjYWxsIGNoYWlucy4gKCMxMzMzNSlcbi8vIFN1cHBvcnQ6IEZpcmVmb3ggMTgrXG4vL1xuXG52YXIgZGVsZXRlZElkcyA9IFtdO1xuXG52YXIgc2xpY2UgPSBkZWxldGVkSWRzLnNsaWNlO1xuXG52YXIgY29uY2F0ID0gZGVsZXRlZElkcy5jb25jYXQ7XG5cbnZhciBwdXNoID0gZGVsZXRlZElkcy5wdXNoO1xuXG52YXIgaW5kZXhPZiA9IGRlbGV0ZWRJZHMuaW5kZXhPZjtcblxudmFyIGNsYXNzMnR5cGUgPSB7fTtcblxudmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcblxudmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBzdXBwb3J0ID0ge307XG5cblxuXG52YXJcbiAgdmVyc2lvbiA9IFwiMS4xMS4xXCIsXG5cbiAgLy8gRGVmaW5lIGEgbG9jYWwgY29weSBvZiBqUXVlcnlcbiAgalF1ZXJ5ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuICAgIC8vIFRoZSBqUXVlcnkgb2JqZWN0IGlzIGFjdHVhbGx5IGp1c3QgdGhlIGluaXQgY29uc3RydWN0b3IgJ2VuaGFuY2VkJ1xuICAgIC8vIE5lZWQgaW5pdCBpZiBqUXVlcnkgaXMgY2FsbGVkIChqdXN0IGFsbG93IGVycm9yIHRvIGJlIHRocm93biBpZiBub3QgaW5jbHVkZWQpXG4gICAgcmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdCggc2VsZWN0b3IsIGNvbnRleHQgKTtcbiAgfSxcblxuICAvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMSwgSUU8OVxuICAvLyBNYWtlIHN1cmUgd2UgdHJpbSBCT00gYW5kIE5CU1BcbiAgcnRyaW0gPSAvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXG5cbiAgLy8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nXG4gIHJtc1ByZWZpeCA9IC9eLW1zLS8sXG4gIHJkYXNoQWxwaGEgPSAvLShbXFxkYS16XSkvZ2ksXG5cbiAgLy8gVXNlZCBieSBqUXVlcnkuY2FtZWxDYXNlIGFzIGNhbGxiYWNrIHRvIHJlcGxhY2UoKVxuICBmY2FtZWxDYXNlID0gZnVuY3Rpb24oIGFsbCwgbGV0dGVyICkge1xuICAgIHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcbiAgfTtcblxualF1ZXJ5LmZuID0galF1ZXJ5LnByb3RvdHlwZSA9IHtcbiAgLy8gVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBqUXVlcnkgYmVpbmcgdXNlZFxuICBqcXVlcnk6IHZlcnNpb24sXG5cbiAgY29uc3RydWN0b3I6IGpRdWVyeSxcblxuICAvLyBTdGFydCB3aXRoIGFuIGVtcHR5IHNlbGVjdG9yXG4gIHNlbGVjdG9yOiBcIlwiLFxuXG4gIC8vIFRoZSBkZWZhdWx0IGxlbmd0aCBvZiBhIGpRdWVyeSBvYmplY3QgaXMgMFxuICBsZW5ndGg6IDAsXG5cbiAgdG9BcnJheTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNsaWNlLmNhbGwoIHRoaXMgKTtcbiAgfSxcblxuICAvLyBHZXQgdGhlIE50aCBlbGVtZW50IGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0IE9SXG4gIC8vIEdldCB0aGUgd2hvbGUgbWF0Y2hlZCBlbGVtZW50IHNldCBhcyBhIGNsZWFuIGFycmF5XG4gIGdldDogZnVuY3Rpb24oIG51bSApIHtcbiAgICByZXR1cm4gbnVtICE9IG51bGwgP1xuXG4gICAgICAvLyBSZXR1cm4ganVzdCB0aGUgb25lIGVsZW1lbnQgZnJvbSB0aGUgc2V0XG4gICAgICAoIG51bSA8IDAgPyB0aGlzWyBudW0gKyB0aGlzLmxlbmd0aCBdIDogdGhpc1sgbnVtIF0gKSA6XG5cbiAgICAgIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGluIGEgY2xlYW4gYXJyYXlcbiAgICAgIHNsaWNlLmNhbGwoIHRoaXMgKTtcbiAgfSxcblxuICAvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrXG4gIC8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KVxuICBwdXNoU3RhY2s6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblxuICAgIC8vIEJ1aWxkIGEgbmV3IGpRdWVyeSBtYXRjaGVkIGVsZW1lbnQgc2V0XG4gICAgdmFyIHJldCA9IGpRdWVyeS5tZXJnZSggdGhpcy5jb25zdHJ1Y3RvcigpLCBlbGVtcyApO1xuXG4gICAgLy8gQWRkIHRoZSBvbGQgb2JqZWN0IG9udG8gdGhlIHN0YWNrIChhcyBhIHJlZmVyZW5jZSlcbiAgICByZXQucHJldk9iamVjdCA9IHRoaXM7XG4gICAgcmV0LmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cbiAgICAvLyBSZXR1cm4gdGhlIG5ld2x5LWZvcm1lZCBlbGVtZW50IHNldFxuICAgIHJldHVybiByZXQ7XG4gIH0sXG5cbiAgLy8gRXhlY3V0ZSBhIGNhbGxiYWNrIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBtYXRjaGVkIHNldC5cbiAgLy8gKFlvdSBjYW4gc2VlZCB0aGUgYXJndW1lbnRzIHdpdGggYW4gYXJyYXkgb2YgYXJncywgYnV0IHRoaXMgaXNcbiAgLy8gb25seSB1c2VkIGludGVybmFsbHkuKVxuICBlYWNoOiBmdW5jdGlvbiggY2FsbGJhY2ssIGFyZ3MgKSB7XG4gICAgcmV0dXJuIGpRdWVyeS5lYWNoKCB0aGlzLCBjYWxsYmFjaywgYXJncyApO1xuICB9LFxuXG4gIG1hcDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5Lm1hcCh0aGlzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKCBlbGVtLCBpLCBlbGVtICk7XG4gICAgfSkpO1xuICB9LFxuXG4gIHNsaWNlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2soIHNsaWNlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSApO1xuICB9LFxuXG4gIGZpcnN0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5lcSggMCApO1xuICB9LFxuXG4gIGxhc3Q6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmVxKCAtMSApO1xuICB9LFxuXG4gIGVxOiBmdW5jdGlvbiggaSApIHtcbiAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGgsXG4gICAgICBqID0gK2kgKyAoIGkgPCAwID8gbGVuIDogMCApO1xuICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayggaiA+PSAwICYmIGogPCBsZW4gPyBbIHRoaXNbal0gXSA6IFtdICk7XG4gIH0sXG5cbiAgZW5kOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IobnVsbCk7XG4gIH0sXG5cbiAgLy8gRm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAvLyBCZWhhdmVzIGxpa2UgYW4gQXJyYXkncyBtZXRob2QsIG5vdCBsaWtlIGEgalF1ZXJ5IG1ldGhvZC5cbiAgcHVzaDogcHVzaCxcbiAgc29ydDogZGVsZXRlZElkcy5zb3J0LFxuICBzcGxpY2U6IGRlbGV0ZWRJZHMuc3BsaWNlXG59O1xuXG5qUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc3JjLCBjb3B5SXNBcnJheSwgY29weSwgbmFtZSwgb3B0aW9ucywgY2xvbmUsXG4gICAgdGFyZ2V0ID0gYXJndW1lbnRzWzBdIHx8IHt9LFxuICAgIGkgPSAxLFxuICAgIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgZGVlcCA9IGZhbHNlO1xuXG4gIC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cbiAgaWYgKCB0eXBlb2YgdGFyZ2V0ID09PSBcImJvb2xlYW5cIiApIHtcbiAgICBkZWVwID0gdGFyZ2V0O1xuXG4gICAgLy8gc2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuICAgIHRhcmdldCA9IGFyZ3VtZW50c1sgaSBdIHx8IHt9O1xuICAgIGkrKztcbiAgfVxuXG4gIC8vIEhhbmRsZSBjYXNlIHdoZW4gdGFyZ2V0IGlzIGEgc3RyaW5nIG9yIHNvbWV0aGluZyAocG9zc2libGUgaW4gZGVlcCBjb3B5KVxuICBpZiAoIHR5cGVvZiB0YXJnZXQgIT09IFwib2JqZWN0XCIgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKHRhcmdldCkgKSB7XG4gICAgdGFyZ2V0ID0ge307XG4gIH1cblxuICAvLyBleHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWRcbiAgaWYgKCBpID09PSBsZW5ndGggKSB7XG4gICAgdGFyZ2V0ID0gdGhpcztcbiAgICBpLS07XG4gIH1cblxuICBmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcbiAgICAvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzXG4gICAgaWYgKCAob3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdKSAhPSBudWxsICkge1xuICAgICAgLy8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuICAgICAgZm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuICAgICAgICBzcmMgPSB0YXJnZXRbIG5hbWUgXTtcbiAgICAgICAgY29weSA9IG9wdGlvbnNbIG5hbWUgXTtcblxuICAgICAgICAvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXG4gICAgICAgIGlmICggdGFyZ2V0ID09PSBjb3B5ICkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG4gICAgICAgIGlmICggZGVlcCAmJiBjb3B5ICYmICggalF1ZXJ5LmlzUGxhaW5PYmplY3QoY29weSkgfHwgKGNvcHlJc0FycmF5ID0galF1ZXJ5LmlzQXJyYXkoY29weSkpICkgKSB7XG4gICAgICAgICAgaWYgKCBjb3B5SXNBcnJheSApIHtcbiAgICAgICAgICAgIGNvcHlJc0FycmF5ID0gZmFsc2U7XG4gICAgICAgICAgICBjbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNBcnJheShzcmMpID8gc3JjIDogW107XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3Qoc3JjKSA/IHNyYyA6IHt9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuICAgICAgICAgIHRhcmdldFsgbmFtZSBdID0galF1ZXJ5LmV4dGVuZCggZGVlcCwgY2xvbmUsIGNvcHkgKTtcblxuICAgICAgICAvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG4gICAgICAgIH0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICB0YXJnZXRbIG5hbWUgXSA9IGNvcHk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuICByZXR1cm4gdGFyZ2V0O1xufTtcblxualF1ZXJ5LmV4dGVuZCh7XG4gIC8vIFVuaXF1ZSBmb3IgZWFjaCBjb3B5IG9mIGpRdWVyeSBvbiB0aGUgcGFnZVxuICBleHBhbmRvOiBcImpRdWVyeVwiICsgKCB2ZXJzaW9uICsgTWF0aC5yYW5kb20oKSApLnJlcGxhY2UoIC9cXEQvZywgXCJcIiApLFxuXG4gIC8vIEFzc3VtZSBqUXVlcnkgaXMgcmVhZHkgd2l0aG91dCB0aGUgcmVhZHkgbW9kdWxlXG4gIGlzUmVhZHk6IHRydWUsXG5cbiAgZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCBtc2cgKTtcbiAgfSxcblxuICBub29wOiBmdW5jdGlvbigpIHt9LFxuXG4gIC8vIFNlZSB0ZXN0L3VuaXQvY29yZS5qcyBmb3IgZGV0YWlscyBjb25jZXJuaW5nIGlzRnVuY3Rpb24uXG4gIC8vIFNpbmNlIHZlcnNpb24gMS4zLCBET00gbWV0aG9kcyBhbmQgZnVuY3Rpb25zIGxpa2UgYWxlcnRcbiAgLy8gYXJlbid0IHN1cHBvcnRlZC4gVGhleSByZXR1cm4gZmFsc2Ugb24gSUUgKCMyOTY4KS5cbiAgaXNGdW5jdGlvbjogZnVuY3Rpb24oIG9iaiApIHtcbiAgICByZXR1cm4galF1ZXJ5LnR5cGUob2JqKSA9PT0gXCJmdW5jdGlvblwiO1xuICB9LFxuXG4gIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24oIG9iaiApIHtcbiAgICByZXR1cm4galF1ZXJ5LnR5cGUob2JqKSA9PT0gXCJhcnJheVwiO1xuICB9LFxuXG4gIGlzV2luZG93OiBmdW5jdGlvbiggb2JqICkge1xuICAgIC8qIGpzaGludCBlcWVxZXE6IGZhbHNlICovXG4gICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PSBvYmoud2luZG93O1xuICB9LFxuXG4gIGlzTnVtZXJpYzogZnVuY3Rpb24oIG9iaiApIHtcbiAgICAvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAobnVsbHx0cnVlfGZhbHNlfFwiXCIpXG4gICAgLy8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoXCIweC4uLlwiKVxuICAgIC8vIHN1YnRyYWN0aW9uIGZvcmNlcyBpbmZpbml0aWVzIHRvIE5hTlxuICAgIHJldHVybiAhalF1ZXJ5LmlzQXJyYXkoIG9iaiApICYmIG9iaiAtIHBhcnNlRmxvYXQoIG9iaiApID49IDA7XG4gIH0sXG5cbiAgaXNFbXB0eU9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcbiAgICB2YXIgbmFtZTtcbiAgICBmb3IgKCBuYW1lIGluIG9iaiApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgaXNQbGFpbk9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcbiAgICB2YXIga2V5O1xuXG4gICAgLy8gTXVzdCBiZSBhbiBPYmplY3QuXG4gICAgLy8gQmVjYXVzZSBvZiBJRSwgd2UgYWxzbyBoYXZlIHRvIGNoZWNrIHRoZSBwcmVzZW5jZSBvZiB0aGUgY29uc3RydWN0b3IgcHJvcGVydHkuXG4gICAgLy8gTWFrZSBzdXJlIHRoYXQgRE9NIG5vZGVzIGFuZCB3aW5kb3cgb2JqZWN0cyBkb24ndCBwYXNzIHRocm91Z2gsIGFzIHdlbGxcbiAgICBpZiAoICFvYmogfHwgalF1ZXJ5LnR5cGUob2JqKSAhPT0gXCJvYmplY3RcIiB8fCBvYmoubm9kZVR5cGUgfHwgalF1ZXJ5LmlzV2luZG93KCBvYmogKSApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gTm90IG93biBjb25zdHJ1Y3RvciBwcm9wZXJ0eSBtdXN0IGJlIE9iamVjdFxuICAgICAgaWYgKCBvYmouY29uc3RydWN0b3IgJiZcbiAgICAgICAgIWhhc093bi5jYWxsKG9iaiwgXCJjb25zdHJ1Y3RvclwiKSAmJlxuICAgICAgICAhaGFzT3duLmNhbGwob2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJpc1Byb3RvdHlwZU9mXCIpICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoIGUgKSB7XG4gICAgICAvLyBJRTgsOSBXaWxsIHRocm93IGV4Y2VwdGlvbnMgb24gY2VydGFpbiBob3N0IG9iamVjdHMgIzk4OTdcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0OiBJRTw5XG4gICAgLy8gSGFuZGxlIGl0ZXJhdGlvbiBvdmVyIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlZm9yZSBvd24gcHJvcGVydGllcy5cbiAgICBpZiAoIHN1cHBvcnQub3duTGFzdCApIHtcbiAgICAgIGZvciAoIGtleSBpbiBvYmogKSB7XG4gICAgICAgIHJldHVybiBoYXNPd24uY2FsbCggb2JqLCBrZXkgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPd24gcHJvcGVydGllcyBhcmUgZW51bWVyYXRlZCBmaXJzdGx5LCBzbyB0byBzcGVlZCB1cCxcbiAgICAvLyBpZiBsYXN0IG9uZSBpcyBvd24sIHRoZW4gYWxsIHByb3BlcnRpZXMgYXJlIG93bi5cbiAgICBmb3IgKCBrZXkgaW4gb2JqICkge31cblxuICAgIHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCB8fCBoYXNPd24uY2FsbCggb2JqLCBrZXkgKTtcbiAgfSxcblxuICB0eXBlOiBmdW5jdGlvbiggb2JqICkge1xuICAgIGlmICggb2JqID09IG51bGwgKSB7XG4gICAgICByZXR1cm4gb2JqICsgXCJcIjtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiID9cbiAgICAgIGNsYXNzMnR5cGVbIHRvU3RyaW5nLmNhbGwob2JqKSBdIHx8IFwib2JqZWN0XCIgOlxuICAgICAgdHlwZW9mIG9iajtcbiAgfSxcblxuICAvLyBFdmFsdWF0ZXMgYSBzY3JpcHQgaW4gYSBnbG9iYWwgY29udGV4dFxuICAvLyBXb3JrYXJvdW5kcyBiYXNlZCBvbiBmaW5kaW5ncyBieSBKaW0gRHJpc2NvbGxcbiAgLy8gaHR0cDovL3dlYmxvZ3MuamF2YS5uZXQvYmxvZy9kcmlzY29sbC9hcmNoaXZlLzIwMDkvMDkvMDgvZXZhbC1qYXZhc2NyaXB0LWdsb2JhbC1jb250ZXh0XG4gIGdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBkYXRhICkge1xuICAgIGlmICggZGF0YSAmJiBqUXVlcnkudHJpbSggZGF0YSApICkge1xuICAgICAgLy8gV2UgdXNlIGV4ZWNTY3JpcHQgb24gSW50ZXJuZXQgRXhwbG9yZXJcbiAgICAgIC8vIFdlIHVzZSBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gc28gdGhhdCBjb250ZXh0IGlzIHdpbmRvd1xuICAgICAgLy8gcmF0aGVyIHRoYW4galF1ZXJ5IGluIEZpcmVmb3hcbiAgICAgICggd2luZG93LmV4ZWNTY3JpcHQgfHwgZnVuY3Rpb24oIGRhdGEgKSB7XG4gICAgICAgIHdpbmRvd1sgXCJldmFsXCIgXS5jYWxsKCB3aW5kb3csIGRhdGEgKTtcbiAgICAgIH0gKSggZGF0YSApO1xuICAgIH1cbiAgfSxcblxuICAvLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG4gIC8vIE1pY3Jvc29mdCBmb3Jnb3QgdG8gaHVtcCB0aGVpciB2ZW5kb3IgcHJlZml4ICgjOTU3MilcbiAgY2FtZWxDYXNlOiBmdW5jdGlvbiggc3RyaW5nICkge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSggcm1zUHJlZml4LCBcIm1zLVwiICkucmVwbGFjZSggcmRhc2hBbHBoYSwgZmNhbWVsQ2FzZSApO1xuICB9LFxuXG4gIG5vZGVOYW1lOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcbiAgICByZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgfSxcblxuICAvLyBhcmdzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG4gIGVhY2g6IGZ1bmN0aW9uKCBvYmosIGNhbGxiYWNrLCBhcmdzICkge1xuICAgIHZhciB2YWx1ZSxcbiAgICAgIGkgPSAwLFxuICAgICAgbGVuZ3RoID0gb2JqLmxlbmd0aCxcbiAgICAgIGlzQXJyYXkgPSBpc0FycmF5bGlrZSggb2JqICk7XG5cbiAgICBpZiAoIGFyZ3MgKSB7XG4gICAgICBpZiAoIGlzQXJyYXkgKSB7XG4gICAgICAgIGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuICAgICAgICAgIHZhbHVlID0gY2FsbGJhY2suYXBwbHkoIG9ialsgaSBdLCBhcmdzICk7XG5cbiAgICAgICAgICBpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICggaSBpbiBvYmogKSB7XG4gICAgICAgICAgdmFsdWUgPSBjYWxsYmFjay5hcHBseSggb2JqWyBpIF0sIGFyZ3MgKTtcblxuICAgICAgICAgIGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAvLyBBIHNwZWNpYWwsIGZhc3QsIGNhc2UgZm9yIHRoZSBtb3N0IGNvbW1vbiB1c2Ugb2YgZWFjaFxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIGlzQXJyYXkgKSB7XG4gICAgICAgIGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuICAgICAgICAgIHZhbHVlID0gY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICk7XG5cbiAgICAgICAgICBpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICggaSBpbiBvYmogKSB7XG4gICAgICAgICAgdmFsdWUgPSBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKTtcblxuICAgICAgICAgIGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICAvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMSwgSUU8OVxuICB0cmltOiBmdW5jdGlvbiggdGV4dCApIHtcbiAgICByZXR1cm4gdGV4dCA9PSBudWxsID9cbiAgICAgIFwiXCIgOlxuICAgICAgKCB0ZXh0ICsgXCJcIiApLnJlcGxhY2UoIHJ0cmltLCBcIlwiICk7XG4gIH0sXG5cbiAgLy8gcmVzdWx0cyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuICBtYWtlQXJyYXk6IGZ1bmN0aW9uKCBhcnIsIHJlc3VsdHMgKSB7XG4gICAgdmFyIHJldCA9IHJlc3VsdHMgfHwgW107XG5cbiAgICBpZiAoIGFyciAhPSBudWxsICkge1xuICAgICAgaWYgKCBpc0FycmF5bGlrZSggT2JqZWN0KGFycikgKSApIHtcbiAgICAgICAgalF1ZXJ5Lm1lcmdlKCByZXQsXG4gICAgICAgICAgdHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIiA/XG4gICAgICAgICAgWyBhcnIgXSA6IGFyclxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHVzaC5jYWxsKCByZXQsIGFyciApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH0sXG5cbiAgaW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHtcbiAgICB2YXIgbGVuO1xuXG4gICAgaWYgKCBhcnIgKSB7XG4gICAgICBpZiAoIGluZGV4T2YgKSB7XG4gICAgICAgIHJldHVybiBpbmRleE9mLmNhbGwoIGFyciwgZWxlbSwgaSApO1xuICAgICAgfVxuXG4gICAgICBsZW4gPSBhcnIubGVuZ3RoO1xuICAgICAgaSA9IGkgPyBpIDwgMCA/IE1hdGgubWF4KCAwLCBsZW4gKyBpICkgOiBpIDogMDtcblxuICAgICAgZm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICAgIC8vIFNraXAgYWNjZXNzaW5nIGluIHNwYXJzZSBhcnJheXNcbiAgICAgICAgaWYgKCBpIGluIGFyciAmJiBhcnJbIGkgXSA9PT0gZWxlbSApIHtcbiAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAtMTtcbiAgfSxcblxuICBtZXJnZTogZnVuY3Rpb24oIGZpcnN0LCBzZWNvbmQgKSB7XG4gICAgdmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxuICAgICAgaiA9IDAsXG4gICAgICBpID0gZmlyc3QubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCBqIDwgbGVuICkge1xuICAgICAgZmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqKysgXTtcbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0OiBJRTw5XG4gICAgLy8gV29ya2Fyb3VuZCBjYXN0aW5nIG9mIC5sZW5ndGggdG8gTmFOIG9uIG90aGVyd2lzZSBhcnJheWxpa2Ugb2JqZWN0cyAoZS5nLiwgTm9kZUxpc3RzKVxuICAgIGlmICggbGVuICE9PSBsZW4gKSB7XG4gICAgICB3aGlsZSAoIHNlY29uZFtqXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICBmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGorKyBdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZpcnN0Lmxlbmd0aCA9IGk7XG5cbiAgICByZXR1cm4gZmlyc3Q7XG4gIH0sXG5cbiAgZ3JlcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgaW52ZXJ0ICkge1xuICAgIHZhciBjYWxsYmFja0ludmVyc2UsXG4gICAgICBtYXRjaGVzID0gW10sXG4gICAgICBpID0gMCxcbiAgICAgIGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcbiAgICAgIGNhbGxiYWNrRXhwZWN0ID0gIWludmVydDtcblxuICAgIC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCBvbmx5IHNhdmluZyB0aGUgaXRlbXNcbiAgICAvLyB0aGF0IHBhc3MgdGhlIHZhbGlkYXRvciBmdW5jdGlvblxuICAgIGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuICAgICAgY2FsbGJhY2tJbnZlcnNlID0gIWNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpICk7XG4gICAgICBpZiAoIGNhbGxiYWNrSW52ZXJzZSAhPT0gY2FsbGJhY2tFeHBlY3QgKSB7XG4gICAgICAgIG1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXRjaGVzO1xuICB9LFxuXG4gIC8vIGFyZyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuICBtYXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGFyZyApIHtcbiAgICB2YXIgdmFsdWUsXG4gICAgICBpID0gMCxcbiAgICAgIGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcbiAgICAgIGlzQXJyYXkgPSBpc0FycmF5bGlrZSggZWxlbXMgKSxcbiAgICAgIHJldCA9IFtdO1xuXG4gICAgLy8gR28gdGhyb3VnaCB0aGUgYXJyYXksIHRyYW5zbGF0aW5nIGVhY2ggb2YgdGhlIGl0ZW1zIHRvIHRoZWlyIG5ldyB2YWx1ZXNcbiAgICBpZiAoIGlzQXJyYXkgKSB7XG4gICAgICBmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcbiAgICAgICAgdmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cbiAgICAgICAgaWYgKCB2YWx1ZSAhPSBudWxsICkge1xuICAgICAgICAgIHJldC5wdXNoKCB2YWx1ZSApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAvLyBHbyB0aHJvdWdoIGV2ZXJ5IGtleSBvbiB0aGUgb2JqZWN0LFxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKCBpIGluIGVsZW1zICkge1xuICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuICAgICAgICBpZiAoIHZhbHVlICE9IG51bGwgKSB7XG4gICAgICAgICAgcmV0LnB1c2goIHZhbHVlICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG4gICAgcmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApO1xuICB9LFxuXG4gIC8vIEEgZ2xvYmFsIEdVSUQgY291bnRlciBmb3Igb2JqZWN0c1xuICBndWlkOiAxLFxuXG4gIC8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueVxuICAvLyBhcmd1bWVudHMuXG4gIHByb3h5OiBmdW5jdGlvbiggZm4sIGNvbnRleHQgKSB7XG4gICAgdmFyIGFyZ3MsIHByb3h5LCB0bXA7XG5cbiAgICBpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcInN0cmluZ1wiICkge1xuICAgICAgdG1wID0gZm5bIGNvbnRleHQgXTtcbiAgICAgIGNvbnRleHQgPSBmbjtcbiAgICAgIGZuID0gdG1wO1xuICAgIH1cblxuICAgIC8vIFF1aWNrIGNoZWNrIHRvIGRldGVybWluZSBpZiB0YXJnZXQgaXMgY2FsbGFibGUsIGluIHRoZSBzcGVjXG4gICAgLy8gdGhpcyB0aHJvd3MgYSBUeXBlRXJyb3IsIGJ1dCB3ZSB3aWxsIGp1c3QgcmV0dXJuIHVuZGVmaW5lZC5cbiAgICBpZiAoICFqUXVlcnkuaXNGdW5jdGlvbiggZm4gKSApIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gU2ltdWxhdGVkIGJpbmRcbiAgICBhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAyICk7XG4gICAgcHJveHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSggY29udGV4dCB8fCB0aGlzLCBhcmdzLmNvbmNhdCggc2xpY2UuY2FsbCggYXJndW1lbnRzICkgKSApO1xuICAgIH07XG5cbiAgICAvLyBTZXQgdGhlIGd1aWQgb2YgdW5pcXVlIGhhbmRsZXIgdG8gdGhlIHNhbWUgb2Ygb3JpZ2luYWwgaGFuZGxlciwgc28gaXQgY2FuIGJlIHJlbW92ZWRcbiAgICBwcm94eS5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgalF1ZXJ5Lmd1aWQrKztcblxuICAgIHJldHVybiBwcm94eTtcbiAgfSxcblxuICBub3c6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiArKCBuZXcgRGF0ZSgpICk7XG4gIH0sXG5cbiAgLy8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyXG4gIC8vIHByb3BlcnRpZXMgdG8gaXQgc28gaXQgbmVlZHMgdG8gZXhpc3QuXG4gIHN1cHBvcnQ6IHN1cHBvcnRcbn0pO1xuXG4vLyBQb3B1bGF0ZSB0aGUgY2xhc3MydHlwZSBtYXBcbmpRdWVyeS5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSwgZnVuY3Rpb24oaSwgbmFtZSkge1xuICBjbGFzczJ0eXBlWyBcIltvYmplY3QgXCIgKyBuYW1lICsgXCJdXCIgXSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbn0pO1xuXG5mdW5jdGlvbiBpc0FycmF5bGlrZSggb2JqICkge1xuICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aCxcbiAgICB0eXBlID0galF1ZXJ5LnR5cGUoIG9iaiApO1xuXG4gIGlmICggdHlwZSA9PT0gXCJmdW5jdGlvblwiIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCBvYmoubm9kZVR5cGUgPT09IDEgJiYgbGVuZ3RoICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHR5cGUgPT09IFwiYXJyYXlcIiB8fCBsZW5ndGggPT09IDAgfHxcbiAgICB0eXBlb2YgbGVuZ3RoID09PSBcIm51bWJlclwiICYmIGxlbmd0aCA+IDAgJiYgKCBsZW5ndGggLSAxICkgaW4gb2JqO1xufVxudmFyIFNpenpsZSA9XG4vKiFcbiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYxLjEwLjE5XG4gKiBodHRwOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTQtMDQtMThcbiAqL1xuKGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbnZhciBpLFxuICBzdXBwb3J0LFxuICBFeHByLFxuICBnZXRUZXh0LFxuICBpc1hNTCxcbiAgdG9rZW5pemUsXG4gIGNvbXBpbGUsXG4gIHNlbGVjdCxcbiAgb3V0ZXJtb3N0Q29udGV4dCxcbiAgc29ydElucHV0LFxuICBoYXNEdXBsaWNhdGUsXG5cbiAgLy8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuICBzZXREb2N1bWVudCxcbiAgZG9jdW1lbnQsXG4gIGRvY0VsZW0sXG4gIGRvY3VtZW50SXNIVE1MLFxuICByYnVnZ3lRU0EsXG4gIHJidWdneU1hdGNoZXMsXG4gIG1hdGNoZXMsXG4gIGNvbnRhaW5zLFxuXG4gIC8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGFcbiAgZXhwYW5kbyA9IFwic2l6emxlXCIgKyAtKG5ldyBEYXRlKCkpLFxuICBwcmVmZXJyZWREb2MgPSB3aW5kb3cuZG9jdW1lbnQsXG4gIGRpcnJ1bnMgPSAwLFxuICBkb25lID0gMCxcbiAgY2xhc3NDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG4gIHRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuICBjb21waWxlckNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcbiAgc29ydE9yZGVyID0gZnVuY3Rpb24oIGEsIGIgKSB7XG4gICAgaWYgKCBhID09PSBiICkge1xuICAgICAgaGFzRHVwbGljYXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH0sXG5cbiAgLy8gR2VuZXJhbC1wdXJwb3NlIGNvbnN0YW50c1xuICBzdHJ1bmRlZmluZWQgPSB0eXBlb2YgdW5kZWZpbmVkLFxuICBNQVhfTkVHQVRJVkUgPSAxIDw8IDMxLFxuXG4gIC8vIEluc3RhbmNlIG1ldGhvZHNcbiAgaGFzT3duID0gKHt9KS5oYXNPd25Qcm9wZXJ0eSxcbiAgYXJyID0gW10sXG4gIHBvcCA9IGFyci5wb3AsXG4gIHB1c2hfbmF0aXZlID0gYXJyLnB1c2gsXG4gIHB1c2ggPSBhcnIucHVzaCxcbiAgc2xpY2UgPSBhcnIuc2xpY2UsXG4gIC8vIFVzZSBhIHN0cmlwcGVkLWRvd24gaW5kZXhPZiBpZiB3ZSBjYW4ndCB1c2UgYSBuYXRpdmUgb25lXG4gIGluZGV4T2YgPSBhcnIuaW5kZXhPZiB8fCBmdW5jdGlvbiggZWxlbSApIHtcbiAgICB2YXIgaSA9IDAsXG4gICAgICBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgIGlmICggdGhpc1tpXSA9PT0gZWxlbSApIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfSxcblxuICBib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblxuICAvLyBSZWd1bGFyIGV4cHJlc3Npb25zXG5cbiAgLy8gV2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyN3aGl0ZXNwYWNlXG4gIHdoaXRlc3BhY2UgPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsXG4gIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc3ludGF4LyNjaGFyYWN0ZXJzXG4gIGNoYXJhY3RlckVuY29kaW5nID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixcblxuICAvLyBMb29zZWx5IG1vZGVsZWQgb24gQ1NTIGlkZW50aWZpZXIgY2hhcmFjdGVyc1xuICAvLyBBbiB1bnF1b3RlZCB2YWx1ZSBzaG91bGQgYmUgYSBDU1MgaWRlbnRpZmllciBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuICAvLyBQcm9wZXIgc3ludGF4OiBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXJcbiAgaWRlbnRpZmllciA9IGNoYXJhY3RlckVuY29kaW5nLnJlcGxhY2UoIFwid1wiLCBcIncjXCIgKSxcblxuICAvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcbiAgYXR0cmlidXRlcyA9IFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG4gICAgLy8gT3BlcmF0b3IgKGNhcHR1cmUgMilcbiAgICBcIiooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgK1xuICAgIC8vIFwiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG4gICAgXCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArIHdoaXRlc3BhY2UgK1xuICAgIFwiKlxcXFxdXCIsXG5cbiAgcHNldWRvcyA9IFwiOihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpKD86XFxcXCgoXCIgK1xuICAgIC8vIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHNlbGVjdG9ycyBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBwcmVGaWx0ZXIsIHByZWZlciBhcmd1bWVudHM6XG4gICAgLy8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpXG4gICAgXCIoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXxcIiArXG4gICAgLy8gMi4gc2ltcGxlIChjYXB0dXJlIDYpXG4gICAgXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBhdHRyaWJ1dGVzICsgXCIpKil8XCIgK1xuICAgIC8vIDMuIGFueXRoaW5nIGVsc2UgKGNhcHR1cmUgMilcbiAgICBcIi4qXCIgK1xuICAgIFwiKVxcXFwpfClcIixcblxuICAvLyBMZWFkaW5nIGFuZCBub24tZXNjYXBlZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBjYXB0dXJpbmcgc29tZSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHByZWNlZGluZyB0aGUgbGF0dGVyXG4gIHJ0cmltID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiICsgd2hpdGVzcGFjZSArIFwiKyRcIiwgXCJnXCIgKSxcblxuICByY29tbWEgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiosXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcbiAgcmNvbWJpbmF0b3JzID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFs+K35dfFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cbiAgcmF0dHJpYnV0ZVF1b3RlcyA9IG5ldyBSZWdFeHAoIFwiPVwiICsgd2hpdGVzcGFjZSArIFwiKihbXlxcXFxdJ1xcXCJdKj8pXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXF1cIiwgXCJnXCIgKSxcblxuICBycHNldWRvID0gbmV3IFJlZ0V4cCggcHNldWRvcyApLFxuICByaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoIFwiXlwiICsgaWRlbnRpZmllciArIFwiJFwiICksXG5cbiAgbWF0Y2hFeHByID0ge1xuICAgIFwiSURcIjogbmV3IFJlZ0V4cCggXCJeIyhcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpXCIgKSxcbiAgICBcIkNMQVNTXCI6IG5ldyBSZWdFeHAoIFwiXlxcXFwuKFwiICsgY2hhcmFjdGVyRW5jb2RpbmcgKyBcIilcIiApLFxuICAgIFwiVEFHXCI6IG5ldyBSZWdFeHAoIFwiXihcIiArIGNoYXJhY3RlckVuY29kaW5nLnJlcGxhY2UoIFwid1wiLCBcIncqXCIgKSArIFwiKVwiICksXG4gICAgXCJBVFRSXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgYXR0cmlidXRlcyApLFxuICAgIFwiUFNFVURPXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgcHNldWRvcyApLFxuICAgIFwiQ0hJTERcIjogbmV3IFJlZ0V4cCggXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiICsgd2hpdGVzcGFjZSArXG4gICAgICBcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiICsgd2hpdGVzcGFjZSArIFwiKig/OihbKy1dfClcIiArIHdoaXRlc3BhY2UgK1xuICAgICAgXCIqKFxcXFxkKyl8KSlcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpXCIsIFwiaVwiICksXG4gICAgXCJib29sXCI6IG5ldyBSZWdFeHAoIFwiXig/OlwiICsgYm9vbGVhbnMgKyBcIikkXCIsIFwiaVwiICksXG4gICAgLy8gRm9yIHVzZSBpbiBsaWJyYXJpZXMgaW1wbGVtZW50aW5nIC5pcygpXG4gICAgLy8gV2UgdXNlIHRoaXMgZm9yIFBPUyBtYXRjaGluZyBpbiBgc2VsZWN0YFxuICAgIFwibmVlZHNDb250ZXh0XCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIiArXG4gICAgICB3aGl0ZXNwYWNlICsgXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfCkoPz1bXi1dfCQpXCIsIFwiaVwiIClcbiAgfSxcblxuICByaW5wdXRzID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxcbiAgcmhlYWRlciA9IC9eaFxcZCQvaSxcblxuICBybmF0aXZlID0gL15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxcblxuICAvLyBFYXNpbHktcGFyc2VhYmxlL3JldHJpZXZhYmxlIElEIG9yIFRBRyBvciBDTEFTUyBzZWxlY3RvcnNcbiAgcnF1aWNrRXhwciA9IC9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLFxuXG4gIHJzaWJsaW5nID0gL1srfl0vLFxuICByZXNjYXBlID0gLyd8XFxcXC9nLFxuXG4gIC8vIENTUyBlc2NhcGVzIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCNlc2NhcGVkLWNoYXJhY3RlcnNcbiAgcnVuZXNjYXBlID0gbmV3IFJlZ0V4cCggXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIiArIHdoaXRlc3BhY2UgKyBcIj98KFwiICsgd2hpdGVzcGFjZSArIFwiKXwuKVwiLCBcImlnXCIgKSxcbiAgZnVuZXNjYXBlID0gZnVuY3Rpb24oIF8sIGVzY2FwZWQsIGVzY2FwZWRXaGl0ZXNwYWNlICkge1xuICAgIHZhciBoaWdoID0gXCIweFwiICsgZXNjYXBlZCAtIDB4MTAwMDA7XG4gICAgLy8gTmFOIG1lYW5zIG5vbi1jb2RlcG9pbnRcbiAgICAvLyBTdXBwb3J0OiBGaXJlZm94PDI0XG4gICAgLy8gV29ya2Fyb3VuZCBlcnJvbmVvdXMgbnVtZXJpYyBpbnRlcnByZXRhdGlvbiBvZiArXCIweFwiXG4gICAgcmV0dXJuIGhpZ2ggIT09IGhpZ2ggfHwgZXNjYXBlZFdoaXRlc3BhY2UgP1xuICAgICAgZXNjYXBlZCA6XG4gICAgICBoaWdoIDwgMCA/XG4gICAgICAgIC8vIEJNUCBjb2RlcG9pbnRcbiAgICAgICAgU3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCArIDB4MTAwMDAgKSA6XG4gICAgICAgIC8vIFN1cHBsZW1lbnRhbCBQbGFuZSBjb2RlcG9pbnQgKHN1cnJvZ2F0ZSBwYWlyKVxuICAgICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoID4+IDEwIHwgMHhEODAwLCBoaWdoICYgMHgzRkYgfCAweERDMDAgKTtcbiAgfTtcblxuLy8gT3B0aW1pemUgZm9yIHB1c2guYXBwbHkoIF8sIE5vZGVMaXN0IClcbnRyeSB7XG4gIHB1c2guYXBwbHkoXG4gICAgKGFyciA9IHNsaWNlLmNhbGwoIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzICkpLFxuICAgIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzXG4gICk7XG4gIC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wXG4gIC8vIERldGVjdCBzaWxlbnRseSBmYWlsaW5nIHB1c2guYXBwbHlcbiAgYXJyWyBwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGggXS5ub2RlVHlwZTtcbn0gY2F0Y2ggKCBlICkge1xuICBwdXNoID0geyBhcHBseTogYXJyLmxlbmd0aCA/XG5cbiAgICAvLyBMZXZlcmFnZSBzbGljZSBpZiBwb3NzaWJsZVxuICAgIGZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHtcbiAgICAgIHB1c2hfbmF0aXZlLmFwcGx5KCB0YXJnZXQsIHNsaWNlLmNhbGwoZWxzKSApO1xuICAgIH0gOlxuXG4gICAgLy8gU3VwcG9ydDogSUU8OVxuICAgIC8vIE90aGVyd2lzZSBhcHBlbmQgZGlyZWN0bHlcbiAgICBmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG4gICAgICB2YXIgaiA9IHRhcmdldC5sZW5ndGgsXG4gICAgICAgIGkgPSAwO1xuICAgICAgLy8gQ2FuJ3QgdHJ1c3QgTm9kZUxpc3QubGVuZ3RoXG4gICAgICB3aGlsZSAoICh0YXJnZXRbaisrXSA9IGVsc1tpKytdKSApIHt9XG4gICAgICB0YXJnZXQubGVuZ3RoID0gaiAtIDE7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkge1xuICB2YXIgbWF0Y2gsIGVsZW0sIG0sIG5vZGVUeXBlLFxuICAgIC8vIFFTQSB2YXJzXG4gICAgaSwgZ3JvdXBzLCBvbGQsIG5pZCwgbmV3Q29udGV4dCwgbmV3U2VsZWN0b3I7XG5cbiAgaWYgKCAoIGNvbnRleHQgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IHByZWZlcnJlZERvYyApICE9PSBkb2N1bWVudCApIHtcbiAgICBzZXREb2N1bWVudCggY29udGV4dCApO1xuICB9XG5cbiAgY29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG4gIHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXG4gIGlmICggIXNlbGVjdG9yIHx8IHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIGlmICggKG5vZGVUeXBlID0gY29udGV4dC5ub2RlVHlwZSkgIT09IDEgJiYgbm9kZVR5cGUgIT09IDkgKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgaWYgKCBkb2N1bWVudElzSFRNTCAmJiAhc2VlZCApIHtcblxuICAgIC8vIFNob3J0Y3V0c1xuICAgIGlmICggKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHtcbiAgICAgIC8vIFNwZWVkLXVwOiBTaXp6bGUoXCIjSURcIilcbiAgICAgIGlmICggKG0gPSBtYXRjaFsxXSkgKSB7XG4gICAgICAgIGlmICggbm9kZVR5cGUgPT09IDkgKSB7XG4gICAgICAgICAgZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKTtcbiAgICAgICAgICAvLyBDaGVjayBwYXJlbnROb2RlIHRvIGNhdGNoIHdoZW4gQmxhY2tiZXJyeSA0LjYgcmV0dXJuc1xuICAgICAgICAgIC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgKGpRdWVyeSAjNjk2MylcbiAgICAgICAgICBpZiAoIGVsZW0gJiYgZWxlbS5wYXJlbnROb2RlICkge1xuICAgICAgICAgICAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIElFLCBPcGVyYSwgYW5kIFdlYmtpdCByZXR1cm4gaXRlbXNcbiAgICAgICAgICAgIC8vIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuICAgICAgICAgICAgaWYgKCBlbGVtLmlkID09PSBtICkge1xuICAgICAgICAgICAgICByZXN1bHRzLnB1c2goIGVsZW0gKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDb250ZXh0IGlzIG5vdCBhIGRvY3VtZW50XG4gICAgICAgICAgaWYgKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgJiYgKGVsZW0gPSBjb250ZXh0Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgJiZcbiAgICAgICAgICAgIGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiYgZWxlbS5pZCA9PT0gbSApIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCggZWxlbSApO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIC8vIFNwZWVkLXVwOiBTaXp6bGUoXCJUQUdcIilcbiAgICAgIH0gZWxzZSBpZiAoIG1hdGNoWzJdICkge1xuICAgICAgICBwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuXG4gICAgICAvLyBTcGVlZC11cDogU2l6emxlKFwiLkNMQVNTXCIpXG4gICAgICB9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICkge1xuICAgICAgICBwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIG0gKSApO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBRU0EgcGF0aFxuICAgIGlmICggc3VwcG9ydC5xc2EgJiYgKCFyYnVnZ3lRU0EgfHwgIXJidWdneVFTQS50ZXN0KCBzZWxlY3RvciApKSApIHtcbiAgICAgIG5pZCA9IG9sZCA9IGV4cGFuZG87XG4gICAgICBuZXdDb250ZXh0ID0gY29udGV4dDtcbiAgICAgIG5ld1NlbGVjdG9yID0gbm9kZVR5cGUgPT09IDkgJiYgc2VsZWN0b3I7XG5cbiAgICAgIC8vIHFTQSB3b3JrcyBzdHJhbmdlbHkgb24gRWxlbWVudC1yb290ZWQgcXVlcmllc1xuICAgICAgLy8gV2UgY2FuIHdvcmsgYXJvdW5kIHRoaXMgYnkgc3BlY2lmeWluZyBhbiBleHRyYSBJRCBvbiB0aGUgcm9vdFxuICAgICAgLy8gYW5kIHdvcmtpbmcgdXAgZnJvbSB0aGVyZSAoVGhhbmtzIHRvIEFuZHJldyBEdXBvbnQgZm9yIHRoZSB0ZWNobmlxdWUpXG4gICAgICAvLyBJRSA4IGRvZXNuJ3Qgd29yayBvbiBvYmplY3QgZWxlbWVudHNcbiAgICAgIGlmICggbm9kZVR5cGUgPT09IDEgJiYgY29udGV4dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcIm9iamVjdFwiICkge1xuICAgICAgICBncm91cHMgPSB0b2tlbml6ZSggc2VsZWN0b3IgKTtcblxuICAgICAgICBpZiAoIChvbGQgPSBjb250ZXh0LmdldEF0dHJpYnV0ZShcImlkXCIpKSApIHtcbiAgICAgICAgICBuaWQgPSBvbGQucmVwbGFjZSggcmVzY2FwZSwgXCJcXFxcJCZcIiApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnRleHQuc2V0QXR0cmlidXRlKCBcImlkXCIsIG5pZCApO1xuICAgICAgICB9XG4gICAgICAgIG5pZCA9IFwiW2lkPSdcIiArIG5pZCArIFwiJ10gXCI7XG5cbiAgICAgICAgaSA9IGdyb3Vwcy5sZW5ndGg7XG4gICAgICAgIHdoaWxlICggaS0tICkge1xuICAgICAgICAgIGdyb3Vwc1tpXSA9IG5pZCArIHRvU2VsZWN0b3IoIGdyb3Vwc1tpXSApO1xuICAgICAgICB9XG4gICAgICAgIG5ld0NvbnRleHQgPSByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0O1xuICAgICAgICBuZXdTZWxlY3RvciA9IGdyb3Vwcy5qb2luKFwiLFwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCBuZXdTZWxlY3RvciApIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBwdXNoLmFwcGx5KCByZXN1bHRzLFxuICAgICAgICAgICAgbmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCBuZXdTZWxlY3RvciApXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfSBjYXRjaChxc2FFcnJvcikge1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmICggIW9sZCApIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQWxsIG90aGVyc1xuICByZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemVcbiAqIEByZXR1cm5zIHtGdW5jdGlvbihzdHJpbmcsIE9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGhcbiAqICBwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKVxuICogIGRlbGV0aW5nIHRoZSBvbGRlc3QgZW50cnlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7XG4gIHZhciBrZXlzID0gW107XG5cbiAgZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7XG4gICAgLy8gVXNlIChrZXkgKyBcIiBcIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1NylcbiAgICBpZiAoIGtleXMucHVzaCgga2V5ICsgXCIgXCIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7XG4gICAgICAvLyBPbmx5IGtlZXAgdGhlIG1vc3QgcmVjZW50IGVudHJpZXNcbiAgICAgIGRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07XG4gICAgfVxuICAgIHJldHVybiAoY2FjaGVbIGtleSArIFwiIFwiIF0gPSB2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGNhY2hlO1xufVxuXG4vKipcbiAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gbWFya1xuICovXG5mdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkge1xuICBmblsgZXhwYW5kbyBdID0gdHJ1ZTtcbiAgcmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZGl2IGFuZCBleHBlY3RzIGEgYm9vbGVhbiByZXN1bHRcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0KCBmbiApIHtcbiAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gISFmbiggZGl2ICk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZmluYWxseSB7XG4gICAgLy8gUmVtb3ZlIGZyb20gaXRzIHBhcmVudCBieSBkZWZhdWx0XG4gICAgaWYgKCBkaXYucGFyZW50Tm9kZSApIHtcbiAgICAgIGRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBkaXYgKTtcbiAgICB9XG4gICAgLy8gcmVsZWFzZSBtZW1vcnkgaW4gSUVcbiAgICBkaXYgPSBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRyc1xuICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkXG4gKi9cbmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7XG4gIHZhciBhcnIgPSBhdHRycy5zcGxpdChcInxcIiksXG4gICAgaSA9IGF0dHJzLmxlbmd0aDtcblxuICB3aGlsZSAoIGktLSApIHtcbiAgICBFeHByLmF0dHJIYW5kbGVbIGFycltpXSBdID0gaGFuZGxlcjtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrcyBkb2N1bWVudCBvcmRlciBvZiB0d28gc2libGluZ3NcbiAqIEBwYXJhbSB7RWxlbWVudH0gYVxuICogQHBhcmFtIHtFbGVtZW50fSBiXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBSZXR1cm5zIGxlc3MgdGhhbiAwIGlmIGEgcHJlY2VkZXMgYiwgZ3JlYXRlciB0aGFuIDAgaWYgYSBmb2xsb3dzIGJcbiAqL1xuZnVuY3Rpb24gc2libGluZ0NoZWNrKCBhLCBiICkge1xuICB2YXIgY3VyID0gYiAmJiBhLFxuICAgIGRpZmYgPSBjdXIgJiYgYS5ub2RlVHlwZSA9PT0gMSAmJiBiLm5vZGVUeXBlID09PSAxICYmXG4gICAgICAoIH5iLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApIC1cbiAgICAgICggfmEuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICk7XG5cbiAgLy8gVXNlIElFIHNvdXJjZUluZGV4IGlmIGF2YWlsYWJsZSBvbiBib3RoIG5vZGVzXG4gIGlmICggZGlmZiApIHtcbiAgICByZXR1cm4gZGlmZjtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIGIgZm9sbG93cyBhXG4gIGlmICggY3VyICkge1xuICAgIHdoaWxlICggKGN1ciA9IGN1ci5uZXh0U2libGluZykgKSB7XG4gICAgICBpZiAoIGN1ciA9PT0gYiApIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhID8gMSA6IC0xO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgaW5wdXQgdHlwZXNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKCB0eXBlICkge1xuICByZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG4gIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5mdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7XG4gIHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICB2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gKG5hbWUgPT09IFwiaW5wdXRcIiB8fCBuYW1lID09PSBcImJ1dHRvblwiKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG4gIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBwb3NpdGlvbmFsc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZm4gKSB7XG4gIHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIGFyZ3VtZW50ICkge1xuICAgIGFyZ3VtZW50ID0gK2FyZ3VtZW50O1xuICAgIHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7XG4gICAgICB2YXIgaixcbiAgICAgICAgbWF0Y2hJbmRleGVzID0gZm4oIFtdLCBzZWVkLmxlbmd0aCwgYXJndW1lbnQgKSxcbiAgICAgICAgaSA9IG1hdGNoSW5kZXhlcy5sZW5ndGg7XG5cbiAgICAgIC8vIE1hdGNoIGVsZW1lbnRzIGZvdW5kIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXhlc1xuICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgIGlmICggc2VlZFsgKGogPSBtYXRjaEluZGV4ZXNbaV0pIF0gKSB7XG4gICAgICAgICAgc2VlZFtqXSA9ICEobWF0Y2hlc1tqXSA9IHNlZWRbal0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIENoZWNrcyBhIG5vZGUgZm9yIHZhbGlkaXR5IGFzIGEgU2l6emxlIGNvbnRleHRcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3Q9fSBjb250ZXh0XG4gKiBAcmV0dXJucyB7RWxlbWVudHxPYmplY3R8Qm9vbGVhbn0gVGhlIGlucHV0IG5vZGUgaWYgYWNjZXB0YWJsZSwgb3RoZXJ3aXNlIGEgZmFsc3kgdmFsdWVcbiAqL1xuZnVuY3Rpb24gdGVzdENvbnRleHQoIGNvbnRleHQgKSB7XG4gIHJldHVybiBjb250ZXh0ICYmIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBzdHJ1bmRlZmluZWQgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICAvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0XG4gIC8vIChzdWNoIGFzIGxvYWRpbmcgaWZyYW1lcyBpbiBJRSAtICM0ODMzKVxuICB2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcbiAgcmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gXCJIVE1MXCIgOiBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICovXG5zZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuICB2YXIgaGFzQ29tcGFyZSxcbiAgICBkb2MgPSBub2RlID8gbm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGUgOiBwcmVmZXJyZWREb2MsXG4gICAgcGFyZW50ID0gZG9jLmRlZmF1bHRWaWV3O1xuXG4gIC8vIElmIG5vIGRvY3VtZW50IGFuZCBkb2N1bWVudEVsZW1lbnQgaXMgYXZhaWxhYmxlLCByZXR1cm5cbiAgaWYgKCBkb2MgPT09IGRvY3VtZW50IHx8IGRvYy5ub2RlVHlwZSAhPT0gOSB8fCAhZG9jLmRvY3VtZW50RWxlbWVudCApIHtcbiAgICByZXR1cm4gZG9jdW1lbnQ7XG4gIH1cblxuICAvLyBTZXQgb3VyIGRvY3VtZW50XG4gIGRvY3VtZW50ID0gZG9jO1xuICBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuICAvLyBTdXBwb3J0IHRlc3RzXG4gIGRvY3VtZW50SXNIVE1MID0gIWlzWE1MKCBkb2MgKTtcblxuICAvLyBTdXBwb3J0OiBJRT44XG4gIC8vIElmIGlmcmFtZSBkb2N1bWVudCBpcyBhc3NpZ25lZCB0byBcImRvY3VtZW50XCIgdmFyaWFibGUgYW5kIGlmIGlmcmFtZSBoYXMgYmVlbiByZWxvYWRlZCxcbiAgLy8gSUUgd2lsbCB0aHJvdyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBhY2Nlc3NpbmcgXCJkb2N1bWVudFwiIHZhcmlhYmxlLCBzZWUgalF1ZXJ5ICMxMzkzNlxuICAvLyBJRTYtOCBkbyBub3Qgc3VwcG9ydCB0aGUgZGVmYXVsdFZpZXcgcHJvcGVydHkgc28gcGFyZW50IHdpbGwgYmUgdW5kZWZpbmVkXG4gIGlmICggcGFyZW50ICYmIHBhcmVudCAhPT0gcGFyZW50LnRvcCApIHtcbiAgICAvLyBJRTExIGRvZXMgbm90IGhhdmUgYXR0YWNoRXZlbnQsIHNvIGFsbCBtdXN0IHN1ZmZlclxuICAgIGlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG4gICAgICBwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJ1bmxvYWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldERvY3VtZW50KCk7XG4gICAgICB9LCBmYWxzZSApO1xuICAgIH0gZWxzZSBpZiAoIHBhcmVudC5hdHRhY2hFdmVudCApIHtcbiAgICAgIHBhcmVudC5hdHRhY2hFdmVudCggXCJvbnVubG9hZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0RG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qIEF0dHJpYnV0ZXNcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8vIFN1cHBvcnQ6IElFPDhcbiAgLy8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzIChleGNlcHRpbmcgSUU4IGJvb2xlYW5zKVxuICBzdXBwb3J0LmF0dHJpYnV0ZXMgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcbiAgICBkaXYuY2xhc3NOYW1lID0gXCJpXCI7XG4gICAgcmV0dXJuICFkaXYuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpO1xuICB9KTtcblxuICAvKiBnZXRFbGVtZW50KHMpQnkqXG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvLyBDaGVjayBpZiBnZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikgcmV0dXJucyBvbmx5IGVsZW1lbnRzXG4gIHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoIGRvYy5jcmVhdGVDb21tZW50KFwiXCIpICk7XG4gICAgcmV0dXJuICFkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aDtcbiAgfSk7XG5cbiAgLy8gQ2hlY2sgaWYgZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSBjYW4gYmUgdHJ1c3RlZFxuICBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBybmF0aXZlLnRlc3QoIGRvYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICkgJiYgYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG4gICAgZGl2LmlubmVySFRNTCA9IFwiPGRpdiBjbGFzcz0nYSc+PC9kaXY+PGRpdiBjbGFzcz0nYSBpJz48L2Rpdj5cIjtcblxuICAgIC8vIFN1cHBvcnQ6IFNhZmFyaTw0XG4gICAgLy8gQ2F0Y2ggY2xhc3Mgb3Zlci1jYWNoaW5nXG4gICAgZGl2LmZpcnN0Q2hpbGQuY2xhc3NOYW1lID0gXCJpXCI7XG4gICAgLy8gU3VwcG9ydDogT3BlcmE8MTBcbiAgICAvLyBDYXRjaCBnRUJDTiBmYWlsdXJlIHRvIGZpbmQgbm9uLWxlYWRpbmcgY2xhc3Nlc1xuICAgIHJldHVybiBkaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImlcIikubGVuZ3RoID09PSAyO1xuICB9KTtcblxuICAvLyBTdXBwb3J0OiBJRTwxMFxuICAvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcbiAgLy8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbWF0aWNhbGx5LXNldCBuYW1lcyxcbiAgLy8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0XG4gIHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuICAgIGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbztcbiAgICByZXR1cm4gIWRvYy5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jLmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuICB9KTtcblxuICAvLyBJRCBmaW5kIGFuZCBmaWx0ZXJcbiAgaWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG4gICAgRXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG4gICAgICBpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBzdHJ1bmRlZmluZWQgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG4gICAgICAgIHZhciBtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTtcbiAgICAgICAgLy8gQ2hlY2sgcGFyZW50Tm9kZSB0byBjYXRjaCB3aGVuIEJsYWNrYmVycnkgNC42IHJldHVybnNcbiAgICAgICAgLy8gbm9kZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAjNjk2M1xuICAgICAgICByZXR1cm4gbSAmJiBtLnBhcmVudE5vZGUgPyBbIG0gXSA6IFtdO1xuICAgICAgfVxuICAgIH07XG4gICAgRXhwci5maWx0ZXJbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCApIHtcbiAgICAgIHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICByZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PT0gYXR0cklkO1xuICAgICAgfTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIFN1cHBvcnQ6IElFNi83XG4gICAgLy8gZ2V0RWxlbWVudEJ5SWQgaXMgbm90IHJlbGlhYmxlIGFzIGEgZmluZCBzaG9ydGN1dFxuICAgIGRlbGV0ZSBFeHByLmZpbmRbXCJJRFwiXTtcblxuICAgIEV4cHIuZmlsdGVyW1wiSURcIl0gPSAgZnVuY3Rpb24oIGlkICkge1xuICAgICAgdmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgIHZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gc3RydW5kZWZpbmVkICYmIGVsZW0uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO1xuICAgICAgICByZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlID09PSBhdHRySWQ7XG4gICAgICB9O1xuICAgIH07XG4gIH1cblxuICAvLyBUYWdcbiAgRXhwci5maW5kW1wiVEFHXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/XG4gICAgZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcbiAgICAgIGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IHN0cnVuZGVmaW5lZCApIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuICAgICAgfVxuICAgIH0gOlxuICAgIGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG4gICAgICB2YXIgZWxlbSxcbiAgICAgICAgdG1wID0gW10sXG4gICAgICAgIGkgPSAwLFxuICAgICAgICByZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cbiAgICAgIC8vIEZpbHRlciBvdXQgcG9zc2libGUgY29tbWVudHNcbiAgICAgIGlmICggdGFnID09PSBcIipcIiApIHtcbiAgICAgICAgd2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG4gICAgICAgICAgaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuICAgICAgICAgICAgdG1wLnB1c2goIGVsZW0gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdG1wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAvLyBDbGFzc1xuICBFeHByLmZpbmRbXCJDTEFTU1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBmdW5jdGlvbiggY2xhc3NOYW1lLCBjb250ZXh0ICkge1xuICAgIGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAhPT0gc3RydW5kZWZpbmVkICYmIGRvY3VtZW50SXNIVE1MICkge1xuICAgICAgcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICk7XG4gICAgfVxuICB9O1xuXG4gIC8qIFFTQS9tYXRjaGVzU2VsZWN0b3JcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8vIFFTQSBhbmQgbWF0Y2hlc1NlbGVjdG9yIHN1cHBvcnRcblxuICAvLyBtYXRjaGVzU2VsZWN0b3IoOmFjdGl2ZSkgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKElFOS9PcGVyYSAxMS41KVxuICByYnVnZ3lNYXRjaGVzID0gW107XG5cbiAgLy8gcVNhKDpmb2N1cykgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKENocm9tZSAyMSlcbiAgLy8gV2UgYWxsb3cgdGhpcyBiZWNhdXNlIG9mIGEgYnVnIGluIElFOC85IHRoYXQgdGhyb3dzIGFuIGVycm9yXG4gIC8vIHdoZW5ldmVyIGBkb2N1bWVudC5hY3RpdmVFbGVtZW50YCBpcyBhY2Nlc3NlZCBvbiBhbiBpZnJhbWVcbiAgLy8gU28sIHdlIGFsbG93IDpmb2N1cyB0byBwYXNzIHRocm91Z2ggUVNBIGFsbCB0aGUgdGltZSB0byBhdm9pZCB0aGUgSUUgZXJyb3JcbiAgLy8gU2VlIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEzMzc4XG4gIHJidWdneVFTQSA9IFtdO1xuXG4gIGlmICggKHN1cHBvcnQucXNhID0gcm5hdGl2ZS50ZXN0KCBkb2MucXVlcnlTZWxlY3RvckFsbCApKSApIHtcbiAgICAvLyBCdWlsZCBRU0EgcmVnZXhcbiAgICAvLyBSZWdleCBzdHJhdGVneSBhZG9wdGVkIGZyb20gRGllZ28gUGVyaW5pXG4gICAgYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG4gICAgICAvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlXG4gICAgICAvLyBUaGlzIGlzIHRvIHRlc3QgSUUncyB0cmVhdG1lbnQgb2Ygbm90IGV4cGxpY2l0bHlcbiAgICAgIC8vIHNldHRpbmcgYSBib29sZWFuIGNvbnRlbnQgYXR0cmlidXRlLFxuICAgICAgLy8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2hcbiAgICAgIC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMzU5XG4gICAgICBkaXYuaW5uZXJIVE1MID0gXCI8c2VsZWN0IG1zYWxsb3djbGlwPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCI7XG5cbiAgICAgIC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcbiAgICAgIC8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj1cbiAgICAgIC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuICAgICAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cbiAgICAgIGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NsaXBePScnXVwiKS5sZW5ndGggKSB7XG4gICAgICAgIHJidWdneVFTQS5wdXNoKCBcIlsqXiRdPVwiICsgd2hpdGVzcGFjZSArIFwiKig/OicnfFxcXCJcXFwiKVwiICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN1cHBvcnQ6IElFOFxuICAgICAgLy8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCBcInZhbHVlXCIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseVxuICAgICAgaWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aCApIHtcbiAgICAgICAgcmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHNcbiAgICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG4gICAgICAvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuICAgICAgaWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGggKSB7XG4gICAgICAgIHJidWdneVFTQS5wdXNoKFwiOmNoZWNrZWRcIik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcbiAgICAgIC8vIFN1cHBvcnQ6IFdpbmRvd3MgOCBOYXRpdmUgQXBwc1xuICAgICAgLy8gVGhlIHR5cGUgYW5kIG5hbWUgYXR0cmlidXRlcyBhcmUgcmVzdHJpY3RlZCBkdXJpbmcgLmlubmVySFRNTCBhc3NpZ25tZW50XG4gICAgICB2YXIgaW5wdXQgPSBkb2MuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJoaWRkZW5cIiApO1xuICAgICAgZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApLnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwiRFwiICk7XG5cbiAgICAgIC8vIFN1cHBvcnQ6IElFOFxuICAgICAgLy8gRW5mb3JjZSBjYXNlLXNlbnNpdGl2aXR5IG9mIG5hbWUgYXR0cmlidXRlXG4gICAgICBpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoICkge1xuICAgICAgICByYnVnZ3lRU0EucHVzaCggXCJuYW1lXCIgKyB3aGl0ZXNwYWNlICsgXCIqWypeJHwhfl0/PVwiICk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpXG4gICAgICAvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuICAgICAgaWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGggKSB7XG4gICAgICAgIHJidWdneVFTQS5wdXNoKCBcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIgKTtcbiAgICAgIH1cblxuICAgICAgLy8gT3BlcmEgMTAtMTEgZG9lcyBub3QgdGhyb3cgb24gcG9zdC1jb21tYSBpbnZhbGlkIHBzZXVkb3NcbiAgICAgIGRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKTtcbiAgICAgIHJidWdneVFTQS5wdXNoKFwiLC4qOlwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ubWF0Y2hlcyB8fFxuICAgIGRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgZG9jRWxlbS5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICBkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3IgfHxcbiAgICBkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSApKSApIHtcblxuICAgIGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIGl0J3MgcG9zc2libGUgdG8gZG8gbWF0Y2hlc1NlbGVjdG9yXG4gICAgICAvLyBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlIChJRSA5KVxuICAgICAgc3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCA9IG1hdGNoZXMuY2FsbCggZGl2LCBcImRpdlwiICk7XG5cbiAgICAgIC8vIFRoaXMgc2hvdWxkIGZhaWwgd2l0aCBhbiBleGNlcHRpb25cbiAgICAgIC8vIEdlY2tvIGRvZXMgbm90IGVycm9yLCByZXR1cm5zIGZhbHNlIGluc3RlYWRcbiAgICAgIG1hdGNoZXMuY2FsbCggZGl2LCBcIltzIT0nJ106eFwiICk7XG4gICAgICByYnVnZ3lNYXRjaGVzLnB1c2goIFwiIT1cIiwgcHNldWRvcyApO1xuICAgIH0pO1xuICB9XG5cbiAgcmJ1Z2d5UVNBID0gcmJ1Z2d5UVNBLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lRU0Euam9pbihcInxcIikgKTtcbiAgcmJ1Z2d5TWF0Y2hlcyA9IHJidWdneU1hdGNoZXMubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneU1hdGNoZXMuam9pbihcInxcIikgKTtcblxuICAvKiBDb250YWluc1xuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIGhhc0NvbXBhcmUgPSBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29tcGFyZURvY3VtZW50UG9zaXRpb24gKTtcblxuICAvLyBFbGVtZW50IGNvbnRhaW5zIGFub3RoZXJcbiAgLy8gUHVycG9zZWZ1bGx5IGRvZXMgbm90IGltcGxlbWVudCBpbmNsdXNpdmUgZGVzY2VuZGVudFxuICAvLyBBcyBpbiwgYW4gZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGl0c2VsZlxuICBjb250YWlucyA9IGhhc0NvbXBhcmUgfHwgcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbnRhaW5zICkgP1xuICAgIGZ1bmN0aW9uKCBhLCBiICkge1xuICAgICAgdmFyIGFkb3duID0gYS5ub2RlVHlwZSA9PT0gOSA/IGEuZG9jdW1lbnRFbGVtZW50IDogYSxcbiAgICAgICAgYnVwID0gYiAmJiBiLnBhcmVudE5vZGU7XG4gICAgICByZXR1cm4gYSA9PT0gYnVwIHx8ICEhKCBidXAgJiYgYnVwLm5vZGVUeXBlID09PSAxICYmIChcbiAgICAgICAgYWRvd24uY29udGFpbnMgP1xuICAgICAgICAgIGFkb3duLmNvbnRhaW5zKCBidXAgKSA6XG4gICAgICAgICAgYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBidXAgKSAmIDE2XG4gICAgICApKTtcbiAgICB9IDpcbiAgICBmdW5jdGlvbiggYSwgYiApIHtcbiAgICAgIGlmICggYiApIHtcbiAgICAgICAgd2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7XG4gICAgICAgICAgaWYgKCBiID09PSBhICkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAvKiBTb3J0aW5nXG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nXG4gIHNvcnRPcmRlciA9IGhhc0NvbXBhcmUgP1xuICBmdW5jdGlvbiggYSwgYiApIHtcblxuICAgIC8vIEZsYWcgZm9yIGR1cGxpY2F0ZSByZW1vdmFsXG4gICAgaWYgKCBhID09PSBiICkge1xuICAgICAgaGFzRHVwbGljYXRlID0gdHJ1ZTtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb25cbiAgICB2YXIgY29tcGFyZSA9ICFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIC0gIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247XG4gICAgaWYgKCBjb21wYXJlICkge1xuICAgICAgcmV0dXJuIGNvbXBhcmU7XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHBvc2l0aW9uIGlmIGJvdGggaW5wdXRzIGJlbG9uZyB0byB0aGUgc2FtZSBkb2N1bWVudFxuICAgIGNvbXBhcmUgPSAoIGEub3duZXJEb2N1bWVudCB8fCBhICkgPT09ICggYi5vd25lckRvY3VtZW50IHx8IGIgKSA/XG4gICAgICBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOlxuXG4gICAgICAvLyBPdGhlcndpc2Ugd2Uga25vdyB0aGV5IGFyZSBkaXNjb25uZWN0ZWRcbiAgICAgIDE7XG5cbiAgICAvLyBEaXNjb25uZWN0ZWQgbm9kZXNcbiAgICBpZiAoIGNvbXBhcmUgJiAxIHx8XG4gICAgICAoIXN1cHBvcnQuc29ydERldGFjaGVkICYmIGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGEgKSA9PT0gY29tcGFyZSkgKSB7XG5cbiAgICAgIC8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudFxuICAgICAgaWYgKCBhID09PSBkb2MgfHwgYS5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBhKSApIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgaWYgKCBiID09PSBkb2MgfHwgYi5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBiKSApIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG5cbiAgICAgIC8vIE1haW50YWluIG9yaWdpbmFsIG9yZGVyXG4gICAgICByZXR1cm4gc29ydElucHV0ID9cbiAgICAgICAgKCBpbmRleE9mLmNhbGwoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZi5jYWxsKCBzb3J0SW5wdXQsIGIgKSApIDpcbiAgICAgICAgMDtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tcGFyZSAmIDQgPyAtMSA6IDE7XG4gIH0gOlxuICBmdW5jdGlvbiggYSwgYiApIHtcbiAgICAvLyBFeGl0IGVhcmx5IGlmIHRoZSBub2RlcyBhcmUgaWRlbnRpY2FsXG4gICAgaWYgKCBhID09PSBiICkge1xuICAgICAgaGFzRHVwbGljYXRlID0gdHJ1ZTtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHZhciBjdXIsXG4gICAgICBpID0gMCxcbiAgICAgIGF1cCA9IGEucGFyZW50Tm9kZSxcbiAgICAgIGJ1cCA9IGIucGFyZW50Tm9kZSxcbiAgICAgIGFwID0gWyBhIF0sXG4gICAgICBicCA9IFsgYiBdO1xuXG4gICAgLy8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWRcbiAgICBpZiAoICFhdXAgfHwgIWJ1cCApIHtcbiAgICAgIHJldHVybiBhID09PSBkb2MgPyAtMSA6XG4gICAgICAgIGIgPT09IGRvYyA/IDEgOlxuICAgICAgICBhdXAgPyAtMSA6XG4gICAgICAgIGJ1cCA/IDEgOlxuICAgICAgICBzb3J0SW5wdXQgP1xuICAgICAgICAoIGluZGV4T2YuY2FsbCggc29ydElucHV0LCBhICkgLSBpbmRleE9mLmNhbGwoIHNvcnRJbnB1dCwgYiApICkgOlxuICAgICAgICAwO1xuXG4gICAgLy8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcbiAgICB9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcbiAgICAgIHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuICAgIGN1ciA9IGE7XG4gICAgd2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuICAgICAgYXAudW5zaGlmdCggY3VyICk7XG4gICAgfVxuICAgIGN1ciA9IGI7XG4gICAgd2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuICAgICAgYnAudW5zaGlmdCggY3VyICk7XG4gICAgfVxuXG4gICAgLy8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcbiAgICB3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHtcbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4gaSA/XG4gICAgICAvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3JcbiAgICAgIHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG4gICAgICAvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3RcbiAgICAgIGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG4gICAgICBicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG4gICAgICAwO1xuICB9O1xuXG4gIHJldHVybiBkb2M7XG59O1xuXG5TaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHtcbiAgcmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTtcbn07XG5cblNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcbiAgLy8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG4gIGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcbiAgICBzZXREb2N1bWVudCggZWxlbSApO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkXG4gIGV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsIFwiPSckMSddXCIgKTtcblxuICBpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG4gICAgKCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuICAgICggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuICAgIHRyeSB7XG4gICAgICB2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cbiAgICAgIC8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcbiAgICAgIGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcbiAgICAgICAgICAvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuICAgICAgICAgIC8vIGZyYWdtZW50IGluIElFIDlcbiAgICAgICAgICBlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfVxuICAgIH0gY2F0Y2goZSkge31cbiAgfVxuXG4gIHJldHVybiBTaXp6bGUoIGV4cHIsIGRvY3VtZW50LCBudWxsLCBbIGVsZW0gXSApLmxlbmd0aCA+IDA7XG59O1xuXG5TaXp6bGUuY29udGFpbnMgPSBmdW5jdGlvbiggY29udGV4dCwgZWxlbSApIHtcbiAgLy8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG4gIGlmICggKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCApICE9PSBkb2N1bWVudCApIHtcbiAgICBzZXREb2N1bWVudCggY29udGV4dCApO1xuICB9XG4gIHJldHVybiBjb250YWlucyggY29udGV4dCwgZWxlbSApO1xufTtcblxuU2l6emxlLmF0dHIgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcbiAgLy8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG4gIGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcbiAgICBzZXREb2N1bWVudCggZWxlbSApO1xuICB9XG5cbiAgdmFyIGZuID0gRXhwci5hdHRySGFuZGxlWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSxcbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoalF1ZXJ5ICMxMzgwNylcbiAgICB2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/XG4gICAgICBmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOlxuICAgICAgdW5kZWZpbmVkO1xuXG4gIHJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/XG4gICAgdmFsIDpcbiAgICBzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID9cbiAgICAgIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgOlxuICAgICAgKHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkgJiYgdmFsLnNwZWNpZmllZCA/XG4gICAgICAgIHZhbC52YWx1ZSA6XG4gICAgICAgIG51bGw7XG59O1xuXG5TaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkge1xuICB0aHJvdyBuZXcgRXJyb3IoIFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIgKyBtc2cgKTtcbn07XG5cbi8qKlxuICogRG9jdW1lbnQgc29ydGluZyBhbmQgcmVtb3ZpbmcgZHVwbGljYXRlc1xuICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHNcbiAqL1xuU2l6emxlLnVuaXF1ZVNvcnQgPSBmdW5jdGlvbiggcmVzdWx0cyApIHtcbiAgdmFyIGVsZW0sXG4gICAgZHVwbGljYXRlcyA9IFtdLFxuICAgIGogPSAwLFxuICAgIGkgPSAwO1xuXG4gIC8vIFVubGVzcyB3ZSAqa25vdyogd2UgY2FuIGRldGVjdCBkdXBsaWNhdGVzLCBhc3N1bWUgdGhlaXIgcHJlc2VuY2VcbiAgaGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcztcbiAgc29ydElucHV0ID0gIXN1cHBvcnQuc29ydFN0YWJsZSAmJiByZXN1bHRzLnNsaWNlKCAwICk7XG4gIHJlc3VsdHMuc29ydCggc29ydE9yZGVyICk7XG5cbiAgaWYgKCBoYXNEdXBsaWNhdGUgKSB7XG4gICAgd2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG4gICAgICBpZiAoIGVsZW0gPT09IHJlc3VsdHNbIGkgXSApIHtcbiAgICAgICAgaiA9IGR1cGxpY2F0ZXMucHVzaCggaSApO1xuICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoIGotLSApIHtcbiAgICAgIHJlc3VsdHMuc3BsaWNlKCBkdXBsaWNhdGVzWyBqIF0sIDEgKTtcbiAgICB9XG4gIH1cblxuICAvLyBDbGVhciBpbnB1dCBhZnRlciBzb3J0aW5nIHRvIHJlbGVhc2Ugb2JqZWN0c1xuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9zaXp6bGUvcHVsbC8yMjVcbiAgc29ydElucHV0ID0gbnVsbDtcblxuICByZXR1cm4gcmVzdWx0cztcbn07XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cmlldmluZyB0aGUgdGV4dCB2YWx1ZSBvZiBhbiBhcnJheSBvZiBET00gbm9kZXNcbiAqIEBwYXJhbSB7QXJyYXl8RWxlbWVudH0gZWxlbVxuICovXG5nZXRUZXh0ID0gU2l6emxlLmdldFRleHQgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgdmFyIG5vZGUsXG4gICAgcmV0ID0gXCJcIixcbiAgICBpID0gMCxcbiAgICBub2RlVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cbiAgaWYgKCAhbm9kZVR5cGUgKSB7XG4gICAgLy8gSWYgbm8gbm9kZVR5cGUsIHRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gYXJyYXlcbiAgICB3aGlsZSAoIChub2RlID0gZWxlbVtpKytdKSApIHtcbiAgICAgIC8vIERvIG5vdCB0cmF2ZXJzZSBjb21tZW50IG5vZGVzXG4gICAgICByZXQgKz0gZ2V0VGV4dCggbm9kZSApO1xuICAgIH1cbiAgfSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDkgfHwgbm9kZVR5cGUgPT09IDExICkge1xuICAgIC8vIFVzZSB0ZXh0Q29udGVudCBmb3IgZWxlbWVudHNcbiAgICAvLyBpbm5lclRleHQgdXNhZ2UgcmVtb3ZlZCBmb3IgY29uc2lzdGVuY3kgb2YgbmV3IGxpbmVzIChqUXVlcnkgIzExMTUzKVxuICAgIGlmICggdHlwZW9mIGVsZW0udGV4dENvbnRlbnQgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgICByZXR1cm4gZWxlbS50ZXh0Q29udGVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVHJhdmVyc2UgaXRzIGNoaWxkcmVuXG4gICAgICBmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcbiAgICAgICAgcmV0ICs9IGdldFRleHQoIGVsZW0gKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAzIHx8IG5vZGVUeXBlID09PSA0ICkge1xuICAgIHJldHVybiBlbGVtLm5vZGVWYWx1ZTtcbiAgfVxuICAvLyBEbyBub3QgaW5jbHVkZSBjb21tZW50IG9yIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbm9kZXNcblxuICByZXR1cm4gcmV0O1xufTtcblxuRXhwciA9IFNpenpsZS5zZWxlY3RvcnMgPSB7XG5cbiAgLy8gQ2FuIGJlIGFkanVzdGVkIGJ5IHRoZSB1c2VyXG4gIGNhY2hlTGVuZ3RoOiA1MCxcblxuICBjcmVhdGVQc2V1ZG86IG1hcmtGdW5jdGlvbixcblxuICBtYXRjaDogbWF0Y2hFeHByLFxuXG4gIGF0dHJIYW5kbGU6IHt9LFxuXG4gIGZpbmQ6IHt9LFxuXG4gIHJlbGF0aXZlOiB7XG4gICAgXCI+XCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiwgZmlyc3Q6IHRydWUgfSxcbiAgICBcIiBcIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiIH0sXG4gICAgXCIrXCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiLCBmaXJzdDogdHJ1ZSB9LFxuICAgIFwiflwiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiB9XG4gIH0sXG5cbiAgcHJlRmlsdGVyOiB7XG4gICAgXCJBVFRSXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcbiAgICAgIG1hdGNoWzFdID0gbWF0Y2hbMV0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuICAgICAgLy8gTW92ZSB0aGUgZ2l2ZW4gdmFsdWUgdG8gbWF0Y2hbM10gd2hldGhlciBxdW90ZWQgb3IgdW5xdW90ZWRcbiAgICAgIG1hdGNoWzNdID0gKCBtYXRjaFszXSB8fCBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBcIlwiICkucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuICAgICAgaWYgKCBtYXRjaFsyXSA9PT0gXCJ+PVwiICkge1xuICAgICAgICBtYXRjaFszXSA9IFwiIFwiICsgbWF0Y2hbM10gKyBcIiBcIjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1hdGNoLnNsaWNlKCAwLCA0ICk7XG4gICAgfSxcblxuICAgIFwiQ0hJTERcIjogZnVuY3Rpb24oIG1hdGNoICkge1xuICAgICAgLyogbWF0Y2hlcyBmcm9tIG1hdGNoRXhwcltcIkNISUxEXCJdXG4gICAgICAgIDEgdHlwZSAob25seXxudGh8Li4uKVxuICAgICAgICAyIHdoYXQgKGNoaWxkfG9mLXR5cGUpXG4gICAgICAgIDMgYXJndW1lbnQgKGV2ZW58b2RkfFxcZCp8XFxkKm4oWystXVxcZCspP3wuLi4pXG4gICAgICAgIDQgeG4tY29tcG9uZW50IG9mIHhuK3kgYXJndW1lbnQgKFsrLV0/XFxkKm58KVxuICAgICAgICA1IHNpZ24gb2YgeG4tY29tcG9uZW50XG4gICAgICAgIDYgeCBvZiB4bi1jb21wb25lbnRcbiAgICAgICAgNyBzaWduIG9mIHktY29tcG9uZW50XG4gICAgICAgIDggeSBvZiB5LWNvbXBvbmVudFxuICAgICAgKi9cbiAgICAgIG1hdGNoWzFdID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblxuICAgICAgaWYgKCBtYXRjaFsxXS5zbGljZSggMCwgMyApID09PSBcIm50aFwiICkge1xuICAgICAgICAvLyBudGgtKiByZXF1aXJlcyBhcmd1bWVudFxuICAgICAgICBpZiAoICFtYXRjaFszXSApIHtcbiAgICAgICAgICBTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBudW1lcmljIHggYW5kIHkgcGFyYW1ldGVycyBmb3IgRXhwci5maWx0ZXIuQ0hJTERcbiAgICAgICAgLy8gcmVtZW1iZXIgdGhhdCBmYWxzZS90cnVlIGNhc3QgcmVzcGVjdGl2ZWx5IHRvIDAvMVxuICAgICAgICBtYXRjaFs0XSA9ICsoIG1hdGNoWzRdID8gbWF0Y2hbNV0gKyAobWF0Y2hbNl0gfHwgMSkgOiAyICogKCBtYXRjaFszXSA9PT0gXCJldmVuXCIgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKSApO1xuICAgICAgICBtYXRjaFs1XSA9ICsoICggbWF0Y2hbN10gKyBtYXRjaFs4XSApIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICk7XG5cbiAgICAgIC8vIG90aGVyIHR5cGVzIHByb2hpYml0IGFyZ3VtZW50c1xuICAgICAgfSBlbHNlIGlmICggbWF0Y2hbM10gKSB7XG4gICAgICAgIFNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH0sXG5cbiAgICBcIlBTRVVET1wiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG4gICAgICB2YXIgZXhjZXNzLFxuICAgICAgICB1bnF1b3RlZCA9ICFtYXRjaFs2XSAmJiBtYXRjaFsyXTtcblxuICAgICAgaWYgKCBtYXRjaEV4cHJbXCJDSElMRFwiXS50ZXN0KCBtYXRjaFswXSApICkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gQWNjZXB0IHF1b3RlZCBhcmd1bWVudHMgYXMtaXNcbiAgICAgIGlmICggbWF0Y2hbM10gKSB7XG4gICAgICAgIG1hdGNoWzJdID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIjtcblxuICAgICAgLy8gU3RyaXAgZXhjZXNzIGNoYXJhY3RlcnMgZnJvbSB1bnF1b3RlZCBhcmd1bWVudHNcbiAgICAgIH0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJlxuICAgICAgICAvLyBHZXQgZXhjZXNzIGZyb20gdG9rZW5pemUgKHJlY3Vyc2l2ZWx5KVxuICAgICAgICAoZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnVlICkpICYmXG4gICAgICAgIC8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpc1xuICAgICAgICAoZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggXCIpXCIsIHVucXVvdGVkLmxlbmd0aCAtIGV4Y2VzcyApIC0gdW5xdW90ZWQubGVuZ3RoKSApIHtcblxuICAgICAgICAvLyBleGNlc3MgaXMgYSBuZWdhdGl2ZSBpbmRleFxuICAgICAgICBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwLCBleGNlc3MgKTtcbiAgICAgICAgbWF0Y2hbMl0gPSB1bnF1b3RlZC5zbGljZSggMCwgZXhjZXNzICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiBvbmx5IGNhcHR1cmVzIG5lZWRlZCBieSB0aGUgcHNldWRvIGZpbHRlciBtZXRob2QgKHR5cGUgYW5kIGFyZ3VtZW50KVxuICAgICAgcmV0dXJuIG1hdGNoLnNsaWNlKCAwLCAzICk7XG4gICAgfVxuICB9LFxuXG4gIGZpbHRlcjoge1xuXG4gICAgXCJUQUdcIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7XG4gICAgICB2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBub2RlTmFtZVNlbGVjdG9yID09PSBcIipcIiA/XG4gICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG4gICAgICAgIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgIHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7XG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIFwiQ0xBU1NcIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHtcbiAgICAgIHZhciBwYXR0ZXJuID0gY2xhc3NDYWNoZVsgY2xhc3NOYW1lICsgXCIgXCIgXTtcblxuICAgICAgcmV0dXJuIHBhdHRlcm4gfHxcbiAgICAgICAgKHBhdHRlcm4gPSBuZXcgUmVnRXhwKCBcIihefFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgY2xhc3NOYW1lICsgXCIoXCIgKyB3aGl0ZXNwYWNlICsgXCJ8JClcIiApKSAmJlxuICAgICAgICBjbGFzc0NhY2hlKCBjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QoIHR5cGVvZiBlbGVtLmNsYXNzTmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBlbGVtLmNsYXNzTmFtZSB8fCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgIT09IHN0cnVuZGVmaW5lZCAmJiBlbGVtLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCIgKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIFwiQVRUUlwiOiBmdW5jdGlvbiggbmFtZSwgb3BlcmF0b3IsIGNoZWNrICkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gU2l6emxlLmF0dHIoIGVsZW0sIG5hbWUgKTtcblxuICAgICAgICBpZiAoIHJlc3VsdCA9PSBudWxsICkge1xuICAgICAgICAgIHJldHVybiBvcGVyYXRvciA9PT0gXCIhPVwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICggIW9wZXJhdG9yICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0ICs9IFwiXCI7XG5cbiAgICAgICAgcmV0dXJuIG9wZXJhdG9yID09PSBcIj1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgOlxuICAgICAgICAgIG9wZXJhdG9yID09PSBcIiE9XCIgPyByZXN1bHQgIT09IGNoZWNrIDpcbiAgICAgICAgICBvcGVyYXRvciA9PT0gXCJePVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPT09IDAgOlxuICAgICAgICAgIG9wZXJhdG9yID09PSBcIio9XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDpcbiAgICAgICAgICBvcGVyYXRvciA9PT0gXCIkPVwiID8gY2hlY2sgJiYgcmVzdWx0LnNsaWNlKCAtY2hlY2subGVuZ3RoICkgPT09IGNoZWNrIDpcbiAgICAgICAgICBvcGVyYXRvciA9PT0gXCJ+PVwiID8gKCBcIiBcIiArIHJlc3VsdCArIFwiIFwiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDpcbiAgICAgICAgICBvcGVyYXRvciA9PT0gXCJ8PVwiID8gcmVzdWx0ID09PSBjaGVjayB8fCByZXN1bHQuc2xpY2UoIDAsIGNoZWNrLmxlbmd0aCArIDEgKSA9PT0gY2hlY2sgKyBcIi1cIiA6XG4gICAgICAgICAgZmFsc2U7XG4gICAgICB9O1xuICAgIH0sXG5cbiAgICBcIkNISUxEXCI6IGZ1bmN0aW9uKCB0eXBlLCB3aGF0LCBhcmd1bWVudCwgZmlyc3QsIGxhc3QgKSB7XG4gICAgICB2YXIgc2ltcGxlID0gdHlwZS5zbGljZSggMCwgMyApICE9PSBcIm50aFwiLFxuICAgICAgICBmb3J3YXJkID0gdHlwZS5zbGljZSggLTQgKSAhPT0gXCJsYXN0XCIsXG4gICAgICAgIG9mVHlwZSA9IHdoYXQgPT09IFwib2YtdHlwZVwiO1xuXG4gICAgICByZXR1cm4gZmlyc3QgPT09IDEgJiYgbGFzdCA9PT0gMCA/XG5cbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIDpudGgtKihuKVxuICAgICAgICBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICByZXR1cm4gISFlbGVtLnBhcmVudE5vZGU7XG4gICAgICAgIH0gOlxuXG4gICAgICAgIGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG4gICAgICAgICAgdmFyIGNhY2hlLCBvdXRlckNhY2hlLCBub2RlLCBkaWZmLCBub2RlSW5kZXgsIHN0YXJ0LFxuICAgICAgICAgICAgZGlyID0gc2ltcGxlICE9PSBmb3J3YXJkID8gXCJuZXh0U2libGluZ1wiIDogXCJwcmV2aW91c1NpYmxpbmdcIixcbiAgICAgICAgICAgIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZSxcbiAgICAgICAgICAgIG5hbWUgPSBvZlR5cGUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgdXNlQ2FjaGUgPSAheG1sICYmICFvZlR5cGU7XG5cbiAgICAgICAgICBpZiAoIHBhcmVudCApIHtcblxuICAgICAgICAgICAgLy8gOihmaXJzdHxsYXN0fG9ubHkpLShjaGlsZHxvZi10eXBlKVxuICAgICAgICAgICAgaWYgKCBzaW1wbGUgKSB7XG4gICAgICAgICAgICAgIHdoaWxlICggZGlyICkge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBlbGVtO1xuICAgICAgICAgICAgICAgIHdoaWxlICggKG5vZGUgPSBub2RlWyBkaXIgXSkgKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIG9mVHlwZSA/IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6IG5vZGUubm9kZVR5cGUgPT09IDEgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUmV2ZXJzZSBkaXJlY3Rpb24gZm9yIDpvbmx5LSogKGlmIHdlIGhhdmVuJ3QgeWV0IGRvbmUgc28pXG4gICAgICAgICAgICAgICAgc3RhcnQgPSBkaXIgPSB0eXBlID09PSBcIm9ubHlcIiAmJiAhc3RhcnQgJiYgXCJuZXh0U2libGluZ1wiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFydCA9IFsgZm9yd2FyZCA/IHBhcmVudC5maXJzdENoaWxkIDogcGFyZW50Lmxhc3RDaGlsZCBdO1xuXG4gICAgICAgICAgICAvLyBub24teG1sIDpudGgtY2hpbGQoLi4uKSBzdG9yZXMgY2FjaGUgZGF0YSBvbiBgcGFyZW50YFxuICAgICAgICAgICAgaWYgKCBmb3J3YXJkICYmIHVzZUNhY2hlICkge1xuICAgICAgICAgICAgICAvLyBTZWVrIGBlbGVtYCBmcm9tIGEgcHJldmlvdXNseS1jYWNoZWQgaW5kZXhcbiAgICAgICAgICAgICAgb3V0ZXJDYWNoZSA9IHBhcmVudFsgZXhwYW5kbyBdIHx8IChwYXJlbnRbIGV4cGFuZG8gXSA9IHt9KTtcbiAgICAgICAgICAgICAgY2FjaGUgPSBvdXRlckNhY2hlWyB0eXBlIF0gfHwgW107XG4gICAgICAgICAgICAgIG5vZGVJbmRleCA9IGNhY2hlWzBdID09PSBkaXJydW5zICYmIGNhY2hlWzFdO1xuICAgICAgICAgICAgICBkaWZmID0gY2FjaGVbMF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbMl07XG4gICAgICAgICAgICAgIG5vZGUgPSBub2RlSW5kZXggJiYgcGFyZW50LmNoaWxkTm9kZXNbIG5vZGVJbmRleCBdO1xuXG4gICAgICAgICAgICAgIHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byBzZWVraW5nIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuICAgICAgICAgICAgICAgIChkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkge1xuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiBmb3VuZCwgY2FjaGUgaW5kZXhlcyBvbiBgcGFyZW50YCBhbmQgYnJlYWtcbiAgICAgICAgICAgICAgICBpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgJiYgKytkaWZmICYmIG5vZGUgPT09IGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICBvdXRlckNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIG5vZGVJbmRleCwgZGlmZiBdO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVzZSBwcmV2aW91c2x5LWNhY2hlZCBlbGVtZW50IGluZGV4IGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgfSBlbHNlIGlmICggdXNlQ2FjaGUgJiYgKGNhY2hlID0gKGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pKVsgdHlwZSBdKSAmJiBjYWNoZVswXSA9PT0gZGlycnVucyApIHtcbiAgICAgICAgICAgICAgZGlmZiA9IGNhY2hlWzFdO1xuXG4gICAgICAgICAgICAvLyB4bWwgOm50aC1jaGlsZCguLi4pIG9yIDpudGgtbGFzdC1jaGlsZCguLi4pIG9yIDpudGgoLWxhc3QpPy1vZi10eXBlKC4uLilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFVzZSB0aGUgc2FtZSBsb29wIGFzIGFib3ZlIHRvIHNlZWsgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG4gICAgICAgICAgICAgIHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG4gICAgICAgICAgICAgICAgKGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoICggb2ZUeXBlID8gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDogbm9kZS5ub2RlVHlwZSA9PT0gMSApICYmICsrZGlmZiApIHtcbiAgICAgICAgICAgICAgICAgIC8vIENhY2hlIHRoZSBpbmRleCBvZiBlYWNoIGVuY291bnRlcmVkIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgIGlmICggdXNlQ2FjaGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIChub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KSlbIHR5cGUgXSA9IFsgZGlycnVucywgZGlmZiBdO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoIG5vZGUgPT09IGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZVxuICAgICAgICAgICAgZGlmZiAtPSBsYXN0O1xuICAgICAgICAgICAgcmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBcIlBTRVVET1wiOiBmdW5jdGlvbiggcHNldWRvLCBhcmd1bWVudCApIHtcbiAgICAgIC8vIHBzZXVkby1jbGFzcyBuYW1lcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZVxuICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNwc2V1ZG8tY2xhc3Nlc1xuICAgICAgLy8gUHJpb3JpdGl6ZSBieSBjYXNlIHNlbnNpdGl2aXR5IGluIGNhc2UgY3VzdG9tIHBzZXVkb3MgYXJlIGFkZGVkIHdpdGggdXBwZXJjYXNlIGxldHRlcnNcbiAgICAgIC8vIFJlbWVtYmVyIHRoYXQgc2V0RmlsdGVycyBpbmhlcml0cyBmcm9tIHBzZXVkb3NcbiAgICAgIHZhciBhcmdzLFxuICAgICAgICBmbiA9IEV4cHIucHNldWRvc1sgcHNldWRvIF0gfHwgRXhwci5zZXRGaWx0ZXJzWyBwc2V1ZG8udG9Mb3dlckNhc2UoKSBdIHx8XG4gICAgICAgICAgU2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIgKyBwc2V1ZG8gKTtcblxuICAgICAgLy8gVGhlIHVzZXIgbWF5IHVzZSBjcmVhdGVQc2V1ZG8gdG8gaW5kaWNhdGUgdGhhdFxuICAgICAgLy8gYXJndW1lbnRzIGFyZSBuZWVkZWQgdG8gY3JlYXRlIHRoZSBmaWx0ZXIgZnVuY3Rpb25cbiAgICAgIC8vIGp1c3QgYXMgU2l6emxlIGRvZXNcbiAgICAgIGlmICggZm5bIGV4cGFuZG8gXSApIHtcbiAgICAgICAgcmV0dXJuIGZuKCBhcmd1bWVudCApO1xuICAgICAgfVxuXG4gICAgICAvLyBCdXQgbWFpbnRhaW4gc3VwcG9ydCBmb3Igb2xkIHNpZ25hdHVyZXNcbiAgICAgIGlmICggZm4ubGVuZ3RoID4gMSApIHtcbiAgICAgICAgYXJncyA9IFsgcHNldWRvLCBwc2V1ZG8sIFwiXCIsIGFyZ3VtZW50IF07XG4gICAgICAgIHJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgP1xuICAgICAgICAgIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcbiAgICAgICAgICAgIHZhciBpZHgsXG4gICAgICAgICAgICAgIG1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSxcbiAgICAgICAgICAgICAgaSA9IG1hdGNoZWQubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgICAgICAgIGlkeCA9IGluZGV4T2YuY2FsbCggc2VlZCwgbWF0Y2hlZFtpXSApO1xuICAgICAgICAgICAgICBzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pIDpcbiAgICAgICAgICBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgIHJldHVybiBmbiggZWxlbSwgMCwgYXJncyApO1xuICAgICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmbjtcbiAgICB9XG4gIH0sXG5cbiAgcHNldWRvczoge1xuICAgIC8vIFBvdGVudGlhbGx5IGNvbXBsZXggcHNldWRvc1xuICAgIFwibm90XCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG4gICAgICAvLyBUcmltIHRoZSBzZWxlY3RvciBwYXNzZWQgdG8gY29tcGlsZVxuICAgICAgLy8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmdcbiAgICAgIC8vIHNwYWNlcyBhcyBjb21iaW5hdG9yc1xuICAgICAgdmFyIGlucHV0ID0gW10sXG4gICAgICAgIHJlc3VsdHMgPSBbXSxcbiAgICAgICAgbWF0Y2hlciA9IGNvbXBpbGUoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSApO1xuXG4gICAgICByZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID9cbiAgICAgICAgbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBjb250ZXh0LCB4bWwgKSB7XG4gICAgICAgICAgdmFyIGVsZW0sXG4gICAgICAgICAgICB1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksXG4gICAgICAgICAgICBpID0gc2VlZC5sZW5ndGg7XG5cbiAgICAgICAgICAvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgXG4gICAgICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgICAgICBpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcbiAgICAgICAgICAgICAgc2VlZFtpXSA9ICEobWF0Y2hlc1tpXSA9IGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkgOlxuICAgICAgICBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuICAgICAgICAgIGlucHV0WzBdID0gZWxlbTtcbiAgICAgICAgICBtYXRjaGVyKCBpbnB1dCwgbnVsbCwgeG1sLCByZXN1bHRzICk7XG4gICAgICAgICAgcmV0dXJuICFyZXN1bHRzLnBvcCgpO1xuICAgICAgICB9O1xuICAgIH0pLFxuXG4gICAgXCJoYXNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgcmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwO1xuICAgICAgfTtcbiAgICB9KSxcblxuICAgIFwiY29udGFpbnNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCB0ZXh0ICkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICByZXR1cm4gKCBlbGVtLnRleHRDb250ZW50IHx8IGVsZW0uaW5uZXJUZXh0IHx8IGdldFRleHQoIGVsZW0gKSApLmluZGV4T2YoIHRleHQgKSA+IC0xO1xuICAgICAgfTtcbiAgICB9KSxcblxuICAgIC8vIFwiV2hldGhlciBhbiBlbGVtZW50IGlzIHJlcHJlc2VudGVkIGJ5IGEgOmxhbmcoKSBzZWxlY3RvclxuICAgIC8vIGlzIGJhc2VkIHNvbGVseSBvbiB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlXG4gICAgLy8gYmVpbmcgZXF1YWwgdG8gdGhlIGlkZW50aWZpZXIgQyxcbiAgICAvLyBvciBiZWdpbm5pbmcgd2l0aCB0aGUgaWRlbnRpZmllciBDIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IFwiLVwiLlxuICAgIC8vIFRoZSBtYXRjaGluZyBvZiBDIGFnYWluc3QgdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZSBpcyBwZXJmb3JtZWQgY2FzZS1pbnNlbnNpdGl2ZWx5LlxuICAgIC8vIFRoZSBpZGVudGlmaWVyIEMgZG9lcyBub3QgaGF2ZSB0byBiZSBhIHZhbGlkIGxhbmd1YWdlIG5hbWUuXCJcbiAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2xhbmctcHNldWRvXG4gICAgXCJsYW5nXCI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIGxhbmcgKSB7XG4gICAgICAvLyBsYW5nIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyXG4gICAgICBpZiAoICFyaWRlbnRpZmllci50ZXN0KGxhbmcgfHwgXCJcIikgKSB7XG4gICAgICAgIFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIiArIGxhbmcgKTtcbiAgICAgIH1cbiAgICAgIGxhbmcgPSBsYW5nLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgdmFyIGVsZW1MYW5nO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgaWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/XG4gICAgICAgICAgICBlbGVtLmxhbmcgOlxuICAgICAgICAgICAgZWxlbS5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKSB8fCBlbGVtLmdldEF0dHJpYnV0ZShcImxhbmdcIikpICkge1xuXG4gICAgICAgICAgICBlbGVtTGFuZyA9IGVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gZWxlbUxhbmcgPT09IGxhbmcgfHwgZWxlbUxhbmcuaW5kZXhPZiggbGFuZyArIFwiLVwiICkgPT09IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlICggKGVsZW0gPSBlbGVtLnBhcmVudE5vZGUpICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfTtcbiAgICB9KSxcblxuICAgIC8vIE1pc2NlbGxhbmVvdXNcbiAgICBcInRhcmdldFwiOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgIHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuICAgICAgcmV0dXJuIGhhc2ggJiYgaGFzaC5zbGljZSggMSApID09PSBlbGVtLmlkO1xuICAgIH0sXG5cbiAgICBcInJvb3RcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICByZXR1cm4gZWxlbSA9PT0gZG9jRWxlbTtcbiAgICB9LFxuXG4gICAgXCJmb2N1c1wiOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgIHJldHVybiBlbGVtID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkgJiYgISEoZWxlbS50eXBlIHx8IGVsZW0uaHJlZiB8fCB+ZWxlbS50YWJJbmRleCk7XG4gICAgfSxcblxuICAgIC8vIEJvb2xlYW4gcHJvcGVydGllc1xuICAgIFwiZW5hYmxlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgIHJldHVybiBlbGVtLmRpc2FibGVkID09PSBmYWxzZTtcbiAgICB9LFxuXG4gICAgXCJkaXNhYmxlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgIHJldHVybiBlbGVtLmRpc2FibGVkID09PSB0cnVlO1xuICAgIH0sXG5cbiAgICBcImNoZWNrZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHNcbiAgICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG4gICAgICB2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gKG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgISFlbGVtLmNoZWNrZWQpIHx8IChub2RlTmFtZSA9PT0gXCJvcHRpb25cIiAmJiAhIWVsZW0uc2VsZWN0ZWQpO1xuICAgIH0sXG5cbiAgICBcInNlbGVjdGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgLy8gQWNjZXNzaW5nIHRoaXMgcHJvcGVydHkgbWFrZXMgc2VsZWN0ZWQtYnktZGVmYXVsdFxuICAgICAgLy8gb3B0aW9ucyBpbiBTYWZhcmkgd29yayBwcm9wZXJseVxuICAgICAgaWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7XG4gICAgICAgIGVsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZWxlbS5zZWxlY3RlZCA9PT0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgLy8gQ29udGVudHNcbiAgICBcImVtcHR5XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNlbXB0eS1wc2V1ZG9cbiAgICAgIC8vIDplbXB0eSBpcyBuZWdhdGVkIGJ5IGVsZW1lbnQgKDEpIG9yIGNvbnRlbnQgbm9kZXMgKHRleHQ6IDM7IGNkYXRhOiA0OyBlbnRpdHkgcmVmOiA1KSxcbiAgICAgIC8vICAgYnV0IG5vdCBieSBvdGhlcnMgKGNvbW1lbnQ6IDg7IHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb246IDc7IGV0Yy4pXG4gICAgICAvLyBub2RlVHlwZSA8IDYgd29ya3MgYmVjYXVzZSBhdHRyaWJ1dGVzICgyKSBkbyBub3QgYXBwZWFyIGFzIGNoaWxkcmVuXG4gICAgICBmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcbiAgICAgICAgaWYgKCBlbGVtLm5vZGVUeXBlIDwgNiApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICBcInBhcmVudFwiOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgIHJldHVybiAhRXhwci5wc2V1ZG9zW1wiZW1wdHlcIl0oIGVsZW0gKTtcbiAgICB9LFxuXG4gICAgLy8gRWxlbWVudC9pbnB1dCB0eXBlc1xuICAgIFwiaGVhZGVyXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgcmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuICAgIH0sXG5cbiAgICBcImlucHV0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgcmV0dXJuIHJpbnB1dHMudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuICAgIH0sXG5cbiAgICBcImJ1dHRvblwiOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgIHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IFwiYnV0dG9uXCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIjtcbiAgICB9LFxuXG4gICAgXCJ0ZXh0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgdmFyIGF0dHI7XG4gICAgICByZXR1cm4gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgJiZcbiAgICAgICAgZWxlbS50eXBlID09PSBcInRleHRcIiAmJlxuXG4gICAgICAgIC8vIFN1cHBvcnQ6IElFPDhcbiAgICAgICAgLy8gTmV3IEhUTUw1IGF0dHJpYnV0ZSB2YWx1ZXMgKGUuZy4sIFwic2VhcmNoXCIpIGFwcGVhciB3aXRoIGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCJcbiAgICAgICAgKCAoYXR0ciA9IGVsZW0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkgPT0gbnVsbCB8fCBhdHRyLnRvTG93ZXJDYXNlKCkgPT09IFwidGV4dFwiICk7XG4gICAgfSxcblxuICAgIC8vIFBvc2l0aW9uLWluLWNvbGxlY3Rpb25cbiAgICBcImZpcnN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gWyAwIF07XG4gICAgfSksXG5cbiAgICBcImxhc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG4gICAgICByZXR1cm4gWyBsZW5ndGggLSAxIF07XG4gICAgfSksXG5cbiAgICBcImVxXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcbiAgICAgIHJldHVybiBbIGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQgXTtcbiAgICB9KSxcblxuICAgIFwiZXZlblwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcbiAgICAgIHZhciBpID0gMDtcbiAgICAgIGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuICAgICAgICBtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoSW5kZXhlcztcbiAgICB9KSxcblxuICAgIFwib2RkXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuICAgICAgdmFyIGkgPSAxO1xuICAgICAgZm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG4gICAgICAgIG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2hJbmRleGVzO1xuICAgIH0pLFxuXG4gICAgXCJsdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG4gICAgICB2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG4gICAgICBmb3IgKCA7IC0taSA+PSAwOyApIHtcbiAgICAgICAgbWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXRjaEluZGV4ZXM7XG4gICAgfSksXG5cbiAgICBcImd0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcbiAgICAgIHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcbiAgICAgIGZvciAoIDsgKytpIDwgbGVuZ3RoOyApIHtcbiAgICAgICAgbWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXRjaEluZGV4ZXM7XG4gICAgfSlcbiAgfVxufTtcblxuRXhwci5wc2V1ZG9zW1wibnRoXCJdID0gRXhwci5wc2V1ZG9zW1wiZXFcIl07XG5cbi8vIEFkZCBidXR0b24vaW5wdXQgdHlwZSBwc2V1ZG9zXG5mb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHtcbiAgRXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVJbnB1dFBzZXVkbyggaSApO1xufVxuZm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHtcbiAgRXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVCdXR0b25Qc2V1ZG8oIGkgKTtcbn1cblxuLy8gRWFzeSBBUEkgZm9yIGNyZWF0aW5nIG5ldyBzZXRGaWx0ZXJzXG5mdW5jdGlvbiBzZXRGaWx0ZXJzKCkge31cbnNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zO1xuRXhwci5zZXRGaWx0ZXJzID0gbmV3IHNldEZpbHRlcnMoKTtcblxudG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHtcbiAgdmFyIG1hdGNoZWQsIG1hdGNoLCB0b2tlbnMsIHR5cGUsXG4gICAgc29GYXIsIGdyb3VwcywgcHJlRmlsdGVycyxcbiAgICBjYWNoZWQgPSB0b2tlbkNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cbiAgaWYgKCBjYWNoZWQgKSB7XG4gICAgcmV0dXJuIHBhcnNlT25seSA/IDAgOiBjYWNoZWQuc2xpY2UoIDAgKTtcbiAgfVxuXG4gIHNvRmFyID0gc2VsZWN0b3I7XG4gIGdyb3VwcyA9IFtdO1xuICBwcmVGaWx0ZXJzID0gRXhwci5wcmVGaWx0ZXI7XG5cbiAgd2hpbGUgKCBzb0ZhciApIHtcblxuICAgIC8vIENvbW1hIGFuZCBmaXJzdCBydW5cbiAgICBpZiAoICFtYXRjaGVkIHx8IChtYXRjaCA9IHJjb21tYS5leGVjKCBzb0ZhciApKSApIHtcbiAgICAgIGlmICggbWF0Y2ggKSB7XG4gICAgICAgIC8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkXG4gICAgICAgIHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoWzBdLmxlbmd0aCApIHx8IHNvRmFyO1xuICAgICAgfVxuICAgICAgZ3JvdXBzLnB1c2goICh0b2tlbnMgPSBbXSkgKTtcbiAgICB9XG5cbiAgICBtYXRjaGVkID0gZmFsc2U7XG5cbiAgICAvLyBDb21iaW5hdG9yc1xuICAgIGlmICggKG1hdGNoID0gcmNvbWJpbmF0b3JzLmV4ZWMoIHNvRmFyICkpICkge1xuICAgICAgbWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHZhbHVlOiBtYXRjaGVkLFxuICAgICAgICAvLyBDYXN0IGRlc2NlbmRhbnQgY29tYmluYXRvcnMgdG8gc3BhY2VcbiAgICAgICAgdHlwZTogbWF0Y2hbMF0ucmVwbGFjZSggcnRyaW0sIFwiIFwiIClcbiAgICAgIH0pO1xuICAgICAgc29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcbiAgICB9XG5cbiAgICAvLyBGaWx0ZXJzXG4gICAgZm9yICggdHlwZSBpbiBFeHByLmZpbHRlciApIHtcbiAgICAgIGlmICggKG1hdGNoID0gbWF0Y2hFeHByWyB0eXBlIF0uZXhlYyggc29GYXIgKSkgJiYgKCFwcmVGaWx0ZXJzWyB0eXBlIF0gfHxcbiAgICAgICAgKG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApKSkgKSB7XG4gICAgICAgIG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdmFsdWU6IG1hdGNoZWQsXG4gICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICBtYXRjaGVzOiBtYXRjaFxuICAgICAgICB9KTtcbiAgICAgICAgc29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoICFtYXRjaGVkICkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGludmFsaWQgZXhjZXNzXG4gIC8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZ1xuICAvLyBPdGhlcndpc2UsIHRocm93IGFuIGVycm9yIG9yIHJldHVybiB0b2tlbnNcbiAgcmV0dXJuIHBhcnNlT25seSA/XG4gICAgc29GYXIubGVuZ3RoIDpcbiAgICBzb0ZhciA/XG4gICAgICBTaXp6bGUuZXJyb3IoIHNlbGVjdG9yICkgOlxuICAgICAgLy8gQ2FjaGUgdGhlIHRva2Vuc1xuICAgICAgdG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7XG59O1xuXG5mdW5jdGlvbiB0b1NlbGVjdG9yKCB0b2tlbnMgKSB7XG4gIHZhciBpID0gMCxcbiAgICBsZW4gPSB0b2tlbnMubGVuZ3RoLFxuICAgIHNlbGVjdG9yID0gXCJcIjtcbiAgZm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgc2VsZWN0b3IgKz0gdG9rZW5zW2ldLnZhbHVlO1xuICB9XG4gIHJldHVybiBzZWxlY3Rvcjtcbn1cblxuZnVuY3Rpb24gYWRkQ29tYmluYXRvciggbWF0Y2hlciwgY29tYmluYXRvciwgYmFzZSApIHtcbiAgdmFyIGRpciA9IGNvbWJpbmF0b3IuZGlyLFxuICAgIGNoZWNrTm9uRWxlbWVudHMgPSBiYXNlICYmIGRpciA9PT0gXCJwYXJlbnROb2RlXCIsXG4gICAgZG9uZU5hbWUgPSBkb25lKys7XG5cbiAgcmV0dXJuIGNvbWJpbmF0b3IuZmlyc3QgP1xuICAgIC8vIENoZWNrIGFnYWluc3QgY2xvc2VzdCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudFxuICAgIGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG4gICAgICB3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuICAgICAgICBpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHtcbiAgICAgICAgICByZXR1cm4gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IDpcblxuICAgIC8vIENoZWNrIGFnYWluc3QgYWxsIGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50c1xuICAgIGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG4gICAgICB2YXIgb2xkQ2FjaGUsIG91dGVyQ2FjaGUsXG4gICAgICAgIG5ld0NhY2hlID0gWyBkaXJydW5zLCBkb25lTmFtZSBdO1xuXG4gICAgICAvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBkaXIgY2FjaGluZ1xuICAgICAgaWYgKCB4bWwgKSB7XG4gICAgICAgIHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG4gICAgICAgICAgaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG4gICAgICAgICAgICBpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG4gICAgICAgICAgaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG4gICAgICAgICAgICBvdXRlckNhY2hlID0gZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSk7XG4gICAgICAgICAgICBpZiAoIChvbGRDYWNoZSA9IG91dGVyQ2FjaGVbIGRpciBdKSAmJlxuICAgICAgICAgICAgICBvbGRDYWNoZVsgMCBdID09PSBkaXJydW5zICYmIG9sZENhY2hlWyAxIF0gPT09IGRvbmVOYW1lICkge1xuXG4gICAgICAgICAgICAgIC8vIEFzc2lnbiB0byBuZXdDYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG4gICAgICAgICAgICAgIHJldHVybiAobmV3Q2FjaGVbIDIgXSA9IG9sZENhY2hlWyAyIF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUmV1c2UgbmV3Y2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuICAgICAgICAgICAgICBvdXRlckNhY2hlWyBkaXIgXSA9IG5ld0NhY2hlO1xuXG4gICAgICAgICAgICAgIC8vIEEgbWF0Y2ggbWVhbnMgd2UncmUgZG9uZTsgYSBmYWlsIG1lYW5zIHdlIGhhdmUgdG8ga2VlcCBjaGVja2luZ1xuICAgICAgICAgICAgICBpZiAoIChuZXdDYWNoZVsgMiBdID0gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkpICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICkge1xuICByZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/XG4gICAgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcbiAgICAgIHZhciBpID0gbWF0Y2hlcnMubGVuZ3RoO1xuICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgIGlmICggIW1hdGNoZXJzW2ldKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gOlxuICAgIG1hdGNoZXJzWzBdO1xufVxuXG5mdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciwgY29udGV4dHMsIHJlc3VsdHMgKSB7XG4gIHZhciBpID0gMCxcbiAgICBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG4gIGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuICAgIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIGNvbmRlbnNlKCB1bm1hdGNoZWQsIG1hcCwgZmlsdGVyLCBjb250ZXh0LCB4bWwgKSB7XG4gIHZhciBlbGVtLFxuICAgIG5ld1VubWF0Y2hlZCA9IFtdLFxuICAgIGkgPSAwLFxuICAgIGxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsXG4gICAgbWFwcGVkID0gbWFwICE9IG51bGw7XG5cbiAgZm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgaWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG4gICAgICBpZiAoICFmaWx0ZXIgfHwgZmlsdGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcbiAgICAgICAgbmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcbiAgICAgICAgaWYgKCBtYXBwZWQgKSB7XG4gICAgICAgICAgbWFwLnB1c2goIGkgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdVbm1hdGNoZWQ7XG59XG5cbmZ1bmN0aW9uIHNldE1hdGNoZXIoIHByZUZpbHRlciwgc2VsZWN0b3IsIG1hdGNoZXIsIHBvc3RGaWx0ZXIsIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApIHtcbiAgaWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7XG4gICAgcG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTtcbiAgfVxuICBpZiAoIHBvc3RGaW5kZXIgJiYgIXBvc3RGaW5kZXJbIGV4cGFuZG8gXSApIHtcbiAgICBwb3N0RmluZGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICk7XG4gIH1cbiAgcmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgcmVzdWx0cywgY29udGV4dCwgeG1sICkge1xuICAgIHZhciB0ZW1wLCBpLCBlbGVtLFxuICAgICAgcHJlTWFwID0gW10sXG4gICAgICBwb3N0TWFwID0gW10sXG4gICAgICBwcmVleGlzdGluZyA9IHJlc3VsdHMubGVuZ3RoLFxuXG4gICAgICAvLyBHZXQgaW5pdGlhbCBlbGVtZW50cyBmcm9tIHNlZWQgb3IgY29udGV4dFxuICAgICAgZWxlbXMgPSBzZWVkIHx8IG11bHRpcGxlQ29udGV4dHMoIHNlbGVjdG9yIHx8IFwiKlwiLCBjb250ZXh0Lm5vZGVUeXBlID8gWyBjb250ZXh0IF0gOiBjb250ZXh0LCBbXSApLFxuXG4gICAgICAvLyBQcmVmaWx0ZXIgdG8gZ2V0IG1hdGNoZXIgaW5wdXQsIHByZXNlcnZpbmcgYSBtYXAgZm9yIHNlZWQtcmVzdWx0cyBzeW5jaHJvbml6YXRpb25cbiAgICAgIG1hdGNoZXJJbiA9IHByZUZpbHRlciAmJiAoIHNlZWQgfHwgIXNlbGVjdG9yICkgP1xuICAgICAgICBjb25kZW5zZSggZWxlbXMsIHByZU1hcCwgcHJlRmlsdGVyLCBjb250ZXh0LCB4bWwgKSA6XG4gICAgICAgIGVsZW1zLFxuXG4gICAgICBtYXRjaGVyT3V0ID0gbWF0Y2hlciA/XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBwb3N0RmluZGVyLCBvciBmaWx0ZXJlZCBzZWVkLCBvciBub24tc2VlZCBwb3N0RmlsdGVyIG9yIHByZWV4aXN0aW5nIHJlc3VsdHMsXG4gICAgICAgIHBvc3RGaW5kZXIgfHwgKCBzZWVkID8gcHJlRmlsdGVyIDogcHJlZXhpc3RpbmcgfHwgcG9zdEZpbHRlciApID9cblxuICAgICAgICAgIC8vIC4uLmludGVybWVkaWF0ZSBwcm9jZXNzaW5nIGlzIG5lY2Vzc2FyeVxuICAgICAgICAgIFtdIDpcblxuICAgICAgICAgIC8vIC4uLm90aGVyd2lzZSB1c2UgcmVzdWx0cyBkaXJlY3RseVxuICAgICAgICAgIHJlc3VsdHMgOlxuICAgICAgICBtYXRjaGVySW47XG5cbiAgICAvLyBGaW5kIHByaW1hcnkgbWF0Y2hlc1xuICAgIGlmICggbWF0Y2hlciApIHtcbiAgICAgIG1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgcG9zdEZpbHRlclxuICAgIGlmICggcG9zdEZpbHRlciApIHtcbiAgICAgIHRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApO1xuICAgICAgcG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApO1xuXG4gICAgICAvLyBVbi1tYXRjaCBmYWlsaW5nIGVsZW1lbnRzIGJ5IG1vdmluZyB0aGVtIGJhY2sgdG8gbWF0Y2hlckluXG4gICAgICBpID0gdGVtcC5sZW5ndGg7XG4gICAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgICAgaWYgKCAoZWxlbSA9IHRlbXBbaV0pICkge1xuICAgICAgICAgIG1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICggc2VlZCApIHtcbiAgICAgIGlmICggcG9zdEZpbmRlciB8fCBwcmVGaWx0ZXIgKSB7XG4gICAgICAgIGlmICggcG9zdEZpbmRlciApIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIGZpbmFsIG1hdGNoZXJPdXQgYnkgY29uZGVuc2luZyB0aGlzIGludGVybWVkaWF0ZSBpbnRvIHBvc3RGaW5kZXIgY29udGV4dHNcbiAgICAgICAgICB0ZW1wID0gW107XG4gICAgICAgICAgaSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuICAgICAgICAgIHdoaWxlICggaS0tICkge1xuICAgICAgICAgICAgaWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICkge1xuICAgICAgICAgICAgICAvLyBSZXN0b3JlIG1hdGNoZXJJbiBzaW5jZSBlbGVtIGlzIG5vdCB5ZXQgYSBmaW5hbCBtYXRjaFxuICAgICAgICAgICAgICB0ZW1wLnB1c2goIChtYXRjaGVySW5baV0gPSBlbGVtKSApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBwb3N0RmluZGVyKCBudWxsLCAobWF0Y2hlck91dCA9IFtdKSwgdGVtcCwgeG1sICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZFxuICAgICAgICBpID0gbWF0Y2hlck91dC5sZW5ndGg7XG4gICAgICAgIHdoaWxlICggaS0tICkge1xuICAgICAgICAgIGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJlxuICAgICAgICAgICAgKHRlbXAgPSBwb3N0RmluZGVyID8gaW5kZXhPZi5jYWxsKCBzZWVkLCBlbGVtICkgOiBwcmVNYXBbaV0pID4gLTEgKSB7XG5cbiAgICAgICAgICAgIHNlZWRbdGVtcF0gPSAhKHJlc3VsdHNbdGVtcF0gPSBlbGVtKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIC8vIEFkZCBlbGVtZW50cyB0byByZXN1bHRzLCB0aHJvdWdoIHBvc3RGaW5kZXIgaWYgZGVmaW5lZFxuICAgIH0gZWxzZSB7XG4gICAgICBtYXRjaGVyT3V0ID0gY29uZGVuc2UoXG4gICAgICAgIG1hdGNoZXJPdXQgPT09IHJlc3VsdHMgP1xuICAgICAgICAgIG1hdGNoZXJPdXQuc3BsaWNlKCBwcmVleGlzdGluZywgbWF0Y2hlck91dC5sZW5ndGggKSA6XG4gICAgICAgICAgbWF0Y2hlck91dFxuICAgICAgKTtcbiAgICAgIGlmICggcG9zdEZpbmRlciApIHtcbiAgICAgICAgcG9zdEZpbmRlciggbnVsbCwgcmVzdWx0cywgbWF0Y2hlck91dCwgeG1sICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdXNoLmFwcGx5KCByZXN1bHRzLCBtYXRjaGVyT3V0ICk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Ub2tlbnMoIHRva2VucyApIHtcbiAgdmFyIGNoZWNrQ29udGV4dCwgbWF0Y2hlciwgaixcbiAgICBsZW4gPSB0b2tlbnMubGVuZ3RoLFxuICAgIGxlYWRpbmdSZWxhdGl2ZSA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1swXS50eXBlIF0sXG4gICAgaW1wbGljaXRSZWxhdGl2ZSA9IGxlYWRpbmdSZWxhdGl2ZSB8fCBFeHByLnJlbGF0aXZlW1wiIFwiXSxcbiAgICBpID0gbGVhZGluZ1JlbGF0aXZlID8gMSA6IDAsXG5cbiAgICAvLyBUaGUgZm91bmRhdGlvbmFsIG1hdGNoZXIgZW5zdXJlcyB0aGF0IGVsZW1lbnRzIGFyZSByZWFjaGFibGUgZnJvbSB0b3AtbGV2ZWwgY29udGV4dChzKVxuICAgIG1hdGNoQ29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgcmV0dXJuIGVsZW0gPT09IGNoZWNrQ29udGV4dDtcbiAgICB9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksXG4gICAgbWF0Y2hBbnlDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICByZXR1cm4gaW5kZXhPZi5jYWxsKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuICAgIH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcbiAgICBtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcbiAgICAgIHJldHVybiAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuICAgICAgICAoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuICAgICAgICAgIG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuICAgICAgICAgIG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcbiAgICB9IF07XG5cbiAgZm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgaWYgKCAobWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1tpXS50eXBlIF0pICkge1xuICAgICAgbWF0Y2hlcnMgPSBbIGFkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksIG1hdGNoZXIpIF07XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hdGNoZXIgPSBFeHByLmZpbHRlclsgdG9rZW5zW2ldLnR5cGUgXS5hcHBseSggbnVsbCwgdG9rZW5zW2ldLm1hdGNoZXMgKTtcblxuICAgICAgLy8gUmV0dXJuIHNwZWNpYWwgdXBvbiBzZWVpbmcgYSBwb3NpdGlvbmFsIG1hdGNoZXJcbiAgICAgIGlmICggbWF0Y2hlclsgZXhwYW5kbyBdICkge1xuICAgICAgICAvLyBGaW5kIHRoZSBuZXh0IHJlbGF0aXZlIG9wZXJhdG9yIChpZiBhbnkpIGZvciBwcm9wZXIgaGFuZGxpbmdcbiAgICAgICAgaiA9ICsraTtcbiAgICAgICAgZm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG4gICAgICAgICAgaWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbal0udHlwZSBdICkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXRNYXRjaGVyKFxuICAgICAgICAgIGkgPiAxICYmIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLFxuICAgICAgICAgIGkgPiAxICYmIHRvU2VsZWN0b3IoXG4gICAgICAgICAgICAvLyBJZiB0aGUgcHJlY2VkaW5nIHRva2VuIHdhcyBhIGRlc2NlbmRhbnQgY29tYmluYXRvciwgaW5zZXJ0IGFuIGltcGxpY2l0IGFueS1lbGVtZW50IGAqYFxuICAgICAgICAgICAgdG9rZW5zLnNsaWNlKCAwLCBpIC0gMSApLmNvbmNhdCh7IHZhbHVlOiB0b2tlbnNbIGkgLSAyIF0udHlwZSA9PT0gXCIgXCIgPyBcIipcIiA6IFwiXCIgfSlcbiAgICAgICAgICApLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSxcbiAgICAgICAgICBtYXRjaGVyLFxuICAgICAgICAgIGkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLFxuICAgICAgICAgIGogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICh0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSkgKSxcbiAgICAgICAgICBqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBtYXRjaGVycy5wdXNoKCBtYXRjaGVyICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7XG4gIHZhciBieVNldCA9IHNldE1hdGNoZXJzLmxlbmd0aCA+IDAsXG4gICAgYnlFbGVtZW50ID0gZWxlbWVudE1hdGNoZXJzLmxlbmd0aCA+IDAsXG4gICAgc3VwZXJNYXRjaGVyID0gZnVuY3Rpb24oIHNlZWQsIGNvbnRleHQsIHhtbCwgcmVzdWx0cywgb3V0ZXJtb3N0ICkge1xuICAgICAgdmFyIGVsZW0sIGosIG1hdGNoZXIsXG4gICAgICAgIG1hdGNoZWRDb3VudCA9IDAsXG4gICAgICAgIGkgPSBcIjBcIixcbiAgICAgICAgdW5tYXRjaGVkID0gc2VlZCAmJiBbXSxcbiAgICAgICAgc2V0TWF0Y2hlZCA9IFtdLFxuICAgICAgICBjb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCxcbiAgICAgICAgLy8gV2UgbXVzdCBhbHdheXMgaGF2ZSBlaXRoZXIgc2VlZCBlbGVtZW50cyBvciBvdXRlcm1vc3QgY29udGV4dFxuICAgICAgICBlbGVtcyA9IHNlZWQgfHwgYnlFbGVtZW50ICYmIEV4cHIuZmluZFtcIlRBR1wiXSggXCIqXCIsIG91dGVybW9zdCApLFxuICAgICAgICAvLyBVc2UgaW50ZWdlciBkaXJydW5zIGlmZiB0aGlzIGlzIHRoZSBvdXRlcm1vc3QgbWF0Y2hlclxuICAgICAgICBkaXJydW5zVW5pcXVlID0gKGRpcnJ1bnMgKz0gY29udGV4dEJhY2t1cCA9PSBudWxsID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgMC4xKSxcbiAgICAgICAgbGVuID0gZWxlbXMubGVuZ3RoO1xuXG4gICAgICBpZiAoIG91dGVybW9zdCApIHtcbiAgICAgICAgb3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHQgIT09IGRvY3VtZW50ICYmIGNvbnRleHQ7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBlbGVtZW50cyBwYXNzaW5nIGVsZW1lbnRNYXRjaGVycyBkaXJlY3RseSB0byByZXN1bHRzXG4gICAgICAvLyBLZWVwIGBpYCBhIHN0cmluZyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMgc28gYG1hdGNoZWRDb3VudGAgd2lsbCBiZSBcIjAwXCIgYmVsb3dcbiAgICAgIC8vIFN1cHBvcnQ6IElFPDksIFNhZmFyaVxuICAgICAgLy8gVG9sZXJhdGUgTm9kZUxpc3QgcHJvcGVydGllcyAoSUU6IFwibGVuZ3RoXCI7IFNhZmFyaTogPG51bWJlcj4pIG1hdGNoaW5nIGVsZW1lbnRzIGJ5IGlkXG4gICAgICBmb3IgKCA7IGkgIT09IGxlbiAmJiAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG4gICAgICAgIGlmICggYnlFbGVtZW50ICYmIGVsZW0gKSB7XG4gICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgd2hpbGUgKCAobWF0Y2hlciA9IGVsZW1lbnRNYXRjaGVyc1tqKytdKSApIHtcbiAgICAgICAgICAgIGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG4gICAgICAgICAgICAgIHJlc3VsdHMucHVzaCggZWxlbSApO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCBvdXRlcm1vc3QgKSB7XG4gICAgICAgICAgICBkaXJydW5zID0gZGlycnVuc1VuaXF1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcmFjayB1bm1hdGNoZWQgZWxlbWVudHMgZm9yIHNldCBmaWx0ZXJzXG4gICAgICAgIGlmICggYnlTZXQgKSB7XG4gICAgICAgICAgLy8gVGhleSB3aWxsIGhhdmUgZ29uZSB0aHJvdWdoIGFsbCBwb3NzaWJsZSBtYXRjaGVyc1xuICAgICAgICAgIGlmICggKGVsZW0gPSAhbWF0Y2hlciAmJiBlbGVtKSApIHtcbiAgICAgICAgICAgIG1hdGNoZWRDb3VudC0tO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIExlbmd0aGVuIHRoZSBhcnJheSBmb3IgZXZlcnkgZWxlbWVudCwgbWF0Y2hlZCBvciBub3RcbiAgICAgICAgICBpZiAoIHNlZWQgKSB7XG4gICAgICAgICAgICB1bm1hdGNoZWQucHVzaCggZWxlbSApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBcHBseSBzZXQgZmlsdGVycyB0byB1bm1hdGNoZWQgZWxlbWVudHNcbiAgICAgIG1hdGNoZWRDb3VudCArPSBpO1xuICAgICAgaWYgKCBieVNldCAmJiBpICE9PSBtYXRjaGVkQ291bnQgKSB7XG4gICAgICAgIGogPSAwO1xuICAgICAgICB3aGlsZSAoIChtYXRjaGVyID0gc2V0TWF0Y2hlcnNbaisrXSkgKSB7XG4gICAgICAgICAgbWF0Y2hlciggdW5tYXRjaGVkLCBzZXRNYXRjaGVkLCBjb250ZXh0LCB4bWwgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggc2VlZCApIHtcbiAgICAgICAgICAvLyBSZWludGVncmF0ZSBlbGVtZW50IG1hdGNoZXMgdG8gZWxpbWluYXRlIHRoZSBuZWVkIGZvciBzb3J0aW5nXG4gICAgICAgICAgaWYgKCBtYXRjaGVkQ291bnQgPiAwICkge1xuICAgICAgICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgICAgICAgIGlmICggISh1bm1hdGNoZWRbaV0gfHwgc2V0TWF0Y2hlZFtpXSkgKSB7XG4gICAgICAgICAgICAgICAgc2V0TWF0Y2hlZFtpXSA9IHBvcC5jYWxsKCByZXN1bHRzICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBEaXNjYXJkIGluZGV4IHBsYWNlaG9sZGVyIHZhbHVlcyB0byBnZXQgb25seSBhY3R1YWwgbWF0Y2hlc1xuICAgICAgICAgIHNldE1hdGNoZWQgPSBjb25kZW5zZSggc2V0TWF0Y2hlZCApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIG1hdGNoZXMgdG8gcmVzdWx0c1xuICAgICAgICBwdXNoLmFwcGx5KCByZXN1bHRzLCBzZXRNYXRjaGVkICk7XG5cbiAgICAgICAgLy8gU2VlZGxlc3Mgc2V0IG1hdGNoZXMgc3VjY2VlZGluZyBtdWx0aXBsZSBzdWNjZXNzZnVsIG1hdGNoZXJzIHN0aXB1bGF0ZSBzb3J0aW5nXG4gICAgICAgIGlmICggb3V0ZXJtb3N0ICYmICFzZWVkICYmIHNldE1hdGNoZWQubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICggbWF0Y2hlZENvdW50ICsgc2V0TWF0Y2hlcnMubGVuZ3RoICkgPiAxICkge1xuXG4gICAgICAgICAgU2l6emxlLnVuaXF1ZVNvcnQoIHJlc3VsdHMgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBPdmVycmlkZSBtYW5pcHVsYXRpb24gb2YgZ2xvYmFscyBieSBuZXN0ZWQgbWF0Y2hlcnNcbiAgICAgIGlmICggb3V0ZXJtb3N0ICkge1xuICAgICAgICBkaXJydW5zID0gZGlycnVuc1VuaXF1ZTtcbiAgICAgICAgb3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHRCYWNrdXA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bm1hdGNoZWQ7XG4gICAgfTtcblxuICByZXR1cm4gYnlTZXQgP1xuICAgIG1hcmtGdW5jdGlvbiggc3VwZXJNYXRjaGVyICkgOlxuICAgIHN1cGVyTWF0Y2hlcjtcbn1cblxuY29tcGlsZSA9IFNpenpsZS5jb21waWxlID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBtYXRjaCAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcbiAgdmFyIGksXG4gICAgc2V0TWF0Y2hlcnMgPSBbXSxcbiAgICBlbGVtZW50TWF0Y2hlcnMgPSBbXSxcbiAgICBjYWNoZWQgPSBjb21waWxlckNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cbiAgaWYgKCAhY2FjaGVkICkge1xuICAgIC8vIEdlbmVyYXRlIGEgZnVuY3Rpb24gb2YgcmVjdXJzaXZlIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIHRvIGNoZWNrIGVhY2ggZWxlbWVudFxuICAgIGlmICggIW1hdGNoICkge1xuICAgICAgbWF0Y2ggPSB0b2tlbml6ZSggc2VsZWN0b3IgKTtcbiAgICB9XG4gICAgaSA9IG1hdGNoLmxlbmd0aDtcbiAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgIGNhY2hlZCA9IG1hdGNoZXJGcm9tVG9rZW5zKCBtYXRjaFtpXSApO1xuICAgICAgaWYgKCBjYWNoZWRbIGV4cGFuZG8gXSApIHtcbiAgICAgICAgc2V0TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FjaGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uXG4gICAgY2FjaGVkID0gY29tcGlsZXJDYWNoZSggc2VsZWN0b3IsIG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApICk7XG5cbiAgICAvLyBTYXZlIHNlbGVjdG9yIGFuZCB0b2tlbml6YXRpb25cbiAgICBjYWNoZWQuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgfVxuICByZXR1cm4gY2FjaGVkO1xufTtcblxuLyoqXG4gKiBBIGxvdy1sZXZlbCBzZWxlY3Rpb24gZnVuY3Rpb24gdGhhdCB3b3JrcyB3aXRoIFNpenpsZSdzIGNvbXBpbGVkXG4gKiAgc2VsZWN0b3IgZnVuY3Rpb25zXG4gKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gc2VsZWN0b3IgQSBzZWxlY3RvciBvciBhIHByZS1jb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uIGJ1aWx0IHdpdGggU2l6emxlLmNvbXBpbGVcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGV4dFxuICogQHBhcmFtIHtBcnJheX0gW3Jlc3VsdHNdXG4gKiBAcGFyYW0ge0FycmF5fSBbc2VlZF0gQSBzZXQgb2YgZWxlbWVudHMgdG8gbWF0Y2ggYWdhaW5zdFxuICovXG5zZWxlY3QgPSBTaXp6bGUuc2VsZWN0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkge1xuICB2YXIgaSwgdG9rZW5zLCB0b2tlbiwgdHlwZSwgZmluZCxcbiAgICBjb21waWxlZCA9IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICYmIHNlbGVjdG9yLFxuICAgIG1hdGNoID0gIXNlZWQgJiYgdG9rZW5pemUoIChzZWxlY3RvciA9IGNvbXBpbGVkLnNlbGVjdG9yIHx8IHNlbGVjdG9yKSApO1xuXG4gIHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXG4gIC8vIFRyeSB0byBtaW5pbWl6ZSBvcGVyYXRpb25zIGlmIHRoZXJlIGlzIG5vIHNlZWQgYW5kIG9ubHkgb25lIGdyb3VwXG4gIGlmICggbWF0Y2gubGVuZ3RoID09PSAxICkge1xuXG4gICAgLy8gVGFrZSBhIHNob3J0Y3V0IGFuZCBzZXQgdGhlIGNvbnRleHQgaWYgdGhlIHJvb3Qgc2VsZWN0b3IgaXMgYW4gSURcbiAgICB0b2tlbnMgPSBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwICk7XG4gICAgaWYgKCB0b2tlbnMubGVuZ3RoID4gMiAmJiAodG9rZW4gPSB0b2tlbnNbMF0pLnR5cGUgPT09IFwiSURcIiAmJlxuICAgICAgICBzdXBwb3J0LmdldEJ5SWQgJiYgY29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJlxuICAgICAgICBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkge1xuXG4gICAgICBjb250ZXh0ID0gKCBFeHByLmZpbmRbXCJJRFwiXSggdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSwgZnVuZXNjYXBlKSwgY29udGV4dCApIHx8IFtdIClbMF07XG4gICAgICBpZiAoICFjb250ZXh0ICkge1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcblxuICAgICAgLy8gUHJlY29tcGlsZWQgbWF0Y2hlcnMgd2lsbCBzdGlsbCB2ZXJpZnkgYW5jZXN0cnksIHNvIHN0ZXAgdXAgYSBsZXZlbFxuICAgICAgfSBlbHNlIGlmICggY29tcGlsZWQgKSB7XG4gICAgICAgIGNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7XG4gICAgICB9XG5cbiAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApO1xuICAgIH1cblxuICAgIC8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmdcbiAgICBpID0gbWF0Y2hFeHByW1wibmVlZHNDb250ZXh0XCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDtcbiAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuXG4gICAgICAvLyBBYm9ydCBpZiB3ZSBoaXQgYSBjb21iaW5hdG9yXG4gICAgICBpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoIChmaW5kID0gRXhwci5maW5kWyB0eXBlIF0pICkge1xuICAgICAgICAvLyBTZWFyY2gsIGV4cGFuZGluZyBjb250ZXh0IGZvciBsZWFkaW5nIHNpYmxpbmcgY29tYmluYXRvcnNcbiAgICAgICAgaWYgKCAoc2VlZCA9IGZpbmQoXG4gICAgICAgICAgdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLFxuICAgICAgICAgIHJzaWJsaW5nLnRlc3QoIHRva2Vuc1swXS50eXBlICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcbiAgICAgICAgKSkgKSB7XG5cbiAgICAgICAgICAvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHlcbiAgICAgICAgICB0b2tlbnMuc3BsaWNlKCBpLCAxICk7XG4gICAgICAgICAgc2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTtcbiAgICAgICAgICBpZiAoICFzZWxlY3RvciApIHtcbiAgICAgICAgICAgIHB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ29tcGlsZSBhbmQgZXhlY3V0ZSBhIGZpbHRlcmluZyBmdW5jdGlvbiBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG4gIC8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmVcbiAgKCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKFxuICAgIHNlZWQsXG4gICAgY29udGV4dCxcbiAgICAhZG9jdW1lbnRJc0hUTUwsXG4gICAgcmVzdWx0cyxcbiAgICByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG4gICk7XG4gIHJldHVybiByZXN1bHRzO1xufTtcblxuLy8gT25lLXRpbWUgYXNzaWdubWVudHNcblxuLy8gU29ydCBzdGFiaWxpdHlcbnN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoXCJcIikuc29ydCggc29ydE9yZGVyICkuam9pbihcIlwiKSA9PT0gZXhwYW5kbztcblxuLy8gU3VwcG9ydDogQ2hyb21lPDE0XG4vLyBBbHdheXMgYXNzdW1lIGR1cGxpY2F0ZXMgaWYgdGhleSBhcmVuJ3QgcGFzc2VkIHRvIHRoZSBjb21wYXJpc29uIGZ1bmN0aW9uXG5zdXBwb3J0LmRldGVjdER1cGxpY2F0ZXMgPSAhIWhhc0R1cGxpY2F0ZTtcblxuLy8gSW5pdGlhbGl6ZSBhZ2FpbnN0IHRoZSBkZWZhdWx0IGRvY3VtZW50XG5zZXREb2N1bWVudCgpO1xuXG4vLyBTdXBwb3J0OiBXZWJraXQ8NTM3LjMyIC0gU2FmYXJpIDYuMC4zL0Nocm9tZSAyNSAoZml4ZWQgaW4gQ2hyb21lIDI3KVxuLy8gRGV0YWNoZWQgbm9kZXMgY29uZm91bmRpbmdseSBmb2xsb3cgKmVhY2ggb3RoZXIqXG5zdXBwb3J0LnNvcnREZXRhY2hlZCA9IGFzc2VydChmdW5jdGlvbiggZGl2MSApIHtcbiAgLy8gU2hvdWxkIHJldHVybiAxLCBidXQgcmV0dXJucyA0IChmb2xsb3dpbmcpXG4gIHJldHVybiBkaXYxLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpICkgJiAxO1xufSk7XG5cbi8vIFN1cHBvcnQ6IElFPDhcbi8vIFByZXZlbnQgYXR0cmlidXRlL3Byb3BlcnR5IFwiaW50ZXJwb2xhdGlvblwiXG4vLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4XG5pZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcbiAgZGl2LmlubmVySFRNTCA9IFwiPGEgaHJlZj0nIyc+PC9hPlwiO1xuICByZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIgO1xufSkgKSB7XG4gIGFkZEhhbmRsZSggXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcbiAgICBpZiAoICFpc1hNTCApIHtcbiAgICAgIHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInR5cGVcIiA/IDEgOiAyICk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGRlZmF1bHRWYWx1ZSBpbiBwbGFjZSBvZiBnZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKVxuaWYgKCAhc3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcbiAgZGl2LmlubmVySFRNTCA9IFwiPGlucHV0Lz5cIjtcbiAgZGl2LmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCBcInZhbHVlXCIsIFwiXCIgKTtcbiAgcmV0dXJuIGRpdi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiICkgPT09IFwiXCI7XG59KSApIHtcbiAgYWRkSGFuZGxlKCBcInZhbHVlXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcbiAgICBpZiAoICFpc1hNTCAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIiApIHtcbiAgICAgIHJldHVybiBlbGVtLmRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZ2V0QXR0cmlidXRlTm9kZSB0byBmZXRjaCBib29sZWFucyB3aGVuIGdldEF0dHJpYnV0ZSBsaWVzXG5pZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcbiAgcmV0dXJuIGRpdi5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSA9PSBudWxsO1xufSkgKSB7XG4gIGFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcbiAgICB2YXIgdmFsO1xuICAgIGlmICggIWlzWE1MICkge1xuICAgICAgcmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6XG4gICAgICAgICAgKHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiB2YWwuc3BlY2lmaWVkID9cbiAgICAgICAgICB2YWwudmFsdWUgOlxuICAgICAgICBudWxsO1xuICAgIH1cbiAgfSk7XG59XG5cbnJldHVybiBTaXp6bGU7XG5cbn0pKCB3aW5kb3cgKTtcblxuXG5cbmpRdWVyeS5maW5kID0gU2l6emxlO1xualF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzO1xualF1ZXJ5LmV4cHJbXCI6XCJdID0galF1ZXJ5LmV4cHIucHNldWRvcztcbmpRdWVyeS51bmlxdWUgPSBTaXp6bGUudW5pcXVlU29ydDtcbmpRdWVyeS50ZXh0ID0gU2l6emxlLmdldFRleHQ7XG5qUXVlcnkuaXNYTUxEb2MgPSBTaXp6bGUuaXNYTUw7XG5qUXVlcnkuY29udGFpbnMgPSBTaXp6bGUuY29udGFpbnM7XG5cblxuXG52YXIgcm5lZWRzQ29udGV4dCA9IGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtcblxudmFyIHJzaW5nbGVUYWcgPSAoL148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvKTtcblxuXG5cbnZhciByaXNTaW1wbGUgPSAvXi5bXjojXFxbXFwuLF0qJC87XG5cbi8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90XG5mdW5jdGlvbiB3aW5ub3coIGVsZW1lbnRzLCBxdWFsaWZpZXIsIG5vdCApIHtcbiAgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcXVhbGlmaWVyICkgKSB7XG4gICAgcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG4gICAgICAvKiBqc2hpbnQgLVcwMTggKi9cbiAgICAgIHJldHVybiAhIXF1YWxpZmllci5jYWxsKCBlbGVtLCBpLCBlbGVtICkgIT09IG5vdDtcbiAgICB9KTtcblxuICB9XG5cbiAgaWYgKCBxdWFsaWZpZXIubm9kZVR5cGUgKSB7XG4gICAgcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICByZXR1cm4gKCBlbGVtID09PSBxdWFsaWZpZXIgKSAhPT0gbm90O1xuICAgIH0pO1xuXG4gIH1cblxuICBpZiAoIHR5cGVvZiBxdWFsaWZpZXIgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgaWYgKCByaXNTaW1wbGUudGVzdCggcXVhbGlmaWVyICkgKSB7XG4gICAgICByZXR1cm4galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cywgbm90ICk7XG4gICAgfVxuXG4gICAgcXVhbGlmaWVyID0galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cyApO1xuICB9XG5cbiAgcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgcmV0dXJuICggalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHF1YWxpZmllciApID49IDAgKSAhPT0gbm90O1xuICB9KTtcbn1cblxualF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkge1xuICB2YXIgZWxlbSA9IGVsZW1zWyAwIF07XG5cbiAgaWYgKCBub3QgKSB7XG4gICAgZXhwciA9IFwiOm5vdChcIiArIGV4cHIgKyBcIilcIjtcbiAgfVxuXG4gIHJldHVybiBlbGVtcy5sZW5ndGggPT09IDEgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSA/XG4gICAgalF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBlbGVtLCBleHByICkgPyBbIGVsZW0gXSA6IFtdIDpcbiAgICBqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgcmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDE7XG4gICAgfSkpO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG4gIGZpbmQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcbiAgICB2YXIgaSxcbiAgICAgIHJldCA9IFtdLFxuICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICBsZW4gPSBzZWxmLmxlbmd0aDtcblxuICAgIGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgICAgIGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkgKTtcbiAgICB9XG5cbiAgICBmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgalF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApO1xuICAgIH1cblxuICAgIC8vIE5lZWRlZCBiZWNhdXNlICQoIHNlbGVjdG9yLCBjb250ZXh0ICkgYmVjb21lcyAkKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKVxuICAgIHJldCA9IHRoaXMucHVzaFN0YWNrKCBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTtcbiAgICByZXQuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArIFwiIFwiICsgc2VsZWN0b3IgOiBzZWxlY3RvcjtcbiAgICByZXR1cm4gcmV0O1xuICB9LFxuICBmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcbiAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyh0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UpICk7XG4gIH0sXG4gIG5vdDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlKSApO1xuICB9LFxuICBpczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuICAgIHJldHVybiAhIXdpbm5vdyhcbiAgICAgIHRoaXMsXG5cbiAgICAgIC8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXRcbiAgICAgIC8vIHNvICQoXCJwOmZpcnN0XCIpLmlzKFwicDpsYXN0XCIpIHdvbid0IHJldHVybiB0cnVlIGZvciBhIGRvYyB3aXRoIHR3byBcInBcIi5cbiAgICAgIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgP1xuICAgICAgICBqUXVlcnkoIHNlbGVjdG9yICkgOlxuICAgICAgICBzZWxlY3RvciB8fCBbXSxcbiAgICAgIGZhbHNlXG4gICAgKS5sZW5ndGg7XG4gIH1cbn0pO1xuXG5cbi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0XG5cblxuLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG52YXIgcm9vdGpRdWVyeSxcblxuICAvLyBVc2UgdGhlIGNvcnJlY3QgZG9jdW1lbnQgYWNjb3JkaW5nbHkgd2l0aCB3aW5kb3cgYXJndW1lbnQgKHNhbmRib3gpXG4gIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50LFxuXG4gIC8vIEEgc2ltcGxlIHdheSB0byBjaGVjayBmb3IgSFRNTCBzdHJpbmdzXG4gIC8vIFByaW9yaXRpemUgI2lkIG92ZXIgPHRhZz4gdG8gYXZvaWQgWFNTIHZpYSBsb2NhdGlvbi5oYXNoICgjOTUyMSlcbiAgLy8gU3RyaWN0IEhUTUwgcmVjb2duaXRpb24gKCMxMTI5MDogbXVzdCBzdGFydCB3aXRoIDwpXG4gIHJxdWlja0V4cHIgPSAvXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxcblxuICBpbml0ID0galF1ZXJ5LmZuLmluaXQgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG4gICAgdmFyIG1hdGNoLCBlbGVtO1xuXG4gICAgLy8gSEFORExFOiAkKFwiXCIpLCAkKG51bGwpLCAkKHVuZGVmaW5lZCksICQoZmFsc2UpXG4gICAgaWYgKCAhc2VsZWN0b3IgKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgSFRNTCBzdHJpbmdzXG4gICAgaWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgICBpZiAoIHNlbGVjdG9yLmNoYXJBdCgwKSA9PT0gXCI8XCIgJiYgc2VsZWN0b3IuY2hhckF0KCBzZWxlY3Rvci5sZW5ndGggLSAxICkgPT09IFwiPlwiICYmIHNlbGVjdG9yLmxlbmd0aCA+PSAzICkge1xuICAgICAgICAvLyBBc3N1bWUgdGhhdCBzdHJpbmdzIHRoYXQgc3RhcnQgYW5kIGVuZCB3aXRoIDw+IGFyZSBIVE1MIGFuZCBza2lwIHRoZSByZWdleCBjaGVja1xuICAgICAgICBtYXRjaCA9IFsgbnVsbCwgc2VsZWN0b3IsIG51bGwgXTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1hdGNoIGh0bWwgb3IgbWFrZSBzdXJlIG5vIGNvbnRleHQgaXMgc3BlY2lmaWVkIGZvciAjaWRcbiAgICAgIGlmICggbWF0Y2ggJiYgKG1hdGNoWzFdIHx8ICFjb250ZXh0KSApIHtcblxuICAgICAgICAvLyBIQU5ETEU6ICQoaHRtbCkgLT4gJChhcnJheSlcbiAgICAgICAgaWYgKCBtYXRjaFsxXSApIHtcbiAgICAgICAgICBjb250ZXh0ID0gY29udGV4dCBpbnN0YW5jZW9mIGpRdWVyeSA/IGNvbnRleHRbMF0gOiBjb250ZXh0O1xuXG4gICAgICAgICAgLy8gc2NyaXB0cyBpcyB0cnVlIGZvciBiYWNrLWNvbXBhdFxuICAgICAgICAgIC8vIEludGVudGlvbmFsbHkgbGV0IHRoZSBlcnJvciBiZSB0aHJvd24gaWYgcGFyc2VIVE1MIGlzIG5vdCBwcmVzZW50XG4gICAgICAgICAgalF1ZXJ5Lm1lcmdlKCB0aGlzLCBqUXVlcnkucGFyc2VIVE1MKFxuICAgICAgICAgICAgbWF0Y2hbMV0sXG4gICAgICAgICAgICBjb250ZXh0ICYmIGNvbnRleHQubm9kZVR5cGUgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IGRvY3VtZW50LFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICkgKTtcblxuICAgICAgICAgIC8vIEhBTkRMRTogJChodG1sLCBwcm9wcylcbiAgICAgICAgICBpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbMV0gKSAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29udGV4dCApICkge1xuICAgICAgICAgICAgZm9yICggbWF0Y2ggaW4gY29udGV4dCApIHtcbiAgICAgICAgICAgICAgLy8gUHJvcGVydGllcyBvZiBjb250ZXh0IGFyZSBjYWxsZWQgYXMgbWV0aG9kcyBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7XG4gICAgICAgICAgICAgICAgdGhpc1sgbWF0Y2ggXSggY29udGV4dFsgbWF0Y2ggXSApO1xuXG4gICAgICAgICAgICAgIC8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHIoIG1hdGNoLCBjb250ZXh0WyBtYXRjaCBdICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgICAvLyBIQU5ETEU6ICQoI2lkKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggbWF0Y2hbMl0gKTtcblxuICAgICAgICAgIC8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zXG4gICAgICAgICAgLy8gbm9kZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAjNjk2M1xuICAgICAgICAgIGlmICggZWxlbSAmJiBlbGVtLnBhcmVudE5vZGUgKSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgSUUgYW5kIE9wZXJhIHJldHVybiBpdGVtc1xuICAgICAgICAgICAgLy8gYnkgbmFtZSBpbnN0ZWFkIG9mIElEXG4gICAgICAgICAgICBpZiAoIGVsZW0uaWQgIT09IG1hdGNoWzJdICkge1xuICAgICAgICAgICAgICByZXR1cm4gcm9vdGpRdWVyeS5maW5kKCBzZWxlY3RvciApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0XG4gICAgICAgICAgICB0aGlzLmxlbmd0aCA9IDE7XG4gICAgICAgICAgICB0aGlzWzBdID0gZWxlbTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmNvbnRleHQgPSBkb2N1bWVudDtcbiAgICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgLy8gSEFORExFOiAkKGV4cHIsICQoLi4uKSlcbiAgICAgIH0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkge1xuICAgICAgICByZXR1cm4gKCBjb250ZXh0IHx8IHJvb3RqUXVlcnkgKS5maW5kKCBzZWxlY3RvciApO1xuXG4gICAgICAvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dClcbiAgICAgIC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApO1xuICAgICAgfVxuXG4gICAgLy8gSEFORExFOiAkKERPTUVsZW1lbnQpXG4gICAgfSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG4gICAgICB0aGlzLmNvbnRleHQgPSB0aGlzWzBdID0gc2VsZWN0b3I7XG4gICAgICB0aGlzLmxlbmd0aCA9IDE7XG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIC8vIEhBTkRMRTogJChmdW5jdGlvbilcbiAgICAvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHlcbiAgICB9IGVsc2UgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggc2VsZWN0b3IgKSApIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygcm9vdGpRdWVyeS5yZWFkeSAhPT0gXCJ1bmRlZmluZWRcIiA/XG4gICAgICAgIHJvb3RqUXVlcnkucmVhZHkoIHNlbGVjdG9yICkgOlxuICAgICAgICAvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50XG4gICAgICAgIHNlbGVjdG9yKCBqUXVlcnkgKTtcbiAgICB9XG5cbiAgICBpZiAoIHNlbGVjdG9yLnNlbGVjdG9yICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3Iuc2VsZWN0b3I7XG4gICAgICB0aGlzLmNvbnRleHQgPSBzZWxlY3Rvci5jb250ZXh0O1xuICAgIH1cblxuICAgIHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuICB9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG4gIC8vIG1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0XG4gIGd1YXJhbnRlZWRVbmlxdWUgPSB7XG4gICAgY2hpbGRyZW46IHRydWUsXG4gICAgY29udGVudHM6IHRydWUsXG4gICAgbmV4dDogdHJ1ZSxcbiAgICBwcmV2OiB0cnVlXG4gIH07XG5cbmpRdWVyeS5leHRlbmQoe1xuICBkaXI6IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkge1xuICAgIHZhciBtYXRjaGVkID0gW10sXG4gICAgICBjdXIgPSBlbGVtWyBkaXIgXTtcblxuICAgIHdoaWxlICggY3VyICYmIGN1ci5ub2RlVHlwZSAhPT0gOSAmJiAodW50aWwgPT09IHVuZGVmaW5lZCB8fCBjdXIubm9kZVR5cGUgIT09IDEgfHwgIWpRdWVyeSggY3VyICkuaXMoIHVudGlsICkpICkge1xuICAgICAgaWYgKCBjdXIubm9kZVR5cGUgPT09IDEgKSB7XG4gICAgICAgIG1hdGNoZWQucHVzaCggY3VyICk7XG4gICAgICB9XG4gICAgICBjdXIgPSBjdXJbZGlyXTtcbiAgICB9XG4gICAgcmV0dXJuIG1hdGNoZWQ7XG4gIH0sXG5cbiAgc2libGluZzogZnVuY3Rpb24oIG4sIGVsZW0gKSB7XG4gICAgdmFyIHIgPSBbXTtcblxuICAgIGZvciAoIDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcgKSB7XG4gICAgICBpZiAoIG4ubm9kZVR5cGUgPT09IDEgJiYgbiAhPT0gZWxlbSApIHtcbiAgICAgICAgci5wdXNoKCBuICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHI7XG4gIH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcbiAgaGFzOiBmdW5jdGlvbiggdGFyZ2V0ICkge1xuICAgIHZhciBpLFxuICAgICAgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG4gICAgICBsZW4gPSB0YXJnZXRzLmxlbmd0aDtcblxuICAgIHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpIHtcbiAgICAgIGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICAgIGlmICggalF1ZXJ5LmNvbnRhaW5zKCB0aGlzLCB0YXJnZXRzW2ldICkgKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuICAgIHZhciBjdXIsXG4gICAgICBpID0gMCxcbiAgICAgIGwgPSB0aGlzLmxlbmd0aCxcbiAgICAgIG1hdGNoZWQgPSBbXSxcbiAgICAgIHBvcyA9IHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgfHwgdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiA/XG4gICAgICAgIGpRdWVyeSggc2VsZWN0b3JzLCBjb250ZXh0IHx8IHRoaXMuY29udGV4dCApIDpcbiAgICAgICAgMDtcblxuICAgIGZvciAoIDsgaSA8IGw7IGkrKyApIHtcbiAgICAgIGZvciAoIGN1ciA9IHRoaXNbaV07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuICAgICAgICAvLyBBbHdheXMgc2tpcCBkb2N1bWVudCBmcmFnbWVudHNcbiAgICAgICAgaWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAocG9zID9cbiAgICAgICAgICBwb3MuaW5kZXgoY3VyKSA+IC0xIDpcblxuICAgICAgICAgIC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuICAgICAgICAgIGN1ci5ub2RlVHlwZSA9PT0gMSAmJlxuICAgICAgICAgICAgalF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGN1ciwgc2VsZWN0b3JzKSkgKSB7XG5cbiAgICAgICAgICBtYXRjaGVkLnB1c2goIGN1ciApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlKCBtYXRjaGVkICkgOiBtYXRjaGVkICk7XG4gIH0sXG5cbiAgLy8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpblxuICAvLyB0aGUgbWF0Y2hlZCBzZXQgb2YgZWxlbWVudHNcbiAgaW5kZXg6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG4gICAgLy8gTm8gYXJndW1lbnQsIHJldHVybiBpbmRleCBpbiBwYXJlbnRcbiAgICBpZiAoICFlbGVtICkge1xuICAgICAgcmV0dXJuICggdGhpc1swXSAmJiB0aGlzWzBdLnBhcmVudE5vZGUgKSA/IHRoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoIDogLTE7XG4gICAgfVxuXG4gICAgLy8gaW5kZXggaW4gc2VsZWN0b3JcbiAgICBpZiAoIHR5cGVvZiBlbGVtID09PSBcInN0cmluZ1wiICkge1xuICAgICAgcmV0dXJuIGpRdWVyeS5pbkFycmF5KCB0aGlzWzBdLCBqUXVlcnkoIGVsZW0gKSApO1xuICAgIH1cblxuICAgIC8vIExvY2F0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGRlc2lyZWQgZWxlbWVudFxuICAgIHJldHVybiBqUXVlcnkuaW5BcnJheShcbiAgICAgIC8vIElmIGl0IHJlY2VpdmVzIGEgalF1ZXJ5IG9iamVjdCwgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdXNlZFxuICAgICAgZWxlbS5qcXVlcnkgPyBlbGVtWzBdIDogZWxlbSwgdGhpcyApO1xuICB9LFxuXG4gIGFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayhcbiAgICAgIGpRdWVyeS51bmlxdWUoXG4gICAgICAgIGpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApIClcbiAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIGFkZEJhY2s6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcbiAgICByZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuICAgICAgdGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzZWxlY3RvcilcbiAgICApO1xuICB9XG59KTtcblxuZnVuY3Rpb24gc2libGluZyggY3VyLCBkaXIgKSB7XG4gIGRvIHtcbiAgICBjdXIgPSBjdXJbIGRpciBdO1xuICB9IHdoaWxlICggY3VyICYmIGN1ci5ub2RlVHlwZSAhPT0gMSApO1xuXG4gIHJldHVybiBjdXI7XG59XG5cbmpRdWVyeS5lYWNoKHtcbiAgcGFyZW50OiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICB2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuICAgIHJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSAxMSA/IHBhcmVudCA6IG51bGw7XG4gIH0sXG4gIHBhcmVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgIHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiApO1xuICB9LFxuICBwYXJlbnRzVW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcbiAgICByZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIsIHVudGlsICk7XG4gIH0sXG4gIG5leHQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgIHJldHVybiBzaWJsaW5nKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcbiAgfSxcbiAgcHJldjogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgcmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcbiAgfSxcbiAgbmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgcmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiApO1xuICB9LFxuICBwcmV2QWxsOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICByZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuICB9LFxuICBuZXh0VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcbiAgICByZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiLCB1bnRpbCApO1xuICB9LFxuICBwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcbiAgICByZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiwgdW50aWwgKTtcbiAgfSxcbiAgc2libGluZ3M6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgIHJldHVybiBqUXVlcnkuc2libGluZyggKCBlbGVtLnBhcmVudE5vZGUgfHwge30gKS5maXJzdENoaWxkLCBlbGVtICk7XG4gIH0sXG4gIGNoaWxkcmVuOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICByZXR1cm4galF1ZXJ5LnNpYmxpbmcoIGVsZW0uZmlyc3RDaGlsZCApO1xuICB9LFxuICBjb250ZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgcmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgXCJpZnJhbWVcIiApID9cbiAgICAgIGVsZW0uY29udGVudERvY3VtZW50IHx8IGVsZW0uY29udGVudFdpbmRvdy5kb2N1bWVudCA6XG4gICAgICBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcbiAgfVxufSwgZnVuY3Rpb24oIG5hbWUsIGZuICkge1xuICBqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG4gICAgdmFyIHJldCA9IGpRdWVyeS5tYXAoIHRoaXMsIGZuLCB1bnRpbCApO1xuXG4gICAgaWYgKCBuYW1lLnNsaWNlKCAtNSApICE9PSBcIlVudGlsXCIgKSB7XG4gICAgICBzZWxlY3RvciA9IHVudGlsO1xuICAgIH1cblxuICAgIGlmICggc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuICAgICAgcmV0ID0galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIHJldCApO1xuICAgIH1cblxuICAgIGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgIGlmICggIWd1YXJhbnRlZWRVbmlxdWVbIG5hbWUgXSApIHtcbiAgICAgICAgcmV0ID0galF1ZXJ5LnVuaXF1ZSggcmV0ICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldmVyc2Ugb3JkZXIgZm9yIHBhcmVudHMqIGFuZCBwcmV2LWRlcml2YXRpdmVzXG4gICAgICBpZiAoIHJwYXJlbnRzcHJldi50ZXN0KCBuYW1lICkgKSB7XG4gICAgICAgIHJldCA9IHJldC5yZXZlcnNlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKCByZXQgKTtcbiAgfTtcbn0pO1xudmFyIHJub3R3aGl0ZSA9ICgvXFxTKy9nKTtcblxuXG5cbi8vIFN0cmluZyB0byBPYmplY3Qgb3B0aW9ucyBmb3JtYXQgY2FjaGVcbnZhciBvcHRpb25zQ2FjaGUgPSB7fTtcblxuLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXMgYW5kIHN0b3JlIGluIGNhY2hlXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkge1xuICB2YXIgb2JqZWN0ID0gb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gPSB7fTtcbiAgalF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHtcbiAgICBvYmplY3RbIGZsYWcgXSA9IHRydWU7XG4gIH0pO1xuICByZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICogIG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqICAgICAgdGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKiAgb25jZTogICAgIHdpbGwgZW5zdXJlIHRoZSBjYWxsYmFjayBsaXN0IGNhbiBvbmx5IGJlIGZpcmVkIG9uY2UgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKiAgbWVtb3J5OiAgICAgd2lsbCBrZWVwIHRyYWNrIG9mIHByZXZpb3VzIHZhbHVlcyBhbmQgd2lsbCBjYWxsIGFueSBjYWxsYmFjayBhZGRlZFxuICogICAgICAgICAgYWZ0ZXIgdGhlIGxpc3QgaGFzIGJlZW4gZmlyZWQgcmlnaHQgYXdheSB3aXRoIHRoZSBsYXRlc3QgXCJtZW1vcml6ZWRcIlxuICogICAgICAgICAgdmFsdWVzIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICogIHVuaXF1ZTogICAgIHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqICBzdG9wT25GYWxzZTogIGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG4gIC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcbiAgLy8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuICBvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuICAgICggb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gfHwgY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApICkgOlxuICAgIGpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cbiAgdmFyIC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IGlzIGN1cnJlbnRseSBmaXJpbmdcbiAgICBmaXJpbmcsXG4gICAgLy8gTGFzdCBmaXJlIHZhbHVlIChmb3Igbm9uLWZvcmdldHRhYmxlIGxpc3RzKVxuICAgIG1lbW9yeSxcbiAgICAvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCB3YXMgYWxyZWFkeSBmaXJlZFxuICAgIGZpcmVkLFxuICAgIC8vIEVuZCBvZiB0aGUgbG9vcCB3aGVuIGZpcmluZ1xuICAgIGZpcmluZ0xlbmd0aCxcbiAgICAvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSByZW1vdmUgaWYgbmVlZGVkKVxuICAgIGZpcmluZ0luZGV4LFxuICAgIC8vIEZpcnN0IGNhbGxiYWNrIHRvIGZpcmUgKHVzZWQgaW50ZXJuYWxseSBieSBhZGQgYW5kIGZpcmVXaXRoKVxuICAgIGZpcmluZ1N0YXJ0LFxuICAgIC8vIEFjdHVhbCBjYWxsYmFjayBsaXN0XG4gICAgbGlzdCA9IFtdLFxuICAgIC8vIFN0YWNrIG9mIGZpcmUgY2FsbHMgZm9yIHJlcGVhdGFibGUgbGlzdHNcbiAgICBzdGFjayA9ICFvcHRpb25zLm9uY2UgJiYgW10sXG4gICAgLy8gRmlyZSBjYWxsYmFja3NcbiAgICBmaXJlID0gZnVuY3Rpb24oIGRhdGEgKSB7XG4gICAgICBtZW1vcnkgPSBvcHRpb25zLm1lbW9yeSAmJiBkYXRhO1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgZmlyaW5nSW5kZXggPSBmaXJpbmdTdGFydCB8fCAwO1xuICAgICAgZmlyaW5nU3RhcnQgPSAwO1xuICAgICAgZmlyaW5nTGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gICAgICBmaXJpbmcgPSB0cnVlO1xuICAgICAgZm9yICggOyBsaXN0ICYmIGZpcmluZ0luZGV4IDwgZmlyaW5nTGVuZ3RoOyBmaXJpbmdJbmRleCsrICkge1xuICAgICAgICBpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIGRhdGFbIDAgXSwgZGF0YVsgMSBdICkgPT09IGZhbHNlICYmIG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG4gICAgICAgICAgbWVtb3J5ID0gZmFsc2U7IC8vIFRvIHByZXZlbnQgZnVydGhlciBjYWxscyB1c2luZyBhZGRcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZmlyaW5nID0gZmFsc2U7XG4gICAgICBpZiAoIGxpc3QgKSB7XG4gICAgICAgIGlmICggc3RhY2sgKSB7XG4gICAgICAgICAgaWYgKCBzdGFjay5sZW5ndGggKSB7XG4gICAgICAgICAgICBmaXJlKCBzdGFjay5zaGlmdCgpICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCBtZW1vcnkgKSB7XG4gICAgICAgICAgbGlzdCA9IFtdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuZGlzYWJsZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuICAgIHNlbGYgPSB7XG4gICAgICAvLyBBZGQgYSBjYWxsYmFjayBvciBhIGNvbGxlY3Rpb24gb2YgY2FsbGJhY2tzIHRvIHRoZSBsaXN0XG4gICAgICBhZGQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIGxpc3QgKSB7XG4gICAgICAgICAgLy8gRmlyc3QsIHdlIHNhdmUgdGhlIGN1cnJlbnQgbGVuZ3RoXG4gICAgICAgICAgdmFyIHN0YXJ0ID0gbGlzdC5sZW5ndGg7XG4gICAgICAgICAgKGZ1bmN0aW9uIGFkZCggYXJncyApIHtcbiAgICAgICAgICAgIGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuICAgICAgICAgICAgICB2YXIgdHlwZSA9IGpRdWVyeS50eXBlKCBhcmcgKTtcbiAgICAgICAgICAgICAgaWYgKCB0eXBlID09PSBcImZ1bmN0aW9uXCIgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHtcbiAgICAgICAgICAgICAgICAgIGxpc3QucHVzaCggYXJnICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgIC8vIEluc3BlY3QgcmVjdXJzaXZlbHlcbiAgICAgICAgICAgICAgICBhZGQoIGFyZyApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KSggYXJndW1lbnRzICk7XG4gICAgICAgICAgLy8gRG8gd2UgbmVlZCB0byBhZGQgdGhlIGNhbGxiYWNrcyB0byB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGZpcmluZyBiYXRjaD9cbiAgICAgICAgICBpZiAoIGZpcmluZyApIHtcbiAgICAgICAgICAgIGZpcmluZ0xlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICAgICAgICAgIC8vIFdpdGggbWVtb3J5LCBpZiB3ZSdyZSBub3QgZmlyaW5nIHRoZW5cbiAgICAgICAgICAvLyB3ZSBzaG91bGQgY2FsbCByaWdodCBhd2F5XG4gICAgICAgICAgfSBlbHNlIGlmICggbWVtb3J5ICkge1xuICAgICAgICAgICAgZmlyaW5nU3RhcnQgPSBzdGFydDtcbiAgICAgICAgICAgIGZpcmUoIG1lbW9yeSApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICAvLyBSZW1vdmUgYSBjYWxsYmFjayBmcm9tIHRoZSBsaXN0XG4gICAgICByZW1vdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIGxpc3QgKSB7XG4gICAgICAgICAgalF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuICAgICAgICAgICAgICBsaXN0LnNwbGljZSggaW5kZXgsIDEgKTtcbiAgICAgICAgICAgICAgLy8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG4gICAgICAgICAgICAgIGlmICggZmlyaW5nICkge1xuICAgICAgICAgICAgICAgIGlmICggaW5kZXggPD0gZmlyaW5nTGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgZmlyaW5nTGVuZ3RoLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7XG4gICAgICAgICAgICAgICAgICBmaXJpbmdJbmRleC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG4gICAgICAvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cbiAgICAgIGhhczogZnVuY3Rpb24oIGZuICkge1xuICAgICAgICByZXR1cm4gZm4gPyBqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDogISEoIGxpc3QgJiYgbGlzdC5sZW5ndGggKTtcbiAgICAgIH0sXG4gICAgICAvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG4gICAgICBlbXB0eTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGxpc3QgPSBbXTtcbiAgICAgICAgZmlyaW5nTGVuZ3RoID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgLy8gSGF2ZSB0aGUgbGlzdCBkbyBub3RoaW5nIGFueW1vcmVcbiAgICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBsaXN0ID0gc3RhY2sgPSBtZW1vcnkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIC8vIElzIGl0IGRpc2FibGVkP1xuICAgICAgZGlzYWJsZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gIWxpc3Q7XG4gICAgICB9LFxuICAgICAgLy8gTG9jayB0aGUgbGlzdCBpbiBpdHMgY3VycmVudCBzdGF0ZVxuICAgICAgbG9jazogZnVuY3Rpb24oKSB7XG4gICAgICAgIHN0YWNrID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoICFtZW1vcnkgKSB7XG4gICAgICAgICAgc2VsZi5kaXNhYmxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgLy8gSXMgaXQgbG9ja2VkP1xuICAgICAgbG9ja2VkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICFzdGFjaztcbiAgICAgIH0sXG4gICAgICAvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzXG4gICAgICBmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG4gICAgICAgIGlmICggbGlzdCAmJiAoICFmaXJlZCB8fCBzdGFjayApICkge1xuICAgICAgICAgIGFyZ3MgPSBhcmdzIHx8IFtdO1xuICAgICAgICAgIGFyZ3MgPSBbIGNvbnRleHQsIGFyZ3Muc2xpY2UgPyBhcmdzLnNsaWNlKCkgOiBhcmdzIF07XG4gICAgICAgICAgaWYgKCBmaXJpbmcgKSB7XG4gICAgICAgICAgICBzdGFjay5wdXNoKCBhcmdzICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpcmUoIGFyZ3MgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgLy8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHNcbiAgICAgIGZpcmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgLy8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG4gICAgICBmaXJlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhIWZpcmVkO1xuICAgICAgfVxuICAgIH07XG5cbiAgcmV0dXJuIHNlbGY7XG59O1xuXG5cbmpRdWVyeS5leHRlbmQoe1xuXG4gIERlZmVycmVkOiBmdW5jdGlvbiggZnVuYyApIHtcbiAgICB2YXIgdHVwbGVzID0gW1xuICAgICAgICAvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgbGlzdGVuZXIgbGlzdCwgZmluYWwgc3RhdGVcbiAgICAgICAgWyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiIF0sXG4gICAgICAgIFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZWplY3RlZFwiIF0sXG4gICAgICAgIFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpIF1cbiAgICAgIF0sXG4gICAgICBzdGF0ZSA9IFwicGVuZGluZ1wiLFxuICAgICAgcHJvbWlzZSA9IHtcbiAgICAgICAgc3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgYWx3YXlzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgdGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuICAgICAgICAgIHZhciBmbnMgPSBhcmd1bWVudHM7XG4gICAgICAgICAgcmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG4gICAgICAgICAgICBqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG4gICAgICAgICAgICAgIHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIGkgXSApICYmIGZuc1sgaSBdO1xuICAgICAgICAgICAgICAvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXJcbiAgICAgICAgICAgICAgZGVmZXJyZWRbIHR1cGxlWzFdIF0oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuICAgICAgICAgICAgICAgIGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybmVkLnByb21pc2UoKVxuICAgICAgICAgICAgICAgICAgICAuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApXG4gICAgICAgICAgICAgICAgICAgIC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKVxuICAgICAgICAgICAgICAgICAgICAucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IHByb21pc2UgPyBuZXdEZWZlci5wcm9taXNlKCkgOiB0aGlzLCBmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50cyApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZucyA9IG51bGw7XG4gICAgICAgICAgfSkucHJvbWlzZSgpO1xuICAgICAgICB9LFxuICAgICAgICAvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG4gICAgICAgIC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3RcbiAgICAgICAgcHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcbiAgICAgICAgICByZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWZlcnJlZCA9IHt9O1xuXG4gICAgLy8gS2VlcCBwaXBlIGZvciBiYWNrLWNvbXBhdFxuICAgIHByb21pc2UucGlwZSA9IHByb21pc2UudGhlbjtcblxuICAgIC8vIEFkZCBsaXN0LXNwZWNpZmljIG1ldGhvZHNcbiAgICBqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG4gICAgICB2YXIgbGlzdCA9IHR1cGxlWyAyIF0sXG4gICAgICAgIHN0YXRlU3RyaW5nID0gdHVwbGVbIDMgXTtcblxuICAgICAgLy8gcHJvbWlzZVsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdID0gbGlzdC5hZGRcbiAgICAgIHByb21pc2VbIHR1cGxlWzFdIF0gPSBsaXN0LmFkZDtcblxuICAgICAgLy8gSGFuZGxlIHN0YXRlXG4gICAgICBpZiAoIHN0YXRlU3RyaW5nICkge1xuICAgICAgICBsaXN0LmFkZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyBzdGF0ZSA9IFsgcmVzb2x2ZWQgfCByZWplY3RlZCBdXG4gICAgICAgICAgc3RhdGUgPSBzdGF0ZVN0cmluZztcblxuICAgICAgICAvLyBbIHJlamVjdF9saXN0IHwgcmVzb2x2ZV9saXN0IF0uZGlzYWJsZTsgcHJvZ3Jlc3NfbGlzdC5sb2NrXG4gICAgICAgIH0sIHR1cGxlc1sgaSBeIDEgXVsgMiBdLmRpc2FibGUsIHR1cGxlc1sgMiBdWyAyIF0ubG9jayApO1xuICAgICAgfVxuXG4gICAgICAvLyBkZWZlcnJlZFsgcmVzb2x2ZSB8IHJlamVjdCB8IG5vdGlmeSBdXG4gICAgICBkZWZlcnJlZFsgdHVwbGVbMF0gXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBkZWZlcnJlZFsgdHVwbGVbMF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHByb21pc2UgOiB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgZGVmZXJyZWRbIHR1cGxlWzBdICsgXCJXaXRoXCIgXSA9IGxpc3QuZmlyZVdpdGg7XG4gICAgfSk7XG5cbiAgICAvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2VcbiAgICBwcm9taXNlLnByb21pc2UoIGRlZmVycmVkICk7XG5cbiAgICAvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG4gICAgaWYgKCBmdW5jICkge1xuICAgICAgZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcbiAgICB9XG5cbiAgICAvLyBBbGwgZG9uZSFcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH0sXG5cbiAgLy8gRGVmZXJyZWQgaGVscGVyXG4gIHdoZW46IGZ1bmN0aW9uKCBzdWJvcmRpbmF0ZSAvKiAsIC4uLiwgc3Vib3JkaW5hdGVOICovICkge1xuICAgIHZhciBpID0gMCxcbiAgICAgIHJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcbiAgICAgIGxlbmd0aCA9IHJlc29sdmVWYWx1ZXMubGVuZ3RoLFxuXG4gICAgICAvLyB0aGUgY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzXG4gICAgICByZW1haW5pbmcgPSBsZW5ndGggIT09IDEgfHwgKCBzdWJvcmRpbmF0ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggc3Vib3JkaW5hdGUucHJvbWlzZSApICkgPyBsZW5ndGggOiAwLFxuXG4gICAgICAvLyB0aGUgbWFzdGVyIERlZmVycmVkLiBJZiByZXNvbHZlVmFsdWVzIGNvbnNpc3Qgb2Ygb25seSBhIHNpbmdsZSBEZWZlcnJlZCwganVzdCB1c2UgdGhhdC5cbiAgICAgIGRlZmVycmVkID0gcmVtYWluaW5nID09PSAxID8gc3Vib3JkaW5hdGUgOiBqUXVlcnkuRGVmZXJyZWQoKSxcblxuICAgICAgLy8gVXBkYXRlIGZ1bmN0aW9uIGZvciBib3RoIHJlc29sdmUgYW5kIHByb2dyZXNzIHZhbHVlc1xuICAgICAgdXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpLCBjb250ZXh0cywgdmFsdWVzICkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgICAgIGNvbnRleHRzWyBpIF0gPSB0aGlzO1xuICAgICAgICAgIHZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuICAgICAgICAgIGlmICggdmFsdWVzID09PSBwcm9ncmVzc1ZhbHVlcyApIHtcbiAgICAgICAgICAgIGRlZmVycmVkLm5vdGlmeVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAoICEoLS1yZW1haW5pbmcpICkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9LFxuXG4gICAgICBwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzO1xuXG4gICAgLy8gYWRkIGxpc3RlbmVycyB0byBEZWZlcnJlZCBzdWJvcmRpbmF0ZXM7IHRyZWF0IG90aGVycyBhcyByZXNvbHZlZFxuICAgIGlmICggbGVuZ3RoID4gMSApIHtcbiAgICAgIHByb2dyZXNzVmFsdWVzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcbiAgICAgIHByb2dyZXNzQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuICAgICAgcmVzb2x2ZUNvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcbiAgICAgIGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuICAgICAgICBpZiAoIHJlc29sdmVWYWx1ZXNbIGkgXSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggcmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UgKSApIHtcbiAgICAgICAgICByZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSgpXG4gICAgICAgICAgICAuZG9uZSggdXBkYXRlRnVuYyggaSwgcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICkgKVxuICAgICAgICAgICAgLmZhaWwoIGRlZmVycmVkLnJlamVjdCApXG4gICAgICAgICAgICAucHJvZ3Jlc3MoIHVwZGF0ZUZ1bmMoIGksIHByb2dyZXNzQ29udGV4dHMsIHByb2dyZXNzVmFsdWVzICkgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAtLXJlbWFpbmluZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGlmIHdlJ3JlIG5vdCB3YWl0aW5nIG9uIGFueXRoaW5nLCByZXNvbHZlIHRoZSBtYXN0ZXJcbiAgICBpZiAoICFyZW1haW5pbmcgKSB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfVxufSk7XG5cblxuLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5XG52YXIgcmVhZHlMaXN0O1xuXG5qUXVlcnkuZm4ucmVhZHkgPSBmdW5jdGlvbiggZm4gKSB7XG4gIC8vIEFkZCB0aGUgY2FsbGJhY2tcbiAgalF1ZXJ5LnJlYWR5LnByb21pc2UoKS5kb25lKCBmbiApO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxualF1ZXJ5LmV4dGVuZCh7XG4gIC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG4gIGlzUmVhZHk6IGZhbHNlLFxuXG4gIC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcbiAgLy8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODFcbiAgcmVhZHlXYWl0OiAxLFxuXG4gIC8vIEhvbGQgKG9yIHJlbGVhc2UpIHRoZSByZWFkeSBldmVudFxuICBob2xkUmVhZHk6IGZ1bmN0aW9uKCBob2xkICkge1xuICAgIGlmICggaG9sZCApIHtcbiAgICAgIGpRdWVyeS5yZWFkeVdhaXQrKztcbiAgICB9IGVsc2Uge1xuICAgICAgalF1ZXJ5LnJlYWR5KCB0cnVlICk7XG4gICAgfVxuICB9LFxuXG4gIC8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHlcbiAgcmVhZHk6IGZ1bmN0aW9uKCB3YWl0ICkge1xuXG4gICAgLy8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeVxuICAgIGlmICggd2FpdCA9PT0gdHJ1ZSA/IC0talF1ZXJ5LnJlYWR5V2FpdCA6IGpRdWVyeS5pc1JlYWR5ICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE1ha2Ugc3VyZSBib2R5IGV4aXN0cywgYXQgbGVhc3QsIGluIGNhc2UgSUUgZ2V0cyBhIGxpdHRsZSBvdmVyemVhbG91cyAodGlja2V0ICM1NDQzKS5cbiAgICBpZiAoICFkb2N1bWVudC5ib2R5ICkge1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoIGpRdWVyeS5yZWFkeSApO1xuICAgIH1cblxuICAgIC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuICAgIGpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTtcblxuICAgIC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG4gICAgaWYgKCB3YWl0ICE9PSB0cnVlICYmIC0talF1ZXJ5LnJlYWR5V2FpdCA+IDAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucyBib3VuZCwgdG8gZXhlY3V0ZVxuICAgIHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblxuICAgIC8vIFRyaWdnZXIgYW55IGJvdW5kIHJlYWR5IGV2ZW50c1xuICAgIGlmICggalF1ZXJ5LmZuLnRyaWdnZXJIYW5kbGVyICkge1xuICAgICAgalF1ZXJ5KCBkb2N1bWVudCApLnRyaWdnZXJIYW5kbGVyKCBcInJlYWR5XCIgKTtcbiAgICAgIGpRdWVyeSggZG9jdW1lbnQgKS5vZmYoIFwicmVhZHlcIiApO1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKlxuICogQ2xlYW4tdXAgbWV0aG9kIGZvciBkb20gcmVhZHkgZXZlbnRzXG4gKi9cbmZ1bmN0aW9uIGRldGFjaCgpIHtcbiAgaWYgKCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQsIGZhbHNlICk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQsIGZhbHNlICk7XG5cbiAgfSBlbHNlIHtcbiAgICBkb2N1bWVudC5kZXRhY2hFdmVudCggXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiwgY29tcGxldGVkICk7XG4gICAgd2luZG93LmRldGFjaEV2ZW50KCBcIm9ubG9hZFwiLCBjb21wbGV0ZWQgKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSByZWFkeSBldmVudCBoYW5kbGVyIGFuZCBzZWxmIGNsZWFudXAgbWV0aG9kXG4gKi9cbmZ1bmN0aW9uIGNvbXBsZXRlZCgpIHtcbiAgLy8gcmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiIGlzIGdvb2QgZW5vdWdoIGZvciB1cyB0byBjYWxsIHRoZSBkb20gcmVhZHkgaW4gb2xkSUVcbiAgaWYgKCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyIHx8IGV2ZW50LnR5cGUgPT09IFwibG9hZFwiIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIiApIHtcbiAgICBkZXRhY2goKTtcbiAgICBqUXVlcnkucmVhZHkoKTtcbiAgfVxufVxuXG5qUXVlcnkucmVhZHkucHJvbWlzZSA9IGZ1bmN0aW9uKCBvYmogKSB7XG4gIGlmICggIXJlYWR5TGlzdCApIHtcblxuICAgIHJlYWR5TGlzdCA9IGpRdWVyeS5EZWZlcnJlZCgpO1xuXG4gICAgLy8gQ2F0Y2ggY2FzZXMgd2hlcmUgJChkb2N1bWVudCkucmVhZHkoKSBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGJyb3dzZXIgZXZlbnQgaGFzIGFscmVhZHkgb2NjdXJyZWQuXG4gICAgLy8gd2Ugb25jZSB0cmllZCB0byB1c2UgcmVhZHlTdGF0ZSBcImludGVyYWN0aXZlXCIgaGVyZSwgYnV0IGl0IGNhdXNlZCBpc3N1ZXMgbGlrZSB0aGUgb25lXG4gICAgLy8gZGlzY292ZXJlZCBieSBDaHJpc1MgaGVyZTogaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIyODIjY29tbWVudDoxNVxuICAgIGlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiICkge1xuICAgICAgLy8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG4gICAgICBzZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTtcblxuICAgIC8vIFN0YW5kYXJkcy1iYXNlZCBicm93c2VycyBzdXBwb3J0IERPTUNvbnRlbnRMb2FkZWRcbiAgICB9IGVsc2UgaWYgKCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICkge1xuICAgICAgLy8gVXNlIHRoZSBoYW5keSBldmVudCBjYWxsYmFja1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblxuICAgICAgLy8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXG4gICAgLy8gSWYgSUUgZXZlbnQgbW9kZWwgaXMgdXNlZFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFbnN1cmUgZmlyaW5nIGJlZm9yZSBvbmxvYWQsIG1heWJlIGxhdGUgYnV0IHNhZmUgYWxzbyBmb3IgaWZyYW1lc1xuICAgICAgZG9jdW1lbnQuYXR0YWNoRXZlbnQoIFwib25yZWFkeXN0YXRlY2hhbmdlXCIsIGNvbXBsZXRlZCApO1xuXG4gICAgICAvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuICAgICAgd2luZG93LmF0dGFjaEV2ZW50KCBcIm9ubG9hZFwiLCBjb21wbGV0ZWQgKTtcblxuICAgICAgLy8gSWYgSUUgYW5kIG5vdCBhIGZyYW1lXG4gICAgICAvLyBjb250aW51YWxseSBjaGVjayB0byBzZWUgaWYgdGhlIGRvY3VtZW50IGlzIHJlYWR5XG4gICAgICB2YXIgdG9wID0gZmFsc2U7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHRvcCA9IHdpbmRvdy5mcmFtZUVsZW1lbnQgPT0gbnVsbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICB9IGNhdGNoKGUpIHt9XG5cbiAgICAgIGlmICggdG9wICYmIHRvcC5kb1Njcm9sbCApIHtcbiAgICAgICAgKGZ1bmN0aW9uIGRvU2Nyb2xsQ2hlY2soKSB7XG4gICAgICAgICAgaWYgKCAhalF1ZXJ5LmlzUmVhZHkgKSB7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vIFVzZSB0aGUgdHJpY2sgYnkgRGllZ28gUGVyaW5pXG4gICAgICAgICAgICAgIC8vIGh0dHA6Ly9qYXZhc2NyaXB0Lm53Ym94LmNvbS9JRUNvbnRlbnRMb2FkZWQvXG4gICAgICAgICAgICAgIHRvcC5kb1Njcm9sbChcImxlZnRcIik7XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoIGRvU2Nyb2xsQ2hlY2ssIDUwICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGRldGFjaCBhbGwgZG9tIHJlYWR5IGV2ZW50c1xuICAgICAgICAgICAgZGV0YWNoKCk7XG5cbiAgICAgICAgICAgIC8vIGFuZCBleGVjdXRlIGFueSB3YWl0aW5nIGZ1bmN0aW9uc1xuICAgICAgICAgICAgalF1ZXJ5LnJlYWR5KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVhZHlMaXN0LnByb21pc2UoIG9iaiApO1xufTtcblxuXG52YXIgc3RydW5kZWZpbmVkID0gdHlwZW9mIHVuZGVmaW5lZDtcblxuXG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIEl0ZXJhdGlvbiBvdmVyIG9iamVjdCdzIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlZm9yZSBpdHMgb3duXG52YXIgaTtcbmZvciAoIGkgaW4galF1ZXJ5KCBzdXBwb3J0ICkgKSB7XG4gIGJyZWFrO1xufVxuc3VwcG9ydC5vd25MYXN0ID0gaSAhPT0gXCIwXCI7XG5cbi8vIE5vdGU6IG1vc3Qgc3VwcG9ydCB0ZXN0cyBhcmUgZGVmaW5lZCBpbiB0aGVpciByZXNwZWN0aXZlIG1vZHVsZXMuXG4vLyBmYWxzZSB1bnRpbCB0aGUgdGVzdCBpcyBydW5cbnN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCA9IGZhbHNlO1xuXG4vLyBFeGVjdXRlIEFTQVAgaW4gY2FzZSB3ZSBuZWVkIHRvIHNldCBib2R5LnN0eWxlLnpvb21cbmpRdWVyeShmdW5jdGlvbigpIHtcbiAgLy8gTWluaWZpZWQ6IHZhciBhLGIsYyxkXG4gIHZhciB2YWwsIGRpdiwgYm9keSwgY29udGFpbmVyO1xuXG4gIGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJib2R5XCIgKVsgMCBdO1xuICBpZiAoICFib2R5IHx8ICFib2R5LnN0eWxlICkge1xuICAgIC8vIFJldHVybiBmb3IgZnJhbWVzZXQgZG9jcyB0aGF0IGRvbid0IGhhdmUgYSBib2R5XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gU2V0dXBcbiAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG4gIGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweFwiO1xuICBib2R5LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7XG5cbiAgaWYgKCB0eXBlb2YgZGl2LnN0eWxlLnpvb20gIT09IHN0cnVuZGVmaW5lZCApIHtcbiAgICAvLyBTdXBwb3J0OiBJRTw4XG4gICAgLy8gQ2hlY2sgaWYgbmF0aXZlbHkgYmxvY2stbGV2ZWwgZWxlbWVudHMgYWN0IGxpa2UgaW5saW5lLWJsb2NrXG4gICAgLy8gZWxlbWVudHMgd2hlbiBzZXR0aW5nIHRoZWlyIGRpc3BsYXkgdG8gJ2lubGluZScgYW5kIGdpdmluZ1xuICAgIC8vIHRoZW0gbGF5b3V0XG4gICAgZGl2LnN0eWxlLmNzc1RleHQgPSBcImRpc3BsYXk6aW5saW5lO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjFcIjtcblxuICAgIHN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCA9IHZhbCA9IGRpdi5vZmZzZXRXaWR0aCA9PT0gMztcbiAgICBpZiAoIHZhbCApIHtcbiAgICAgIC8vIFByZXZlbnQgSUUgNiBmcm9tIGFmZmVjdGluZyBsYXlvdXQgZm9yIHBvc2l0aW9uZWQgZWxlbWVudHMgIzExMDQ4XG4gICAgICAvLyBQcmV2ZW50IElFIGZyb20gc2hyaW5raW5nIHRoZSBib2R5IGluIElFIDcgbW9kZSAjMTI4NjlcbiAgICAgIC8vIFN1cHBvcnQ6IElFPDhcbiAgICAgIGJvZHkuc3R5bGUuem9vbSA9IDE7XG4gICAgfVxuICB9XG5cbiAgYm9keS5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7XG59KTtcblxuXG5cblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuXG4gIC8vIEV4ZWN1dGUgdGhlIHRlc3Qgb25seSBpZiBub3QgYWxyZWFkeSBleGVjdXRlZCBpbiBhbm90aGVyIG1vZHVsZS5cbiAgaWYgKHN1cHBvcnQuZGVsZXRlRXhwYW5kbyA9PSBudWxsKSB7XG4gICAgLy8gU3VwcG9ydDogSUU8OVxuICAgIHN1cHBvcnQuZGVsZXRlRXhwYW5kbyA9IHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIGRlbGV0ZSBkaXYudGVzdDtcbiAgICB9IGNhdGNoKCBlICkge1xuICAgICAgc3VwcG9ydC5kZWxldGVFeHBhbmRvID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gTnVsbCBlbGVtZW50cyB0byBhdm9pZCBsZWFrcyBpbiBJRS5cbiAgZGl2ID0gbnVsbDtcbn0pKCk7XG5cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gb2JqZWN0IGNhbiBoYXZlIGRhdGFcbiAqL1xualF1ZXJ5LmFjY2VwdERhdGEgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgdmFyIG5vRGF0YSA9IGpRdWVyeS5ub0RhdGFbIChlbGVtLm5vZGVOYW1lICsgXCIgXCIpLnRvTG93ZXJDYXNlKCkgXSxcbiAgICBub2RlVHlwZSA9ICtlbGVtLm5vZGVUeXBlIHx8IDE7XG5cbiAgLy8gRG8gbm90IHNldCBkYXRhIG9uIG5vbi1lbGVtZW50IERPTSBub2RlcyBiZWNhdXNlIGl0IHdpbGwgbm90IGJlIGNsZWFyZWQgKCM4MzM1KS5cbiAgcmV0dXJuIG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ID9cbiAgICBmYWxzZSA6XG5cbiAgICAvLyBOb2RlcyBhY2NlcHQgZGF0YSB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZDsgcmVqZWN0aW9uIGNhbiBiZSBjb25kaXRpb25hbFxuICAgICFub0RhdGEgfHwgbm9EYXRhICE9PSB0cnVlICYmIGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NpZFwiKSA9PT0gbm9EYXRhO1xufTtcblxuXG52YXIgcmJyYWNlID0gL14oPzpcXHtbXFx3XFxXXSpcXH18XFxbW1xcd1xcV10qXFxdKSQvLFxuICBybXVsdGlEYXNoID0gLyhbQS1aXSkvZztcblxuZnVuY3Rpb24gZGF0YUF0dHIoIGVsZW0sIGtleSwgZGF0YSApIHtcbiAgLy8gSWYgbm90aGluZyB3YXMgZm91bmQgaW50ZXJuYWxseSwgdHJ5IHRvIGZldGNoIGFueVxuICAvLyBkYXRhIGZyb20gdGhlIEhUTUw1IGRhdGEtKiBhdHRyaWJ1dGVcbiAgaWYgKCBkYXRhID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuICAgIHZhciBuYW1lID0gXCJkYXRhLVwiICsga2V5LnJlcGxhY2UoIHJtdWx0aURhc2gsIFwiLSQxXCIgKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cbiAgICBpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGF0YSA9IGRhdGEgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6XG4gICAgICAgICAgZGF0YSA9PT0gXCJmYWxzZVwiID8gZmFsc2UgOlxuICAgICAgICAgIGRhdGEgPT09IFwibnVsbFwiID8gbnVsbCA6XG4gICAgICAgICAgLy8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcbiAgICAgICAgICArZGF0YSArIFwiXCIgPT09IGRhdGEgPyArZGF0YSA6XG4gICAgICAgICAgcmJyYWNlLnRlc3QoIGRhdGEgKSA/IGpRdWVyeS5wYXJzZUpTT04oIGRhdGEgKSA6XG4gICAgICAgICAgZGF0YTtcbiAgICAgIH0gY2F0Y2goIGUgKSB7fVxuXG4gICAgICAvLyBNYWtlIHN1cmUgd2Ugc2V0IHRoZSBkYXRhIHNvIGl0IGlzbid0IGNoYW5nZWQgbGF0ZXJcbiAgICAgIGpRdWVyeS5kYXRhKCBlbGVtLCBrZXksIGRhdGEgKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufVxuXG4vLyBjaGVja3MgYSBjYWNoZSBvYmplY3QgZm9yIGVtcHRpbmVzc1xuZnVuY3Rpb24gaXNFbXB0eURhdGFPYmplY3QoIG9iaiApIHtcbiAgdmFyIG5hbWU7XG4gIGZvciAoIG5hbWUgaW4gb2JqICkge1xuXG4gICAgLy8gaWYgdGhlIHB1YmxpYyBkYXRhIG9iamVjdCBpcyBlbXB0eSwgdGhlIHByaXZhdGUgaXMgc3RpbGwgZW1wdHlcbiAgICBpZiAoIG5hbWUgPT09IFwiZGF0YVwiICYmIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvYmpbbmFtZV0gKSApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoIG5hbWUgIT09IFwidG9KU09OXCIgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGludGVybmFsRGF0YSggZWxlbSwgbmFtZSwgZGF0YSwgcHZ0IC8qIEludGVybmFsIFVzZSBPbmx5ICovICkge1xuICBpZiAoICFqUXVlcnkuYWNjZXB0RGF0YSggZWxlbSApICkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciByZXQsIHRoaXNDYWNoZSxcbiAgICBpbnRlcm5hbEtleSA9IGpRdWVyeS5leHBhbmRvLFxuXG4gICAgLy8gV2UgaGF2ZSB0byBoYW5kbGUgRE9NIG5vZGVzIGFuZCBKUyBvYmplY3RzIGRpZmZlcmVudGx5IGJlY2F1c2UgSUU2LTdcbiAgICAvLyBjYW4ndCBHQyBvYmplY3QgcmVmZXJlbmNlcyBwcm9wZXJseSBhY3Jvc3MgdGhlIERPTS1KUyBib3VuZGFyeVxuICAgIGlzTm9kZSA9IGVsZW0ubm9kZVR5cGUsXG5cbiAgICAvLyBPbmx5IERPTSBub2RlcyBuZWVkIHRoZSBnbG9iYWwgalF1ZXJ5IGNhY2hlOyBKUyBvYmplY3QgZGF0YSBpc1xuICAgIC8vIGF0dGFjaGVkIGRpcmVjdGx5IHRvIHRoZSBvYmplY3Qgc28gR0MgY2FuIG9jY3VyIGF1dG9tYXRpY2FsbHlcbiAgICBjYWNoZSA9IGlzTm9kZSA/IGpRdWVyeS5jYWNoZSA6IGVsZW0sXG5cbiAgICAvLyBPbmx5IGRlZmluaW5nIGFuIElEIGZvciBKUyBvYmplY3RzIGlmIGl0cyBjYWNoZSBhbHJlYWR5IGV4aXN0cyBhbGxvd3NcbiAgICAvLyB0aGUgY29kZSB0byBzaG9ydGN1dCBvbiB0aGUgc2FtZSBwYXRoIGFzIGEgRE9NIG5vZGUgd2l0aCBubyBjYWNoZVxuICAgIGlkID0gaXNOb2RlID8gZWxlbVsgaW50ZXJuYWxLZXkgXSA6IGVsZW1bIGludGVybmFsS2V5IF0gJiYgaW50ZXJuYWxLZXk7XG5cbiAgLy8gQXZvaWQgZG9pbmcgYW55IG1vcmUgd29yayB0aGFuIHdlIG5lZWQgdG8gd2hlbiB0cnlpbmcgdG8gZ2V0IGRhdGEgb24gYW5cbiAgLy8gb2JqZWN0IHRoYXQgaGFzIG5vIGRhdGEgYXQgYWxsXG4gIGlmICggKCFpZCB8fCAhY2FjaGVbaWRdIHx8ICghcHZ0ICYmICFjYWNoZVtpZF0uZGF0YSkpICYmIGRhdGEgPT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbmFtZSA9PT0gXCJzdHJpbmdcIiApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoICFpZCApIHtcbiAgICAvLyBPbmx5IERPTSBub2RlcyBuZWVkIGEgbmV3IHVuaXF1ZSBJRCBmb3IgZWFjaCBlbGVtZW50IHNpbmNlIHRoZWlyIGRhdGFcbiAgICAvLyBlbmRzIHVwIGluIHRoZSBnbG9iYWwgY2FjaGVcbiAgICBpZiAoIGlzTm9kZSApIHtcbiAgICAgIGlkID0gZWxlbVsgaW50ZXJuYWxLZXkgXSA9IGRlbGV0ZWRJZHMucG9wKCkgfHwgalF1ZXJ5Lmd1aWQrKztcbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSBpbnRlcm5hbEtleTtcbiAgICB9XG4gIH1cblxuICBpZiAoICFjYWNoZVsgaWQgXSApIHtcbiAgICAvLyBBdm9pZCBleHBvc2luZyBqUXVlcnkgbWV0YWRhdGEgb24gcGxhaW4gSlMgb2JqZWN0cyB3aGVuIHRoZSBvYmplY3RcbiAgICAvLyBpcyBzZXJpYWxpemVkIHVzaW5nIEpTT04uc3RyaW5naWZ5XG4gICAgY2FjaGVbIGlkIF0gPSBpc05vZGUgPyB7fSA6IHsgdG9KU09OOiBqUXVlcnkubm9vcCB9O1xuICB9XG5cbiAgLy8gQW4gb2JqZWN0IGNhbiBiZSBwYXNzZWQgdG8galF1ZXJ5LmRhdGEgaW5zdGVhZCBvZiBhIGtleS92YWx1ZSBwYWlyOyB0aGlzIGdldHNcbiAgLy8gc2hhbGxvdyBjb3BpZWQgb3ZlciBvbnRvIHRoZSBleGlzdGluZyBjYWNoZVxuICBpZiAoIHR5cGVvZiBuYW1lID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBuYW1lID09PSBcImZ1bmN0aW9uXCIgKSB7XG4gICAgaWYgKCBwdnQgKSB7XG4gICAgICBjYWNoZVsgaWQgXSA9IGpRdWVyeS5leHRlbmQoIGNhY2hlWyBpZCBdLCBuYW1lICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhY2hlWyBpZCBdLmRhdGEgPSBqUXVlcnkuZXh0ZW5kKCBjYWNoZVsgaWQgXS5kYXRhLCBuYW1lICk7XG4gICAgfVxuICB9XG5cbiAgdGhpc0NhY2hlID0gY2FjaGVbIGlkIF07XG5cbiAgLy8galF1ZXJ5IGRhdGEoKSBpcyBzdG9yZWQgaW4gYSBzZXBhcmF0ZSBvYmplY3QgaW5zaWRlIHRoZSBvYmplY3QncyBpbnRlcm5hbCBkYXRhXG4gIC8vIGNhY2hlIGluIG9yZGVyIHRvIGF2b2lkIGtleSBjb2xsaXNpb25zIGJldHdlZW4gaW50ZXJuYWwgZGF0YSBhbmQgdXNlci1kZWZpbmVkXG4gIC8vIGRhdGEuXG4gIGlmICggIXB2dCApIHtcbiAgICBpZiAoICF0aGlzQ2FjaGUuZGF0YSApIHtcbiAgICAgIHRoaXNDYWNoZS5kYXRhID0ge307XG4gICAgfVxuXG4gICAgdGhpc0NhY2hlID0gdGhpc0NhY2hlLmRhdGE7XG4gIH1cblxuICBpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcbiAgICB0aGlzQ2FjaGVbIGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSBdID0gZGF0YTtcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBib3RoIGNvbnZlcnRlZC10by1jYW1lbCBhbmQgbm9uLWNvbnZlcnRlZCBkYXRhIHByb3BlcnR5IG5hbWVzXG4gIC8vIElmIGEgZGF0YSBwcm9wZXJ0eSB3YXMgc3BlY2lmaWVkXG4gIGlmICggdHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIgKSB7XG5cbiAgICAvLyBGaXJzdCBUcnkgdG8gZmluZCBhcy1pcyBwcm9wZXJ0eSBkYXRhXG4gICAgcmV0ID0gdGhpc0NhY2hlWyBuYW1lIF07XG5cbiAgICAvLyBUZXN0IGZvciBudWxsfHVuZGVmaW5lZCBwcm9wZXJ0eSBkYXRhXG4gICAgaWYgKCByZXQgPT0gbnVsbCApIHtcblxuICAgICAgLy8gVHJ5IHRvIGZpbmQgdGhlIGNhbWVsQ2FzZWQgcHJvcGVydHlcbiAgICAgIHJldCA9IHRoaXNDYWNoZVsgalF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApIF07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldCA9IHRoaXNDYWNoZTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSwgcHZ0ICkge1xuICBpZiAoICFqUXVlcnkuYWNjZXB0RGF0YSggZWxlbSApICkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0aGlzQ2FjaGUsIGksXG4gICAgaXNOb2RlID0gZWxlbS5ub2RlVHlwZSxcblxuICAgIC8vIFNlZSBqUXVlcnkuZGF0YSBmb3IgbW9yZSBpbmZvcm1hdGlvblxuICAgIGNhY2hlID0gaXNOb2RlID8galF1ZXJ5LmNhY2hlIDogZWxlbSxcbiAgICBpZCA9IGlzTm9kZSA/IGVsZW1bIGpRdWVyeS5leHBhbmRvIF0gOiBqUXVlcnkuZXhwYW5kbztcblxuICAvLyBJZiB0aGVyZSBpcyBhbHJlYWR5IG5vIGNhY2hlIGVudHJ5IGZvciB0aGlzIG9iamVjdCwgdGhlcmUgaXMgbm9cbiAgLy8gcHVycG9zZSBpbiBjb250aW51aW5nXG4gIGlmICggIWNhY2hlWyBpZCBdICkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICggbmFtZSApIHtcblxuICAgIHRoaXNDYWNoZSA9IHB2dCA/IGNhY2hlWyBpZCBdIDogY2FjaGVbIGlkIF0uZGF0YTtcblxuICAgIGlmICggdGhpc0NhY2hlICkge1xuXG4gICAgICAvLyBTdXBwb3J0IGFycmF5IG9yIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgbmFtZXMgZm9yIGRhdGEga2V5c1xuICAgICAgaWYgKCAhalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHtcblxuICAgICAgICAvLyB0cnkgdGhlIHN0cmluZyBhcyBhIGtleSBiZWZvcmUgYW55IG1hbmlwdWxhdGlvblxuICAgICAgICBpZiAoIG5hbWUgaW4gdGhpc0NhY2hlICkge1xuICAgICAgICAgIG5hbWUgPSBbIG5hbWUgXTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIC8vIHNwbGl0IHRoZSBjYW1lbCBjYXNlZCB2ZXJzaW9uIGJ5IHNwYWNlcyB1bmxlc3MgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0c1xuICAgICAgICAgIG5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICk7XG4gICAgICAgICAgaWYgKCBuYW1lIGluIHRoaXNDYWNoZSApIHtcbiAgICAgICAgICAgIG5hbWUgPSBbIG5hbWUgXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgXCJuYW1lXCIgaXMgYW4gYXJyYXkgb2Yga2V5cy4uLlxuICAgICAgICAvLyBXaGVuIGRhdGEgaXMgaW5pdGlhbGx5IGNyZWF0ZWQsIHZpYSAoXCJrZXlcIiwgXCJ2YWxcIikgc2lnbmF0dXJlLFxuICAgICAgICAvLyBrZXlzIHdpbGwgYmUgY29udmVydGVkIHRvIGNhbWVsQ2FzZS5cbiAgICAgICAgLy8gU2luY2UgdGhlcmUgaXMgbm8gd2F5IHRvIHRlbGwgX2hvd18gYSBrZXkgd2FzIGFkZGVkLCByZW1vdmVcbiAgICAgICAgLy8gYm90aCBwbGFpbiBrZXkgYW5kIGNhbWVsQ2FzZSBrZXkuICMxMjc4NlxuICAgICAgICAvLyBUaGlzIHdpbGwgb25seSBwZW5hbGl6ZSB0aGUgYXJyYXkgYXJndW1lbnQgcGF0aC5cbiAgICAgICAgbmFtZSA9IG5hbWUuY29uY2F0KCBqUXVlcnkubWFwKCBuYW1lLCBqUXVlcnkuY2FtZWxDYXNlICkgKTtcbiAgICAgIH1cblxuICAgICAgaSA9IG5hbWUubGVuZ3RoO1xuICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzQ2FjaGVbIG5hbWVbaV0gXTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBsZWZ0IGluIHRoZSBjYWNoZSwgd2Ugd2FudCB0byBjb250aW51ZVxuICAgICAgLy8gYW5kIGxldCB0aGUgY2FjaGUgb2JqZWN0IGl0c2VsZiBnZXQgZGVzdHJveWVkXG4gICAgICBpZiAoIHB2dCA/ICFpc0VtcHR5RGF0YU9iamVjdCh0aGlzQ2FjaGUpIDogIWpRdWVyeS5pc0VtcHR5T2JqZWN0KHRoaXNDYWNoZSkgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBTZWUgalF1ZXJ5LmRhdGEgZm9yIG1vcmUgaW5mb3JtYXRpb25cbiAgaWYgKCAhcHZ0ICkge1xuICAgIGRlbGV0ZSBjYWNoZVsgaWQgXS5kYXRhO1xuXG4gICAgLy8gRG9uJ3QgZGVzdHJveSB0aGUgcGFyZW50IGNhY2hlIHVubGVzcyB0aGUgaW50ZXJuYWwgZGF0YSBvYmplY3RcbiAgICAvLyBoYWQgYmVlbiB0aGUgb25seSB0aGluZyBsZWZ0IGluIGl0XG4gICAgaWYgKCAhaXNFbXB0eURhdGFPYmplY3QoIGNhY2hlWyBpZCBdICkgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgLy8gRGVzdHJveSB0aGUgY2FjaGVcbiAgaWYgKCBpc05vZGUgKSB7XG4gICAgalF1ZXJ5LmNsZWFuRGF0YSggWyBlbGVtIF0sIHRydWUgKTtcblxuICAvLyBVc2UgZGVsZXRlIHdoZW4gc3VwcG9ydGVkIGZvciBleHBhbmRvcyBvciBgY2FjaGVgIGlzIG5vdCBhIHdpbmRvdyBwZXIgaXNXaW5kb3cgKCMxMDA4MClcbiAgLyoganNoaW50IGVxZXFlcTogZmFsc2UgKi9cbiAgfSBlbHNlIGlmICggc3VwcG9ydC5kZWxldGVFeHBhbmRvIHx8IGNhY2hlICE9IGNhY2hlLndpbmRvdyApIHtcbiAgICAvKiBqc2hpbnQgZXFlcWVxOiB0cnVlICovXG4gICAgZGVsZXRlIGNhY2hlWyBpZCBdO1xuXG4gIC8vIFdoZW4gYWxsIGVsc2UgZmFpbHMsIG51bGxcbiAgfSBlbHNlIHtcbiAgICBjYWNoZVsgaWQgXSA9IG51bGw7XG4gIH1cbn1cblxualF1ZXJ5LmV4dGVuZCh7XG4gIGNhY2hlOiB7fSxcblxuICAvLyBUaGUgZm9sbG93aW5nIGVsZW1lbnRzIChzcGFjZS1zdWZmaXhlZCB0byBhdm9pZCBPYmplY3QucHJvdG90eXBlIGNvbGxpc2lvbnMpXG4gIC8vIHRocm93IHVuY2F0Y2hhYmxlIGV4Y2VwdGlvbnMgaWYgeW91IGF0dGVtcHQgdG8gc2V0IGV4cGFuZG8gcHJvcGVydGllc1xuICBub0RhdGE6IHtcbiAgICBcImFwcGxldCBcIjogdHJ1ZSxcbiAgICBcImVtYmVkIFwiOiB0cnVlLFxuICAgIC8vIC4uLmJ1dCBGbGFzaCBvYmplY3RzICh3aGljaCBoYXZlIHRoaXMgY2xhc3NpZCkgKmNhbiogaGFuZGxlIGV4cGFuZG9zXG4gICAgXCJvYmplY3QgXCI6IFwiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwXCJcbiAgfSxcblxuICBoYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICBlbGVtID0gZWxlbS5ub2RlVHlwZSA/IGpRdWVyeS5jYWNoZVsgZWxlbVtqUXVlcnkuZXhwYW5kb10gXSA6IGVsZW1bIGpRdWVyeS5leHBhbmRvIF07XG4gICAgcmV0dXJuICEhZWxlbSAmJiAhaXNFbXB0eURhdGFPYmplY3QoIGVsZW0gKTtcbiAgfSxcblxuICBkYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcbiAgICByZXR1cm4gaW50ZXJuYWxEYXRhKCBlbGVtLCBuYW1lLCBkYXRhICk7XG4gIH0sXG5cbiAgcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG4gICAgcmV0dXJuIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSApO1xuICB9LFxuXG4gIC8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgX2RhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkge1xuICAgIHJldHVybiBpbnRlcm5hbERhdGEoIGVsZW0sIG5hbWUsIGRhdGEsIHRydWUgKTtcbiAgfSxcblxuICBfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG4gICAgcmV0dXJuIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSwgdHJ1ZSApO1xuICB9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG4gIGRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuICAgIHZhciBpLCBuYW1lLCBkYXRhLFxuICAgICAgZWxlbSA9IHRoaXNbMF0sXG4gICAgICBhdHRycyA9IGVsZW0gJiYgZWxlbS5hdHRyaWJ1dGVzO1xuXG4gICAgLy8gU3BlY2lhbCBleHBlY3Rpb25zIG9mIC5kYXRhIGJhc2ljYWxseSB0aHdhcnQgalF1ZXJ5LmFjY2VzcyxcbiAgICAvLyBzbyBpbXBsZW1lbnQgdGhlIHJlbGV2YW50IGJlaGF2aW9yIG91cnNlbHZlc1xuXG4gICAgLy8gR2V0cyBhbGwgdmFsdWVzXG4gICAgaWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcbiAgICAgIGlmICggdGhpcy5sZW5ndGggKSB7XG4gICAgICAgIGRhdGEgPSBqUXVlcnkuZGF0YSggZWxlbSApO1xuXG4gICAgICAgIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAhalF1ZXJ5Ll9kYXRhKCBlbGVtLCBcInBhcnNlZEF0dHJzXCIgKSApIHtcbiAgICAgICAgICBpID0gYXR0cnMubGVuZ3RoO1xuICAgICAgICAgIHdoaWxlICggaS0tICkge1xuXG4gICAgICAgICAgICAvLyBTdXBwb3J0OiBJRTExK1xuICAgICAgICAgICAgLy8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpXG4gICAgICAgICAgICBpZiAoIGF0dHJzWyBpIF0gKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7XG4gICAgICAgICAgICAgIGlmICggbmFtZS5pbmRleE9mKCBcImRhdGEtXCIgKSA9PT0gMCApIHtcbiAgICAgICAgICAgICAgICBuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZS5zbGljZSg1KSApO1xuICAgICAgICAgICAgICAgIGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBqUXVlcnkuX2RhdGEoIGVsZW0sIFwicGFyc2VkQXR0cnNcIiwgdHJ1ZSApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIC8vIFNldHMgbXVsdGlwbGUgdmFsdWVzXG4gICAgaWYgKCB0eXBlb2Yga2V5ID09PSBcIm9iamVjdFwiICkge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgalF1ZXJ5LmRhdGEoIHRoaXMsIGtleSApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAxID9cblxuICAgICAgLy8gU2V0cyBvbmUgdmFsdWVcbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgalF1ZXJ5LmRhdGEoIHRoaXMsIGtleSwgdmFsdWUgKTtcbiAgICAgIH0pIDpcblxuICAgICAgLy8gR2V0cyBvbmUgdmFsdWVcbiAgICAgIC8vIFRyeSB0byBmZXRjaCBhbnkgaW50ZXJuYWxseSBzdG9yZWQgZGF0YSBmaXJzdFxuICAgICAgZWxlbSA/IGRhdGFBdHRyKCBlbGVtLCBrZXksIGpRdWVyeS5kYXRhKCBlbGVtLCBrZXkgKSApIDogdW5kZWZpbmVkO1xuICB9LFxuXG4gIHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGpRdWVyeS5yZW1vdmVEYXRhKCB0aGlzLCBrZXkgKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cblxualF1ZXJ5LmV4dGVuZCh7XG4gIHF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSwgZGF0YSApIHtcbiAgICB2YXIgcXVldWU7XG5cbiAgICBpZiAoIGVsZW0gKSB7XG4gICAgICB0eXBlID0gKCB0eXBlIHx8IFwiZnhcIiApICsgXCJxdWV1ZVwiO1xuICAgICAgcXVldWUgPSBqUXVlcnkuX2RhdGEoIGVsZW0sIHR5cGUgKTtcblxuICAgICAgLy8gU3BlZWQgdXAgZGVxdWV1ZSBieSBnZXR0aW5nIG91dCBxdWlja2x5IGlmIHRoaXMgaXMganVzdCBhIGxvb2t1cFxuICAgICAgaWYgKCBkYXRhICkge1xuICAgICAgICBpZiAoICFxdWV1ZSB8fCBqUXVlcnkuaXNBcnJheShkYXRhKSApIHtcbiAgICAgICAgICBxdWV1ZSA9IGpRdWVyeS5fZGF0YSggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheShkYXRhKSApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHF1ZXVlLnB1c2goIGRhdGEgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHF1ZXVlIHx8IFtdO1xuICAgIH1cbiAgfSxcblxuICBkZXF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcbiAgICB0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cbiAgICB2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIGVsZW0sIHR5cGUgKSxcbiAgICAgIHN0YXJ0TGVuZ3RoID0gcXVldWUubGVuZ3RoLFxuICAgICAgZm4gPSBxdWV1ZS5zaGlmdCgpLFxuICAgICAgaG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIHR5cGUgKSxcbiAgICAgIG5leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgalF1ZXJ5LmRlcXVldWUoIGVsZW0sIHR5cGUgKTtcbiAgICAgIH07XG5cbiAgICAvLyBJZiB0aGUgZnggcXVldWUgaXMgZGVxdWV1ZWQsIGFsd2F5cyByZW1vdmUgdGhlIHByb2dyZXNzIHNlbnRpbmVsXG4gICAgaWYgKCBmbiA9PT0gXCJpbnByb2dyZXNzXCIgKSB7XG4gICAgICBmbiA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICBzdGFydExlbmd0aC0tO1xuICAgIH1cblxuICAgIGlmICggZm4gKSB7XG5cbiAgICAgIC8vIEFkZCBhIHByb2dyZXNzIHNlbnRpbmVsIHRvIHByZXZlbnQgdGhlIGZ4IHF1ZXVlIGZyb20gYmVpbmdcbiAgICAgIC8vIGF1dG9tYXRpY2FsbHkgZGVxdWV1ZWRcbiAgICAgIGlmICggdHlwZSA9PT0gXCJmeFwiICkge1xuICAgICAgICBxdWV1ZS51bnNoaWZ0KCBcImlucHJvZ3Jlc3NcIiApO1xuICAgICAgfVxuXG4gICAgICAvLyBjbGVhciB1cCB0aGUgbGFzdCBxdWV1ZSBzdG9wIGZ1bmN0aW9uXG4gICAgICBkZWxldGUgaG9va3Muc3RvcDtcbiAgICAgIGZuLmNhbGwoIGVsZW0sIG5leHQsIGhvb2tzICk7XG4gICAgfVxuXG4gICAgaWYgKCAhc3RhcnRMZW5ndGggJiYgaG9va3MgKSB7XG4gICAgICBob29rcy5lbXB0eS5maXJlKCk7XG4gICAgfVxuICB9LFxuXG4gIC8vIG5vdCBpbnRlbmRlZCBmb3IgcHVibGljIGNvbnN1bXB0aW9uIC0gZ2VuZXJhdGVzIGEgcXVldWVIb29rcyBvYmplY3QsIG9yIHJldHVybnMgdGhlIGN1cnJlbnQgb25lXG4gIF9xdWV1ZUhvb2tzOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcbiAgICB2YXIga2V5ID0gdHlwZSArIFwicXVldWVIb29rc1wiO1xuICAgIHJldHVybiBqUXVlcnkuX2RhdGEoIGVsZW0sIGtleSApIHx8IGpRdWVyeS5fZGF0YSggZWxlbSwga2V5LCB7XG4gICAgICBlbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpIHtcbiAgICAgICAgalF1ZXJ5Ll9yZW1vdmVEYXRhKCBlbGVtLCB0eXBlICsgXCJxdWV1ZVwiICk7XG4gICAgICAgIGpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwga2V5ICk7XG4gICAgICB9KVxuICAgIH0pO1xuICB9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG4gIHF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcbiAgICB2YXIgc2V0dGVyID0gMjtcblxuICAgIGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG4gICAgICBkYXRhID0gdHlwZTtcbiAgICAgIHR5cGUgPSBcImZ4XCI7XG4gICAgICBzZXR0ZXItLTtcbiAgICB9XG5cbiAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggPCBzZXR0ZXIgKSB7XG4gICAgICByZXR1cm4galF1ZXJ5LnF1ZXVlKCB0aGlzWzBdLCB0eXBlICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGEgPT09IHVuZGVmaW5lZCA/XG4gICAgICB0aGlzIDpcbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBkYXRhICk7XG5cbiAgICAgICAgLy8gZW5zdXJlIGEgaG9va3MgZm9yIHRoaXMgcXVldWVcbiAgICAgICAgalF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7XG5cbiAgICAgICAgaWYgKCB0eXBlID09PSBcImZ4XCIgJiYgcXVldWVbMF0gIT09IFwiaW5wcm9ncmVzc1wiICkge1xuICAgICAgICAgIGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9LFxuICBkZXF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgalF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcbiAgICB9KTtcbiAgfSxcbiAgY2xlYXJRdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG4gICAgcmV0dXJuIHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuICB9LFxuICAvLyBHZXQgYSBwcm9taXNlIHJlc29sdmVkIHdoZW4gcXVldWVzIG9mIGEgY2VydGFpbiB0eXBlXG4gIC8vIGFyZSBlbXB0aWVkIChmeCBpcyB0aGUgdHlwZSBieSBkZWZhdWx0KVxuICBwcm9taXNlOiBmdW5jdGlvbiggdHlwZSwgb2JqICkge1xuICAgIHZhciB0bXAsXG4gICAgICBjb3VudCA9IDEsXG4gICAgICBkZWZlciA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuICAgICAgZWxlbWVudHMgPSB0aGlzLFxuICAgICAgaSA9IHRoaXMubGVuZ3RoLFxuICAgICAgcmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoICEoIC0tY291bnQgKSApIHtcbiAgICAgICAgICBkZWZlci5yZXNvbHZlV2l0aCggZWxlbWVudHMsIFsgZWxlbWVudHMgXSApO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgaWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgIG9iaiA9IHR5cGU7XG4gICAgICB0eXBlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cbiAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgIHRtcCA9IGpRdWVyeS5fZGF0YSggZWxlbWVudHNbIGkgXSwgdHlwZSArIFwicXVldWVIb29rc1wiICk7XG4gICAgICBpZiAoIHRtcCAmJiB0bXAuZW1wdHkgKSB7XG4gICAgICAgIGNvdW50Kys7XG4gICAgICAgIHRtcC5lbXB0eS5hZGQoIHJlc29sdmUgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZSgpO1xuICAgIHJldHVybiBkZWZlci5wcm9taXNlKCBvYmogKTtcbiAgfVxufSk7XG52YXIgcG51bSA9ICgvWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLykuc291cmNlO1xuXG52YXIgY3NzRXhwYW5kID0gWyBcIlRvcFwiLCBcIlJpZ2h0XCIsIFwiQm90dG9tXCIsIFwiTGVmdFwiIF07XG5cbnZhciBpc0hpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtLCBlbCApIHtcbiAgICAvLyBpc0hpZGRlbiBtaWdodCBiZSBjYWxsZWQgZnJvbSBqUXVlcnkjZmlsdGVyIGZ1bmN0aW9uO1xuICAgIC8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudFxuICAgIGVsZW0gPSBlbCB8fCBlbGVtO1xuICAgIHJldHVybiBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApID09PSBcIm5vbmVcIiB8fCAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcbiAgfTtcblxuXG5cbi8vIE11bHRpZnVuY3Rpb25hbCBtZXRob2QgdG8gZ2V0IGFuZCBzZXQgdmFsdWVzIG9mIGEgY29sbGVjdGlvblxuLy8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uXG52YXIgYWNjZXNzID0galF1ZXJ5LmFjY2VzcyA9IGZ1bmN0aW9uKCBlbGVtcywgZm4sIGtleSwgdmFsdWUsIGNoYWluYWJsZSwgZW1wdHlHZXQsIHJhdyApIHtcbiAgdmFyIGkgPSAwLFxuICAgIGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcbiAgICBidWxrID0ga2V5ID09IG51bGw7XG5cbiAgLy8gU2V0cyBtYW55IHZhbHVlc1xuICBpZiAoIGpRdWVyeS50eXBlKCBrZXkgKSA9PT0gXCJvYmplY3RcIiApIHtcbiAgICBjaGFpbmFibGUgPSB0cnVlO1xuICAgIGZvciAoIGkgaW4ga2V5ICkge1xuICAgICAgalF1ZXJ5LmFjY2VzcyggZWxlbXMsIGZuLCBpLCBrZXlbaV0sIHRydWUsIGVtcHR5R2V0LCByYXcgKTtcbiAgICB9XG5cbiAgLy8gU2V0cyBvbmUgdmFsdWVcbiAgfSBlbHNlIGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBjaGFpbmFibGUgPSB0cnVlO1xuXG4gICAgaWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG4gICAgICByYXcgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICggYnVsayApIHtcbiAgICAgIC8vIEJ1bGsgb3BlcmF0aW9ucyBydW4gYWdhaW5zdCB0aGUgZW50aXJlIHNldFxuICAgICAgaWYgKCByYXcgKSB7XG4gICAgICAgIGZuLmNhbGwoIGVsZW1zLCB2YWx1ZSApO1xuICAgICAgICBmbiA9IG51bGw7XG5cbiAgICAgIC8vIC4uLmV4Y2VwdCB3aGVuIGV4ZWN1dGluZyBmdW5jdGlvbiB2YWx1ZXNcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1bGsgPSBmbjtcbiAgICAgICAgZm4gPSBmdW5jdGlvbiggZWxlbSwga2V5LCB2YWx1ZSApIHtcbiAgICAgICAgICByZXR1cm4gYnVsay5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdmFsdWUgKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIGZuICkge1xuICAgICAgZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICAgIGZuKCBlbGVtc1tpXSwga2V5LCByYXcgPyB2YWx1ZSA6IHZhbHVlLmNhbGwoIGVsZW1zW2ldLCBpLCBmbiggZWxlbXNbaV0sIGtleSApICkgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY2hhaW5hYmxlID9cbiAgICBlbGVtcyA6XG5cbiAgICAvLyBHZXRzXG4gICAgYnVsayA/XG4gICAgICBmbi5jYWxsKCBlbGVtcyApIDpcbiAgICAgIGxlbmd0aCA/IGZuKCBlbGVtc1swXSwga2V5ICkgOiBlbXB0eUdldDtcbn07XG52YXIgcmNoZWNrYWJsZVR5cGUgPSAoL14oPzpjaGVja2JveHxyYWRpbykkL2kpO1xuXG5cblxuKGZ1bmN0aW9uKCkge1xuICAvLyBNaW5pZmllZDogdmFyIGEsYixjXG4gIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApLFxuICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcbiAgICBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAvLyBTZXR1cFxuICBkaXYuaW5uZXJIVE1MID0gXCIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz5cIjtcblxuICAvLyBJRSBzdHJpcHMgbGVhZGluZyB3aGl0ZXNwYWNlIHdoZW4gLmlubmVySFRNTCBpcyB1c2VkXG4gIHN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UgPSBkaXYuZmlyc3RDaGlsZC5ub2RlVHlwZSA9PT0gMztcblxuICAvLyBNYWtlIHN1cmUgdGhhdCB0Ym9keSBlbGVtZW50cyBhcmVuJ3QgYXV0b21hdGljYWxseSBpbnNlcnRlZFxuICAvLyBJRSB3aWxsIGluc2VydCB0aGVtIGludG8gZW1wdHkgdGFibGVzXG4gIHN1cHBvcnQudGJvZHkgPSAhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInRib2R5XCIgKS5sZW5ndGg7XG5cbiAgLy8gTWFrZSBzdXJlIHRoYXQgbGluayBlbGVtZW50cyBnZXQgc2VyaWFsaXplZCBjb3JyZWN0bHkgYnkgaW5uZXJIVE1MXG4gIC8vIFRoaXMgcmVxdWlyZXMgYSB3cmFwcGVyIGVsZW1lbnQgaW4gSUVcbiAgc3VwcG9ydC5odG1sU2VyaWFsaXplID0gISFkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwibGlua1wiICkubGVuZ3RoO1xuXG4gIC8vIE1ha2VzIHN1cmUgY2xvbmluZyBhbiBodG1sNSBlbGVtZW50IGRvZXMgbm90IGNhdXNlIHByb2JsZW1zXG4gIC8vIFdoZXJlIG91dGVySFRNTCBpcyB1bmRlZmluZWQsIHRoaXMgc3RpbGwgd29ya3NcbiAgc3VwcG9ydC5odG1sNUNsb25lID1cbiAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcIm5hdlwiICkuY2xvbmVOb2RlKCB0cnVlICkub3V0ZXJIVE1MICE9PSBcIjw6bmF2PjwvOm5hdj5cIjtcblxuICAvLyBDaGVjayBpZiBhIGRpc2Nvbm5lY3RlZCBjaGVja2JveCB3aWxsIHJldGFpbiBpdHMgY2hlY2tlZFxuICAvLyB2YWx1ZSBvZiB0cnVlIGFmdGVyIGFwcGVuZGVkIHRvIHRoZSBET00gKElFNi83KVxuICBpbnB1dC50eXBlID0gXCJjaGVja2JveFwiO1xuICBpbnB1dC5jaGVja2VkID0gdHJ1ZTtcbiAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGlucHV0ICk7XG4gIHN1cHBvcnQuYXBwZW5kQ2hlY2tlZCA9IGlucHV0LmNoZWNrZWQ7XG5cbiAgLy8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcbiAgLy8gU3VwcG9ydDogSUU2LUlFMTErXG4gIGRpdi5pbm5lckhUTUwgPSBcIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIjtcbiAgc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCA9ICEhZGl2LmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7XG5cbiAgLy8gIzExMjE3IC0gV2ViS2l0IGxvc2VzIGNoZWNrIHdoZW4gdGhlIG5hbWUgaXMgYWZ0ZXIgdGhlIGNoZWNrZWQgYXR0cmlidXRlXG4gIGZyYWdtZW50LmFwcGVuZENoaWxkKCBkaXYgKTtcbiAgZGl2LmlubmVySFRNTCA9IFwiPGlucHV0IHR5cGU9J3JhZGlvJyBjaGVja2VkPSdjaGVja2VkJyBuYW1lPSd0Jy8+XCI7XG5cbiAgLy8gU3VwcG9ydDogU2FmYXJpIDUuMSwgaU9TIDUuMSwgQW5kcm9pZCA0LngsIEFuZHJvaWQgMi4zXG4gIC8vIG9sZCBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHNcbiAgc3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkO1xuXG4gIC8vIFN1cHBvcnQ6IElFPDlcbiAgLy8gT3BlcmEgZG9lcyBub3QgY2xvbmUgZXZlbnRzIChhbmQgdHlwZW9mIGRpdi5hdHRhY2hFdmVudCA9PT0gdW5kZWZpbmVkKS5cbiAgLy8gSUU5LTEwIGNsb25lcyBldmVudHMgYm91bmQgdmlhIGF0dGFjaEV2ZW50LCBidXQgdGhleSBkb24ndCB0cmlnZ2VyIHdpdGggLmNsaWNrKClcbiAgc3VwcG9ydC5ub0Nsb25lRXZlbnQgPSB0cnVlO1xuICBpZiAoIGRpdi5hdHRhY2hFdmVudCApIHtcbiAgICBkaXYuYXR0YWNoRXZlbnQoIFwib25jbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgIHN1cHBvcnQubm9DbG9uZUV2ZW50ID0gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBkaXYuY2xvbmVOb2RlKCB0cnVlICkuY2xpY2soKTtcbiAgfVxuXG4gIC8vIEV4ZWN1dGUgdGhlIHRlc3Qgb25seSBpZiBub3QgYWxyZWFkeSBleGVjdXRlZCBpbiBhbm90aGVyIG1vZHVsZS5cbiAgaWYgKHN1cHBvcnQuZGVsZXRlRXhwYW5kbyA9PSBudWxsKSB7XG4gICAgLy8gU3VwcG9ydDogSUU8OVxuICAgIHN1cHBvcnQuZGVsZXRlRXhwYW5kbyA9IHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIGRlbGV0ZSBkaXYudGVzdDtcbiAgICB9IGNhdGNoKCBlICkge1xuICAgICAgc3VwcG9ydC5kZWxldGVFeHBhbmRvID0gZmFsc2U7XG4gICAgfVxuICB9XG59KSgpO1xuXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGksIGV2ZW50TmFtZSxcbiAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cbiAgLy8gU3VwcG9ydDogSUU8OSAobGFjayBzdWJtaXQvY2hhbmdlIGJ1YmJsZSksIEZpcmVmb3ggMjMrIChsYWNrIGZvY3VzaW4gZXZlbnQpXG4gIGZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIGNoYW5nZTogdHJ1ZSwgZm9jdXNpbjogdHJ1ZSB9KSB7XG4gICAgZXZlbnROYW1lID0gXCJvblwiICsgaTtcblxuICAgIGlmICggIShzdXBwb3J0WyBpICsgXCJCdWJibGVzXCIgXSA9IGV2ZW50TmFtZSBpbiB3aW5kb3cpICkge1xuICAgICAgLy8gQmV3YXJlIG9mIENTUCByZXN0cmljdGlvbnMgKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL1NlY3VyaXR5L0NTUClcbiAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoIGV2ZW50TmFtZSwgXCJ0XCIgKTtcbiAgICAgIHN1cHBvcnRbIGkgKyBcIkJ1YmJsZXNcIiBdID0gZGl2LmF0dHJpYnV0ZXNbIGV2ZW50TmFtZSBdLmV4cGFuZG8gPT09IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIE51bGwgZWxlbWVudHMgdG8gYXZvaWQgbGVha3MgaW4gSUUuXG4gIGRpdiA9IG51bGw7XG59KSgpO1xuXG5cbnZhciByZm9ybUVsZW1zID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLFxuICBya2V5RXZlbnQgPSAvXmtleS8sXG4gIHJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51KXxjbGljay8sXG4gIHJmb2N1c01vcnBoID0gL14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLFxuICBydHlwZW5hbWVzcGFjZSA9IC9eKFteLl0qKSg/OlxcLiguKyl8KSQvO1xuXG5mdW5jdGlvbiByZXR1cm5UcnVlKCkge1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc2FmZUFjdGl2ZUVsZW1lbnQoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gIH0gY2F0Y2ggKCBlcnIgKSB7IH1cbn1cblxuLypcbiAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGV2ZW50cyAtLSBub3QgcGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS5cbiAqIFByb3BzIHRvIERlYW4gRWR3YXJkcycgYWRkRXZlbnQgbGlicmFyeSBmb3IgbWFueSBvZiB0aGUgaWRlYXMuXG4gKi9cbmpRdWVyeS5ldmVudCA9IHtcblxuICBnbG9iYWw6IHt9LFxuXG4gIGFkZDogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBkYXRhLCBzZWxlY3RvciApIHtcbiAgICB2YXIgdG1wLCBldmVudHMsIHQsIGhhbmRsZU9iakluLFxuICAgICAgc3BlY2lhbCwgZXZlbnRIYW5kbGUsIGhhbmRsZU9iaixcbiAgICAgIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcbiAgICAgIGVsZW1EYXRhID0galF1ZXJ5Ll9kYXRhKCBlbGVtICk7XG5cbiAgICAvLyBEb24ndCBhdHRhY2ggZXZlbnRzIHRvIG5vRGF0YSBvciB0ZXh0L2NvbW1lbnQgbm9kZXMgKGJ1dCBhbGxvdyBwbGFpbiBvYmplY3RzKVxuICAgIGlmICggIWVsZW1EYXRhICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhbGxlciBjYW4gcGFzcyBpbiBhbiBvYmplY3Qgb2YgY3VzdG9tIGRhdGEgaW4gbGlldSBvZiB0aGUgaGFuZGxlclxuICAgIGlmICggaGFuZGxlci5oYW5kbGVyICkge1xuICAgICAgaGFuZGxlT2JqSW4gPSBoYW5kbGVyO1xuICAgICAgaGFuZGxlciA9IGhhbmRsZU9iakluLmhhbmRsZXI7XG4gICAgICBzZWxlY3RvciA9IGhhbmRsZU9iakluLnNlbGVjdG9yO1xuICAgIH1cblxuICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBoYW5kbGVyIGhhcyBhIHVuaXF1ZSBJRCwgdXNlZCB0byBmaW5kL3JlbW92ZSBpdCBsYXRlclxuICAgIGlmICggIWhhbmRsZXIuZ3VpZCApIHtcbiAgICAgIGhhbmRsZXIuZ3VpZCA9IGpRdWVyeS5ndWlkKys7XG4gICAgfVxuXG4gICAgLy8gSW5pdCB0aGUgZWxlbWVudCdzIGV2ZW50IHN0cnVjdHVyZSBhbmQgbWFpbiBoYW5kbGVyLCBpZiB0aGlzIGlzIHRoZSBmaXJzdFxuICAgIGlmICggIShldmVudHMgPSBlbGVtRGF0YS5ldmVudHMpICkge1xuICAgICAgZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307XG4gICAgfVxuICAgIGlmICggIShldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSkgKSB7XG4gICAgICBldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSA9IGZ1bmN0aW9uKCBlICkge1xuICAgICAgICAvLyBEaXNjYXJkIHRoZSBzZWNvbmQgZXZlbnQgb2YgYSBqUXVlcnkuZXZlbnQudHJpZ2dlcigpIGFuZFxuICAgICAgICAvLyB3aGVuIGFuIGV2ZW50IGlzIGNhbGxlZCBhZnRlciBhIHBhZ2UgaGFzIHVubG9hZGVkXG4gICAgICAgIHJldHVybiB0eXBlb2YgalF1ZXJ5ICE9PSBzdHJ1bmRlZmluZWQgJiYgKCFlIHx8IGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSkgP1xuICAgICAgICAgIGpRdWVyeS5ldmVudC5kaXNwYXRjaC5hcHBseSggZXZlbnRIYW5kbGUuZWxlbSwgYXJndW1lbnRzICkgOlxuICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgIH07XG4gICAgICAvLyBBZGQgZWxlbSBhcyBhIHByb3BlcnR5IG9mIHRoZSBoYW5kbGUgZm4gdG8gcHJldmVudCBhIG1lbW9yeSBsZWFrIHdpdGggSUUgbm9uLW5hdGl2ZSBldmVudHNcbiAgICAgIGV2ZW50SGFuZGxlLmVsZW0gPSBlbGVtO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2VcbiAgICB0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbIFwiXCIgXTtcbiAgICB0ID0gdHlwZXMubGVuZ3RoO1xuICAgIHdoaWxlICggdC0tICkge1xuICAgICAgdG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbdF0gKSB8fCBbXTtcbiAgICAgIHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsxXTtcbiAgICAgIG5hbWVzcGFjZXMgPSAoIHRtcFsyXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG4gICAgICAvLyBUaGVyZSAqbXVzdCogYmUgYSB0eXBlLCBubyBhdHRhY2hpbmcgbmFtZXNwYWNlLW9ubHkgaGFuZGxlcnNcbiAgICAgIGlmICggIXR5cGUgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGVcbiAgICAgIHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG4gICAgICAvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGVcbiAgICAgIHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblxuICAgICAgLy8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZVxuICAgICAgc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cbiAgICAgIC8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzXG4gICAgICBoYW5kbGVPYmogPSBqUXVlcnkuZXh0ZW5kKHtcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgb3JpZ1R5cGU6IG9yaWdUeXBlLFxuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBoYW5kbGVyOiBoYW5kbGVyLFxuICAgICAgICBndWlkOiBoYW5kbGVyLmd1aWQsXG4gICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvcixcbiAgICAgICAgbmVlZHNDb250ZXh0OiBzZWxlY3RvciAmJiBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3IgKSxcbiAgICAgICAgbmFtZXNwYWNlOiBuYW1lc3BhY2VzLmpvaW4oXCIuXCIpXG4gICAgICB9LCBoYW5kbGVPYmpJbiApO1xuXG4gICAgICAvLyBJbml0IHRoZSBldmVudCBoYW5kbGVyIHF1ZXVlIGlmIHdlJ3JlIHRoZSBmaXJzdFxuICAgICAgaWYgKCAhKGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0pICkge1xuICAgICAgICBoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdID0gW107XG4gICAgICAgIGhhbmRsZXJzLmRlbGVnYXRlQ291bnQgPSAwO1xuXG4gICAgICAgIC8vIE9ubHkgdXNlIGFkZEV2ZW50TGlzdGVuZXIvYXR0YWNoRXZlbnQgaWYgdGhlIHNwZWNpYWwgZXZlbnRzIGhhbmRsZXIgcmV0dXJucyBmYWxzZVxuICAgICAgICBpZiAoICFzcGVjaWFsLnNldHVwIHx8IHNwZWNpYWwuc2V0dXAuY2FsbCggZWxlbSwgZGF0YSwgbmFtZXNwYWNlcywgZXZlbnRIYW5kbGUgKSA9PT0gZmFsc2UgKSB7XG4gICAgICAgICAgLy8gQmluZCB0aGUgZ2xvYmFsIGV2ZW50IGhhbmRsZXIgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAgICBpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcbiAgICAgICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZXZlbnRIYW5kbGUsIGZhbHNlICk7XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKCBlbGVtLmF0dGFjaEV2ZW50ICkge1xuICAgICAgICAgICAgZWxlbS5hdHRhY2hFdmVudCggXCJvblwiICsgdHlwZSwgZXZlbnRIYW5kbGUgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCBzcGVjaWFsLmFkZCApIHtcbiAgICAgICAgc3BlY2lhbC5hZGQuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG5cbiAgICAgICAgaWYgKCAhaGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCApIHtcbiAgICAgICAgICBoYW5kbGVPYmouaGFuZGxlci5ndWlkID0gaGFuZGxlci5ndWlkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0byB0aGUgZWxlbWVudCdzIGhhbmRsZXIgbGlzdCwgZGVsZWdhdGVzIGluIGZyb250XG4gICAgICBpZiAoIHNlbGVjdG9yICkge1xuICAgICAgICBoYW5kbGVycy5zcGxpY2UoIGhhbmRsZXJzLmRlbGVnYXRlQ291bnQrKywgMCwgaGFuZGxlT2JqICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoYW5kbGVycy5wdXNoKCBoYW5kbGVPYmogKTtcbiAgICAgIH1cblxuICAgICAgLy8gS2VlcCB0cmFjayBvZiB3aGljaCBldmVudHMgaGF2ZSBldmVyIGJlZW4gdXNlZCwgZm9yIGV2ZW50IG9wdGltaXphdGlvblxuICAgICAgalF1ZXJ5LmV2ZW50Lmdsb2JhbFsgdHlwZSBdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBOdWxsaWZ5IGVsZW0gdG8gcHJldmVudCBtZW1vcnkgbGVha3MgaW4gSUVcbiAgICBlbGVtID0gbnVsbDtcbiAgfSxcblxuICAvLyBEZXRhY2ggYW4gZXZlbnQgb3Igc2V0IG9mIGV2ZW50cyBmcm9tIGFuIGVsZW1lbnRcbiAgcmVtb3ZlOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIHNlbGVjdG9yLCBtYXBwZWRUeXBlcyApIHtcbiAgICB2YXIgaiwgaGFuZGxlT2JqLCB0bXAsXG4gICAgICBvcmlnQ291bnQsIHQsIGV2ZW50cyxcbiAgICAgIHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLFxuICAgICAgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG4gICAgICBlbGVtRGF0YSA9IGpRdWVyeS5oYXNEYXRhKCBlbGVtICkgJiYgalF1ZXJ5Ll9kYXRhKCBlbGVtICk7XG5cbiAgICBpZiAoICFlbGVtRGF0YSB8fCAhKGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cykgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuICAgIHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuICAgIHQgPSB0eXBlcy5sZW5ndGg7XG4gICAgd2hpbGUgKCB0LS0gKSB7XG4gICAgICB0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuICAgICAgdHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuICAgICAgbmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cbiAgICAgIC8vIFVuYmluZCBhbGwgZXZlbnRzIChvbiB0aGlzIG5hbWVzcGFjZSwgaWYgcHJvdmlkZWQpIGZvciB0aGUgZWxlbWVudFxuICAgICAgaWYgKCAhdHlwZSApIHtcbiAgICAgICAgZm9yICggdHlwZSBpbiBldmVudHMgKSB7XG4gICAgICAgICAgalF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSArIHR5cGVzWyB0IF0sIGhhbmRsZXIsIHNlbGVjdG9yLCB0cnVlICk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuICAgICAgdHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuICAgICAgaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSB8fCBbXTtcbiAgICAgIHRtcCA9IHRtcFsyXSAmJiBuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikgKyBcIihcXFxcLnwkKVwiICk7XG5cbiAgICAgIC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcbiAgICAgIG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG4gICAgICB3aGlsZSAoIGotLSApIHtcbiAgICAgICAgaGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuICAgICAgICBpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG4gICAgICAgICAgKCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcbiAgICAgICAgICAoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG4gICAgICAgICAgKCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuICAgICAgICAgIGhhbmRsZXJzLnNwbGljZSggaiwgMSApO1xuXG4gICAgICAgICAgaWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LS07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG4gICAgICAgICAgICBzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdFxuICAgICAgLy8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG4gICAgICBpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkge1xuICAgICAgICBpZiAoICFzcGVjaWFsLnRlYXJkb3duIHx8IHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuICAgICAgICAgIGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgZXZlbnRzWyB0eXBlIF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWRcbiAgICBpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHtcbiAgICAgIGRlbGV0ZSBlbGVtRGF0YS5oYW5kbGU7XG5cbiAgICAgIC8vIHJlbW92ZURhdGEgYWxzbyBjaGVja3MgZm9yIGVtcHRpbmVzcyBhbmQgY2xlYXJzIHRoZSBleHBhbmRvIGlmIGVtcHR5XG4gICAgICAvLyBzbyB1c2UgaXQgaW5zdGVhZCBvZiBkZWxldGVcbiAgICAgIGpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwgXCJldmVudHNcIiApO1xuICAgIH1cbiAgfSxcblxuICB0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQsIGRhdGEsIGVsZW0sIG9ubHlIYW5kbGVycyApIHtcbiAgICB2YXIgaGFuZGxlLCBvbnR5cGUsIGN1cixcbiAgICAgIGJ1YmJsZVR5cGUsIHNwZWNpYWwsIHRtcCwgaSxcbiAgICAgIGV2ZW50UGF0aCA9IFsgZWxlbSB8fCBkb2N1bWVudCBdLFxuICAgICAgdHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcbiAgICAgIG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdChcIi5cIikgOiBbXTtcblxuICAgIGN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXG4gICAgLy8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcbiAgICBpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3dcbiAgICBpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCB0eXBlLmluZGV4T2YoXCIuXCIpID49IDAgKSB7XG4gICAgICAvLyBOYW1lc3BhY2VkIHRyaWdnZXI7IGNyZWF0ZSBhIHJlZ2V4cCB0byBtYXRjaCBldmVudCB0eXBlIGluIGhhbmRsZSgpXG4gICAgICBuYW1lc3BhY2VzID0gdHlwZS5zcGxpdChcIi5cIik7XG4gICAgICB0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpO1xuICAgICAgbmFtZXNwYWNlcy5zb3J0KCk7XG4gICAgfVxuICAgIG9udHlwZSA9IHR5cGUuaW5kZXhPZihcIjpcIikgPCAwICYmIFwib25cIiArIHR5cGU7XG5cbiAgICAvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcbiAgICBldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cbiAgICAgIGV2ZW50IDpcbiAgICAgIG5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gXCJvYmplY3RcIiAmJiBldmVudCApO1xuXG4gICAgLy8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuICAgIGV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzO1xuICAgIGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbihcIi5cIik7XG4gICAgZXZlbnQubmFtZXNwYWNlX3JlID0gZXZlbnQubmFtZXNwYWNlID9cbiAgICAgIG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKSArIFwiKFxcXFwufCQpXCIgKSA6XG4gICAgICBudWxsO1xuXG4gICAgLy8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkXG4gICAgZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgIGlmICggIWV2ZW50LnRhcmdldCApIHtcbiAgICAgIGV2ZW50LnRhcmdldCA9IGVsZW07XG4gICAgfVxuXG4gICAgLy8gQ2xvbmUgYW55IGluY29taW5nIGRhdGEgYW5kIHByZXBlbmQgdGhlIGV2ZW50LCBjcmVhdGluZyB0aGUgaGFuZGxlciBhcmcgbGlzdFxuICAgIGRhdGEgPSBkYXRhID09IG51bGwgP1xuICAgICAgWyBldmVudCBdIDpcbiAgICAgIGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEsIFsgZXZlbnQgXSApO1xuXG4gICAgLy8gQWxsb3cgc3BlY2lhbCBldmVudHMgdG8gZHJhdyBvdXRzaWRlIHRoZSBsaW5lc1xuICAgIHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuICAgIGlmICggIW9ubHlIYW5kbGVycyAmJiBzcGVjaWFsLnRyaWdnZXIgJiYgc3BlY2lhbC50cmlnZ2VyLmFwcGx5KCBlbGVtLCBkYXRhICkgPT09IGZhbHNlICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSBldmVudCBwcm9wYWdhdGlvbiBwYXRoIGluIGFkdmFuY2UsIHBlciBXM0MgZXZlbnRzIHNwZWMgKCM5OTUxKVxuICAgIC8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpXG4gICAgaWYgKCAhb25seUhhbmRsZXJzICYmICFzcGVjaWFsLm5vQnViYmxlICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuICAgICAgYnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG4gICAgICBpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuICAgICAgICBjdXIgPSBjdXIucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICAgIGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcbiAgICAgICAgZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuICAgICAgICB0bXAgPSBjdXI7XG4gICAgICB9XG5cbiAgICAgIC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuICAgICAgaWYgKCB0bXAgPT09IChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpICkge1xuICAgICAgICBldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuICAgIGkgPSAwO1xuICAgIHdoaWxlICggKGN1ciA9IGV2ZW50UGF0aFtpKytdKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuICAgICAgZXZlbnQudHlwZSA9IGkgPiAxID9cbiAgICAgICAgYnViYmxlVHlwZSA6XG4gICAgICAgIHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuICAgICAgLy8galF1ZXJ5IGhhbmRsZXJcbiAgICAgIGhhbmRsZSA9ICggalF1ZXJ5Ll9kYXRhKCBjdXIsIFwiZXZlbnRzXCIgKSB8fCB7fSApWyBldmVudC50eXBlIF0gJiYgalF1ZXJ5Ll9kYXRhKCBjdXIsIFwiaGFuZGxlXCIgKTtcbiAgICAgIGlmICggaGFuZGxlICkge1xuICAgICAgICBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuICAgICAgfVxuXG4gICAgICAvLyBOYXRpdmUgaGFuZGxlclxuICAgICAgaGFuZGxlID0gb250eXBlICYmIGN1clsgb250eXBlIF07XG4gICAgICBpZiAoIGhhbmRsZSAmJiBoYW5kbGUuYXBwbHkgJiYgalF1ZXJ5LmFjY2VwdERhdGEoIGN1ciApICkge1xuICAgICAgICBldmVudC5yZXN1bHQgPSBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuICAgICAgICBpZiAoIGV2ZW50LnJlc3VsdCA9PT0gZmFsc2UgKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBldmVudC50eXBlID0gdHlwZTtcblxuICAgIC8vIElmIG5vYm9keSBwcmV2ZW50ZWQgdGhlIGRlZmF1bHQgYWN0aW9uLCBkbyBpdCBub3dcbiAgICBpZiAoICFvbmx5SGFuZGxlcnMgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuXG4gICAgICBpZiAoICghc3BlY2lhbC5fZGVmYXVsdCB8fCBzcGVjaWFsLl9kZWZhdWx0LmFwcGx5KCBldmVudFBhdGgucG9wKCksIGRhdGEgKSA9PT0gZmFsc2UpICYmXG4gICAgICAgIGpRdWVyeS5hY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cbiAgICAgICAgLy8gQ2FsbCBhIG5hdGl2ZSBET00gbWV0aG9kIG9uIHRoZSB0YXJnZXQgd2l0aCB0aGUgc2FtZSBuYW1lIG5hbWUgYXMgdGhlIGV2ZW50LlxuICAgICAgICAvLyBDYW4ndCB1c2UgYW4gLmlzRnVuY3Rpb24oKSBjaGVjayBoZXJlIGJlY2F1c2UgSUU2LzcgZmFpbHMgdGhhdCB0ZXN0LlxuICAgICAgICAvLyBEb24ndCBkbyBkZWZhdWx0IGFjdGlvbnMgb24gd2luZG93LCB0aGF0J3Mgd2hlcmUgZ2xvYmFsIHZhcmlhYmxlcyBiZSAoIzYxNzApXG4gICAgICAgIGlmICggb250eXBlICYmIGVsZW1bIHR5cGUgXSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG5cbiAgICAgICAgICAvLyBEb24ndCByZS10cmlnZ2VyIGFuIG9uRk9PIGV2ZW50IHdoZW4gd2UgY2FsbCBpdHMgRk9PKCkgbWV0aG9kXG4gICAgICAgICAgdG1wID0gZWxlbVsgb250eXBlIF07XG5cbiAgICAgICAgICBpZiAoIHRtcCApIHtcbiAgICAgICAgICAgIGVsZW1bIG9udHlwZSBdID0gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBQcmV2ZW50IHJlLXRyaWdnZXJpbmcgb2YgdGhlIHNhbWUgZXZlbnQsIHNpbmNlIHdlIGFscmVhZHkgYnViYmxlZCBpdCBhYm92ZVxuICAgICAgICAgIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB0eXBlO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBlbGVtWyB0eXBlIF0oKTtcbiAgICAgICAgICB9IGNhdGNoICggZSApIHtcbiAgICAgICAgICAgIC8vIElFPDkgZGllcyBvbiBmb2N1cy9ibHVyIHRvIGhpZGRlbiBlbGVtZW50ICgjMTQ4NiwjMTI1MTgpXG4gICAgICAgICAgICAvLyBvbmx5IHJlcHJvZHVjaWJsZSBvbiB3aW5YUCBJRTggbmF0aXZlLCBub3QgSUU5IGluIElFOCBtb2RlXG4gICAgICAgICAgfVxuICAgICAgICAgIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoIHRtcCApIHtcbiAgICAgICAgICAgIGVsZW1bIG9udHlwZSBdID0gdG1wO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBldmVudC5yZXN1bHQ7XG4gIH0sXG5cbiAgZGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuICAgIC8vIE1ha2UgYSB3cml0YWJsZSBqUXVlcnkuRXZlbnQgZnJvbSB0aGUgbmF0aXZlIGV2ZW50IG9iamVjdFxuICAgIGV2ZW50ID0galF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKTtcblxuICAgIHZhciBpLCByZXQsIGhhbmRsZU9iaiwgbWF0Y2hlZCwgaixcbiAgICAgIGhhbmRsZXJRdWV1ZSA9IFtdLFxuICAgICAgYXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLFxuICAgICAgaGFuZGxlcnMgPSAoIGpRdWVyeS5fZGF0YSggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcbiAgICAgIHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG4gICAgLy8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcbiAgICBhcmdzWzBdID0gZXZlbnQ7XG4gICAgZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzO1xuXG4gICAgLy8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuICAgIGlmICggc3BlY2lhbC5wcmVEaXNwYXRjaCAmJiBzcGVjaWFsLnByZURpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSBoYW5kbGVyc1xuICAgIGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblxuICAgIC8vIFJ1biBkZWxlZ2F0ZXMgZmlyc3Q7IHRoZXkgbWF5IHdhbnQgdG8gc3RvcCBwcm9wYWdhdGlvbiBiZW5lYXRoIHVzXG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKCAobWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0pICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblxuICAgICAgaiA9IDA7XG4gICAgICB3aGlsZSAoIChoYW5kbGVPYmogPSBtYXRjaGVkLmhhbmRsZXJzWyBqKysgXSkgJiYgIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cbiAgICAgICAgLy8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvclxuICAgICAgICAvLyAyKSBoYXZlIG5hbWVzcGFjZShzKSBhIHN1YnNldCBvciBlcXVhbCB0byB0aG9zZSBpbiB0aGUgYm91bmQgZXZlbnQgKGJvdGggY2FuIGhhdmUgbm8gbmFtZXNwYWNlKS5cbiAgICAgICAgaWYgKCAhZXZlbnQubmFtZXNwYWNlX3JlIHx8IGV2ZW50Lm5hbWVzcGFjZV9yZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7XG5cbiAgICAgICAgICBldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG4gICAgICAgICAgZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG4gICAgICAgICAgcmV0ID0gKCAoalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9KS5oYW5kbGUgfHwgaGFuZGxlT2JqLmhhbmRsZXIgKVxuICAgICAgICAgICAgICAuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApO1xuXG4gICAgICAgICAgaWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgIGlmICggKGV2ZW50LnJlc3VsdCA9IHJldCkgPT09IGZhbHNlICkge1xuICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG4gICAgaWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHtcbiAgICAgIHNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGV2ZW50LnJlc3VsdDtcbiAgfSxcblxuICBoYW5kbGVyczogZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVycyApIHtcbiAgICB2YXIgc2VsLCBoYW5kbGVPYmosIG1hdGNoZXMsIGksXG4gICAgICBoYW5kbGVyUXVldWUgPSBbXSxcbiAgICAgIGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuICAgICAgY3VyID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgLy8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuICAgIC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICgjMTMxODApXG4gICAgLy8gQXZvaWQgbm9uLWxlZnQtY2xpY2sgYnViYmxpbmcgaW4gRmlyZWZveCAoIzM4NjEpXG4gICAgaWYgKCBkZWxlZ2F0ZUNvdW50ICYmIGN1ci5ub2RlVHlwZSAmJiAoIWV2ZW50LmJ1dHRvbiB8fCBldmVudC50eXBlICE9PSBcImNsaWNrXCIpICkge1xuXG4gICAgICAvKiBqc2hpbnQgZXFlcWVxOiBmYWxzZSAqL1xuICAgICAgZm9yICggOyBjdXIgIT0gdGhpczsgY3VyID0gY3VyLnBhcmVudE5vZGUgfHwgdGhpcyApIHtcbiAgICAgICAgLyoganNoaW50IGVxZXFlcTogdHJ1ZSAqL1xuXG4gICAgICAgIC8vIERvbid0IGNoZWNrIG5vbi1lbGVtZW50cyAoIzEzMjA4KVxuICAgICAgICAvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcbiAgICAgICAgaWYgKCBjdXIubm9kZVR5cGUgPT09IDEgJiYgKGN1ci5kaXNhYmxlZCAhPT0gdHJ1ZSB8fCBldmVudC50eXBlICE9PSBcImNsaWNrXCIpICkge1xuICAgICAgICAgIG1hdGNoZXMgPSBbXTtcbiAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcbiAgICAgICAgICAgIGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cbiAgICAgICAgICAgIC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG4gICAgICAgICAgICBzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuICAgICAgICAgICAgaWYgKCBtYXRjaGVzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICBtYXRjaGVzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuICAgICAgICAgICAgICAgIGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID49IDAgOlxuICAgICAgICAgICAgICAgIGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIG1hdGNoZXNbIHNlbCBdICkge1xuICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goIGhhbmRsZU9iaiApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIG1hdGNoZXMubGVuZ3RoICkge1xuICAgICAgICAgICAgaGFuZGxlclF1ZXVlLnB1c2goeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBtYXRjaGVzIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnNcbiAgICBpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7XG4gICAgICBoYW5kbGVyUXVldWUucHVzaCh7IGVsZW06IHRoaXMsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBoYW5kbGVyUXVldWU7XG4gIH0sXG5cbiAgZml4OiBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgaWYgKCBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSApIHtcbiAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSB3cml0YWJsZSBjb3B5IG9mIHRoZSBldmVudCBvYmplY3QgYW5kIG5vcm1hbGl6ZSBzb21lIHByb3BlcnRpZXNcbiAgICB2YXIgaSwgcHJvcCwgY29weSxcbiAgICAgIHR5cGUgPSBldmVudC50eXBlLFxuICAgICAgb3JpZ2luYWxFdmVudCA9IGV2ZW50LFxuICAgICAgZml4SG9vayA9IHRoaXMuZml4SG9va3NbIHR5cGUgXTtcblxuICAgIGlmICggIWZpeEhvb2sgKSB7XG4gICAgICB0aGlzLmZpeEhvb2tzWyB0eXBlIF0gPSBmaXhIb29rID1cbiAgICAgICAgcm1vdXNlRXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5tb3VzZUhvb2tzIDpcbiAgICAgICAgcmtleUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMua2V5SG9va3MgOlxuICAgICAgICB7fTtcbiAgICB9XG4gICAgY29weSA9IGZpeEhvb2sucHJvcHMgPyB0aGlzLnByb3BzLmNvbmNhdCggZml4SG9vay5wcm9wcyApIDogdGhpcy5wcm9wcztcblxuICAgIGV2ZW50ID0gbmV3IGpRdWVyeS5FdmVudCggb3JpZ2luYWxFdmVudCApO1xuXG4gICAgaSA9IGNvcHkubGVuZ3RoO1xuICAgIHdoaWxlICggaS0tICkge1xuICAgICAgcHJvcCA9IGNvcHlbIGkgXTtcbiAgICAgIGV2ZW50WyBwcm9wIF0gPSBvcmlnaW5hbEV2ZW50WyBwcm9wIF07XG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydDogSUU8OVxuICAgIC8vIEZpeCB0YXJnZXQgcHJvcGVydHkgKCMxOTI1KVxuICAgIGlmICggIWV2ZW50LnRhcmdldCApIHtcbiAgICAgIGV2ZW50LnRhcmdldCA9IG9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudCB8fCBkb2N1bWVudDtcbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0OiBDaHJvbWUgMjMrLCBTYWZhcmk/XG4gICAgLy8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0MylcbiAgICBpZiAoIGV2ZW50LnRhcmdldC5ub2RlVHlwZSA9PT0gMyApIHtcbiAgICAgIGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xuICAgIH1cblxuICAgIC8vIFN1cHBvcnQ6IElFPDlcbiAgICAvLyBGb3IgbW91c2Uva2V5IGV2ZW50cywgbWV0YUtleT09ZmFsc2UgaWYgaXQncyB1bmRlZmluZWQgKCMzMzY4LCAjMTEzMjgpXG4gICAgZXZlbnQubWV0YUtleSA9ICEhZXZlbnQubWV0YUtleTtcblxuICAgIHJldHVybiBmaXhIb29rLmZpbHRlciA/IGZpeEhvb2suZmlsdGVyKCBldmVudCwgb3JpZ2luYWxFdmVudCApIDogZXZlbnQ7XG4gIH0sXG5cbiAgLy8gSW5jbHVkZXMgc29tZSBldmVudCBwcm9wcyBzaGFyZWQgYnkgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnRcbiAgcHJvcHM6IFwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLFxuXG4gIGZpeEhvb2tzOiB7fSxcblxuICBrZXlIb29rczoge1xuICAgIHByb3BzOiBcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksXG4gICAgZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXG4gICAgICAvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcbiAgICAgIGlmICggZXZlbnQud2hpY2ggPT0gbnVsbCApIHtcbiAgICAgICAgZXZlbnQud2hpY2ggPSBvcmlnaW5hbC5jaGFyQ29kZSAhPSBudWxsID8gb3JpZ2luYWwuY2hhckNvZGUgOiBvcmlnaW5hbC5rZXlDb2RlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxuICB9LFxuXG4gIG1vdXNlSG9va3M6IHtcbiAgICBwcm9wczogXCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksXG4gICAgZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuICAgICAgdmFyIGJvZHksIGV2ZW50RG9jLCBkb2MsXG4gICAgICAgIGJ1dHRvbiA9IG9yaWdpbmFsLmJ1dHRvbixcbiAgICAgICAgZnJvbUVsZW1lbnQgPSBvcmlnaW5hbC5mcm9tRWxlbWVudDtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHBhZ2VYL1kgaWYgbWlzc2luZyBhbmQgY2xpZW50WC9ZIGF2YWlsYWJsZVxuICAgICAgaWYgKCBldmVudC5wYWdlWCA9PSBudWxsICYmIG9yaWdpbmFsLmNsaWVudFggIT0gbnVsbCApIHtcbiAgICAgICAgZXZlbnREb2MgPSBldmVudC50YXJnZXQub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudDtcbiAgICAgICAgZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICBib2R5ID0gZXZlbnREb2MuYm9keTtcblxuICAgICAgICBldmVudC5wYWdlWCA9IG9yaWdpbmFsLmNsaWVudFggKyAoIGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwICkgLSAoIGRvYyAmJiBkb2MuY2xpZW50TGVmdCB8fCBib2R5ICYmIGJvZHkuY2xpZW50TGVmdCB8fCAwICk7XG4gICAgICAgIGV2ZW50LnBhZ2VZID0gb3JpZ2luYWwuY2xpZW50WSArICggZG9jICYmIGRvYy5zY3JvbGxUb3AgIHx8IGJvZHkgJiYgYm9keS5zY3JvbGxUb3AgIHx8IDAgKSAtICggZG9jICYmIGRvYy5jbGllbnRUb3AgIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgIHx8IDAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHJlbGF0ZWRUYXJnZXQsIGlmIG5lY2Vzc2FyeVxuICAgICAgaWYgKCAhZXZlbnQucmVsYXRlZFRhcmdldCAmJiBmcm9tRWxlbWVudCApIHtcbiAgICAgICAgZXZlbnQucmVsYXRlZFRhcmdldCA9IGZyb21FbGVtZW50ID09PSBldmVudC50YXJnZXQgPyBvcmlnaW5hbC50b0VsZW1lbnQgOiBmcm9tRWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuICAgICAgLy8gTm90ZTogYnV0dG9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyBkb24ndCB1c2UgaXRcbiAgICAgIGlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICBldmVudC53aGljaCA9ICggYnV0dG9uICYgMSA/IDEgOiAoIGJ1dHRvbiAmIDIgPyAzIDogKCBidXR0b24gJiA0ID8gMiA6IDAgKSApICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG4gIH0sXG5cbiAgc3BlY2lhbDoge1xuICAgIGxvYWQ6IHtcbiAgICAgIC8vIFByZXZlbnQgdHJpZ2dlcmVkIGltYWdlLmxvYWQgZXZlbnRzIGZyb20gYnViYmxpbmcgdG8gd2luZG93LmxvYWRcbiAgICAgIG5vQnViYmxlOiB0cnVlXG4gICAgfSxcbiAgICBmb2N1czoge1xuICAgICAgLy8gRmlyZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0XG4gICAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9IGNhdGNoICggZSApIHtcbiAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFPDlcbiAgICAgICAgICAgIC8vIElmIHdlIGVycm9yIG9uIGZvY3VzIHRvIGhpZGRlbiBlbGVtZW50ICgjMTQ4NiwgIzEyNTE4KSxcbiAgICAgICAgICAgIC8vIGxldCAudHJpZ2dlcigpIHJ1biB0aGUgaGFuZGxlcnNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNpblwiXG4gICAgfSxcbiAgICBibHVyOiB7XG4gICAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCB0aGlzID09PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuYmx1ciApIHtcbiAgICAgICAgICB0aGlzLmJsdXIoKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNvdXRcIlxuICAgIH0sXG4gICAgY2xpY2s6IHtcbiAgICAgIC8vIEZvciBjaGVja2JveCwgZmlyZSBuYXRpdmUgZXZlbnQgc28gY2hlY2tlZCBzdGF0ZSB3aWxsIGJlIHJpZ2h0XG4gICAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCBqUXVlcnkubm9kZU5hbWUoIHRoaXMsIFwiaW5wdXRcIiApICYmIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgKSB7XG4gICAgICAgICAgdGhpcy5jbGljaygpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy8gRm9yIGNyb3NzLWJyb3dzZXIgY29uc2lzdGVuY3ksIGRvbid0IGZpcmUgbmF0aXZlIC5jbGljaygpIG9uIGxpbmtzXG4gICAgICBfZGVmYXVsdDogZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICByZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBldmVudC50YXJnZXQsIFwiYVwiICk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJlZm9yZXVubG9hZDoge1xuICAgICAgcG9zdERpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cbiAgICAgICAgLy8gU3VwcG9ydDogRmlyZWZveCAyMCtcbiAgICAgICAgLy8gRmlyZWZveCBkb2Vzbid0IGFsZXJ0IGlmIHRoZSByZXR1cm5WYWx1ZSBmaWVsZCBpcyBub3Qgc2V0LlxuICAgICAgICBpZiAoIGV2ZW50LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQgKSB7XG4gICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZSA9IGV2ZW50LnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBzaW11bGF0ZTogZnVuY3Rpb24oIHR5cGUsIGVsZW0sIGV2ZW50LCBidWJibGUgKSB7XG4gICAgLy8gUGlnZ3liYWNrIG9uIGEgZG9ub3IgZXZlbnQgdG8gc2ltdWxhdGUgYSBkaWZmZXJlbnQgb25lLlxuICAgIC8vIEZha2Ugb3JpZ2luYWxFdmVudCB0byBhdm9pZCBkb25vcidzIHN0b3BQcm9wYWdhdGlvbiwgYnV0IGlmIHRoZVxuICAgIC8vIHNpbXVsYXRlZCBldmVudCBwcmV2ZW50cyBkZWZhdWx0IHRoZW4gd2UgZG8gdGhlIHNhbWUgb24gdGhlIGRvbm9yLlxuICAgIHZhciBlID0galF1ZXJ5LmV4dGVuZChcbiAgICAgIG5ldyBqUXVlcnkuRXZlbnQoKSxcbiAgICAgIGV2ZW50LFxuICAgICAge1xuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBpc1NpbXVsYXRlZDogdHJ1ZSxcbiAgICAgICAgb3JpZ2luYWxFdmVudDoge31cbiAgICAgIH1cbiAgICApO1xuICAgIGlmICggYnViYmxlICkge1xuICAgICAgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoIGUsIG51bGwsIGVsZW0gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgalF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmNhbGwoIGVsZW0sIGUgKTtcbiAgICB9XG4gICAgaWYgKCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cbn07XG5cbmpRdWVyeS5yZW1vdmVFdmVudCA9IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIgP1xuICBmdW5jdGlvbiggZWxlbSwgdHlwZSwgaGFuZGxlICkge1xuICAgIGlmICggZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkge1xuICAgICAgZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUsIGZhbHNlICk7XG4gICAgfVxuICB9IDpcbiAgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcbiAgICB2YXIgbmFtZSA9IFwib25cIiArIHR5cGU7XG5cbiAgICBpZiAoIGVsZW0uZGV0YWNoRXZlbnQgKSB7XG5cbiAgICAgIC8vICM4NTQ1LCAjNzA1NCwgcHJldmVudGluZyBtZW1vcnkgbGVha3MgZm9yIGN1c3RvbSBldmVudHMgaW4gSUU2LThcbiAgICAgIC8vIGRldGFjaEV2ZW50IG5lZWRlZCBwcm9wZXJ0eSBvbiBlbGVtZW50LCBieSBuYW1lIG9mIHRoYXQgZXZlbnQsIHRvIHByb3Blcmx5IGV4cG9zZSBpdCB0byBHQ1xuICAgICAgaWYgKCB0eXBlb2YgZWxlbVsgbmFtZSBdID09PSBzdHJ1bmRlZmluZWQgKSB7XG4gICAgICAgIGVsZW1bIG5hbWUgXSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGVsZW0uZGV0YWNoRXZlbnQoIG5hbWUsIGhhbmRsZSApO1xuICAgIH1cbiAgfTtcblxualF1ZXJ5LkV2ZW50ID0gZnVuY3Rpb24oIHNyYywgcHJvcHMgKSB7XG4gIC8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCB0aGUgJ25ldycga2V5d29yZFxuICBpZiAoICEodGhpcyBpbnN0YW5jZW9mIGpRdWVyeS5FdmVudCkgKSB7XG4gICAgcmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoIHNyYywgcHJvcHMgKTtcbiAgfVxuXG4gIC8vIEV2ZW50IG9iamVjdFxuICBpZiAoIHNyYyAmJiBzcmMudHlwZSApIHtcbiAgICB0aGlzLm9yaWdpbmFsRXZlbnQgPSBzcmM7XG4gICAgdGhpcy50eXBlID0gc3JjLnR5cGU7XG5cbiAgICAvLyBFdmVudHMgYnViYmxpbmcgdXAgdGhlIGRvY3VtZW50IG1heSBoYXZlIGJlZW4gbWFya2VkIGFzIHByZXZlbnRlZFxuICAgIC8vIGJ5IGEgaGFuZGxlciBsb3dlciBkb3duIHRoZSB0cmVlOyByZWZsZWN0IHRoZSBjb3JyZWN0IHZhbHVlLlxuICAgIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gc3JjLmRlZmF1bHRQcmV2ZW50ZWQgfHxcbiAgICAgICAgc3JjLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAvLyBTdXBwb3J0OiBJRSA8IDksIEFuZHJvaWQgPCA0LjBcbiAgICAgICAgc3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG4gICAgICByZXR1cm5UcnVlIDpcbiAgICAgIHJldHVybkZhbHNlO1xuXG4gIC8vIEV2ZW50IHR5cGVcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnR5cGUgPSBzcmM7XG4gIH1cblxuICAvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuICBpZiAoIHByb3BzICkge1xuICAgIGpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7XG4gIH1cblxuICAvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZVxuICB0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTtcblxuICAvLyBNYXJrIGl0IGFzIGZpeGVkXG4gIHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbmpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7XG4gIGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG4gIGlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcbiAgaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXG4gIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuICAgIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcbiAgICBpZiAoICFlICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIHByZXZlbnREZWZhdWx0IGV4aXN0cywgcnVuIGl0IG9uIHRoZSBvcmlnaW5hbCBldmVudFxuICAgIGlmICggZS5wcmV2ZW50RGVmYXVsdCApIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIFN1cHBvcnQ6IElFXG4gICAgLy8gT3RoZXJ3aXNlIHNldCB0aGUgcmV0dXJuVmFsdWUgcHJvcGVydHkgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRvIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICB9XG4gIH0sXG4gIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cbiAgICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcbiAgICBpZiAoICFlICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBJZiBzdG9wUHJvcGFnYXRpb24gZXhpc3RzLCBydW4gaXQgb24gdGhlIG9yaWdpbmFsIGV2ZW50XG4gICAgaWYgKCBlLnN0b3BQcm9wYWdhdGlvbiApIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydDogSUVcbiAgICAvLyBTZXQgdGhlIGNhbmNlbEJ1YmJsZSBwcm9wZXJ0eSBvZiB0aGUgb3JpZ2luYWwgZXZlbnQgdG8gdHJ1ZVxuICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgfSxcbiAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuICAgIHRoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG4gICAgaWYgKCBlICYmIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uICkge1xuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbiAgICB0aGlzLnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG59O1xuXG4vLyBDcmVhdGUgbW91c2VlbnRlci9sZWF2ZSBldmVudHMgdXNpbmcgbW91c2VvdmVyL291dCBhbmQgZXZlbnQtdGltZSBjaGVja3NcbmpRdWVyeS5lYWNoKHtcbiAgbW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIixcbiAgbW91c2VsZWF2ZTogXCJtb3VzZW91dFwiLFxuICBwb2ludGVyZW50ZXI6IFwicG9pbnRlcm92ZXJcIixcbiAgcG9pbnRlcmxlYXZlOiBcInBvaW50ZXJvdXRcIlxufSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcbiAgalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIG9yaWcgXSA9IHtcbiAgICBkZWxlZ2F0ZVR5cGU6IGZpeCxcbiAgICBiaW5kVHlwZTogZml4LFxuXG4gICAgaGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICB2YXIgcmV0LFxuICAgICAgICB0YXJnZXQgPSB0aGlzLFxuICAgICAgICByZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldCxcbiAgICAgICAgaGFuZGxlT2JqID0gZXZlbnQuaGFuZGxlT2JqO1xuXG4gICAgICAvLyBGb3IgbW91c2VudGVyL2xlYXZlIGNhbGwgdGhlIGhhbmRsZXIgaWYgcmVsYXRlZCBpcyBvdXRzaWRlIHRoZSB0YXJnZXQuXG4gICAgICAvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuICAgICAgaWYgKCAhcmVsYXRlZCB8fCAocmVsYXRlZCAhPT0gdGFyZ2V0ICYmICFqUXVlcnkuY29udGFpbnMoIHRhcmdldCwgcmVsYXRlZCApKSApIHtcbiAgICAgICAgZXZlbnQudHlwZSA9IGhhbmRsZU9iai5vcmlnVHlwZTtcbiAgICAgICAgcmV0ID0gaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuICAgICAgICBldmVudC50eXBlID0gZml4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gIH07XG59KTtcblxuLy8gSUUgc3VibWl0IGRlbGVnYXRpb25cbmlmICggIXN1cHBvcnQuc3VibWl0QnViYmxlcyApIHtcblxuICBqUXVlcnkuZXZlbnQuc3BlY2lhbC5zdWJtaXQgPSB7XG4gICAgc2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gT25seSBuZWVkIHRoaXMgZm9yIGRlbGVnYXRlZCBmb3JtIHN1Ym1pdCBldmVudHNcbiAgICAgIGlmICggalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImZvcm1cIiApICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIExhenktYWRkIGEgc3VibWl0IGhhbmRsZXIgd2hlbiBhIGRlc2NlbmRhbnQgZm9ybSBtYXkgcG90ZW50aWFsbHkgYmUgc3VibWl0dGVkXG4gICAgICBqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCBcImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdFwiLCBmdW5jdGlvbiggZSApIHtcbiAgICAgICAgLy8gTm9kZSBuYW1lIGNoZWNrIGF2b2lkcyBhIFZNTC1yZWxhdGVkIGNyYXNoIGluIElFICgjOTgwNylcbiAgICAgICAgdmFyIGVsZW0gPSBlLnRhcmdldCxcbiAgICAgICAgICBmb3JtID0galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSB8fCBqUXVlcnkubm9kZU5hbWUoIGVsZW0sIFwiYnV0dG9uXCIgKSA/IGVsZW0uZm9ybSA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCBmb3JtICYmICFqUXVlcnkuX2RhdGEoIGZvcm0sIFwic3VibWl0QnViYmxlc1wiICkgKSB7XG4gICAgICAgICAgalF1ZXJ5LmV2ZW50LmFkZCggZm9ybSwgXCJzdWJtaXQuX3N1Ym1pdFwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgICAgICBldmVudC5fc3VibWl0X2J1YmJsZSA9IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgalF1ZXJ5Ll9kYXRhKCBmb3JtLCBcInN1Ym1pdEJ1YmJsZXNcIiwgdHJ1ZSApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIHJldHVybiB1bmRlZmluZWQgc2luY2Ugd2UgZG9uJ3QgbmVlZCBhbiBldmVudCBsaXN0ZW5lclxuICAgIH0sXG5cbiAgICBwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgIC8vIElmIGZvcm0gd2FzIHN1Ym1pdHRlZCBieSB0aGUgdXNlciwgYnViYmxlIHRoZSBldmVudCB1cCB0aGUgdHJlZVxuICAgICAgaWYgKCBldmVudC5fc3VibWl0X2J1YmJsZSApIHtcbiAgICAgICAgZGVsZXRlIGV2ZW50Ll9zdWJtaXRfYnViYmxlO1xuICAgICAgICBpZiAoIHRoaXMucGFyZW50Tm9kZSAmJiAhZXZlbnQuaXNUcmlnZ2VyICkge1xuICAgICAgICAgIGpRdWVyeS5ldmVudC5zaW11bGF0ZSggXCJzdWJtaXRcIiwgdGhpcy5wYXJlbnROb2RlLCBldmVudCwgdHJ1ZSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHRlYXJkb3duOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIE9ubHkgbmVlZCB0aGlzIGZvciBkZWxlZ2F0ZWQgZm9ybSBzdWJtaXQgZXZlbnRzXG4gICAgICBpZiAoIGpRdWVyeS5ub2RlTmFtZSggdGhpcywgXCJmb3JtXCIgKSApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgZGVsZWdhdGVkIGhhbmRsZXJzOyBjbGVhbkRhdGEgZXZlbnR1YWxseSByZWFwcyBzdWJtaXQgaGFuZGxlcnMgYXR0YWNoZWQgYWJvdmVcbiAgICAgIGpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsIFwiLl9zdWJtaXRcIiApO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gSUUgY2hhbmdlIGRlbGVnYXRpb24gYW5kIGNoZWNrYm94L3JhZGlvIGZpeFxuaWYgKCAhc3VwcG9ydC5jaGFuZ2VCdWJibGVzICkge1xuXG4gIGpRdWVyeS5ldmVudC5zcGVjaWFsLmNoYW5nZSA9IHtcblxuICAgIHNldHVwOiBmdW5jdGlvbigpIHtcblxuICAgICAgaWYgKCByZm9ybUVsZW1zLnRlc3QoIHRoaXMubm9kZU5hbWUgKSApIHtcbiAgICAgICAgLy8gSUUgZG9lc24ndCBmaXJlIGNoYW5nZSBvbiBhIGNoZWNrL3JhZGlvIHVudGlsIGJsdXI7IHRyaWdnZXIgaXQgb24gY2xpY2tcbiAgICAgICAgLy8gYWZ0ZXIgYSBwcm9wZXJ0eWNoYW5nZS4gRWF0IHRoZSBibHVyLWNoYW5nZSBpbiBzcGVjaWFsLmNoYW5nZS5oYW5kbGUuXG4gICAgICAgIC8vIFRoaXMgc3RpbGwgZmlyZXMgb25jaGFuZ2UgYSBzZWNvbmQgdGltZSBmb3IgY2hlY2svcmFkaW8gYWZ0ZXIgYmx1ci5cbiAgICAgICAgaWYgKCB0aGlzLnR5cGUgPT09IFwiY2hlY2tib3hcIiB8fCB0aGlzLnR5cGUgPT09IFwicmFkaW9cIiApIHtcbiAgICAgICAgICBqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCBcInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2VcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgaWYgKCBldmVudC5vcmlnaW5hbEV2ZW50LnByb3BlcnR5TmFtZSA9PT0gXCJjaGVja2VkXCIgKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2p1c3RfY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgXCJjbGljay5fY2hhbmdlXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgICAgICAgIGlmICggdGhpcy5fanVzdF9jaGFuZ2VkICYmICFldmVudC5pc1RyaWdnZXIgKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2p1c3RfY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWxsb3cgdHJpZ2dlcmVkLCBzaW11bGF0ZWQgY2hhbmdlIGV2ZW50cyAoIzExNTAwKVxuICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBcImNoYW5nZVwiLCB0aGlzLCBldmVudCwgdHJ1ZSApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIERlbGVnYXRlZCBldmVudDsgbGF6eS1hZGQgYSBjaGFuZ2UgaGFuZGxlciBvbiBkZXNjZW5kYW50IGlucHV0c1xuICAgICAgalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgXCJiZWZvcmVhY3RpdmF0ZS5fY2hhbmdlXCIsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgICB2YXIgZWxlbSA9IGUudGFyZ2V0O1xuXG4gICAgICAgIGlmICggcmZvcm1FbGVtcy50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiYgIWpRdWVyeS5fZGF0YSggZWxlbSwgXCJjaGFuZ2VCdWJibGVzXCIgKSApIHtcbiAgICAgICAgICBqUXVlcnkuZXZlbnQuYWRkKCBlbGVtLCBcImNoYW5nZS5fY2hhbmdlXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgICAgICAgIGlmICggdGhpcy5wYXJlbnROb2RlICYmICFldmVudC5pc1NpbXVsYXRlZCAmJiAhZXZlbnQuaXNUcmlnZ2VyICkge1xuICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIFwiY2hhbmdlXCIsIHRoaXMucGFyZW50Tm9kZSwgZXZlbnQsIHRydWUgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBqUXVlcnkuX2RhdGEoIGVsZW0sIFwiY2hhbmdlQnViYmxlc1wiLCB0cnVlICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBoYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgIHZhciBlbGVtID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAvLyBTd2FsbG93IG5hdGl2ZSBjaGFuZ2UgZXZlbnRzIGZyb20gY2hlY2tib3gvcmFkaW8sIHdlIGFscmVhZHkgdHJpZ2dlcmVkIHRoZW0gYWJvdmVcbiAgICAgIGlmICggdGhpcyAhPT0gZWxlbSB8fCBldmVudC5pc1NpbXVsYXRlZCB8fCBldmVudC5pc1RyaWdnZXIgfHwgKGVsZW0udHlwZSAhPT0gXCJyYWRpb1wiICYmIGVsZW0udHlwZSAhPT0gXCJjaGVja2JveFwiKSApIHtcbiAgICAgICAgcmV0dXJuIGV2ZW50LmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdGVhcmRvd246IGZ1bmN0aW9uKCkge1xuICAgICAgalF1ZXJ5LmV2ZW50LnJlbW92ZSggdGhpcywgXCIuX2NoYW5nZVwiICk7XG5cbiAgICAgIHJldHVybiAhcmZvcm1FbGVtcy50ZXN0KCB0aGlzLm5vZGVOYW1lICk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBDcmVhdGUgXCJidWJibGluZ1wiIGZvY3VzIGFuZCBibHVyIGV2ZW50c1xuaWYgKCAhc3VwcG9ydC5mb2N1c2luQnViYmxlcyApIHtcbiAgalF1ZXJ5LmVhY2goeyBmb2N1czogXCJmb2N1c2luXCIsIGJsdXI6IFwiZm9jdXNvdXRcIiB9LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXG4gICAgLy8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXRcbiAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgICAgalF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSwgdHJ1ZSApO1xuICAgICAgfTtcblxuICAgIGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcbiAgICAgIHNldHVwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuICAgICAgICAgIGF0dGFjaGVzID0galF1ZXJ5Ll9kYXRhKCBkb2MsIGZpeCApO1xuXG4gICAgICAgIGlmICggIWF0dGFjaGVzICkge1xuICAgICAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG4gICAgICAgIH1cbiAgICAgICAgalF1ZXJ5Ll9kYXRhKCBkb2MsIGZpeCwgKCBhdHRhY2hlcyB8fCAwICkgKyAxICk7XG4gICAgICB9LFxuICAgICAgdGVhcmRvd246IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsXG4gICAgICAgICAgYXR0YWNoZXMgPSBqUXVlcnkuX2RhdGEoIGRvYywgZml4ICkgLSAxO1xuXG4gICAgICAgIGlmICggIWF0dGFjaGVzICkge1xuICAgICAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG4gICAgICAgICAgalF1ZXJ5Ll9yZW1vdmVEYXRhKCBkb2MsIGZpeCApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGpRdWVyeS5fZGF0YSggZG9jLCBmaXgsIGF0dGFjaGVzICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbn1cblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cbiAgb246IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAvKklOVEVSTkFMKi8gb25lICkge1xuICAgIHZhciB0eXBlLCBvcmlnRm47XG5cbiAgICAvLyBUeXBlcyBjYW4gYmUgYSBtYXAgb2YgdHlwZXMvaGFuZGxlcnNcbiAgICBpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcbiAgICAgIC8vICggdHlwZXMtT2JqZWN0LCBzZWxlY3RvciwgZGF0YSApXG4gICAgICBpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgLy8gKCB0eXBlcy1PYmplY3QsIGRhdGEgKVxuICAgICAgICBkYXRhID0gZGF0YSB8fCBzZWxlY3RvcjtcbiAgICAgICAgc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBmb3IgKCB0eXBlIGluIHR5cGVzICkge1xuICAgICAgICB0aGlzLm9uKCB0eXBlLCBzZWxlY3RvciwgZGF0YSwgdHlwZXNbIHR5cGUgXSwgb25lICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBpZiAoIGRhdGEgPT0gbnVsbCAmJiBmbiA9PSBudWxsICkge1xuICAgICAgLy8gKCB0eXBlcywgZm4gKVxuICAgICAgZm4gPSBzZWxlY3RvcjtcbiAgICAgIGRhdGEgPSBzZWxlY3RvciA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKCBmbiA9PSBudWxsICkge1xuICAgICAgaWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgICAgIC8vICggdHlwZXMsIHNlbGVjdG9yLCBmbiApXG4gICAgICAgIGZuID0gZGF0YTtcbiAgICAgICAgZGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vICggdHlwZXMsIGRhdGEsIGZuIClcbiAgICAgICAgZm4gPSBkYXRhO1xuICAgICAgICBkYXRhID0gc2VsZWN0b3I7XG4gICAgICAgIHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIGZuID09PSBmYWxzZSApIHtcbiAgICAgIGZuID0gcmV0dXJuRmFsc2U7XG4gICAgfSBlbHNlIGlmICggIWZuICkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKCBvbmUgPT09IDEgKSB7XG4gICAgICBvcmlnRm4gPSBmbjtcbiAgICAgIGZuID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm9cbiAgICAgICAgalF1ZXJ5KCkub2ZmKCBldmVudCApO1xuICAgICAgICByZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgIH07XG4gICAgICAvLyBVc2Ugc2FtZSBndWlkIHNvIGNhbGxlciBjYW4gcmVtb3ZlIHVzaW5nIG9yaWdGblxuICAgICAgZm4uZ3VpZCA9IG9yaWdGbi5ndWlkIHx8ICggb3JpZ0ZuLmd1aWQgPSBqUXVlcnkuZ3VpZCsrICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgdHlwZXMsIGZuLCBkYXRhLCBzZWxlY3RvciApO1xuICAgIH0pO1xuICB9LFxuICBvbmU6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuICAgIHJldHVybiB0aGlzLm9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAxICk7XG4gIH0sXG4gIG9mZjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZm4gKSB7XG4gICAgdmFyIGhhbmRsZU9iaiwgdHlwZTtcbiAgICBpZiAoIHR5cGVzICYmIHR5cGVzLnByZXZlbnREZWZhdWx0ICYmIHR5cGVzLmhhbmRsZU9iaiApIHtcbiAgICAgIC8vICggZXZlbnQgKSAgZGlzcGF0Y2hlZCBqUXVlcnkuRXZlbnRcbiAgICAgIGhhbmRsZU9iaiA9IHR5cGVzLmhhbmRsZU9iajtcbiAgICAgIGpRdWVyeSggdHlwZXMuZGVsZWdhdGVUYXJnZXQgKS5vZmYoXG4gICAgICAgIGhhbmRsZU9iai5uYW1lc3BhY2UgPyBoYW5kbGVPYmoub3JpZ1R5cGUgKyBcIi5cIiArIGhhbmRsZU9iai5uYW1lc3BhY2UgOiBoYW5kbGVPYmoub3JpZ1R5cGUsXG4gICAgICAgIGhhbmRsZU9iai5zZWxlY3RvcixcbiAgICAgICAgaGFuZGxlT2JqLmhhbmRsZXJcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG4gICAgICAvLyAoIHR5cGVzLW9iamVjdCBbLCBzZWxlY3Rvcl0gKVxuICAgICAgZm9yICggdHlwZSBpbiB0eXBlcyApIHtcbiAgICAgICAgdGhpcy5vZmYoIHR5cGUsIHNlbGVjdG9yLCB0eXBlc1sgdHlwZSBdICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKCBzZWxlY3RvciA9PT0gZmFsc2UgfHwgdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgKSB7XG4gICAgICAvLyAoIHR5cGVzIFssIGZuXSApXG4gICAgICBmbiA9IHNlbGVjdG9yO1xuICAgICAgc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICggZm4gPT09IGZhbHNlICkge1xuICAgICAgZm4gPSByZXR1cm5GYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsIHR5cGVzLCBmbiwgc2VsZWN0b3IgKTtcbiAgICB9KTtcbiAgfSxcblxuICB0cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIHRoaXMgKTtcbiAgICB9KTtcbiAgfSxcbiAgdHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuICAgIHZhciBlbGVtID0gdGhpc1swXTtcbiAgICBpZiAoIGVsZW0gKSB7XG4gICAgICByZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIGVsZW0sIHRydWUgKTtcbiAgICB9XG4gIH1cbn0pO1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZVNhZmVGcmFnbWVudCggZG9jdW1lbnQgKSB7XG4gIHZhciBsaXN0ID0gbm9kZU5hbWVzLnNwbGl0KCBcInxcIiApLFxuICAgIHNhZmVGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gIGlmICggc2FmZUZyYWcuY3JlYXRlRWxlbWVudCApIHtcbiAgICB3aGlsZSAoIGxpc3QubGVuZ3RoICkge1xuICAgICAgc2FmZUZyYWcuY3JlYXRlRWxlbWVudChcbiAgICAgICAgbGlzdC5wb3AoKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNhZmVGcmFnO1xufVxuXG52YXIgbm9kZU5hbWVzID0gXCJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfFwiICtcbiAgICBcImhlYWRlcnxoZ3JvdXB8bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHByb2dyZXNzfHNlY3Rpb258c3VtbWFyeXx0aW1lfHZpZGVvXCIsXG4gIHJpbmxpbmVqUXVlcnkgPSAvIGpRdWVyeVxcZCs9XCIoPzpudWxsfFxcZCspXCIvZyxcbiAgcm5vc2hpbWNhY2hlID0gbmV3IFJlZ0V4cChcIjwoPzpcIiArIG5vZGVOYW1lcyArIFwiKVtcXFxccy8+XVwiLCBcImlcIiksXG4gIHJsZWFkaW5nV2hpdGVzcGFjZSA9IC9eXFxzKy8sXG4gIHJ4aHRtbFRhZyA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxcbiAgcnRhZ05hbWUgPSAvPChbXFx3Ol0rKS8sXG4gIHJ0Ym9keSA9IC88dGJvZHkvaSxcbiAgcmh0bWwgPSAvPHwmIz9cXHcrOy8sXG4gIHJub0lubmVyaHRtbCA9IC88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksXG4gIC8vIGNoZWNrZWQ9XCJjaGVja2VkXCIgb3IgY2hlY2tlZFxuICByY2hlY2tlZCA9IC9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksXG4gIHJzY3JpcHRUeXBlID0gL14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxcbiAgcnNjcmlwdFR5cGVNYXNrZWQgPSAvXnRydWVcXC8oLiopLyxcbiAgcmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLFxuXG4gIC8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG4gIHdyYXBNYXAgPSB7XG4gICAgb3B0aW9uOiBbIDEsIFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLCBcIjwvc2VsZWN0PlwiIF0sXG4gICAgbGVnZW5kOiBbIDEsIFwiPGZpZWxkc2V0PlwiLCBcIjwvZmllbGRzZXQ+XCIgXSxcbiAgICBhcmVhOiBbIDEsIFwiPG1hcD5cIiwgXCI8L21hcD5cIiBdLFxuICAgIHBhcmFtOiBbIDEsIFwiPG9iamVjdD5cIiwgXCI8L29iamVjdD5cIiBdLFxuICAgIHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcbiAgICB0cjogWyAyLCBcIjx0YWJsZT48dGJvZHk+XCIsIFwiPC90Ym9keT48L3RhYmxlPlwiIF0sXG4gICAgY29sOiBbIDIsIFwiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD5cIiwgXCI8L2NvbGdyb3VwPjwvdGFibGU+XCIgXSxcbiAgICB0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cbiAgICAvLyBJRTYtOCBjYW4ndCBzZXJpYWxpemUgbGluaywgc2NyaXB0LCBzdHlsZSwgb3IgYW55IGh0bWw1IChOb1Njb3BlKSB0YWdzLFxuICAgIC8vIHVubGVzcyB3cmFwcGVkIGluIGEgZGl2IHdpdGggbm9uLWJyZWFraW5nIGNoYXJhY3RlcnMgaW4gZnJvbnQgb2YgaXQuXG4gICAgX2RlZmF1bHQ6IHN1cHBvcnQuaHRtbFNlcmlhbGl6ZSA/IFsgMCwgXCJcIiwgXCJcIiBdIDogWyAxLCBcIlg8ZGl2PlwiLCBcIjwvZGl2PlwiICBdXG4gIH0sXG4gIHNhZmVGcmFnbWVudCA9IGNyZWF0ZVNhZmVGcmFnbWVudCggZG9jdW1lbnQgKSxcbiAgZnJhZ21lbnREaXYgPSBzYWZlRnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgKTtcblxud3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uO1xud3JhcE1hcC50Ym9keSA9IHdyYXBNYXAudGZvb3QgPSB3cmFwTWFwLmNvbGdyb3VwID0gd3JhcE1hcC5jYXB0aW9uID0gd3JhcE1hcC50aGVhZDtcbndyYXBNYXAudGggPSB3cmFwTWFwLnRkO1xuXG5mdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcbiAgdmFyIGVsZW1zLCBlbGVtLFxuICAgIGkgPSAwLFxuICAgIGZvdW5kID0gdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IHN0cnVuZGVmaW5lZCA/IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyB8fCBcIipcIiApIDpcbiAgICAgIHR5cGVvZiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgIT09IHN0cnVuZGVmaW5lZCA/IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnIHx8IFwiKlwiICkgOlxuICAgICAgdW5kZWZpbmVkO1xuXG4gIGlmICggIWZvdW5kICkge1xuICAgIGZvciAoIGZvdW5kID0gW10sIGVsZW1zID0gY29udGV4dC5jaGlsZE5vZGVzIHx8IGNvbnRleHQ7IChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcbiAgICAgIGlmICggIXRhZyB8fCBqUXVlcnkubm9kZU5hbWUoIGVsZW0sIHRhZyApICkge1xuICAgICAgICBmb3VuZC5wdXNoKCBlbGVtICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBqUXVlcnkubWVyZ2UoIGZvdW5kLCBnZXRBbGwoIGVsZW0sIHRhZyApICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhZyA9PT0gdW5kZWZpbmVkIHx8IHRhZyAmJiBqUXVlcnkubm9kZU5hbWUoIGNvbnRleHQsIHRhZyApID9cbiAgICBqUXVlcnkubWVyZ2UoIFsgY29udGV4dCBdLCBmb3VuZCApIDpcbiAgICBmb3VuZDtcbn1cblxuLy8gVXNlZCBpbiBidWlsZEZyYWdtZW50LCBmaXhlcyB0aGUgZGVmYXVsdENoZWNrZWQgcHJvcGVydHlcbmZ1bmN0aW9uIGZpeERlZmF1bHRDaGVja2VkKCBlbGVtICkge1xuICBpZiAoIHJjaGVja2FibGVUeXBlLnRlc3QoIGVsZW0udHlwZSApICkge1xuICAgIGVsZW0uZGVmYXVsdENoZWNrZWQgPSBlbGVtLmNoZWNrZWQ7XG4gIH1cbn1cblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gTWFuaXB1bGF0aW5nIHRhYmxlcyByZXF1aXJlcyBhIHRib2R5XG5mdW5jdGlvbiBtYW5pcHVsYXRpb25UYXJnZXQoIGVsZW0sIGNvbnRlbnQgKSB7XG4gIHJldHVybiBqUXVlcnkubm9kZU5hbWUoIGVsZW0sIFwidGFibGVcIiApICYmXG4gICAgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZW50Lm5vZGVUeXBlICE9PSAxMSA/IGNvbnRlbnQgOiBjb250ZW50LmZpcnN0Q2hpbGQsIFwidHJcIiApID9cblxuICAgIGVsZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXSB8fFxuICAgICAgZWxlbS5hcHBlbmRDaGlsZCggZWxlbS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSApIDpcbiAgICBlbGVtO1xufVxuXG4vLyBSZXBsYWNlL3Jlc3RvcmUgdGhlIHR5cGUgYXR0cmlidXRlIG9mIHNjcmlwdCBlbGVtZW50cyBmb3Igc2FmZSBET00gbWFuaXB1bGF0aW9uXG5mdW5jdGlvbiBkaXNhYmxlU2NyaXB0KCBlbGVtICkge1xuICBlbGVtLnR5cGUgPSAoalF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgXCJ0eXBlXCIgKSAhPT0gbnVsbCkgKyBcIi9cIiArIGVsZW0udHlwZTtcbiAgcmV0dXJuIGVsZW07XG59XG5mdW5jdGlvbiByZXN0b3JlU2NyaXB0KCBlbGVtICkge1xuICB2YXIgbWF0Y2ggPSByc2NyaXB0VHlwZU1hc2tlZC5leGVjKCBlbGVtLnR5cGUgKTtcbiAgaWYgKCBtYXRjaCApIHtcbiAgICBlbGVtLnR5cGUgPSBtYXRjaFsxXTtcbiAgfSBlbHNlIHtcbiAgICBlbGVtLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIik7XG4gIH1cbiAgcmV0dXJuIGVsZW07XG59XG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuZnVuY3Rpb24gc2V0R2xvYmFsRXZhbCggZWxlbXMsIHJlZkVsZW1lbnRzICkge1xuICB2YXIgZWxlbSxcbiAgICBpID0gMDtcbiAgZm9yICggOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG4gICAgalF1ZXJ5Ll9kYXRhKCBlbGVtLCBcImdsb2JhbEV2YWxcIiwgIXJlZkVsZW1lbnRzIHx8IGpRdWVyeS5fZGF0YSggcmVmRWxlbWVudHNbaV0sIFwiZ2xvYmFsRXZhbFwiICkgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbG9uZUNvcHlFdmVudCggc3JjLCBkZXN0ICkge1xuXG4gIGlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSB8fCAhalF1ZXJ5Lmhhc0RhdGEoIHNyYyApICkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0eXBlLCBpLCBsLFxuICAgIG9sZERhdGEgPSBqUXVlcnkuX2RhdGEoIHNyYyApLFxuICAgIGN1ckRhdGEgPSBqUXVlcnkuX2RhdGEoIGRlc3QsIG9sZERhdGEgKSxcbiAgICBldmVudHMgPSBvbGREYXRhLmV2ZW50cztcblxuICBpZiAoIGV2ZW50cyApIHtcbiAgICBkZWxldGUgY3VyRGF0YS5oYW5kbGU7XG4gICAgY3VyRGF0YS5ldmVudHMgPSB7fTtcblxuICAgIGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuICAgICAgZm9yICggaSA9IDAsIGwgPSBldmVudHNbIHR5cGUgXS5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG4gICAgICAgIGpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBtYWtlIHRoZSBjbG9uZWQgcHVibGljIGRhdGEgb2JqZWN0IGEgY29weSBmcm9tIHRoZSBvcmlnaW5hbFxuICBpZiAoIGN1ckRhdGEuZGF0YSApIHtcbiAgICBjdXJEYXRhLmRhdGEgPSBqUXVlcnkuZXh0ZW5kKCB7fSwgY3VyRGF0YS5kYXRhICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZml4Q2xvbmVOb2RlSXNzdWVzKCBzcmMsIGRlc3QgKSB7XG4gIHZhciBub2RlTmFtZSwgZSwgZGF0YTtcblxuICAvLyBXZSBkbyBub3QgbmVlZCB0byBkbyBhbnl0aGluZyBmb3Igbm9uLUVsZW1lbnRzXG4gIGlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBub2RlTmFtZSA9IGRlc3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAvLyBJRTYtOCBjb3BpZXMgZXZlbnRzIGJvdW5kIHZpYSBhdHRhY2hFdmVudCB3aGVuIHVzaW5nIGNsb25lTm9kZS5cbiAgaWYgKCAhc3VwcG9ydC5ub0Nsb25lRXZlbnQgJiYgZGVzdFsgalF1ZXJ5LmV4cGFuZG8gXSApIHtcbiAgICBkYXRhID0galF1ZXJ5Ll9kYXRhKCBkZXN0ICk7XG5cbiAgICBmb3IgKCBlIGluIGRhdGEuZXZlbnRzICkge1xuICAgICAgalF1ZXJ5LnJlbW92ZUV2ZW50KCBkZXN0LCBlLCBkYXRhLmhhbmRsZSApO1xuICAgIH1cblxuICAgIC8vIEV2ZW50IGRhdGEgZ2V0cyByZWZlcmVuY2VkIGluc3RlYWQgb2YgY29waWVkIGlmIHRoZSBleHBhbmRvIGdldHMgY29waWVkIHRvb1xuICAgIGRlc3QucmVtb3ZlQXR0cmlidXRlKCBqUXVlcnkuZXhwYW5kbyApO1xuICB9XG5cbiAgLy8gSUUgYmxhbmtzIGNvbnRlbnRzIHdoZW4gY2xvbmluZyBzY3JpcHRzLCBhbmQgdHJpZXMgdG8gZXZhbHVhdGUgbmV3bHktc2V0IHRleHRcbiAgaWYgKCBub2RlTmFtZSA9PT0gXCJzY3JpcHRcIiAmJiBkZXN0LnRleHQgIT09IHNyYy50ZXh0ICkge1xuICAgIGRpc2FibGVTY3JpcHQoIGRlc3QgKS50ZXh0ID0gc3JjLnRleHQ7XG4gICAgcmVzdG9yZVNjcmlwdCggZGVzdCApO1xuXG4gIC8vIElFNi0xMCBpbXByb3Blcmx5IGNsb25lcyBjaGlsZHJlbiBvZiBvYmplY3QgZWxlbWVudHMgdXNpbmcgY2xhc3NpZC5cbiAgLy8gSUUxMCB0aHJvd3MgTm9Nb2RpZmljYXRpb25BbGxvd2VkRXJyb3IgaWYgcGFyZW50IGlzIG51bGwsICMxMjEzMi5cbiAgfSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwib2JqZWN0XCIgKSB7XG4gICAgaWYgKCBkZXN0LnBhcmVudE5vZGUgKSB7XG4gICAgICBkZXN0Lm91dGVySFRNTCA9IHNyYy5vdXRlckhUTUw7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBwYXRoIGFwcGVhcnMgdW5hdm9pZGFibGUgZm9yIElFOS4gV2hlbiBjbG9uaW5nIGFuIG9iamVjdFxuICAgIC8vIGVsZW1lbnQgaW4gSUU5LCB0aGUgb3V0ZXJIVE1MIHN0cmF0ZWd5IGFib3ZlIGlzIG5vdCBzdWZmaWNpZW50LlxuICAgIC8vIElmIHRoZSBzcmMgaGFzIGlubmVySFRNTCBhbmQgdGhlIGRlc3RpbmF0aW9uIGRvZXMgbm90LFxuICAgIC8vIGNvcHkgdGhlIHNyYy5pbm5lckhUTUwgaW50byB0aGUgZGVzdC5pbm5lckhUTUwuICMxMDMyNFxuICAgIGlmICggc3VwcG9ydC5odG1sNUNsb25lICYmICggc3JjLmlubmVySFRNTCAmJiAhalF1ZXJ5LnRyaW0oZGVzdC5pbm5lckhUTUwpICkgKSB7XG4gICAgICBkZXN0LmlubmVySFRNTCA9IHNyYy5pbm5lckhUTUw7XG4gICAgfVxuXG4gIH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgcmNoZWNrYWJsZVR5cGUudGVzdCggc3JjLnR5cGUgKSApIHtcbiAgICAvLyBJRTYtOCBmYWlscyB0byBwZXJzaXN0IHRoZSBjaGVja2VkIHN0YXRlIG9mIGEgY2xvbmVkIGNoZWNrYm94XG4gICAgLy8gb3IgcmFkaW8gYnV0dG9uLiBXb3JzZSwgSUU2LTcgZmFpbCB0byBnaXZlIHRoZSBjbG9uZWQgZWxlbWVudFxuICAgIC8vIGEgY2hlY2tlZCBhcHBlYXJhbmNlIGlmIHRoZSBkZWZhdWx0Q2hlY2tlZCB2YWx1ZSBpc24ndCBhbHNvIHNldFxuXG4gICAgZGVzdC5kZWZhdWx0Q2hlY2tlZCA9IGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG4gICAgLy8gSUU2LTcgZ2V0IGNvbmZ1c2VkIGFuZCBlbmQgdXAgc2V0dGluZyB0aGUgdmFsdWUgb2YgYSBjbG9uZWRcbiAgICAvLyBjaGVja2JveC9yYWRpbyBidXR0b24gdG8gYW4gZW1wdHkgc3RyaW5nIGluc3RlYWQgb2YgXCJvblwiXG4gICAgaWYgKCBkZXN0LnZhbHVlICE9PSBzcmMudmFsdWUgKSB7XG4gICAgICBkZXN0LnZhbHVlID0gc3JjLnZhbHVlO1xuICAgIH1cblxuICAvLyBJRTYtOCBmYWlscyB0byByZXR1cm4gdGhlIHNlbGVjdGVkIG9wdGlvbiB0byB0aGUgZGVmYXVsdCBzZWxlY3RlZFxuICAvLyBzdGF0ZSB3aGVuIGNsb25pbmcgb3B0aW9uc1xuICB9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gXCJvcHRpb25cIiApIHtcbiAgICBkZXN0LmRlZmF1bHRTZWxlY3RlZCA9IGRlc3Quc2VsZWN0ZWQgPSBzcmMuZGVmYXVsdFNlbGVjdGVkO1xuXG4gIC8vIElFNi04IGZhaWxzIHRvIHNldCB0aGUgZGVmYXVsdFZhbHVlIHRvIHRoZSBjb3JyZWN0IHZhbHVlIHdoZW5cbiAgLy8gY2xvbmluZyBvdGhlciB0eXBlcyBvZiBpbnB1dCBmaWVsZHNcbiAgfSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiB8fCBub2RlTmFtZSA9PT0gXCJ0ZXh0YXJlYVwiICkge1xuICAgIGRlc3QuZGVmYXVsdFZhbHVlID0gc3JjLmRlZmF1bHRWYWx1ZTtcbiAgfVxufVxuXG5qUXVlcnkuZXh0ZW5kKHtcbiAgY2xvbmU6IGZ1bmN0aW9uKCBlbGVtLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcbiAgICB2YXIgZGVzdEVsZW1lbnRzLCBub2RlLCBjbG9uZSwgaSwgc3JjRWxlbWVudHMsXG4gICAgICBpblBhZ2UgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXG4gICAgaWYgKCBzdXBwb3J0Lmh0bWw1Q2xvbmUgfHwgalF1ZXJ5LmlzWE1MRG9jKGVsZW0pIHx8ICFybm9zaGltY2FjaGUudGVzdCggXCI8XCIgKyBlbGVtLm5vZGVOYW1lICsgXCI+XCIgKSApIHtcbiAgICAgIGNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKTtcblxuICAgIC8vIElFPD04IGRvZXMgbm90IHByb3Blcmx5IGNsb25lIGRldGFjaGVkLCB1bmtub3duIGVsZW1lbnQgbm9kZXNcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZ21lbnREaXYuaW5uZXJIVE1MID0gZWxlbS5vdXRlckhUTUw7XG4gICAgICBmcmFnbWVudERpdi5yZW1vdmVDaGlsZCggY2xvbmUgPSBmcmFnbWVudERpdi5maXJzdENoaWxkICk7XG4gICAgfVxuXG4gICAgaWYgKCAoIXN1cHBvcnQubm9DbG9uZUV2ZW50IHx8ICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkKSAmJlxuICAgICAgICAoZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSkgJiYgIWpRdWVyeS5pc1hNTERvYyhlbGVtKSApIHtcblxuICAgICAgLy8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwOi8vanNwZXJmLmNvbS9nZXRhbGwtdnMtc2l6emxlLzJcbiAgICAgIGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUgKTtcbiAgICAgIHNyY0VsZW1lbnRzID0gZ2V0QWxsKCBlbGVtICk7XG5cbiAgICAgIC8vIEZpeCBhbGwgSUUgY2xvbmluZyBpc3N1ZXNcbiAgICAgIGZvciAoIGkgPSAwOyAobm9kZSA9IHNyY0VsZW1lbnRzW2ldKSAhPSBudWxsOyArK2kgKSB7XG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBkZXN0aW5hdGlvbiBub2RlIGlzIG5vdCBudWxsOyBGaXhlcyAjOTU4N1xuICAgICAgICBpZiAoIGRlc3RFbGVtZW50c1tpXSApIHtcbiAgICAgICAgICBmaXhDbG9uZU5vZGVJc3N1ZXMoIG5vZGUsIGRlc3RFbGVtZW50c1tpXSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuICAgIGlmICggZGF0YUFuZEV2ZW50cyApIHtcbiAgICAgIGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG4gICAgICAgIHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG4gICAgICAgIGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cbiAgICAgICAgZm9yICggaSA9IDA7IChub2RlID0gc3JjRWxlbWVudHNbaV0pICE9IG51bGw7IGkrKyApIHtcbiAgICAgICAgICBjbG9uZUNvcHlFdmVudCggbm9kZSwgZGVzdEVsZW1lbnRzW2ldICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3RvcnlcbiAgICBkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG4gICAgaWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcbiAgICAgIHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuICAgIH1cblxuICAgIGRlc3RFbGVtZW50cyA9IHNyY0VsZW1lbnRzID0gbm9kZSA9IG51bGw7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGNsb25lZCBzZXRcbiAgICByZXR1cm4gY2xvbmU7XG4gIH0sXG5cbiAgYnVpbGRGcmFnbWVudDogZnVuY3Rpb24oIGVsZW1zLCBjb250ZXh0LCBzY3JpcHRzLCBzZWxlY3Rpb24gKSB7XG4gICAgdmFyIGosIGVsZW0sIGNvbnRhaW5zLFxuICAgICAgdG1wLCB0YWcsIHRib2R5LCB3cmFwLFxuICAgICAgbCA9IGVsZW1zLmxlbmd0aCxcblxuICAgICAgLy8gRW5zdXJlIGEgc2FmZSBmcmFnbWVudFxuICAgICAgc2FmZSA9IGNyZWF0ZVNhZmVGcmFnbWVudCggY29udGV4dCApLFxuXG4gICAgICBub2RlcyA9IFtdLFxuICAgICAgaSA9IDA7XG5cbiAgICBmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG4gICAgICBlbGVtID0gZWxlbXNbIGkgXTtcblxuICAgICAgaWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cbiAgICAgICAgLy8gQWRkIG5vZGVzIGRpcmVjdGx5XG4gICAgICAgIGlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcbiAgICAgICAgICBqUXVlcnkubWVyZ2UoIG5vZGVzLCBlbGVtLm5vZGVUeXBlID8gWyBlbGVtIF0gOiBlbGVtICk7XG5cbiAgICAgICAgLy8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXG4gICAgICAgIH0gZWxzZSBpZiAoICFyaHRtbC50ZXN0KCBlbGVtICkgKSB7XG4gICAgICAgICAgbm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggZWxlbSApICk7XG5cbiAgICAgICAgLy8gQ29udmVydCBodG1sIGludG8gRE9NIG5vZGVzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG1wID0gdG1wIHx8IHNhZmUuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudChcImRpdlwiKSApO1xuXG4gICAgICAgICAgLy8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuICAgICAgICAgIHRhZyA9IChydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgWyBcIlwiLCBcIlwiIF0pWyAxIF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB3cmFwID0gd3JhcE1hcFsgdGFnIF0gfHwgd3JhcE1hcC5fZGVmYXVsdDtcblxuICAgICAgICAgIHRtcC5pbm5lckhUTUwgPSB3cmFwWzFdICsgZWxlbS5yZXBsYWNlKCByeGh0bWxUYWcsIFwiPCQxPjwvJDI+XCIgKSArIHdyYXBbMl07XG5cbiAgICAgICAgICAvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcbiAgICAgICAgICBqID0gd3JhcFswXTtcbiAgICAgICAgICB3aGlsZSAoIGotLSApIHtcbiAgICAgICAgICAgIHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTWFudWFsbHkgYWRkIGxlYWRpbmcgd2hpdGVzcGFjZSByZW1vdmVkIGJ5IElFXG4gICAgICAgICAgaWYgKCAhc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSAmJiBybGVhZGluZ1doaXRlc3BhY2UudGVzdCggZWxlbSApICkge1xuICAgICAgICAgICAgbm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggcmxlYWRpbmdXaGl0ZXNwYWNlLmV4ZWMoIGVsZW0gKVswXSApICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmVtb3ZlIElFJ3MgYXV0b2luc2VydGVkIDx0Ym9keT4gZnJvbSB0YWJsZSBmcmFnbWVudHNcbiAgICAgICAgICBpZiAoICFzdXBwb3J0LnRib2R5ICkge1xuXG4gICAgICAgICAgICAvLyBTdHJpbmcgd2FzIGEgPHRhYmxlPiwgKm1heSogaGF2ZSBzcHVyaW91cyA8dGJvZHk+XG4gICAgICAgICAgICBlbGVtID0gdGFnID09PSBcInRhYmxlXCIgJiYgIXJ0Ym9keS50ZXN0KCBlbGVtICkgP1xuICAgICAgICAgICAgICB0bXAuZmlyc3RDaGlsZCA6XG5cbiAgICAgICAgICAgICAgLy8gU3RyaW5nIHdhcyBhIGJhcmUgPHRoZWFkPiBvciA8dGZvb3Q+XG4gICAgICAgICAgICAgIHdyYXBbMV0gPT09IFwiPHRhYmxlPlwiICYmICFydGJvZHkudGVzdCggZWxlbSApID9cbiAgICAgICAgICAgICAgICB0bXAgOlxuICAgICAgICAgICAgICAgIDA7XG5cbiAgICAgICAgICAgIGogPSBlbGVtICYmIGVsZW0uY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoIGotLSApIHtcbiAgICAgICAgICAgICAgaWYgKCBqUXVlcnkubm9kZU5hbWUoICh0Ym9keSA9IGVsZW0uY2hpbGROb2Rlc1tqXSksIFwidGJvZHlcIiApICYmICF0Ym9keS5jaGlsZE5vZGVzLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZUNoaWxkKCB0Ym9keSApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgalF1ZXJ5Lm1lcmdlKCBub2RlcywgdG1wLmNoaWxkTm9kZXMgKTtcblxuICAgICAgICAgIC8vIEZpeCAjMTIzOTIgZm9yIFdlYktpdCBhbmQgSUUgPiA5XG4gICAgICAgICAgdG1wLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgICAgICAgIC8vIEZpeCAjMTIzOTIgZm9yIG9sZElFXG4gICAgICAgICAgd2hpbGUgKCB0bXAuZmlyc3RDaGlsZCApIHtcbiAgICAgICAgICAgIHRtcC5yZW1vdmVDaGlsZCggdG1wLmZpcnN0Q2hpbGQgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSZW1lbWJlciB0aGUgdG9wLWxldmVsIGNvbnRhaW5lciBmb3IgcHJvcGVyIGNsZWFudXBcbiAgICAgICAgICB0bXAgPSBzYWZlLmxhc3RDaGlsZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZpeCAjMTEzNTY6IENsZWFyIGVsZW1lbnRzIGZyb20gZnJhZ21lbnRcbiAgICBpZiAoIHRtcCApIHtcbiAgICAgIHNhZmUucmVtb3ZlQ2hpbGQoIHRtcCApO1xuICAgIH1cblxuICAgIC8vIFJlc2V0IGRlZmF1bHRDaGVja2VkIGZvciBhbnkgcmFkaW9zIGFuZCBjaGVja2JveGVzXG4gICAgLy8gYWJvdXQgdG8gYmUgYXBwZW5kZWQgdG8gdGhlIERPTSBpbiBJRSA2LzcgKCM4MDYwKVxuICAgIGlmICggIXN1cHBvcnQuYXBwZW5kQ2hlY2tlZCApIHtcbiAgICAgIGpRdWVyeS5ncmVwKCBnZXRBbGwoIG5vZGVzLCBcImlucHV0XCIgKSwgZml4RGVmYXVsdENoZWNrZWQgKTtcbiAgICB9XG5cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoIChlbGVtID0gbm9kZXNbIGkrKyBdKSApIHtcblxuICAgICAgLy8gIzQwODcgLSBJZiBvcmlnaW4gYW5kIGRlc3RpbmF0aW9uIGVsZW1lbnRzIGFyZSB0aGUgc2FtZSwgYW5kIHRoaXMgaXNcbiAgICAgIC8vIHRoYXQgZWxlbWVudCwgZG8gbm90IGRvIGFueXRoaW5nXG4gICAgICBpZiAoIHNlbGVjdGlvbiAmJiBqUXVlcnkuaW5BcnJheSggZWxlbSwgc2VsZWN0aW9uICkgIT09IC0xICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29udGFpbnMgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXG4gICAgICAvLyBBcHBlbmQgdG8gZnJhZ21lbnRcbiAgICAgIHRtcCA9IGdldEFsbCggc2FmZS5hcHBlbmRDaGlsZCggZWxlbSApLCBcInNjcmlwdFwiICk7XG5cbiAgICAgIC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3RvcnlcbiAgICAgIGlmICggY29udGFpbnMgKSB7XG4gICAgICAgIHNldEdsb2JhbEV2YWwoIHRtcCApO1xuICAgICAgfVxuXG4gICAgICAvLyBDYXB0dXJlIGV4ZWN1dGFibGVzXG4gICAgICBpZiAoIHNjcmlwdHMgKSB7XG4gICAgICAgIGogPSAwO1xuICAgICAgICB3aGlsZSAoIChlbGVtID0gdG1wWyBqKysgXSkgKSB7XG4gICAgICAgICAgaWYgKCByc2NyaXB0VHlwZS50ZXN0KCBlbGVtLnR5cGUgfHwgXCJcIiApICkge1xuICAgICAgICAgICAgc2NyaXB0cy5wdXNoKCBlbGVtICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdG1wID0gbnVsbDtcblxuICAgIHJldHVybiBzYWZlO1xuICB9LFxuXG4gIGNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zLCAvKiBpbnRlcm5hbCAqLyBhY2NlcHREYXRhICkge1xuICAgIHZhciBlbGVtLCB0eXBlLCBpZCwgZGF0YSxcbiAgICAgIGkgPSAwLFxuICAgICAgaW50ZXJuYWxLZXkgPSBqUXVlcnkuZXhwYW5kbyxcbiAgICAgIGNhY2hlID0galF1ZXJ5LmNhY2hlLFxuICAgICAgZGVsZXRlRXhwYW5kbyA9IHN1cHBvcnQuZGVsZXRlRXhwYW5kbyxcbiAgICAgIHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbDtcblxuICAgIGZvciAoIDsgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuICAgICAgaWYgKCBhY2NlcHREYXRhIHx8IGpRdWVyeS5hY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cbiAgICAgICAgaWQgPSBlbGVtWyBpbnRlcm5hbEtleSBdO1xuICAgICAgICBkYXRhID0gaWQgJiYgY2FjaGVbIGlkIF07XG5cbiAgICAgICAgaWYgKCBkYXRhICkge1xuICAgICAgICAgIGlmICggZGF0YS5ldmVudHMgKSB7XG4gICAgICAgICAgICBmb3IgKCB0eXBlIGluIGRhdGEuZXZlbnRzICkge1xuICAgICAgICAgICAgICBpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICk7XG5cbiAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZFxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZGF0YS5oYW5kbGUgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJlbW92ZSBjYWNoZSBvbmx5IGlmIGl0IHdhcyBub3QgYWxyZWFkeSByZW1vdmVkIGJ5IGpRdWVyeS5ldmVudC5yZW1vdmVcbiAgICAgICAgICBpZiAoIGNhY2hlWyBpZCBdICkge1xuXG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbIGlkIF07XG5cbiAgICAgICAgICAgIC8vIElFIGRvZXMgbm90IGFsbG93IHVzIHRvIGRlbGV0ZSBleHBhbmRvIHByb3BlcnRpZXMgZnJvbSBub2RlcyxcbiAgICAgICAgICAgIC8vIG5vciBkb2VzIGl0IGhhdmUgYSByZW1vdmVBdHRyaWJ1dGUgZnVuY3Rpb24gb24gRG9jdW1lbnQgbm9kZXM7XG4gICAgICAgICAgICAvLyB3ZSBtdXN0IGhhbmRsZSBhbGwgb2YgdGhlc2UgY2FzZXNcbiAgICAgICAgICAgIGlmICggZGVsZXRlRXhwYW5kbyApIHtcbiAgICAgICAgICAgICAgZGVsZXRlIGVsZW1bIGludGVybmFsS2V5IF07XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBlbGVtLnJlbW92ZUF0dHJpYnV0ZSAhPT0gc3RydW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICBlbGVtLnJlbW92ZUF0dHJpYnV0ZSggaW50ZXJuYWxLZXkgKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZWxlbVsgaW50ZXJuYWxLZXkgXSA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlbGV0ZWRJZHMucHVzaCggaWQgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcbiAgdGV4dDogZnVuY3Rpb24oIHZhbHVlICkge1xuICAgIHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgalF1ZXJ5LnRleHQoIHRoaXMgKSA6XG4gICAgICAgIHRoaXMuZW1wdHkoKS5hcHBlbmQoICggdGhpc1swXSAmJiB0aGlzWzBdLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKS5jcmVhdGVUZXh0Tm9kZSggdmFsdWUgKSApO1xuICAgIH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG4gIH0sXG5cbiAgYXBwZW5kOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgIGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG4gICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHByZXBlbmQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgaWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBiZWZvcmU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgaWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBhZnRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICBpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCBrZWVwRGF0YSAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcbiAgICB2YXIgZWxlbSxcbiAgICAgIGVsZW1zID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgdGhpcyApIDogdGhpcyxcbiAgICAgIGkgPSAwO1xuXG4gICAgZm9yICggOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cbiAgICAgIGlmICggIWtlZXBEYXRhICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG4gICAgICAgIGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSApICk7XG4gICAgICB9XG5cbiAgICAgIGlmICggZWxlbS5wYXJlbnROb2RlICkge1xuICAgICAgICBpZiAoIGtlZXBEYXRhICYmIGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7XG4gICAgICAgICAgc2V0R2xvYmFsRXZhbCggZ2V0QWxsKCBlbGVtLCBcInNjcmlwdFwiICkgKTtcbiAgICAgICAgfVxuICAgICAgICBlbGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGVsZW0gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICBlbXB0eTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsZW0sXG4gICAgICBpID0gMDtcblxuICAgIGZvciAoIDsgKGVsZW0gPSB0aGlzW2ldKSAhPSBudWxsOyBpKysgKSB7XG4gICAgICAvLyBSZW1vdmUgZWxlbWVudCBub2RlcyBhbmQgcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICAgIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcbiAgICAgICAgalF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtLCBmYWxzZSApICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBhbnkgcmVtYWluaW5nIG5vZGVzXG4gICAgICB3aGlsZSAoIGVsZW0uZmlyc3RDaGlsZCApIHtcbiAgICAgICAgZWxlbS5yZW1vdmVDaGlsZCggZWxlbS5maXJzdENoaWxkICk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoaXMgaXMgYSBzZWxlY3QsIGVuc3VyZSB0aGF0IGl0IGRpc3BsYXlzIGVtcHR5ICgjMTIzMzYpXG4gICAgICAvLyBTdXBwb3J0OiBJRTw5XG4gICAgICBpZiAoIGVsZW0ub3B0aW9ucyAmJiBqUXVlcnkubm9kZU5hbWUoIGVsZW0sIFwic2VsZWN0XCIgKSApIHtcbiAgICAgICAgZWxlbS5vcHRpb25zLmxlbmd0aCA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgY2xvbmU6IGZ1bmN0aW9uKCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcbiAgICBkYXRhQW5kRXZlbnRzID0gZGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZmFsc2UgOiBkYXRhQW5kRXZlbnRzO1xuICAgIGRlZXBEYXRhQW5kRXZlbnRzID0gZGVlcERhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGRhdGFBbmRFdmVudHMgOiBkZWVwRGF0YUFuZEV2ZW50cztcblxuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7XG4gICAgfSk7XG4gIH0sXG5cbiAgaHRtbDogZnVuY3Rpb24oIHZhbHVlICkge1xuICAgIHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgIHZhciBlbGVtID0gdGhpc1sgMCBdIHx8IHt9LFxuICAgICAgICBpID0gMCxcbiAgICAgICAgbCA9IHRoaXMubGVuZ3RoO1xuXG4gICAgICBpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG4gICAgICAgIHJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxID9cbiAgICAgICAgICBlbGVtLmlubmVySFRNTC5yZXBsYWNlKCByaW5saW5lalF1ZXJ5LCBcIlwiICkgOlxuICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLy8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuICAgICAgaWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG4gICAgICAgICggc3VwcG9ydC5odG1sU2VyaWFsaXplIHx8ICFybm9zaGltY2FjaGUudGVzdCggdmFsdWUgKSAgKSAmJlxuICAgICAgICAoIHN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UgfHwgIXJsZWFkaW5nV2hpdGVzcGFjZS50ZXN0KCB2YWx1ZSApICkgJiZcbiAgICAgICAgIXdyYXBNYXBbIChydGFnTmFtZS5leGVjKCB2YWx1ZSApIHx8IFsgXCJcIiwgXCJcIiBdKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yICg7IGkgPCBsOyBpKysgKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZWxlbWVudCBub2RlcyBhbmQgcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICAgICAgICAgIGVsZW0gPSB0aGlzW2ldIHx8IHt9O1xuICAgICAgICAgICAgaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuICAgICAgICAgICAgICBqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcbiAgICAgICAgICAgICAgZWxlbS5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbGVtID0gMDtcblxuICAgICAgICAvLyBJZiB1c2luZyBpbm5lckhUTUwgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgdXNlIHRoZSBmYWxsYmFjayBtZXRob2RcbiAgICAgICAgfSBjYXRjaChlKSB7fVxuICAgICAgfVxuXG4gICAgICBpZiAoIGVsZW0gKSB7XG4gICAgICAgIHRoaXMuZW1wdHkoKS5hcHBlbmQoIHZhbHVlICk7XG4gICAgICB9XG4gICAgfSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTtcbiAgfSxcblxuICByZXBsYWNlV2l0aDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZyA9IGFyZ3VtZW50c1sgMCBdO1xuXG4gICAgLy8gTWFrZSB0aGUgY2hhbmdlcywgcmVwbGFjaW5nIGVhY2ggY29udGV4dCBlbGVtZW50IHdpdGggdGhlIG5ldyBjb250ZW50XG4gICAgdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgIGFyZyA9IHRoaXMucGFyZW50Tm9kZTtcblxuICAgICAgalF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTtcblxuICAgICAgaWYgKCBhcmcgKSB7XG4gICAgICAgIGFyZy5yZXBsYWNlQ2hpbGQoIGVsZW0sIHRoaXMgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEZvcmNlIHJlbW92YWwgaWYgdGhlcmUgd2FzIG5vIG5ldyBjb250ZW50IChlLmcuLCBmcm9tIGVtcHR5IGFyZ3VtZW50cylcbiAgICByZXR1cm4gYXJnICYmIChhcmcubGVuZ3RoIHx8IGFyZy5ub2RlVHlwZSkgPyB0aGlzIDogdGhpcy5yZW1vdmUoKTtcbiAgfSxcblxuICBkZXRhY2g6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmUoIHNlbGVjdG9yLCB0cnVlICk7XG4gIH0sXG5cbiAgZG9tTWFuaXA6IGZ1bmN0aW9uKCBhcmdzLCBjYWxsYmFjayApIHtcblxuICAgIC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcbiAgICBhcmdzID0gY29uY2F0LmFwcGx5KCBbXSwgYXJncyApO1xuXG4gICAgdmFyIGZpcnN0LCBub2RlLCBoYXNTY3JpcHRzLFxuICAgICAgc2NyaXB0cywgZG9jLCBmcmFnbWVudCxcbiAgICAgIGkgPSAwLFxuICAgICAgbCA9IHRoaXMubGVuZ3RoLFxuICAgICAgc2V0ID0gdGhpcyxcbiAgICAgIGlOb0Nsb25lID0gbCAtIDEsXG4gICAgICB2YWx1ZSA9IGFyZ3NbMF0sXG4gICAgICBpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cbiAgICAvLyBXZSBjYW4ndCBjbG9uZU5vZGUgZnJhZ21lbnRzIHRoYXQgY29udGFpbiBjaGVja2VkLCBpbiBXZWJLaXRcbiAgICBpZiAoIGlzRnVuY3Rpb24gfHxcbiAgICAgICAgKCBsID4gMSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAhc3VwcG9ydC5jaGVja0Nsb25lICYmIHJjaGVja2VkLnRlc3QoIHZhbHVlICkgKSApIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGluZGV4ICkge1xuICAgICAgICB2YXIgc2VsZiA9IHNldC5lcSggaW5kZXggKTtcbiAgICAgICAgaWYgKCBpc0Z1bmN0aW9uICkge1xuICAgICAgICAgIGFyZ3NbMF0gPSB2YWx1ZS5jYWxsKCB0aGlzLCBpbmRleCwgc2VsZi5odG1sKCkgKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmRvbU1hbmlwKCBhcmdzLCBjYWxsYmFjayApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCBsICkge1xuICAgICAgZnJhZ21lbnQgPSBqUXVlcnkuYnVpbGRGcmFnbWVudCggYXJncywgdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCB0aGlzICk7XG4gICAgICBmaXJzdCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG5cbiAgICAgIGlmICggZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgKSB7XG4gICAgICAgIGZyYWdtZW50ID0gZmlyc3Q7XG4gICAgICB9XG5cbiAgICAgIGlmICggZmlyc3QgKSB7XG4gICAgICAgIHNjcmlwdHMgPSBqUXVlcnkubWFwKCBnZXRBbGwoIGZyYWdtZW50LCBcInNjcmlwdFwiICksIGRpc2FibGVTY3JpcHQgKTtcbiAgICAgICAgaGFzU2NyaXB0cyA9IHNjcmlwdHMubGVuZ3RoO1xuXG4gICAgICAgIC8vIFVzZSB0aGUgb3JpZ2luYWwgZnJhZ21lbnQgZm9yIHRoZSBsYXN0IGl0ZW0gaW5zdGVhZCBvZiB0aGUgZmlyc3QgYmVjYXVzZSBpdCBjYW4gZW5kIHVwXG4gICAgICAgIC8vIGJlaW5nIGVtcHRpZWQgaW5jb3JyZWN0bHkgaW4gY2VydGFpbiBzaXR1YXRpb25zICgjODA3MCkuXG4gICAgICAgIGZvciAoIDsgaSA8IGw7IGkrKyApIHtcbiAgICAgICAgICBub2RlID0gZnJhZ21lbnQ7XG5cbiAgICAgICAgICBpZiAoIGkgIT09IGlOb0Nsb25lICkge1xuICAgICAgICAgICAgbm9kZSA9IGpRdWVyeS5jbG9uZSggbm9kZSwgdHJ1ZSwgdHJ1ZSApO1xuXG4gICAgICAgICAgICAvLyBLZWVwIHJlZmVyZW5jZXMgdG8gY2xvbmVkIHNjcmlwdHMgZm9yIGxhdGVyIHJlc3RvcmF0aW9uXG4gICAgICAgICAgICBpZiAoIGhhc1NjcmlwdHMgKSB7XG4gICAgICAgICAgICAgIGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYWxsYmFjay5jYWxsKCB0aGlzW2ldLCBub2RlLCBpICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIGhhc1NjcmlwdHMgKSB7XG4gICAgICAgICAgZG9jID0gc2NyaXB0c1sgc2NyaXB0cy5sZW5ndGggLSAxIF0ub3duZXJEb2N1bWVudDtcblxuICAgICAgICAgIC8vIFJlZW5hYmxlIHNjcmlwdHNcbiAgICAgICAgICBqUXVlcnkubWFwKCBzY3JpcHRzLCByZXN0b3JlU2NyaXB0ICk7XG5cbiAgICAgICAgICAvLyBFdmFsdWF0ZSBleGVjdXRhYmxlIHNjcmlwdHMgb24gZmlyc3QgZG9jdW1lbnQgaW5zZXJ0aW9uXG4gICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBoYXNTY3JpcHRzOyBpKysgKSB7XG4gICAgICAgICAgICBub2RlID0gc2NyaXB0c1sgaSBdO1xuICAgICAgICAgICAgaWYgKCByc2NyaXB0VHlwZS50ZXN0KCBub2RlLnR5cGUgfHwgXCJcIiApICYmXG4gICAgICAgICAgICAgICFqUXVlcnkuX2RhdGEoIG5vZGUsIFwiZ2xvYmFsRXZhbFwiICkgJiYgalF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHtcblxuICAgICAgICAgICAgICBpZiAoIG5vZGUuc3JjICkge1xuICAgICAgICAgICAgICAgIC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG4gICAgICAgICAgICAgICAgaWYgKCBqUXVlcnkuX2V2YWxVcmwgKSB7XG4gICAgICAgICAgICAgICAgICBqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5nbG9iYWxFdmFsKCAoIG5vZGUudGV4dCB8fCBub2RlLnRleHRDb250ZW50IHx8IG5vZGUuaW5uZXJIVE1MIHx8IFwiXCIgKS5yZXBsYWNlKCByY2xlYW5TY3JpcHQsIFwiXCIgKSApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRml4ICMxMTgwOTogQXZvaWQgbGVha2luZyBtZW1vcnlcbiAgICAgICAgZnJhZ21lbnQgPSBmaXJzdCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn0pO1xuXG5qUXVlcnkuZWFjaCh7XG4gIGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuICBwcmVwZW5kVG86IFwicHJlcGVuZFwiLFxuICBpbnNlcnRCZWZvcmU6IFwiYmVmb3JlXCIsXG4gIGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG4gIHJlcGxhY2VBbGw6IFwicmVwbGFjZVdpdGhcIlxufSwgZnVuY3Rpb24oIG5hbWUsIG9yaWdpbmFsICkge1xuICBqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcbiAgICB2YXIgZWxlbXMsXG4gICAgICBpID0gMCxcbiAgICAgIHJldCA9IFtdLFxuICAgICAgaW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuICAgICAgbGFzdCA9IGluc2VydC5sZW5ndGggLSAxO1xuXG4gICAgZm9yICggOyBpIDw9IGxhc3Q7IGkrKyApIHtcbiAgICAgIGVsZW1zID0gaSA9PT0gbGFzdCA/IHRoaXMgOiB0aGlzLmNsb25lKHRydWUpO1xuICAgICAgalF1ZXJ5KCBpbnNlcnRbaV0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTtcblxuICAgICAgLy8gTW9kZXJuIGJyb3dzZXJzIGNhbiBhcHBseSBqUXVlcnkgY29sbGVjdGlvbnMgYXMgYXJyYXlzLCBidXQgb2xkSUUgbmVlZHMgYSAuZ2V0KClcbiAgICAgIHB1c2guYXBwbHkoIHJldCwgZWxlbXMuZ2V0KCkgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldCApO1xuICB9O1xufSk7XG5cblxudmFyIGlmcmFtZSxcbiAgZWxlbWRpc3BsYXkgPSB7fTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYWN0dWFsIGRpc3BsYXkgb2YgYSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBub2RlTmFtZSBvZiB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3RcbiAqL1xuLy8gQ2FsbGVkIG9ubHkgZnJvbSB3aXRoaW4gZGVmYXVsdERpc3BsYXlcbmZ1bmN0aW9uIGFjdHVhbERpc3BsYXkoIG5hbWUsIGRvYyApIHtcbiAgdmFyIHN0eWxlLFxuICAgIGVsZW0gPSBqUXVlcnkoIGRvYy5jcmVhdGVFbGVtZW50KCBuYW1lICkgKS5hcHBlbmRUbyggZG9jLmJvZHkgKSxcblxuICAgIC8vIGdldERlZmF1bHRDb21wdXRlZFN0eWxlIG1pZ2h0IGJlIHJlbGlhYmx5IHVzZWQgb25seSBvbiBhdHRhY2hlZCBlbGVtZW50XG4gICAgZGlzcGxheSA9IHdpbmRvdy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSAmJiAoIHN0eWxlID0gd2luZG93LmdldERlZmF1bHRDb21wdXRlZFN0eWxlKCBlbGVtWyAwIF0gKSApID9cblxuICAgICAgLy8gVXNlIG9mIHRoaXMgbWV0aG9kIGlzIGEgdGVtcG9yYXJ5IGZpeCAobW9yZSBsaWtlIG9wdG1pemF0aW9uKSB1bnRpbCBzb21ldGhpbmcgYmV0dGVyIGNvbWVzIGFsb25nLFxuICAgICAgLy8gc2luY2UgaXQgd2FzIHJlbW92ZWQgZnJvbSBzcGVjaWZpY2F0aW9uIGFuZCBzdXBwb3J0ZWQgb25seSBpbiBGRlxuICAgICAgc3R5bGUuZGlzcGxheSA6IGpRdWVyeS5jc3MoIGVsZW1bIDAgXSwgXCJkaXNwbGF5XCIgKTtcblxuICAvLyBXZSBkb24ndCBoYXZlIGFueSBkYXRhIHN0b3JlZCBvbiB0aGUgZWxlbWVudCxcbiAgLy8gc28gdXNlIFwiZGV0YWNoXCIgbWV0aG9kIGFzIGZhc3Qgd2F5IHRvIGdldCByaWQgb2YgdGhlIGVsZW1lbnRcbiAgZWxlbS5kZXRhY2goKTtcblxuICByZXR1cm4gZGlzcGxheTtcbn1cblxuLyoqXG4gKiBUcnkgdG8gZGV0ZXJtaW5lIHRoZSBkZWZhdWx0IGRpc3BsYXkgdmFsdWUgb2YgYW4gZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHREaXNwbGF5KCBub2RlTmFtZSApIHtcbiAgdmFyIGRvYyA9IGRvY3VtZW50LFxuICAgIGRpc3BsYXkgPSBlbGVtZGlzcGxheVsgbm9kZU5hbWUgXTtcblxuICBpZiAoICFkaXNwbGF5ICkge1xuICAgIGRpc3BsYXkgPSBhY3R1YWxEaXNwbGF5KCBub2RlTmFtZSwgZG9jICk7XG5cbiAgICAvLyBJZiB0aGUgc2ltcGxlIHdheSBmYWlscywgcmVhZCBmcm9tIGluc2lkZSBhbiBpZnJhbWVcbiAgICBpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiIHx8ICFkaXNwbGF5ICkge1xuXG4gICAgICAvLyBVc2UgdGhlIGFscmVhZHktY3JlYXRlZCBpZnJhbWUgaWYgcG9zc2libGVcbiAgICAgIGlmcmFtZSA9IChpZnJhbWUgfHwgalF1ZXJ5KCBcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIiApKS5hcHBlbmRUbyggZG9jLmRvY3VtZW50RWxlbWVudCApO1xuXG4gICAgICAvLyBBbHdheXMgd3JpdGUgYSBuZXcgSFRNTCBza2VsZXRvbiBzbyBXZWJraXQgYW5kIEZpcmVmb3ggZG9uJ3QgY2hva2Ugb24gcmV1c2VcbiAgICAgIGRvYyA9ICggaWZyYW1lWyAwIF0uY29udGVudFdpbmRvdyB8fCBpZnJhbWVbIDAgXS5jb250ZW50RG9jdW1lbnQgKS5kb2N1bWVudDtcblxuICAgICAgLy8gU3VwcG9ydDogSUVcbiAgICAgIGRvYy53cml0ZSgpO1xuICAgICAgZG9jLmNsb3NlKCk7XG5cbiAgICAgIGRpc3BsYXkgPSBhY3R1YWxEaXNwbGF5KCBub2RlTmFtZSwgZG9jICk7XG4gICAgICBpZnJhbWUuZGV0YWNoKCk7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgdGhlIGNvcnJlY3QgZGVmYXVsdCBkaXNwbGF5XG4gICAgZWxlbWRpc3BsYXlbIG5vZGVOYW1lIF0gPSBkaXNwbGF5O1xuICB9XG5cbiAgcmV0dXJuIGRpc3BsYXk7XG59XG5cblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgc2hyaW5rV3JhcEJsb2Nrc1ZhbDtcblxuICBzdXBwb3J0LnNocmlua1dyYXBCbG9ja3MgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIHNocmlua1dyYXBCbG9ja3NWYWwgIT0gbnVsbCApIHtcbiAgICAgIHJldHVybiBzaHJpbmtXcmFwQmxvY2tzVmFsO1xuICAgIH1cblxuICAgIC8vIFdpbGwgYmUgY2hhbmdlZCBsYXRlciBpZiBuZWVkZWQuXG4gICAgc2hyaW5rV3JhcEJsb2Nrc1ZhbCA9IGZhbHNlO1xuXG4gICAgLy8gTWluaWZpZWQ6IHZhciBiLGMsZFxuICAgIHZhciBkaXYsIGJvZHksIGNvbnRhaW5lcjtcblxuICAgIGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJib2R5XCIgKVsgMCBdO1xuICAgIGlmICggIWJvZHkgfHwgIWJvZHkuc3R5bGUgKSB7XG4gICAgICAvLyBUZXN0IGZpcmVkIHRvbyBlYXJseSBvciBpbiBhbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudCwgZXhpdC5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZXR1cFxuICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcbiAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG4gICAgY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4XCI7XG4gICAgYm9keS5hcHBlbmRDaGlsZCggY29udGFpbmVyICkuYXBwZW5kQ2hpbGQoIGRpdiApO1xuXG4gICAgLy8gU3VwcG9ydDogSUU2XG4gICAgLy8gQ2hlY2sgaWYgZWxlbWVudHMgd2l0aCBsYXlvdXQgc2hyaW5rLXdyYXAgdGhlaXIgY2hpbGRyZW5cbiAgICBpZiAoIHR5cGVvZiBkaXYuc3R5bGUuem9vbSAhPT0gc3RydW5kZWZpbmVkICkge1xuICAgICAgLy8gUmVzZXQgQ1NTOiBib3gtc2l6aW5nOyBkaXNwbGF5OyBtYXJnaW47IGJvcmRlclxuICAgICAgZGl2LnN0eWxlLmNzc1RleHQgPVxuICAgICAgICAvLyBTdXBwb3J0OiBGaXJlZm94PDI5LCBBbmRyb2lkIDIuM1xuICAgICAgICAvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmdcbiAgICAgICAgXCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wiICtcbiAgICAgICAgXCJib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7XCIgK1xuICAgICAgICBcInBhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjFcIjtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICkuc3R5bGUud2lkdGggPSBcIjVweFwiO1xuICAgICAgc2hyaW5rV3JhcEJsb2Nrc1ZhbCA9IGRpdi5vZmZzZXRXaWR0aCAhPT0gMztcbiAgICB9XG5cbiAgICBib2R5LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblxuICAgIHJldHVybiBzaHJpbmtXcmFwQmxvY2tzVmFsO1xuICB9O1xuXG59KSgpO1xudmFyIHJtYXJnaW4gPSAoL15tYXJnaW4vKTtcblxudmFyIHJudW1ub25weCA9IG5ldyBSZWdFeHAoIFwiXihcIiArIHBudW0gKyBcIikoPyFweClbYS16JV0rJFwiLCBcImlcIiApO1xuXG5cblxudmFyIGdldFN0eWxlcywgY3VyQ1NTLFxuICBycG9zaXRpb24gPSAvXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87XG5cbmlmICggd2luZG93LmdldENvbXB1dGVkU3R5bGUgKSB7XG4gIGdldFN0eWxlcyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgIHJldHVybiBlbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbSwgbnVsbCApO1xuICB9O1xuXG4gIGN1ckNTUyA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBjb21wdXRlZCApIHtcbiAgICB2YXIgd2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCwgcmV0LFxuICAgICAgc3R5bGUgPSBlbGVtLnN0eWxlO1xuXG4gICAgY29tcHV0ZWQgPSBjb21wdXRlZCB8fCBnZXRTdHlsZXMoIGVsZW0gKTtcblxuICAgIC8vIGdldFByb3BlcnR5VmFsdWUgaXMgb25seSBuZWVkZWQgZm9yIC5jc3MoJ2ZpbHRlcicpIGluIElFOSwgc2VlICMxMjUzN1xuICAgIHJldCA9IGNvbXB1dGVkID8gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF0gOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIGNvbXB1dGVkICkge1xuXG4gICAgICBpZiAoIHJldCA9PT0gXCJcIiAmJiAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSApIHtcbiAgICAgICAgcmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7XG4gICAgICB9XG5cbiAgICAgIC8vIEEgdHJpYnV0ZSB0byB0aGUgXCJhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzXCJcbiAgICAgIC8vIENocm9tZSA8IDE3IGFuZCBTYWZhcmkgNS4wIHVzZXMgXCJjb21wdXRlZCB2YWx1ZVwiIGluc3RlYWQgb2YgXCJ1c2VkIHZhbHVlXCIgZm9yIG1hcmdpbi1yaWdodFxuICAgICAgLy8gU2FmYXJpIDUuMS43IChhdCBsZWFzdCkgcmV0dXJucyBwZXJjZW50YWdlIGZvciBhIGxhcmdlciBzZXQgb2YgdmFsdWVzLCBidXQgd2lkdGggc2VlbXMgdG8gYmUgcmVsaWFibHkgcGl4ZWxzXG4gICAgICAvLyB0aGlzIGlzIGFnYWluc3QgdGhlIENTU09NIGRyYWZ0IHNwZWM6IGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXNcbiAgICAgIGlmICggcm51bW5vbnB4LnRlc3QoIHJldCApICYmIHJtYXJnaW4udGVzdCggbmFtZSApICkge1xuXG4gICAgICAgIC8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXNcbiAgICAgICAgd2lkdGggPSBzdHlsZS53aWR0aDtcbiAgICAgICAgbWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDtcbiAgICAgICAgbWF4V2lkdGggPSBzdHlsZS5tYXhXaWR0aDtcblxuICAgICAgICAvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG4gICAgICAgIHN0eWxlLm1pbldpZHRoID0gc3R5bGUubWF4V2lkdGggPSBzdHlsZS53aWR0aCA9IHJldDtcbiAgICAgICAgcmV0ID0gY29tcHV0ZWQud2lkdGg7XG5cbiAgICAgICAgLy8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuICAgICAgICBzdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICBzdHlsZS5taW5XaWR0aCA9IG1pbldpZHRoO1xuICAgICAgICBzdHlsZS5tYXhXaWR0aCA9IG1heFdpZHRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN1cHBvcnQ6IElFXG4gICAgLy8gSUUgcmV0dXJucyB6SW5kZXggdmFsdWUgYXMgYW4gaW50ZWdlci5cbiAgICByZXR1cm4gcmV0ID09PSB1bmRlZmluZWQgP1xuICAgICAgcmV0IDpcbiAgICAgIHJldCArIFwiXCI7XG4gIH07XG59IGVsc2UgaWYgKCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlICkge1xuICBnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgICByZXR1cm4gZWxlbS5jdXJyZW50U3R5bGU7XG4gIH07XG5cbiAgY3VyQ1NTID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGNvbXB1dGVkICkge1xuICAgIHZhciBsZWZ0LCBycywgcnNMZWZ0LCByZXQsXG4gICAgICBzdHlsZSA9IGVsZW0uc3R5bGU7XG5cbiAgICBjb21wdXRlZCA9IGNvbXB1dGVkIHx8IGdldFN0eWxlcyggZWxlbSApO1xuICAgIHJldCA9IGNvbXB1dGVkID8gY29tcHV0ZWRbIG5hbWUgXSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIEF2b2lkIHNldHRpbmcgcmV0IHRvIGVtcHR5IHN0cmluZyBoZXJlXG4gICAgLy8gc28gd2UgZG9uJ3QgZGVmYXVsdCB0byBhdXRvXG4gICAgaWYgKCByZXQgPT0gbnVsbCAmJiBzdHlsZSAmJiBzdHlsZVsgbmFtZSBdICkge1xuICAgICAgcmV0ID0gc3R5bGVbIG5hbWUgXTtcbiAgICB9XG5cbiAgICAvLyBGcm9tIHRoZSBhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzXG4gICAgLy8gaHR0cDovL2VyaWsuZWFlLm5ldC9hcmNoaXZlcy8yMDA3LzA3LzI3LzE4LjU0LjE1LyNjb21tZW50LTEwMjI5MVxuXG4gICAgLy8gSWYgd2UncmUgbm90IGRlYWxpbmcgd2l0aCBhIHJlZ3VsYXIgcGl4ZWwgbnVtYmVyXG4gICAgLy8gYnV0IGEgbnVtYmVyIHRoYXQgaGFzIGEgd2VpcmQgZW5kaW5nLCB3ZSBuZWVkIHRvIGNvbnZlcnQgaXQgdG8gcGl4ZWxzXG4gICAgLy8gYnV0IG5vdCBwb3NpdGlvbiBjc3MgYXR0cmlidXRlcywgYXMgdGhvc2UgYXJlIHByb3BvcnRpb25hbCB0byB0aGUgcGFyZW50IGVsZW1lbnQgaW5zdGVhZFxuICAgIC8vIGFuZCB3ZSBjYW4ndCBtZWFzdXJlIHRoZSBwYXJlbnQgaW5zdGVhZCBiZWNhdXNlIGl0IG1pZ2h0IHRyaWdnZXIgYSBcInN0YWNraW5nIGRvbGxzXCIgcHJvYmxlbVxuICAgIGlmICggcm51bW5vbnB4LnRlc3QoIHJldCApICYmICFycG9zaXRpb24udGVzdCggbmFtZSApICkge1xuXG4gICAgICAvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG4gICAgICBsZWZ0ID0gc3R5bGUubGVmdDtcbiAgICAgIHJzID0gZWxlbS5ydW50aW1lU3R5bGU7XG4gICAgICByc0xlZnQgPSBycyAmJiBycy5sZWZ0O1xuXG4gICAgICAvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG4gICAgICBpZiAoIHJzTGVmdCApIHtcbiAgICAgICAgcnMubGVmdCA9IGVsZW0uY3VycmVudFN0eWxlLmxlZnQ7XG4gICAgICB9XG4gICAgICBzdHlsZS5sZWZ0ID0gbmFtZSA9PT0gXCJmb250U2l6ZVwiID8gXCIxZW1cIiA6IHJldDtcbiAgICAgIHJldCA9IHN0eWxlLnBpeGVsTGVmdCArIFwicHhcIjtcblxuICAgICAgLy8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuICAgICAgc3R5bGUubGVmdCA9IGxlZnQ7XG4gICAgICBpZiAoIHJzTGVmdCApIHtcbiAgICAgICAgcnMubGVmdCA9IHJzTGVmdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0OiBJRVxuICAgIC8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuXG4gICAgcmV0dXJuIHJldCA9PT0gdW5kZWZpbmVkID9cbiAgICAgIHJldCA6XG4gICAgICByZXQgKyBcIlwiIHx8IFwiYXV0b1wiO1xuICB9O1xufVxuXG5cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG4gIC8vIERlZmluZSB0aGUgaG9vaywgd2UnbGwgY2hlY2sgb24gdGhlIGZpcnN0IHJ1biBpZiBpdCdzIHJlYWxseSBuZWVkZWQuXG4gIHJldHVybiB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjb25kaXRpb24gPSBjb25kaXRpb25GbigpO1xuXG4gICAgICBpZiAoIGNvbmRpdGlvbiA9PSBudWxsICkge1xuICAgICAgICAvLyBUaGUgdGVzdCB3YXMgbm90IHJlYWR5IGF0IHRoaXMgcG9pbnQ7IHNjcmV3IHRoZSBob29rIHRoaXMgdGltZVxuICAgICAgICAvLyBidXQgY2hlY2sgYWdhaW4gd2hlbiBuZWVkZWQgbmV4dCB0aW1lLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICggY29uZGl0aW9uICkge1xuICAgICAgICAvLyBIb29rIG5vdCBuZWVkZWQgKG9yIGl0J3Mgbm90IHBvc3NpYmxlIHRvIHVzZSBpdCBkdWUgdG8gbWlzc2luZyBkZXBlbmRlbmN5KSxcbiAgICAgICAgLy8gcmVtb3ZlIGl0LlxuICAgICAgICAvLyBTaW5jZSB0aGVyZSBhcmUgbm8gb3RoZXIgaG9va3MgZm9yIG1hcmdpblJpZ2h0LCByZW1vdmUgdGhlIHdob2xlIG9iamVjdC5cbiAgICAgICAgZGVsZXRlIHRoaXMuZ2V0O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLlxuXG4gICAgICByZXR1cm4gKHRoaXMuZ2V0ID0gaG9va0ZuKS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG4gICAgfVxuICB9O1xufVxuXG5cbihmdW5jdGlvbigpIHtcbiAgLy8gTWluaWZpZWQ6IHZhciBiLGMsZCxlLGYsZywgaCxpXG4gIHZhciBkaXYsIHN0eWxlLCBhLCBwaXhlbFBvc2l0aW9uVmFsLCBib3hTaXppbmdSZWxpYWJsZVZhbCxcbiAgICByZWxpYWJsZUhpZGRlbk9mZnNldHNWYWwsIHJlbGlhYmxlTWFyZ2luUmlnaHRWYWw7XG5cbiAgLy8gU2V0dXBcbiAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuICBkaXYuaW5uZXJIVE1MID0gXCIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz5cIjtcbiAgYSA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJhXCIgKVsgMCBdO1xuICBzdHlsZSA9IGEgJiYgYS5zdHlsZTtcblxuICAvLyBGaW5pc2ggZWFybHkgaW4gbGltaXRlZCAobm9uLWJyb3dzZXIpIGVudmlyb25tZW50c1xuICBpZiAoICFzdHlsZSApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzdHlsZS5jc3NUZXh0ID0gXCJmbG9hdDpsZWZ0O29wYWNpdHk6LjVcIjtcblxuICAvLyBTdXBwb3J0OiBJRTw5XG4gIC8vIE1ha2Ugc3VyZSB0aGF0IGVsZW1lbnQgb3BhY2l0eSBleGlzdHMgKGFzIG9wcG9zZWQgdG8gZmlsdGVyKVxuICBzdXBwb3J0Lm9wYWNpdHkgPSBzdHlsZS5vcGFjaXR5ID09PSBcIjAuNVwiO1xuXG4gIC8vIFZlcmlmeSBzdHlsZSBmbG9hdCBleGlzdGVuY2VcbiAgLy8gKElFIHVzZXMgc3R5bGVGbG9hdCBpbnN0ZWFkIG9mIGNzc0Zsb2F0KVxuICBzdXBwb3J0LmNzc0Zsb2F0ID0gISFzdHlsZS5jc3NGbG9hdDtcblxuICBkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG4gIGRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiXCI7XG4gIHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cbiAgLy8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjNcbiAgLy8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nXG4gIHN1cHBvcnQuYm94U2l6aW5nID0gc3R5bGUuYm94U2l6aW5nID09PSBcIlwiIHx8IHN0eWxlLk1vekJveFNpemluZyA9PT0gXCJcIiB8fFxuICAgIHN0eWxlLldlYmtpdEJveFNpemluZyA9PT0gXCJcIjtcblxuICBqUXVlcnkuZXh0ZW5kKHN1cHBvcnQsIHtcbiAgICByZWxpYWJsZUhpZGRlbk9mZnNldHM6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCByZWxpYWJsZUhpZGRlbk9mZnNldHNWYWwgPT0gbnVsbCApIHtcbiAgICAgICAgY29tcHV0ZVN0eWxlVGVzdHMoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZWxpYWJsZUhpZGRlbk9mZnNldHNWYWw7XG4gICAgfSxcblxuICAgIGJveFNpemluZ1JlbGlhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICggYm94U2l6aW5nUmVsaWFibGVWYWwgPT0gbnVsbCApIHtcbiAgICAgICAgY29tcHV0ZVN0eWxlVGVzdHMoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBib3hTaXppbmdSZWxpYWJsZVZhbDtcbiAgICB9LFxuXG4gICAgcGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIHBpeGVsUG9zaXRpb25WYWwgPT0gbnVsbCApIHtcbiAgICAgICAgY29tcHV0ZVN0eWxlVGVzdHMoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwaXhlbFBvc2l0aW9uVmFsO1xuICAgIH0sXG5cbiAgICAvLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuICAgIHJlbGlhYmxlTWFyZ2luUmlnaHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCByZWxpYWJsZU1hcmdpblJpZ2h0VmFsID09IG51bGwgKSB7XG4gICAgICAgIGNvbXB1dGVTdHlsZVRlc3RzKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVsaWFibGVNYXJnaW5SaWdodFZhbDtcbiAgICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGNvbXB1dGVTdHlsZVRlc3RzKCkge1xuICAgIC8vIE1pbmlmaWVkOiB2YXIgYixjLGQsalxuICAgIHZhciBkaXYsIGJvZHksIGNvbnRhaW5lciwgY29udGVudHM7XG5cbiAgICBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwiYm9keVwiIClbIDAgXTtcbiAgICBpZiAoICFib2R5IHx8ICFib2R5LnN0eWxlICkge1xuICAgICAgLy8gVGVzdCBmaXJlZCB0b28gZWFybHkgb3IgaW4gYW4gdW5zdXBwb3J0ZWQgZW52aXJvbm1lbnQsIGV4aXQuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2V0dXBcbiAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG4gICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuICAgIGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweFwiO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApLmFwcGVuZENoaWxkKCBkaXYgKTtcblxuICAgIGRpdi5zdHlsZS5jc3NUZXh0ID1cbiAgICAgIC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjksIEFuZHJvaWQgMi4zXG4gICAgICAvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmdcbiAgICAgIFwiLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7XCIgK1xuICAgICAgXCJib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjElO3RvcDoxJTtcIiArXG4gICAgICBcImJvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlXCI7XG5cbiAgICAvLyBTdXBwb3J0OiBJRTw5XG4gICAgLy8gQXNzdW1lIHJlYXNvbmFibGUgdmFsdWVzIGluIHRoZSBhYnNlbmNlIG9mIGdldENvbXB1dGVkU3R5bGVcbiAgICBwaXhlbFBvc2l0aW9uVmFsID0gYm94U2l6aW5nUmVsaWFibGVWYWwgPSBmYWxzZTtcbiAgICByZWxpYWJsZU1hcmdpblJpZ2h0VmFsID0gdHJ1ZTtcblxuICAgIC8vIENoZWNrIGZvciBnZXRDb21wdXRlZFN0eWxlIHNvIHRoYXQgdGhpcyBjb2RlIGlzIG5vdCBydW4gaW4gSUU8OS5cbiAgICBpZiAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlICkge1xuICAgICAgcGl4ZWxQb3NpdGlvblZhbCA9ICggd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiwgbnVsbCApIHx8IHt9ICkudG9wICE9PSBcIjElXCI7XG4gICAgICBib3hTaXppbmdSZWxpYWJsZVZhbCA9XG4gICAgICAgICggd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiwgbnVsbCApIHx8IHsgd2lkdGg6IFwiNHB4XCIgfSApLndpZHRoID09PSBcIjRweFwiO1xuXG4gICAgICAvLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuICAgICAgLy8gRGl2IHdpdGggZXhwbGljaXQgd2lkdGggYW5kIG5vIG1hcmdpbi1yaWdodCBpbmNvcnJlY3RseVxuICAgICAgLy8gZ2V0cyBjb21wdXRlZCBtYXJnaW4tcmlnaHQgYmFzZWQgb24gd2lkdGggb2YgY29udGFpbmVyICgjMzMzMylcbiAgICAgIC8vIFdlYktpdCBCdWcgMTMzNDMgLSBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgd3JvbmcgdmFsdWUgZm9yIG1hcmdpbi1yaWdodFxuICAgICAgY29udGVudHMgPSBkaXYuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApO1xuXG4gICAgICAvLyBSZXNldCBDU1M6IGJveC1zaXppbmc7IGRpc3BsYXk7IG1hcmdpbjsgYm9yZGVyOyBwYWRkaW5nXG4gICAgICBjb250ZW50cy5zdHlsZS5jc3NUZXh0ID0gZGl2LnN0eWxlLmNzc1RleHQgPVxuICAgICAgICAvLyBTdXBwb3J0OiBGaXJlZm94PDI5LCBBbmRyb2lkIDIuM1xuICAgICAgICAvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmdcbiAgICAgICAgXCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wiICtcbiAgICAgICAgXCJib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowXCI7XG4gICAgICBjb250ZW50cy5zdHlsZS5tYXJnaW5SaWdodCA9IGNvbnRlbnRzLnN0eWxlLndpZHRoID0gXCIwXCI7XG4gICAgICBkaXYuc3R5bGUud2lkdGggPSBcIjFweFwiO1xuXG4gICAgICByZWxpYWJsZU1hcmdpblJpZ2h0VmFsID1cbiAgICAgICAgIXBhcnNlRmxvYXQoICggd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGNvbnRlbnRzLCBudWxsICkgfHwge30gKS5tYXJnaW5SaWdodCApO1xuICAgIH1cblxuICAgIC8vIFN1cHBvcnQ6IElFOFxuICAgIC8vIENoZWNrIGlmIHRhYmxlIGNlbGxzIHN0aWxsIGhhdmUgb2Zmc2V0V2lkdGgvSGVpZ2h0IHdoZW4gdGhleSBhcmUgc2V0XG4gICAgLy8gdG8gZGlzcGxheTpub25lIGFuZCB0aGVyZSBhcmUgc3RpbGwgb3RoZXIgdmlzaWJsZSB0YWJsZSBjZWxscyBpbiBhXG4gICAgLy8gdGFibGUgcm93OyBpZiBzbywgb2Zmc2V0V2lkdGgvSGVpZ2h0IGFyZSBub3QgcmVsaWFibGUgZm9yIHVzZSB3aGVuXG4gICAgLy8gZGV0ZXJtaW5pbmcgaWYgYW4gZWxlbWVudCBoYXMgYmVlbiBoaWRkZW4gZGlyZWN0bHkgdXNpbmdcbiAgICAvLyBkaXNwbGF5Om5vbmUgKGl0IGlzIHN0aWxsIHNhZmUgdG8gdXNlIG9mZnNldHMgaWYgYSBwYXJlbnQgZWxlbWVudCBpc1xuICAgIC8vIGhpZGRlbjsgZG9uIHNhZmV0eSBnb2dnbGVzIGFuZCBzZWUgYnVnICM0NTEyIGZvciBtb3JlIGluZm9ybWF0aW9uKS5cbiAgICBkaXYuaW5uZXJIVE1MID0gXCI8dGFibGU+PHRyPjx0ZD48L3RkPjx0ZD50PC90ZD48L3RyPjwvdGFibGU+XCI7XG4gICAgY29udGVudHMgPSBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwidGRcIiApO1xuICAgIGNvbnRlbnRzWyAwIF0uc3R5bGUuY3NzVGV4dCA9IFwibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZVwiO1xuICAgIHJlbGlhYmxlSGlkZGVuT2Zmc2V0c1ZhbCA9IGNvbnRlbnRzWyAwIF0ub2Zmc2V0SGVpZ2h0ID09PSAwO1xuICAgIGlmICggcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsICkge1xuICAgICAgY29udGVudHNbIDAgXS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgIGNvbnRlbnRzWyAxIF0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsID0gY29udGVudHNbIDAgXS5vZmZzZXRIZWlnaHQgPT09IDA7XG4gICAgfVxuXG4gICAgYm9keS5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7XG4gIH1cblxufSkoKTtcblxuXG4vLyBBIG1ldGhvZCBmb3IgcXVpY2tseSBzd2FwcGluZyBpbi9vdXQgQ1NTIHByb3BlcnRpZXMgdG8gZ2V0IGNvcnJlY3QgY2FsY3VsYXRpb25zLlxualF1ZXJ5LnN3YXAgPSBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgY2FsbGJhY2ssIGFyZ3MgKSB7XG4gIHZhciByZXQsIG5hbWUsXG4gICAgb2xkID0ge307XG5cbiAgLy8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzXG4gIGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcbiAgICBvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcbiAgICBlbGVtLnN0eWxlWyBuYW1lIF0gPSBvcHRpb25zWyBuYW1lIF07XG4gIH1cblxuICByZXQgPSBjYWxsYmFjay5hcHBseSggZWxlbSwgYXJncyB8fCBbXSApO1xuXG4gIC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xuICBmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG4gICAgZWxlbS5zdHlsZVsgbmFtZSBdID0gb2xkWyBuYW1lIF07XG4gIH1cblxuICByZXR1cm4gcmV0O1xufTtcblxuXG52YXJcbiAgICByYWxwaGEgPSAvYWxwaGFcXChbXildKlxcKS9pLFxuICByb3BhY2l0eSA9IC9vcGFjaXR5XFxzKj1cXHMqKFteKV0qKS8sXG5cbiAgLy8gc3dhcHBhYmxlIGlmIGRpc3BsYXkgaXMgbm9uZSBvciBzdGFydHMgd2l0aCB0YWJsZSBleGNlcHQgXCJ0YWJsZVwiLCBcInRhYmxlLWNlbGxcIiwgb3IgXCJ0YWJsZS1jYXB0aW9uXCJcbiAgLy8gc2VlIGhlcmUgZm9yIGRpc3BsYXkgdmFsdWVzOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0NTUy9kaXNwbGF5XG4gIHJkaXNwbGF5c3dhcCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxcbiAgcm51bXNwbGl0ID0gbmV3IFJlZ0V4cCggXCJeKFwiICsgcG51bSArIFwiKSguKikkXCIsIFwiaVwiICksXG4gIHJyZWxOdW0gPSBuZXcgUmVnRXhwKCBcIl4oWystXSk9KFwiICsgcG51bSArIFwiKVwiLCBcImlcIiApLFxuXG4gIGNzc1Nob3cgPSB7IHBvc2l0aW9uOiBcImFic29sdXRlXCIsIHZpc2liaWxpdHk6IFwiaGlkZGVuXCIsIGRpc3BsYXk6IFwiYmxvY2tcIiB9LFxuICBjc3NOb3JtYWxUcmFuc2Zvcm0gPSB7XG4gICAgbGV0dGVyU3BhY2luZzogXCIwXCIsXG4gICAgZm9udFdlaWdodDogXCI0MDBcIlxuICB9LFxuXG4gIGNzc1ByZWZpeGVzID0gWyBcIldlYmtpdFwiLCBcIk9cIiwgXCJNb3pcIiwgXCJtc1wiIF07XG5cblxuLy8gcmV0dXJuIGEgY3NzIHByb3BlcnR5IG1hcHBlZCB0byBhIHBvdGVudGlhbGx5IHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuZnVuY3Rpb24gdmVuZG9yUHJvcE5hbWUoIHN0eWxlLCBuYW1lICkge1xuXG4gIC8vIHNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkXG4gIGlmICggbmFtZSBpbiBzdHlsZSApIHtcbiAgICByZXR1cm4gbmFtZTtcbiAgfVxuXG4gIC8vIGNoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXNcbiAgdmFyIGNhcE5hbWUgPSBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKSxcbiAgICBvcmlnTmFtZSA9IG5hbWUsXG4gICAgaSA9IGNzc1ByZWZpeGVzLmxlbmd0aDtcblxuICB3aGlsZSAoIGktLSApIHtcbiAgICBuYW1lID0gY3NzUHJlZml4ZXNbIGkgXSArIGNhcE5hbWU7XG4gICAgaWYgKCBuYW1lIGluIHN0eWxlICkge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9yaWdOYW1lO1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7XG4gIHZhciBkaXNwbGF5LCBlbGVtLCBoaWRkZW4sXG4gICAgdmFsdWVzID0gW10sXG4gICAgaW5kZXggPSAwLFxuICAgIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuICBmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuICAgIGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcbiAgICBpZiAoICFlbGVtLnN0eWxlICkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFsdWVzWyBpbmRleCBdID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCBcIm9sZGRpc3BsYXlcIiApO1xuICAgIGRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXk7XG4gICAgaWYgKCBzaG93ICkge1xuICAgICAgLy8gUmVzZXQgdGhlIGlubGluZSBkaXNwbGF5IG9mIHRoaXMgZWxlbWVudCB0byBsZWFybiBpZiBpdCBpc1xuICAgICAgLy8gYmVpbmcgaGlkZGVuIGJ5IGNhc2NhZGVkIHJ1bGVzIG9yIG5vdFxuICAgICAgaWYgKCAhdmFsdWVzWyBpbmRleCBdICYmIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgZWxlbWVudHMgd2hpY2ggaGF2ZSBiZWVuIG92ZXJyaWRkZW4gd2l0aCBkaXNwbGF5OiBub25lXG4gICAgICAvLyBpbiBhIHN0eWxlc2hlZXQgdG8gd2hhdGV2ZXIgdGhlIGRlZmF1bHQgYnJvd3NlciBzdHlsZSBpc1xuICAgICAgLy8gZm9yIHN1Y2ggYW4gZWxlbWVudFxuICAgICAgaWYgKCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgJiYgaXNIaWRkZW4oIGVsZW0gKSApIHtcbiAgICAgICAgdmFsdWVzWyBpbmRleCBdID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCBcIm9sZGRpc3BsYXlcIiwgZGVmYXVsdERpc3BsYXkoZWxlbS5ub2RlTmFtZSkgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaGlkZGVuID0gaXNIaWRkZW4oIGVsZW0gKTtcblxuICAgICAgaWYgKCBkaXNwbGF5ICYmIGRpc3BsYXkgIT09IFwibm9uZVwiIHx8ICFoaWRkZW4gKSB7XG4gICAgICAgIGpRdWVyeS5fZGF0YSggZWxlbSwgXCJvbGRkaXNwbGF5XCIsIGhpZGRlbiA/IGRpc3BsYXkgOiBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0IHRoZSBkaXNwbGF5IG9mIG1vc3Qgb2YgdGhlIGVsZW1lbnRzIGluIGEgc2Vjb25kIGxvb3BcbiAgLy8gdG8gYXZvaWQgdGhlIGNvbnN0YW50IHJlZmxvd1xuICBmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuICAgIGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcbiAgICBpZiAoICFlbGVtLnN0eWxlICkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICggIXNob3cgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiB8fCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgKSB7XG4gICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSBzaG93ID8gdmFsdWVzWyBpbmRleCBdIHx8IFwiXCIgOiBcIm5vbmVcIjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWxlbWVudHM7XG59XG5cbmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG4gIHZhciBtYXRjaGVzID0gcm51bXNwbGl0LmV4ZWMoIHZhbHVlICk7XG4gIHJldHVybiBtYXRjaGVzID9cbiAgICAvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCBcInN1YnRyYWN0XCIsIGUuZy4sIHdoZW4gdXNlZCBhcyBpbiBjc3NIb29rc1xuICAgIE1hdGgubWF4KCAwLCBtYXRjaGVzWyAxIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAyIF0gfHwgXCJweFwiICkgOlxuICAgIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBhdWdtZW50V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEsIGlzQm9yZGVyQm94LCBzdHlsZXMgKSB7XG4gIHZhciBpID0gZXh0cmEgPT09ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSA/XG4gICAgLy8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSByaWdodCBtZWFzdXJlbWVudCwgYXZvaWQgYXVnbWVudGF0aW9uXG4gICAgNCA6XG4gICAgLy8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllc1xuICAgIG5hbWUgPT09IFwid2lkdGhcIiA/IDEgOiAwLFxuXG4gICAgdmFsID0gMDtcblxuICBmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG4gICAgLy8gYm90aCBib3ggbW9kZWxzIGV4Y2x1ZGUgbWFyZ2luLCBzbyBhZGQgaXQgaWYgd2Ugd2FudCBpdFxuICAgIGlmICggZXh0cmEgPT09IFwibWFyZ2luXCIgKSB7XG4gICAgICB2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgZXh0cmEgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG4gICAgfVxuXG4gICAgaWYgKCBpc0JvcmRlckJveCApIHtcbiAgICAgIC8vIGJvcmRlci1ib3ggaW5jbHVkZXMgcGFkZGluZywgc28gcmVtb3ZlIGl0IGlmIHdlIHdhbnQgY29udGVudFxuICAgICAgaWYgKCBleHRyYSA9PT0gXCJjb250ZW50XCIgKSB7XG4gICAgICAgIHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcbiAgICAgIH1cblxuICAgICAgLy8gYXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXJcbiAgICAgIGlmICggZXh0cmEgIT09IFwibWFyZ2luXCIgKSB7XG4gICAgICAgIHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBhdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50LCBzbyBhZGQgcGFkZGluZ1xuICAgICAgdmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG4gICAgICAvLyBhdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50IG5vciBwYWRkaW5nLCBzbyBhZGQgYm9yZGVyXG4gICAgICBpZiAoIGV4dHJhICE9PSBcInBhZGRpbmdcIiApIHtcbiAgICAgICAgdmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbDtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKSB7XG5cbiAgLy8gU3RhcnQgd2l0aCBvZmZzZXQgcHJvcGVydHksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGJvcmRlci1ib3ggdmFsdWVcbiAgdmFyIHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlLFxuICAgIHZhbCA9IG5hbWUgPT09IFwid2lkdGhcIiA/IGVsZW0ub2Zmc2V0V2lkdGggOiBlbGVtLm9mZnNldEhlaWdodCxcbiAgICBzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcbiAgICBpc0JvcmRlckJveCA9IHN1cHBvcnQuYm94U2l6aW5nICYmIGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cbiAgLy8gc29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkXG4gIC8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NVxuICAvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2NjhcbiAgaWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHtcbiAgICAvLyBGYWxsIGJhY2sgdG8gY29tcHV0ZWQgdGhlbiB1bmNvbXB1dGVkIGNzcyBpZiBuZWNlc3NhcnlcbiAgICB2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuICAgIGlmICggdmFsIDwgMCB8fCB2YWwgPT0gbnVsbCApIHtcbiAgICAgIHZhbCA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcbiAgICB9XG5cbiAgICAvLyBDb21wdXRlZCB1bml0IGlzIG5vdCBwaXhlbHMuIFN0b3AgaGVyZSBhbmQgcmV0dXJuLlxuICAgIGlmICggcm51bW5vbnB4LnRlc3QodmFsKSApIHtcbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuXG4gICAgLy8gd2UgbmVlZCB0aGUgY2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXNcbiAgICAvLyBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzaWxlbnRseSBmYWxscyBiYWNrIHRvIHRoZSByZWxpYWJsZSBlbGVtLnN0eWxlXG4gICAgdmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmICggc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpIHx8IHZhbCA9PT0gZWxlbS5zdHlsZVsgbmFtZSBdICk7XG5cbiAgICAvLyBOb3JtYWxpemUgXCJcIiwgYXV0bywgYW5kIHByZXBhcmUgZm9yIGV4dHJhXG4gICAgdmFsID0gcGFyc2VGbG9hdCggdmFsICkgfHwgMDtcbiAgfVxuXG4gIC8vIHVzZSB0aGUgYWN0aXZlIGJveC1zaXppbmcgbW9kZWwgdG8gYWRkL3N1YnRyYWN0IGlycmVsZXZhbnQgc3R5bGVzXG4gIHJldHVybiAoIHZhbCArXG4gICAgYXVnbWVudFdpZHRoT3JIZWlnaHQoXG4gICAgICBlbGVtLFxuICAgICAgbmFtZSxcbiAgICAgIGV4dHJhIHx8ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSxcbiAgICAgIHZhbHVlSXNCb3JkZXJCb3gsXG4gICAgICBzdHlsZXNcbiAgICApXG4gICkgKyBcInB4XCI7XG59XG5cbmpRdWVyeS5leHRlbmQoe1xuICAvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcbiAgLy8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG4gIGNzc0hvb2tzOiB7XG4gICAgb3BhY2l0eToge1xuICAgICAgZ2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG4gICAgICAgIGlmICggY29tcHV0ZWQgKSB7XG4gICAgICAgICAgLy8gV2Ugc2hvdWxkIGFsd2F5cyBnZXQgYSBudW1iZXIgYmFjayBmcm9tIG9wYWNpdHlcbiAgICAgICAgICB2YXIgcmV0ID0gY3VyQ1NTKCBlbGVtLCBcIm9wYWNpdHlcIiApO1xuICAgICAgICAgIHJldHVybiByZXQgPT09IFwiXCIgPyBcIjFcIiA6IHJldDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvLyBEb24ndCBhdXRvbWF0aWNhbGx5IGFkZCBcInB4XCIgdG8gdGhlc2UgcG9zc2libHktdW5pdGxlc3MgcHJvcGVydGllc1xuICBjc3NOdW1iZXI6IHtcbiAgICBcImNvbHVtbkNvdW50XCI6IHRydWUsXG4gICAgXCJmaWxsT3BhY2l0eVwiOiB0cnVlLFxuICAgIFwiZmxleEdyb3dcIjogdHJ1ZSxcbiAgICBcImZsZXhTaHJpbmtcIjogdHJ1ZSxcbiAgICBcImZvbnRXZWlnaHRcIjogdHJ1ZSxcbiAgICBcImxpbmVIZWlnaHRcIjogdHJ1ZSxcbiAgICBcIm9wYWNpdHlcIjogdHJ1ZSxcbiAgICBcIm9yZGVyXCI6IHRydWUsXG4gICAgXCJvcnBoYW5zXCI6IHRydWUsXG4gICAgXCJ3aWRvd3NcIjogdHJ1ZSxcbiAgICBcInpJbmRleFwiOiB0cnVlLFxuICAgIFwiem9vbVwiOiB0cnVlXG4gIH0sXG5cbiAgLy8gQWRkIGluIHByb3BlcnRpZXMgd2hvc2UgbmFtZXMgeW91IHdpc2ggdG8gZml4IGJlZm9yZVxuICAvLyBzZXR0aW5nIG9yIGdldHRpbmcgdGhlIHZhbHVlXG4gIGNzc1Byb3BzOiB7XG4gICAgLy8gbm9ybWFsaXplIGZsb2F0IGNzcyBwcm9wZXJ0eVxuICAgIFwiZmxvYXRcIjogc3VwcG9ydC5jc3NGbG9hdCA/IFwiY3NzRmxvYXRcIiA6IFwic3R5bGVGbG9hdFwiXG4gIH0sXG5cbiAgLy8gR2V0IGFuZCBzZXQgdGhlIHN0eWxlIHByb3BlcnR5IG9uIGEgRE9NIE5vZGVcbiAgc3R5bGU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSwgZXh0cmEgKSB7XG4gICAgLy8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG4gICAgaWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG4gICAgdmFyIHJldCwgdHlwZSwgaG9va3MsXG4gICAgICBvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSxcbiAgICAgIHN0eWxlID0gZWxlbS5zdHlsZTtcblxuICAgIG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwgKCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuICAgIC8vIGdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb25cbiAgICAvLyBmb2xsb3dlZCBieSB0aGUgdW5wcmVmaXhlZCB2ZXJzaW9uXG4gICAgaG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcbiAgICBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG4gICAgICAvLyBjb252ZXJ0IHJlbGF0aXZlIG51bWJlciBzdHJpbmdzICgrPSBvciAtPSkgdG8gcmVsYXRpdmUgbnVtYmVycy4gIzczNDVcbiAgICAgIGlmICggdHlwZSA9PT0gXCJzdHJpbmdcIiAmJiAocmV0ID0gcnJlbE51bS5leGVjKCB2YWx1ZSApKSApIHtcbiAgICAgICAgdmFsdWUgPSAoIHJldFsxXSArIDEgKSAqIHJldFsyXSArIHBhcnNlRmxvYXQoIGpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKSApO1xuICAgICAgICAvLyBGaXhlcyBidWcgIzkyMzdcbiAgICAgICAgdHlwZSA9IFwibnVtYmVyXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IG51bGwgYW5kIE5hTiB2YWx1ZXMgYXJlbid0IHNldC4gU2VlOiAjNzExNlxuICAgICAgaWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhIG51bWJlciB3YXMgcGFzc2VkIGluLCBhZGQgJ3B4JyB0byB0aGUgKGV4Y2VwdCBmb3IgY2VydGFpbiBDU1MgcHJvcGVydGllcylcbiAgICAgIGlmICggdHlwZSA9PT0gXCJudW1iZXJcIiAmJiAhalF1ZXJ5LmNzc051bWJlclsgb3JpZ05hbWUgXSApIHtcbiAgICAgICAgdmFsdWUgKz0gXCJweFwiO1xuICAgICAgfVxuXG4gICAgICAvLyBGaXhlcyAjODkwOCwgaXQgY2FuIGJlIGRvbmUgbW9yZSBjb3JyZWN0bHkgYnkgc3BlY2lmaW5nIHNldHRlcnMgaW4gY3NzSG9va3MsXG4gICAgICAvLyBidXQgaXQgd291bGQgbWVhbiB0byBkZWZpbmUgZWlnaHQgKGZvciBldmVyeSBwcm9ibGVtYXRpYyBwcm9wZXJ0eSkgaWRlbnRpY2FsIGZ1bmN0aW9uc1xuICAgICAgaWYgKCAhc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgJiYgdmFsdWUgPT09IFwiXCIgJiYgbmFtZS5pbmRleE9mKFwiYmFja2dyb3VuZFwiKSA9PT0gMCApIHtcbiAgICAgICAgc3R5bGVbIG5hbWUgXSA9IFwiaW5oZXJpdFwiO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkLCB1c2UgdGhhdCB2YWx1ZSwgb3RoZXJ3aXNlIGp1c3Qgc2V0IHRoZSBzcGVjaWZpZWQgdmFsdWVcbiAgICAgIGlmICggIWhvb2tzIHx8ICEoXCJzZXRcIiBpbiBob29rcykgfHwgKHZhbHVlID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSkgIT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAvLyBTdXBwb3J0OiBJRVxuICAgICAgICAvLyBTd2FsbG93IGVycm9ycyBmcm9tICdpbnZhbGlkJyBDU1MgdmFsdWVzICgjNTUwOSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzdHlsZVsgbmFtZSBdID0gdmFsdWU7XG4gICAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgbm9uLWNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcbiAgICAgIGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBmYWxzZSwgZXh0cmEgKSkgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cblxuICAgICAgLy8gT3RoZXJ3aXNlIGp1c3QgZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBzdHlsZSBvYmplY3RcbiAgICAgIHJldHVybiBzdHlsZVsgbmFtZSBdO1xuICAgIH1cbiAgfSxcblxuICBjc3M6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBleHRyYSwgc3R5bGVzICkge1xuICAgIHZhciBudW0sIHZhbCwgaG9va3MsXG4gICAgICBvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKTtcblxuICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZVxuICAgIG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwgKCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggZWxlbS5zdHlsZSwgb3JpZ05hbWUgKSApO1xuXG4gICAgLy8gZ2V0cyBob29rIGZvciB0aGUgcHJlZml4ZWQgdmVyc2lvblxuICAgIC8vIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIHZlcnNpb25cbiAgICBob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuICAgIC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG4gICAgaWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICkge1xuICAgICAgdmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApO1xuICAgIH1cblxuICAgIC8vIE90aGVyd2lzZSwgaWYgYSB3YXkgdG8gZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBleGlzdHMsIHVzZSB0aGF0XG4gICAgaWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcbiAgICAgIHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG4gICAgfVxuXG4gICAgLy9jb252ZXJ0IFwibm9ybWFsXCIgdG8gY29tcHV0ZWQgdmFsdWVcbiAgICBpZiAoIHZhbCA9PT0gXCJub3JtYWxcIiAmJiBuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSApIHtcbiAgICAgIHZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdO1xuICAgIH1cblxuICAgIC8vIFJldHVybiwgY29udmVydGluZyB0byBudW1iZXIgaWYgZm9yY2VkIG9yIGEgcXVhbGlmaWVyIHdhcyBwcm92aWRlZCBhbmQgdmFsIGxvb2tzIG51bWVyaWNcbiAgICBpZiAoIGV4dHJhID09PSBcIlwiIHx8IGV4dHJhICkge1xuICAgICAgbnVtID0gcGFyc2VGbG9hdCggdmFsICk7XG4gICAgICByZXR1cm4gZXh0cmEgPT09IHRydWUgfHwgalF1ZXJ5LmlzTnVtZXJpYyggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuICBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSA9IHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG4gICAgICBpZiAoIGNvbXB1dGVkICkge1xuICAgICAgICAvLyBjZXJ0YWluIGVsZW1lbnRzIGNhbiBoYXZlIGRpbWVuc2lvbiBpbmZvIGlmIHdlIGludmlzaWJseSBzaG93IHRoZW1cbiAgICAgICAgLy8gaG93ZXZlciwgaXQgbXVzdCBoYXZlIGEgY3VycmVudCBkaXNwbGF5IHN0eWxlIHRoYXQgd291bGQgYmVuZWZpdCBmcm9tIHRoaXNcbiAgICAgICAgcmV0dXJuIHJkaXNwbGF5c3dhcC50ZXN0KCBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApICkgJiYgZWxlbS5vZmZzZXRXaWR0aCA9PT0gMCA/XG4gICAgICAgICAgalF1ZXJ5LnN3YXAoIGVsZW0sIGNzc1Nob3csIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICk7XG4gICAgICAgICAgfSkgOlxuICAgICAgICAgIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHtcbiAgICAgIHZhciBzdHlsZXMgPSBleHRyYSAmJiBnZXRTdHlsZXMoIGVsZW0gKTtcbiAgICAgIHJldHVybiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIGV4dHJhID9cbiAgICAgICAgYXVnbWVudFdpZHRoT3JIZWlnaHQoXG4gICAgICAgICAgZWxlbSxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIGV4dHJhLFxuICAgICAgICAgIHN1cHBvcnQuYm94U2l6aW5nICYmIGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCIsXG4gICAgICAgICAgc3R5bGVzXG4gICAgICAgICkgOiAwXG4gICAgICApO1xuICAgIH1cbiAgfTtcbn0pO1xuXG5pZiAoICFzdXBwb3J0Lm9wYWNpdHkgKSB7XG4gIGpRdWVyeS5jc3NIb29rcy5vcGFjaXR5ID0ge1xuICAgIGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuICAgICAgLy8gSUUgdXNlcyBmaWx0ZXJzIGZvciBvcGFjaXR5XG4gICAgICByZXR1cm4gcm9wYWNpdHkudGVzdCggKGNvbXB1dGVkICYmIGVsZW0uY3VycmVudFN0eWxlID8gZWxlbS5jdXJyZW50U3R5bGUuZmlsdGVyIDogZWxlbS5zdHlsZS5maWx0ZXIpIHx8IFwiXCIgKSA/XG4gICAgICAgICggMC4wMSAqIHBhcnNlRmxvYXQoIFJlZ0V4cC4kMSApICkgKyBcIlwiIDpcbiAgICAgICAgY29tcHV0ZWQgPyBcIjFcIiA6IFwiXCI7XG4gICAgfSxcblxuICAgIHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuICAgICAgdmFyIHN0eWxlID0gZWxlbS5zdHlsZSxcbiAgICAgICAgY3VycmVudFN0eWxlID0gZWxlbS5jdXJyZW50U3R5bGUsXG4gICAgICAgIG9wYWNpdHkgPSBqUXVlcnkuaXNOdW1lcmljKCB2YWx1ZSApID8gXCJhbHBoYShvcGFjaXR5PVwiICsgdmFsdWUgKiAxMDAgKyBcIilcIiA6IFwiXCIsXG4gICAgICAgIGZpbHRlciA9IGN1cnJlbnRTdHlsZSAmJiBjdXJyZW50U3R5bGUuZmlsdGVyIHx8IHN0eWxlLmZpbHRlciB8fCBcIlwiO1xuXG4gICAgICAvLyBJRSBoYXMgdHJvdWJsZSB3aXRoIG9wYWNpdHkgaWYgaXQgZG9lcyBub3QgaGF2ZSBsYXlvdXRcbiAgICAgIC8vIEZvcmNlIGl0IGJ5IHNldHRpbmcgdGhlIHpvb20gbGV2ZWxcbiAgICAgIHN0eWxlLnpvb20gPSAxO1xuXG4gICAgICAvLyBpZiBzZXR0aW5nIG9wYWNpdHkgdG8gMSwgYW5kIG5vIG90aGVyIGZpbHRlcnMgZXhpc3QgLSBhdHRlbXB0IHRvIHJlbW92ZSBmaWx0ZXIgYXR0cmlidXRlICM2NjUyXG4gICAgICAvLyBpZiB2YWx1ZSA9PT0gXCJcIiwgdGhlbiByZW1vdmUgaW5saW5lIG9wYWNpdHkgIzEyNjg1XG4gICAgICBpZiAoICggdmFsdWUgPj0gMSB8fCB2YWx1ZSA9PT0gXCJcIiApICYmXG4gICAgICAgICAgalF1ZXJ5LnRyaW0oIGZpbHRlci5yZXBsYWNlKCByYWxwaGEsIFwiXCIgKSApID09PSBcIlwiICYmXG4gICAgICAgICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlICkge1xuXG4gICAgICAgIC8vIFNldHRpbmcgc3R5bGUuZmlsdGVyIHRvIG51bGwsIFwiXCIgJiBcIiBcIiBzdGlsbCBsZWF2ZSBcImZpbHRlcjpcIiBpbiB0aGUgY3NzVGV4dFxuICAgICAgICAvLyBpZiBcImZpbHRlcjpcIiBpcyBwcmVzZW50IGF0IGFsbCwgY2xlYXJUeXBlIGlzIGRpc2FibGVkLCB3ZSB3YW50IHRvIGF2b2lkIHRoaXNcbiAgICAgICAgLy8gc3R5bGUucmVtb3ZlQXR0cmlidXRlIGlzIElFIE9ubHksIGJ1dCBzbyBhcHBhcmVudGx5IGlzIHRoaXMgY29kZSBwYXRoLi4uXG4gICAgICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSggXCJmaWx0ZXJcIiApO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGZpbHRlciBzdHlsZSBhcHBsaWVkIGluIGEgY3NzIHJ1bGUgb3IgdW5zZXQgaW5saW5lIG9wYWNpdHksIHdlIGFyZSBkb25lXG4gICAgICAgIGlmICggdmFsdWUgPT09IFwiXCIgfHwgY3VycmVudFN0eWxlICYmICFjdXJyZW50U3R5bGUuZmlsdGVyICkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBvdGhlcndpc2UsIHNldCBuZXcgZmlsdGVyIHZhbHVlc1xuICAgICAgc3R5bGUuZmlsdGVyID0gcmFscGhhLnRlc3QoIGZpbHRlciApID9cbiAgICAgICAgZmlsdGVyLnJlcGxhY2UoIHJhbHBoYSwgb3BhY2l0eSApIDpcbiAgICAgICAgZmlsdGVyICsgXCIgXCIgKyBvcGFjaXR5O1xuICAgIH1cbiAgfTtcbn1cblxualF1ZXJ5LmNzc0hvb2tzLm1hcmdpblJpZ2h0ID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHQsXG4gIGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcbiAgICBpZiAoIGNvbXB1dGVkICkge1xuICAgICAgLy8gV2ViS2l0IEJ1ZyAxMzM0MyAtIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyB3cm9uZyB2YWx1ZSBmb3IgbWFyZ2luLXJpZ2h0XG4gICAgICAvLyBXb3JrIGFyb3VuZCBieSB0ZW1wb3JhcmlseSBzZXR0aW5nIGVsZW1lbnQgZGlzcGxheSB0byBpbmxpbmUtYmxvY2tcbiAgICAgIHJldHVybiBqUXVlcnkuc3dhcCggZWxlbSwgeyBcImRpc3BsYXlcIjogXCJpbmxpbmUtYmxvY2tcIiB9LFxuICAgICAgICBjdXJDU1MsIFsgZWxlbSwgXCJtYXJnaW5SaWdodFwiIF0gKTtcbiAgICB9XG4gIH1cbik7XG5cbi8vIFRoZXNlIGhvb2tzIGFyZSB1c2VkIGJ5IGFuaW1hdGUgdG8gZXhwYW5kIHByb3BlcnRpZXNcbmpRdWVyeS5lYWNoKHtcbiAgbWFyZ2luOiBcIlwiLFxuICBwYWRkaW5nOiBcIlwiLFxuICBib3JkZXI6IFwiV2lkdGhcIlxufSwgZnVuY3Rpb24oIHByZWZpeCwgc3VmZml4ICkge1xuICBqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdID0ge1xuICAgIGV4cGFuZDogZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgdmFyIGkgPSAwLFxuICAgICAgICBleHBhbmRlZCA9IHt9LFxuXG4gICAgICAgIC8vIGFzc3VtZXMgYSBzaW5nbGUgbnVtYmVyIGlmIG5vdCBhIHN0cmluZ1xuICAgICAgICBwYXJ0cyA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlLnNwbGl0KFwiIFwiKSA6IFsgdmFsdWUgXTtcblxuICAgICAgZm9yICggOyBpIDwgNDsgaSsrICkge1xuICAgICAgICBleHBhbmRlZFsgcHJlZml4ICsgY3NzRXhwYW5kWyBpIF0gKyBzdWZmaXggXSA9XG4gICAgICAgICAgcGFydHNbIGkgXSB8fCBwYXJ0c1sgaSAtIDIgXSB8fCBwYXJ0c1sgMCBdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZXhwYW5kZWQ7XG4gICAgfVxuICB9O1xuXG4gIGlmICggIXJtYXJnaW4udGVzdCggcHJlZml4ICkgKSB7XG4gICAgalF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXS5zZXQgPSBzZXRQb3NpdGl2ZU51bWJlcjtcbiAgfVxufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuICBjc3M6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcbiAgICByZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG4gICAgICB2YXIgc3R5bGVzLCBsZW4sXG4gICAgICAgIG1hcCA9IHt9LFxuICAgICAgICBpID0gMDtcblxuICAgICAgaWYgKCBqUXVlcnkuaXNBcnJheSggbmFtZSApICkge1xuICAgICAgICBzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKTtcbiAgICAgICAgbGVuID0gbmFtZS5sZW5ndGg7XG5cbiAgICAgICAgZm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICAgICAgbWFwWyBuYW1lWyBpIF0gXSA9IGpRdWVyeS5jc3MoIGVsZW0sIG5hbWVbIGkgXSwgZmFsc2UsIHN0eWxlcyApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hcDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgP1xuICAgICAgICBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUsIHZhbHVlICkgOlxuICAgICAgICBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG4gICAgfSwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG4gIH0sXG4gIHNob3c6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzaG93SGlkZSggdGhpcywgdHJ1ZSApO1xuICB9LFxuICBoaWRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2hvd0hpZGUoIHRoaXMgKTtcbiAgfSxcbiAgdG9nZ2xlOiBmdW5jdGlvbiggc3RhdGUgKSB7XG4gICAgaWYgKCB0eXBlb2Ygc3RhdGUgPT09IFwiYm9vbGVhblwiICkge1xuICAgICAgcmV0dXJuIHN0YXRlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCBpc0hpZGRlbiggdGhpcyApICkge1xuICAgICAgICBqUXVlcnkoIHRoaXMgKS5zaG93KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBqUXVlcnkoIHRoaXMgKS5oaWRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5cbmZ1bmN0aW9uIFR3ZWVuKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApIHtcbiAgcmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdCggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKTtcbn1cbmpRdWVyeS5Ud2VlbiA9IFR3ZWVuO1xuXG5Ud2Vlbi5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUd2VlbixcbiAgaW5pdDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nLCB1bml0ICkge1xuICAgIHRoaXMuZWxlbSA9IGVsZW07XG4gICAgdGhpcy5wcm9wID0gcHJvcDtcbiAgICB0aGlzLmVhc2luZyA9IGVhc2luZyB8fCBcInN3aW5nXCI7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpO1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIHRoaXMudW5pdCA9IHVuaXQgfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gPyBcIlwiIDogXCJweFwiICk7XG4gIH0sXG4gIGN1cjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblxuICAgIHJldHVybiBob29rcyAmJiBob29rcy5nZXQgP1xuICAgICAgaG9va3MuZ2V0KCB0aGlzICkgOlxuICAgICAgVHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCggdGhpcyApO1xuICB9LFxuICBydW46IGZ1bmN0aW9uKCBwZXJjZW50ICkge1xuICAgIHZhciBlYXNlZCxcbiAgICAgIGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblxuICAgIGlmICggdGhpcy5vcHRpb25zLmR1cmF0aW9uICkge1xuICAgICAgdGhpcy5wb3MgPSBlYXNlZCA9IGpRdWVyeS5lYXNpbmdbIHRoaXMuZWFzaW5nIF0oXG4gICAgICAgIHBlcmNlbnQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIHBlcmNlbnQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvblxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wb3MgPSBlYXNlZCA9IHBlcmNlbnQ7XG4gICAgfVxuICAgIHRoaXMubm93ID0gKCB0aGlzLmVuZCAtIHRoaXMuc3RhcnQgKSAqIGVhc2VkICsgdGhpcy5zdGFydDtcblxuICAgIGlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKCB0aGlzLmVsZW0sIHRoaXMubm93LCB0aGlzICk7XG4gICAgfVxuXG4gICAgaWYgKCBob29rcyAmJiBob29rcy5zZXQgKSB7XG4gICAgICBob29rcy5zZXQoIHRoaXMgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgVHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCggdGhpcyApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufTtcblxuVHdlZW4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlID0gVHdlZW4ucHJvdG90eXBlO1xuXG5Ud2Vlbi5wcm9wSG9va3MgPSB7XG4gIF9kZWZhdWx0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuXG4gICAgICBpZiAoIHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSAhPSBudWxsICYmXG4gICAgICAgICghdHdlZW4uZWxlbS5zdHlsZSB8fCB0d2Vlbi5lbGVtLnN0eWxlWyB0d2Vlbi5wcm9wIF0gPT0gbnVsbCkgKSB7XG4gICAgICAgIHJldHVybiB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF07XG4gICAgICB9XG5cbiAgICAgIC8vIHBhc3NpbmcgYW4gZW1wdHkgc3RyaW5nIGFzIGEgM3JkIHBhcmFtZXRlciB0byAuY3NzIHdpbGwgYXV0b21hdGljYWxseVxuICAgICAgLy8gYXR0ZW1wdCBhIHBhcnNlRmxvYXQgYW5kIGZhbGxiYWNrIHRvIGEgc3RyaW5nIGlmIHRoZSBwYXJzZSBmYWlsc1xuICAgICAgLy8gc28sIHNpbXBsZSB2YWx1ZXMgc3VjaCBhcyBcIjEwcHhcIiBhcmUgcGFyc2VkIHRvIEZsb2F0LlxuICAgICAgLy8gY29tcGxleCB2YWx1ZXMgc3VjaCBhcyBcInJvdGF0ZSgxcmFkKVwiIGFyZSByZXR1cm5lZCBhcyBpcy5cbiAgICAgIHJlc3VsdCA9IGpRdWVyeS5jc3MoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIFwiXCIgKTtcbiAgICAgIC8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZCBhbmQgXCJhdXRvXCIgYXJlIGNvbnZlcnRlZCB0byAwLlxuICAgICAgcmV0dXJuICFyZXN1bHQgfHwgcmVzdWx0ID09PSBcImF1dG9cIiA/IDAgOiByZXN1bHQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcbiAgICAgIC8vIHVzZSBzdGVwIGhvb2sgZm9yIGJhY2sgY29tcGF0IC0gdXNlIGNzc0hvb2sgaWYgaXRzIHRoZXJlIC0gdXNlIC5zdHlsZSBpZiBpdHNcbiAgICAgIC8vIGF2YWlsYWJsZSBhbmQgdXNlIHBsYWluIHByb3BlcnRpZXMgd2hlcmUgYXZhaWxhYmxlXG4gICAgICBpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG4gICAgICAgIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7XG4gICAgICB9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLnN0eWxlICYmICggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8IGpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7XG4gICAgICAgIGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLy8gU3VwcG9ydDogSUUgPD05XG4vLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblxuVHdlZW4ucHJvcEhvb2tzLnNjcm9sbFRvcCA9IFR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0ID0ge1xuICBzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcbiAgICBpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgJiYgdHdlZW4uZWxlbS5wYXJlbnROb2RlICkge1xuICAgICAgdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuICAgIH1cbiAgfVxufTtcblxualF1ZXJ5LmVhc2luZyA9IHtcbiAgbGluZWFyOiBmdW5jdGlvbiggcCApIHtcbiAgICByZXR1cm4gcDtcbiAgfSxcbiAgc3dpbmc6IGZ1bmN0aW9uKCBwICkge1xuICAgIHJldHVybiAwLjUgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgKSAvIDI7XG4gIH1cbn07XG5cbmpRdWVyeS5meCA9IFR3ZWVuLnByb3RvdHlwZS5pbml0O1xuXG4vLyBCYWNrIENvbXBhdCA8MS44IGV4dGVuc2lvbiBwb2ludFxualF1ZXJ5LmZ4LnN0ZXAgPSB7fTtcblxuXG5cblxudmFyXG4gIGZ4Tm93LCB0aW1lcklkLFxuICByZnh0eXBlcyA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxcbiAgcmZ4bnVtID0gbmV3IFJlZ0V4cCggXCJeKD86KFsrLV0pPXwpKFwiICsgcG51bSArIFwiKShbYS16JV0qKSRcIiwgXCJpXCIgKSxcbiAgcnJ1biA9IC9xdWV1ZUhvb2tzJC8sXG4gIGFuaW1hdGlvblByZWZpbHRlcnMgPSBbIGRlZmF1bHRQcmVmaWx0ZXIgXSxcbiAgdHdlZW5lcnMgPSB7XG4gICAgXCIqXCI6IFsgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xuICAgICAgdmFyIHR3ZWVuID0gdGhpcy5jcmVhdGVUd2VlbiggcHJvcCwgdmFsdWUgKSxcbiAgICAgICAgdGFyZ2V0ID0gdHdlZW4uY3VyKCksXG4gICAgICAgIHBhcnRzID0gcmZ4bnVtLmV4ZWMoIHZhbHVlICksXG4gICAgICAgIHVuaXQgPSBwYXJ0cyAmJiBwYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApLFxuXG4gICAgICAgIC8vIFN0YXJ0aW5nIHZhbHVlIGNvbXB1dGF0aW9uIGlzIHJlcXVpcmVkIGZvciBwb3RlbnRpYWwgdW5pdCBtaXNtYXRjaGVzXG4gICAgICAgIHN0YXJ0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gXCJweFwiICYmICt0YXJnZXQgKSAmJlxuICAgICAgICAgIHJmeG51bS5leGVjKCBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCBwcm9wICkgKSxcbiAgICAgICAgc2NhbGUgPSAxLFxuICAgICAgICBtYXhJdGVyYXRpb25zID0gMjA7XG5cbiAgICAgIGlmICggc3RhcnQgJiYgc3RhcnRbIDMgXSAhPT0gdW5pdCApIHtcbiAgICAgICAgLy8gVHJ1c3QgdW5pdHMgcmVwb3J0ZWQgYnkgalF1ZXJ5LmNzc1xuICAgICAgICB1bml0ID0gdW5pdCB8fCBzdGFydFsgMyBdO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSB1cGRhdGUgdGhlIHR3ZWVuIHByb3BlcnRpZXMgbGF0ZXIgb25cbiAgICAgICAgcGFydHMgPSBwYXJ0cyB8fCBbXTtcblxuICAgICAgICAvLyBJdGVyYXRpdmVseSBhcHByb3hpbWF0ZSBmcm9tIGEgbm9uemVybyBzdGFydGluZyBwb2ludFxuICAgICAgICBzdGFydCA9ICt0YXJnZXQgfHwgMTtcblxuICAgICAgICBkbyB7XG4gICAgICAgICAgLy8gSWYgcHJldmlvdXMgaXRlcmF0aW9uIHplcm9lZCBvdXQsIGRvdWJsZSB1bnRpbCB3ZSBnZXQgKnNvbWV0aGluZypcbiAgICAgICAgICAvLyBVc2UgYSBzdHJpbmcgZm9yIGRvdWJsaW5nIGZhY3RvciBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgc2VlIHNjYWxlIGFzIHVuY2hhbmdlZCBiZWxvd1xuICAgICAgICAgIHNjYWxlID0gc2NhbGUgfHwgXCIuNVwiO1xuXG4gICAgICAgICAgLy8gQWRqdXN0IGFuZCBhcHBseVxuICAgICAgICAgIHN0YXJ0ID0gc3RhcnQgLyBzY2FsZTtcbiAgICAgICAgICBqUXVlcnkuc3R5bGUoIHR3ZWVuLmVsZW0sIHByb3AsIHN0YXJ0ICsgdW5pdCApO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBzY2FsZSwgdG9sZXJhdGluZyB6ZXJvIG9yIE5hTiBmcm9tIHR3ZWVuLmN1cigpXG4gICAgICAgIC8vIEFuZCBicmVha2luZyB0aGUgbG9vcCBpZiBzY2FsZSBpcyB1bmNoYW5nZWQgb3IgcGVyZmVjdCwgb3IgaWYgd2UndmUganVzdCBoYWQgZW5vdWdoXG4gICAgICAgIH0gd2hpbGUgKCBzY2FsZSAhPT0gKHNjYWxlID0gdHdlZW4uY3VyKCkgLyB0YXJnZXQpICYmIHNjYWxlICE9PSAxICYmIC0tbWF4SXRlcmF0aW9ucyApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdHdlZW4gcHJvcGVydGllc1xuICAgICAgaWYgKCBwYXJ0cyApIHtcbiAgICAgICAgc3RhcnQgPSB0d2Vlbi5zdGFydCA9ICtzdGFydCB8fCArdGFyZ2V0IHx8IDA7XG4gICAgICAgIHR3ZWVuLnVuaXQgPSB1bml0O1xuICAgICAgICAvLyBJZiBhICs9Ly09IHRva2VuIHdhcyBwcm92aWRlZCwgd2UncmUgZG9pbmcgYSByZWxhdGl2ZSBhbmltYXRpb25cbiAgICAgICAgdHdlZW4uZW5kID0gcGFydHNbIDEgXSA/XG4gICAgICAgICAgc3RhcnQgKyAoIHBhcnRzWyAxIF0gKyAxICkgKiBwYXJ0c1sgMiBdIDpcbiAgICAgICAgICArcGFydHNbIDIgXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHR3ZWVuO1xuICAgIH0gXVxuICB9O1xuXG4vLyBBbmltYXRpb25zIGNyZWF0ZWQgc3luY2hyb25vdXNseSB3aWxsIHJ1biBzeW5jaHJvbm91c2x5XG5mdW5jdGlvbiBjcmVhdGVGeE5vdygpIHtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBmeE5vdyA9IHVuZGVmaW5lZDtcbiAgfSk7XG4gIHJldHVybiAoIGZ4Tm93ID0galF1ZXJ5Lm5vdygpICk7XG59XG5cbi8vIEdlbmVyYXRlIHBhcmFtZXRlcnMgdG8gY3JlYXRlIGEgc3RhbmRhcmQgYW5pbWF0aW9uXG5mdW5jdGlvbiBnZW5GeCggdHlwZSwgaW5jbHVkZVdpZHRoICkge1xuICB2YXIgd2hpY2gsXG4gICAgYXR0cnMgPSB7IGhlaWdodDogdHlwZSB9LFxuICAgIGkgPSAwO1xuXG4gIC8vIGlmIHdlIGluY2x1ZGUgd2lkdGgsIHN0ZXAgdmFsdWUgaXMgMSB0byBkbyBhbGwgY3NzRXhwYW5kIHZhbHVlcyxcbiAgLy8gaWYgd2UgZG9uJ3QgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodFxuICBpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcbiAgZm9yICggOyBpIDwgNCA7IGkgKz0gMiAtIGluY2x1ZGVXaWR0aCApIHtcbiAgICB3aGljaCA9IGNzc0V4cGFuZFsgaSBdO1xuICAgIGF0dHJzWyBcIm1hcmdpblwiICsgd2hpY2ggXSA9IGF0dHJzWyBcInBhZGRpbmdcIiArIHdoaWNoIF0gPSB0eXBlO1xuICB9XG5cbiAgaWYgKCBpbmNsdWRlV2lkdGggKSB7XG4gICAgYXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTtcbiAgfVxuXG4gIHJldHVybiBhdHRycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7XG4gIHZhciB0d2VlbixcbiAgICBjb2xsZWN0aW9uID0gKCB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCB0d2VlbmVyc1sgXCIqXCIgXSApLFxuICAgIGluZGV4ID0gMCxcbiAgICBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcbiAgZm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcbiAgICBpZiAoICh0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApKSApIHtcblxuICAgICAgLy8gd2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHlcbiAgICAgIHJldHVybiB0d2VlbjtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlciggZWxlbSwgcHJvcHMsIG9wdHMgKSB7XG4gIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgdmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIHR3ZWVuLCBob29rcywgb2xkZmlyZSwgZGlzcGxheSwgY2hlY2tEaXNwbGF5LFxuICAgIGFuaW0gPSB0aGlzLFxuICAgIG9yaWcgPSB7fSxcbiAgICBzdHlsZSA9IGVsZW0uc3R5bGUsXG4gICAgaGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbiggZWxlbSApLFxuICAgIGRhdGFTaG93ID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cbiAgLy8gaGFuZGxlIHF1ZXVlOiBmYWxzZSBwcm9taXNlc1xuICBpZiAoICFvcHRzLnF1ZXVlICkge1xuICAgIGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCBcImZ4XCIgKTtcbiAgICBpZiAoIGhvb2tzLnVucXVldWVkID09IG51bGwgKSB7XG4gICAgICBob29rcy51bnF1ZXVlZCA9IDA7XG4gICAgICBvbGRmaXJlID0gaG9va3MuZW1wdHkuZmlyZTtcbiAgICAgIGhvb2tzLmVtcHR5LmZpcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCAhaG9va3MudW5xdWV1ZWQgKSB7XG4gICAgICAgICAgb2xkZmlyZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBob29rcy51bnF1ZXVlZCsrO1xuXG4gICAgYW5pbS5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAvLyBkb2luZyB0aGlzIG1ha2VzIHN1cmUgdGhhdCB0aGUgY29tcGxldGUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZFxuICAgICAgLy8gYmVmb3JlIHRoaXMgY29tcGxldGVzXG4gICAgICBhbmltLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgaG9va3MudW5xdWV1ZWQtLTtcbiAgICAgICAgaWYgKCAhalF1ZXJ5LnF1ZXVlKCBlbGVtLCBcImZ4XCIgKS5sZW5ndGggKSB7XG4gICAgICAgICAgaG9va3MuZW1wdHkuZmlyZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGhlaWdodC93aWR0aCBvdmVyZmxvdyBwYXNzXG4gIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIFwiaGVpZ2h0XCIgaW4gcHJvcHMgfHwgXCJ3aWR0aFwiIGluIHByb3BzICkgKSB7XG4gICAgLy8gTWFrZSBzdXJlIHRoYXQgbm90aGluZyBzbmVha3Mgb3V0XG4gICAgLy8gUmVjb3JkIGFsbCAzIG92ZXJmbG93IGF0dHJpYnV0ZXMgYmVjYXVzZSBJRSBkb2VzIG5vdFxuICAgIC8vIGNoYW5nZSB0aGUgb3ZlcmZsb3cgYXR0cmlidXRlIHdoZW4gb3ZlcmZsb3dYIGFuZFxuICAgIC8vIG92ZXJmbG93WSBhcmUgc2V0IHRvIHRoZSBzYW1lIHZhbHVlXG4gICAgb3B0cy5vdmVyZmxvdyA9IFsgc3R5bGUub3ZlcmZsb3csIHN0eWxlLm92ZXJmbG93WCwgc3R5bGUub3ZlcmZsb3dZIF07XG5cbiAgICAvLyBTZXQgZGlzcGxheSBwcm9wZXJ0eSB0byBpbmxpbmUtYmxvY2sgZm9yIGhlaWdodC93aWR0aFxuICAgIC8vIGFuaW1hdGlvbnMgb24gaW5saW5lIGVsZW1lbnRzIHRoYXQgYXJlIGhhdmluZyB3aWR0aC9oZWlnaHQgYW5pbWF0ZWRcbiAgICBkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblxuICAgIC8vIFRlc3QgZGVmYXVsdCBkaXNwbGF5IGlmIGRpc3BsYXkgaXMgY3VycmVudGx5IFwibm9uZVwiXG4gICAgY2hlY2tEaXNwbGF5ID0gZGlzcGxheSA9PT0gXCJub25lXCIgP1xuICAgICAgalF1ZXJ5Ll9kYXRhKCBlbGVtLCBcIm9sZGRpc3BsYXlcIiApIHx8IGRlZmF1bHREaXNwbGF5KCBlbGVtLm5vZGVOYW1lICkgOiBkaXNwbGF5O1xuXG4gICAgaWYgKCBjaGVja0Rpc3BsYXkgPT09IFwiaW5saW5lXCIgJiYgalF1ZXJ5LmNzcyggZWxlbSwgXCJmbG9hdFwiICkgPT09IFwibm9uZVwiICkge1xuXG4gICAgICAvLyBpbmxpbmUtbGV2ZWwgZWxlbWVudHMgYWNjZXB0IGlubGluZS1ibG9jaztcbiAgICAgIC8vIGJsb2NrLWxldmVsIGVsZW1lbnRzIG5lZWQgdG8gYmUgaW5saW5lIHdpdGggbGF5b3V0XG4gICAgICBpZiAoICFzdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQgfHwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA9PT0gXCJpbmxpbmVcIiApIHtcbiAgICAgICAgc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHlsZS56b29tID0gMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoIG9wdHMub3ZlcmZsb3cgKSB7XG4gICAgc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgIGlmICggIXN1cHBvcnQuc2hyaW5rV3JhcEJsb2NrcygpICkge1xuICAgICAgYW5pbS5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgIHN0eWxlLm92ZXJmbG93ID0gb3B0cy5vdmVyZmxvd1sgMCBdO1xuICAgICAgICBzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07XG4gICAgICAgIHN0eWxlLm92ZXJmbG93WSA9IG9wdHMub3ZlcmZsb3dbIDIgXTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIHNob3cvaGlkZSBwYXNzXG4gIGZvciAoIHByb3AgaW4gcHJvcHMgKSB7XG4gICAgdmFsdWUgPSBwcm9wc1sgcHJvcCBdO1xuICAgIGlmICggcmZ4dHlwZXMuZXhlYyggdmFsdWUgKSApIHtcbiAgICAgIGRlbGV0ZSBwcm9wc1sgcHJvcCBdO1xuICAgICAgdG9nZ2xlID0gdG9nZ2xlIHx8IHZhbHVlID09PSBcInRvZ2dsZVwiO1xuICAgICAgaWYgKCB2YWx1ZSA9PT0gKCBoaWRkZW4gPyBcImhpZGVcIiA6IFwic2hvd1wiICkgKSB7XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgZGF0YVNob3cgbGVmdCBvdmVyIGZyb20gYSBzdG9wcGVkIGhpZGUgb3Igc2hvdyBhbmQgd2UgYXJlIGdvaW5nIHRvIHByb2NlZWQgd2l0aCBzaG93LCB3ZSBzaG91bGQgcHJldGVuZCB0byBiZSBoaWRkZW5cbiAgICAgICAgaWYgKCB2YWx1ZSA9PT0gXCJzaG93XCIgJiYgZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgIGhpZGRlbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9yaWdbIHByb3AgXSA9IGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gfHwgalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wICk7XG5cbiAgICAvLyBBbnkgbm9uLWZ4IHZhbHVlIHN0b3BzIHVzIGZyb20gcmVzdG9yaW5nIHRoZSBvcmlnaW5hbCBkaXNwbGF5IHZhbHVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGRpc3BsYXkgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgaWYgKCAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIG9yaWcgKSApIHtcbiAgICBpZiAoIGRhdGFTaG93ICkge1xuICAgICAgaWYgKCBcImhpZGRlblwiIGluIGRhdGFTaG93ICkge1xuICAgICAgICBoaWRkZW4gPSBkYXRhU2hvdy5oaWRkZW47XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGFTaG93ID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCBcImZ4c2hvd1wiLCB7fSApO1xuICAgIH1cblxuICAgIC8vIHN0b3JlIHN0YXRlIGlmIGl0cyB0b2dnbGUgLSBlbmFibGVzIC5zdG9wKCkudG9nZ2xlKCkgdG8gXCJyZXZlcnNlXCJcbiAgICBpZiAoIHRvZ2dsZSApIHtcbiAgICAgIGRhdGFTaG93LmhpZGRlbiA9ICFoaWRkZW47XG4gICAgfVxuICAgIGlmICggaGlkZGVuICkge1xuICAgICAgalF1ZXJ5KCBlbGVtICkuc2hvdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhbmltLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgIGpRdWVyeSggZWxlbSApLmhpZGUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBhbmltLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcHJvcDtcbiAgICAgIGpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwgXCJmeHNob3dcIiApO1xuICAgICAgZm9yICggcHJvcCBpbiBvcmlnICkge1xuICAgICAgICBqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIG9yaWdbIHByb3AgXSApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGZvciAoIHByb3AgaW4gb3JpZyApIHtcbiAgICAgIHR3ZWVuID0gY3JlYXRlVHdlZW4oIGhpZGRlbiA/IGRhdGFTaG93WyBwcm9wIF0gOiAwLCBwcm9wLCBhbmltICk7XG5cbiAgICAgIGlmICggISggcHJvcCBpbiBkYXRhU2hvdyApICkge1xuICAgICAgICBkYXRhU2hvd1sgcHJvcCBdID0gdHdlZW4uc3RhcnQ7XG4gICAgICAgIGlmICggaGlkZGVuICkge1xuICAgICAgICAgIHR3ZWVuLmVuZCA9IHR3ZWVuLnN0YXJ0O1xuICAgICAgICAgIHR3ZWVuLnN0YXJ0ID0gcHJvcCA9PT0gXCJ3aWR0aFwiIHx8IHByb3AgPT09IFwiaGVpZ2h0XCIgPyAxIDogMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAvLyBJZiB0aGlzIGlzIGEgbm9vcCBsaWtlIC5oaWRlKCkuaGlkZSgpLCByZXN0b3JlIGFuIG92ZXJ3cml0dGVuIGRpc3BsYXkgdmFsdWVcbiAgfSBlbHNlIGlmICggKGRpc3BsYXkgPT09IFwibm9uZVwiID8gZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXkpID09PSBcImlubGluZVwiICkge1xuICAgIHN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkge1xuICB2YXIgaW5kZXgsIG5hbWUsIGVhc2luZywgdmFsdWUsIGhvb2tzO1xuXG4gIC8vIGNhbWVsQ2FzZSwgc3BlY2lhbEVhc2luZyBhbmQgZXhwYW5kIGNzc0hvb2sgcGFzc1xuICBmb3IgKCBpbmRleCBpbiBwcm9wcyApIHtcbiAgICBuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggaW5kZXggKTtcbiAgICBlYXNpbmcgPSBzcGVjaWFsRWFzaW5nWyBuYW1lIF07XG4gICAgdmFsdWUgPSBwcm9wc1sgaW5kZXggXTtcbiAgICBpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWx1ZSApICkge1xuICAgICAgZWFzaW5nID0gdmFsdWVbIDEgXTtcbiAgICAgIHZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdO1xuICAgIH1cblxuICAgIGlmICggaW5kZXggIT09IG5hbWUgKSB7XG4gICAgICBwcm9wc1sgbmFtZSBdID0gdmFsdWU7XG4gICAgICBkZWxldGUgcHJvcHNbIGluZGV4IF07XG4gICAgfVxuXG4gICAgaG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTtcbiAgICBpZiAoIGhvb2tzICYmIFwiZXhwYW5kXCIgaW4gaG9va3MgKSB7XG4gICAgICB2YWx1ZSA9IGhvb2tzLmV4cGFuZCggdmFsdWUgKTtcbiAgICAgIGRlbGV0ZSBwcm9wc1sgbmFtZSBdO1xuXG4gICAgICAvLyBub3QgcXVpdGUgJC5leHRlbmQsIHRoaXMgd29udCBvdmVyd3JpdGUga2V5cyBhbHJlYWR5IHByZXNlbnQuXG4gICAgICAvLyBhbHNvIC0gcmV1c2luZyAnaW5kZXgnIGZyb20gYWJvdmUgYmVjYXVzZSB3ZSBoYXZlIHRoZSBjb3JyZWN0IFwibmFtZVwiXG4gICAgICBmb3IgKCBpbmRleCBpbiB2YWx1ZSApIHtcbiAgICAgICAgaWYgKCAhKCBpbmRleCBpbiBwcm9wcyApICkge1xuICAgICAgICAgIHByb3BzWyBpbmRleCBdID0gdmFsdWVbIGluZGV4IF07XG4gICAgICAgICAgc3BlY2lhbEVhc2luZ1sgaW5kZXggXSA9IGVhc2luZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVjaWFsRWFzaW5nWyBuYW1lIF0gPSBlYXNpbmc7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIEFuaW1hdGlvbiggZWxlbSwgcHJvcGVydGllcywgb3B0aW9ucyApIHtcbiAgdmFyIHJlc3VsdCxcbiAgICBzdG9wcGVkLFxuICAgIGluZGV4ID0gMCxcbiAgICBsZW5ndGggPSBhbmltYXRpb25QcmVmaWx0ZXJzLmxlbmd0aCxcbiAgICBkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLmFsd2F5cyggZnVuY3Rpb24oKSB7XG4gICAgICAvLyBkb24ndCBtYXRjaCBlbGVtIGluIHRoZSA6YW5pbWF0ZWQgc2VsZWN0b3JcbiAgICAgIGRlbGV0ZSB0aWNrLmVsZW07XG4gICAgfSksXG4gICAgdGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCBzdG9wcGVkICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgY3VycmVudFRpbWUgPSBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLFxuICAgICAgICByZW1haW5pbmcgPSBNYXRoLm1heCggMCwgYW5pbWF0aW9uLnN0YXJ0VGltZSArIGFuaW1hdGlvbi5kdXJhdGlvbiAtIGN1cnJlbnRUaW1lICksXG4gICAgICAgIC8vIGFyY2hhaWMgY3Jhc2ggYnVnIHdvbid0IGFsbG93IHVzIHRvIHVzZSAxIC0gKCAwLjUgfHwgMCApICgjMTI0OTcpXG4gICAgICAgIHRlbXAgPSByZW1haW5pbmcgLyBhbmltYXRpb24uZHVyYXRpb24gfHwgMCxcbiAgICAgICAgcGVyY2VudCA9IDEgLSB0ZW1wLFxuICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgIGxlbmd0aCA9IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO1xuXG4gICAgICBmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcbiAgICAgICAgYW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTtcbiAgICAgIH1cblxuICAgICAgZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIHBlcmNlbnQsIHJlbWFpbmluZyBdKTtcblxuICAgICAgaWYgKCBwZXJjZW50IDwgMSAmJiBsZW5ndGggKSB7XG4gICAgICAgIHJldHVybiByZW1haW5pbmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24gXSApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgICBhbmltYXRpb24gPSBkZWZlcnJlZC5wcm9taXNlKHtcbiAgICAgIGVsZW06IGVsZW0sXG4gICAgICBwcm9wczogalF1ZXJ5LmV4dGVuZCgge30sIHByb3BlcnRpZXMgKSxcbiAgICAgIG9wdHM6IGpRdWVyeS5leHRlbmQoIHRydWUsIHsgc3BlY2lhbEVhc2luZzoge30gfSwgb3B0aW9ucyApLFxuICAgICAgb3JpZ2luYWxQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuICAgICAgb3JpZ2luYWxPcHRpb25zOiBvcHRpb25zLFxuICAgICAgc3RhcnRUaW1lOiBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLFxuICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sXG4gICAgICB0d2VlbnM6IFtdLFxuICAgICAgY3JlYXRlVHdlZW46IGZ1bmN0aW9uKCBwcm9wLCBlbmQgKSB7XG4gICAgICAgIHZhciB0d2VlbiA9IGpRdWVyeS5Ud2VlbiggZWxlbSwgYW5pbWF0aW9uLm9wdHMsIHByb3AsIGVuZCxcbiAgICAgICAgICAgIGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmdbIHByb3AgXSB8fCBhbmltYXRpb24ub3B0cy5lYXNpbmcgKTtcbiAgICAgICAgYW5pbWF0aW9uLnR3ZWVucy5wdXNoKCB0d2VlbiApO1xuICAgICAgICByZXR1cm4gdHdlZW47XG4gICAgICB9LFxuICAgICAgc3RvcDogZnVuY3Rpb24oIGdvdG9FbmQgKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgICAgLy8gaWYgd2UgYXJlIGdvaW5nIHRvIHRoZSBlbmQsIHdlIHdhbnQgdG8gcnVuIGFsbCB0aGUgdHdlZW5zXG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIHNraXAgdGhpcyBwYXJ0XG4gICAgICAgICAgbGVuZ3RoID0gZ290b0VuZCA/IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoIDogMDtcbiAgICAgICAgaWYgKCBzdG9wcGVkICkge1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHN0b3BwZWQgPSB0cnVlO1xuICAgICAgICBmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcbiAgICAgICAgICBhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggMSApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVzb2x2ZSB3aGVuIHdlIHBsYXllZCB0aGUgbGFzdCBmcmFtZVxuICAgICAgICAvLyBvdGhlcndpc2UsIHJlamVjdFxuICAgICAgICBpZiAoIGdvdG9FbmQgKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3RXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfSksXG4gICAgcHJvcHMgPSBhbmltYXRpb24ucHJvcHM7XG5cbiAgcHJvcEZpbHRlciggcHJvcHMsIGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmcgKTtcblxuICBmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcbiAgICByZXN1bHQgPSBhbmltYXRpb25QcmVmaWx0ZXJzWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgZWxlbSwgcHJvcHMsIGFuaW1hdGlvbi5vcHRzICk7XG4gICAgaWYgKCByZXN1bHQgKSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfVxuXG4gIGpRdWVyeS5tYXAoIHByb3BzLCBjcmVhdGVUd2VlbiwgYW5pbWF0aW9uICk7XG5cbiAgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggYW5pbWF0aW9uLm9wdHMuc3RhcnQgKSApIHtcbiAgICBhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTtcbiAgfVxuXG4gIGpRdWVyeS5meC50aW1lcihcbiAgICBqUXVlcnkuZXh0ZW5kKCB0aWNrLCB7XG4gICAgICBlbGVtOiBlbGVtLFxuICAgICAgYW5pbTogYW5pbWF0aW9uLFxuICAgICAgcXVldWU6IGFuaW1hdGlvbi5vcHRzLnF1ZXVlXG4gICAgfSlcbiAgKTtcblxuICAvLyBhdHRhY2ggY2FsbGJhY2tzIGZyb20gb3B0aW9uc1xuICByZXR1cm4gYW5pbWF0aW9uLnByb2dyZXNzKCBhbmltYXRpb24ub3B0cy5wcm9ncmVzcyApXG4gICAgLmRvbmUoIGFuaW1hdGlvbi5vcHRzLmRvbmUsIGFuaW1hdGlvbi5vcHRzLmNvbXBsZXRlIClcbiAgICAuZmFpbCggYW5pbWF0aW9uLm9wdHMuZmFpbCApXG4gICAgLmFsd2F5cyggYW5pbWF0aW9uLm9wdHMuYWx3YXlzICk7XG59XG5cbmpRdWVyeS5BbmltYXRpb24gPSBqUXVlcnkuZXh0ZW5kKCBBbmltYXRpb24sIHtcbiAgdHdlZW5lcjogZnVuY3Rpb24oIHByb3BzLCBjYWxsYmFjayApIHtcbiAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwcm9wcyApICkge1xuICAgICAgY2FsbGJhY2sgPSBwcm9wcztcbiAgICAgIHByb3BzID0gWyBcIipcIiBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9wcyA9IHByb3BzLnNwbGl0KFwiIFwiKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvcCxcbiAgICAgIGluZGV4ID0gMCxcbiAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuICAgIGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuICAgICAgcHJvcCA9IHByb3BzWyBpbmRleCBdO1xuICAgICAgdHdlZW5lcnNbIHByb3AgXSA9IHR3ZWVuZXJzWyBwcm9wIF0gfHwgW107XG4gICAgICB0d2VlbmVyc1sgcHJvcCBdLnVuc2hpZnQoIGNhbGxiYWNrICk7XG4gICAgfVxuICB9LFxuXG4gIHByZWZpbHRlcjogZnVuY3Rpb24oIGNhbGxiYWNrLCBwcmVwZW5kICkge1xuICAgIGlmICggcHJlcGVuZCApIHtcbiAgICAgIGFuaW1hdGlvblByZWZpbHRlcnMudW5zaGlmdCggY2FsbGJhY2sgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYW5pbWF0aW9uUHJlZmlsdGVycy5wdXNoKCBjYWxsYmFjayApO1xuICAgIH1cbiAgfVxufSk7XG5cbmpRdWVyeS5zcGVlZCA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBmbiApIHtcbiAgdmFyIG9wdCA9IHNwZWVkICYmIHR5cGVvZiBzcGVlZCA9PT0gXCJvYmplY3RcIiA/IGpRdWVyeS5leHRlbmQoIHt9LCBzcGVlZCApIDoge1xuICAgIGNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8XG4gICAgICBqUXVlcnkuaXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCxcbiAgICBkdXJhdGlvbjogc3BlZWQsXG4gICAgZWFzaW5nOiBmbiAmJiBlYXNpbmcgfHwgZWFzaW5nICYmICFqUXVlcnkuaXNGdW5jdGlvbiggZWFzaW5nICkgJiYgZWFzaW5nXG4gIH07XG5cbiAgb3B0LmR1cmF0aW9uID0galF1ZXJ5LmZ4Lm9mZiA/IDAgOiB0eXBlb2Ygb3B0LmR1cmF0aW9uID09PSBcIm51bWJlclwiID8gb3B0LmR1cmF0aW9uIDpcbiAgICBvcHQuZHVyYXRpb24gaW4galF1ZXJ5LmZ4LnNwZWVkcyA/IGpRdWVyeS5meC5zcGVlZHNbIG9wdC5kdXJhdGlvbiBdIDogalF1ZXJ5LmZ4LnNwZWVkcy5fZGVmYXVsdDtcblxuICAvLyBub3JtYWxpemUgb3B0LnF1ZXVlIC0gdHJ1ZS91bmRlZmluZWQvbnVsbCAtPiBcImZ4XCJcbiAgaWYgKCBvcHQucXVldWUgPT0gbnVsbCB8fCBvcHQucXVldWUgPT09IHRydWUgKSB7XG4gICAgb3B0LnF1ZXVlID0gXCJmeFwiO1xuICB9XG5cbiAgLy8gUXVldWVpbmdcbiAgb3B0Lm9sZCA9IG9wdC5jb21wbGV0ZTtcblxuICBvcHQuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHQub2xkICkgKSB7XG4gICAgICBvcHQub2xkLmNhbGwoIHRoaXMgKTtcbiAgICB9XG5cbiAgICBpZiAoIG9wdC5xdWV1ZSApIHtcbiAgICAgIGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCBvcHQucXVldWUgKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIG9wdDtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuICBmYWRlVG86IGZ1bmN0aW9uKCBzcGVlZCwgdG8sIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cbiAgICAvLyBzaG93IGFueSBoaWRkZW4gZWxlbWVudHMgYWZ0ZXIgc2V0dGluZyBvcGFjaXR5IHRvIDBcbiAgICByZXR1cm4gdGhpcy5maWx0ZXIoIGlzSGlkZGVuICkuY3NzKCBcIm9wYWNpdHlcIiwgMCApLnNob3coKVxuXG4gICAgICAvLyBhbmltYXRlIHRvIHRoZSB2YWx1ZSBzcGVjaWZpZWRcbiAgICAgIC5lbmQoKS5hbmltYXRlKHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcbiAgfSxcbiAgYW5pbWF0ZTogZnVuY3Rpb24oIHByb3AsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuICAgIHZhciBlbXB0eSA9IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBwcm9wICksXG4gICAgICBvcHRhbGwgPSBqUXVlcnkuc3BlZWQoIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICksXG4gICAgICBkb0FuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBPcGVyYXRlIG9uIGEgY29weSBvZiBwcm9wIHNvIHBlci1wcm9wZXJ0eSBlYXNpbmcgd29uJ3QgYmUgbG9zdFxuICAgICAgICB2YXIgYW5pbSA9IEFuaW1hdGlvbiggdGhpcywgalF1ZXJ5LmV4dGVuZCgge30sIHByb3AgKSwgb3B0YWxsICk7XG5cbiAgICAgICAgLy8gRW1wdHkgYW5pbWF0aW9ucywgb3IgZmluaXNoaW5nIHJlc29sdmVzIGltbWVkaWF0ZWx5XG4gICAgICAgIGlmICggZW1wdHkgfHwgalF1ZXJ5Ll9kYXRhKCB0aGlzLCBcImZpbmlzaFwiICkgKSB7XG4gICAgICAgICAgYW5pbS5zdG9wKCB0cnVlICk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBkb0FuaW1hdGlvbi5maW5pc2ggPSBkb0FuaW1hdGlvbjtcblxuICAgIHJldHVybiBlbXB0eSB8fCBvcHRhbGwucXVldWUgPT09IGZhbHNlID9cbiAgICAgIHRoaXMuZWFjaCggZG9BbmltYXRpb24gKSA6XG4gICAgICB0aGlzLnF1ZXVlKCBvcHRhbGwucXVldWUsIGRvQW5pbWF0aW9uICk7XG4gIH0sXG4gIHN0b3A6IGZ1bmN0aW9uKCB0eXBlLCBjbGVhclF1ZXVlLCBnb3RvRW5kICkge1xuICAgIHZhciBzdG9wUXVldWUgPSBmdW5jdGlvbiggaG9va3MgKSB7XG4gICAgICB2YXIgc3RvcCA9IGhvb2tzLnN0b3A7XG4gICAgICBkZWxldGUgaG9va3Muc3RvcDtcbiAgICAgIHN0b3AoIGdvdG9FbmQgKTtcbiAgICB9O1xuXG4gICAgaWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgIGdvdG9FbmQgPSBjbGVhclF1ZXVlO1xuICAgICAgY2xlYXJRdWV1ZSA9IHR5cGU7XG4gICAgICB0eXBlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIGNsZWFyUXVldWUgJiYgdHlwZSAhPT0gZmFsc2UgKSB7XG4gICAgICB0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRlcXVldWUgPSB0cnVlLFxuICAgICAgICBpbmRleCA9IHR5cGUgIT0gbnVsbCAmJiB0eXBlICsgXCJxdWV1ZUhvb2tzXCIsXG4gICAgICAgIHRpbWVycyA9IGpRdWVyeS50aW1lcnMsXG4gICAgICAgIGRhdGEgPSBqUXVlcnkuX2RhdGEoIHRoaXMgKTtcblxuICAgICAgaWYgKCBpbmRleCApIHtcbiAgICAgICAgaWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCApIHtcbiAgICAgICAgICBzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICggaW5kZXggaW4gZGF0YSApIHtcbiAgICAgICAgICBpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICYmIHJydW4udGVzdCggaW5kZXggKSApIHtcbiAgICAgICAgICAgIHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuICAgICAgICBpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmICh0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlKSApIHtcbiAgICAgICAgICB0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7XG4gICAgICAgICAgZGVxdWV1ZSA9IGZhbHNlO1xuICAgICAgICAgIHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gc3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZFxuICAgICAgLy8gdGltZXJzIGN1cnJlbnRseSB3aWxsIGNhbGwgdGhlaXIgY29tcGxldGUgY2FsbGJhY2tzLCB3aGljaCB3aWxsIGRlcXVldWVcbiAgICAgIC8vIGJ1dCBvbmx5IGlmIHRoZXkgd2VyZSBnb3RvRW5kXG4gICAgICBpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7XG4gICAgICAgIGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIGZpbmlzaDogZnVuY3Rpb24oIHR5cGUgKSB7XG4gICAgaWYgKCB0eXBlICE9PSBmYWxzZSApIHtcbiAgICAgIHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbmRleCxcbiAgICAgICAgZGF0YSA9IGpRdWVyeS5fZGF0YSggdGhpcyApLFxuICAgICAgICBxdWV1ZSA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlXCIgXSxcbiAgICAgICAgaG9va3MgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgXSxcbiAgICAgICAgdGltZXJzID0galF1ZXJ5LnRpbWVycyxcbiAgICAgICAgbGVuZ3RoID0gcXVldWUgPyBxdWV1ZS5sZW5ndGggOiAwO1xuXG4gICAgICAvLyBlbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhXG4gICAgICBkYXRhLmZpbmlzaCA9IHRydWU7XG5cbiAgICAgIC8vIGVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuICAgICAgalF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBbXSApO1xuXG4gICAgICBpZiAoIGhvb2tzICYmIGhvb2tzLnN0b3AgKSB7XG4gICAgICAgIGhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApO1xuICAgICAgfVxuXG4gICAgICAvLyBsb29rIGZvciBhbnkgYWN0aXZlIGFuaW1hdGlvbnMsIGFuZCBmaW5pc2ggdGhlbVxuICAgICAgZm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcbiAgICAgICAgaWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7XG4gICAgICAgICAgdGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggdHJ1ZSApO1xuICAgICAgICAgIHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gbG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW1cbiAgICAgIGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG4gICAgICAgIGlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkge1xuICAgICAgICAgIHF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gdHVybiBvZmYgZmluaXNoaW5nIGZsYWdcbiAgICAgIGRlbGV0ZSBkYXRhLmZpbmlzaDtcbiAgICB9KTtcbiAgfVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJ0b2dnbGVcIiwgXCJzaG93XCIsIFwiaGlkZVwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuICB2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTtcbiAgalF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG4gICAgcmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSBcImJvb2xlYW5cIiA/XG4gICAgICBjc3NGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICkgOlxuICAgICAgdGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuICB9O1xufSk7XG5cbi8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcbmpRdWVyeS5lYWNoKHtcbiAgc2xpZGVEb3duOiBnZW5GeChcInNob3dcIiksXG4gIHNsaWRlVXA6IGdlbkZ4KFwiaGlkZVwiKSxcbiAgc2xpZGVUb2dnbGU6IGdlbkZ4KFwidG9nZ2xlXCIpLFxuICBmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcbiAgZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuICBmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxufSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuICBqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcbiAgICByZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcbiAgfTtcbn0pO1xuXG5qUXVlcnkudGltZXJzID0gW107XG5qUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdGltZXIsXG4gICAgdGltZXJzID0galF1ZXJ5LnRpbWVycyxcbiAgICBpID0gMDtcblxuICBmeE5vdyA9IGpRdWVyeS5ub3coKTtcblxuICBmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7XG4gICAgdGltZXIgPSB0aW1lcnNbIGkgXTtcbiAgICAvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWRcbiAgICBpZiAoICF0aW1lcigpICYmIHRpbWVyc1sgaSBdID09PSB0aW1lciApIHtcbiAgICAgIHRpbWVycy5zcGxpY2UoIGktLSwgMSApO1xuICAgIH1cbiAgfVxuXG4gIGlmICggIXRpbWVycy5sZW5ndGggKSB7XG4gICAgalF1ZXJ5LmZ4LnN0b3AoKTtcbiAgfVxuICBmeE5vdyA9IHVuZGVmaW5lZDtcbn07XG5cbmpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcbiAgalF1ZXJ5LnRpbWVycy5wdXNoKCB0aW1lciApO1xuICBpZiAoIHRpbWVyKCkgKSB7XG4gICAgalF1ZXJ5LmZ4LnN0YXJ0KCk7XG4gIH0gZWxzZSB7XG4gICAgalF1ZXJ5LnRpbWVycy5wb3AoKTtcbiAgfVxufTtcblxualF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5cbmpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoICF0aW1lcklkICkge1xuICAgIHRpbWVySWQgPSBzZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApO1xuICB9XG59O1xuXG5qUXVlcnkuZnguc3RvcCA9IGZ1bmN0aW9uKCkge1xuICBjbGVhckludGVydmFsKCB0aW1lcklkICk7XG4gIHRpbWVySWQgPSBudWxsO1xufTtcblxualF1ZXJ5LmZ4LnNwZWVkcyA9IHtcbiAgc2xvdzogNjAwLFxuICBmYXN0OiAyMDAsXG4gIC8vIERlZmF1bHQgc3BlZWRcbiAgX2RlZmF1bHQ6IDQwMFxufTtcblxuXG4vLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG4vLyBodHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvXG5qUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHtcbiAgdGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTtcbiAgdHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG4gIHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7XG4gICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG4gICAgaG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XG4gICAgfTtcbiAgfSk7XG59O1xuXG5cbihmdW5jdGlvbigpIHtcbiAgLy8gTWluaWZpZWQ6IHZhciBhLGIsYyxkLGVcbiAgdmFyIGlucHV0LCBkaXYsIHNlbGVjdCwgYSwgb3B0O1xuXG4gIC8vIFNldHVwXG4gIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcbiAgZGl2LnNldEF0dHJpYnV0ZSggXCJjbGFzc05hbWVcIiwgXCJ0XCIgKTtcbiAgZGl2LmlubmVySFRNTCA9IFwiICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+XCI7XG4gIGEgPSBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpWyAwIF07XG5cbiAgLy8gRmlyc3QgYmF0Y2ggb2YgdGVzdHMuXG4gIHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XG4gIG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSApO1xuICBpbnB1dCA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWyAwIF07XG5cbiAgYS5zdHlsZS5jc3NUZXh0ID0gXCJ0b3A6MXB4XCI7XG5cbiAgLy8gVGVzdCBzZXRBdHRyaWJ1dGUgb24gY2FtZWxDYXNlIGNsYXNzLiBJZiBpdCB3b3Jrcywgd2UgbmVlZCBhdHRyRml4ZXMgd2hlbiBkb2luZyBnZXQvc2V0QXR0cmlidXRlIChpZTYvNylcbiAgc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGUgPSBkaXYuY2xhc3NOYW1lICE9PSBcInRcIjtcblxuICAvLyBHZXQgdGhlIHN0eWxlIGluZm9ybWF0aW9uIGZyb20gZ2V0QXR0cmlidXRlXG4gIC8vIChJRSB1c2VzIC5jc3NUZXh0IGluc3RlYWQpXG4gIHN1cHBvcnQuc3R5bGUgPSAvdG9wLy50ZXN0KCBhLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpICk7XG5cbiAgLy8gTWFrZSBzdXJlIHRoYXQgVVJMcyBhcmVuJ3QgbWFuaXB1bGF0ZWRcbiAgLy8gKElFIG5vcm1hbGl6ZXMgaXQgYnkgZGVmYXVsdClcbiAgc3VwcG9ydC5ocmVmTm9ybWFsaXplZCA9IGEuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIvYVwiO1xuXG4gIC8vIENoZWNrIHRoZSBkZWZhdWx0IGNoZWNrYm94L3JhZGlvIHZhbHVlIChcIlwiIG9uIFdlYktpdDsgXCJvblwiIGVsc2V3aGVyZSlcbiAgc3VwcG9ydC5jaGVja09uID0gISFpbnB1dC52YWx1ZTtcblxuICAvLyBNYWtlIHN1cmUgdGhhdCBhIHNlbGVjdGVkLWJ5LWRlZmF1bHQgb3B0aW9uIGhhcyBhIHdvcmtpbmcgc2VsZWN0ZWQgcHJvcGVydHkuXG4gIC8vIChXZWJLaXQgZGVmYXVsdHMgdG8gZmFsc2UgaW5zdGVhZCBvZiB0cnVlLCBJRSB0b28sIGlmIGl0J3MgaW4gYW4gb3B0Z3JvdXApXG4gIHN1cHBvcnQub3B0U2VsZWN0ZWQgPSBvcHQuc2VsZWN0ZWQ7XG5cbiAgLy8gVGVzdHMgZm9yIGVuY3R5cGUgc3VwcG9ydCBvbiBhIGZvcm0gKCM2NzQzKVxuICBzdXBwb3J0LmVuY3R5cGUgPSAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLmVuY3R5cGU7XG5cbiAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIG9wdGlvbnMgaW5zaWRlIGRpc2FibGVkIHNlbGVjdHMgYXJlbid0IG1hcmtlZCBhcyBkaXNhYmxlZFxuICAvLyAoV2ViS2l0IG1hcmtzIHRoZW0gYXMgZGlzYWJsZWQpXG4gIHNlbGVjdC5kaXNhYmxlZCA9IHRydWU7XG4gIHN1cHBvcnQub3B0RGlzYWJsZWQgPSAhb3B0LmRpc2FibGVkO1xuXG4gIC8vIFN1cHBvcnQ6IElFOCBvbmx5XG4gIC8vIENoZWNrIGlmIHdlIGNhbiB0cnVzdCBnZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKVxuICBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuICBzdXBwb3J0LmlucHV0ID0gaW5wdXQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcblxuICAvLyBDaGVjayBpZiBhbiBpbnB1dCBtYWludGFpbnMgaXRzIHZhbHVlIGFmdGVyIGJlY29taW5nIGEgcmFkaW9cbiAgaW5wdXQudmFsdWUgPSBcInRcIjtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJyYWRpb1wiICk7XG4gIHN1cHBvcnQucmFkaW9WYWx1ZSA9IGlucHV0LnZhbHVlID09PSBcInRcIjtcbn0pKCk7XG5cblxudmFyIHJyZXR1cm4gPSAvXFxyL2c7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuICB2YWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICB2YXIgaG9va3MsIHJldCwgaXNGdW5jdGlvbixcbiAgICAgIGVsZW0gPSB0aGlzWzBdO1xuXG4gICAgaWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcbiAgICAgIGlmICggZWxlbSApIHtcbiAgICAgICAgaG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cbiAgICAgICAgaWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5nZXQoIGVsZW0sIFwidmFsdWVcIiApKSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXQgPSBlbGVtLnZhbHVlO1xuXG4gICAgICAgIHJldHVybiB0eXBlb2YgcmV0ID09PSBcInN0cmluZ1wiID9cbiAgICAgICAgICAvLyBoYW5kbGUgbW9zdCBjb21tb24gc3RyaW5nIGNhc2VzXG4gICAgICAgICAgcmV0LnJlcGxhY2UocnJldHVybiwgXCJcIikgOlxuICAgICAgICAgIC8vIGhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlclxuICAgICAgICAgIHJldCA9PSBudWxsID8gXCJcIiA6IHJldDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG4gICAgICB2YXIgdmFsO1xuXG4gICAgICBpZiAoIHRoaXMubm9kZVR5cGUgIT09IDEgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCBpc0Z1bmN0aW9uICkge1xuICAgICAgICB2YWwgPSB2YWx1ZS5jYWxsKCB0aGlzLCBpLCBqUXVlcnkoIHRoaXMgKS52YWwoKSApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFRyZWF0IG51bGwvdW5kZWZpbmVkIGFzIFwiXCI7IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdcbiAgICAgIGlmICggdmFsID09IG51bGwgKSB7XG4gICAgICAgIHZhbCA9IFwiXCI7XG4gICAgICB9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuICAgICAgICB2YWwgKz0gXCJcIjtcbiAgICAgIH0gZWxzZSBpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWwgKSApIHtcbiAgICAgICAgdmFsID0galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsdWUgKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKyBcIlwiO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaG9va3MgPSBqUXVlcnkudmFsSG9va3NbIHRoaXMudHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cbiAgICAgIC8vIElmIHNldCByZXR1cm5zIHVuZGVmaW5lZCwgZmFsbCBiYWNrIHRvIG5vcm1hbCBzZXR0aW5nXG4gICAgICBpZiAoICFob29rcyB8fCAhKFwic2V0XCIgaW4gaG9va3MpIHx8IGhvb2tzLnNldCggdGhpcywgdmFsLCBcInZhbHVlXCIgKSA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KTtcblxualF1ZXJ5LmV4dGVuZCh7XG4gIHZhbEhvb2tzOiB7XG4gICAgb3B0aW9uOiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICB2YXIgdmFsID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgXCJ2YWx1ZVwiICk7XG4gICAgICAgIHJldHVybiB2YWwgIT0gbnVsbCA/XG4gICAgICAgICAgdmFsIDpcbiAgICAgICAgICAvLyBTdXBwb3J0OiBJRTEwLTExK1xuICAgICAgICAgIC8vIG9wdGlvbi50ZXh0IHRocm93cyBleGNlcHRpb25zICgjMTQ2ODYsICMxNDg1OClcbiAgICAgICAgICBqUXVlcnkudHJpbSggalF1ZXJ5LnRleHQoIGVsZW0gKSApO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICB2YXIgdmFsdWUsIG9wdGlvbixcbiAgICAgICAgICBvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuICAgICAgICAgIGluZGV4ID0gZWxlbS5zZWxlY3RlZEluZGV4LFxuICAgICAgICAgIG9uZSA9IGVsZW0udHlwZSA9PT0gXCJzZWxlY3Qtb25lXCIgfHwgaW5kZXggPCAwLFxuICAgICAgICAgIHZhbHVlcyA9IG9uZSA/IG51bGwgOiBbXSxcbiAgICAgICAgICBtYXggPSBvbmUgPyBpbmRleCArIDEgOiBvcHRpb25zLmxlbmd0aCxcbiAgICAgICAgICBpID0gaW5kZXggPCAwID9cbiAgICAgICAgICAgIG1heCA6XG4gICAgICAgICAgICBvbmUgPyBpbmRleCA6IDA7XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgc2VsZWN0ZWQgb3B0aW9uc1xuICAgICAgICBmb3IgKCA7IGkgPCBtYXg7IGkrKyApIHtcbiAgICAgICAgICBvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cbiAgICAgICAgICAvLyBvbGRJRSBkb2Vzbid0IHVwZGF0ZSBzZWxlY3RlZCBhZnRlciBmb3JtIHJlc2V0ICgjMjU1MSlcbiAgICAgICAgICBpZiAoICggb3B0aW9uLnNlbGVjdGVkIHx8IGkgPT09IGluZGV4ICkgJiZcbiAgICAgICAgICAgICAgLy8gRG9uJ3QgcmV0dXJuIG9wdGlvbnMgdGhhdCBhcmUgZGlzYWJsZWQgb3IgaW4gYSBkaXNhYmxlZCBvcHRncm91cFxuICAgICAgICAgICAgICAoIHN1cHBvcnQub3B0RGlzYWJsZWQgPyAhb3B0aW9uLmRpc2FibGVkIDogb3B0aW9uLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09PSBudWxsICkgJiZcbiAgICAgICAgICAgICAgKCAhb3B0aW9uLnBhcmVudE5vZGUuZGlzYWJsZWQgfHwgIWpRdWVyeS5ub2RlTmFtZSggb3B0aW9uLnBhcmVudE5vZGUsIFwib3B0Z3JvdXBcIiApICkgKSB7XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgc3BlY2lmaWMgdmFsdWUgZm9yIHRoZSBvcHRpb25cbiAgICAgICAgICAgIHZhbHVlID0galF1ZXJ5KCBvcHRpb24gKS52YWwoKTtcblxuICAgICAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCBhbiBhcnJheSBmb3Igb25lIHNlbGVjdHNcbiAgICAgICAgICAgIGlmICggb25lICkge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE11bHRpLVNlbGVjdHMgcmV0dXJuIGFuIGFycmF5XG4gICAgICAgICAgICB2YWx1ZXMucHVzaCggdmFsdWUgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG4gICAgICAgIHZhciBvcHRpb25TZXQsIG9wdGlvbixcbiAgICAgICAgICBvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuICAgICAgICAgIHZhbHVlcyA9IGpRdWVyeS5tYWtlQXJyYXkoIHZhbHVlICksXG4gICAgICAgICAgaSA9IG9wdGlvbnMubGVuZ3RoO1xuXG4gICAgICAgIHdoaWxlICggaS0tICkge1xuICAgICAgICAgIG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuICAgICAgICAgIGlmICggalF1ZXJ5LmluQXJyYXkoIGpRdWVyeS52YWxIb29rcy5vcHRpb24uZ2V0KCBvcHRpb24gKSwgdmFsdWVzICkgPj0gMCApIHtcblxuICAgICAgICAgICAgLy8gU3VwcG9ydDogSUU2XG4gICAgICAgICAgICAvLyBXaGVuIG5ldyBvcHRpb24gZWxlbWVudCBpcyBhZGRlZCB0byBzZWxlY3QgYm94IHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGZvcmNlIHJlZmxvdyBvZiBuZXdseSBhZGRlZCBub2RlIGluIG9yZGVyIHRvIHdvcmthcm91bmQgZGVsYXlcbiAgICAgICAgICAgIC8vIG9mIGluaXRpYWxpemF0aW9uIHByb3BlcnRpZXNcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IG9wdGlvblNldCA9IHRydWU7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKCBfICkge1xuXG4gICAgICAgICAgICAgIC8vIFdpbGwgYmUgZXhlY3V0ZWQgb25seSBpbiBJRTZcbiAgICAgICAgICAgICAgb3B0aW9uLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGb3JjZSBicm93c2VycyB0byBiZWhhdmUgY29uc2lzdGVudGx5IHdoZW4gbm9uLW1hdGNoaW5nIHZhbHVlIGlzIHNldFxuICAgICAgICBpZiAoICFvcHRpb25TZXQgKSB7XG4gICAgICAgICAgZWxlbS5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBSYWRpb3MgYW5kIGNoZWNrYm94ZXMgZ2V0dGVyL3NldHRlclxualF1ZXJ5LmVhY2goWyBcInJhZGlvXCIsIFwiY2hlY2tib3hcIiBdLCBmdW5jdGlvbigpIHtcbiAgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0gPSB7XG4gICAgc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG4gICAgICBpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWx1ZSApICkge1xuICAgICAgICByZXR1cm4gKCBlbGVtLmNoZWNrZWQgPSBqUXVlcnkuaW5BcnJheSggalF1ZXJ5KGVsZW0pLnZhbCgpLCB2YWx1ZSApID49IDAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGlmICggIXN1cHBvcnQuY2hlY2tPbiApIHtcbiAgICBqUXVlcnkudmFsSG9va3NbIHRoaXMgXS5nZXQgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgIC8vIFN1cHBvcnQ6IFdlYmtpdFxuICAgICAgLy8gXCJcIiBpcyByZXR1cm5lZCBpbnN0ZWFkIG9mIFwib25cIiBpZiBhIHZhbHVlIGlzbid0IHNwZWNpZmllZFxuICAgICAgcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwidmFsdWVcIikgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuICAgIH07XG4gIH1cbn0pO1xuXG5cblxuXG52YXIgbm9kZUhvb2ssIGJvb2xIb29rLFxuICBhdHRySGFuZGxlID0galF1ZXJ5LmV4cHIuYXR0ckhhbmRsZSxcbiAgcnVzZURlZmF1bHQgPSAvXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLFxuICBnZXRTZXRBdHRyaWJ1dGUgPSBzdXBwb3J0LmdldFNldEF0dHJpYnV0ZSxcbiAgZ2V0U2V0SW5wdXQgPSBzdXBwb3J0LmlucHV0O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcbiAgYXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuICAgIHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcbiAgfSxcblxuICByZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgalF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbmpRdWVyeS5leHRlbmQoe1xuICBhdHRyOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG4gICAgdmFyIGhvb2tzLCByZXQsXG4gICAgICBuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cbiAgICAvLyBkb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG4gICAgaWYgKCAhZWxlbSB8fCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjayB0byBwcm9wIHdoZW4gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZFxuICAgIGlmICggdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlID09PSBzdHJ1bmRlZmluZWQgKSB7XG4gICAgICByZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG4gICAgfVxuXG4gICAgLy8gQWxsIGF0dHJpYnV0ZXMgYXJlIGxvd2VyY2FzZVxuICAgIC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcbiAgICBpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcbiAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICBob29rcyA9IGpRdWVyeS5hdHRySG9va3NbIG5hbWUgXSB8fFxuICAgICAgICAoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiBub2RlSG9vayApO1xuICAgIH1cblxuICAgIGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgaWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcbiAgICAgICAgalF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblxuICAgICAgfSBlbHNlIGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApKSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICByZXR1cm4gcmV0O1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCApIHtcbiAgICAgIHJldHVybiByZXQ7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApO1xuXG4gICAgICAvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHJldCA9PSBudWxsID9cbiAgICAgICAgdW5kZWZpbmVkIDpcbiAgICAgICAgcmV0O1xuICAgIH1cbiAgfSxcblxuICByZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG4gICAgdmFyIG5hbWUsIHByb3BOYW1lLFxuICAgICAgaSA9IDAsXG4gICAgICBhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICk7XG5cbiAgICBpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuICAgICAgd2hpbGUgKCAobmFtZSA9IGF0dHJOYW1lc1tpKytdKSApIHtcbiAgICAgICAgcHJvcE5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cbiAgICAgICAgLy8gQm9vbGVhbiBhdHRyaWJ1dGVzIGdldCBzcGVjaWFsIHRyZWF0bWVudCAoIzEwODcwKVxuICAgICAgICBpZiAoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApICkge1xuICAgICAgICAgIC8vIFNldCBjb3JyZXNwb25kaW5nIHByb3BlcnR5IHRvIGZhbHNlXG4gICAgICAgICAgaWYgKCBnZXRTZXRJbnB1dCAmJiBnZXRTZXRBdHRyaWJ1dGUgfHwgIXJ1c2VEZWZhdWx0LnRlc3QoIG5hbWUgKSApIHtcbiAgICAgICAgICAgIGVsZW1bIHByb3BOYW1lIF0gPSBmYWxzZTtcbiAgICAgICAgICAvLyBTdXBwb3J0OiBJRTw5XG4gICAgICAgICAgLy8gQWxzbyBjbGVhciBkZWZhdWx0Q2hlY2tlZC9kZWZhdWx0U2VsZWN0ZWQgKGlmIGFwcHJvcHJpYXRlKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtWyBqUXVlcnkuY2FtZWxDYXNlKCBcImRlZmF1bHQtXCIgKyBuYW1lICkgXSA9XG4gICAgICAgICAgICAgIGVsZW1bIHByb3BOYW1lIF0gPSBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgLy8gU2VlICM5Njk5IGZvciBleHBsYW5hdGlvbiBvZiB0aGlzIGFwcHJvYWNoIChzZXR0aW5nIGZpcnN0LCB0aGVuIHJlbW92YWwpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgalF1ZXJ5LmF0dHIoIGVsZW0sIG5hbWUsIFwiXCIgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBnZXRTZXRBdHRyaWJ1dGUgPyBuYW1lIDogcHJvcE5hbWUgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYXR0ckhvb2tzOiB7XG4gICAgdHlwZToge1xuICAgICAgc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG4gICAgICAgIGlmICggIXN1cHBvcnQucmFkaW9WYWx1ZSAmJiB2YWx1ZSA9PT0gXCJyYWRpb1wiICYmIGpRdWVyeS5ub2RlTmFtZShlbGVtLCBcImlucHV0XCIpICkge1xuICAgICAgICAgIC8vIFNldHRpbmcgdGhlIHR5cGUgb24gYSByYWRpbyBidXR0b24gYWZ0ZXIgdGhlIHZhbHVlIHJlc2V0cyB0aGUgdmFsdWUgaW4gSUU2LTlcbiAgICAgICAgICAvLyBSZXNldCB2YWx1ZSB0byBkZWZhdWx0IGluIGNhc2UgdHlwZSBpcyBzZXQgYWZ0ZXIgdmFsdWUgZHVyaW5nIGNyZWF0aW9uXG4gICAgICAgICAgdmFyIHZhbCA9IGVsZW0udmFsdWU7XG4gICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCB2YWx1ZSApO1xuICAgICAgICAgIGlmICggdmFsICkge1xuICAgICAgICAgICAgZWxlbS52YWx1ZSA9IHZhbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLy8gSG9vayBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzXG5ib29sSG9vayA9IHtcbiAgc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG4gICAgaWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG4gICAgICAvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlXG4gICAgICBqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuICAgIH0gZWxzZSBpZiAoIGdldFNldElucHV0ICYmIGdldFNldEF0dHJpYnV0ZSB8fCAhcnVzZURlZmF1bHQudGVzdCggbmFtZSApICkge1xuICAgICAgLy8gSUU8OCBuZWVkcyB0aGUgKnByb3BlcnR5KiBuYW1lXG4gICAgICBlbGVtLnNldEF0dHJpYnV0ZSggIWdldFNldEF0dHJpYnV0ZSAmJiBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWUsIG5hbWUgKTtcblxuICAgIC8vIFVzZSBkZWZhdWx0Q2hlY2tlZCBhbmQgZGVmYXVsdFNlbGVjdGVkIGZvciBvbGRJRVxuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtWyBqUXVlcnkuY2FtZWxDYXNlKCBcImRlZmF1bHQtXCIgKyBuYW1lICkgXSA9IGVsZW1bIG5hbWUgXSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWU7XG4gIH1cbn07XG5cbi8vIFJldHJpZXZlIGJvb2xlYW5zIHNwZWNpYWxseVxualF1ZXJ5LmVhY2goIGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKCAvXFx3Ky9nICksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXG4gIHZhciBnZXR0ZXIgPSBhdHRySGFuZGxlWyBuYW1lIF0gfHwgalF1ZXJ5LmZpbmQuYXR0cjtcblxuICBhdHRySGFuZGxlWyBuYW1lIF0gPSBnZXRTZXRJbnB1dCAmJiBnZXRTZXRBdHRyaWJ1dGUgfHwgIXJ1c2VEZWZhdWx0LnRlc3QoIG5hbWUgKSA/XG4gICAgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuICAgICAgdmFyIHJldCwgaGFuZGxlO1xuICAgICAgaWYgKCAhaXNYTUwgKSB7XG4gICAgICAgIC8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3AgYnkgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgdGhpcyBmdW5jdGlvbiBmcm9tIHRoZSBnZXR0ZXJcbiAgICAgICAgaGFuZGxlID0gYXR0ckhhbmRsZVsgbmFtZSBdO1xuICAgICAgICBhdHRySGFuZGxlWyBuYW1lIF0gPSByZXQ7XG4gICAgICAgIHJldCA9IGdldHRlciggZWxlbSwgbmFtZSwgaXNYTUwgKSAhPSBudWxsID9cbiAgICAgICAgICBuYW1lLnRvTG93ZXJDYXNlKCkgOlxuICAgICAgICAgIG51bGw7XG4gICAgICAgIGF0dHJIYW5kbGVbIG5hbWUgXSA9IGhhbmRsZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSA6XG4gICAgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuICAgICAgaWYgKCAhaXNYTUwgKSB7XG4gICAgICAgIHJldHVybiBlbGVtWyBqUXVlcnkuY2FtZWxDYXNlKCBcImRlZmF1bHQtXCIgKyBuYW1lICkgXSA/XG4gICAgICAgICAgbmFtZS50b0xvd2VyQ2FzZSgpIDpcbiAgICAgICAgICBudWxsO1xuICAgICAgfVxuICAgIH07XG59KTtcblxuLy8gZml4IG9sZElFIGF0dHJvcGVydGllc1xuaWYgKCAhZ2V0U2V0SW5wdXQgfHwgIWdldFNldEF0dHJpYnV0ZSApIHtcbiAgalF1ZXJ5LmF0dHJIb29rcy52YWx1ZSA9IHtcbiAgICBzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHtcbiAgICAgIGlmICggalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcbiAgICAgICAgLy8gRG9lcyBub3QgcmV0dXJuIHNvIHRoYXQgc2V0QXR0cmlidXRlIGlzIGFsc28gdXNlZFxuICAgICAgICBlbGVtLmRlZmF1bHRWYWx1ZSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXNlIG5vZGVIb29rIGlmIGRlZmluZWQgKCMxOTU0KTsgb3RoZXJ3aXNlIHNldEF0dHJpYnV0ZSBpcyBmaW5lXG4gICAgICAgIHJldHVybiBub2RlSG9vayAmJiBub2RlSG9vay5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG4vLyBJRTYvNyBkbyBub3Qgc3VwcG9ydCBnZXR0aW5nL3NldHRpbmcgc29tZSBhdHRyaWJ1dGVzIHdpdGggZ2V0L3NldEF0dHJpYnV0ZVxuaWYgKCAhZ2V0U2V0QXR0cmlidXRlICkge1xuXG4gIC8vIFVzZSB0aGlzIGZvciBhbnkgYXR0cmlidXRlIGluIElFNi83XG4gIC8vIFRoaXMgZml4ZXMgYWxtb3N0IGV2ZXJ5IElFNi83IGlzc3VlXG4gIG5vZGVIb29rID0ge1xuICAgIHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkge1xuICAgICAgLy8gU2V0IHRoZSBleGlzdGluZyBvciBjcmVhdGUgYSBuZXcgYXR0cmlidXRlIG5vZGVcbiAgICAgIHZhciByZXQgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIG5hbWUgKTtcbiAgICAgIGlmICggIXJldCApIHtcbiAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGVOb2RlKFxuICAgICAgICAgIChyZXQgPSBlbGVtLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKCBuYW1lICkpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldC52YWx1ZSA9IHZhbHVlICs9IFwiXCI7XG5cbiAgICAgIC8vIEJyZWFrIGFzc29jaWF0aW9uIHdpdGggY2xvbmVkIGVsZW1lbnRzIGJ5IGFsc28gdXNpbmcgc2V0QXR0cmlidXRlICgjOTY0NilcbiAgICAgIGlmICggbmFtZSA9PT0gXCJ2YWx1ZVwiIHx8IHZhbHVlID09PSBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApICkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFNvbWUgYXR0cmlidXRlcyBhcmUgY29uc3RydWN0ZWQgd2l0aCBlbXB0eS1zdHJpbmcgdmFsdWVzIHdoZW4gbm90IGRlZmluZWRcbiAgYXR0ckhhbmRsZS5pZCA9IGF0dHJIYW5kbGUubmFtZSA9IGF0dHJIYW5kbGUuY29vcmRzID1cbiAgICBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG4gICAgICB2YXIgcmV0O1xuICAgICAgaWYgKCAhaXNYTUwgKSB7XG4gICAgICAgIHJldHVybiAocmV0ID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHJldC52YWx1ZSAhPT0gXCJcIiA/XG4gICAgICAgICAgcmV0LnZhbHVlIDpcbiAgICAgICAgICBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgLy8gRml4aW5nIHZhbHVlIHJldHJpZXZhbCBvbiBhIGJ1dHRvbiByZXF1aXJlcyB0aGlzIG1vZHVsZVxuICBqUXVlcnkudmFsSG9va3MuYnV0dG9uID0ge1xuICAgIGdldDogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG4gICAgICB2YXIgcmV0ID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICk7XG4gICAgICBpZiAoIHJldCAmJiByZXQuc3BlY2lmaWVkICkge1xuICAgICAgICByZXR1cm4gcmV0LnZhbHVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2V0OiBub2RlSG9vay5zZXRcbiAgfTtcblxuICAvLyBTZXQgY29udGVudGVkaXRhYmxlIHRvIGZhbHNlIG9uIHJlbW92YWxzKCMxMDQyOSlcbiAgLy8gU2V0dGluZyB0byBlbXB0eSBzdHJpbmcgdGhyb3dzIGFuIGVycm9yIGFzIGFuIGludmFsaWQgdmFsdWVcbiAgalF1ZXJ5LmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGUgPSB7XG4gICAgc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG4gICAgICBub2RlSG9vay5zZXQoIGVsZW0sIHZhbHVlID09PSBcIlwiID8gZmFsc2UgOiB2YWx1ZSwgbmFtZSApO1xuICAgIH1cbiAgfTtcblxuICAvLyBTZXQgd2lkdGggYW5kIGhlaWdodCB0byBhdXRvIGluc3RlYWQgb2YgMCBvbiBlbXB0eSBzdHJpbmcoIEJ1ZyAjODE1MCApXG4gIC8vIFRoaXMgaXMgZm9yIHJlbW92YWxzXG4gIGpRdWVyeS5lYWNoKFsgXCJ3aWR0aFwiLCBcImhlaWdodFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuICAgIGpRdWVyeS5hdHRySG9va3NbIG5hbWUgXSA9IHtcbiAgICAgIHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuICAgICAgICBpZiAoIHZhbHVlID09PSBcIlwiICkge1xuICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCBcImF1dG9cIiApO1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0pO1xufVxuXG5pZiAoICFzdXBwb3J0LnN0eWxlICkge1xuICBqUXVlcnkuYXR0ckhvb2tzLnN0eWxlID0ge1xuICAgIGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAvLyBSZXR1cm4gdW5kZWZpbmVkIGluIHRoZSBjYXNlIG9mIGVtcHR5IHN0cmluZ1xuICAgICAgLy8gTm90ZTogSUUgdXBwZXJjYXNlcyBjc3MgcHJvcGVydHkgbmFtZXMsIGJ1dCBpZiB3ZSB3ZXJlIHRvIC50b0xvd2VyQ2FzZSgpXG4gICAgICAvLyAuY3NzVGV4dCwgdGhhdCB3b3VsZCBkZXN0cm95IGNhc2Ugc2Vuc3RpdGl2aXR5IGluIFVSTCdzLCBsaWtlIGluIFwiYmFja2dyb3VuZFwiXG4gICAgICByZXR1cm4gZWxlbS5zdHlsZS5jc3NUZXh0IHx8IHVuZGVmaW5lZDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuICAgICAgcmV0dXJuICggZWxlbS5zdHlsZS5jc3NUZXh0ID0gdmFsdWUgKyBcIlwiICk7XG4gICAgfVxuICB9O1xufVxuXG5cblxuXG52YXIgcmZvY3VzYWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QpJC9pLFxuICByY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcbiAgcHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuICAgIHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcbiAgfSxcblxuICByZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcbiAgICBuYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lO1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAvLyB0cnkvY2F0Y2ggaGFuZGxlcyBjYXNlcyB3aGVyZSBJRSBiYWxrcyAoc3VjaCBhcyByZW1vdmluZyBhIHByb3BlcnR5IG9uIHdpbmRvdylcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXNbIG5hbWUgXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgZGVsZXRlIHRoaXNbIG5hbWUgXTtcbiAgICAgIH0gY2F0Y2goIGUgKSB7fVxuICAgIH0pO1xuICB9XG59KTtcblxualF1ZXJ5LmV4dGVuZCh7XG4gIHByb3BGaXg6IHtcbiAgICBcImZvclwiOiBcImh0bWxGb3JcIixcbiAgICBcImNsYXNzXCI6IFwiY2xhc3NOYW1lXCJcbiAgfSxcblxuICBwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG4gICAgdmFyIHJldCwgaG9va3MsIG5vdHhtbCxcbiAgICAgIG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuICAgIC8vIGRvbid0IGdldC9zZXQgcHJvcGVydGllcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcbiAgICBpZiAoICFlbGVtIHx8IG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5vdHhtbCA9IG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKTtcblxuICAgIGlmICggbm90eG1sICkge1xuICAgICAgLy8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rc1xuICAgICAgbmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcbiAgICAgIGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuICAgIH1cblxuICAgIGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgIHJldHVybiBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkpICE9PSB1bmRlZmluZWQgP1xuICAgICAgICByZXQgOlxuICAgICAgICAoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCA/XG4gICAgICAgIHJldCA6XG4gICAgICAgIGVsZW1bIG5hbWUgXTtcbiAgICB9XG4gIH0sXG5cbiAgcHJvcEhvb2tzOiB7XG4gICAgdGFiSW5kZXg6IHtcbiAgICAgIGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgIC8vIGVsZW0udGFiSW5kZXggZG9lc24ndCBhbHdheXMgcmV0dXJuIHRoZSBjb3JyZWN0IHZhbHVlIHdoZW4gaXQgaGFzbid0IGJlZW4gZXhwbGljaXRseSBzZXRcbiAgICAgICAgLy8gaHR0cDovL2ZsdWlkcHJvamVjdC5vcmcvYmxvZy8yMDA4LzAxLzA5L2dldHRpbmctc2V0dGluZy1hbmQtcmVtb3ZpbmctdGFiaW5kZXgtdmFsdWVzLXdpdGgtamF2YXNjcmlwdC9cbiAgICAgICAgLy8gVXNlIHByb3BlciBhdHRyaWJ1dGUgcmV0cmlldmFsKCMxMjA3MilcbiAgICAgICAgdmFyIHRhYmluZGV4ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgXCJ0YWJpbmRleFwiICk7XG5cbiAgICAgICAgcmV0dXJuIHRhYmluZGV4ID9cbiAgICAgICAgICBwYXJzZUludCggdGFiaW5kZXgsIDEwICkgOlxuICAgICAgICAgIHJmb2N1c2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApIHx8IHJjbGlja2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApICYmIGVsZW0uaHJlZiA/XG4gICAgICAgICAgICAwIDpcbiAgICAgICAgICAgIC0xO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbi8vIFNvbWUgYXR0cmlidXRlcyByZXF1aXJlIGEgc3BlY2lhbCBjYWxsIG9uIElFXG4vLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4XG5pZiAoICFzdXBwb3J0LmhyZWZOb3JtYWxpemVkICkge1xuICAvLyBocmVmL3NyYyBwcm9wZXJ0eSBzaG91bGQgZ2V0IHRoZSBmdWxsIG5vcm1hbGl6ZWQgVVJMICgjMTAyOTkvIzEyOTE1KVxuICBqUXVlcnkuZWFjaChbIFwiaHJlZlwiLCBcInNyY1wiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuICAgIGpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXSA9IHtcbiAgICAgIGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgIHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgNCApO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xufVxuXG4vLyBTdXBwb3J0OiBTYWZhcmksIElFOStcbi8vIG1pcy1yZXBvcnRzIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHByb3BlcnR5IG9mIGFuIG9wdGlvblxuLy8gQWNjZXNzaW5nIHRoZSBwYXJlbnQncyBzZWxlY3RlZEluZGV4IHByb3BlcnR5IGZpeGVzIGl0XG5pZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkge1xuICBqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0ge1xuICAgIGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICB2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXG4gICAgICBpZiAoIHBhcmVudCApIHtcbiAgICAgICAgcGFyZW50LnNlbGVjdGVkSW5kZXg7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgaXQgYWxzbyB3b3JrcyB3aXRoIG9wdGdyb3Vwcywgc2VlICM1NzAxXG4gICAgICAgIGlmICggcGFyZW50LnBhcmVudE5vZGUgKSB7XG4gICAgICAgICAgcGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xufVxuXG5qUXVlcnkuZWFjaChbXG4gIFwidGFiSW5kZXhcIixcbiAgXCJyZWFkT25seVwiLFxuICBcIm1heExlbmd0aFwiLFxuICBcImNlbGxTcGFjaW5nXCIsXG4gIFwiY2VsbFBhZGRpbmdcIixcbiAgXCJyb3dTcGFuXCIsXG4gIFwiY29sU3BhblwiLFxuICBcInVzZU1hcFwiLFxuICBcImZyYW1lQm9yZGVyXCIsXG4gIFwiY29udGVudEVkaXRhYmxlXCJcbl0sIGZ1bmN0aW9uKCkge1xuICBqUXVlcnkucHJvcEZpeFsgdGhpcy50b0xvd2VyQ2FzZSgpIF0gPSB0aGlzO1xufSk7XG5cbi8vIElFNi83IGNhbGwgZW5jdHlwZSBlbmNvZGluZ1xuaWYgKCAhc3VwcG9ydC5lbmN0eXBlICkge1xuICBqUXVlcnkucHJvcEZpeC5lbmN0eXBlID0gXCJlbmNvZGluZ1wiO1xufVxuXG5cblxuXG52YXIgcmNsYXNzID0gL1tcXHRcXHJcXG5cXGZdL2c7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuICBhZGRDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuICAgIHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuICAgICAgaSA9IDAsXG4gICAgICBsZW4gPSB0aGlzLmxlbmd0aCxcbiAgICAgIHByb2NlZWQgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWU7XG5cbiAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaiApIHtcbiAgICAgICAgalF1ZXJ5KCB0aGlzICkuYWRkQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIHRoaXMuY2xhc3NOYW1lICkgKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICggcHJvY2VlZCApIHtcbiAgICAgIC8vIFRoZSBkaXNqdW5jdGlvbiBoZXJlIGlzIGZvciBiZXR0ZXIgY29tcHJlc3NpYmlsaXR5IChzZWUgcmVtb3ZlQ2xhc3MpXG4gICAgICBjbGFzc2VzID0gKCB2YWx1ZSB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG4gICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgICAgZWxlbSA9IHRoaXNbIGkgXTtcbiAgICAgICAgY3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIGVsZW0uY2xhc3NOYW1lID9cbiAgICAgICAgICAoIFwiIFwiICsgZWxlbS5jbGFzc05hbWUgKyBcIiBcIiApLnJlcGxhY2UoIHJjbGFzcywgXCIgXCIgKSA6XG4gICAgICAgICAgXCIgXCJcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIGN1ciApIHtcbiAgICAgICAgICBqID0gMDtcbiAgICAgICAgICB3aGlsZSAoIChjbGF6eiA9IGNsYXNzZXNbaisrXSkgKSB7XG4gICAgICAgICAgICBpZiAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA8IDAgKSB7XG4gICAgICAgICAgICAgIGN1ciArPSBjbGF6eiArIFwiIFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG4gICAgICAgICAgZmluYWxWYWx1ZSA9IGpRdWVyeS50cmltKCBjdXIgKTtcbiAgICAgICAgICBpZiAoIGVsZW0uY2xhc3NOYW1lICE9PSBmaW5hbFZhbHVlICkge1xuICAgICAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBmaW5hbFZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7XG4gICAgdmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY2xhenosIGosIGZpbmFsVmFsdWUsXG4gICAgICBpID0gMCxcbiAgICAgIGxlbiA9IHRoaXMubGVuZ3RoLFxuICAgICAgcHJvY2VlZCA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlO1xuXG4gICAgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGogKSB7XG4gICAgICAgIGpRdWVyeSggdGhpcyApLnJlbW92ZUNsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCB0aGlzLmNsYXNzTmFtZSApICk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCBwcm9jZWVkICkge1xuICAgICAgY2xhc3NlcyA9ICggdmFsdWUgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuICAgICAgZm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICAgIGVsZW0gPSB0aGlzWyBpIF07XG4gICAgICAgIC8vIFRoaXMgZXhwcmVzc2lvbiBpcyBoZXJlIGZvciBiZXR0ZXIgY29tcHJlc3NpYmlsaXR5IChzZWUgYWRkQ2xhc3MpXG4gICAgICAgIGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBlbGVtLmNsYXNzTmFtZSA/XG4gICAgICAgICAgKCBcIiBcIiArIGVsZW0uY2xhc3NOYW1lICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICkgOlxuICAgICAgICAgIFwiXCJcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIGN1ciApIHtcbiAgICAgICAgICBqID0gMDtcbiAgICAgICAgICB3aGlsZSAoIChjbGF6eiA9IGNsYXNzZXNbaisrXSkgKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgKmFsbCogaW5zdGFuY2VzXG4gICAgICAgICAgICB3aGlsZSAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA+PSAwICkge1xuICAgICAgICAgICAgICBjdXIgPSBjdXIucmVwbGFjZSggXCIgXCIgKyBjbGF6eiArIFwiIFwiLCBcIiBcIiApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG4gICAgICAgICAgZmluYWxWYWx1ZSA9IHZhbHVlID8galF1ZXJ5LnRyaW0oIGN1ciApIDogXCJcIjtcbiAgICAgICAgICBpZiAoIGVsZW0uY2xhc3NOYW1lICE9PSBmaW5hbFZhbHVlICkge1xuICAgICAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBmaW5hbFZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUsIHN0YXRlVmFsICkge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG4gICAgaWYgKCB0eXBlb2Ygc3RhdGVWYWwgPT09IFwiYm9vbGVhblwiICYmIHR5cGUgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgICByZXR1cm4gc3RhdGVWYWwgPyB0aGlzLmFkZENsYXNzKCB2YWx1ZSApIDogdGhpcy5yZW1vdmVDbGFzcyggdmFsdWUgKTtcbiAgICB9XG5cbiAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcbiAgICAgICAgalF1ZXJ5KCB0aGlzICkudG9nZ2xlQ2xhc3MoIHZhbHVlLmNhbGwodGhpcywgaSwgdGhpcy5jbGFzc05hbWUsIHN0YXRlVmFsKSwgc3RhdGVWYWwgKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgICAgIC8vIHRvZ2dsZSBpbmRpdmlkdWFsIGNsYXNzIG5hbWVzXG4gICAgICAgIHZhciBjbGFzc05hbWUsXG4gICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgc2VsZiA9IGpRdWVyeSggdGhpcyApLFxuICAgICAgICAgIGNsYXNzTmFtZXMgPSB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cbiAgICAgICAgd2hpbGUgKCAoY2xhc3NOYW1lID0gY2xhc3NOYW1lc1sgaSsrIF0pICkge1xuICAgICAgICAgIC8vIGNoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdFxuICAgICAgICAgIGlmICggc2VsZi5oYXNDbGFzcyggY2xhc3NOYW1lICkgKSB7XG4gICAgICAgICAgICBzZWxmLnJlbW92ZUNsYXNzKCBjbGFzc05hbWUgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5hZGRDbGFzcyggY2xhc3NOYW1lICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIC8vIFRvZ2dsZSB3aG9sZSBjbGFzcyBuYW1lXG4gICAgICB9IGVsc2UgaWYgKCB0eXBlID09PSBzdHJ1bmRlZmluZWQgfHwgdHlwZSA9PT0gXCJib29sZWFuXCIgKSB7XG4gICAgICAgIGlmICggdGhpcy5jbGFzc05hbWUgKSB7XG4gICAgICAgICAgLy8gc3RvcmUgY2xhc3NOYW1lIGlmIHNldFxuICAgICAgICAgIGpRdWVyeS5fZGF0YSggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIsIHRoaXMuY2xhc3NOYW1lICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBcImZhbHNlXCIsXG4gICAgICAgIC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG4gICAgICAgIC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXG4gICAgICAgIC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSB0aGlzLmNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgPyBcIlwiIDogalF1ZXJ5Ll9kYXRhKCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiApIHx8IFwiXCI7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgaGFzQ2xhc3M6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gXCIgXCIgKyBzZWxlY3RvciArIFwiIFwiLFxuICAgICAgaSA9IDAsXG4gICAgICBsID0gdGhpcy5sZW5ndGg7XG4gICAgZm9yICggOyBpIDwgbDsgaSsrICkge1xuICAgICAgaWYgKCB0aGlzW2ldLm5vZGVUeXBlID09PSAxICYmIChcIiBcIiArIHRoaXNbaV0uY2xhc3NOYW1lICsgXCIgXCIpLnJlcGxhY2UocmNsYXNzLCBcIiBcIikuaW5kZXhPZiggY2xhc3NOYW1lICkgPj0gMCApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KTtcblxuXG5cblxuLy8gUmV0dXJuIGpRdWVyeSBmb3IgYXR0cmlidXRlcy1vbmx5IGluY2x1c2lvblxuXG5cbmpRdWVyeS5lYWNoKCAoXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBcIiArXG4gIFwibW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgXCIgK1xuICBcImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIikuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblxuICAvLyBIYW5kbGUgZXZlbnQgYmluZGluZ1xuICBqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBkYXRhLCBmbiApIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAgP1xuICAgICAgdGhpcy5vbiggbmFtZSwgbnVsbCwgZGF0YSwgZm4gKSA6XG4gICAgICB0aGlzLnRyaWdnZXIoIG5hbWUgKTtcbiAgfTtcbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcbiAgaG92ZXI6IGZ1bmN0aW9uKCBmbk92ZXIsIGZuT3V0ICkge1xuICAgIHJldHVybiB0aGlzLm1vdXNlZW50ZXIoIGZuT3ZlciApLm1vdXNlbGVhdmUoIGZuT3V0IHx8IGZuT3ZlciApO1xuICB9LFxuXG4gIGJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZGF0YSwgZm4gKSB7XG4gICAgcmV0dXJuIHRoaXMub24oIHR5cGVzLCBudWxsLCBkYXRhLCBmbiApO1xuICB9LFxuICB1bmJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZm4gKSB7XG4gICAgcmV0dXJuIHRoaXMub2ZmKCB0eXBlcywgbnVsbCwgZm4gKTtcbiAgfSxcblxuICBkZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZGF0YSwgZm4gKSB7XG4gICAgcmV0dXJuIHRoaXMub24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTtcbiAgfSxcbiAgdW5kZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZm4gKSB7XG4gICAgLy8gKCBuYW1lc3BhY2UgKSBvciAoIHNlbGVjdG9yLCB0eXBlcyBbLCBmbl0gKVxuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gdGhpcy5vZmYoIHNlbGVjdG9yLCBcIioqXCIgKSA6IHRoaXMub2ZmKCB0eXBlcywgc2VsZWN0b3IgfHwgXCIqKlwiLCBmbiApO1xuICB9XG59KTtcblxuXG52YXIgbm9uY2UgPSBqUXVlcnkubm93KCk7XG5cbnZhciBycXVlcnkgPSAoL1xcPy8pO1xuXG5cblxudmFyIHJ2YWxpZHRva2VucyA9IC8oLCl8KFxcW3x7KXwofXxdKXxcIig/OlteXCJcXFxcXFxyXFxuXXxcXFxcW1wiXFxcXFxcL2JmbnJ0XXxcXFxcdVtcXGRhLWZBLUZdezR9KSpcIlxccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXFxkKVxcZCsoPzpcXC5cXGQrfCkoPzpbZUVdWystXT9cXGQrfCkvZztcblxualF1ZXJ5LnBhcnNlSlNPTiA9IGZ1bmN0aW9uKCBkYXRhICkge1xuICAvLyBBdHRlbXB0IHRvIHBhcnNlIHVzaW5nIHRoZSBuYXRpdmUgSlNPTiBwYXJzZXIgZmlyc3RcbiAgaWYgKCB3aW5kb3cuSlNPTiAmJiB3aW5kb3cuSlNPTi5wYXJzZSApIHtcbiAgICAvLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuICAgIC8vIFdvcmthcm91bmQgZmFpbHVyZSB0byBzdHJpbmctY2FzdCBudWxsIGlucHV0XG4gICAgcmV0dXJuIHdpbmRvdy5KU09OLnBhcnNlKCBkYXRhICsgXCJcIiApO1xuICB9XG5cbiAgdmFyIHJlcXVpcmVOb25Db21tYSxcbiAgICBkZXB0aCA9IG51bGwsXG4gICAgc3RyID0galF1ZXJ5LnRyaW0oIGRhdGEgKyBcIlwiICk7XG5cbiAgLy8gR3VhcmQgYWdhaW5zdCBpbnZhbGlkIChhbmQgcG9zc2libHkgZGFuZ2Vyb3VzKSBpbnB1dCBieSBlbnN1cmluZyB0aGF0IG5vdGhpbmcgcmVtYWluc1xuICAvLyBhZnRlciByZW1vdmluZyB2YWxpZCB0b2tlbnNcbiAgcmV0dXJuIHN0ciAmJiAhalF1ZXJ5LnRyaW0oIHN0ci5yZXBsYWNlKCBydmFsaWR0b2tlbnMsIGZ1bmN0aW9uKCB0b2tlbiwgY29tbWEsIG9wZW4sIGNsb3NlICkge1xuXG4gICAgLy8gRm9yY2UgdGVybWluYXRpb24gaWYgd2Ugc2VlIGEgbWlzcGxhY2VkIGNvbW1hXG4gICAgaWYgKCByZXF1aXJlTm9uQ29tbWEgJiYgY29tbWEgKSB7XG4gICAgICBkZXB0aCA9IDA7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSBubyBtb3JlIHJlcGxhY2VtZW50cyBhZnRlciByZXR1cm5pbmcgdG8gb3V0ZXJtb3N0IGRlcHRoXG4gICAgaWYgKCBkZXB0aCA9PT0gMCApIHtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG5cbiAgICAvLyBDb21tYXMgbXVzdCBub3QgZm9sbG93IFwiW1wiLCBcIntcIiwgb3IgXCIsXCJcbiAgICByZXF1aXJlTm9uQ29tbWEgPSBvcGVuIHx8IGNvbW1hO1xuXG4gICAgLy8gRGV0ZXJtaW5lIG5ldyBkZXB0aFxuICAgIC8vIGFycmF5L29iamVjdCBvcGVuIChcIltcIiBvciBcIntcIik6IGRlcHRoICs9IHRydWUgLSBmYWxzZSAoaW5jcmVtZW50KVxuICAgIC8vIGFycmF5L29iamVjdCBjbG9zZSAoXCJdXCIgb3IgXCJ9XCIpOiBkZXB0aCArPSBmYWxzZSAtIHRydWUgKGRlY3JlbWVudClcbiAgICAvLyBvdGhlciBjYXNlcyAoXCIsXCIgb3IgcHJpbWl0aXZlKTogZGVwdGggKz0gdHJ1ZSAtIHRydWUgKG51bWVyaWMgY2FzdClcbiAgICBkZXB0aCArPSAhY2xvc2UgLSAhb3BlbjtcblxuICAgIC8vIFJlbW92ZSB0aGlzIHRva2VuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH0pICkgP1xuICAgICggRnVuY3Rpb24oIFwicmV0dXJuIFwiICsgc3RyICkgKSgpIDpcbiAgICBqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBKU09OOiBcIiArIGRhdGEgKTtcbn07XG5cblxuLy8gQ3Jvc3MtYnJvd3NlciB4bWwgcGFyc2luZ1xualF1ZXJ5LnBhcnNlWE1MID0gZnVuY3Rpb24oIGRhdGEgKSB7XG4gIHZhciB4bWwsIHRtcDtcbiAgaWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB0cnkge1xuICAgIGlmICggd2luZG93LkRPTVBhcnNlciApIHsgLy8gU3RhbmRhcmRcbiAgICAgIHRtcCA9IG5ldyBET01QYXJzZXIoKTtcbiAgICAgIHhtbCA9IHRtcC5wYXJzZUZyb21TdHJpbmcoIGRhdGEsIFwidGV4dC94bWxcIiApO1xuICAgIH0gZWxzZSB7IC8vIElFXG4gICAgICB4bWwgPSBuZXcgQWN0aXZlWE9iamVjdCggXCJNaWNyb3NvZnQuWE1MRE9NXCIgKTtcbiAgICAgIHhtbC5hc3luYyA9IFwiZmFsc2VcIjtcbiAgICAgIHhtbC5sb2FkWE1MKCBkYXRhICk7XG4gICAgfVxuICB9IGNhdGNoKCBlICkge1xuICAgIHhtbCA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoICF4bWwgfHwgIXhtbC5kb2N1bWVudEVsZW1lbnQgfHwgeG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInBhcnNlcmVycm9yXCIgKS5sZW5ndGggKSB7XG4gICAgalF1ZXJ5LmVycm9yKCBcIkludmFsaWQgWE1MOiBcIiArIGRhdGEgKTtcbiAgfVxuICByZXR1cm4geG1sO1xufTtcblxuXG52YXJcbiAgLy8gRG9jdW1lbnQgbG9jYXRpb25cbiAgYWpheExvY1BhcnRzLFxuICBhamF4TG9jYXRpb24sXG5cbiAgcmhhc2ggPSAvIy4qJC8sXG4gIHJ0cyA9IC8oWz8mXSlfPVteJl0qLyxcbiAgcmhlYWRlcnMgPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKilcXHI/JC9tZywgLy8gSUUgbGVhdmVzIGFuIFxcciBjaGFyYWN0ZXIgYXQgRU9MXG4gIC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuICBybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuICBybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcbiAgcnByb3RvY29sID0gL15cXC9cXC8vLFxuICBydXJsID0gL14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sXG5cbiAgLyogUHJlZmlsdGVyc1xuICAgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuICAgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOlxuICAgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG4gICAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcbiAgICogMykga2V5IGlzIHRoZSBkYXRhVHlwZVxuICAgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG4gICAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG4gICAqL1xuICBwcmVmaWx0ZXJzID0ge30sXG5cbiAgLyogVHJhbnNwb3J0cyBiaW5kaW5nc1xuICAgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG4gICAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcbiAgICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gXCIqXCIgaWYgbmVlZGVkXG4gICAqL1xuICB0cmFuc3BvcnRzID0ge30sXG5cbiAgLy8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG4gIGFsbFR5cGVzID0gXCIqL1wiLmNvbmNhdChcIipcIik7XG5cbi8vICM4MTM4LCBJRSBtYXkgdGhyb3cgYW4gZXhjZXB0aW9uIHdoZW4gYWNjZXNzaW5nXG4vLyBhIGZpZWxkIGZyb20gd2luZG93LmxvY2F0aW9uIGlmIGRvY3VtZW50LmRvbWFpbiBoYXMgYmVlbiBzZXRcbnRyeSB7XG4gIGFqYXhMb2NhdGlvbiA9IGxvY2F0aW9uLmhyZWY7XG59IGNhdGNoKCBlICkge1xuICAvLyBVc2UgdGhlIGhyZWYgYXR0cmlidXRlIG9mIGFuIEEgZWxlbWVudFxuICAvLyBzaW5jZSBJRSB3aWxsIG1vZGlmeSBpdCBnaXZlbiBkb2N1bWVudC5sb2NhdGlvblxuICBhamF4TG9jYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xuICBhamF4TG9jYXRpb24uaHJlZiA9IFwiXCI7XG4gIGFqYXhMb2NhdGlvbiA9IGFqYXhMb2NhdGlvbi5ocmVmO1xufVxuXG4vLyBTZWdtZW50IGxvY2F0aW9uIGludG8gcGFydHNcbmFqYXhMb2NQYXJ0cyA9IHJ1cmwuZXhlYyggYWpheExvY2F0aW9uLnRvTG93ZXJDYXNlKCkgKSB8fCBbXTtcblxuLy8gQmFzZSBcImNvbnN0cnVjdG9yXCIgZm9yIGpRdWVyeS5hamF4UHJlZmlsdGVyIGFuZCBqUXVlcnkuYWpheFRyYW5zcG9ydFxuZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7XG5cbiAgLy8gZGF0YVR5cGVFeHByZXNzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byBcIipcIlxuICByZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHtcblxuICAgIGlmICggdHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiAhPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgIGZ1bmMgPSBkYXRhVHlwZUV4cHJlc3Npb247XG4gICAgICBkYXRhVHlwZUV4cHJlc3Npb24gPSBcIipcIjtcbiAgICB9XG5cbiAgICB2YXIgZGF0YVR5cGUsXG4gICAgICBpID0gMCxcbiAgICAgIGRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuICAgIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGZ1bmMgKSApIHtcbiAgICAgIC8vIEZvciBlYWNoIGRhdGFUeXBlIGluIHRoZSBkYXRhVHlwZUV4cHJlc3Npb25cbiAgICAgIHdoaWxlICggKGRhdGFUeXBlID0gZGF0YVR5cGVzW2krK10pICkge1xuICAgICAgICAvLyBQcmVwZW5kIGlmIHJlcXVlc3RlZFxuICAgICAgICBpZiAoIGRhdGFUeXBlLmNoYXJBdCggMCApID09PSBcIitcIiApIHtcbiAgICAgICAgICBkYXRhVHlwZSA9IGRhdGFUeXBlLnNsaWNlKCAxICkgfHwgXCIqXCI7XG4gICAgICAgICAgKHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSkudW5zaGlmdCggZnVuYyApO1xuXG4gICAgICAgIC8vIE90aGVyd2lzZSBhcHBlbmRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAoc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdKS5wdXNoKCBmdW5jICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8vIEJhc2UgaW5zcGVjdGlvbiBmdW5jdGlvbiBmb3IgcHJlZmlsdGVycyBhbmQgdHJhbnNwb3J0c1xuZnVuY3Rpb24gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSwgb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApIHtcblxuICB2YXIgaW5zcGVjdGVkID0ge30sXG4gICAgc2Vla2luZ1RyYW5zcG9ydCA9ICggc3RydWN0dXJlID09PSB0cmFuc3BvcnRzICk7XG5cbiAgZnVuY3Rpb24gaW5zcGVjdCggZGF0YVR5cGUgKSB7XG4gICAgdmFyIHNlbGVjdGVkO1xuICAgIGluc3BlY3RlZFsgZGF0YVR5cGUgXSA9IHRydWU7XG4gICAgalF1ZXJ5LmVhY2goIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSwgZnVuY3Rpb24oIF8sIHByZWZpbHRlck9yRmFjdG9yeSApIHtcbiAgICAgIHZhciBkYXRhVHlwZU9yVHJhbnNwb3J0ID0gcHJlZmlsdGVyT3JGYWN0b3J5KCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICk7XG4gICAgICBpZiAoIHR5cGVvZiBkYXRhVHlwZU9yVHJhbnNwb3J0ID09PSBcInN0cmluZ1wiICYmICFzZWVraW5nVHJhbnNwb3J0ICYmICFpbnNwZWN0ZWRbIGRhdGFUeXBlT3JUcmFuc3BvcnQgXSApIHtcbiAgICAgICAgb3B0aW9ucy5kYXRhVHlwZXMudW5zaGlmdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuICAgICAgICBpbnNwZWN0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoIHNlZWtpbmdUcmFuc3BvcnQgKSB7XG4gICAgICAgIHJldHVybiAhKCBzZWxlY3RlZCA9IGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc2VsZWN0ZWQ7XG4gIH1cblxuICByZXR1cm4gaW5zcGVjdCggb3B0aW9ucy5kYXRhVHlwZXNbIDAgXSApIHx8ICFpbnNwZWN0ZWRbIFwiKlwiIF0gJiYgaW5zcGVjdCggXCIqXCIgKTtcbn1cblxuLy8gQSBzcGVjaWFsIGV4dGVuZCBmb3IgYWpheCBvcHRpb25zXG4vLyB0aGF0IHRha2VzIFwiZmxhdFwiIG9wdGlvbnMgKG5vdCB0byBiZSBkZWVwIGV4dGVuZGVkKVxuLy8gRml4ZXMgIzk4ODdcbmZ1bmN0aW9uIGFqYXhFeHRlbmQoIHRhcmdldCwgc3JjICkge1xuICB2YXIgZGVlcCwga2V5LFxuICAgIGZsYXRPcHRpb25zID0galF1ZXJ5LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9ucyB8fCB7fTtcblxuICBmb3IgKCBrZXkgaW4gc3JjICkge1xuICAgIGlmICggc3JjWyBrZXkgXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgKCBmbGF0T3B0aW9uc1sga2V5IF0gPyB0YXJnZXQgOiAoIGRlZXAgfHwgKGRlZXAgPSB7fSkgKSApWyBrZXkgXSA9IHNyY1sga2V5IF07XG4gICAgfVxuICB9XG4gIGlmICggZGVlcCApIHtcbiAgICBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB0YXJnZXQsIGRlZXAgKTtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qIEhhbmRsZXMgcmVzcG9uc2VzIHRvIGFuIGFqYXggcmVxdWVzdDpcbiAqIC0gZmluZHMgdGhlIHJpZ2h0IGRhdGFUeXBlIChtZWRpYXRlcyBiZXR3ZWVuIGNvbnRlbnQtdHlwZSBhbmQgZXhwZWN0ZWQgZGF0YVR5cGUpXG4gKiAtIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2VcbiAqL1xuZnVuY3Rpb24gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApIHtcbiAgdmFyIGZpcnN0RGF0YVR5cGUsIGN0LCBmaW5hbERhdGFUeXBlLCB0eXBlLFxuICAgIGNvbnRlbnRzID0gcy5jb250ZW50cyxcbiAgICBkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcztcblxuICAvLyBSZW1vdmUgYXV0byBkYXRhVHlwZSBhbmQgZ2V0IGNvbnRlbnQtdHlwZSBpbiB0aGUgcHJvY2Vzc1xuICB3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSBcIipcIiApIHtcbiAgICBkYXRhVHlwZXMuc2hpZnQoKTtcbiAgICBpZiAoIGN0ID09PSB1bmRlZmluZWQgKSB7XG4gICAgICBjdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIik7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgd2UncmUgZGVhbGluZyB3aXRoIGEga25vd24gY29udGVudC10eXBlXG4gIGlmICggY3QgKSB7XG4gICAgZm9yICggdHlwZSBpbiBjb250ZW50cyApIHtcbiAgICAgIGlmICggY29udGVudHNbIHR5cGUgXSAmJiBjb250ZW50c1sgdHlwZSBdLnRlc3QoIGN0ICkgKSB7XG4gICAgICAgIGRhdGFUeXBlcy51bnNoaWZ0KCB0eXBlICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGEgcmVzcG9uc2UgZm9yIHRoZSBleHBlY3RlZCBkYXRhVHlwZVxuICBpZiAoIGRhdGFUeXBlc1sgMCBdIGluIHJlc3BvbnNlcyApIHtcbiAgICBmaW5hbERhdGFUeXBlID0gZGF0YVR5cGVzWyAwIF07XG4gIH0gZWxzZSB7XG4gICAgLy8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlc1xuICAgIGZvciAoIHR5cGUgaW4gcmVzcG9uc2VzICkge1xuICAgICAgaWYgKCAhZGF0YVR5cGVzWyAwIF0gfHwgcy5jb252ZXJ0ZXJzWyB0eXBlICsgXCIgXCIgKyBkYXRhVHlwZXNbMF0gXSApIHtcbiAgICAgICAgZmluYWxEYXRhVHlwZSA9IHR5cGU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKCAhZmlyc3REYXRhVHlwZSApIHtcbiAgICAgICAgZmlyc3REYXRhVHlwZSA9IHR5cGU7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIE9yIGp1c3QgdXNlIGZpcnN0IG9uZVxuICAgIGZpbmFsRGF0YVR5cGUgPSBmaW5hbERhdGFUeXBlIHx8IGZpcnN0RGF0YVR5cGU7XG4gIH1cblxuICAvLyBJZiB3ZSBmb3VuZCBhIGRhdGFUeXBlXG4gIC8vIFdlIGFkZCB0aGUgZGF0YVR5cGUgdG8gdGhlIGxpc3QgaWYgbmVlZGVkXG4gIC8vIGFuZCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2VcbiAgaWYgKCBmaW5hbERhdGFUeXBlICkge1xuICAgIGlmICggZmluYWxEYXRhVHlwZSAhPT0gZGF0YVR5cGVzWyAwIF0gKSB7XG4gICAgICBkYXRhVHlwZXMudW5zaGlmdCggZmluYWxEYXRhVHlwZSApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2VzWyBmaW5hbERhdGFUeXBlIF07XG4gIH1cbn1cblxuLyogQ2hhaW4gY29udmVyc2lvbnMgZ2l2ZW4gdGhlIHJlcXVlc3QgYW5kIHRoZSBvcmlnaW5hbCByZXNwb25zZVxuICogQWxzbyBzZXRzIHRoZSByZXNwb25zZVhYWCBmaWVsZHMgb24gdGhlIGpxWEhSIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApIHtcbiAgdmFyIGNvbnYyLCBjdXJyZW50LCBjb252LCB0bXAsIHByZXYsXG4gICAgY29udmVydGVycyA9IHt9LFxuICAgIC8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb25cbiAgICBkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcy5zbGljZSgpO1xuXG4gIC8vIENyZWF0ZSBjb252ZXJ0ZXJzIG1hcCB3aXRoIGxvd2VyY2FzZWQga2V5c1xuICBpZiAoIGRhdGFUeXBlc1sgMSBdICkge1xuICAgIGZvciAoIGNvbnYgaW4gcy5jb252ZXJ0ZXJzICkge1xuICAgICAgY29udmVydGVyc1sgY29udi50b0xvd2VyQ2FzZSgpIF0gPSBzLmNvbnZlcnRlcnNbIGNvbnYgXTtcbiAgICB9XG4gIH1cblxuICBjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cbiAgLy8gQ29udmVydCB0byBlYWNoIHNlcXVlbnRpYWwgZGF0YVR5cGVcbiAgd2hpbGUgKCBjdXJyZW50ICkge1xuXG4gICAgaWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7XG4gICAgICBqcVhIUlsgcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdIF0gPSByZXNwb25zZTtcbiAgICB9XG5cbiAgICAvLyBBcHBseSB0aGUgZGF0YUZpbHRlciBpZiBwcm92aWRlZFxuICAgIGlmICggIXByZXYgJiYgaXNTdWNjZXNzICYmIHMuZGF0YUZpbHRlciApIHtcbiAgICAgIHJlc3BvbnNlID0gcy5kYXRhRmlsdGVyKCByZXNwb25zZSwgcy5kYXRhVHlwZSApO1xuICAgIH1cblxuICAgIHByZXYgPSBjdXJyZW50O1xuICAgIGN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTtcblxuICAgIGlmICggY3VycmVudCApIHtcblxuICAgICAgLy8gVGhlcmUncyBvbmx5IHdvcmsgdG8gZG8gaWYgY3VycmVudCBkYXRhVHlwZSBpcyBub24tYXV0b1xuICAgICAgaWYgKCBjdXJyZW50ID09PSBcIipcIiApIHtcblxuICAgICAgICBjdXJyZW50ID0gcHJldjtcblxuICAgICAgLy8gQ29udmVydCByZXNwb25zZSBpZiBwcmV2IGRhdGFUeXBlIGlzIG5vbi1hdXRvIGFuZCBkaWZmZXJzIGZyb20gY3VycmVudFxuICAgICAgfSBlbHNlIGlmICggcHJldiAhPT0gXCIqXCIgJiYgcHJldiAhPT0gY3VycmVudCApIHtcblxuICAgICAgICAvLyBTZWVrIGEgZGlyZWN0IGNvbnZlcnRlclxuICAgICAgICBjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgY3VycmVudCBdIHx8IGNvbnZlcnRlcnNbIFwiKiBcIiArIGN1cnJlbnQgXTtcblxuICAgICAgICAvLyBJZiBub25lIGZvdW5kLCBzZWVrIGEgcGFpclxuICAgICAgICBpZiAoICFjb252ICkge1xuICAgICAgICAgIGZvciAoIGNvbnYyIGluIGNvbnZlcnRlcnMgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIGNvbnYyIG91dHB1dHMgY3VycmVudFxuICAgICAgICAgICAgdG1wID0gY29udjIuc3BsaXQoIFwiIFwiICk7XG4gICAgICAgICAgICBpZiAoIHRtcFsgMSBdID09PSBjdXJyZW50ICkge1xuXG4gICAgICAgICAgICAgIC8vIElmIHByZXYgY2FuIGJlIGNvbnZlcnRlZCB0byBhY2NlcHRlZCBpbnB1dFxuICAgICAgICAgICAgICBjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgdG1wWyAwIF0gXSB8fFxuICAgICAgICAgICAgICAgIGNvbnZlcnRlcnNbIFwiKiBcIiArIHRtcFsgMCBdIF07XG4gICAgICAgICAgICAgIGlmICggY29udiApIHtcbiAgICAgICAgICAgICAgICAvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzXG4gICAgICAgICAgICAgICAgaWYgKCBjb252ID09PSB0cnVlICkge1xuICAgICAgICAgICAgICAgICAgY29udiA9IGNvbnZlcnRlcnNbIGNvbnYyIF07XG5cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGluc2VydCB0aGUgaW50ZXJtZWRpYXRlIGRhdGFUeXBlXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggY29udmVydGVyc1sgY29udjIgXSAhPT0gdHJ1ZSApIHtcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB0bXBbIDAgXTtcbiAgICAgICAgICAgICAgICAgIGRhdGFUeXBlcy51bnNoaWZ0KCB0bXBbIDEgXSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFwcGx5IGNvbnZlcnRlciAoaWYgbm90IGFuIGVxdWl2YWxlbmNlKVxuICAgICAgICBpZiAoIGNvbnYgIT09IHRydWUgKSB7XG5cbiAgICAgICAgICAvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtXG4gICAgICAgICAgaWYgKCBjb252ICYmIHNbIFwidGhyb3dzXCIgXSApIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuICAgICAgICAgICAgfSBjYXRjaCAoIGUgKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7IHN0YXRlOiBcInBhcnNlcmVycm9yXCIsIGVycm9yOiBjb252ID8gZSA6IFwiTm8gY29udmVyc2lvbiBmcm9tIFwiICsgcHJldiArIFwiIHRvIFwiICsgY3VycmVudCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IHN0YXRlOiBcInN1Y2Nlc3NcIiwgZGF0YTogcmVzcG9uc2UgfTtcbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cbiAgLy8gQ291bnRlciBmb3IgaG9sZGluZyB0aGUgbnVtYmVyIG9mIGFjdGl2ZSBxdWVyaWVzXG4gIGFjdGl2ZTogMCxcblxuICAvLyBMYXN0LU1vZGlmaWVkIGhlYWRlciBjYWNoZSBmb3IgbmV4dCByZXF1ZXN0XG4gIGxhc3RNb2RpZmllZDoge30sXG4gIGV0YWc6IHt9LFxuXG4gIGFqYXhTZXR0aW5nczoge1xuICAgIHVybDogYWpheExvY2F0aW9uLFxuICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgaXNMb2NhbDogcmxvY2FsUHJvdG9jb2wudGVzdCggYWpheExvY1BhcnRzWyAxIF0gKSxcbiAgICBnbG9iYWw6IHRydWUsXG4gICAgcHJvY2Vzc0RhdGE6IHRydWUsXG4gICAgYXN5bmM6IHRydWUsXG4gICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsXG4gICAgLypcbiAgICB0aW1lb3V0OiAwLFxuICAgIGRhdGE6IG51bGwsXG4gICAgZGF0YVR5cGU6IG51bGwsXG4gICAgdXNlcm5hbWU6IG51bGwsXG4gICAgcGFzc3dvcmQ6IG51bGwsXG4gICAgY2FjaGU6IG51bGwsXG4gICAgdGhyb3dzOiBmYWxzZSxcbiAgICB0cmFkaXRpb25hbDogZmFsc2UsXG4gICAgaGVhZGVyczoge30sXG4gICAgKi9cblxuICAgIGFjY2VwdHM6IHtcbiAgICAgIFwiKlwiOiBhbGxUeXBlcyxcbiAgICAgIHRleHQ6IFwidGV4dC9wbGFpblwiLFxuICAgICAgaHRtbDogXCJ0ZXh0L2h0bWxcIixcbiAgICAgIHhtbDogXCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsXG4gICAgICBqc29uOiBcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwiXG4gICAgfSxcblxuICAgIGNvbnRlbnRzOiB7XG4gICAgICB4bWw6IC94bWwvLFxuICAgICAgaHRtbDogL2h0bWwvLFxuICAgICAganNvbjogL2pzb24vXG4gICAgfSxcblxuICAgIHJlc3BvbnNlRmllbGRzOiB7XG4gICAgICB4bWw6IFwicmVzcG9uc2VYTUxcIixcbiAgICAgIHRleHQ6IFwicmVzcG9uc2VUZXh0XCIsXG4gICAgICBqc29uOiBcInJlc3BvbnNlSlNPTlwiXG4gICAgfSxcblxuICAgIC8vIERhdGEgY29udmVydGVyc1xuICAgIC8vIEtleXMgc2VwYXJhdGUgc291cmNlIChvciBjYXRjaGFsbCBcIipcIikgYW5kIGRlc3RpbmF0aW9uIHR5cGVzIHdpdGggYSBzaW5nbGUgc3BhY2VcbiAgICBjb252ZXJ0ZXJzOiB7XG5cbiAgICAgIC8vIENvbnZlcnQgYW55dGhpbmcgdG8gdGV4dFxuICAgICAgXCIqIHRleHRcIjogU3RyaW5nLFxuXG4gICAgICAvLyBUZXh0IHRvIGh0bWwgKHRydWUgPSBubyB0cmFuc2Zvcm1hdGlvbilcbiAgICAgIFwidGV4dCBodG1sXCI6IHRydWUsXG5cbiAgICAgIC8vIEV2YWx1YXRlIHRleHQgYXMgYSBqc29uIGV4cHJlc3Npb25cbiAgICAgIFwidGV4dCBqc29uXCI6IGpRdWVyeS5wYXJzZUpTT04sXG5cbiAgICAgIC8vIFBhcnNlIHRleHQgYXMgeG1sXG4gICAgICBcInRleHQgeG1sXCI6IGpRdWVyeS5wYXJzZVhNTFxuICAgIH0sXG5cbiAgICAvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOlxuICAgIC8vIHlvdSBjYW4gYWRkIHlvdXIgb3duIGN1c3RvbSBvcHRpb25zIGhlcmUgaWZcbiAgICAvLyBhbmQgd2hlbiB5b3UgY3JlYXRlIG9uZSB0aGF0IHNob3VsZG4ndCBiZVxuICAgIC8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKVxuICAgIGZsYXRPcHRpb25zOiB7XG4gICAgICB1cmw6IHRydWUsXG4gICAgICBjb250ZXh0OiB0cnVlXG4gICAgfVxuICB9LFxuXG4gIC8vIENyZWF0ZXMgYSBmdWxsIGZsZWRnZWQgc2V0dGluZ3Mgb2JqZWN0IGludG8gdGFyZ2V0XG4gIC8vIHdpdGggYm90aCBhamF4U2V0dGluZ3MgYW5kIHNldHRpbmdzIGZpZWxkcy5cbiAgLy8gSWYgdGFyZ2V0IGlzIG9taXR0ZWQsIHdyaXRlcyBpbnRvIGFqYXhTZXR0aW5ncy5cbiAgYWpheFNldHVwOiBmdW5jdGlvbiggdGFyZ2V0LCBzZXR0aW5ncyApIHtcbiAgICByZXR1cm4gc2V0dGluZ3MgP1xuXG4gICAgICAvLyBCdWlsZGluZyBhIHNldHRpbmdzIG9iamVjdFxuICAgICAgYWpheEV4dGVuZCggYWpheEV4dGVuZCggdGFyZ2V0LCBqUXVlcnkuYWpheFNldHRpbmdzICksIHNldHRpbmdzICkgOlxuXG4gICAgICAvLyBFeHRlbmRpbmcgYWpheFNldHRpbmdzXG4gICAgICBhamF4RXh0ZW5kKCBqUXVlcnkuYWpheFNldHRpbmdzLCB0YXJnZXQgKTtcbiAgfSxcblxuICBhamF4UHJlZmlsdGVyOiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMgKSxcbiAgYWpheFRyYW5zcG9ydDogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzICksXG5cbiAgLy8gTWFpbiBtZXRob2RcbiAgYWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcblxuICAgIC8vIElmIHVybCBpcyBhbiBvYmplY3QsIHNpbXVsYXRlIHByZS0xLjUgc2lnbmF0dXJlXG4gICAgaWYgKCB0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiICkge1xuICAgICAgb3B0aW9ucyA9IHVybDtcbiAgICAgIHVybCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBGb3JjZSBvcHRpb25zIHRvIGJlIGFuIG9iamVjdFxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgdmFyIC8vIENyb3NzLWRvbWFpbiBkZXRlY3Rpb24gdmFyc1xuICAgICAgcGFydHMsXG4gICAgICAvLyBMb29wIHZhcmlhYmxlXG4gICAgICBpLFxuICAgICAgLy8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuICAgICAgY2FjaGVVUkwsXG4gICAgICAvLyBSZXNwb25zZSBoZWFkZXJzIGFzIHN0cmluZ1xuICAgICAgcmVzcG9uc2VIZWFkZXJzU3RyaW5nLFxuICAgICAgLy8gdGltZW91dCBoYW5kbGVcbiAgICAgIHRpbWVvdXRUaW1lcixcblxuICAgICAgLy8gVG8ga25vdyBpZiBnbG9iYWwgZXZlbnRzIGFyZSB0byBiZSBkaXNwYXRjaGVkXG4gICAgICBmaXJlR2xvYmFscyxcblxuICAgICAgdHJhbnNwb3J0LFxuICAgICAgLy8gUmVzcG9uc2UgaGVhZGVyc1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgLy8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuICAgICAgcyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG4gICAgICAvLyBDYWxsYmFja3MgY29udGV4dFxuICAgICAgY2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG4gICAgICAvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uXG4gICAgICBnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiYgKCBjYWxsYmFja0NvbnRleHQubm9kZVR5cGUgfHwgY2FsbGJhY2tDb250ZXh0LmpxdWVyeSApID9cbiAgICAgICAgalF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG4gICAgICAgIGpRdWVyeS5ldmVudCxcbiAgICAgIC8vIERlZmVycmVkc1xuICAgICAgZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKSxcbiAgICAgIGNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXG4gICAgICAvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuICAgICAgc3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcbiAgICAgIC8vIEhlYWRlcnMgKHRoZXkgYXJlIHNlbnQgYWxsIGF0IG9uY2UpXG4gICAgICByZXF1ZXN0SGVhZGVycyA9IHt9LFxuICAgICAgcmVxdWVzdEhlYWRlcnNOYW1lcyA9IHt9LFxuICAgICAgLy8gVGhlIGpxWEhSIHN0YXRlXG4gICAgICBzdGF0ZSA9IDAsXG4gICAgICAvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2VcbiAgICAgIHN0ckFib3J0ID0gXCJjYW5jZWxlZFwiLFxuICAgICAgLy8gRmFrZSB4aHJcbiAgICAgIGpxWEhSID0ge1xuICAgICAgICByZWFkeVN0YXRlOiAwLFxuXG4gICAgICAgIC8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWRcbiAgICAgICAgZ2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7XG4gICAgICAgICAgdmFyIG1hdGNoO1xuICAgICAgICAgIGlmICggc3RhdGUgPT09IDIgKSB7XG4gICAgICAgICAgICBpZiAoICFyZXNwb25zZUhlYWRlcnMgKSB7XG4gICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgICB3aGlsZSAoIChtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApKSApIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlcnNbIG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBSYXcgc3RyaW5nXG4gICAgICAgIGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlID09PSAyID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBDYWNoZXMgdGhlIGhlYWRlclxuICAgICAgICBzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG4gICAgICAgICAgdmFyIGxuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGlmICggIXN0YXRlICkge1xuICAgICAgICAgICAgbmFtZSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdIHx8IG5hbWU7XG4gICAgICAgICAgICByZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG4gICAgICAgIG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuICAgICAgICAgIGlmICggIXN0YXRlICkge1xuICAgICAgICAgICAgcy5taW1lVHlwZSA9IHR5cGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG4gICAgICAgIHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG4gICAgICAgICAgdmFyIGNvZGU7XG4gICAgICAgICAgaWYgKCBtYXAgKSB7XG4gICAgICAgICAgICBpZiAoIHN0YXRlIDwgMiApIHtcbiAgICAgICAgICAgICAgZm9yICggY29kZSBpbiBtYXAgKSB7XG4gICAgICAgICAgICAgICAgLy8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFjayBpbiBhIHdheSB0aGF0IHByZXNlcnZlcyBvbGQgb25lc1xuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3NcbiAgICAgICAgICAgICAganFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAgICBhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG4gICAgICAgICAgdmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG4gICAgICAgICAgaWYgKCB0cmFuc3BvcnQgKSB7XG4gICAgICAgICAgICB0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkb25lKCAwLCBmaW5hbFRleHQgKTtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIC8vIEF0dGFjaCBkZWZlcnJlZHNcbiAgICBkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApLmNvbXBsZXRlID0gY29tcGxldGVEZWZlcnJlZC5hZGQ7XG4gICAganFYSFIuc3VjY2VzcyA9IGpxWEhSLmRvbmU7XG4gICAganFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsO1xuXG4gICAgLy8gUmVtb3ZlIGhhc2ggY2hhcmFjdGVyICgjNzUzMTogYW5kIHN0cmluZyBwcm9tb3Rpb24pXG4gICAgLy8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAoIzU4NjY6IElFNyBpc3N1ZSB3aXRoIHByb3RvY29sLWxlc3MgdXJscylcbiAgICAvLyBIYW5kbGUgZmFsc3kgdXJsIGluIHRoZSBzZXR0aW5ncyBvYmplY3QgKCMxMDA5MzogY29uc2lzdGVuY3kgd2l0aCBvbGQgc2lnbmF0dXJlKVxuICAgIC8vIFdlIGFsc28gdXNlIHRoZSB1cmwgcGFyYW1ldGVyIGlmIGF2YWlsYWJsZVxuICAgIHMudXJsID0gKCAoIHVybCB8fCBzLnVybCB8fCBhamF4TG9jYXRpb24gKSArIFwiXCIgKS5yZXBsYWNlKCByaGFzaCwgXCJcIiApLnJlcGxhY2UoIHJwcm90b2NvbCwgYWpheExvY1BhcnRzWyAxIF0gKyBcIi8vXCIgKTtcblxuICAgIC8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNFxuICAgIHMudHlwZSA9IG9wdGlvbnMubWV0aG9kIHx8IG9wdGlvbnMudHlwZSB8fCBzLm1ldGhvZCB8fCBzLnR5cGU7XG5cbiAgICAvLyBFeHRyYWN0IGRhdGFUeXBlcyBsaXN0XG4gICAgcy5kYXRhVHlwZXMgPSBqUXVlcnkudHJpbSggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXG4gICAgLy8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHdlIGhhdmUgYSBwcm90b2NvbDpob3N0OnBvcnQgbWlzbWF0Y2hcbiAgICBpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHtcbiAgICAgIHBhcnRzID0gcnVybC5leGVjKCBzLnVybC50b0xvd2VyQ2FzZSgpICk7XG4gICAgICBzLmNyb3NzRG9tYWluID0gISEoIHBhcnRzICYmXG4gICAgICAgICggcGFydHNbIDEgXSAhPT0gYWpheExvY1BhcnRzWyAxIF0gfHwgcGFydHNbIDIgXSAhPT0gYWpheExvY1BhcnRzWyAyIF0gfHxcbiAgICAgICAgICAoIHBhcnRzWyAzIF0gfHwgKCBwYXJ0c1sgMSBdID09PSBcImh0dHA6XCIgPyBcIjgwXCIgOiBcIjQ0M1wiICkgKSAhPT1cbiAgICAgICAgICAgICggYWpheExvY1BhcnRzWyAzIF0gfHwgKCBhamF4TG9jUGFydHNbIDEgXSA9PT0gXCJodHRwOlwiID8gXCI4MFwiIDogXCI0NDNcIiApICkgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcbiAgICBpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG4gICAgICBzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IHByZWZpbHRlcnNcbiAgICBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblxuICAgIC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlXG4gICAgaWYgKCBzdGF0ZSA9PT0gMiApIHtcbiAgICAgIHJldHVybiBqcVhIUjtcbiAgICB9XG5cbiAgICAvLyBXZSBjYW4gZmlyZSBnbG9iYWwgZXZlbnRzIGFzIG9mIG5vdyBpZiBhc2tlZCB0b1xuICAgIGZpcmVHbG9iYWxzID0gcy5nbG9iYWw7XG5cbiAgICAvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzXG4gICAgaWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7XG4gICAgICBqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKTtcbiAgICB9XG5cbiAgICAvLyBVcHBlcmNhc2UgdGhlIHR5cGVcbiAgICBzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuICAgIC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG4gICAgcy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cbiAgICAvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2VcbiAgICAvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cbiAgICBjYWNoZVVSTCA9IHMudXJsO1xuXG4gICAgLy8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcbiAgICBpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cbiAgICAgIC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlLCBhcHBlbmQgZGF0YSB0byB1cmxcbiAgICAgIGlmICggcy5kYXRhICkge1xuICAgICAgICBjYWNoZVVSTCA9ICggcy51cmwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YSApO1xuICAgICAgICAvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG4gICAgICAgIGRlbGV0ZSBzLmRhdGE7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBhbnRpLWNhY2hlIGluIHVybCBpZiBuZWVkZWRcbiAgICAgIGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG4gICAgICAgIHMudXJsID0gcnRzLnRlc3QoIGNhY2hlVVJMICkgP1xuXG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYWxyZWFkeSBhICdfJyBwYXJhbWV0ZXIsIHNldCBpdHMgdmFsdWVcbiAgICAgICAgICBjYWNoZVVSTC5yZXBsYWNlKCBydHMsIFwiJDFfPVwiICsgbm9uY2UrKyApIDpcblxuICAgICAgICAgIC8vIE90aGVyd2lzZSBhZGQgb25lIHRvIHRoZSBlbmRcbiAgICAgICAgICBjYWNoZVVSTCArICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyBub25jZSsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG4gICAgaWYgKCBzLmlmTW9kaWZpZWQgKSB7XG4gICAgICBpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG4gICAgICAgIGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuICAgICAgfVxuICAgICAgaWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcbiAgICAgICAganFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG4gICAgaWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG4gICAgICBqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuICAgIGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG4gICAgICBcIkFjY2VwdFwiLFxuICAgICAgcy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gP1xuICAgICAgICBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gKyAoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuICAgICAgICBzLmFjY2VwdHNbIFwiKlwiIF1cbiAgICApO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG4gICAgZm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG4gICAgICBqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuICAgIH1cblxuICAgIC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcbiAgICBpZiAoIHMuYmVmb3JlU2VuZCAmJiAoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IHN0YXRlID09PSAyICkgKSB7XG4gICAgICAvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm5cbiAgICAgIHJldHVybiBqcVhIUi5hYm9ydCgpO1xuICAgIH1cblxuICAgIC8vIGFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuICAgIHN0ckFib3J0ID0gXCJhYm9ydFwiO1xuXG4gICAgLy8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzXG4gICAgZm9yICggaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9ICkge1xuICAgICAganFYSFJbIGkgXSggc1sgaSBdICk7XG4gICAgfVxuXG4gICAgLy8gR2V0IHRyYW5zcG9ydFxuICAgIHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG4gICAgLy8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG4gICAgaWYgKCAhdHJhbnNwb3J0ICkge1xuICAgICAgZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcbiAgICB9IGVsc2Uge1xuICAgICAganFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cbiAgICAgIC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG4gICAgICBpZiAoIGZpcmVHbG9iYWxzICkge1xuICAgICAgICBnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcbiAgICAgIH1cbiAgICAgIC8vIFRpbWVvdXRcbiAgICAgIGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuICAgICAgICB0aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGpxWEhSLmFib3J0KFwidGltZW91dFwiKTtcbiAgICAgICAgfSwgcy50aW1lb3V0ICk7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHN0YXRlID0gMTtcbiAgICAgICAgdHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG4gICAgICB9IGNhdGNoICggZSApIHtcbiAgICAgICAgLy8gUHJvcGFnYXRlIGV4Y2VwdGlvbiBhcyBlcnJvciBpZiBub3QgZG9uZVxuICAgICAgICBpZiAoIHN0YXRlIDwgMiApIHtcbiAgICAgICAgICBkb25lKCAtMSwgZSApO1xuICAgICAgICAvLyBTaW1wbHkgcmV0aHJvdyBvdGhlcndpc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lXG4gICAgZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7XG4gICAgICB2YXIgaXNTdWNjZXNzLCBzdWNjZXNzLCBlcnJvciwgcmVzcG9uc2UsIG1vZGlmaWVkLFxuICAgICAgICBzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDtcblxuICAgICAgLy8gQ2FsbGVkIG9uY2VcbiAgICAgIGlmICggc3RhdGUgPT09IDIgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gU3RhdGUgaXMgXCJkb25lXCIgbm93XG4gICAgICBzdGF0ZSA9IDI7XG5cbiAgICAgIC8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzXG4gICAgICBpZiAoIHRpbWVvdXRUaW1lciApIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVyZWZlcmVuY2UgdHJhbnNwb3J0IGZvciBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb25cbiAgICAgIC8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpXG4gICAgICB0cmFuc3BvcnQgPSB1bmRlZmluZWQ7XG5cbiAgICAgIC8vIENhY2hlIHJlc3BvbnNlIGhlYWRlcnNcbiAgICAgIHJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgXCJcIjtcblxuICAgICAgLy8gU2V0IHJlYWR5U3RhdGVcbiAgICAgIGpxWEhSLnJlYWR5U3RhdGUgPSBzdGF0dXMgPiAwID8gNCA6IDA7XG5cbiAgICAgIC8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsXG4gICAgICBpc1N1Y2Nlc3MgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCB8fCBzdGF0dXMgPT09IDMwNDtcblxuICAgICAgLy8gR2V0IHJlc3BvbnNlIGRhdGFcbiAgICAgIGlmICggcmVzcG9uc2VzICkge1xuICAgICAgICByZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29udmVydCBubyBtYXR0ZXIgd2hhdCAodGhhdCB3YXkgcmVzcG9uc2VYWFggZmllbGRzIGFyZSBhbHdheXMgc2V0KVxuICAgICAgcmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTtcblxuICAgICAgLy8gSWYgc3VjY2Vzc2Z1bCwgaGFuZGxlIHR5cGUgY2hhaW5pbmdcbiAgICAgIGlmICggaXNTdWNjZXNzICkge1xuXG4gICAgICAgIC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG4gICAgICAgIGlmICggcy5pZk1vZGlmaWVkICkge1xuICAgICAgICAgIG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpO1xuICAgICAgICAgIGlmICggbW9kaWZpZWQgKSB7XG4gICAgICAgICAgICBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpO1xuICAgICAgICAgIGlmICggbW9kaWZpZWQgKSB7XG4gICAgICAgICAgICBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIG5vIGNvbnRlbnRcbiAgICAgICAgaWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09IFwiSEVBRFwiICkge1xuICAgICAgICAgIHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG4gICAgICAgIC8vIGlmIG5vdCBtb2RpZmllZFxuICAgICAgICB9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcbiAgICAgICAgICBzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG4gICAgICAgIC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcbiAgICAgICAgICBzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICBlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuICAgICAgICAgIGlzU3VjY2VzcyA9ICFlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2UgZXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHRcbiAgICAgICAgLy8gdGhlbiBub3JtYWxpemUgc3RhdHVzVGV4dCBhbmQgc3RhdHVzIGZvciBub24tYWJvcnRzXG4gICAgICAgIGVycm9yID0gc3RhdHVzVGV4dDtcbiAgICAgICAgaWYgKCBzdGF0dXMgfHwgIXN0YXR1c1RleHQgKSB7XG4gICAgICAgICAgc3RhdHVzVGV4dCA9IFwiZXJyb3JcIjtcbiAgICAgICAgICBpZiAoIHN0YXR1cyA8IDAgKSB7XG4gICAgICAgICAgICBzdGF0dXMgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTZXQgZGF0YSBmb3IgdGhlIGZha2UgeGhyIG9iamVjdFxuICAgICAganFYSFIuc3RhdHVzID0gc3RhdHVzO1xuICAgICAganFYSFIuc3RhdHVzVGV4dCA9ICggbmF0aXZlU3RhdHVzVGV4dCB8fCBzdGF0dXNUZXh0ICkgKyBcIlwiO1xuXG4gICAgICAvLyBTdWNjZXNzL0Vycm9yXG4gICAgICBpZiAoIGlzU3VjY2VzcyApIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBzdWNjZXNzLCBzdGF0dXNUZXh0LCBqcVhIUiBdICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3RXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQsIGVycm9yIF0gKTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3NcbiAgICAgIGpxWEhSLnN0YXR1c0NvZGUoIHN0YXR1c0NvZGUgKTtcbiAgICAgIHN0YXR1c0NvZGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgIGlmICggZmlyZUdsb2JhbHMgKSB7XG4gICAgICAgIGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBpc1N1Y2Nlc3MgPyBcImFqYXhTdWNjZXNzXCIgOiBcImFqYXhFcnJvclwiLFxuICAgICAgICAgIFsganFYSFIsIHMsIGlzU3VjY2VzcyA/IHN1Y2Nlc3MgOiBlcnJvciBdICk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbXBsZXRlXG4gICAgICBjb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQgXSApO1xuXG4gICAgICBpZiAoIGZpcmVHbG9iYWxzICkge1xuICAgICAgICBnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4Q29tcGxldGVcIiwgWyBqcVhIUiwgcyBdICk7XG4gICAgICAgIC8vIEhhbmRsZSB0aGUgZ2xvYmFsIEFKQVggY291bnRlclxuICAgICAgICBpZiAoICEoIC0talF1ZXJ5LmFjdGl2ZSApICkge1xuICAgICAgICAgIGpRdWVyeS5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ganFYSFI7XG4gIH0sXG5cbiAgZ2V0SlNPTjogZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7XG4gICAgcmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgZGF0YSwgY2FsbGJhY2ssIFwianNvblwiICk7XG4gIH0sXG5cbiAgZ2V0U2NyaXB0OiBmdW5jdGlvbiggdXJsLCBjYWxsYmFjayApIHtcbiAgICByZXR1cm4galF1ZXJ5LmdldCggdXJsLCB1bmRlZmluZWQsIGNhbGxiYWNrLCBcInNjcmlwdFwiICk7XG4gIH1cbn0pO1xuXG5qUXVlcnkuZWFjaCggWyBcImdldFwiLCBcInBvc3RcIiBdLCBmdW5jdGlvbiggaSwgbWV0aG9kICkge1xuICBqUXVlcnlbIG1ldGhvZCBdID0gZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2ssIHR5cGUgKSB7XG4gICAgLy8gc2hpZnQgYXJndW1lbnRzIGlmIGRhdGEgYXJndW1lbnQgd2FzIG9taXR0ZWRcbiAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBkYXRhICkgKSB7XG4gICAgICB0eXBlID0gdHlwZSB8fCBjYWxsYmFjaztcbiAgICAgIGNhbGxiYWNrID0gZGF0YTtcbiAgICAgIGRhdGEgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGpRdWVyeS5hamF4KHtcbiAgICAgIHVybDogdXJsLFxuICAgICAgdHlwZTogbWV0aG9kLFxuICAgICAgZGF0YVR5cGU6IHR5cGUsXG4gICAgICBkYXRhOiBkYXRhLFxuICAgICAgc3VjY2VzczogY2FsbGJhY2tcbiAgICB9KTtcbiAgfTtcbn0pO1xuXG4vLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50c1xualF1ZXJ5LmVhY2goIFsgXCJhamF4U3RhcnRcIiwgXCJhamF4U3RvcFwiLCBcImFqYXhDb21wbGV0ZVwiLCBcImFqYXhFcnJvclwiLCBcImFqYXhTdWNjZXNzXCIsIFwiYWpheFNlbmRcIiBdLCBmdW5jdGlvbiggaSwgdHlwZSApIHtcbiAgalF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7XG4gICAgcmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG4gIH07XG59KTtcblxuXG5qUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsICkge1xuICByZXR1cm4galF1ZXJ5LmFqYXgoe1xuICAgIHVybDogdXJsLFxuICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgZGF0YVR5cGU6IFwic2NyaXB0XCIsXG4gICAgYXN5bmM6IGZhbHNlLFxuICAgIGdsb2JhbDogZmFsc2UsXG4gICAgXCJ0aHJvd3NcIjogdHJ1ZVxuICB9KTtcbn07XG5cblxualF1ZXJ5LmZuLmV4dGVuZCh7XG4gIHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuICAgIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBqUXVlcnkodGhpcykud3JhcEFsbCggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIHRoaXNbMF0gKSB7XG4gICAgICAvLyBUaGUgZWxlbWVudHMgdG8gd3JhcCB0aGUgdGFyZ2V0IGFyb3VuZFxuICAgICAgdmFyIHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbMF0ub3duZXJEb2N1bWVudCApLmVxKDApLmNsb25lKHRydWUpO1xuXG4gICAgICBpZiAoIHRoaXNbMF0ucGFyZW50Tm9kZSApIHtcbiAgICAgICAgd3JhcC5pbnNlcnRCZWZvcmUoIHRoaXNbMF0gKTtcbiAgICAgIH1cblxuICAgICAgd3JhcC5tYXAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBlbGVtID0gdGhpcztcblxuICAgICAgICB3aGlsZSAoIGVsZW0uZmlyc3RDaGlsZCAmJiBlbGVtLmZpcnN0Q2hpbGQubm9kZVR5cGUgPT09IDEgKSB7XG4gICAgICAgICAgZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgfSkuYXBwZW5kKCB0aGlzICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgd3JhcElubmVyOiBmdW5jdGlvbiggaHRtbCApIHtcbiAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgalF1ZXJ5KHRoaXMpLndyYXBJbm5lciggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcbiAgICAgICAgY29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cbiAgICAgIGlmICggY29udGVudHMubGVuZ3RoICkge1xuICAgICAgICBjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuYXBwZW5kKCBodG1sICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgd3JhcDogZnVuY3Rpb24oIGh0bWwgKSB7XG4gICAgdmFyIGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApO1xuXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBqUXVlcnkoIHRoaXMgKS53cmFwQWxsKCBpc0Z1bmN0aW9uID8gaHRtbC5jYWxsKHRoaXMsIGkpIDogaHRtbCApO1xuICAgIH0pO1xuICB9LFxuXG4gIHVud3JhcDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGlmICggIWpRdWVyeS5ub2RlTmFtZSggdGhpcywgXCJib2R5XCIgKSApIHtcbiAgICAgICAgalF1ZXJ5KCB0aGlzICkucmVwbGFjZVdpdGgoIHRoaXMuY2hpbGROb2RlcyApO1xuICAgICAgfVxuICAgIH0pLmVuZCgpO1xuICB9XG59KTtcblxuXG5qUXVlcnkuZXhwci5maWx0ZXJzLmhpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICAvLyBTdXBwb3J0OiBPcGVyYSA8PSAxMi4xMlxuICAvLyBPcGVyYSByZXBvcnRzIG9mZnNldFdpZHRocyBhbmQgb2Zmc2V0SGVpZ2h0cyBsZXNzIHRoYW4gemVybyBvbiBzb21lIGVsZW1lbnRzXG4gIHJldHVybiBlbGVtLm9mZnNldFdpZHRoIDw9IDAgJiYgZWxlbS5vZmZzZXRIZWlnaHQgPD0gMCB8fFxuICAgICghc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMoKSAmJlxuICAgICAgKChlbGVtLnN0eWxlICYmIGVsZW0uc3R5bGUuZGlzcGxheSkgfHwgalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSkgPT09IFwibm9uZVwiKTtcbn07XG5cbmpRdWVyeS5leHByLmZpbHRlcnMudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICByZXR1cm4gIWpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuKCBlbGVtICk7XG59O1xuXG5cblxuXG52YXIgcjIwID0gLyUyMC9nLFxuICByYnJhY2tldCA9IC9cXFtcXF0kLyxcbiAgckNSTEYgPSAvXFxyP1xcbi9nLFxuICByc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG4gIHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuICB2YXIgbmFtZTtcblxuICBpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHtcbiAgICAvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cbiAgICBqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHtcbiAgICAgIGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG4gICAgICAgIC8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci5cbiAgICAgICAgYWRkKCBwcmVmaXgsIHYgKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG4gICAgICAgIGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgPyBpIDogXCJcIiApICsgXCJdXCIsIHYsIHRyYWRpdGlvbmFsLCBhZGQgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgalF1ZXJ5LnR5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuICAgIC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cbiAgICBmb3IgKCBuYW1lIGluIG9iaiApIHtcbiAgICAgIGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcbiAgICB9XG5cbiAgfSBlbHNlIHtcbiAgICAvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uXG4gICAgYWRkKCBwcmVmaXgsIG9iaiApO1xuICB9XG59XG5cbi8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mXG4vLyBrZXkvdmFsdWVzIGludG8gYSBxdWVyeSBzdHJpbmdcbmpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHtcbiAgdmFyIHByZWZpeCxcbiAgICBzID0gW10sXG4gICAgYWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG4gICAgICAvLyBJZiB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBpbnZva2UgaXQgYW5kIHJldHVybiBpdHMgdmFsdWVcbiAgICAgIHZhbHVlID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgPyB2YWx1ZSgpIDogKCB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICk7XG4gICAgICBzWyBzLmxlbmd0aCBdID0gZW5jb2RlVVJJQ29tcG9uZW50KCBrZXkgKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSApO1xuICAgIH07XG5cbiAgLy8gU2V0IHRyYWRpdGlvbmFsIHRvIHRydWUgZm9yIGpRdWVyeSA8PSAxLjMuMiBiZWhhdmlvci5cbiAgaWYgKCB0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICkge1xuICAgIHRyYWRpdGlvbmFsID0galF1ZXJ5LmFqYXhTZXR0aW5ncyAmJiBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO1xuICB9XG5cbiAgLy8gSWYgYW4gYXJyYXkgd2FzIHBhc3NlZCBpbiwgYXNzdW1lIHRoYXQgaXQgaXMgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cy5cbiAgaWYgKCBqUXVlcnkuaXNBcnJheSggYSApIHx8ICggYS5qcXVlcnkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBhICkgKSApIHtcbiAgICAvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHNcbiAgICBqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG4gICAgICBhZGQoIHRoaXMubmFtZSwgdGhpcy52YWx1ZSApO1xuICAgIH0pO1xuXG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcbiAgICAvLyBkaWQgaXQpLCBvdGhlcndpc2UgZW5jb2RlIHBhcmFtcyByZWN1cnNpdmVseS5cbiAgICBmb3IgKCBwcmVmaXggaW4gYSApIHtcbiAgICAgIGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvblxuICByZXR1cm4gcy5qb2luKCBcIiZcIiApLnJlcGxhY2UoIHIyMCwgXCIrXCIgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuICBzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBqUXVlcnkucGFyYW0oIHRoaXMuc2VyaWFsaXplQXJyYXkoKSApO1xuICB9LFxuICBzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuICAgICAgLy8gQ2FuIGFkZCBwcm9wSG9vayBmb3IgXCJlbGVtZW50c1wiIHRvIGZpbHRlciBvciBhZGQgZm9ybSBlbGVtZW50c1xuICAgICAgdmFyIGVsZW1lbnRzID0galF1ZXJ5LnByb3AoIHRoaXMsIFwiZWxlbWVudHNcIiApO1xuICAgICAgcmV0dXJuIGVsZW1lbnRzID8galF1ZXJ5Lm1ha2VBcnJheSggZWxlbWVudHMgKSA6IHRoaXM7XG4gICAgfSlcbiAgICAuZmlsdGVyKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGU7XG4gICAgICAvLyBVc2UgLmlzKFwiOmRpc2FibGVkXCIpIHNvIHRoYXQgZmllbGRzZXRbZGlzYWJsZWRdIHdvcmtzXG4gICAgICByZXR1cm4gdGhpcy5uYW1lICYmICFqUXVlcnkoIHRoaXMgKS5pcyggXCI6ZGlzYWJsZWRcIiApICYmXG4gICAgICAgIHJzdWJtaXR0YWJsZS50ZXN0KCB0aGlzLm5vZGVOYW1lICkgJiYgIXJzdWJtaXR0ZXJUeXBlcy50ZXN0KCB0eXBlICkgJiZcbiAgICAgICAgKCB0aGlzLmNoZWNrZWQgfHwgIXJjaGVja2FibGVUeXBlLnRlc3QoIHR5cGUgKSApO1xuICAgIH0pXG4gICAgLm1hcChmdW5jdGlvbiggaSwgZWxlbSApIHtcbiAgICAgIHZhciB2YWwgPSBqUXVlcnkoIHRoaXMgKS52YWwoKTtcblxuICAgICAgcmV0dXJuIHZhbCA9PSBudWxsID9cbiAgICAgICAgbnVsbCA6XG4gICAgICAgIGpRdWVyeS5pc0FycmF5KCB2YWwgKSA/XG4gICAgICAgICAgalF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkge1xuICAgICAgICAgICAgcmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcbiAgICAgICAgICB9KSA6XG4gICAgICAgICAgeyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsIFwiXFxyXFxuXCIgKSB9O1xuICAgIH0pLmdldCgpO1xuICB9XG59KTtcblxuXG4vLyBDcmVhdGUgdGhlIHJlcXVlc3Qgb2JqZWN0XG4vLyAoVGhpcyBpcyBzdGlsbCBhdHRhY2hlZCB0byBhamF4U2V0dGluZ3MgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG5qUXVlcnkuYWpheFNldHRpbmdzLnhociA9IHdpbmRvdy5BY3RpdmVYT2JqZWN0ICE9PSB1bmRlZmluZWQgP1xuICAvLyBTdXBwb3J0OiBJRTYrXG4gIGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gWEhSIGNhbm5vdCBhY2Nlc3MgbG9jYWwgZmlsZXMsIGFsd2F5cyB1c2UgQWN0aXZlWCBmb3IgdGhhdCBjYXNlXG4gICAgcmV0dXJuICF0aGlzLmlzTG9jYWwgJiZcblxuICAgICAgLy8gU3VwcG9ydDogSUU3LThcbiAgICAgIC8vIG9sZElFIFhIUiBkb2VzIG5vdCBzdXBwb3J0IG5vbi1SRkMyNjE2IG1ldGhvZHMgKCMxMzI0MClcbiAgICAgIC8vIFNlZSBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvbXM1MzY2NDgodj12cy44NSkuYXNweFxuICAgICAgLy8gYW5kIGh0dHA6Ly93d3cudzMub3JnL1Byb3RvY29scy9yZmMyNjE2L3JmYzI2MTYtc2VjOS5odG1sI3NlYzlcbiAgICAgIC8vIEFsdGhvdWdoIHRoaXMgY2hlY2sgZm9yIHNpeCBtZXRob2RzIGluc3RlYWQgb2YgZWlnaHRcbiAgICAgIC8vIHNpbmNlIElFIGFsc28gZG9lcyBub3Qgc3VwcG9ydCBcInRyYWNlXCIgYW5kIFwiY29ubmVjdFwiXG4gICAgICAvXihnZXR8cG9zdHxoZWFkfHB1dHxkZWxldGV8b3B0aW9ucykkL2kudGVzdCggdGhpcy50eXBlICkgJiZcblxuICAgICAgY3JlYXRlU3RhbmRhcmRYSFIoKSB8fCBjcmVhdGVBY3RpdmVYSFIoKTtcbiAgfSA6XG4gIC8vIEZvciBhbGwgb3RoZXIgYnJvd3NlcnMsIHVzZSB0aGUgc3RhbmRhcmQgWE1MSHR0cFJlcXVlc3Qgb2JqZWN0XG4gIGNyZWF0ZVN0YW5kYXJkWEhSO1xuXG52YXIgeGhySWQgPSAwLFxuICB4aHJDYWxsYmFja3MgPSB7fSxcbiAgeGhyU3VwcG9ydGVkID0galF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIoKTtcblxuLy8gU3VwcG9ydDogSUU8MTBcbi8vIE9wZW4gcmVxdWVzdHMgbXVzdCBiZSBtYW51YWxseSBhYm9ydGVkIG9uIHVubG9hZCAoIzUyODApXG5pZiAoIHdpbmRvdy5BY3RpdmVYT2JqZWN0ICkge1xuICBqUXVlcnkoIHdpbmRvdyApLm9uKCBcInVubG9hZFwiLCBmdW5jdGlvbigpIHtcbiAgICBmb3IgKCB2YXIga2V5IGluIHhockNhbGxiYWNrcyApIHtcbiAgICAgIHhockNhbGxiYWNrc1sga2V5IF0oIHVuZGVmaW5lZCwgdHJ1ZSApO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIERldGVybWluZSBzdXBwb3J0IHByb3BlcnRpZXNcbnN1cHBvcnQuY29ycyA9ICEheGhyU3VwcG9ydGVkICYmICggXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiB4aHJTdXBwb3J0ZWQgKTtcbnhoclN1cHBvcnRlZCA9IHN1cHBvcnQuYWpheCA9ICEheGhyU3VwcG9ydGVkO1xuXG4vLyBDcmVhdGUgdHJhbnNwb3J0IGlmIHRoZSBicm93c2VyIGNhbiBwcm92aWRlIGFuIHhoclxuaWYgKCB4aHJTdXBwb3J0ZWQgKSB7XG5cbiAgalF1ZXJ5LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgLy8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuICAgIGlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gfHwgc3VwcG9ydC5jb3JzICkge1xuXG4gICAgICB2YXIgY2FsbGJhY2s7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHtcbiAgICAgICAgICB2YXIgaSxcbiAgICAgICAgICAgIHhociA9IG9wdGlvbnMueGhyKCksXG4gICAgICAgICAgICBpZCA9ICsreGhySWQ7XG5cbiAgICAgICAgICAvLyBPcGVuIHRoZSBzb2NrZXRcbiAgICAgICAgICB4aHIub3Blbiggb3B0aW9ucy50eXBlLCBvcHRpb25zLnVybCwgb3B0aW9ucy5hc3luYywgb3B0aW9ucy51c2VybmFtZSwgb3B0aW9ucy5wYXNzd29yZCApO1xuXG4gICAgICAgICAgLy8gQXBwbHkgY3VzdG9tIGZpZWxkcyBpZiBwcm92aWRlZFxuICAgICAgICAgIGlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7XG4gICAgICAgICAgICBmb3IgKCBpIGluIG9wdGlvbnMueGhyRmllbGRzICkge1xuICAgICAgICAgICAgICB4aHJbIGkgXSA9IG9wdGlvbnMueGhyRmllbGRzWyBpIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gT3ZlcnJpZGUgbWltZSB0eXBlIGlmIG5lZWRlZFxuICAgICAgICAgIGlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHtcbiAgICAgICAgICAgIHhoci5vdmVycmlkZU1pbWVUeXBlKCBvcHRpb25zLm1pbWVUeXBlICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcbiAgICAgICAgICAvLyBGb3IgY3Jvc3MtZG9tYWluIHJlcXVlc3RzLCBzZWVpbmcgYXMgY29uZGl0aW9ucyBmb3IgYSBwcmVmbGlnaHQgYXJlXG4gICAgICAgICAgLy8gYWtpbiB0byBhIGppZ3NhdyBwdXp6bGUsIHdlIHNpbXBseSBuZXZlciBzZXQgaXQgdG8gYmUgc3VyZS5cbiAgICAgICAgICAvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcbiAgICAgICAgICAvLyBGb3Igc2FtZS1kb21haW4gcmVxdWVzdHMsIHdvbid0IGNoYW5nZSBoZWFkZXIgaWYgYWxyZWFkeSBwcm92aWRlZC5cbiAgICAgICAgICBpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluICYmICFoZWFkZXJzW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXSApIHtcbiAgICAgICAgICAgIGhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNldCBoZWFkZXJzXG4gICAgICAgICAgZm9yICggaSBpbiBoZWFkZXJzICkge1xuICAgICAgICAgICAgLy8gU3VwcG9ydDogSUU8OVxuICAgICAgICAgICAgLy8gSUUncyBBY3RpdmVYT2JqZWN0IHRocm93cyBhICdUeXBlIE1pc21hdGNoJyBleGNlcHRpb24gd2hlbiBzZXR0aW5nXG4gICAgICAgICAgICAvLyByZXF1ZXN0IGhlYWRlciB0byBhIG51bGwtdmFsdWUuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVG8ga2VlcCBjb25zaXN0ZW50IHdpdGggb3RoZXIgWEhSIGltcGxlbWVudGF0aW9ucywgY2FzdCB0aGUgdmFsdWVcbiAgICAgICAgICAgIC8vIHRvIHN0cmluZyBhbmQgaWdub3JlIGB1bmRlZmluZWRgLlxuICAgICAgICAgICAgaWYgKCBoZWFkZXJzWyBpIF0gIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoIGksIGhlYWRlcnNbIGkgXSArIFwiXCIgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBEbyBzZW5kIHRoZSByZXF1ZXN0XG4gICAgICAgICAgLy8gVGhpcyBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uIHdoaWNoIGlzIGFjdHVhbGx5XG4gICAgICAgICAgLy8gaGFuZGxlZCBpbiBqUXVlcnkuYWpheCAoc28gbm8gdHJ5L2NhdGNoIGhlcmUpXG4gICAgICAgICAgeGhyLnNlbmQoICggb3B0aW9ucy5oYXNDb250ZW50ICYmIG9wdGlvbnMuZGF0YSApIHx8IG51bGwgKTtcblxuICAgICAgICAgIC8vIExpc3RlbmVyXG4gICAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiggXywgaXNBYm9ydCApIHtcbiAgICAgICAgICAgIHZhciBzdGF0dXMsIHN0YXR1c1RleHQsIHJlc3BvbnNlcztcblxuICAgICAgICAgICAgLy8gV2FzIG5ldmVyIGNhbGxlZCBhbmQgaXMgYWJvcnRlZCBvciBjb21wbGV0ZVxuICAgICAgICAgICAgaWYgKCBjYWxsYmFjayAmJiAoIGlzQWJvcnQgfHwgeGhyLnJlYWR5U3RhdGUgPT09IDQgKSApIHtcbiAgICAgICAgICAgICAgLy8gQ2xlYW4gdXBcbiAgICAgICAgICAgICAgZGVsZXRlIHhockNhbGxiYWNrc1sgaWQgXTtcbiAgICAgICAgICAgICAgY2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBqUXVlcnkubm9vcDtcblxuICAgICAgICAgICAgICAvLyBBYm9ydCBtYW51YWxseSBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgaWYgKCBpc0Fib3J0ICkge1xuICAgICAgICAgICAgICAgIGlmICggeGhyLnJlYWR5U3RhdGUgIT09IDQgKSB7XG4gICAgICAgICAgICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VzID0ge307XG4gICAgICAgICAgICAgICAgc3RhdHVzID0geGhyLnN0YXR1cztcblxuICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFPDEwXG4gICAgICAgICAgICAgICAgLy8gQWNjZXNzaW5nIGJpbmFyeS1kYXRhIHJlc3BvbnNlVGV4dCB0aHJvd3MgYW4gZXhjZXB0aW9uXG4gICAgICAgICAgICAgICAgLy8gKCMxMTQyNilcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ID09PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgICAgcmVzcG9uc2VzLnRleHQgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggdGhyb3dzIGFuIGV4Y2VwdGlvbiB3aGVuIGFjY2Vzc2luZ1xuICAgICAgICAgICAgICAgIC8vIHN0YXR1c1RleHQgZm9yIGZhdWx0eSBjcm9zcy1kb21haW4gcmVxdWVzdHNcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dCA9IHhoci5zdGF0dXNUZXh0O1xuICAgICAgICAgICAgICAgIH0gY2F0Y2goIGUgKSB7XG4gICAgICAgICAgICAgICAgICAvLyBXZSBub3JtYWxpemUgd2l0aCBXZWJraXQgZ2l2aW5nIGFuIGVtcHR5IHN0YXR1c1RleHRcbiAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEZpbHRlciBzdGF0dXMgZm9yIG5vbiBzdGFuZGFyZCBiZWhhdmlvcnNcblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGxvY2FsIGFuZCB3ZSBoYXZlIGRhdGE6IGFzc3VtZSBhIHN1Y2Nlc3NcbiAgICAgICAgICAgICAgICAvLyAoc3VjY2VzcyB3aXRoIG5vIGRhdGEgd29uJ3QgZ2V0IG5vdGlmaWVkLCB0aGF0J3MgdGhlIGJlc3Qgd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4gZG8gZ2l2ZW4gY3VycmVudCBpbXBsZW1lbnRhdGlvbnMpXG4gICAgICAgICAgICAgICAgaWYgKCAhc3RhdHVzICYmIG9wdGlvbnMuaXNMb2NhbCAmJiAhb3B0aW9ucy5jcm9zc0RvbWFpbiApIHtcbiAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHJlc3BvbnNlcy50ZXh0ID8gMjAwIDogNDA0O1xuICAgICAgICAgICAgICAgIC8vIElFIC0gIzE0NTA6IHNvbWV0aW1lcyByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc3RhdHVzID09PSAxMjIzICkge1xuICAgICAgICAgICAgICAgICAgc3RhdHVzID0gMjA0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDYWxsIGNvbXBsZXRlIGlmIG5lZWRlZFxuICAgICAgICAgICAgaWYgKCByZXNwb25zZXMgKSB7XG4gICAgICAgICAgICAgIGNvbXBsZXRlKCBzdGF0dXMsIHN0YXR1c1RleHQsIHJlc3BvbnNlcywgeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmICggIW9wdGlvbnMuYXN5bmMgKSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSdyZSBpbiBzeW5jIG1vZGUgd2UgZmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfSBlbHNlIGlmICggeGhyLnJlYWR5U3RhdGUgPT09IDQgKSB7XG4gICAgICAgICAgICAvLyAoSUU2ICYgSUU3KSBpZiBpdCdzIGluIGNhY2hlIGFuZCBoYXMgYmVlblxuICAgICAgICAgICAgLy8gcmV0cmlldmVkIGRpcmVjdGx5IHdlIG5lZWQgdG8gZmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgIHNldFRpbWVvdXQoIGNhbGxiYWNrICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEFkZCB0byB0aGUgbGlzdCBvZiBhY3RpdmUgeGhyIGNhbGxiYWNrc1xuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IHhockNhbGxiYWNrc1sgaWQgXSA9IGNhbGxiYWNrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhYm9ydDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCBjYWxsYmFjayApIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCB1bmRlZmluZWQsIHRydWUgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuLy8gRnVuY3Rpb25zIHRvIGNyZWF0ZSB4aHJzXG5mdW5jdGlvbiBjcmVhdGVTdGFuZGFyZFhIUigpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuICB9IGNhdGNoKCBlICkge31cbn1cblxuZnVuY3Rpb24gY3JlYXRlQWN0aXZlWEhSKCkge1xuICB0cnkge1xuICAgIHJldHVybiBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoIFwiTWljcm9zb2Z0LlhNTEhUVFBcIiApO1xuICB9IGNhdGNoKCBlICkge31cbn1cblxuXG5cblxuLy8gSW5zdGFsbCBzY3JpcHQgZGF0YVR5cGVcbmpRdWVyeS5hamF4U2V0dXAoe1xuICBhY2NlcHRzOiB7XG4gICAgc2NyaXB0OiBcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJcbiAgfSxcbiAgY29udGVudHM6IHtcbiAgICBzY3JpcHQ6IC8oPzpqYXZhfGVjbWEpc2NyaXB0L1xuICB9LFxuICBjb252ZXJ0ZXJzOiB7XG4gICAgXCJ0ZXh0IHNjcmlwdFwiOiBmdW5jdGlvbiggdGV4dCApIHtcbiAgICAgIGpRdWVyeS5nbG9iYWxFdmFsKCB0ZXh0ICk7XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBIYW5kbGUgY2FjaGUncyBzcGVjaWFsIGNhc2UgYW5kIGdsb2JhbFxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuICBpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcbiAgICBzLmNhY2hlID0gZmFsc2U7XG4gIH1cbiAgaWYgKCBzLmNyb3NzRG9tYWluICkge1xuICAgIHMudHlwZSA9IFwiR0VUXCI7XG4gICAgcy5nbG9iYWwgPSBmYWxzZTtcbiAgfVxufSk7XG5cbi8vIEJpbmQgc2NyaXB0IHRhZyBoYWNrIHRyYW5zcG9ydFxualF1ZXJ5LmFqYXhUcmFuc3BvcnQoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKHMpIHtcblxuICAvLyBUaGlzIHRyYW5zcG9ydCBvbmx5IGRlYWxzIHdpdGggY3Jvc3MgZG9tYWluIHJlcXVlc3RzXG4gIGlmICggcy5jcm9zc0RvbWFpbiApIHtcblxuICAgIHZhciBzY3JpcHQsXG4gICAgICBoZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBqUXVlcnkoXCJoZWFkXCIpWzBdIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICAgIHJldHVybiB7XG5cbiAgICAgIHNlbmQ6IGZ1bmN0aW9uKCBfLCBjYWxsYmFjayApIHtcblxuICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXG4gICAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG5cbiAgICAgICAgaWYgKCBzLnNjcmlwdENoYXJzZXQgKSB7XG4gICAgICAgICAgc2NyaXB0LmNoYXJzZXQgPSBzLnNjcmlwdENoYXJzZXQ7XG4gICAgICAgIH1cblxuICAgICAgICBzY3JpcHQuc3JjID0gcy51cmw7XG5cbiAgICAgICAgLy8gQXR0YWNoIGhhbmRsZXJzIGZvciBhbGwgYnJvd3NlcnNcbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiggXywgaXNBYm9ydCApIHtcblxuICAgICAgICAgIGlmICggaXNBYm9ydCB8fCAhc2NyaXB0LnJlYWR5U3RhdGUgfHwgL2xvYWRlZHxjb21wbGV0ZS8udGVzdCggc2NyaXB0LnJlYWR5U3RhdGUgKSApIHtcblxuICAgICAgICAgICAgLy8gSGFuZGxlIG1lbW9yeSBsZWFrIGluIElFXG4gICAgICAgICAgICBzY3JpcHQub25sb2FkID0gc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgc2NyaXB0XG4gICAgICAgICAgICBpZiAoIHNjcmlwdC5wYXJlbnROb2RlICkge1xuICAgICAgICAgICAgICBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggc2NyaXB0ICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERlcmVmZXJlbmNlIHRoZSBzY3JpcHRcbiAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG5cbiAgICAgICAgICAgIC8vIENhbGxiYWNrIGlmIG5vdCBhYm9ydFxuICAgICAgICAgICAgaWYgKCAhaXNBYm9ydCApIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soIDIwMCwgXCJzdWNjZXNzXCIgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ2lyY3VtdmVudCBJRTYgYnVncyB3aXRoIGJhc2UgZWxlbWVudHMgKCMyNzA5IGFuZCAjNDM3OCkgYnkgcHJlcGVuZGluZ1xuICAgICAgICAvLyBVc2UgbmF0aXZlIERPTSBtYW5pcHVsYXRpb24gdG8gYXZvaWQgb3VyIGRvbU1hbmlwIEFKQVggdHJpY2tlcnlcbiAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoIHNjcmlwdCwgaGVhZC5maXJzdENoaWxkICk7XG4gICAgICB9LFxuXG4gICAgICBhYm9ydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICggc2NyaXB0ICkge1xuICAgICAgICAgIHNjcmlwdC5vbmxvYWQoIHVuZGVmaW5lZCwgdHJ1ZSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxufSk7XG5cblxuXG5cbnZhciBvbGRDYWxsYmFja3MgPSBbXSxcbiAgcmpzb25wID0gLyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztcblxuLy8gRGVmYXVsdCBqc29ucCBzZXR0aW5nc1xualF1ZXJ5LmFqYXhTZXR1cCh7XG4gIGpzb25wOiBcImNhbGxiYWNrXCIsXG4gIGpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYWxsYmFjayA9IG9sZENhbGxiYWNrcy5wb3AoKSB8fCAoIGpRdWVyeS5leHBhbmRvICsgXCJfXCIgKyAoIG5vbmNlKysgKSApO1xuICAgIHRoaXNbIGNhbGxiYWNrIF0gPSB0cnVlO1xuICAgIHJldHVybiBjYWxsYmFjaztcbiAgfVxufSk7XG5cbi8vIERldGVjdCwgbm9ybWFsaXplIG9wdGlvbnMgYW5kIGluc3RhbGwgY2FsbGJhY2tzIGZvciBqc29ucCByZXF1ZXN0c1xualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwianNvbiBqc29ucFwiLCBmdW5jdGlvbiggcywgb3JpZ2luYWxTZXR0aW5ncywganFYSFIgKSB7XG5cbiAgdmFyIGNhbGxiYWNrTmFtZSwgb3ZlcndyaXR0ZW4sIHJlc3BvbnNlQ29udGFpbmVyLFxuICAgIGpzb25Qcm9wID0gcy5qc29ucCAhPT0gZmFsc2UgJiYgKCByanNvbnAudGVzdCggcy51cmwgKSA/XG4gICAgICBcInVybFwiIDpcbiAgICAgIHR5cGVvZiBzLmRhdGEgPT09IFwic3RyaW5nXCIgJiYgISggcy5jb250ZW50VHlwZSB8fCBcIlwiICkuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSAmJiByanNvbnAudGVzdCggcy5kYXRhICkgJiYgXCJkYXRhXCJcbiAgICApO1xuXG4gIC8vIEhhbmRsZSBpZmYgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZSBpcyBcImpzb25wXCIgb3Igd2UgaGF2ZSBhIHBhcmFtZXRlciB0byBzZXRcbiAgaWYgKCBqc29uUHJvcCB8fCBzLmRhdGFUeXBlc1sgMCBdID09PSBcImpzb25wXCIgKSB7XG5cbiAgICAvLyBHZXQgY2FsbGJhY2sgbmFtZSwgcmVtZW1iZXJpbmcgcHJlZXhpc3RpbmcgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGl0XG4gICAgY2FsbGJhY2tOYW1lID0gcy5qc29ucENhbGxiYWNrID0galF1ZXJ5LmlzRnVuY3Rpb24oIHMuanNvbnBDYWxsYmFjayApID9cbiAgICAgIHMuanNvbnBDYWxsYmFjaygpIDpcbiAgICAgIHMuanNvbnBDYWxsYmFjaztcblxuICAgIC8vIEluc2VydCBjYWxsYmFjayBpbnRvIHVybCBvciBmb3JtIGRhdGFcbiAgICBpZiAoIGpzb25Qcm9wICkge1xuICAgICAgc1sganNvblByb3AgXSA9IHNbIGpzb25Qcm9wIF0ucmVwbGFjZSggcmpzb25wLCBcIiQxXCIgKyBjYWxsYmFja05hbWUgKTtcbiAgICB9IGVsc2UgaWYgKCBzLmpzb25wICE9PSBmYWxzZSApIHtcbiAgICAgIHMudXJsICs9ICggcnF1ZXJ5LnRlc3QoIHMudXJsICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmpzb25wICsgXCI9XCIgKyBjYWxsYmFja05hbWU7XG4gICAgfVxuXG4gICAgLy8gVXNlIGRhdGEgY29udmVydGVyIHRvIHJldHJpZXZlIGpzb24gYWZ0ZXIgc2NyaXB0IGV4ZWN1dGlvblxuICAgIHMuY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoICFyZXNwb25zZUNvbnRhaW5lciApIHtcbiAgICAgICAgalF1ZXJ5LmVycm9yKCBjYWxsYmFja05hbWUgKyBcIiB3YXMgbm90IGNhbGxlZFwiICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzcG9uc2VDb250YWluZXJbIDAgXTtcbiAgICB9O1xuXG4gICAgLy8gZm9yY2UganNvbiBkYXRhVHlwZVxuICAgIHMuZGF0YVR5cGVzWyAwIF0gPSBcImpzb25cIjtcblxuICAgIC8vIEluc3RhbGwgY2FsbGJhY2tcbiAgICBvdmVyd3JpdHRlbiA9IHdpbmRvd1sgY2FsbGJhY2tOYW1lIF07XG4gICAgd2luZG93WyBjYWxsYmFja05hbWUgXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVzcG9uc2VDb250YWluZXIgPSBhcmd1bWVudHM7XG4gICAgfTtcblxuICAgIC8vIENsZWFuLXVwIGZ1bmN0aW9uIChmaXJlcyBhZnRlciBjb252ZXJ0ZXJzKVxuICAgIGpxWEhSLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgIC8vIFJlc3RvcmUgcHJlZXhpc3RpbmcgdmFsdWVcbiAgICAgIHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBvdmVyd3JpdHRlbjtcblxuICAgICAgLy8gU2F2ZSBiYWNrIGFzIGZyZWVcbiAgICAgIGlmICggc1sgY2FsbGJhY2tOYW1lIF0gKSB7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHJlLXVzaW5nIHRoZSBvcHRpb25zIGRvZXNuJ3Qgc2NyZXcgdGhpbmdzIGFyb3VuZFxuICAgICAgICBzLmpzb25wQ2FsbGJhY2sgPSBvcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7XG5cbiAgICAgICAgLy8gc2F2ZSB0aGUgY2FsbGJhY2sgbmFtZSBmb3IgZnV0dXJlIHVzZVxuICAgICAgICBvbGRDYWxsYmFja3MucHVzaCggY2FsbGJhY2tOYW1lICk7XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGwgaWYgaXQgd2FzIGEgZnVuY3Rpb24gYW5kIHdlIGhhdmUgYSByZXNwb25zZVxuICAgICAgaWYgKCByZXNwb25zZUNvbnRhaW5lciAmJiBqUXVlcnkuaXNGdW5jdGlvbiggb3ZlcndyaXR0ZW4gKSApIHtcbiAgICAgICAgb3ZlcndyaXR0ZW4oIHJlc3BvbnNlQ29udGFpbmVyWyAwIF0gKTtcbiAgICAgIH1cblxuICAgICAgcmVzcG9uc2VDb250YWluZXIgPSBvdmVyd3JpdHRlbiA9IHVuZGVmaW5lZDtcbiAgICB9KTtcblxuICAgIC8vIERlbGVnYXRlIHRvIHNjcmlwdFxuICAgIHJldHVybiBcInNjcmlwdFwiO1xuICB9XG59KTtcblxuXG5cblxuLy8gZGF0YTogc3RyaW5nIG9mIGh0bWxcbi8vIGNvbnRleHQgKG9wdGlvbmFsKTogSWYgc3BlY2lmaWVkLCB0aGUgZnJhZ21lbnQgd2lsbCBiZSBjcmVhdGVkIGluIHRoaXMgY29udGV4dCwgZGVmYXVsdHMgdG8gZG9jdW1lbnRcbi8vIGtlZXBTY3JpcHRzIChvcHRpb25hbCk6IElmIHRydWUsIHdpbGwgaW5jbHVkZSBzY3JpcHRzIHBhc3NlZCBpbiB0aGUgaHRtbCBzdHJpbmdcbmpRdWVyeS5wYXJzZUhUTUwgPSBmdW5jdGlvbiggZGF0YSwgY29udGV4dCwga2VlcFNjcmlwdHMgKSB7XG4gIGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJib29sZWFuXCIgKSB7XG4gICAga2VlcFNjcmlwdHMgPSBjb250ZXh0O1xuICAgIGNvbnRleHQgPSBmYWxzZTtcbiAgfVxuICBjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDtcblxuICB2YXIgcGFyc2VkID0gcnNpbmdsZVRhZy5leGVjKCBkYXRhICksXG4gICAgc2NyaXB0cyA9ICFrZWVwU2NyaXB0cyAmJiBbXTtcblxuICAvLyBTaW5nbGUgdGFnXG4gIGlmICggcGFyc2VkICkge1xuICAgIHJldHVybiBbIGNvbnRleHQuY3JlYXRlRWxlbWVudCggcGFyc2VkWzFdICkgXTtcbiAgfVxuXG4gIHBhcnNlZCA9IGpRdWVyeS5idWlsZEZyYWdtZW50KCBbIGRhdGEgXSwgY29udGV4dCwgc2NyaXB0cyApO1xuXG4gIGlmICggc2NyaXB0cyAmJiBzY3JpcHRzLmxlbmd0aCApIHtcbiAgICBqUXVlcnkoIHNjcmlwdHMgKS5yZW1vdmUoKTtcbiAgfVxuXG4gIHJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBwYXJzZWQuY2hpbGROb2RlcyApO1xufTtcblxuXG4vLyBLZWVwIGEgY29weSBvZiB0aGUgb2xkIGxvYWQgbWV0aG9kXG52YXIgX2xvYWQgPSBqUXVlcnkuZm4ubG9hZDtcblxuLyoqXG4gKiBMb2FkIGEgdXJsIGludG8gYSBwYWdlXG4gKi9cbmpRdWVyeS5mbi5sb2FkID0gZnVuY3Rpb24oIHVybCwgcGFyYW1zLCBjYWxsYmFjayApIHtcbiAgaWYgKCB0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiICYmIF9sb2FkICkge1xuICAgIHJldHVybiBfbG9hZC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG4gIH1cblxuICB2YXIgc2VsZWN0b3IsIHJlc3BvbnNlLCB0eXBlLFxuICAgIHNlbGYgPSB0aGlzLFxuICAgIG9mZiA9IHVybC5pbmRleE9mKFwiIFwiKTtcblxuICBpZiAoIG9mZiA+PSAwICkge1xuICAgIHNlbGVjdG9yID0galF1ZXJ5LnRyaW0oIHVybC5zbGljZSggb2ZmLCB1cmwubGVuZ3RoICkgKTtcbiAgICB1cmwgPSB1cmwuc2xpY2UoIDAsIG9mZiApO1xuICB9XG5cbiAgLy8gSWYgaXQncyBhIGZ1bmN0aW9uXG4gIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHBhcmFtcyApICkge1xuXG4gICAgLy8gV2UgYXNzdW1lIHRoYXQgaXQncyB0aGUgY2FsbGJhY2tcbiAgICBjYWxsYmFjayA9IHBhcmFtcztcbiAgICBwYXJhbXMgPSB1bmRlZmluZWQ7XG5cbiAgLy8gT3RoZXJ3aXNlLCBidWlsZCBhIHBhcmFtIHN0cmluZ1xuICB9IGVsc2UgaWYgKCBwYXJhbXMgJiYgdHlwZW9mIHBhcmFtcyA9PT0gXCJvYmplY3RcIiApIHtcbiAgICB0eXBlID0gXCJQT1NUXCI7XG4gIH1cblxuICAvLyBJZiB3ZSBoYXZlIGVsZW1lbnRzIHRvIG1vZGlmeSwgbWFrZSB0aGUgcmVxdWVzdFxuICBpZiAoIHNlbGYubGVuZ3RoID4gMCApIHtcbiAgICBqUXVlcnkuYWpheCh7XG4gICAgICB1cmw6IHVybCxcblxuICAgICAgLy8gaWYgXCJ0eXBlXCIgdmFyaWFibGUgaXMgdW5kZWZpbmVkLCB0aGVuIFwiR0VUXCIgbWV0aG9kIHdpbGwgYmUgdXNlZFxuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcbiAgICAgIGRhdGE6IHBhcmFtc1xuICAgIH0pLmRvbmUoZnVuY3Rpb24oIHJlc3BvbnNlVGV4dCApIHtcblxuICAgICAgLy8gU2F2ZSByZXNwb25zZSBmb3IgdXNlIGluIGNvbXBsZXRlIGNhbGxiYWNrXG4gICAgICByZXNwb25zZSA9IGFyZ3VtZW50cztcblxuICAgICAgc2VsZi5odG1sKCBzZWxlY3RvciA/XG5cbiAgICAgICAgLy8gSWYgYSBzZWxlY3RvciB3YXMgc3BlY2lmaWVkLCBsb2NhdGUgdGhlIHJpZ2h0IGVsZW1lbnRzIGluIGEgZHVtbXkgZGl2XG4gICAgICAgIC8vIEV4Y2x1ZGUgc2NyaXB0cyB0byBhdm9pZCBJRSAnUGVybWlzc2lvbiBEZW5pZWQnIGVycm9yc1xuICAgICAgICBqUXVlcnkoXCI8ZGl2PlwiKS5hcHBlbmQoIGpRdWVyeS5wYXJzZUhUTUwoIHJlc3BvbnNlVGV4dCApICkuZmluZCggc2VsZWN0b3IgKSA6XG5cbiAgICAgICAgLy8gT3RoZXJ3aXNlIHVzZSB0aGUgZnVsbCByZXN1bHRcbiAgICAgICAgcmVzcG9uc2VUZXh0ICk7XG5cbiAgICB9KS5jb21wbGV0ZSggY2FsbGJhY2sgJiYgZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG4gICAgICBzZWxmLmVhY2goIGNhbGxiYWNrLCByZXNwb25zZSB8fCBbIGpxWEhSLnJlc3BvbnNlVGV4dCwgc3RhdHVzLCBqcVhIUiBdICk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cblxuXG5cbmpRdWVyeS5leHByLmZpbHRlcnMuYW5pbWF0ZWQgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgcmV0dXJuIGpRdWVyeS5ncmVwKGpRdWVyeS50aW1lcnMsIGZ1bmN0aW9uKCBmbiApIHtcbiAgICByZXR1cm4gZWxlbSA9PT0gZm4uZWxlbTtcbiAgfSkubGVuZ3RoO1xufTtcblxuXG5cblxuXG52YXIgZG9jRWxlbSA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbi8qKlxuICogR2V0cyBhIHdpbmRvdyBmcm9tIGFuIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkge1xuICByZXR1cm4galF1ZXJ5LmlzV2luZG93KCBlbGVtICkgP1xuICAgIGVsZW0gOlxuICAgIGVsZW0ubm9kZVR5cGUgPT09IDkgP1xuICAgICAgZWxlbS5kZWZhdWx0VmlldyB8fCBlbGVtLnBhcmVudFdpbmRvdyA6XG4gICAgICBmYWxzZTtcbn1cblxualF1ZXJ5Lm9mZnNldCA9IHtcbiAgc2V0T2Zmc2V0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgaSApIHtcbiAgICB2YXIgY3VyUG9zaXRpb24sIGN1ckxlZnQsIGN1ckNTU1RvcCwgY3VyVG9wLCBjdXJPZmZzZXQsIGN1ckNTU0xlZnQsIGNhbGN1bGF0ZVBvc2l0aW9uLFxuICAgICAgcG9zaXRpb24gPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKSxcbiAgICAgIGN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSxcbiAgICAgIHByb3BzID0ge307XG5cbiAgICAvLyBzZXQgcG9zaXRpb24gZmlyc3QsIGluLWNhc2UgdG9wL2xlZnQgYXJlIHNldCBldmVuIG9uIHN0YXRpYyBlbGVtXG4gICAgaWYgKCBwb3NpdGlvbiA9PT0gXCJzdGF0aWNcIiApIHtcbiAgICAgIGVsZW0uc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG4gICAgfVxuXG4gICAgY3VyT2Zmc2V0ID0gY3VyRWxlbS5vZmZzZXQoKTtcbiAgICBjdXJDU1NUb3AgPSBqUXVlcnkuY3NzKCBlbGVtLCBcInRvcFwiICk7XG4gICAgY3VyQ1NTTGVmdCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwibGVmdFwiICk7XG4gICAgY2FsY3VsYXRlUG9zaXRpb24gPSAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApICYmXG4gICAgICBqUXVlcnkuaW5BcnJheShcImF1dG9cIiwgWyBjdXJDU1NUb3AsIGN1ckNTU0xlZnQgXSApID4gLTE7XG5cbiAgICAvLyBuZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlciB0b3Agb3IgbGVmdCBpcyBhdXRvIGFuZCBwb3NpdGlvbiBpcyBlaXRoZXIgYWJzb2x1dGUgb3IgZml4ZWRcbiAgICBpZiAoIGNhbGN1bGF0ZVBvc2l0aW9uICkge1xuICAgICAgY3VyUG9zaXRpb24gPSBjdXJFbGVtLnBvc2l0aW9uKCk7XG4gICAgICBjdXJUb3AgPSBjdXJQb3NpdGlvbi50b3A7XG4gICAgICBjdXJMZWZ0ID0gY3VyUG9zaXRpb24ubGVmdDtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VyVG9wID0gcGFyc2VGbG9hdCggY3VyQ1NTVG9wICkgfHwgMDtcbiAgICAgIGN1ckxlZnQgPSBwYXJzZUZsb2F0KCBjdXJDU1NMZWZ0ICkgfHwgMDtcbiAgICB9XG5cbiAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHRpb25zICkgKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucy5jYWxsKCBlbGVtLCBpLCBjdXJPZmZzZXQgKTtcbiAgICB9XG5cbiAgICBpZiAoIG9wdGlvbnMudG9wICE9IG51bGwgKSB7XG4gICAgICBwcm9wcy50b3AgPSAoIG9wdGlvbnMudG9wIC0gY3VyT2Zmc2V0LnRvcCApICsgY3VyVG9wO1xuICAgIH1cbiAgICBpZiAoIG9wdGlvbnMubGVmdCAhPSBudWxsICkge1xuICAgICAgcHJvcHMubGVmdCA9ICggb3B0aW9ucy5sZWZ0IC0gY3VyT2Zmc2V0LmxlZnQgKSArIGN1ckxlZnQ7XG4gICAgfVxuXG4gICAgaWYgKCBcInVzaW5nXCIgaW4gb3B0aW9ucyApIHtcbiAgICAgIG9wdGlvbnMudXNpbmcuY2FsbCggZWxlbSwgcHJvcHMgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VyRWxlbS5jc3MoIHByb3BzICk7XG4gICAgfVxuICB9XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcbiAgb2Zmc2V0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG4gICAgICByZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgdGhpcyA6XG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcbiAgICAgICAgICBqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgZG9jRWxlbSwgd2luLFxuICAgICAgYm94ID0geyB0b3A6IDAsIGxlZnQ6IDAgfSxcbiAgICAgIGVsZW0gPSB0aGlzWyAwIF0sXG4gICAgICBkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblxuICAgIGlmICggIWRvYyApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuICAgIC8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRpc2Nvbm5lY3RlZCBET00gbm9kZVxuICAgIGlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkge1xuICAgICAgcmV0dXJuIGJveDtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGdCQ1IsIGp1c3QgdXNlIDAsMCByYXRoZXIgdGhhbiBlcnJvclxuICAgIC8vIEJsYWNrQmVycnkgNSwgaU9TIDMgKG9yaWdpbmFsIGlQaG9uZSlcbiAgICBpZiAoIHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gc3RydW5kZWZpbmVkICkge1xuICAgICAgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9XG4gICAgd2luID0gZ2V0V2luZG93KCBkb2MgKTtcbiAgICByZXR1cm4ge1xuICAgICAgdG9wOiBib3gudG9wICArICggd2luLnBhZ2VZT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsVG9wICkgIC0gKCBkb2NFbGVtLmNsaWVudFRvcCAgfHwgMCApLFxuICAgICAgbGVmdDogYm94LmxlZnQgKyAoIHdpbi5wYWdlWE9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbExlZnQgKSAtICggZG9jRWxlbS5jbGllbnRMZWZ0IHx8IDAgKVxuICAgIH07XG4gIH0sXG5cbiAgcG9zaXRpb246IGZ1bmN0aW9uKCkge1xuICAgIGlmICggIXRoaXNbIDAgXSApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsXG4gICAgICBwYXJlbnRPZmZzZXQgPSB7IHRvcDogMCwgbGVmdDogMCB9LFxuICAgICAgZWxlbSA9IHRoaXNbIDAgXTtcblxuICAgIC8vIGZpeGVkIGVsZW1lbnRzIGFyZSBvZmZzZXQgZnJvbSB3aW5kb3cgKHBhcmVudE9mZnNldCA9IHt0b3A6MCwgbGVmdDogMH0sIGJlY2F1c2UgaXQgaXMgaXRzIG9ubHkgb2Zmc2V0IHBhcmVudFxuICAgIGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcbiAgICAgIC8vIHdlIGFzc3VtZSB0aGF0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyBhdmFpbGFibGUgd2hlbiBjb21wdXRlZCBwb3NpdGlvbiBpcyBmaXhlZFxuICAgICAgb2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gR2V0ICpyZWFsKiBvZmZzZXRQYXJlbnRcbiAgICAgIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50KCk7XG5cbiAgICAgIC8vIEdldCBjb3JyZWN0IG9mZnNldHNcbiAgICAgIG9mZnNldCA9IHRoaXMub2Zmc2V0KCk7XG4gICAgICBpZiAoICFqUXVlcnkubm9kZU5hbWUoIG9mZnNldFBhcmVudFsgMCBdLCBcImh0bWxcIiApICkge1xuICAgICAgICBwYXJlbnRPZmZzZXQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBvZmZzZXRQYXJlbnQgYm9yZGVyc1xuICAgICAgcGFyZW50T2Zmc2V0LnRvcCAgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sIFwiYm9yZGVyVG9wV2lkdGhcIiwgdHJ1ZSApO1xuICAgICAgcGFyZW50T2Zmc2V0LmxlZnQgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sIFwiYm9yZGVyTGVmdFdpZHRoXCIsIHRydWUgKTtcbiAgICB9XG5cbiAgICAvLyBTdWJ0cmFjdCBwYXJlbnQgb2Zmc2V0cyBhbmQgZWxlbWVudCBtYXJnaW5zXG4gICAgLy8gbm90ZTogd2hlbiBhbiBlbGVtZW50IGhhcyBtYXJnaW46IGF1dG8gdGhlIG9mZnNldExlZnQgYW5kIG1hcmdpbkxlZnRcbiAgICAvLyBhcmUgdGhlIHNhbWUgaW4gU2FmYXJpIGNhdXNpbmcgb2Zmc2V0LmxlZnQgdG8gaW5jb3JyZWN0bHkgYmUgMFxuICAgIHJldHVybiB7XG4gICAgICB0b3A6ICBvZmZzZXQudG9wICAtIHBhcmVudE9mZnNldC50b3AgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpblRvcFwiLCB0cnVlICksXG4gICAgICBsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0IC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIsIHRydWUpXG4gICAgfTtcbiAgfSxcblxuICBvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudCB8fCBkb2NFbGVtO1xuXG4gICAgICB3aGlsZSAoIG9mZnNldFBhcmVudCAmJiAoICFqUXVlcnkubm9kZU5hbWUoIG9mZnNldFBhcmVudCwgXCJodG1sXCIgKSAmJiBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnQsIFwicG9zaXRpb25cIiApID09PSBcInN0YXRpY1wiICkgKSB7XG4gICAgICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY0VsZW07XG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBDcmVhdGUgc2Nyb2xsTGVmdCBhbmQgc2Nyb2xsVG9wIG1ldGhvZHNcbmpRdWVyeS5lYWNoKCB7IHNjcm9sbExlZnQ6IFwicGFnZVhPZmZzZXRcIiwgc2Nyb2xsVG9wOiBcInBhZ2VZT2Zmc2V0XCIgfSwgZnVuY3Rpb24oIG1ldGhvZCwgcHJvcCApIHtcbiAgdmFyIHRvcCA9IC9ZLy50ZXN0KCBwcm9wICk7XG5cbiAgalF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG4gICAgcmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkge1xuICAgICAgdmFyIHdpbiA9IGdldFdpbmRvdyggZWxlbSApO1xuXG4gICAgICBpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICByZXR1cm4gd2luID8gKHByb3AgaW4gd2luKSA/IHdpblsgcHJvcCBdIDpcbiAgICAgICAgICB3aW4uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBtZXRob2QgXSA6XG4gICAgICAgICAgZWxlbVsgbWV0aG9kIF07XG4gICAgICB9XG5cbiAgICAgIGlmICggd2luICkge1xuICAgICAgICB3aW4uc2Nyb2xsVG8oXG4gICAgICAgICAgIXRvcCA/IHZhbCA6IGpRdWVyeSggd2luICkuc2Nyb2xsTGVmdCgpLFxuICAgICAgICAgIHRvcCA/IHZhbCA6IGpRdWVyeSggd2luICkuc2Nyb2xsVG9wKClcbiAgICAgICAgKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbVsgbWV0aG9kIF0gPSB2YWw7XG4gICAgICB9XG4gICAgfSwgbWV0aG9kLCB2YWwsIGFyZ3VtZW50cy5sZW5ndGgsIG51bGwgKTtcbiAgfTtcbn0pO1xuXG4vLyBBZGQgdGhlIHRvcC9sZWZ0IGNzc0hvb2tzIHVzaW5nIGpRdWVyeS5mbi5wb3NpdGlvblxuLy8gV2Via2l0IGJ1ZzogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTI5MDg0XG4vLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0XG4vLyByYXRoZXIgdGhhbiBtYWtlIHRoZSBjc3MgbW9kdWxlIGRlcGVuZCBvbiB0aGUgb2Zmc2V0IG1vZHVsZSwgd2UganVzdCBjaGVjayBmb3IgaXQgaGVyZVxualF1ZXJ5LmVhY2goIFsgXCJ0b3BcIiwgXCJsZWZ0XCIgXSwgZnVuY3Rpb24oIGksIHByb3AgKSB7XG4gIGpRdWVyeS5jc3NIb29rc1sgcHJvcCBdID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnBpeGVsUG9zaXRpb24sXG4gICAgZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuICAgICAgaWYgKCBjb21wdXRlZCApIHtcbiAgICAgICAgY29tcHV0ZWQgPSBjdXJDU1MoIGVsZW0sIHByb3AgKTtcbiAgICAgICAgLy8gaWYgY3VyQ1NTIHJldHVybnMgcGVyY2VudGFnZSwgZmFsbGJhY2sgdG8gb2Zmc2V0XG4gICAgICAgIHJldHVybiBybnVtbm9ucHgudGVzdCggY29tcHV0ZWQgKSA/XG4gICAgICAgICAgalF1ZXJ5KCBlbGVtICkucG9zaXRpb24oKVsgcHJvcCBdICsgXCJweFwiIDpcbiAgICAgICAgICBjb21wdXRlZDtcbiAgICAgIH1cbiAgICB9XG4gICk7XG59KTtcblxuXG4vLyBDcmVhdGUgaW5uZXJIZWlnaHQsIGlubmVyV2lkdGgsIGhlaWdodCwgd2lkdGgsIG91dGVySGVpZ2h0IGFuZCBvdXRlcldpZHRoIG1ldGhvZHNcbmpRdWVyeS5lYWNoKCB7IEhlaWdodDogXCJoZWlnaHRcIiwgV2lkdGg6IFwid2lkdGhcIiB9LCBmdW5jdGlvbiggbmFtZSwgdHlwZSApIHtcbiAgalF1ZXJ5LmVhY2goIHsgcGFkZGluZzogXCJpbm5lclwiICsgbmFtZSwgY29udGVudDogdHlwZSwgXCJcIjogXCJvdXRlclwiICsgbmFtZSB9LCBmdW5jdGlvbiggZGVmYXVsdEV4dHJhLCBmdW5jTmFtZSApIHtcbiAgICAvLyBtYXJnaW4gaXMgb25seSBmb3Igb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGhcbiAgICBqUXVlcnkuZm5bIGZ1bmNOYW1lIF0gPSBmdW5jdGlvbiggbWFyZ2luLCB2YWx1ZSApIHtcbiAgICAgIHZhciBjaGFpbmFibGUgPSBhcmd1bWVudHMubGVuZ3RoICYmICggZGVmYXVsdEV4dHJhIHx8IHR5cGVvZiBtYXJnaW4gIT09IFwiYm9vbGVhblwiICksXG4gICAgICAgIGV4dHJhID0gZGVmYXVsdEV4dHJhIHx8ICggbWFyZ2luID09PSB0cnVlIHx8IHZhbHVlID09PSB0cnVlID8gXCJtYXJnaW5cIiA6IFwiYm9yZGVyXCIgKTtcblxuICAgICAgcmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIHZhbHVlICkge1xuICAgICAgICB2YXIgZG9jO1xuXG4gICAgICAgIGlmICggalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG4gICAgICAgICAgLy8gQXMgb2YgNS84LzIwMTIgdGhpcyB3aWxsIHlpZWxkIGluY29ycmVjdCByZXN1bHRzIGZvciBNb2JpbGUgU2FmYXJpLCBidXQgdGhlcmVcbiAgICAgICAgICAvLyBpc24ndCBhIHdob2xlIGxvdCB3ZSBjYW4gZG8uIFNlZSBwdWxsIHJlcXVlc3QgYXQgdGhpcyBVUkwgZm9yIGRpc2N1c3Npb246XG4gICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC83NjRcbiAgICAgICAgICByZXR1cm4gZWxlbS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbIFwiY2xpZW50XCIgKyBuYW1lIF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgZG9jdW1lbnQgd2lkdGggb3IgaGVpZ2h0XG4gICAgICAgIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gOSApIHtcbiAgICAgICAgICBkb2MgPSBlbGVtLmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICAgIC8vIEVpdGhlciBzY3JvbGxbV2lkdGgvSGVpZ2h0XSBvciBvZmZzZXRbV2lkdGgvSGVpZ2h0XSBvciBjbGllbnRbV2lkdGgvSGVpZ2h0XSwgd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG4gICAgICAgICAgLy8gdW5mb3J0dW5hdGVseSwgdGhpcyBjYXVzZXMgYnVnICMzODM4IGluIElFNi84IG9ubHksIGJ1dCB0aGVyZSBpcyBjdXJyZW50bHkgbm8gZ29vZCwgc21hbGwgd2F5IHRvIGZpeCBpdC5cbiAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoXG4gICAgICAgICAgICBlbGVtLmJvZHlbIFwic2Nyb2xsXCIgKyBuYW1lIF0sIGRvY1sgXCJzY3JvbGxcIiArIG5hbWUgXSxcbiAgICAgICAgICAgIGVsZW0uYm9keVsgXCJvZmZzZXRcIiArIG5hbWUgXSwgZG9jWyBcIm9mZnNldFwiICsgbmFtZSBdLFxuICAgICAgICAgICAgZG9jWyBcImNsaWVudFwiICsgbmFtZSBdXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAvLyBHZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50LCByZXF1ZXN0aW5nIGJ1dCBub3QgZm9yY2luZyBwYXJzZUZsb2F0XG4gICAgICAgICAgalF1ZXJ5LmNzcyggZWxlbSwgdHlwZSwgZXh0cmEgKSA6XG5cbiAgICAgICAgICAvLyBTZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50XG4gICAgICAgICAgalF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTtcbiAgICAgIH0sIHR5cGUsIGNoYWluYWJsZSA/IG1hcmdpbiA6IHVuZGVmaW5lZCwgY2hhaW5hYmxlLCBudWxsICk7XG4gICAgfTtcbiAgfSk7XG59KTtcblxuXG4vLyBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldFxualF1ZXJ5LmZuLnNpemUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubGVuZ3RoO1xufTtcblxualF1ZXJ5LmZuLmFuZFNlbGYgPSBqUXVlcnkuZm4uYWRkQmFjaztcblxuXG5cblxuLy8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG4vLyBmaWxlcyB0aGF0IG1heSB1c2UgZGVmaW5lLCBidXQgbm90IHZpYSBhIHByb3BlciBjb25jYXRlbmF0aW9uIHNjcmlwdCB0aGF0XG4vLyB1bmRlcnN0YW5kcyBhbm9ueW1vdXMgQU1EIG1vZHVsZXMuIEEgbmFtZWQgQU1EIGlzIHNhZmVzdCBhbmQgbW9zdCByb2J1c3Rcbi8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmVcbi8vIGRlcml2ZWQgZnJvbSBmaWxlIG5hbWVzLCBhbmQgalF1ZXJ5IGlzIG5vcm1hbGx5IGRlbGl2ZXJlZCBpbiBhIGxvd2VyY2FzZVxuLy8gZmlsZSBuYW1lLiBEbyB0aGlzIGFmdGVyIGNyZWF0aW5nIHRoZSBnbG9iYWwgc28gdGhhdCBpZiBhbiBBTUQgbW9kdWxlIHdhbnRzXG4vLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuXG5cbi8vIE5vdGUgdGhhdCBmb3IgbWF4aW11bSBwb3J0YWJpbGl0eSwgbGlicmFyaWVzIHRoYXQgYXJlIG5vdCBqUXVlcnkgc2hvdWxkXG4vLyBkZWNsYXJlIHRoZW1zZWx2ZXMgYXMgYW5vbnltb3VzIG1vZHVsZXMsIGFuZCBhdm9pZCBzZXR0aW5nIGEgZ2xvYmFsIGlmIGFuXG4vLyBBTUQgbG9hZGVyIGlzIHByZXNlbnQuIGpRdWVyeSBpcyBhIHNwZWNpYWwgY2FzZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2pyYnVya2UvcmVxdWlyZWpzL3dpa2kvVXBkYXRpbmctZXhpc3RpbmctbGlicmFyaWVzI3dpa2ktYW5vblxuXG5pZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuICBkZWZpbmUoIFwianF1ZXJ5XCIsIFtdLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4galF1ZXJ5O1xuICB9KTtcbn1cblxuXG5cblxudmFyXG4gIC8vIE1hcCBvdmVyIGpRdWVyeSBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuICBfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSxcblxuICAvLyBNYXAgb3ZlciB0aGUgJCBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuICBfJCA9IHdpbmRvdy4kO1xuXG5qUXVlcnkubm9Db25mbGljdCA9IGZ1bmN0aW9uKCBkZWVwICkge1xuICBpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7XG4gICAgd2luZG93LiQgPSBfJDtcbiAgfVxuXG4gIGlmICggZGVlcCAmJiB3aW5kb3cualF1ZXJ5ID09PSBqUXVlcnkgKSB7XG4gICAgd2luZG93LmpRdWVyeSA9IF9qUXVlcnk7XG4gIH1cblxuICByZXR1cm4galF1ZXJ5O1xufTtcblxuLy8gRXhwb3NlIGpRdWVyeSBhbmQgJCBpZGVudGlmaWVycywgZXZlbiBpblxuLy8gQU1EICgjNzEwMiNjb21tZW50OjEwLCBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzU1Nylcbi8vIGFuZCBDb21tb25KUyBmb3IgYnJvd3NlciBlbXVsYXRvcnMgKCMxMzU2NilcbmlmICggdHlwZW9mIG5vR2xvYmFsID09PSBzdHJ1bmRlZmluZWQgKSB7XG4gIHdpbmRvdy5qUXVlcnkgPSB3aW5kb3cuJCA9IGpRdWVyeTtcbn1cblxuXG5cblxucmV0dXJuIGpRdWVyeTtcblxufSkpO1xuIiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgdGljayA9IHJlcXVpcmUoJ25leHQtdGljaycpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnVmVybycsIGZ1bmN0aW9uKCl7XG4gIHZhciBWZXJvID0gcGx1Z2luO1xuICB2YXIgdmVybztcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgYXBpS2V5OiAnOTk1MDRmZWExN2Q5YjcwODA1ZTQ3MGE2NzJhZjFjNWI2MDhlYjg4ZidcbiAgfTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICB2ZXJvID0gbmV3IFZlcm8ob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKHZlcm8pO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIHZlcm8ucmVzZXQoKTtcbiAgICBzYW5kYm94KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc3RvcmUgdGhlIHByb3BlciBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoVmVybywgaW50ZWdyYXRpb24oJ1Zlcm8nKVxuICAgICAgLmdsb2JhbCgnX3Zlcm9xJylcbiAgICAgIC5vcHRpb24oJ2FwaUtleScsICcnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZWZvcmUgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgYW5hbHl0aWNzLnN0dWIodmVybywgJ2xvYWQnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIHB1c2ggb250byB3aW5kb3cuX3Zlcm9xJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cuX3Zlcm9xWzBdLCBbJ2luaXQnLCB7IGFwaV9rZXk6IG9wdGlvbnMuYXBpS2V5IH1dKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHZlcm8ubG9hZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWRpbmcnLCBmdW5jdGlvbigpe1xuICAgIGl0KCdzaG91bGQgbG9hZCcsIGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLmxvYWQodmVybywgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fdmVyb3EsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwdXNoIFwidHJhY2tQYWdldmlld1wiJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3Zlcm9xLnB1c2gsIFsndHJhY2tQYWdldmlldyddKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy5fdmVyb3EsICdwdXNoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZG50IHNlbmQganVzdCBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmRpZE5vdENhbGwod2luZG93Ll92ZXJvcS5wdXNoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkbnQgc2VuZCB3aXRob3V0IGFuIGlkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5kaWROb3RDYWxsKHdpbmRvdy5fdmVyb3EucHVzaCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkIGFuZCBlbWFpbCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7IGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll92ZXJvcS5wdXNoLCBbJ3VzZXInLCB7XG4gICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgZW1haWw6ICduYW1lQGV4YW1wbGUuY29tJ1xuICAgICAgICB9XSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZW5kIGFuIGlkIGFuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoJ2lkJywge1xuICAgICAgICAgIGVtYWlsOiAnbmFtZUBleGFtcGxlLmNvbScsXG4gICAgICAgICAgdHJhaXQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Ll92ZXJvcS5wdXNoLCBbJ3VzZXInLCB7XG4gICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgZW1haWw6ICduYW1lQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICB0cmFpdDogdHJ1ZVxuICAgICAgICB9XSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjdHJhY2snLCBmdW5jdGlvbigpe1xuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3Muc3R1Yih3aW5kb3cuX3Zlcm9xLCAncHVzaCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cuX3Zlcm9xLnB1c2gsIFsndHJhY2snLCAnZXZlbnQnLCB7fV0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCBhbmQgcHJvcGVydGllcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHByb3BlcnR5OiB0cnVlIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy5fdmVyb3EucHVzaCwgWyd0cmFjaycsICdldmVudCcsIHsgcHJvcGVydHk6IHRydWUgfV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgdGljayA9IHJlcXVpcmUoJ25leHQtdGljaycpO1xudmFyIHBsdWdpbiA9IHJlcXVpcmUoJy4vJyk7XG52YXIgc2FuZGJveCA9IHJlcXVpcmUoJ2NsZWFyLWVudicpO1xuXG5kZXNjcmliZSgnVmlzdWFsIFdlYnNpdGUgT3B0aW1pemVyJywgZnVuY3Rpb24oKXtcbiAgdmFyIFZXTyA9IHBsdWdpbjtcbiAgdmFyIHZ3bztcbiAgdmFyIGFuYWx5dGljcztcbiAgdmFyIG9wdGlvbnMgPSB7fTtcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcztcbiAgICB2d28gPSBuZXcgVldPKG9wdGlvbnMpO1xuICAgIGFuYWx5dGljcy51c2UocGx1Z2luKTtcbiAgICBhbmFseXRpY3MudXNlKHRlc3Rlcik7XG4gICAgYW5hbHl0aWNzLmFkZCh2d28pO1xuXG4gICAgLy8gc2V0IHVwIGZha2UgVldPIGRhdGEgdG8gc2ltdWxhdGUgdGhlIHJlcGxheVxuICAgIHdpbmRvdy5fdndvX2V4cF9pZHMgPSBbMV07XG4gICAgd2luZG93Ll92d29fZXhwID0geyAxOiB7IGNvbWJfbjogeyAxOiAnVmFyaWF0aW9uJyB9LCBjb21iaW5hdGlvbl9jaG9zZW46IDEgfSB9O1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MucmVzdG9yZSgpO1xuICAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgIHZ3by5yZXNldCgpO1xuICAgIHNhbmRib3goKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIHRoZSByaWdodCBzZXR0aW5ncycsIGZ1bmN0aW9uKCl7XG4gICAgYW5hbHl0aWNzLmNvbXBhcmUoVldPLCBpbnRlZ3JhdGlvbignVmlzdWFsIFdlYnNpdGUgT3B0aW1pemVyJylcbiAgICAgIC5vcHRpb24oJ3JlcGxheScsIHRydWUpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1Yih2d28sICdyZXBsYXknKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjaW5pdGlhbGl6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBpdCgnc2hvdWxkIGNhbGwgcmVwbGF5JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh2d28ucmVwbGF5KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNyZXBsYXknLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCByZXBsYXkgdmFyaWF0aW9uIGRhdGEnKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciBwbHVnaW4gPSByZXF1aXJlKCcuLycpO1xudmFyIHNhbmRib3ggPSByZXF1aXJlKCdjbGVhci1lbnYnKTtcblxuZGVzY3JpYmUoJ1dlYkVuZ2FnZScsIGZ1bmN0aW9uKCl7XG4gIHZhciBXZWJFbmdhZ2UgPSBwbHVnaW47XG4gIHZhciB3ZWJlbmdhZ2U7XG4gIHZhciBhbmFseXRpY3M7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGxpY2Vuc2VDb2RlOiAnfjIwMjRjMDAzJ1xuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIHdlYmVuZ2FnZSA9IG5ldyBXZWJFbmdhZ2Uob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKHdlYmVuZ2FnZSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgd2ViZW5nYWdlLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHN0b3JlIHRoZSBjb3JyZWN0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShXZWJFbmdhZ2UsIGludGVncmF0aW9uKCdXZWJFbmdhZ2UnKVxuICAgICAgLmFzc3VtZXNQYWdldmlldygpXG4gICAgICAuZ2xvYmFsKCd3ZWJlbmdhZ2UnKVxuICAgICAgLmdsb2JhbCgnX3dlcScpXG4gICAgICAub3B0aW9uKCd3aWRnZXRWZXJzaW9uJywgJzQuMCcpXG4gICAgICAub3B0aW9uKCdsaWNlbnNlQ29kZScsICcnKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKHdlYmVuZ2FnZSwgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiXG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnYW5hbHl0aWNzLmpzJykuY29uc3RydWN0b3I7XG52YXIgaW50ZWdyYXRpb24gPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24nKTtcbnZhciB0ZXN0ZXIgPSByZXF1aXJlKCdhbmFseXRpY3MuanMtaW50ZWdyYXRpb24tdGVzdGVyJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdXb29wcmEnLCBmdW5jdGlvbigpe1xuICB2YXIgV29vcHJhID0gcGx1Z2luO1xuICB2YXIgd29vcHJhO1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBkb21haW46ICd4JyxcbiAgICBvdXRnb2luZ1RyYWNraW5nOiBmYWxzZVxuICB9O1xuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzO1xuICAgIHdvb3ByYSA9IG5ldyBXb29wcmEob3B0aW9ucyk7XG4gICAgYW5hbHl0aWNzLnVzZShwbHVnaW4pO1xuICAgIGFuYWx5dGljcy51c2UodGVzdGVyKTtcbiAgICBhbmFseXRpY3MuYWRkKHdvb3ByYSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgd29vcHJhLnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShXb29wcmEsIGludGVncmF0aW9uKCdXb29wcmEnKVxuICAgICAgLmdsb2JhbCgnd29vcHJhJylcbiAgICAgIC5vcHRpb24oJ2RvbWFpbicsICcnKVxuICAgICAgLm9wdGlvbignY29va2llTmFtZScsICd3b29UcmFja2VyJylcbiAgICAgIC5vcHRpb24oJ2Nvb2tpZURvbWFpbicsIG51bGwpXG4gICAgICAub3B0aW9uKCdjb29raWVQYXRoJywgJy8nKVxuICAgICAgLm9wdGlvbigncGluZycsIHRydWUpXG4gICAgICAub3B0aW9uKCdwaW5nSW50ZXJ2YWwnLCAxMjAwMClcbiAgICAgIC5vcHRpb24oJ2lkbGVUaW1lb3V0JywgMzAwMDAwKVxuICAgICAgLm9wdGlvbignZG93bmxvYWRUcmFja2luZycsIHRydWUpXG4gICAgICAub3B0aW9uKCdvdXRnb2luZ1RyYWNraW5nJywgdHJ1ZSlcbiAgICAgIC5vcHRpb24oJ291dGdvaW5nSWdub3JlU3ViZG9tYWluJywgdHJ1ZSlcbiAgICAgIC5vcHRpb24oJ2Rvd25sb2FkUGF1c2UnLCAyMDApXG4gICAgICAub3B0aW9uKCdvdXRnb2luZ1BhdXNlJywgNDAwKVxuICAgICAgLm9wdGlvbignaWdub3JlUXVlcnlVcmwnLCB0cnVlKVxuICAgICAgLm9wdGlvbignaGlkZUNhbXBhaWduJywgZmFsc2UpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1Yih3b29wcmEsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSB3b29wcmEgb2JqZWN0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmFzc2VydCghd2luZG93Lndvb3ByYSk7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93Lndvb3ByYSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb25maWd1cmUgd29vcHJhJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICAgICAgYW5hbHl0aWNzLmRlZXBFcXVhbCh3aW5kb3cud29vcHJhLl9lLCBbXG4gICAgICAgICAgWydjb25maWcnLCAnZG9tYWluJywgJ3gnXSxcbiAgICAgICAgICBbJ2NvbmZpZycsICdvdXRnb2luZ190cmFja2luZycsIGZhbHNlXSxcbiAgICAgICAgICBbJ2NvbmZpZycsICdjb29raWVfbmFtZScsICd3b29UcmFja2VyJ10sXG4gICAgICAgICAgWydjb25maWcnLCAnY29va2llX3BhdGgnLCAnLyddLFxuICAgICAgICAgIFsnY29uZmlnJywgJ3BpbmcnLCB0cnVlXSxcbiAgICAgICAgICBbJ2NvbmZpZycsICdwaW5nX2ludGVydmFsJywgMTIwMDBdLFxuICAgICAgICAgIFsnY29uZmlnJywgJ2lkbGVfdGltZW91dCcsIDMwMDAwMF0sXG4gICAgICAgICAgWydjb25maWcnLCAnZG93bmxvYWRfdHJhY2tpbmcnLCB0cnVlXSxcbiAgICAgICAgICBbJ2NvbmZpZycsICdvdXRnb2luZ19pZ25vcmVfc3ViZG9tYWluJywgdHJ1ZV0sXG4gICAgICAgICAgWydjb25maWcnLCAnZG93bmxvYWRfcGF1c2UnLCAyMDBdLFxuICAgICAgICAgIFsnY29uZmlnJywgJ291dGdvaW5nX3BhdXNlJywgNDAwXSxcbiAgICAgICAgICBbJ2NvbmZpZycsICdpZ25vcmVfcXVlcnlfdXJsJywgdHJ1ZV0sXG4gICAgICAgICAgWydjb25maWcnLCAnaGlkZV9jYW1wYWlnbicsIGZhbHNlXVxuICAgICAgICBdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBzZW5kIG9wdGlvbnMgaWYgdGhleSBhcmUgbnVsbCwgb3IgZW1wdHknLCBmdW5jdGlvbigpe1xuICAgICAgICB3b29wcmEub3B0aW9ucy5kb21haW4gPSAnJztcbiAgICAgICAgd29vcHJhLm9wdGlvbnMuY29va2llTmFtZSA9ICcnO1xuICAgICAgICB3b29wcmEub3B0aW9ucy5jb29raWVQYXRoID0gbnVsbDtcbiAgICAgICAgd29vcHJhLm9wdGlvbnMucGluZyA9IG51bGw7XG4gICAgICAgIHdvb3ByYS5vcHRpb25zLnBpbmdJbnRlcnZhbCA9IG51bGw7XG4gICAgICAgIHdvb3ByYS5vcHRpb25zLmlkbGVUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgd29vcHJhLm9wdGlvbnMuZG93bmxvYWRUcmFja2luZyA9IG51bGw7XG4gICAgICAgIHdvb3ByYS5vcHRpb25zLm91dGdvaW5nVHJhY2tpbmcgPSBudWxsO1xuICAgICAgICB3b29wcmEub3B0aW9ucy5vdXRnb2luZ0lnbm9yZVN1YmRvbWFpbiA9IG51bGw7XG4gICAgICAgIHdvb3ByYS5vcHRpb25zLmRvd25sb2FkUGF1c2UgPSAnJztcbiAgICAgICAgd29vcHJhLm9wdGlvbnMub3V0Z29pbmdQYXVzZSA9ICcnO1xuICAgICAgICB3b29wcmEub3B0aW9ucy5pZ25vcmVRdWVyeVVybCA9IG51bGw7XG4gICAgICAgIHdvb3ByYS5vcHRpb25zLmhpZGVDYW1wYWlnbiA9IG51bGw7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5kZWVwRXF1YWwoW10sIHdpbmRvdy53b29wcmEuX2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsbCAjbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod29vcHJhLmxvYWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBpdCgnc2hvdWxkIGxvYWQnLCBmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5sb2FkKHdvb3ByYSwgZG9uZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZnRlciBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpe1xuICAgICAgYW5hbHl0aWNzLm9uY2UoJ3JlYWR5JywgZG9uZSk7XG4gICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgYW5hbHl0aWNzLnBhZ2UoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcjcGFnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy53b29wcmEsICd0cmFjaycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHBhZ2UgdmlldycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lndvb3ByYS50cmFjaywgJ3B2Jywge1xuICAgICAgICAgIHBhdGg6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgICByZWZlcnJlcjogZG9jdW1lbnQucmVmZXJyZXIsXG4gICAgICAgICAgdGl0bGU6IGRvY3VtZW50LnRpdGxlLFxuICAgICAgICAgIHNlYXJjaDogd2luZG93LmxvY2F0aW9uLnNlYXJjaCxcbiAgICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAod2luZG93LmxvY2F0aW9uLnBvcnQgPyAnOicgKyB3aW5kb3cubG9jYXRpb24ucG9ydDogJycpICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhIHRpdGxlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLnBhZ2UoeyB0aXRsZTogJ3RpdGxlJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cud29vcHJhLnRyYWNrLCAncHYnLCB7XG4gICAgICAgICAgdGl0bGU6ICd0aXRsZScsXG4gICAgICAgICAgcGF0aDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICAgIHJlZmVycmVyOiBkb2N1bWVudC5yZWZlcnJlcixcbiAgICAgICAgICBzZWFyY2g6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gsXG4gICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKSArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHByZWZlciBhIG5hbWUnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MucGFnZSgnbmFtZScsIHsgdGl0bGU6ICd0aXRsZScgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lndvb3ByYS50cmFjaywgJ3B2Jywge1xuICAgICAgICAgIHRpdGxlOiAnbmFtZScsXG4gICAgICAgICAgbmFtZTogJ25hbWUnLFxuICAgICAgICAgIHBhdGg6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgICByZWZlcnJlcjogZG9jdW1lbnQucmVmZXJyZXIsXG4gICAgICAgICAgc2VhcmNoOiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLFxuICAgICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJykgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwcmVmZXIgYSBjYXRlZ29yeSBhbmQgbmFtZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5wYWdlKCdjYXRlZ29yeScsICduYW1lJywgeyB0aXRsZTogJ3RpdGxlJyB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cud29vcHJhLnRyYWNrLCAncHYnLCB7XG4gICAgICAgICAgdGl0bGU6ICdjYXRlZ29yeSBuYW1lJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ2NhdGVnb3J5JyxcbiAgICAgICAgICBuYW1lOiAnbmFtZScsXG4gICAgICAgICAgcGF0aDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICAgIHJlZmVycmVyOiBkb2N1bWVudC5yZWZlcnJlcixcbiAgICAgICAgICBzZWFyY2g6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gsXG4gICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKSArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNpZGVudGlmeScsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy53b29wcmEsICdpZGVudGlmeScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cud29vcHJhLmlkZW50aWZ5LCB7IGlkOiAnaWQnIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCB0cmFpdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaWRlbnRpZnkoeyB0cmFpdDogdHJ1ZSB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cud29vcHJhLmlkZW50aWZ5LCB7IHRyYWl0OiB0cnVlIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBpZCBhbmQgdHJhaXRzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgYW5hbHl0aWNzLmlkZW50aWZ5KCdpZCcsIHsgdHJhaXQ6IHRydWUgfSk7XG4gICAgICAgIGFuYWx5dGljcy5jYWxsZWQod2luZG93Lndvb3ByYS5pZGVudGlmeSwgeyBpZDogJ2lkJywgdHJhaXQ6IHRydWUgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBhbGlhcyB0aGUgbmFtZSBwcm9wZXJseScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5pZGVudGlmeSgnaWQnLCB7XG4gICAgICAgICAgZmlyc3ROYW1lOiAnZmlyc3ROYW1lJyxcbiAgICAgICAgICBsYXN0TmFtZTogJ2xhc3ROYW1lJ1xuICAgICAgICB9KTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cud29vcHJhLmlkZW50aWZ5LCB7XG4gICAgICAgICAgbmFtZTogJ2ZpcnN0TmFtZSBsYXN0TmFtZScsXG4gICAgICAgICAgZmlyc3ROYW1lOiAnZmlyc3ROYW1lJyxcbiAgICAgICAgICBsYXN0TmFtZTogJ2xhc3ROYW1lJyxcbiAgICAgICAgICBpZDogJ2lkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyN0cmFjaycsIGZ1bmN0aW9uKCl7XG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5zdHViKHdpbmRvdy53b29wcmEsICd0cmFjaycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc2VuZCBhbiBldmVudCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnKTtcbiAgICAgICAgYW5hbHl0aWNzLmNhbGxlZCh3aW5kb3cud29vcHJhLnRyYWNrLCAnZXZlbnQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlbmQgcHJvcGVydGllcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy50cmFjaygnZXZlbnQnLCB7IHByb3BlcnR5OiAnUHJvcGVydHknIH0pO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHdpbmRvdy53b29wcmEudHJhY2ssICdldmVudCcsIHsgcHJvcGVydHk6ICdQcm9wZXJ0eScgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiLCJcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCdhbmFseXRpY3MuanMnKS5jb25zdHJ1Y3RvcjtcbnZhciBpbnRlZ3JhdGlvbiA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbicpO1xudmFyIHRlc3RlciA9IHJlcXVpcmUoJ2FuYWx5dGljcy5qcy1pbnRlZ3JhdGlvbi10ZXN0ZXInKTtcbnZhciB0aWNrID0gcmVxdWlyZSgnbmV4dC10aWNrJyk7XG52YXIgcGx1Z2luID0gcmVxdWlyZSgnLi8nKTtcbnZhciBzYW5kYm94ID0gcmVxdWlyZSgnY2xlYXItZW52Jyk7XG5cbmRlc2NyaWJlKCdZYW5kZXgnLCBmdW5jdGlvbigpe1xuICB2YXIgWWFuZGV4ID0gcGx1Z2luO1xuICB2YXIgeWFuZGV4O1xuICB2YXIgYW5hbHl0aWNzO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBjb3VudGVySWQ6IDIyNTIyMzUxXG4gIH07XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3M7XG4gICAgeWFuZGV4ID0gbmV3IFlhbmRleChvcHRpb25zKTtcbiAgICBhbmFseXRpY3MudXNlKHBsdWdpbik7XG4gICAgYW5hbHl0aWNzLnVzZSh0ZXN0ZXIpO1xuICAgIGFuYWx5dGljcy5hZGQoeWFuZGV4KTtcbiAgICB3aW5kb3dbJ3lhQ291bnRlcicgKyBvcHRpb25zLmNvdW50ZXJJZF0gPSB1bmRlZmluZWQ7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpe1xuICAgIGFuYWx5dGljcy5yZXN0b3JlKCk7XG4gICAgYW5hbHl0aWNzLnJlc2V0KCk7XG4gICAgeWFuZGV4LnJlc2V0KCk7XG4gICAgc2FuZGJveCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgdGhlIHJpZ2h0IHNldHRpbmdzJywgZnVuY3Rpb24oKXtcbiAgICBhbmFseXRpY3MuY29tcGFyZShZYW5kZXgsIGludGVncmF0aW9uKCdZYW5kZXggTWV0cmljYScpXG4gICAgICAuYXNzdW1lc1BhZ2V2aWV3KClcbiAgICAgIC5nbG9iYWwoJ3lhbmRleF9tZXRyaWthX2NhbGxiYWNrcycpXG4gICAgICAuZ2xvYmFsKCdZYScpXG4gICAgICAub3B0aW9uKCdjb3VudGVySWQnLCBudWxsKVxuICAgICAgLm9wdGlvbignY2xpY2ttYXAnLCBmYWxzZSlcbiAgICAgIC5vcHRpb24oJ3dlYnZpc29yJywgZmFsc2UpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlZm9yZSBsb2FkaW5nJywgZnVuY3Rpb24oKXtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBhbmFseXRpY3Muc3R1Yih5YW5kZXgsICdsb2FkJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2luaXRpYWxpemUnLCBmdW5jdGlvbigpe1xuICAgICAgaXQoJ3Nob3VsZCBwdXNoIG9udG8gdGhlIHlhbmRleF9tZXRyaWNhX2NhbGxiYWNrcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQoIXdpbmRvdy55YW5kZXhfbWV0cmlrYV9jYWxsYmFja3MpO1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuYXNzZXJ0KHdpbmRvdy55YW5kZXhfbWV0cmlrYV9jYWxsYmFja3MubGVuZ3RoID09PSAxKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGwgI2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhbmFseXRpY3MucGFnZSgpO1xuICAgICAgICBhbmFseXRpY3MuY2FsbGVkKHlhbmRleC5sb2FkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgaXQoJ3Nob3VsZCBsb2FkJywgZnVuY3Rpb24oZG9uZSl7XG4gICAgICBhbmFseXRpY3MubG9hZCh5YW5kZXgsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWZ0ZXIgbG9hZGluZycsIGZ1bmN0aW9uKCl7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbihkb25lKXtcbiAgICAgIGFuYWx5dGljcy5vbmNlKCdyZWFkeScsIGRvbmUpO1xuICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcbiAgICAgIGFuYWx5dGljcy5wYWdlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhIHlhQ291bnRlciBvYmplY3QnLCBmdW5jdGlvbigpe1xuICAgICAgdGljayhmdW5jdGlvbigpe1xuICAgICAgICB2YXIga2V5ID0gJ3lhQ291bnRlcicgKyB5YW5kZXgub3B0aW9ucy5jb3VudGVySWQ7XG4gICAgICAgIGFuYWx5dGljcy5hc3NlcnQod2luZG93W2tleV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il19